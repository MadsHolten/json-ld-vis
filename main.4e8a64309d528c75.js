(self.webpackChunkjson_ld_vis=self.webpackChunkjson_ld_vis||[]).push([[179],{4856:(Ne,Re,X)=>{"use strict";function q(n){return"function"==typeof n}function N(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const C=N(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function S(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class F{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(q(r))try{r()}catch(s){e=s instanceof C?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{k(s)}catch(a){e=e??[],a instanceof C?e=[...e,...a.errors]:e.push(a)}}if(e)throw new C(e)}}add(e){var t;if(e&&e!==this)if(this.closed)k(e);else{if(e instanceof F){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&S(t,e)}remove(e){const{_finalizers:t}=this;t&&S(t,e),e instanceof F&&e._removeParent(this)}}F.EMPTY=(()=>{const n=new F;return n.closed=!0,n})();const D=F.EMPTY;function T(n){return n instanceof F||n&&"closed"in n&&q(n.remove)&&q(n.add)&&q(n.unsubscribe)}function k(n){q(n)?n():n.unsubscribe()}const G={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},z={setTimeout(n,e,...t){const{delegate:r}=z;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=z;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function L(n){z.setTimeout(()=>{const{onUnhandledError:e}=G;if(!e)throw n;e(n)})}function U(){}const O=Y("C",void 0,void 0);function Y(n,e,t){return{kind:n,value:e,error:t}}let se=null;function te(n){if(G.useDeprecatedSynchronousErrorHandling){const e=!se;if(e&&(se={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=se;if(se=null,t)throw r}}else n()}class ce extends F{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,T(e)&&e.add(this)):this.destination=_e}static create(e,t,r){return new ee(e,t,r)}next(e){this.isStopped?ae(function ie(n){return Y("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?ae(function V(n){return Y("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ae(O,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const W=Function.prototype.bind;function B(n,e){return W.call(n,e)}class H{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){le(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){le(r)}else le(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){le(t)}}}class ee extends ce{constructor(e,t,r){let i;if(super(),q(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&G.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&B(e.next,s),error:e.error&&B(e.error,s),complete:e.complete&&B(e.complete,s)}):i=e}this.destination=new H(i)}}function le(n){G.useDeprecatedSynchronousErrorHandling?function be(n){G.useDeprecatedSynchronousErrorHandling&&se&&(se.errorThrown=!0,se.error=n)}(n):L(n)}function ae(n,e){const{onStoppedNotification:t}=G;t&&z.setTimeout(()=>t(n,e))}const _e={closed:!0,next:U,error:function me(n){throw n},complete:U},Le="function"==typeof Symbol&&Symbol.observable||"@@observable";function ye(n){return n}let Ie=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function nt(n){return n&&n instanceof ce||function pe(n){return n&&q(n.next)&&q(n.error)&&q(n.complete)}(n)&&T(n)}(t)?t:new ee(t,r,i);return te(()=>{const{operator:a,source:u}=this;s.add(a?a.call(s,u):u?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=we(r))((i,s)=>{const a=new ee({next:u=>{try{t(u)}catch(h){s(h),a.unsubscribe()}},error:s,complete:i});this.subscribe(a)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Le](){return this}pipe(...t){return function He(n){return 0===n.length?ye:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}(t)(this)}toPromise(t){return new(t=we(t))((r,i)=>{let s;this.subscribe(a=>s=a,a=>i(a),()=>r(s))})}}return n.create=e=>new n(e),n})();function we(n){var e;return null!==(e=n??G.Promise)&&void 0!==e?e:Promise}const qe=N(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Oe=(()=>{class n extends Ie{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new Je(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new qe}next(t){te(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){te(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){te(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?D:(this.currentObservers=null,s.push(t),new F(()=>{this.currentObservers=null,S(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new Ie;return t.source=this,t}}return n.create=(e,t)=>new Je(e,t),n})();class Je extends Oe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:D}}function pt(n){return e=>{if(function Pt(n){return q(n?.lift)}(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function at(n,e,t,r,i){return new ut(n,e,t,r,i)}class ut extends ce{constructor(e,t,r,i,s,a){super(e),this.onFinalize=s,this.shouldUnsubscribe=a,this._next=t?function(u){try{t(u)}catch(h){e.error(h)}}:super._next,this._error=i?function(u){try{i(u)}catch(h){e.error(h)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function We(n,e){return pt((t,r)=>{let i=0;t.subscribe(at(r,s=>{r.next(n.call(e,s,i++))}))})}function jn(n){return this instanceof jn?(this.v=n,this):new jn(n)}function ed(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(n,e||[]),s=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(I){r[I]&&(i[I]=function(j){return new Promise(function(Q,oe){s.push([I,j,Q,oe])>1||u(I,j)})})}function u(I,j){try{!function h(I){I.value instanceof jn?Promise.resolve(I.value.v).then(m,v):x(s[0][2],I)}(r[I](j))}catch(Q){x(s[0][3],Q)}}function m(I){u("next",I)}function v(I){u("throw",I)}function x(I,j){I(j),s.shift(),s.length&&u(s[0][0],s[0][1])}}function Ca(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function Ms(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(a){return new Promise(function(u,h){!function i(s,a,u,h){Promise.resolve(h).then(function(m){s({value:m,done:u})},a)}(u,h,(a=n[s](a)).done,a.value)})}}}const Si=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function na(n){return q(n?.then)}function Ma(n){return q(n[Le])}function ra(n){return Symbol.asyncIterator&&q(n?.[Symbol.asyncIterator])}function td(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const ul=function cl(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Rh(n){return q(n?.[ul])}function po(n){return ed(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield jn(t.read());if(i)return yield jn(void 0);yield yield jn(r)}}finally{t.releaseLock()}})}function go(n){return q(n?.getReader)}function ls(n){if(n instanceof Ie)return n;if(null!=n){if(Ma(n))return function Aa(n){return new Ie(e=>{const t=n[Le]();if(q(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Si(n))return function Ph(n){return new Ie(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(na(n))return function Nh(n){return new Ie(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,L)})}(n);if(ra(n))return rd(n);if(Rh(n))return function nd(n){return new Ie(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(go(n))return function Tp(n){return rd(po(n))}(n)}throw td(n)}function rd(n){return new Ie(e=>{(function Uc(n,e){var t,r,i,s;return function wr(n,e,t,r){return new(t||(t=Promise))(function(s,a){function u(v){try{m(r.next(v))}catch(x){a(x)}}function h(v){try{m(r.throw(v))}catch(x){a(x)}}function m(v){v.done?s(v.value):function i(s){return s instanceof t?s:new t(function(a){a(s)})}(v.value).then(u,h)}m((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=Ca(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(a){i={error:a}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function mo(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Ta(n,e,t=1/0){return q(e)?Ta((r,i)=>We((s,a)=>e(r,s,i,a))(ls(n(r,i))),t):("number"==typeof e&&(t=e),pt((r,i)=>function Gc(n,e,t,r,i,s,a,u){const h=[];let m=0,v=0,x=!1;const I=()=>{x&&!h.length&&!m&&e.complete()},j=oe=>m<r?Q(oe):h.push(oe),Q=oe=>{s&&e.next(oe),m++;let ve=!1;ls(t(oe,v++)).subscribe(at(e,Pe=>{i?.(Pe),s?j(Pe):e.next(Pe)},()=>{ve=!0},void 0,()=>{if(ve)try{for(m--;h.length&&m<r;){const Pe=h.shift();a?mo(e,a,()=>Q(Pe)):Q(Pe)}I()}catch(Pe){e.error(Pe)}}))};return n.subscribe(at(e,j,()=>{x=!0,I()})),()=>{u?.()}}(r,i,n,t)))}function $c(n=1/0){return Ta(ye,n)}const Sr=new Ie(n=>n.complete());function id(n){return n&&q(n.schedule)}function Is(n){return n[n.length-1]}function Lh(n){return q(Is(n))?n.pop():void 0}function dl(n){return id(Is(n))?n.pop():void 0}function sd(n,e=0){return pt((t,r)=>{t.subscribe(at(r,i=>mo(r,n,()=>r.next(i),e),()=>mo(r,n,()=>r.complete(),e),i=>mo(r,n,()=>r.error(i),e)))})}function yi(n,e=0){return pt((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function yo(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ie(t=>{mo(t,e,()=>{const r=n[Symbol.asyncIterator]();mo(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function hl(n,e){return e?function cs(n,e){if(null!=n){if(Ma(n))return function ia(n,e){return ls(n).pipe(yi(e),sd(e))}(n,e);if(Si(n))return function Sv(n,e){return new Ie(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(na(n))return function od(n,e){return ls(n).pipe(yi(e),sd(e))}(n,e);if(ra(n))return yo(n,e);if(Rh(n))return function vo(n,e){return new Ie(t=>{let r;return mo(t,e,()=>{r=n[ul](),mo(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(a){return void t.error(a)}s?t.complete():t.next(i)},0,!0)}),()=>q(r?.return)&&r.return()})}(n,e);if(go(n))return function Fh(n,e){return yo(po(n),e)}(n,e)}throw td(n)}(n,e):ls(n)}function Bh(...n){const e=dl(n),t=function Ip(n,e){return"number"==typeof Is(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?ls(r[0]):$c(t)(hl(r,e)):Sr}function ka(n={}){const{connector:e=(()=>new Oe),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let a,u,h,m=0,v=!1,x=!1;const I=()=>{u?.unsubscribe(),u=void 0},j=()=>{I(),a=h=void 0,v=x=!1},Q=()=>{const oe=a;j(),oe?.unsubscribe()};return pt((oe,ve)=>{m++,!x&&!v&&I();const Pe=h=h??e();ve.add(()=>{m--,0===m&&!x&&!v&&(u=fl(Q,i))}),Pe.subscribe(ve),!a&&m>0&&(a=new ee({next:Ke=>Pe.next(Ke),error:Ke=>{x=!0,I(),u=fl(j,t,Ke),Pe.error(Ke)},complete:()=>{v=!0,I(),u=fl(j,r),Pe.complete()}}),ls(oe).subscribe(a))})(s)}}function fl(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new ee({next:()=>{r.unsubscribe(),n()}});return ls(e(...t)).subscribe(r)}function yr(n){for(let e in n)if(n[e]===yr)return e;throw Error("Could not find renamed property on target object.")}function Ae(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function xe(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(xe).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Ue(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const bt=yr({__forward_ref__:yr});function lt(n){return n.__forward_ref__=lt,n.toString=function(){return xe(this())},n}function dt(n){return function Jt(n){return"function"==typeof n&&n.hasOwnProperty(bt)&&n.__forward_ref__===lt}(n)?n():n}function Bt(n){return n&&!!n.\u0275providers}const gn="https://g.co/ng/security#xss";class Ye extends Error{constructor(e,t){super(function er(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}(e,t)),this.code=e}}function Wt(n){return"string"==typeof n?n:null==n?"":String(n)}function Yn(n,e){throw new Ye(-201,!1)}function bi(n,e){null==n&&function wn(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function nn(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function gr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Io(n){return Ys(n,Ia)||Ys(n,qc)}function Ys(n,e){return n.hasOwnProperty(e)?n[e]:null}function Oo(n){return n&&(n.hasOwnProperty(ld)||n.hasOwnProperty(Op))?n[ld]:null}const Ia=yr({\u0275prov:yr}),ld=yr({\u0275inj:yr}),qc=yr({ngInjectableDef:yr}),Op=yr({ngInjectorDef:yr});var bn=(()=>((bn=bn||{})[bn.Default=0]="Default",bn[bn.Host=1]="Host",bn[bn.Self=2]="Self",bn[bn.SkipSelf=4]="SkipSelf",bn[bn.Optional=8]="Optional",bn))();let cd;function Mr(n){const e=cd;return cd=n,e}function Xs(n,e,t){const r=Io(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&bn.Optional?null:void 0!==e?e:void Yn(xe(n))}const Er=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),wo={},Pa="__NG_DI_FLAG__",Os="ngTempTokenPath",Hh=/\n/gm,Zi="__source";let Yc;function vl(n){const e=Yc;return Yc=n,e}function dd(n,e=bn.Default){if(void 0===Yc)throw new Ye(-203,!1);return null===Yc?Xs(n,void 0,e):Yc.get(n,e&bn.Optional?null:void 0,e)}function St(n,e=bn.Default){return(function Rp(){return cd}()||dd)(dt(n),e)}function Ro(n,e=bn.Default){return St(n,Xc(e))}function Xc(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Np(n){const e=[];for(let t=0;t<n.length;t++){const r=dt(n[t]);if(Array.isArray(r)){if(0===r.length)throw new Ye(900,!1);let i,s=bn.Default;for(let a=0;a<r.length;a++){const u=r[a],h=Av(u);"number"==typeof h?-1===h?i=u.token:s|=h:i=u}e.push(St(i,s))}else e.push(St(r))}return e}function hd(n,e){return n[Pa]=e,n.prototype[Pa]=e,n}function Av(n){return n[Pa]}function Ks(n){return{toString:n}.toString()}var Po=(()=>((Po=Po||{})[Po.OnPush=0]="OnPush",Po[Po.Default=1]="Default",Po))(),No=(()=>{return(n=No||(No={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",No;var n})();const Na={},mr=[],fd=yr({\u0275cmp:yr}),Lp=yr({\u0275dir:yr}),Fp=yr({\u0275pipe:yr}),La=yr({\u0275fac:yr}),pd=yr({__NG_ELEMENT_ID__:yr});let fw=0;function Qi(n){return Ks(()=>{const t=!0===n.standalone,r={},i={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Po.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||mr,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||No.Emulated,id:"c"+fw++,styles:n.styles||mr,_:null,setInput:null,schemas:n.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},s=n.dependencies,a=n.features;return i.inputs=Bp(n.inputs,r),i.outputs=Bp(n.outputs),a&&a.forEach(u=>u(i)),i.directiveDefs=s?()=>("function"==typeof s?s():s).map(Rv).filter(Pv):null,i.pipeDefs=s?()=>("function"==typeof s?s():s).map(Mi).filter(Pv):null,i})}function Rv(n){return nr(n)||ci(n)}function Pv(n){return null!==n}function ei(n){return Ks(()=>({type:n.type,bootstrap:n.bootstrap||mr,declarations:n.declarations||mr,imports:n.imports||mr,exports:n.exports||mr,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Bp(n,e){if(null==n)return Na;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}const fn=Qi;function nr(n){return n[fd]||null}function ci(n){return n[Lp]||null}function Mi(n){return n[Fp]||null}function Zs(n){return Array.isArray(n)&&"object"==typeof n[1]}function Eo(n){return Array.isArray(n)&&!0===n[1]}function jp(n){return 0!=(4&n.flags)}function yd(n){return n.componentOffset>-1}function $h(n){return 1==(1&n.flags)}function Ps(n){return null!==n.template}function mw(n){return 0!=(256&n[2])}function sa(n,e){return n.hasOwnProperty(La)?n[La]:null}class lr{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Vn(){return Qt}function Qt(n){return n.type.prototype.ngOnChanges&&(n.setInput=Cw),Gp}function Gp(){const n=Uv(this),e=n?.current;if(e){const t=n.previous;if(t===Na)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function Cw(n,e,t,r){const i=this.declaredInputs[t],s=Uv(n)||function tu(n,e){return n[jv]=e}(n,{previous:Na,current:null}),a=s.current||(s.current={}),u=s.previous,h=u[i];a[i]=new lr(h&&h.currentValue,e,u===Na),n[r]=e}Vn.ngInherit=!0;const jv="__ngSimpleChanges__";function Uv(n){return n[jv]||null}function zi(n){for(;Array.isArray(n);)n=n[0];return n}function _d(n,e){return zi(e[n])}function Qs(n,e){return zi(e[n.index])}function Wh(n,e){return n.data[e]}function rr(n,e){const t=e[n];return Zs(t)?t:t[0]}function qh(n){return 64==(64&n[2])}function _l(n,e){return null==e?null:n[e]}function Fa(n){n[18]=0}function aa(n,e){n[5]+=e;let t=n,r=n[3];for(;null!==r&&(1===e&&1===t[5]||-1===e&&0===t[5]);)r[5]+=e,t=r,r=r[3]}const yn={lFrame:ey(null),bindingsEnabled:!0};function Yv(){return yn.bindingsEnabled}function At(){return yn.lFrame.lView}function Un(){return yn.lFrame.tView}function Bo(n){return yn.lFrame.contextLView=n,n[8]}function Ns(n){return yn.lFrame.contextLView=null,n}function Tr(){let n=qp();for(;null!==n&&64===n.type;)n=n.parent;return n}function qp(){return yn.lFrame.currentTNode}function Vo(n,e){const t=yn.lFrame;t.currentTNode=n,t.isParent=e}function Yp(){return yn.lFrame.isParent}function wl(){yn.lFrame.isParent=!1}function El(){return yn.lFrame.bindingIndex++}function Zv(n,e){const t=yn.lFrame;t.bindingIndex=t.bindingRootIndex=n,Yh(e)}function Yh(n){yn.lFrame.currentDirectiveIndex=n}function Qv(){return yn.lFrame.currentQueryIndex}function ac(n){yn.lFrame.currentQueryIndex=n}function Cd(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function Kp(n,e,t){if(t&bn.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&bn.Host||(i=Cd(s),null===i||(s=s[15],10&i.type))););if(null===i)return!1;e=i,n=s}const r=yn.lFrame=Jv();return r.currentTNode=e,r.lView=n,!0}function Zp(n){const e=Jv(),t=n[1];yn.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Jv(){const n=yn.lFrame,e=null===n?null:n.child;return null===e?ey(n):e}function ey(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function ty(){const n=yn.lFrame;return yn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const ny=ty;function Qp(){const n=ty();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function hs(){return yn.lFrame.selectedIndex}function Dl(n){yn.lFrame.selectedIndex=n}function Yr(){const n=yn.lFrame;return Wh(n.tView,n.selectedIndex)}function Zh(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:u,ngAfterViewInit:h,ngAfterViewChecked:m,ngOnDestroy:v}=s;a&&(n.contentHooks||(n.contentHooks=[])).push(-t,a),u&&((n.contentHooks||(n.contentHooks=[])).push(t,u),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,u)),h&&(n.viewHooks||(n.viewHooks=[])).push(-t,h),m&&((n.viewHooks||(n.viewHooks=[])).push(t,m),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,m)),null!=v&&(n.destroyHooks||(n.destroyHooks=[])).push(t,v)}}function Md(n,e,t){Td(n,e,3,t)}function Ad(n,e,t,r){(3&n[2])===t&&Td(n,e,t,r)}function eg(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function Td(n,e,t,r){const s=r??-1,a=e.length-1;let u=0;for(let h=void 0!==r?65535&n[18]:0;h<a;h++)if("number"==typeof e[h+1]){if(u=e[h],null!=r&&u>=r)break}else e[h]<0&&(n[18]+=65536),(u<s||-1==s)&&(Cl(n,t,e,h),n[18]=(4294901760&n[18])+h+2),h++}function Cl(n,e,t,r){const i=t[r]<0,s=t[r+1],u=n[i?-t[r]:t[r]];if(i){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(u)}finally{}}}else try{s.call(u)}finally{}}class iu{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function ou(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],a=t[r++],u=t[r++];n.setAttribute(e,a,u,s)}else{const s=i,a=t[++r];ay(s)?n.setProperty(e,s,a):n.setAttribute(e,s,a),r++}}return r}function oy(n){return 3===n||4===n||6===n}function ay(n){return 64===n.charCodeAt(0)}function Sl(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||tg(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function tg(n,e,t,r,i){let s=0,a=n.length;if(-1===e)a=-1;else for(;s<n.length;){const u=n[s++];if("number"==typeof u){if(u===e){a=-1;break}if(u>e){a=s-1;break}}}for(;s<n.length;){const u=n[s];if("number"==typeof u)break;if(u===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==a&&(n.splice(a,0,e),s=a+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}function kd(n){return-1!==n}function cc(n){return 32767&n}function au(n,e){let t=function ji(n){return n>>16}(n),r=e;for(;t>0;)r=r[15],t--;return r}let Id=!0;function Va(n){const e=Id;return Id=n,e}let Nw=0;const Ui={};function Ha(n,e){const t=ng(n,e);if(-1!==t)return t;const r=e[1];r.firstCreatePass&&(n.injectorIndex=e.length,Ai(r.data,n),Ai(e,null),Ai(r.blueprint,null));const i=Qh(n,e),s=n.injectorIndex;if(kd(i)){const a=cc(i),u=au(i,e),h=u[1].data;for(let m=0;m<8;m++)e[s+m]=u[a+m]|h[a+m]}return e[s+8]=i,s}function Ai(n,e){n.push(0,0,0,0,0,0,0,0,e)}function ng(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Qh(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=og(i),null===r)return-1;if(t++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function Jh(n,e,t){!function uy(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(pd)&&(r=t[pd]),null==r&&(r=t[pd]=Nw++);const i=255&r;e.data[n+(i>>5)]|=1<<i}(n,e,t)}function rg(n,e,t){if(t&bn.Optional||void 0!==n)return n;Yn()}function ig(n,e,t,r){if(t&bn.Optional&&void 0===r&&(r=null),!(t&(bn.Self|bn.Host))){const i=n[9],s=Mr(void 0);try{return i?i.get(e,r,t&bn.Optional):Xs(e,r,t&bn.Optional)}finally{Mr(s)}}return rg(r,0,t)}function Ti(n,e,t,r=bn.Default,i){if(null!==n){if(1024&e[2]){const a=function Fw(n,e,t,r,i){let s=n,a=e;for(;null!==s&&null!==a&&1024&a[2]&&!(256&a[2]);){const u=kr(s,a,t,r|bn.Self,Ui);if(u!==Ui)return u;let h=s.parent;if(!h){const m=a[21];if(m){const v=m.get(t,Ui,r);if(v!==Ui)return v}h=og(a),a=a[15]}s=h}return i}(n,e,t,r,Ui);if(a!==Ui)return a}const s=kr(n,e,t,r,Ui);if(s!==Ui)return s}return ig(e,t,r,i)}function kr(n,e,t,r,i){const s=function Rr(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(pd)?n[pd]:void 0;return"number"==typeof e?e>=0?255&e:lu:e}(t);if("function"==typeof s){if(!Kp(e,n,r))return r&bn.Host?rg(i,0,r):ig(e,t,r,i);try{const a=s(r);if(null!=a||r&bn.Optional)return a;Yn()}finally{ny()}}else if("number"==typeof s){let a=null,u=ng(n,e),h=-1,m=r&bn.Host?e[16][6]:null;for((-1===u||r&bn.SkipSelf)&&(h=-1===u?Qh(n,e):e[u+8],-1!==h&&sg(r,!1)?(a=e[1],u=cc(h),e=au(h,e)):u=-1);-1!==u;){const v=e[1];if(Od(s,u,v.data)){const x=Lw(u,e,t,a,r,m);if(x!==Ui)return x}h=e[u+8],-1!==h&&sg(r,e[1].data[u+8]===m)&&Od(s,u,e)?(a=v,u=cc(h),e=au(h,e)):u=-1}}return i}function Lw(n,e,t,r,i,s){const a=e[1],u=a.data[n+8],v=ef(u,a,t,null==r?yd(u)&&Id:r!=a&&0!=(3&u.type),i&bn.Host&&s===u);return null!==v?uc(e,a,v,u):Ui}function ef(n,e,t,r,i){const s=n.providerIndexes,a=e.data,u=1048575&s,h=n.directiveStart,v=s>>20,I=i?u+v:n.directiveEnd;for(let j=r?u:u+v;j<I;j++){const Q=a[j];if(j<h&&t===Q||j>=h&&Q.type===t)return j}if(i){const j=a[h];if(j&&Ps(j)&&j.type===t)return h}return null}function uc(n,e,t,r){let i=n[t];const s=e.data;if(function Ow(n){return n instanceof iu}(i)){const a=i;a.resolving&&function Ir(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Ye(-200,`Circular dependency in DI detected for ${n}${t}`)}(function qt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Wt(n)}(s[t]));const u=Va(a.canSeeViewProviders);a.resolving=!0;const h=a.injectImpl?Mr(a.injectImpl):null;Kp(n,r,bn.Default);try{i=n[t]=a.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function iy(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const a=Qt(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,a),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,a)}i&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,i),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==h&&Mr(h),Va(u),a.resolving=!1,ny()}}return i}function Od(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function sg(n,e){return!(n&bn.Self||n&bn.Host&&e)}class dc{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Ti(this._tNode,this._lView,e,Xc(r),t)}}function lu(){return new dc(Tr(),At())}function og(n){const e=n[1],t=e.type;return 2===t?e.declTNode:1===t?n[6]:null}function Rd(n){return function dy(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(oy(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(Tr(),n)}const za="__parameters__";function du(n,e,t){return Ks(()=>{const r=function uu(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const a=new i(...s);return u.annotation=a,u;function u(h,m,v){const x=h.hasOwnProperty(za)?h[za]:Object.defineProperty(h,za,{value:[]})[za];for(;x.length<=v;)x.push(null);return(x[v]=x[v]||[]).push(a),h}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}class Gt{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=nn({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function zo(n,e){n.forEach(t=>Array.isArray(t)?zo(t,e):e(t))}function hu(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function gc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Nd(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}function Ls(n,e,t){let r=mc(n,e);return r>=0?n[1|r]=t:(r=~r,function fy(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function ug(n,e){const t=mc(n,e);if(t>=0)return n[1|t]}function mc(n,e){return function gy(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),a=n[s<<t];if(e===a)return s<<t;a>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const cf=hd(du("Inject",n=>({token:n})),-1),Ml=hd(du("Optional"),8),Ld=hd(du("SkipSelf"),4);var ni=(()=>((ni=ni||{})[ni.Important=1]="Important",ni[ni.DashCase=2]="DashCase",ni))();const Tl=new Map;let bg=0;const xg="__ngContext__";function rs(n,e){Zs(e)?(n[xg]=e[20],function nx(n){Tl.set(n[20],n)}(e)):n[xg]=e}function bc(n,e){return undefined(n,e)}function jd(n){const e=n[3];return Eo(e)?e[3]:e}function Dg(n){return Ry(n[13])}function Cg(n){return Ry(n[4])}function Ry(n){for(;null!==n&&!Eo(n);)n=n[4];return n}function yu(n,e,t,r,i){if(null!=r){let s,a=!1;Eo(r)?s=r:Zs(r)&&(a=!0,r=r[0]);const u=zi(r);0===n&&null!==t?null==i?jy(e,t,u):is(e,t,u,i||null,!0):1===n&&null!==t?is(e,t,u,i||null,!0):2===n?function ca(n,e,t){const r=mf(n,e);r&&function dx(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,u,a):3===n&&e.destroyNode(u),null!=s&&function $y(n,e,t,r,i){const s=t[7];s!==zi(t)&&yu(e,n,r,s,i);for(let u=10;u<t.length;u++){const h=t[u];bu(h[1],h,n,e,r,s)}}(e,n,s,t,i)}}function Mg(n,e,t){return n.createElement(e,t)}function By(n,e){const t=n[9],r=t.indexOf(e),i=e[3];512&e[2]&&(e[2]&=-513,aa(i,-1)),t.splice(r,1)}function gf(n,e){if(n.length<=10)return;const t=10+e,r=n[t];if(r){const i=r[17];null!==i&&i!==n&&By(i,r),e>0&&(n[t-1][4]=r[4]);const s=gc(n,10+e);!function Ny(n,e){bu(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function Ag(n,e){if(!(128&e[2])){const t=e[11];t.destroyNode&&bu(n,e,t,3,null,null),function Ly(n){let e=n[13];if(!e)return Tg(n[1],n);for(;e;){let t=null;if(Zs(e))t=e[13];else{const r=e[10];r&&(t=r)}if(!t){for(;e&&!e[4]&&e!==n;)Zs(e)&&Tg(e[1],e),e=e[3];null===e&&(e=n),Zs(e)&&Tg(e[1],e),t=e&&e[4]}e=t}}(e)}}function Tg(n,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function Vy(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof iu)){const s=t[r+1];if(Array.isArray(s))for(let a=0;a<s.length;a+=2){const u=i[s[a]],h=s[a+1];try{h.call(u)}finally{}}else try{s.call(i)}finally{}}}}(n,e),function ux(n,e){const t=n.cleanup,r=e[7];let i=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const a=t[s+3];a>=0?r[i=a]():r[i=-a].unsubscribe(),s+=2}else{const a=r[i=t[s+1]];t[s].call(a)}if(null!==r){for(let s=i+1;s<r.length;s++)(0,r[s])();e[7]=null}}(n,e),1===e[1].type&&e[11].destroy();const t=e[17];if(null!==t&&Eo(e[3])){t!==e[3]&&By(t,e);const r=e[19];null!==r&&r.detachView(n)}!function hf(n){Tl.delete(n[20])}(e)}}function Hy(n,e,t){return function zy(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[0];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===No.None||s===No.Emulated)return null}return Qs(r,t)}}(n,e.parent,t)}function is(n,e,t,r,i){n.insertBefore(e,t,r,i)}function jy(n,e,t){n.appendChild(e,t)}function Uy(n,e,t,r,i){null!==r?is(n,e,t,r,i):jy(n,e,t)}function mf(n,e){return n.parentNode(e)}function la(n,e,t){return vf(n,e,t)}let Wd,Ng,vf=function Ig(n,e,t){return 40&n.type?Qs(n,t):null};function Ga(n,e,t,r){const i=Hy(n,r,e),s=e[11],u=la(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(t))for(let h=0;h<t.length;h++)Uy(s,i,t[h],u,!1);else Uy(s,i,t,u,!1)}function Gd(n,e){if(null!==e){const t=e.type;if(3&t)return Qs(e,n);if(4&t)return Og(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Gd(n,r);{const i=n[e.index];return Eo(i)?Og(-1,i):zi(i)}}if(32&t)return bc(e,n)()||zi(n[e.index]);{const r=Fs(n,e);return null!==r?Array.isArray(r)?r[0]:Gd(jd(n[16]),r):Gd(n,e.next)}}return null}function Fs(n,e){return null!==e?n[16][6].projection[e.projection]:null}function Og(n,e){const t=10+n+1;if(t<e.length){const r=e[t],i=r[1].firstChild;if(null!==i)return Gd(r,i)}return e[7]}function yf(n,e,t,r,i,s,a){for(;null!=t;){const u=r[t.index],h=t.type;if(a&&0===e&&(u&&rs(zi(u),r),t.flags|=2),32!=(32&t.flags))if(8&h)yf(n,e,t.child,r,i,s,!1),yu(e,n,i,u,s);else if(32&h){const m=bc(t,r);let v;for(;v=m();)yu(e,n,i,v,s);yu(e,n,i,u,s)}else 16&h?bf(n,e,r,t,i,s):yu(e,n,i,u,s);t=a?t.projectionNext:t.next}}function bu(n,e,t,r,i,s){yf(t,r,n.firstChild,e,i,s,!1)}function bf(n,e,t,r,i,s){const a=t[16],h=a[6].projection[r.projection];if(Array.isArray(h))for(let m=0;m<h.length;m++)yu(e,n,i,h[m],s);else yf(n,e,h,a[3],i,s,!0)}function Wy(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Pg(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&ou(n,e,r),null!==i&&Wy(n,e,i),null!==s&&function $d(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function _c(n){return function _f(){if(void 0===Wd&&(Wd=null,Er.trustedTypes))try{Wd=Er.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Wd}()?.createHTML(n)||n}class kl{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${gn})`}}class wc extends kl{getTypeName(){return"HTML"}}class fx extends kl{getTypeName(){return"Style"}}class xc extends kl{getTypeName(){return"Script"}}class c extends kl{getTypeName(){return"URL"}}class o extends kl{getTypeName(){return"ResourceURL"}}function l(n){return n instanceof kl?n.changingThisBreaksApplicationSecurity:n}function d(n,e){const t=function f(n){return n instanceof kl&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${gn})`)}return t===e}class E{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(_c(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class M{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const r=this.inertDocument.createElement("body");t.appendChild(r)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=_c(e),t;const r=this.inertDocument.createElement("body");return r.innerHTML=_c(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(r),r}stripCustomNsAttrs(e){const t=e.attributes;for(let i=t.length-1;0<i;i--){const a=t.item(i).name;("xmlns:ns1"===a||0===a.indexOf("ns1:"))&&e.removeAttribute(a)}let r=e.firstChild;for(;r;)r.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(r),r=r.nextSibling}}const P=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function $(n){return(n=String(n)).match(P)?n:"unsafe:"+n}function K(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function J(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const ne=K("area,br,col,hr,img,wbr"),re=K("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ue=K("rp,rt"),Ee=J(ne,J(re,K("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),J(ue,K("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),J(ue,re)),he=K("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ge=J(he,K("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),K("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Fe=K("script,style,template");class Me{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let i=this.checkClobberedElement(t,t.nextSibling);if(i){t=i;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!Ee.hasOwnProperty(t))return this.sanitizedSomething=!0,!Fe.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let i=0;i<r.length;i++){const s=r.item(i),a=s.name,u=a.toLowerCase();if(!ge.hasOwnProperty(u)){this.sanitizedSomething=!0;continue}let h=s.value;he[u]&&(h=$(h)),this.buf.push(" ",a,'="',je(h),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();Ee.hasOwnProperty(t)&&!ne.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(je(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const Xe=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ve=/([^\#-~ |!])/g;function je(n){return n.replace(/&/g,"&amp;").replace(Xe,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(Ve,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Qe;function it(n,e){let t=null;try{Qe=Qe||function w(n){const e=new M(n);return function R(){try{return!!(new window.DOMParser).parseFromString(_c(""),"text/html")}catch{return!1}}()?new E(e):e}(n);let r=e?String(e):"";t=Qe.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=Qe.getInertBodyElement(r)}while(r!==s);return _c((new Me).sanitizeChildren(ct(t)||t))}finally{if(t){const r=ct(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function ct(n){return"content"in n&&function rt(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var tt=(()=>((tt=tt||{})[tt.NONE=0]="NONE",tt[tt.HTML=1]="HTML",tt[tt.STYLE=2]="STYLE",tt[tt.SCRIPT=3]="SCRIPT",tt[tt.URL=4]="URL",tt[tt.RESOURCE_URL=5]="RESOURCE_URL",tt))();const Ft=new Gt("ENVIRONMENT_INITIALIZER"),pn=new Gt("INJECTOR",-1),en=new Gt("INJECTOR_DEF_TYPES");class jt{get(e,t=wo){if(t===wo){const r=new Error(`NullInjectorError: No provider for ${xe(e)}!`);throw r.name="NullInjectorError",r}return t}}function Hn(...n){return{\u0275providers:An(0,n),\u0275fromNgModule:!0}}function An(n,...e){const t=[],r=new Set;let i;return zo(e,s=>{const a=s;Rt(a,t,[],r)&&(i||(i=[]),i.push(a))}),void 0!==i&&mn(i,t),t}function mn(n,e){for(let t=0;t<n.length;t++){const{providers:i}=n[t];ot(i,s=>{e.push(s)})}}function Rt(n,e,t,r){if(!(n=dt(n)))return!1;let i=null,s=Oo(n);const a=!s&&nr(n);if(s||a){if(a&&!a.standalone)return!1;i=n}else{const h=n.ngModule;if(s=Oo(h),!s)return!1;i=h}const u=r.has(i);if(a){if(u)return!1;if(r.add(i),a.dependencies){const h="function"==typeof a.dependencies?a.dependencies():a.dependencies;for(const m of h)Rt(m,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!u){let m;r.add(i);try{zo(s.imports,v=>{Rt(v,e,t,r)&&(m||(m=[]),m.push(v))})}finally{}void 0!==m&&mn(m,e)}if(!u){const m=sa(i)||(()=>new i);e.push({provide:i,useFactory:m,deps:mr},{provide:en,useValue:i,multi:!0},{provide:Ft,useValue:()=>St(i),multi:!0})}const h=s.providers;null==h||u||ot(h,v=>{e.push(v)})}}return i!==n&&void 0!==n.providers}function ot(n,e){for(let t of n)Bt(t)&&(t=t.\u0275providers),Array.isArray(t)?ot(t,e):e(t)}const It=yr({provide:String,useValue:yr});function gt(n){return null!==n&&"object"==typeof n&&It in n}function Tt(n){return"function"==typeof n}const Gn=new Gt("Set Injector scope."),fr={},Nn={};let cr;function Dn(){return void 0===cr&&(cr=new jt),cr}class Sn{}class Xr extends Sn{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ol(e,a=>this.processProvider(a)),this.records.set(pn,Wi(void 0,this)),i.has("environment")&&this.records.set(Sn,Wi(void 0,this));const s=this.records.get(Gn);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(en.multi,mr,bn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=vl(this),r=Mr(void 0);try{return e()}finally{vl(t),Mr(r)}}get(e,t=wo,r=bn.Default){this.assertNotDestroyed(),r=Xc(r);const i=vl(this),s=Mr(void 0);try{if(!(r&bn.SkipSelf)){let u=this.records.get(e);if(void 0===u){const h=function Il(n){return"function"==typeof n||"object"==typeof n&&n instanceof Gt}(e)&&Io(e);u=h&&this.injectableDefInScope(h)?Wi(Ei(e),fr):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&bn.Self?Dn():this.parent).get(e,t=r&bn.Optional&&t===wo?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Os]=a[Os]||[]).unshift(xe(e)),i)throw a;return function Kc(n,e,t,r){const i=n[Os];throw e[Zi]&&i.unshift(e[Zi]),n.message=function Tv(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=xe(e);if(Array.isArray(e))i=e.map(xe).join(" -> ");else if("object"==typeof e){let s=[];for(let a in e)if(e.hasOwnProperty(a)){let u=e[a];s.push(a+":"+("string"==typeof u?JSON.stringify(u):xe(u)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(Hh,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Os]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Mr(s),vl(i)}}resolveInjectorInitializers(){const e=vl(this),t=Mr(void 0);try{const r=this.get(Ft.multi,mr,bn.Self);for(const i of r)i()}finally{vl(e),Mr(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(xe(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ye(205,!1)}processProvider(e){let t=Tt(e=dt(e))?e:dt(e&&e.provide);const r=function Uo(n){return gt(n)?Wi(void 0,n.useValue):Wi(Oi(n),fr)}(e);if(Tt(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=Wi(void 0,fr,!0),i.factory=()=>Np(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===fr&&(t.value=Nn,t.value=t.factory()),"object"==typeof t.value&&t.value&&function $a(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=dt(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function Ei(n){const e=Io(n),t=null!==e?e.factory:sa(n);if(null!==t)return t;if(n instanceof Gt)throw new Ye(204,!1);if(n instanceof Function)return function jo(n){const e=n.length;if(e>0)throw Nd(e,"?"),new Ye(204,!1);const t=function _o(n){const e=n&&(n[Ia]||n[qc]);if(e){const t=function Wc(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new Ye(204,!1)}function Oi(n,e,t){let r;if(Tt(n)){const i=dt(n);return sa(i)||Ei(i)}if(gt(n))r=()=>dt(n.useValue);else if(function Tn(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Np(n.deps||[]));else if(function vt(n){return!(!n||!n.useExisting)}(n))r=()=>St(dt(n.useExisting));else{const i=dt(n&&(n.useClass||n.provide));if(!function gs(n){return!!n.deps}(n))return sa(i)||Ei(i);r=()=>new i(...Np(n.deps))}return r}function Wi(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Ol(n,e){for(const t of n)Array.isArray(t)?Ol(t,e):t&&Bt(t)?Ol(t.\u0275providers,e):e(t)}class Ec{}class Dc{}class ss{resolveComponentFactory(e){throw function Ef(n){const e=Error(`No component factory found for ${xe(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let Ri=(()=>{class n{}return n.NULL=new ss,n})();function Df(){return ms(Tr(),At())}function ms(n,e){return new br(Qs(n,e))}let br=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=Df,n})();function px(n){return n instanceof br?n.nativeElement:n}class Yd{}let Wa=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function gx(){const n=At(),t=rr(Tr().index,n);return(Zs(t)?t:n)[11]}(),n})(),mx=(()=>{class n{}return n.\u0275prov=nn({token:n,providedIn:"root",factory:()=>null}),n})();class wu{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const vx=new wu("15.1.5"),Cc={};function Sf(n){return n.ngOriginalError}class ua{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Sf(e);for(;t&&Sf(t);)t=Sf(t);return t||null}}function xu(n){return n.ownerDocument.defaultView}function no(n){return n.ownerDocument}function cM(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}const uM="ng-template";function DV(n,e,t){let r=0;for(;r<n.length;){let i=n[r++];if(t&&"class"===i){if(i=n[r],-1!==cM(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function dM(n){return 4===n.type&&n.value!==uM}function CV(n,e,t){return e===(4!==n.type||t?n.value:uM)}function SV(n,e,t){let r=4;const i=n.attrs||[],s=function TV(n){for(let e=0;e<n.length;e++)if(oy(n[e]))return e;return n.length}(i);let a=!1;for(let u=0;u<e.length;u++){const h=e[u];if("number"!=typeof h){if(!a)if(4&r){if(r=2|1&r,""!==h&&!CV(n,h,t)||""===h&&1===e.length){if(qa(r))return!1;a=!0}}else{const m=8&r?h:e[++u];if(8&r&&null!==n.attrs){if(!DV(n.attrs,m,t)){if(qa(r))return!1;a=!0}continue}const x=MV(8&r?"class":h,i,dM(n),t);if(-1===x){if(qa(r))return!1;a=!0;continue}if(""!==m){let I;I=x>s?"":i[x+1].toLowerCase();const j=8&r?I:null;if(j&&-1!==cM(j,m,0)||2&r&&m!==I){if(qa(r))return!1;a=!0}}}}else{if(!a&&!qa(r)&&!qa(h))return!1;if(a&&qa(h))continue;a=!1,r=h|1&r}}return qa(r)||a}function qa(n){return 0==(1&n)}function MV(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const a=e[i];if(a===n)return i;if(3===a||6===a)s=!0;else{if(1===a||2===a){let u=e[++i];for(;"string"==typeof u;)u=e[++i];continue}if(4===a)break;if(0===a){i+=4;continue}}i+=s?1:2}return-1}return function kV(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function hM(n,e,t=!1){for(let r=0;r<e.length;r++)if(SV(n,e[r],t))return!0;return!1}function IV(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function fM(n,e){return n?":not("+e.trim()+")":e}function OV(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let a=n[t];if("string"==typeof a)if(2&r){const u=n[++t];i+="["+a+(u.length>0?'="'+u+'"':"")+"]"}else 8&r?i+="."+a:4&r&&(i+=" "+a);else""!==i&&!qa(a)&&(e+=fM(s,i),i=""),r=a,s=s||!qa(r);t++}return""!==i&&(e+=fM(s,i)),e}const On={};function di(n){pM(Un(),At(),hs()+n,!1)}function pM(n,e,t,r){if(!r)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&Md(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Ad(e,s,0,t)}Dl(t)}function yM(n,e=null,t=null,r){const i=function bM(n,e=null,t=null,r,i=new Set){const s=[t||mr,Hn(n)];return r=r||("object"==typeof n?void 0:xe(n)),new Xr(s,e||Dn(),r||null,i)}(n,e,t,r);return i.resolveInjectorInitializers(),i}let Ya=(()=>{class n{static create(t,r){if(Array.isArray(t))return yM({name:""},r,t,"");{const i=t.name??"";return yM({name:i},t.parent,t.providers,i)}}}return n.THROW_IF_NOT_FOUND=wo,n.NULL=new jt,n.\u0275prov=nn({token:n,providedIn:"any",factory:()=>St(pn)}),n.__NG_ELEMENT_ID__=-1,n})();function et(n,e=bn.Default){const t=At();return null===t?St(n,e):Ti(Tr(),t,dt(n),e)}function Jy(){throw new Error("invalid")}function SM(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const a=n.data[s];ac(t[r]),a.contentQueries(2,e[s],s)}}}function e0(n,e,t,r,i,s,a,u,h,m,v){const x=e.blueprint.slice();return x[0]=i,x[2]=76|r,(null!==v||n&&1024&n[2])&&(x[2]|=1024),Fa(x),x[3]=x[15]=n,x[8]=t,x[10]=a||n&&n[10],x[11]=u||n&&n[11],x[12]=h||n&&n[12]||null,x[9]=m||n&&n[9]||null,x[6]=s,x[20]=function Sy(){return bg++}(),x[21]=v,x[16]=2==e.type?n[16]:x,x}function Tf(n,e,t,r,i){let s=n.data[e];if(null===s)s=function Dx(n,e,t,r,i){const s=qp(),a=Yp(),h=n.data[e]=function iH(n,e,t,r,i,s){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,a?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=h),null!==s&&(a?null==s.child&&null!==h.parent&&(s.child=h):null===s.next&&(s.next=h)),h}(n,e,t,r,i),function Kv(){return yn.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const a=function ru(){const n=yn.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===a?-1:a.injectorIndex}return Vo(s,!0),s}function Bg(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Cx(n,e,t){Zp(e);try{const r=n.viewQuery;null!==r&&Nx(1,r,t);const i=n.template;null!==i&&MM(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&SM(n,e),n.staticViewQueries&&Nx(2,n.viewQuery,t);const s=n.components;null!==s&&function tH(n,e){for(let t=0;t<e.length;t++)EH(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[2]&=-5,Qp()}}function t0(n,e,t,r){const i=e[2];if(128!=(128&i)){Zp(e);try{Fa(e),function Ed(n){return yn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&MM(n,e,t,2,r);const a=3==(3&i);if(a){const m=n.preOrderCheckHooks;null!==m&&Md(e,m,null)}else{const m=n.preOrderHooks;null!==m&&Ad(e,m,0,null),eg(e,0)}if(function wH(n){for(let e=Dg(n);null!==e;e=Cg(e)){if(!e[2])continue;const t=e[9];for(let r=0;r<t.length;r++){const i=t[r];512&i[2]||aa(i[3],1),i[2]|=512}}}(e),function _H(n){for(let e=Dg(n);null!==e;e=Cg(e))for(let t=10;t<e.length;t++){const r=e[t],i=r[1];qh(r)&&t0(i,r,i.template,r[8])}}(e),null!==n.contentQueries&&SM(n,e),a){const m=n.contentCheckHooks;null!==m&&Md(e,m)}else{const m=n.contentHooks;null!==m&&Ad(e,m,1),eg(e,1)}!function JV(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)Dl(~i);else{const s=i,a=t[++r],u=t[++r];Zv(a,s),u(2,e[s])}}}finally{Dl(-1)}}(n,e);const u=n.components;null!==u&&function eH(n,e){for(let t=0;t<e.length;t++)xH(n,e[t])}(e,u);const h=n.viewQuery;if(null!==h&&Nx(2,h,r),a){const m=n.viewCheckHooks;null!==m&&Md(e,m)}else{const m=n.viewHooks;null!==m&&Ad(e,m,2),eg(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,aa(e[3],-1))}finally{Qp()}}}function MM(n,e,t,r,i){const s=hs(),a=2&r;try{Dl(-1),a&&e.length>22&&pM(n,e,22,!1),t(r,i)}finally{Dl(s)}}function Sx(n,e,t){if(jp(e)){const i=e.directiveEnd;for(let s=e.directiveStart;s<i;s++){const a=n.data[s];a.contentQueries&&a.contentQueries(1,t[s],s)}}}function Mx(n,e,t){Yv()&&(function uH(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;yd(t)&&function vH(n,e,t){const r=Qs(e,n),i=AM(t),s=n[10],a=n0(n,e0(n,i,null,t.onPush?32:16,r,e,s,s.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Ha(t,e),rs(r,e);const a=t.initialInputs;for(let u=i;u<s;u++){const h=n.data[u],m=uc(e,n,u,t);rs(m,e),null!==a&&yH(0,u-i,m,h,0,a),Ps(h)&&(rr(t.index,e)[8]=uc(e,n,u,t))}}(n,e,t,Qs(t,e)),64==(64&t.flags)&&PM(n,e,t))}function Ax(n,e,t=Qs){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const a=r[s+1],u=-1===a?t(e,n):n[a];n[i++]=u}}}function AM(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Tx(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function Tx(n,e,t,r,i,s,a,u,h,m){const v=22+r,x=v+i,I=function nH(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:On);return t}(v,x),j="function"==typeof m?m():m;return I[1]={type:n,blueprint:I,template:t,queries:null,viewQuery:u,declTNode:e,data:I.slice().fill(null,v),bindingStartIndex:v,expandoStartIndex:x,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:h,consts:j,incompleteFirstPass:!1}}function TM(n,e,t,r){const i=LM(e);null===t?i.push(r):(i.push(t),n.firstCreatePass&&FM(n).push(r,i.length-1))}function kM(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const s=n[i];null===r?IM(t,e,i,s):r.hasOwnProperty(i)&&IM(t,e,r[i],s)}return t}function IM(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function $o(n,e,t,r,i,s,a,u){const h=Qs(e,t);let v,m=e.inputs;!u&&null!=m&&(v=m[r])?(Lx(n,t,v,r,i),yd(e)&&OM(t,e.index)):3&e.type&&(r=function oH(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=a?a(i,e.value||"",r):i,s.setProperty(h,r,i))}function OM(n,e){const t=rr(e,n);16&t[2]||(t[2]|=32)}function kx(n,e,t,r){let i=!1;if(Yv()){const s=null===r?null:{"":-1},a=function hH(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const a=t[s];if(hM(e,a.selectors,!1))if(r||(r=[]),Ps(a))if(null!==a.findHostDirectiveDefs){const u=[];i=i||new Map,a.findHostDirectiveDefs(a,u,i),r.unshift(...u,a),Ix(n,e,u.length)}else r.unshift(a),Ix(n,e,0);else i=i||new Map,a.findHostDirectiveDefs?.(a,r,i),r.push(a)}return null===r?null:[r,i]}(n,t);let u,h;null===a?u=h=null:[u,h]=a,null!==u&&(i=!0,RM(n,e,t,u,s,h)),s&&function fH(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new Ye(-301,!1);r.push(e[i],s)}}}(t,r,s)}return t.mergedAttrs=Sl(t.mergedAttrs,t.attrs),i}function RM(n,e,t,r,i,s){for(let m=0;m<r.length;m++)Jh(Ha(t,e),n,r[m].type);!function gH(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let m=0;m<r.length;m++){const v=r[m];v.providersResolver&&v.providersResolver(v)}let a=!1,u=!1,h=Bg(n,e,r.length,null);for(let m=0;m<r.length;m++){const v=r[m];t.mergedAttrs=Sl(t.mergedAttrs,v.hostAttrs),mH(n,t,e,h,v),pH(h,v,i),null!==v.contentQueries&&(t.flags|=4),(null!==v.hostBindings||null!==v.hostAttrs||0!==v.hostVars)&&(t.flags|=64);const x=v.type.prototype;!a&&(x.ngOnChanges||x.ngOnInit||x.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!u&&(x.ngOnChanges||x.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),u=!0),h++}!function sH(n,e,t){const i=e.directiveEnd,s=n.data,a=e.attrs,u=[];let h=null,m=null;for(let v=e.directiveStart;v<i;v++){const x=s[v],I=t?t.get(x):null,Q=I?I.outputs:null;h=kM(x.inputs,v,h,I?I.inputs:null),m=kM(x.outputs,v,m,Q);const oe=null===h||null===a||dM(e)?null:bH(h,v,a);u.push(oe)}null!==h&&(h.hasOwnProperty("class")&&(e.flags|=8),h.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=u,e.inputs=h,e.outputs=m}(n,t,s)}function PM(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,a=function Dd(){return yn.lFrame.currentDirectiveIndex}();try{Dl(s);for(let u=r;u<i;u++){const h=n.data[u],m=e[u];Yh(u),(null!==h.hostBindings||0!==h.hostVars||null!==h.hostAttrs)&&dH(h,m)}}finally{Dl(-1),Yh(a)}}function dH(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Ix(n,e,t){e.componentOffset=t,(n.components||(n.components=[])).push(e.index)}function pH(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Ps(e)&&(t[""]=n)}}function mH(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=sa(i.type)),a=new iu(s,Ps(i),et);n.blueprint[r]=a,t[r]=a,function lH(n,e,t,r,i){const s=i.hostBindings;if(s){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const u=~e.index;(function cH(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=u&&a.push(u),a.push(t,r,s)}}(n,e,r,Bg(n,t,i.hostVars,On),i)}function Pl(n,e,t,r,i,s){const a=Qs(n,e);!function Ox(n,e,t,r,i,s,a){if(null==s)n.removeAttribute(e,i,t);else{const u=null==a?Wt(s):a(s,r||"",i);n.setAttribute(e,i,u,t)}}(e[11],a,s,n.value,t,r,i)}function yH(n,e,t,r,i,s){const a=s[e];if(null!==a){const u=r.setInput;for(let h=0;h<a.length;){const m=a[h++],v=a[h++],x=a[h++];null!==u?r.setInput(t,x,m,v):t[v]=x}}}function bH(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const a=n[s];for(let u=0;u<a.length;u+=2)if(a[u]===e){r.push(s,a[u+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function NM(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null]}function xH(n,e){const t=rr(e,n);if(qh(t)){const r=t[1];48&t[2]?t0(r,t,r.template,t[8]):t[5]>0&&Rx(t)}}function Rx(n){for(let r=Dg(n);null!==r;r=Cg(r))for(let i=10;i<r.length;i++){const s=r[i];if(qh(s))if(512&s[2]){const a=s[1];t0(a,s,a.template,s[8])}else s[5]>0&&Rx(s)}const t=n[1].components;if(null!==t)for(let r=0;r<t.length;r++){const i=rr(t[r],n);qh(i)&&i[5]>0&&Rx(i)}}function EH(n,e){const t=rr(e,n),r=t[1];(function DH(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(r,t),Cx(r,t,t[8])}function n0(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function Px(n){for(;n;){n[2]|=32;const e=jd(n);if(mw(n)&&!e)return n;n=e}return null}function r0(n,e,t,r=!0){const i=e[10];i.begin&&i.begin();try{t0(n,e,n.template,t)}catch(a){throw r&&VM(e,a),a}finally{i.end&&i.end()}}function Nx(n,e,t){ac(0),e(n,t)}function LM(n){return n[7]||(n[7]=[])}function FM(n){return n.cleanup||(n.cleanup=[])}function VM(n,e){const t=n[9],r=t?t.get(ua,null):null;r&&r.handleError(e)}function Lx(n,e,t,r,i){for(let s=0;s<t.length;){const a=t[s++],u=t[s++],h=e[a],m=n.data[a];null!==m.setInput?m.setInput(h,i,r,u):h[u]=i}}function s0(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let a=0;a<e.length;a++){const u=e[a];"number"==typeof u?s=u:1==s?i=Ue(i,u):2==s&&(r=Ue(r,u+": "+e[++a]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function o0(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&r.push(zi(s)),Eo(s))for(let u=10;u<s.length;u++){const h=s[u],m=h[1].firstChild;null!==m&&o0(h[1],h,m,r)}const a=t.type;if(8&a)o0(n,e,t.child,r);else if(32&a){const u=bc(t,e);let h;for(;h=u();)r.push(h)}else if(16&a){const u=Fs(e,t);if(Array.isArray(u))r.push(...u);else{const h=jd(e[16]);o0(h[1],h,u,r,!0)}}t=i?t.projectionNext:t.next}return r}class Vg{get rootNodes(){const e=this._lView,t=e[1];return o0(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Eo(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(gf(e,r),gc(t,r))}this._attachedToViewContainer=!1}Ag(this._lView[1],this._lView)}onDestroy(e){TM(this._lView[1],this._lView,null,e)}markForCheck(){Px(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){r0(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ye(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function cx(n,e){bu(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Ye(902,!1);this._appRef=e}}class CH extends Vg{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;r0(e[1],e,e[8],!1)}checkNoChanges(){}get context(){return null}}class HM extends Ri{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=nr(e);return new Hg(t,this.ngModule)}}function zM(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class MH{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Xc(r);const i=this.injector.get(e,Cc,r);return i!==Cc||t===Cc?i:this.parentInjector.get(e,t,r)}}class Hg extends Dc{get inputs(){return zM(this.componentDef.inputs)}get outputs(){return zM(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function RV(n){return n.map(OV).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof Sn?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const a=s?new MH(e,s):e,u=a.get(Yd,null);if(null===u)throw new Ye(407,!1);const h=a.get(mx,null),m=u.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",x=r?function rH(n,e,t){return n.selectRootElement(e,t===No.ShadowDom)}(m,r,this.componentDef.encapsulation):Mg(m,v,function SH(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(v)),I=this.componentDef.onPush?288:272,j=Tx(0,null,null,1,0,null,null,null,null,null),Q=e0(null,j,null,I,null,null,u,m,h,a,null);let oe,ve;Zp(Q);try{const Pe=this.componentDef;let Ke,Ge=null;Pe.findHostDirectiveDefs?(Ke=[],Ge=new Map,Pe.findHostDirectiveDefs(Pe,Ke,Ge),Ke.push(Pe)):Ke=[Pe];const st=function TH(n,e){const t=n[1];return n[22]=e,Tf(t,22,2,"#host",null)}(Q,x),_t=function kH(n,e,t,r,i,s,a,u){const h=i[1];!function IH(n,e,t,r){for(const i of n)e.mergedAttrs=Sl(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(s0(e,e.mergedAttrs,!0),null!==t&&Pg(r,t,e))}(r,n,e,a);const m=s.createRenderer(e,t),v=e0(i,AM(t),null,t.onPush?32:16,i[n.index],n,s,m,u||null,null,null);return h.firstCreatePass&&Ix(h,n,r.length-1),n0(i,v),i[n.index]=v}(st,x,Pe,Ke,Q,u,m);ve=Wh(j,22),x&&function RH(n,e,t,r){if(r)ou(n,t,["ng-version",vx.full]);else{const{attrs:i,classes:s}=function PV(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!qa(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&ou(n,t,i),s&&s.length>0&&Wy(n,t,s.join(" "))}}(m,Pe,x,r),void 0!==t&&function PH(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(ve,this.ngContentSelectors,t),oe=function OH(n,e,t,r,i,s){const a=Tr(),u=i[1],h=Qs(a,i);RM(u,i,a,t,null,r);for(let v=0;v<t.length;v++)rs(uc(i,u,a.directiveStart+v,a),i);PM(u,i,a),h&&rs(h,i);const m=uc(i,u,a.directiveStart+a.componentOffset,a);if(n[8]=i[8]=m,null!==s)for(const v of s)v(m,e);return Sx(u,a,n),m}(_t,Pe,Ke,Ge,Q,[NH]),Cx(j,Q,null)}finally{Qp()}return new AH(this.componentType,oe,ms(ve,Q),Q,ve)}}class AH extends Ec{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new CH(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){const s=this._rootLView;Lx(s[1],s,i,e,t),OM(s,this._tNode.index)}}get injector(){return new dc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function NH(){const n=Tr();Zh(At()[1],n)}function Fn(n){let e=function jM(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(Ps(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Ye(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const a=n;a.inputs=Fx(n.inputs),a.declaredInputs=Fx(n.declaredInputs),a.outputs=Fx(n.outputs);const u=i.hostBindings;u&&VH(n,u);const h=i.viewQuery,m=i.contentQueries;if(h&&FH(n,h),m&&BH(n,m),Ae(n.inputs,i.inputs),Ae(n.declaredInputs,i.declaredInputs),Ae(n.outputs,i.outputs),Ps(i)&&i.data.animation){const v=n.data;v.animation=(v.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let a=0;a<s.length;a++){const u=s[a];u&&u.ngInherit&&u(n),u===Fn&&(t=!1)}}e=Object.getPrototypeOf(e)}!function LH(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Sl(i.hostAttrs,t=Sl(t,i.hostAttrs))}}(r)}function Fx(n){return n===Na?{}:n===mr?[]:n}function FH(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function BH(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function VH(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}let a0=null;function Kd(){if(!a0){const n=Er.Symbol;if(n&&n.iterator)a0=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const r=e[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(a0=r)}}}return a0}function l0(n){return!!Bx(n)&&(Array.isArray(n)||!(n instanceof Map)&&Kd()in n)}function Bx(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Bs(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Vs(n,e,t,r){const i=At();return Bs(i,El(),e)&&(Un(),Pl(Yr(),i,n,e,t,r)),Vs}function Vf(n,e,t,r,i,s,a,u){const h=At(),m=Un(),v=n+22,x=m.firstCreatePass?function XH(n,e,t,r,i,s,a,u,h){const m=e.consts,v=Tf(e,n,4,a||null,_l(m,u));kx(e,t,v,_l(m,h)),Zh(e,v);const x=v.tViews=Tx(2,v,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,m);return null!==e.queries&&(e.queries.template(e,v),x.queries=e.queries.embeddedTView(v)),v}(v,m,h,e,t,r,i,s,a):m.data[v];Vo(x,!1);const I=h[11].createComment("");Ga(m,h,I,x),rs(I,h),n0(h,h[v]=NM(I,h,I,x)),$h(x)&&Mx(m,h,x),null!=a&&Ax(h,x,u)}function ri(n,e,t){const r=At();return Bs(r,El(),e)&&$o(Un(),Yr(),r,n,e,r[11],t,!1),ri}function Vx(n,e,t,r,i){const a=i?"class":"style";Lx(n,t,e.inputs[a],a,r)}function _r(n,e,t,r){const i=At(),s=Un(),a=22+n,u=i[11],h=i[a]=Mg(u,e,function Kh(){return yn.lFrame.currentNamespace}()),m=s.firstCreatePass?function ZH(n,e,t,r,i,s,a){const u=e.consts,m=Tf(e,n,2,i,_l(u,s));return kx(e,t,m,_l(u,a)),null!==m.attrs&&s0(m,m.attrs,!1),null!==m.mergedAttrs&&s0(m,m.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,m),m}(a,s,i,0,e,t,r):s.data[a];return Vo(m,!0),Pg(u,h,m),32!=(32&m.flags)&&Ga(s,i,h,m),0===function Wp(){return yn.lFrame.elementDepthCount}()&&rs(h,i),function Wv(){yn.lFrame.elementDepthCount++}(),$h(m)&&(Mx(s,i,m),Sx(s,m,i)),null!==r&&Ax(i,m),_r}function Vr(){let n=Tr();Yp()?wl():(n=n.parent,Vo(n,!1));const e=n;!function qv(){yn.lFrame.elementDepthCount--}();const t=Un();return t.firstCreatePass&&(Zh(t,n),jp(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function sy(n){return 0!=(8&n.flags)}(e)&&Vx(t,e,At(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function dr(n){return 0!=(16&n.flags)}(e)&&Vx(t,e,At(),e.stylesWithoutHost,!1),Vr}function Hs(n,e,t,r){return _r(n,e,t,r),Vr(),Hs}function jg(){return At()}function u0(n){return!!n&&"function"==typeof n.then}const iA=function rA(n){return!!n&&"function"==typeof n.subscribe};function jr(n,e,t,r){const i=At(),s=Un(),a=Tr();return function oA(n,e,t,r,i,s,a){const u=$h(r),m=n.firstCreatePass&&FM(n),v=e[8],x=LM(e);let I=!0;if(3&r.type||a){const oe=Qs(r,e),ve=a?a(oe):oe,Pe=x.length,Ke=a?st=>a(zi(st[r.index])):r.index;let Ge=null;if(!a&&u&&(Ge=function JH(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const a=i[s];if(a===t&&i[s+1]===r){const u=e[7],h=i[s+2];return u.length>h?u[h]:null}"string"==typeof a&&(s+=2)}return null}(n,e,i,r.index)),null!==Ge)(Ge.__ngLastListenerFn__||Ge).__ngNextListenerFn__=s,Ge.__ngLastListenerFn__=s,I=!1;else{s=lA(r,e,v,s,!1);const st=t.listen(ve,i,s);x.push(s,st),m&&m.push(i,Ke,Pe,Pe+1)}}else s=lA(r,e,v,s,!1);const j=r.outputs;let Q;if(I&&null!==j&&(Q=j[i])){const oe=Q.length;if(oe)for(let ve=0;ve<oe;ve+=2){const _t=e[Q[ve]][Q[ve+1]].subscribe(s),Et=x.length;x.push(s,_t),m&&m.push(i,r.index,Et,-(Et+1))}}}(s,i,i[11],a,n,e,r),jr}function aA(n,e,t,r){try{return!1!==t(r)}catch(i){return VM(n,i),!1}}function lA(n,e,t,r,i){return function s(a){if(a===Function)return r;Px(n.componentOffset>-1?rr(n.index,e):e);let h=aA(e,0,r,a),m=s.__ngNextListenerFn__;for(;m;)h=aA(e,0,m,a)&&h,m=m.__ngNextListenerFn__;return i&&!1===h&&(a.preventDefault(),a.returnValue=!1),h}}function vs(n=1){return function Tw(n){return(yn.lFrame.contextLView=function kw(n,e){for(;n>0;)e=e[15],n--;return e}(n,yn.lFrame.contextLView))[8]}(n)}function ez(n,e){let t=null;const r=function AV(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?hM(n,s,!0):IV(r,s))return i}else t=i}return t}function Eu(n){const e=At()[16][6];if(!e.projection){const r=e.projection=Nd(n?n.length:1,null),i=r.slice();let s=e.child;for(;null!==s;){const a=n?ez(s,n):0;null!==a&&(i[a]?i[a].projectionNext=s:r[a]=s,i[a]=s),s=s.next}}}function Wo(n,e=0,t){const r=At(),i=Un(),s=Tf(i,22+n,16,null,t||null);null===s.projection&&(s.projection=e),wl(),32!=(32&s.flags)&&function Rg(n,e,t){bf(e[11],0,e,t,Hy(n,t,e),la(t.parent||e[6],t,e))}(i,r,s)}function d0(n,e){return n<<17|e<<2}function Du(n){return n>>17&32767}function Ux(n){return 2|n}function Qd(n){return(131068&n)>>2}function Gx(n,e){return-131069&n|e<<2}function $x(n){return 1|n}function yA(n,e,t,r,i){const s=n[t+1],a=null===e;let u=r?Du(s):Qd(s),h=!1;for(;0!==u&&(!1===h||a);){const v=n[u+1];oz(n[u],e)&&(h=!0,n[u+1]=r?$x(v):Ux(v)),u=r?Du(v):Qd(v)}h&&(n[t+1]=r?Ux(s):$x(s))}function oz(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&mc(n,e)>=0}function Jd(n,e,t){return Xa(n,e,t,!1),Jd}function ys(n,e){return Xa(n,e,null,!0),ys}function Xa(n,e,t,r){const i=At(),s=Un(),a=function Ba(n){const e=yn.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);s.firstUpdatePass&&function SA(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[hs()],a=function CA(n,e){return e>=n.expandoStartIndex}(n,t);(function kA(n,e){return 0!=(n.flags&(e?8:16))})(s,r)&&null===e&&!a&&(e=!1),e=function gz(n,e,t,r){const i=function Xh(n){const e=yn.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=Ug(t=Wx(null,n,e,t,r),e.attrs,r),s=null);else{const a=e.directiveStylingLast;if(-1===a||n[a]!==i)if(t=Wx(i,n,e,t,r),null===s){let h=function mz(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Qd(r))return n[Du(r)]}(n,e,r);void 0!==h&&Array.isArray(h)&&(h=Wx(null,n,e,h[1],r),h=Ug(h,e.attrs,r),function vz(n,e,t,r){n[Du(t?e.classBindings:e.styleBindings)]=r}(n,e,r,h))}else s=function yz(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Ug(r,n[s].hostAttrs,t);return Ug(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function iz(n,e,t,r,i,s){let a=s?e.classBindings:e.styleBindings,u=Du(a),h=Qd(a);n[r]=t;let v,m=!1;if(Array.isArray(t)?(v=t[1],(null===v||mc(t,v)>0)&&(m=!0)):v=t,i)if(0!==h){const I=Du(n[u+1]);n[r+1]=d0(I,u),0!==I&&(n[I+1]=Gx(n[I+1],r)),n[u+1]=function nz(n,e){return 131071&n|e<<17}(n[u+1],r)}else n[r+1]=d0(u,0),0!==u&&(n[u+1]=Gx(n[u+1],r)),u=r;else n[r+1]=d0(h,0),0===u?u=r:n[h+1]=Gx(n[h+1],r),h=r;m&&(n[r+1]=Ux(n[r+1])),yA(n,v,r,!0),yA(n,v,r,!1),function sz(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&mc(s,e)>=0&&(t[r+1]=$x(t[r+1]))}(e,v,n,r,s),a=d0(u,h),s?e.classBindings=a:e.styleBindings=a}(i,s,e,t,a,r)}}(s,n,a,r),e!==On&&Bs(i,a,e)&&function AA(n,e,t,r,i,s,a,u){if(!(3&e.type))return;const h=n.data,m=h[u+1],v=function rz(n){return 1==(1&n)}(m)?TA(h,e,t,i,Qd(m),a):void 0;h0(v)||(h0(s)||function tz(n){return 2==(2&n)}(m)&&(s=TA(h,null,t,i,u,a)),function _u(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:ni.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=ni.Important),n.setStyle(t,r,i,s))}}(r,a,_d(hs(),t),i,s))}(s,s.data[hs()],i,i[11],n,i[a+1]=function wz(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=xe(l(n)))),n}(e,t),r,a)}function Wx(n,e,t,r,i){let s=null;const a=t.directiveEnd;let u=t.directiveStylingLast;for(-1===u?u=t.directiveStart:u++;u<a&&(s=e[u],r=Ug(r,s.hostAttrs,i),s!==n);)u++;return null!==n&&(t.directiveStylingLast=u),r}function Ug(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?i=a:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Ls(n,a,!!t||e[++s]))}return void 0===n?null:n}function TA(n,e,t,r,i,s){const a=null===e;let u;for(;i>0;){const h=n[i],m=Array.isArray(h),v=m?h[1]:h,x=null===v;let I=t[i+1];I===On&&(I=x?mr:void 0);let j=x?ug(I,r):v===r?I:void 0;if(m&&!h0(j)&&(j=ug(h,r)),h0(j)&&(u=j,a))return u;const Q=n[i+1];i=a?Du(Q):Qd(Q)}if(null!==e){let h=s?e.residualClasses:e.residualStyles;null!=h&&(u=ug(h,r))}return u}function h0(n){return void 0!==n}function eh(n,e=""){const t=At(),r=Un(),i=n+22,s=r.firstCreatePass?Tf(r,i,1,e,null):r.data[i],a=t[i]=function Sg(n,e){return n.createText(e)}(t[11],e);Ga(r,t,a,s),Vo(s,!1)}function Gg(n){return qx("",n,""),Gg}function qx(n,e,t){const r=At(),i=function If(n,e,t,r){return Bs(n,El(),t)?e+Wt(t)+r:On}(r,n,e,t);return i!==On&&function Mc(n,e,t){const r=_d(e,n);!function Py(n,e,t){n.setValue(e,t)}(n[11],r,t)}(r,hs(),i),qx}function Yx(n,e,t){const r=At();return Bs(r,El(),e)&&$o(Un(),Yr(),r,n,e,r[11],t,!0),Yx}const jf="en-US";let ZA=jf;function Zx(n,e,t,r,i){if(n=dt(n),Array.isArray(n))for(let s=0;s<n.length;s++)Zx(n[s],e,t,r,i);else{const s=Un(),a=At();let u=Tt(n)?n:dt(n.provide),h=Oi(n);const m=Tr(),v=1048575&m.providerIndexes,x=m.directiveStart,I=m.providerIndexes>>20;if(Tt(n)||!n.multi){const j=new iu(h,i,et),Q=Jx(u,e,i?v:v+I,x);-1===Q?(Jh(Ha(m,a),s,u),Qx(s,n,e.length),e.push(u),m.directiveStart++,m.directiveEnd++,i&&(m.providerIndexes+=1048576),t.push(j),a.push(j)):(t[Q]=j,a[Q]=j)}else{const j=Jx(u,e,v+I,x),Q=Jx(u,e,v,v+I),ve=Q>=0&&t[Q];if(i&&!ve||!i&&!(j>=0&&t[j])){Jh(Ha(m,a),s,u);const Pe=function H5(n,e,t,r,i){const s=new iu(n,t,et);return s.multi=[],s.index=e,s.componentProviders=0,xT(s,i,r&&!t),s}(i?V5:B5,t.length,i,r,h);!i&&ve&&(t[Q].providerFactory=Pe),Qx(s,n,e.length,0),e.push(u),m.directiveStart++,m.directiveEnd++,i&&(m.providerIndexes+=1048576),t.push(Pe),a.push(Pe)}else Qx(s,n,j>-1?j:Q,xT(t[i?Q:j],h,!i&&r));!i&&r&&ve&&t[Q].componentProviders++}}}function Qx(n,e,t,r){const i=Tt(e),s=function rn(n){return!!n.useClass}(e);if(i||s){const h=(s?dt(e.useClass):e).prototype.ngOnDestroy;if(h){const m=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const v=m.indexOf(t);-1===v?m.push(t,[r,h]):m[v+1].push(r,h)}else m.push(t,h)}}}function xT(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Jx(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function B5(n,e,t,r){return eE(this.multi,[])}function V5(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const a=this.providerFactory.componentProviders,u=uc(t,t[1],this.providerFactory.index,r);s=u.slice(0,a),eE(i,s);for(let h=a;h<u.length;h++)s.push(u[h])}else s=[],eE(i,s);return s}function eE(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Hr(n,e=[]){return t=>{t.providersResolver=(r,i)=>function F5(n,e,t){const r=Un();if(r.firstCreatePass){const i=Ps(n);Zx(t,r.data,r.blueprint,i,!0),Zx(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class Uf{}class U5 extends Uf{constructor(e,t,r){super(),this.componentFactoryResolver=new HM(this),this.instance=null;const i=new Xr([...e,{provide:Uf,useValue:this},{provide:Ri,useValue:this.componentFactoryResolver}],t||Dn(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function DT(n,e,t=null){return new U5(n,e,t).injector}let G5=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const r=An(0,t.type),i=r.length>0?DT([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,i)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=nn({token:n,providedIn:"environment",factory:()=>new n(St(Sn))}),n})();function nh(n){n.getStandaloneInjector=e=>e.get(G5).getOrCreateStandaloneInjector(n)}function IT(n,e,t,r){return function OT(n,e,t,r,i,s){const a=e+t;return Bs(n,a,i)?function Nl(n,e,t){return n[e]=t}(n,a+1,s?r.call(s,i):r(i)):function Kg(n,e){const t=n[e];return t===On?void 0:t}(n,a+1)}(At(),function ui(){const n=yn.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}(),n,e,t,r)}function rE(n){return e=>{setTimeout(n,void 0,e)}}const Pr=class m3 extends Oe{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),a=r;if(e&&"object"==typeof e){const h=e;i=h.next?.bind(h),s=h.error?.bind(h),a=h.complete?.bind(h)}this.__isAsync&&(s=rE(s),i&&(i=rE(i)),a&&(a=rE(a)));const u=super.subscribe({next:i,error:s,complete:a});return e instanceof F&&e.add(u),u}};function v3(){return this._results[Kd()]()}class iE{get changes(){return this._changes||(this._changes=new Pr)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Kd(),r=iE.prototype;r[t]||(r[t]=v3)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const i=function Ii(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function Bw(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Ac=(()=>{class n{}return n.__NG_ELEMENT_ID__=_3,n})();const y3=Ac,b3=class extends y3{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(e,t){const r=this._declarationTContainer.tViews,i=e0(this._declarationLView,r,e,16,null,r.declTNode,null,null,null,null,t||null);i[17]=this._declarationLView[this._declarationTContainer.index];const a=this._declarationLView[19];return null!==a&&(i[19]=a.createEmbeddedView(r)),Cx(r,i,e),new Vg(i)}};function _3(){return v0(Tr(),At())}function v0(n,e){return 4&n.type?new b3(e,n,ms(n,e)):null}let Za=(()=>{class n{}return n.__NG_ELEMENT_ID__=w3,n})();function w3(){return VT(Tr(),At())}const x3=Za,FT=class extends x3{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return ms(this._hostTNode,this._hostLView)}get injector(){return new dc(this._hostTNode,this._hostLView)}get parentInjector(){const e=Qh(this._hostTNode,this._hostLView);if(kd(e)){const t=au(e,this._hostLView),r=cc(e);return new dc(t[1].data[r+8],t)}return new dc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=BT(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedView(t||{},s);return this.insert(a,i),a}createComponent(e,t,r,i,s){const a=e&&!function Pd(n){return"function"==typeof n}(e);let u;if(a)u=t;else{const x=t||{};u=x.index,r=x.injector,i=x.projectableNodes,s=x.environmentInjector||x.ngModuleRef}const h=a?e:new Hg(nr(e)),m=r||this.parentInjector;if(!s&&null==h.ngModule){const I=(a?m:this.parentInjector).get(Sn,null);I&&(s=I)}const v=h.create(m,i,void 0,s);return this.insert(v.hostView,u),v}insert(e,t){const r=e._lView,i=r[1];if(function Aw(n){return Eo(n[3])}(r)){const v=this.indexOf(e);if(-1!==v)this.detach(v);else{const x=r[3],I=new FT(x,x[6],x[3]);I.detach(I.indexOf(e))}}const s=this._adjustIndex(t),a=this._lContainer;!function $i(n,e,t,r){const i=10+r,s=t.length;r>0&&(t[i-1][4]=e),r<s-10?(e[4]=t[i],hu(t,10+r,e)):(t.push(e),e[4]=null),e[3]=t;const a=e[17];null!==a&&t!==a&&function Fy(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(a,e);const u=e[19];null!==u&&u.insertView(n),e[2]|=64}(i,r,a,s);const u=Og(s,a),h=r[11],m=mf(h,a[7]);return null!==m&&function lx(n,e,t,r,i,s){r[0]=i,r[6]=e,bu(n,r,t,1,i,s)}(i,a[6],h,r,m,u),e.attachToViewContainerRef(),hu(sE(a),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=BT(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=gf(this._lContainer,t);r&&(gc(sE(this._lContainer),t),Ag(r[1],r))}detach(e){const t=this._adjustIndex(e,-1),r=gf(this._lContainer,t);return r&&null!=gc(sE(this._lContainer),t)?new Vg(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function BT(n){return n[8]}function sE(n){return n[8]||(n[8]=[])}function VT(n,e){let t;const r=e[n.index];if(Eo(r))t=r;else{let i;if(8&n.type)i=zi(r);else{const s=e[11];i=s.createComment("");const a=Qs(n,e);is(s,mf(s,a),i,function kg(n,e){return n.nextSibling(e)}(s,a),!1)}e[n.index]=t=NM(r,e,i,n),n0(e,t)}return new FT(t,n,e)}class oE{constructor(e){this.queryList=e,this.matches=null}clone(){return new oE(this.queryList)}setDirty(){this.queryList.setDirty()}}class aE{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){const a=t.getByIndex(s);i.push(this.queries[a.indexInDeclarationView].clone())}return new aE(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==$T(e,t).matches&&this.queries[t].setDirty()}}class HT{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class lE{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==t?t.push(s):t=[s])}return null!==t?new lE(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class cE{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new cE(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,t,E3(t,s)),this.matchTNodeWithReadOption(e,t,ef(t,e,s,!1,!1))}else r===Ac?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,ef(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===br||i===Za||i===Ac&&4&t.type)this.addMatch(t.index,-2);else{const s=ef(t,e,i,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function E3(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function C3(n,e,t,r){return-1===t?function D3(n,e){return 11&n.type?ms(n,e):4&n.type?v0(n,e):null}(e,n):-2===t?function S3(n,e,t){return t===br?ms(e,n):t===Ac?v0(e,n):t===Za?VT(e,n):void 0}(n,e,r):uc(n,n[1],t,e)}function zT(n,e,t,r){const i=e[19].queries[r];if(null===i.matches){const s=n.data,a=t.matches,u=[];for(let h=0;h<a.length;h+=2){const m=a[h];u.push(m<0?null:C3(e,s[m],a[h+1],t.metadata.read))}i.matches=u}return i.matches}function uE(n,e,t,r){const i=n.queries.getByIndex(t),s=i.matches;if(null!==s){const a=zT(n,e,i,t);for(let u=0;u<s.length;u+=2){const h=s[u];if(h>0)r.push(a[u/2]);else{const m=s[u+1],v=e[-h];for(let x=10;x<v.length;x++){const I=v[x];I[17]===I[3]&&uE(I[1],I,m,r)}if(null!==v[9]){const x=v[9];for(let I=0;I<x.length;I++){const j=x[I];uE(j[1],j,m,r)}}}}}return r}function Tc(n){const e=At(),t=Un(),r=Qv();ac(r+1);const i=$T(t,r);if(n.dirty&&function Br(n){return 4==(4&n[2])}(e)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const s=i.crossesNgTemplate?uE(t,e,r,[]):zT(t,e,i,r);n.reset(s,px),n.notifyOnChanges()}return!0}return!1}function Cu(n,e,t){const r=Un();r.firstCreatePass&&(GT(r,new HT(n,e,t),-1),2==(2&e)&&(r.staticViewQueries=!0)),UT(r,At(),e)}function kc(){return function M3(n,e){return n[19].queries[e].queryList}(At(),Qv())}function UT(n,e,t){const r=new iE(4==(4&t));TM(n,e,r,r.destroy),null===e[19]&&(e[19]=new aE),e[19].queries.push(new oE(r))}function GT(n,e,t){null===n.queries&&(n.queries=new lE),n.queries.track(new cE(e,t))}function $T(n,e){return n.queries.getByIndex(e)}function b0(...n){}const uk=new Gt("Application Initializer");let _0=(()=>{class n{constructor(t){this.appInits=t,this.resolve=b0,this.reject=b0,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(u0(s))t.push(s);else if(iA(s)){const a=new Promise((u,h)=>{s.subscribe({complete:u,error:h})});t.push(a)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(St(uk,8))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const w0=new Gt("AppId",{providedIn:"root",factory:function dk(){return`${gE()}${gE()}${gE()}`}});function gE(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const hk=new Gt("Platform Initializer"),mE=new Gt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),X3=new Gt("appBootstrapListener"),Ic=new Gt("AnimationModuleType"),Bl=new Gt("LocaleId",{providedIn:"root",factory:()=>Ro(Bl,bn.Optional|bn.SkipSelf)||function K3(){return typeof $localize<"u"&&$localize.locale||jf}()}),tj=(()=>Promise.resolve(0))();class Kn{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Pr(!1),this.onMicrotaskEmpty=new Pr(!1),this.onStable=new Pr(!1),this.onError=new Pr(!1),typeof Zone>"u")throw new Ye(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function nj(){let n=Er.requestAnimationFrame,e=Er.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function sj(n){const e=()=>{!function ij(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Er,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,bE(n),n.isCheckStableRunning=!0,yE(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),bE(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,a,u)=>{try{return gk(n),t.invokeTask(i,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),mk(n)}},onInvoke:(t,r,i,s,a,u,h)=>{try{return gk(n),t.invoke(i,s,a,u,h)}finally{n.shouldCoalesceRunChangeDetection&&e(),mk(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,bE(n),yE(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Kn.isInAngularZone())throw new Ye(909,!1)}static assertNotInAngularZone(){if(Kn.isInAngularZone())throw new Ye(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,a=s.scheduleEventTask("NgZoneEvent: "+i,e,rj,b0,b0);try{return s.runTask(a,t,r)}finally{s.cancelTask(a)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const rj={};function yE(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function bE(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function gk(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function mk(n){n._nesting--,yE(n)}class oj{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Pr,this.onMicrotaskEmpty=new Pr,this.onStable=new Pr,this.onError=new Pr}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const vk=new Gt("");let Su=null;const EE=new Gt("PlatformDestroyListeners");function hj(n){const{rootComponent:e,appProviders:t,platformProviders:r}=n,i=function dj(n=[]){if(Su)return Su;const e=function _k(n=[],e){return Ya.create({name:e,providers:[{provide:Gn,useValue:"platform"},{provide:EE,useValue:new Set([()=>Su=null])},...n]})}(n);return Su=e,function bk(n){const e=n.get(hk,null);e&&e.forEach(t=>t())}(e),e}(r),s=function Ek(n,e){let t;return t="noop"===n?new oj:("zone.js"===n?void 0:n)||new Kn(e),t}("zone.js",function xk(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}());return s.run(()=>{const u=DT([{provide:Kn,useValue:s},...t||[]],i,"Environment Injector"),h=u.get(ua,null);let m;s.runOutsideAngular(()=>{m=s.onError.subscribe({next:I=>{h.handleError(I)}})});const v=()=>u.destroy(),x=i.get(EE);return x.add(v),u.onDestroy(()=>{m.unsubscribe(),x.delete(v)}),function Dk(n,e,t){try{const r=t();return u0(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(h,s,()=>{const I=u.get(_0);return I.runInitializers(),I.donePromise.then(()=>{!function QA(n){bi(n,"Expected localeId to be defined"),"string"==typeof n&&(ZA=n.toLowerCase().replace(/_/g,"-"))}(u.get(Bl,jf)||jf);const Q=u.get(Jg);return void 0!==e&&Q.bootstrap(e),Q})})})}let Jg=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(t,r,i){this._zone=t,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new Ie(u=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{u.next(this._stable),u.complete()})}),a=new Ie(u=>{let h;this._zone.runOutsideAngular(()=>{h=this._zone.onStable.subscribe(()=>{Kn.assertNotInAngularZone(),function vE(n){typeof Zone>"u"?tj.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,u.next(!0))})})});const m=this._zone.onUnstable.subscribe(()=>{Kn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{u.next(!1)}))});return()=>{h.unsubscribe(),m.unsubscribe()}});this.isStable=Bh(s,a.pipe(ka()))}bootstrap(t,r){const i=t instanceof Dc;if(!this._injector.get(_0).done)throw!i&&function gd(n){const e=nr(n)||ci(n)||Mi(n);return null!==e&&e.standalone}(t),new Ye(405,false);let a;a=i?t:this._injector.get(Ri).resolveComponentFactory(t),this.componentTypes.push(a.componentType);const u=function cj(n){return n.isBoundToModule}(a)?void 0:this._injector.get(Uf),m=a.create(Ya.NULL,[],r||a.selector,u),v=m.location.nativeElement,x=m.injector.get(vk,null);return x?.registerApplication(v),m.onDestroy(()=>{this.detachView(m.hostView),E0(this.components,m),x?.unregisterApplication(v)}),this._loadComponent(m),m}tick(){if(this._runningTick)throw new Ye(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;E0(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(X3,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>E0(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Ye(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(St(Kn),St(Sn),St(ua))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function E0(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let rh=(()=>{class n{}return n.__NG_ELEMENT_ID__=gj,n})();function gj(n){return function mj(n,e,t){if(yd(n)&&!t){const r=rr(n.index,e);return new Vg(r,r)}return 47&n.type?new Vg(e[16],e):null}(Tr(),At(),16==(16&n))}class kk{constructor(){}supports(e){return l0(e)}create(e){return new xj(e)}}const wj=(n,e)=>e;class xj{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||wj}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const a=!r||t&&t.currentIndex<Ok(r,i,s)?t:r,u=Ok(a,i,s),h=a.currentIndex;if(a===r)i--,r=r._nextRemoved;else if(t=t._next,null==a.previousIndex)i++;else{s||(s=[]);const m=u-i,v=h-i;if(m!=v){for(let I=0;I<m;I++){const j=I<s.length?s[I]:s[I]=0,Q=j+I;v<=Q&&Q<m&&(s[I]=j+1)}s[a.previousIndex]=v-m}}u!==h&&e(a,u,h)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!l0(e))throw new Ye(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,a,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let u=0;u<this.length;u++)s=e[u],a=this._trackByFn(u,s),null!==t&&Object.is(t.trackById,a)?(r&&(t=this._verifyReinsertion(t,s,a,u)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,a,u),r=!0),t=t._next}else i=0,function WH(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Kd()]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,u=>{a=this._trackByFn(i,u),null!==t&&Object.is(t.trackById,a)?(r&&(t=this._verifyReinsertion(t,u,a,i)),Object.is(t.item,u)||this._addIdentityChange(t,u)):(t=this._mismatch(t,u,a,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new Ej(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Ik),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ik),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Ej{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Dj{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class Ik{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new Dj,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ok(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class Rk{constructor(){}supports(e){return e instanceof Map||Bx(e)}create(){return new Cj}}class Cj{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Bx(e)))throw new Ye(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,a=i._next;return s&&(s._next=a),a&&(a._prev=s),i._next=null,i._prev=null,i}const r=new Sj(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class Sj{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Pk(){return new S0([new kk])}let S0=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||Pk()),deps:[[n,new Ld,new Ml]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new Ye(901,!1)}}return n.\u0275prov=nn({token:n,providedIn:"root",factory:Pk}),n})();function Nk(){return new em([new Rk])}let em=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||Nk()),deps:[[n,new Ld,new Ml]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new Ye(901,!1)}}return n.\u0275prov=nn({token:n,providedIn:"root",factory:Nk}),n})(),kE=null;function Vl(){return kE}class Ij{}const sr=new Gt("DocumentToken");let Lk=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=nn({token:n,factory:function(){return function Oj(){return St(Fk)}()},providedIn:"platform"}),n})(),Fk=(()=>{class n extends Lk{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Vl().getBaseHref(this._doc)}onPopState(t){const r=Vl().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Vl().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){Bk()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){Bk()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(St(sr))},n.\u0275prov=nn({token:n,factory:function(){return function Rj(){return new Fk(St(sr))}()},providedIn:"platform"}),n})();function Bk(){return!!window.history.pushState}function Vk(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Hk(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function sh(n){return n&&"?"!==n[0]?"?"+n:n}let IE=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=nn({token:n,factory:function(){return Ro(Nj)},providedIn:"root"}),n})();const Pj=new Gt("appBaseHref");let Nj=(()=>{class n extends IE{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Ro(sr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Vk(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+sh(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const a=this.prepareExternalUrl(i+sh(s));this._platformLocation.pushState(t,r,a)}replaceState(t,r,i,s){const a=this.prepareExternalUrl(i+sh(s));this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(St(Lk),St(Pj,8))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),zk=(()=>{class n{constructor(t){this._subject=new Pr,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Bj(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Hk(jk(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+sh(r))}normalize(t){return n.stripTrailingSlash(function Fj(n,e){return n&&new RegExp(`^${n}([/;?#]|$)`).test(e)?e.substring(n.length):e}(this._basePath,jk(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+sh(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+sh(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=sh,n.joinWithSlash=Vk,n.stripTrailingSlash=Hk,n.\u0275fac=function(t){return new(t||n)(St(IE))},n.\u0275prov=nn({token:n,factory:function(){return function Lj(){return new zk(St(IE))}()},providedIn:"root"}),n})();function jk(n){return n.replace(/\/index.html$/,"")}const zE=/\s+/,Zk=[];let Qk=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this.initialClasses=Zk,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(zE):Zk}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(zE):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,Boolean(t[r]));this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(zE).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(et(S0),et(em),et(br),et(Wa))},n.\u0275dir=fn({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class E4{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let jE=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,a)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new E4(i.item,this._ngForOf,-1,-1),null===a?void 0:a);else if(null==a)r.remove(null===s?void 0:s);else if(null!==s){const u=r.get(s);r.move(u,a),tI(u,i)}});for(let i=0,s=r.length;i<s;i++){const u=r.get(i).context;u.index=i,u.count=s,u.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{tI(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(et(Za),et(Ac),et(S0))},n.\u0275dir=fn({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function tI(n,e){n.context.$implicit=e.item}let UE=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new C4,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){nI("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){nI("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(et(Za),et(Ac))},n.\u0275dir=fn({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class C4{constructor(){this.$implicit=null,this.ngIf=null}}function nI(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${xe(e)}'.`)}let Mu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=gr({}),n})();const sI="browser";class AU extends Ij{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ZE extends AU{static makeCurrent(){!function kj(n){kE||(kE=n)}(new ZE)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function TU(){return im=im||document.querySelector("base"),im?im.getAttribute("href"):null}();return null==t?null:function kU(n){F0=F0||document.createElement("a"),F0.setAttribute("href",n);const e=F0.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){im=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function w4(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let F0,im=null,PU=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})();const B0=new Gt("EventManagerPlugins");let V0=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const a=i[s];if(a.supports(t))return this._eventNameToPlugin.set(t,a),a}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(St(B0),St(Kn))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})();class dI{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=Vl().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let hI=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})(),sm=(()=>{class n extends hI{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const a=this._doc.createElement("style");a.textContent=s,i.push(r.appendChild(a))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(fI),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(fI))}}return n.\u0275fac=function(t){return new(t||n)(St(sr))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})();function fI(n){Vl().remove(n)}const QE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},JE=/%COMP%/g;function eD(n,e){return e.flat(100).map(t=>t.replace(JE,n))}function mI(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let H0=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new tD(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case No.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new HU(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case No.ShadowDom:return new zU(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=eD(r.id,r.styles);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(St(V0),St(sm),St(w0))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})();class tD{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(QE[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(yI(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(yI(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=QE[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=QE[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ni.DashCase|ni.Important)?e.style.setProperty(t,r,i&ni.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ni.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,mI(r)):this.eventManager.addEventListener(e,t,mI(r))}}function yI(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class HU extends tD{constructor(e,t,r,i){super(e),this.component=r;const s=eD(i+"-"+r.id,r.styles);t.addStyles(s),this.contentAttr=function FU(n){return"_ngcontent-%COMP%".replace(JE,n)}(i+"-"+r.id),this.hostAttr=function BU(n){return"_nghost-%COMP%".replace(JE,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class zU extends tD{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=eD(i.id,i.styles);for(let a=0;a<s.length;a++){const u=document.createElement("style");u.textContent=s[a],this.shadowRoot.appendChild(u)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}const bI=["alt","control","meta","shift"],UU={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},GU={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};function wI(n){return{appProviders:[...JU,...n?.providers??[]],platformProviders:KU}}const KU=[{provide:mE,useValue:sI},{provide:hk,useValue:function qU(){ZE.makeCurrent()},multi:!0},{provide:sr,useFactory:function XU(){return function Yy(n){Ng=n}(document),document},deps:[]}],JU=[{provide:Gn,useValue:"root"},{provide:ua,useFactory:function YU(){return new ua},deps:[]},{provide:B0,useClass:(()=>{class n extends dI{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(St(sr))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})(),multi:!0,deps:[sr,Kn,mE]},{provide:B0,useClass:(()=>{class n extends dI{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Vl().onAndCancel(t,s.domEventName,a))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let a="",u=r.indexOf("code");if(u>-1&&(r.splice(u,1),a="code."),bI.forEach(m=>{const v=r.indexOf(m);v>-1&&(r.splice(v,1),a+=m+".")}),a+=s,0!=r.length||0===s.length)return null;const h={};return h.domEventName=i,h.fullKey=a,h}static matchEventFullKeyCode(t,r){let i=UU[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),bI.forEach(a=>{a!==i&&(0,GU[a])(t)&&(s+=a+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(St(sr))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})(),multi:!0,deps:[sr]},{provide:H0,useClass:H0,deps:[V0,sm,w0]},{provide:Yd,useExisting:H0},{provide:hI,useExisting:sm},{provide:sm,useClass:sm,deps:[sr]},{provide:V0,useClass:V0,deps:[B0,Kn]},{provide:class tU{},useClass:PU,deps:[]},[]];typeof window<"u"&&window;let rD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=nn({token:n,factory:function(t){let r=null;return r=t?new(t||n):St(DI),r},providedIn:"root"}),n})(),DI=(()=>{class n extends rD{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case tt.NONE:return r;case tt.HTML:return d(r,"HTML")?l(r):it(this._doc,String(r)).toString();case tt.STYLE:return d(r,"Style")?l(r):r;case tt.SCRIPT:if(d(r,"Script"))return l(r);throw new Error("unsafe value used in a script context");case tt.URL:return d(r,"URL")?l(r):$(String(r));case tt.RESOURCE_URL:if(d(r,"ResourceURL"))return l(r);throw new Error(`unsafe value used in a resource URL context (see ${gn})`);default:throw new Error(`Unexpected SecurityContext ${t} (see ${gn})`)}}bypassSecurityTrustHtml(t){return function p(n){return new wc(n)}(t)}bypassSecurityTrustStyle(t){return function g(n){return new fx(n)}(t)}bypassSecurityTrustScript(t){return function y(n){return new xc(n)}(t)}bypassSecurityTrustUrl(t){return function _(n){return new c(n)}(t)}bypassSecurityTrustResourceUrl(t){return function b(n){return new o(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(St(sr))},n.\u0275prov=nn({token:n,factory:function(t){let r=null;return r=t?new t:function lG(n){return new DI(n.get(sr))}(St(Ya)),r},providedIn:"root"}),n})();function CI(n,e,t,r,i,s,a){try{var u=n[s](a),h=u.value}catch(m){return void t(m)}u.done?e(h):Promise.resolve(h).then(r,i)}function oh(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var s=n.apply(e,t);function a(h){CI(s,r,i,a,u,"next",h)}function u(h){CI(s,r,i,a,u,"throw",h)}a(void 0)})}}class cG extends F{constructor(e,t){super()}schedule(e,t=0){return this}}const z0={setInterval(n,e,...t){const{delegate:r}=z0;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=z0;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class iD extends cG{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return z0.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&z0.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,S(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const SI={now:()=>(SI.delegate||Date).now(),delegate:void 0};class om{constructor(e,t=om.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}om.now=SI.now;class sD extends om{constructor(e,t=om.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const oD=new sD(iD),uG=oD;function aD(n,e=oD){return pt((t,r)=>{let i=null,s=null,a=null;const u=()=>{if(i){i.unsubscribe(),i=null;const m=s;s=null,r.next(m)}};function h(){const m=a+n,v=e.now();if(v<m)return i=this.schedule(void 0,m-v),void r.add(i);u()}t.subscribe(at(r,m=>{s=m,a=e.now(),i||(i=e.schedule(h,n),r.add(i))},()=>{u(),r.complete()},void 0,()=>{s=i=null}))})}const dG=["gutterEls"];function hG(n,e){if(1&n){const t=jg();_r(0,"div",2,3),jr("keydown",function(i){Bo(t);const s=vs().index;return Ns(vs().startKeyboardDrag(i,2*s+1,s+1))})("mousedown",function(i){Bo(t);const s=vs().index;return Ns(vs().startMouseDrag(i,2*s+1,s+1))})("touchstart",function(i){Bo(t);const s=vs().index;return Ns(vs().startMouseDrag(i,2*s+1,s+1))})("mouseup",function(i){Bo(t);const s=vs().index;return Ns(vs().clickGutter(i,s+1))})("touchend",function(i){Bo(t);const s=vs().index;return Ns(vs().clickGutter(i,s+1))}),Hs(2,"div",4),Vr()}if(2&n){const t=vs(),r=t.index,i=t.$implicit,s=vs();Jd("flex-basis",s.gutterSize,"px")("order",2*r+1),Vs("aria-label",s.gutterAriaLabel)("aria-orientation",s.direction)("aria-valuemin",i.minSize)("aria-valuemax",i.maxSize)("aria-valuenow",i.size)("aria-valuetext",s.getAriaAreaSizeText(i.size))}}function fG(n,e){1&n&&Vf(0,hG,3,10,"div",1),2&n&&ri("ngIf",!1===e.last)}const pG=["*"];function am(n){if(void 0!==n.changedTouches&&n.changedTouches.length>0)return{x:n.changedTouches[0].clientX,y:n.changedTouches[0].clientY};if(void 0!==n.clientX&&void 0!==n.clientY)return{x:n.clientX,y:n.clientY};if(void 0!==n.currentTarget){const e=n.currentTarget;return{x:e.offsetLeft,y:e.offsetTop}}return null}function MI(n,e,t){return Math.abs(n.x-e.x)<=t&&Math.abs(n.y-e.y)<=t}function AI(n,e){const t=n.nativeElement.getBoundingClientRect();return"horizontal"===e?t.width:t.height}function lm(n){return"boolean"==typeof n?n:"false"!==n}function Tu(n,e){return null==n?e:(n=Number(n),!isNaN(n)&&n>=0?n:e)}function TI(n,e){if("percent"===n){const t=e.reduce((r,i)=>null!==i?r+i:r,0);return e.every(r=>null!==r)&&t>99.9&&t<100.1}if("pixel"===n)return 1===e.filter(t=>null===t).length}function j0(n){return null===n.size?null:!0===n.component.lockSize?n.size:null===n.component.minSize?null:n.component.minSize>n.size?n.size:n.component.minSize}function U0(n){return null===n.size?null:!0===n.component.lockSize?n.size:null===n.component.maxSize?null:n.component.maxSize<n.size?n.size:n.component.maxSize}function Wf(n,e,t,r){return e.reduce((i,s)=>{const a=function mG(n,e,t,r){return 0===t?{areaSnapshot:e,pixelAbsorb:0,percentAfterAbsorption:e.sizePercentAtStart,pixelRemain:0}:0===e.sizePixelAtStart&&t<0?{areaSnapshot:e,pixelAbsorb:0,percentAfterAbsorption:0,pixelRemain:t}:"percent"===n?function vG(n,e,t){const i=(n.sizePixelAtStart+e)/t*100;if(e>0){if(null!==n.area.maxSize&&i>n.area.maxSize){const s=n.area.maxSize/100*t;return{areaSnapshot:n,pixelAbsorb:s,percentAfterAbsorption:n.area.maxSize,pixelRemain:n.sizePixelAtStart+e-s}}return{areaSnapshot:n,pixelAbsorb:e,percentAfterAbsorption:i>100?100:i,pixelRemain:0}}if(e<0){if(null!==n.area.minSize&&i<n.area.minSize){const s=n.area.minSize/100*t;return{areaSnapshot:n,pixelAbsorb:s,percentAfterAbsorption:n.area.minSize,pixelRemain:n.sizePixelAtStart+e-s}}return i<0?{areaSnapshot:n,pixelAbsorb:-n.sizePixelAtStart,percentAfterAbsorption:0,pixelRemain:e+n.sizePixelAtStart}:{areaSnapshot:n,pixelAbsorb:e,percentAfterAbsorption:i,pixelRemain:0}}}(e,t,r):"pixel"===n?function yG(n,e,t){const r=n.sizePixelAtStart+e;return e>0?null!==n.area.maxSize&&r>n.area.maxSize?{areaSnapshot:n,pixelAbsorb:n.area.maxSize-n.sizePixelAtStart,percentAfterAbsorption:-1,pixelRemain:r-n.area.maxSize}:{areaSnapshot:n,pixelAbsorb:e,percentAfterAbsorption:-1,pixelRemain:0}:e<0?null!==n.area.minSize&&r<n.area.minSize?{areaSnapshot:n,pixelAbsorb:n.area.minSize+e-r,percentAfterAbsorption:-1,pixelRemain:r-n.area.minSize}:r<0?{areaSnapshot:n,pixelAbsorb:-n.sizePixelAtStart,percentAfterAbsorption:-1,pixelRemain:e+n.sizePixelAtStart}:{areaSnapshot:n,pixelAbsorb:e,percentAfterAbsorption:-1,pixelRemain:0}:void 0}(e,t):void 0}(n,s,i.remain,r);return i.list.push(a),i.remain=a.pixelRemain,i},{remain:t,list:[]})}function kI(n,e){"percent"===n?e.areaSnapshot.area.size=e.percentAfterAbsorption:"pixel"===n&&null!==e.areaSnapshot.area.size&&(e.areaSnapshot.area.size=e.areaSnapshot.sizePixelAtStart+e.pixelAbsorb)}const bG=new Gt("angular-split-global-config");let lD,II=(()=>{class n{set direction(t){this._direction="vertical"===t?"vertical":"horizontal",this.renderer.addClass(this.elRef.nativeElement,`as-${this._direction}`),this.renderer.removeClass(this.elRef.nativeElement,"as-"+("vertical"===this._direction?"horizontal":"vertical")),this.build(!1,!1)}get direction(){return this._direction}set unit(t){this._unit="pixel"===t?"pixel":"percent",this.renderer.addClass(this.elRef.nativeElement,`as-${this._unit}`),this.renderer.removeClass(this.elRef.nativeElement,"as-"+("pixel"===this._unit?"percent":"pixel")),this.build(!1,!0)}get unit(){return this._unit}set gutterSize(t){this._gutterSize=Tu(t,11),this.build(!1,!1)}get gutterSize(){return this._gutterSize}set gutterStep(t){this._gutterStep=Tu(t,1)}get gutterStep(){return this._gutterStep}set restrictMove(t){this._restrictMove=lm(t)}get restrictMove(){return this._restrictMove}set useTransition(t){this._useTransition=lm(t),this._useTransition?this.renderer.addClass(this.elRef.nativeElement,"as-transition"):this.renderer.removeClass(this.elRef.nativeElement,"as-transition")}get useTransition(){return this._useTransition}set disabled(t){this._disabled=lm(t),this._disabled?this.renderer.addClass(this.elRef.nativeElement,"as-disabled"):this.renderer.removeClass(this.elRef.nativeElement,"as-disabled")}get disabled(){return this._disabled}set dir(t){this._dir="rtl"===t?"rtl":"ltr",this.renderer.setAttribute(this.elRef.nativeElement,"dir",this._dir)}get dir(){return this._dir}set gutterDblClickDuration(t){this._gutterDblClickDuration=Tu(t,0)}get gutterDblClickDuration(){return this._gutterDblClickDuration}get transitionEnd(){return new Ie(t=>this.transitionEndSubscriber=t).pipe(aD(20))}constructor(t,r,i,s,a){this.ngZone=t,this.elRef=r,this.cdRef=i,this.renderer=s,this.gutterClickDeltaPx=2,this._config={direction:"horizontal",unit:"percent",gutterSize:11,gutterStep:1,restrictMove:!1,useTransition:!1,disabled:!1,dir:"ltr",gutterDblClickDuration:0},this.dragStart=new Pr(!1),this.dragEnd=new Pr(!1),this.gutterClick=new Pr(!1),this.gutterDblClick=new Pr(!1),this.dragProgressSubject=new Oe,this.dragProgress$=this.dragProgressSubject.asObservable(),this.isDragging=!1,this.isWaitingClear=!1,this.isWaitingInitialMove=!1,this.dragListeners=[],this.snapshot=null,this.startPoint=null,this.endPoint=null,this.displayedAreas=[],this.hiddenAreas=[],this._clickTimeout=null,this.direction=this._direction,this._config=a?Object.assign(this._config,a):this._config,Object.keys(this._config).forEach(u=>{this[u]=this._config[u]})}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>{setTimeout(()=>this.renderer.addClass(this.elRef.nativeElement,"as-init"))})}getNbGutters(){return 0===this.displayedAreas.length?0:this.displayedAreas.length-1}addArea(t){const r={component:t,order:0,size:0,minSize:null,maxSize:null,sizeBeforeCollapse:null,gutterBeforeCollapse:0};!0===t.visible?(this.displayedAreas.push(r),this.build(!0,!0)):this.hiddenAreas.push(r)}removeArea(t){if(this.displayedAreas.some(r=>r.component===t)){const r=this.displayedAreas.find(i=>i.component===t);this.displayedAreas.splice(this.displayedAreas.indexOf(r),1),this.build(!0,!0)}else if(this.hiddenAreas.some(r=>r.component===t)){const r=this.hiddenAreas.find(i=>i.component===t);this.hiddenAreas.splice(this.hiddenAreas.indexOf(r),1)}}updateArea(t,r,i){!0===t.visible&&this.build(r,i)}showArea(t){const r=this.hiddenAreas.find(s=>s.component===t);if(void 0===r)return;const i=this.hiddenAreas.splice(this.hiddenAreas.indexOf(r),1);this.displayedAreas.push(...i),this.build(!0,!0)}hideArea(t){const r=this.displayedAreas.find(s=>s.component===t);if(void 0===r)return;const i=this.displayedAreas.splice(this.displayedAreas.indexOf(r),1);i.forEach(s=>{s.order=0,s.size=0}),this.hiddenAreas.push(...i),this.build(!0,!0)}getVisibleAreaSizes(){return this.displayedAreas.map(t=>null===t.size?"*":t.size)}setVisibleAreaSizes(t){if(t.length!==this.displayedAreas.length)return!1;const r=t.map(s=>Tu(s,null));return!1!==TI(this.unit,r)&&(this.displayedAreas.forEach((s,a)=>s.component._size=r[a]),this.build(!1,!0),!0)}build(t,r){if(this.stopDragging(),!0===t&&(this.displayedAreas.every(i=>null!==i.component.order)&&this.displayedAreas.sort((i,s)=>i.component.order-s.component.order),this.displayedAreas.forEach((i,s)=>{i.order=2*s,i.component.setStyleOrder(i.order)})),!0===r){const i=TI(this.unit,this.displayedAreas.map(s=>s.component.size));switch(this.unit){case"percent":{const s=100/this.displayedAreas.length;this.displayedAreas.forEach(a=>{a.size=i?a.component.size:s,a.minSize=j0(a),a.maxSize=U0(a)});break}case"pixel":if(i)this.displayedAreas.forEach(s=>{s.size=s.component.size,s.minSize=j0(s),s.maxSize=U0(s)});else{const s=this.displayedAreas.filter(a=>null===a.component.size);if(0===s.length&&this.displayedAreas.length>0)this.displayedAreas.forEach((a,u)=>{a.size=0===u?null:a.component.size,a.minSize=0===u?null:j0(a),a.maxSize=0===u?null:U0(a)});else if(s.length>1){let a=!1;this.displayedAreas.forEach(u=>{null===u.component.size?!1===a?(u.size=null,u.minSize=null,u.maxSize=null,a=!0):(u.size=100,u.minSize=null,u.maxSize=null):(u.size=u.component.size,u.minSize=j0(u),u.maxSize=U0(u))})}}}}this.refreshStyleSizes(),this.cdRef.markForCheck()}refreshStyleSizes(){if("percent"===this.unit)if(1===this.displayedAreas.length)this.displayedAreas[0].component.setStyleFlex(0,0,"100%",!1,!1);else{const t=this.getNbGutters()*this.gutterSize;this.displayedAreas.forEach(r=>{r.component.setStyleFlex(0,0,`calc( ${r.size}% - ${r.size/100*t}px )`,null!==r.minSize&&r.minSize===r.size,null!==r.maxSize&&r.maxSize===r.size)})}else"pixel"===this.unit&&this.displayedAreas.forEach(t=>{null===t.size?t.component.setStyleFlex(1,1,1===this.displayedAreas.length?"100%":"auto",!1,!1):1===this.displayedAreas.length?t.component.setStyleFlex(0,0,"100%",!1,!1):t.component.setStyleFlex(0,0,`${t.size}px`,null!==t.minSize&&t.minSize===t.size,null!==t.maxSize&&t.maxSize===t.size)})}clickGutter(t,r){const i=am(t);this.startPoint&&MI(this.startPoint,i,this.gutterClickDeltaPx)&&(!this.isDragging||this.isWaitingInitialMove)&&(null!==this._clickTimeout?(window.clearTimeout(this._clickTimeout),this._clickTimeout=null,this.notify("dblclick",r),this.stopDragging()):this._clickTimeout=window.setTimeout(()=>{this._clickTimeout=null,this.notify("click",r),this.stopDragging()},this.gutterDblClickDuration))}startKeyboardDrag(t,r,i){if(!0===this.disabled||!0===this.isWaitingClear)return;const s=function gG(n,e){if("horizontal"===e)switch(n.key){case"ArrowLeft":case"ArrowRight":case"PageUp":case"PageDown":break;default:return null}if("vertical"===e)switch(n.key){case"ArrowUp":case"ArrowDown":case"PageUp":case"PageDown":break;default:return null}const t=n.currentTarget,r="PageUp"===n.key||"PageDown"===n.key?500:50;let i=t.offsetLeft,s=t.offsetTop;switch(n.key){case"ArrowLeft":i-=r;break;case"ArrowRight":i+=r;break;case"ArrowUp":s-=r;break;case"ArrowDown":s+=r;break;case"PageUp":"vertical"===e?s-=r:i+=r;break;case"PageDown":"vertical"===e?s+=r:i-=r;break;default:return null}return{x:i,y:s}}(t,this.direction);null!==s&&(this.endPoint=s,this.startPoint=am(t),t.preventDefault(),t.stopPropagation(),this.setupForDragEvent(r,i),this.startDragging(),this.drag(),this.stopDragging())}startMouseDrag(t,r,i){t.preventDefault(),t.stopPropagation(),this.startPoint=am(t),null!==this.startPoint&&!0!==this.disabled&&!0!==this.isWaitingClear&&(this.setupForDragEvent(r,i),this.dragListeners.push(this.renderer.listen("document","mouseup",this.stopDragging.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchend",this.stopDragging.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchcancel",this.stopDragging.bind(this))),this.ngZone.runOutsideAngular(()=>{this.dragListeners.push(this.renderer.listen("document","mousemove",this.mouseDragEvent.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchmove",this.mouseDragEvent.bind(this)))}),this.startDragging())}setupForDragEvent(t,r){this.snapshot={gutterNum:r,lastSteppedOffset:0,allAreasSizePixel:AI(this.elRef,this.direction)-this.getNbGutters()*this.gutterSize,allInvolvedAreasSizePercent:100,areasBeforeGutter:[],areasAfterGutter:[]},this.displayedAreas.forEach(i=>{const s={area:i,sizePixelAtStart:AI(i.component.elRef,this.direction),sizePercentAtStart:"percent"===this.unit?i.size:-1};i.order<t?!0===this.restrictMove?this.snapshot.areasBeforeGutter=[s]:this.snapshot.areasBeforeGutter.unshift(s):i.order>t&&(!0===this.restrictMove?0===this.snapshot.areasAfterGutter.length&&(this.snapshot.areasAfterGutter=[s]):this.snapshot.areasAfterGutter.push(s))}),this.snapshot.allInvolvedAreasSizePercent=[...this.snapshot.areasBeforeGutter,...this.snapshot.areasAfterGutter].reduce((i,s)=>i+s.sizePercentAtStart,0)}startDragging(){this.displayedAreas.forEach(t=>t.component.lockEvents()),this.isDragging=!0,this.isWaitingInitialMove=!0}mouseDragEvent(t){t.preventDefault(),t.stopPropagation();const r=am(t);null!==this._clickTimeout&&!MI(this.startPoint,r,this.gutterClickDeltaPx)&&(window.clearTimeout(this._clickTimeout),this._clickTimeout=null),!1!==this.isDragging&&(this.endPoint=am(t),null!==this.endPoint&&this.drag())}drag(){if(this.isWaitingInitialMove){if(this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y)return;this.ngZone.run(()=>{this.isWaitingInitialMove=!1,this.renderer.addClass(this.elRef.nativeElement,"as-dragging"),this.renderer.addClass(this.gutterEls.toArray()[this.snapshot.gutterNum-1].nativeElement,"as-dragged"),this.notify("start",this.snapshot.gutterNum)})}let t="horizontal"===this.direction?this.startPoint.x-this.endPoint.x:this.startPoint.y-this.endPoint.y;"rtl"===this.dir&&"horizontal"===this.direction&&(t=-t);const r=Math.round(t/this.gutterStep)*this.gutterStep;if(r===this.snapshot.lastSteppedOffset)return;this.snapshot.lastSteppedOffset=r;let i=Wf(this.unit,this.snapshot.areasBeforeGutter,-r,this.snapshot.allAreasSizePixel),s=Wf(this.unit,this.snapshot.areasAfterGutter,r,this.snapshot.allAreasSizePixel);if(0!==i.remain&&0!==s.remain?Math.abs(i.remain)===Math.abs(s.remain)||(Math.abs(i.remain)>Math.abs(s.remain)?s=Wf(this.unit,this.snapshot.areasAfterGutter,r+i.remain,this.snapshot.allAreasSizePixel):i=Wf(this.unit,this.snapshot.areasBeforeGutter,-(r-s.remain),this.snapshot.allAreasSizePixel)):0!==i.remain?s=Wf(this.unit,this.snapshot.areasAfterGutter,r+i.remain,this.snapshot.allAreasSizePixel):0!==s.remain&&(i=Wf(this.unit,this.snapshot.areasBeforeGutter,-(r-s.remain),this.snapshot.allAreasSizePixel)),"percent"===this.unit){const a=[...i.list,...s.list],u=a.find(h=>0!==h.percentAfterAbsorption&&h.percentAfterAbsorption!==h.areaSnapshot.area.minSize&&h.percentAfterAbsorption!==h.areaSnapshot.area.maxSize);u&&(u.percentAfterAbsorption=this.snapshot.allInvolvedAreasSizePercent-a.filter(h=>h!==u).reduce((h,m)=>h+m.percentAfterAbsorption,0))}i.list.forEach(a=>kI(this.unit,a)),s.list.forEach(a=>kI(this.unit,a)),this.refreshStyleSizes(),this.notify("progress",this.snapshot.gutterNum)}stopDragging(t){if(t&&(t.preventDefault(),t.stopPropagation()),!1!==this.isDragging){for(this.displayedAreas.forEach(r=>r.component.unlockEvents());this.dragListeners.length>0;){const r=this.dragListeners.pop();r&&r()}this.isDragging=!1,!1===this.isWaitingInitialMove&&this.notify("end",this.snapshot.gutterNum),this.renderer.removeClass(this.elRef.nativeElement,"as-dragging"),this.renderer.removeClass(this.gutterEls.toArray()[this.snapshot.gutterNum-1].nativeElement,"as-dragged"),this.snapshot=null,this.isWaitingClear=!0,this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.startPoint=null,this.endPoint=null,this.isWaitingClear=!1})})}}notify(t,r){const i=this.getVisibleAreaSizes();"start"===t?this.dragStart.emit({gutterNum:r,sizes:i}):"end"===t?this.dragEnd.emit({gutterNum:r,sizes:i}):"click"===t?this.gutterClick.emit({gutterNum:r,sizes:i}):"dblclick"===t?this.gutterDblClick.emit({gutterNum:r,sizes:i}):"transitionEnd"===t?this.transitionEndSubscriber&&this.ngZone.run(()=>this.transitionEndSubscriber.next(i)):"progress"===t&&this.dragProgressSubject.next({gutterNum:r,sizes:i})}ngOnDestroy(){this.stopDragging()}collapseArea(t,r,i){const s=this.displayedAreas.find(h=>h.component===t);if(void 0===s)return;const a="right"===i?1:-1;s.sizeBeforeCollapse||(s.sizeBeforeCollapse=s.size,s.gutterBeforeCollapse=a),s.size=r;const u=this.gutterEls.find(h=>h.nativeElement.style.order===`${s.order+a}`);u&&this.renderer.addClass(u.nativeElement,"as-split-gutter-collapsed"),this.updateArea(t,!1,!1)}expandArea(t){const r=this.displayedAreas.find(s=>s.component===t);if(void 0===r||!r.sizeBeforeCollapse)return;r.size=r.sizeBeforeCollapse,r.sizeBeforeCollapse=null;const i=this.gutterEls.find(s=>s.nativeElement.style.order===`${r.order+r.gutterBeforeCollapse}`);i&&this.renderer.removeClass(i.nativeElement,"as-split-gutter-collapsed"),this.updateArea(t,!1,!1)}getAriaAreaSizeText(t){return null===t?null:t.toFixed(0)+" "+this.unit}}return n.\u0275fac=function(t){return new(t||n)(et(Kn),et(br),et(rh),et(Wa),et(bG,8))},n.\u0275cmp=Qi({type:n,selectors:[["as-split"]],viewQuery:function(t,r){if(1&t&&Cu(dG,5),2&t){let i;Tc(i=kc())&&(r.gutterEls=i)}},inputs:{direction:"direction",unit:"unit",gutterSize:"gutterSize",gutterStep:"gutterStep",restrictMove:"restrictMove",useTransition:"useTransition",disabled:"disabled",dir:"dir",gutterDblClickDuration:"gutterDblClickDuration",gutterClickDeltaPx:"gutterClickDeltaPx",gutterAriaLabel:"gutterAriaLabel"},outputs:{transitionEnd:"transitionEnd",dragStart:"dragStart",dragEnd:"dragEnd",gutterClick:"gutterClick",gutterDblClick:"gutterDblClick"},exportAs:["asSplit"],ngContentSelectors:pG,decls:2,vars:1,consts:[["ngFor","",3,"ngForOf"],["role","slider","tabindex","0","class","as-split-gutter",3,"flex-basis","order","keydown","mousedown","touchstart","mouseup","touchend",4,"ngIf"],["role","slider","tabindex","0",1,"as-split-gutter",3,"keydown","mousedown","touchstart","mouseup","touchend"],["gutterEls",""],[1,"as-split-gutter-icon"]],template:function(t,r){1&t&&(Eu(),Wo(0),Vf(1,fG,1,1,"ng-template",0)),2&t&&(di(1),ri("ngForOf",r.displayedAreas))},dependencies:[jE,UE],styles:["[_nghost-%COMP%]{display:flex;flex-wrap:nowrap;justify-content:flex-start;align-items:stretch;overflow:hidden;width:100%;height:100%}[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{border:none;flex-grow:0;flex-shrink:0;background-color:#eee;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%] > .as-split-gutter.as-split-gutter-collapsed[_ngcontent-%COMP%]{flex-basis:1px!important;pointer-events:none}[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%] > .as-split-gutter-icon[_ngcontent-%COMP%]{width:100%;height:100%;background-position:center center;background-repeat:no-repeat}[_nghost-%COMP%]    >.as-split-area{flex-grow:0;flex-shrink:0;overflow-x:hidden;overflow-y:auto}[_nghost-%COMP%]    >.as-split-area.as-hidden{flex:0 1 0px!important;overflow-x:hidden;overflow-y:hidden}.as-horizontal[_nghost-%COMP%]{flex-direction:row}.as-horizontal[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{flex-direction:row;cursor:col-resize;height:100%}.as-horizontal[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%] > .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==)}.as-horizontal[_nghost-%COMP%]    >.as-split-area{height:100%}.as-vertical[_nghost-%COMP%]{flex-direction:column}.as-vertical[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{flex-direction:column;cursor:row-resize;width:100%}.as-vertical[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]   .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAFCAMAAABl/6zIAAAABlBMVEUAAADMzMzIT8AyAAAAAXRSTlMAQObYZgAAABRJREFUeAFjYGRkwIMJSeMHlBkOABP7AEGzSuPKAAAAAElFTkSuQmCC)}.as-vertical[_nghost-%COMP%]    >.as-split-area{width:100%}.as-vertical[_nghost-%COMP%]    >.as-split-area.as-hidden{max-width:0}.as-disabled[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{cursor:default}.as-disabled[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]   .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==)}.as-transition.as-init[_nghost-%COMP%]:not(.as-dragging) > .as-split-gutter[_ngcontent-%COMP%], .as-transition.as-init[_nghost-%COMP%]:not(.as-dragging)    >.as-split-area{transition:flex-basis .3s}"],changeDetection:0}),n})(),_G=(()=>{class n{set order(t){this._order=Tu(t,null),this.split.updateArea(this,!0,!1)}get order(){return this._order}set size(t){this._size=Tu(t,null),this.split.updateArea(this,!1,!0)}get size(){return this._size}set minSize(t){this._minSize=Tu(t,null),this.split.updateArea(this,!1,!0)}get minSize(){return this._minSize}set maxSize(t){this._maxSize=Tu(t,null),this.split.updateArea(this,!1,!0)}get maxSize(){return this._maxSize}set lockSize(t){this._lockSize=lm(t),this.split.updateArea(this,!1,!0)}get lockSize(){return this._lockSize}set visible(t){this._visible=lm(t),this._visible?(this.split.showArea(this),this.renderer.removeClass(this.elRef.nativeElement,"as-hidden")):(this.split.hideArea(this),this.renderer.addClass(this.elRef.nativeElement,"as-hidden"))}get visible(){return this._visible}constructor(t,r,i,s){this.ngZone=t,this.elRef=r,this.renderer=i,this.split=s,this._order=null,this._size=null,this._minSize=null,this._maxSize=null,this._lockSize=!1,this._visible=!0,this.lockListeners=[],this.renderer.addClass(this.elRef.nativeElement,"as-split-area")}ngOnInit(){this.split.addArea(this),this.ngZone.runOutsideAngular(()=>{this.transitionListener=this.renderer.listen(this.elRef.nativeElement,"transitionend",t=>{"flex-basis"===t.propertyName&&this.split.notify("transitionEnd",-1)})})}setStyleOrder(t){this.renderer.setStyle(this.elRef.nativeElement,"order",t)}setStyleFlex(t,r,i,s,a){this.renderer.setStyle(this.elRef.nativeElement,"flex-grow",t),this.renderer.setStyle(this.elRef.nativeElement,"flex-shrink",r),this.renderer.setStyle(this.elRef.nativeElement,"flex-basis",i),!0===s?this.renderer.addClass(this.elRef.nativeElement,"as-min"):this.renderer.removeClass(this.elRef.nativeElement,"as-min"),!0===a?this.renderer.addClass(this.elRef.nativeElement,"as-max"):this.renderer.removeClass(this.elRef.nativeElement,"as-max")}lockEvents(){this.ngZone.runOutsideAngular(()=>{this.lockListeners.push(this.renderer.listen(this.elRef.nativeElement,"selectstart",()=>!1)),this.lockListeners.push(this.renderer.listen(this.elRef.nativeElement,"dragstart",()=>!1))})}unlockEvents(){for(;this.lockListeners.length>0;){const t=this.lockListeners.pop();t&&t()}}ngOnDestroy(){this.unlockEvents(),this.transitionListener&&this.transitionListener(),this.split.removeArea(this)}collapse(t=0,r="right"){this.split.collapseArea(this,t,r)}expand(){this.split.expandArea(this)}}return n.\u0275fac=function(t){return new(t||n)(et(Kn),et(br),et(Wa),et(II))},n.\u0275dir=fn({type:n,selectors:[["as-split-area"],["","as-split-area",""]],inputs:{order:"order",size:"size",minSize:"minSize",maxSize:"maxSize",lockSize:"lockSize",visible:"visible"},exportAs:["asSplitArea"]}),n})(),wG=(()=>{class n{static forRoot(){return console.warn("AngularSplitModule.forRoot() is deprecated and will be removed in v6"),{ngModule:n,providers:[]}}static forChild(){return console.warn("AngularSplitModule.forChild() is deprecated and will be removed in v6"),{ngModule:n,providers:[]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=gr({imports:[Mu]}),n})();try{lD=typeof Intl<"u"&&Intl.v8BreakIterator}catch{lD=!1}let cm,G0,ah,cD,zs=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function J4(n){return n===sI}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!lD)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(St(mE))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function um(n){return function xG(){if(null==cm&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>cm=!0}))}finally{cm=cm||!1}return cm}()?n:!!n.capture}function RI(){if(null==ah){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return ah=!1,ah;if("scrollBehavior"in document.documentElement.style)ah=!0;else{const n=Element.prototype.scrollTo;ah=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return ah}function dm(){if("object"!=typeof document||!document)return 0;if(null==G0){const n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const t=document.createElement("div"),r=t.style;r.width="2px",r.height="1px",n.appendChild(t),document.body.appendChild(n),G0=0,0===n.scrollLeft&&(n.scrollLeft=1,G0=0===n.scrollLeft?1:2),n.remove()}return G0}function ku(n){return n.composedPath?n.composedPath()[0]:n.target}function uD(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}class PI extends Oe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function Iu(...n){return hl(n,dl(n))}function dD(n,e){return pt((t,r)=>{let i=0;t.subscribe(at(r,s=>n.call(e,s,i++)&&r.next(s)))})}function NI(n){return dD((e,t)=>n<=t)}function RG(n,e){return n===e}function qo(n){return pt((e,t)=>{ls(n).subscribe(at(t,()=>t.complete(),U)),!t.closed&&e.subscribe(t)})}function Pc(n){return null!=n&&"false"!=`${n}`}function hD(n,e=0){return function PG(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function $0(n){return Array.isArray(n)?n:[n]}function Fi(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Yf(n){return n instanceof br?n.nativeElement:n}let NG=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),LG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=gr({providers:[NG]}),n})();const{isArray:FG}=Array,{getPrototypeOf:BG,prototype:VG,keys:HG}=Object;function LI(n){if(1===n.length){const e=n[0];if(FG(e))return{args:e,keys:null};if(function zG(n){return n&&"object"==typeof n&&BG(n)===VG}(e)){const t=HG(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:jG}=Array;function fD(n){return We(e=>function UG(n,e){return jG(e)?n(...e):n(e)}(n,e))}function FI(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function BI(n,e,t){n?mo(t,n,e):e()}function pD(...n){return function WG(){return $c(1)}()(hl(n,dl(n)))}function W0(n){return n<=0?()=>Sr:pt((e,t)=>{let r=0;e.subscribe(at(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function VI(...n){const e=dl(n);return pt((t,r)=>{(e?pD(n,t,e):pD(n,t)).subscribe(r)})}const HI=new Set;let Xf,qG=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):XG}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function YG(n){if(!HI.has(n))try{Xf||(Xf=document.createElement("style"),Xf.setAttribute("type","text/css"),document.head.appendChild(Xf)),Xf.sheet&&(Xf.sheet.insertRule(`@media ${n} {body{ }}`,0),HI.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(St(zs))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function XG(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let KG=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new Oe}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return zI($0(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let s=function GG(...n){const e=dl(n),t=Lh(n),{args:r,keys:i}=LI(n);if(0===r.length)return hl([],e);const s=new Ie(function $G(n,e,t=ye){return r=>{BI(e,()=>{const{length:i}=n,s=new Array(i);let a=i,u=i;for(let h=0;h<i;h++)BI(e,()=>{const m=hl(n[h],e);let v=!1;m.subscribe(at(r,x=>{s[h]=x,v||(v=!0,u--),u||r.next(t(s.slice()))},()=>{--a||r.complete()}))},r)},r)}}(r,e,i?a=>FI(i,a):ye));return t?s.pipe(fD(t)):s}(zI($0(t)).map(a=>this._registerQuery(a).observable));return s=pD(s.pipe(W0(1)),s.pipe(NI(1),aD(0))),s.pipe(We(a=>{const u={matches:!1,breakpoints:{}};return a.forEach(({matches:h,query:m})=>{u.matches=u.matches||h,u.breakpoints[m]=h}),u}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),s={observable:new Ie(a=>{const u=h=>this._zone.run(()=>a.next(h));return r.addListener(u),()=>{r.removeListener(u)}}).pipe(VI(r),We(({matches:a})=>({query:t,matches:a})),qo(this._destroySubject)),mql:r};return this._queries.set(t,s),s}}return n.\u0275fac=function(t){return new(t||n)(St(qG),St(Kn))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function zI(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function q0(n,e){return(n.getAttribute(e)||"").match(/\S+/g)||[]}const UI="cdk-describedby-message",Y0="cdk-describedby-host";let gD=0,JG=(()=>{class n{constructor(t,r){this._platform=r,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+gD++,this._document=t,this._id=Ro(w0)+"-"+gD++}describe(t,r,i){if(!this._canBeDescribed(t,r))return;const s=mD(r,i);"string"!=typeof r?(GI(r,this._id),this._messageRegistry.set(s,{messageElement:r,referenceCount:0})):this._messageRegistry.has(s)||this._createMessageElement(r,i),this._isElementDescribedByMessage(t,s)||this._addMessageReference(t,s)}removeDescription(t,r,i){if(!r||!this._isElementNode(t))return;const s=mD(r,i);if(this._isElementDescribedByMessage(t,s)&&this._removeMessageReference(t,s),"string"==typeof r){const a=this._messageRegistry.get(s);a&&0===a.referenceCount&&this._deleteMessageElement(s)}0===this._messagesContainer?.childNodes.length&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){const t=this._document.querySelectorAll(`[${Y0}="${this._id}"]`);for(let r=0;r<t.length;r++)this._removeCdkDescribedByReferenceIds(t[r]),t[r].removeAttribute(Y0);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(t,r){const i=this._document.createElement("div");GI(i,this._id),i.textContent=t,r&&i.setAttribute("role",r),this._createMessagesContainer(),this._messagesContainer.appendChild(i),this._messageRegistry.set(mD(t,r),{messageElement:i,referenceCount:0})}_deleteMessageElement(t){this._messageRegistry.get(t)?.messageElement?.remove(),this._messageRegistry.delete(t)}_createMessagesContainer(){if(this._messagesContainer)return;const t="cdk-describedby-message-container",r=this._document.querySelectorAll(`.${t}[platform="server"]`);for(let s=0;s<r.length;s++)r[s].remove();const i=this._document.createElement("div");i.style.visibility="hidden",i.classList.add(t),i.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&i.setAttribute("platform","server"),this._document.body.appendChild(i),this._messagesContainer=i}_removeCdkDescribedByReferenceIds(t){const r=q0(t,"aria-describedby").filter(i=>0!=i.indexOf(UI));t.setAttribute("aria-describedby",r.join(" "))}_addMessageReference(t,r){const i=this._messageRegistry.get(r);(function ZG(n,e,t){const r=q0(n,e);r.some(i=>i.trim()==t.trim())||(r.push(t.trim()),n.setAttribute(e,r.join(" ")))})(t,"aria-describedby",i.messageElement.id),t.setAttribute(Y0,this._id),i.referenceCount++}_removeMessageReference(t,r){const i=this._messageRegistry.get(r);i.referenceCount--,function QG(n,e,t){const i=q0(n,e).filter(s=>s!=t.trim());i.length?n.setAttribute(e,i.join(" ")):n.removeAttribute(e)}(t,"aria-describedby",i.messageElement.id),t.removeAttribute(Y0)}_isElementDescribedByMessage(t,r){const i=q0(t,"aria-describedby"),s=this._messageRegistry.get(r),a=s&&s.messageElement.id;return!!a&&-1!=i.indexOf(a)}_canBeDescribed(t,r){if(!this._isElementNode(t))return!1;if(r&&"object"==typeof r)return!0;const i=null==r?"":`${r}`.trim(),s=t.getAttribute("aria-label");return!(!i||s&&s.trim()===i)}_isElementNode(t){return t.nodeType===this._document.ELEMENT_NODE}}return n.\u0275fac=function(t){return new(t||n)(St(sr),St(zs))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function mD(n,e){return"string"==typeof n?`${e||""}/${n}`:n}function GI(n,e){n.id||(n.id=`${UI}-${e}-${gD++}`)}function WI(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function qI(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const s8=new Gt("cdk-input-modality-detector-options"),o8={ignoreKeys:[18,17,224,91,16]},Kf=um({passive:!0,capture:!0});let a8=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,r,i,s){this._platform=t,this._mostRecentTarget=null,this._modality=new PI(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(u=>u===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=ku(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<650||(this._modality.next(WI(a)?"keyboard":"mouse"),this._mostRecentTarget=ku(a))},this._onTouchstart=a=>{qI(a)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=ku(a))},this._options={...o8,...s},this.modalityDetected=this._modality.pipe(NI(1)),this.modalityChanged=this.modalityDetected.pipe(function OG(n,e=ye){return n=n??RG,pt((t,r)=>{let i,s=!0;t.subscribe(at(r,a=>{const u=e(a);(s||!n(i,u))&&(s=!1,i=u,r.next(a))}))})}()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,Kf),i.addEventListener("mousedown",this._onMousedown,Kf),i.addEventListener("touchstart",this._onTouchstart,Kf)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Kf),document.removeEventListener("mousedown",this._onMousedown,Kf),document.removeEventListener("touchstart",this._onTouchstart,Kf))}}return n.\u0275fac=function(t){return new(t||n)(St(zs),St(Kn),St(sr),St(s8,8))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const c8=new Gt("cdk-focus-monitor-default-options"),X0=um({passive:!0,capture:!0});let vD=(()=>{class n{constructor(t,r,i,s,a){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Oe,this._rootNodeFocusAndBlurListener=u=>{for(let m=ku(u);m;m=m.parentElement)"focus"===u.type?this._onFocus(u,m):this._onBlur(u,m)},this._document=s,this._detectionMode=a?.detectionMode||0}monitor(t,r=!1){const i=Yf(t);if(!this._platform.isBrowser||1!==i.nodeType)return Iu(null);const s=function DG(n){if(function EG(){if(null==cD){const n=typeof document<"u"?document.head:null;cD=!(!n||!n.createShadowRoot&&!n.attachShadow)}return cD}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(i)||this._getDocument(),a=this._elementInfo.get(i);if(a)return r&&(a.checkChildren=!0),a.subject;const u={checkChildren:r,subject:new Oe,rootNode:s};return this._elementInfo.set(i,u),this._registerGlobalListeners(u),u.subject}stopMonitoring(t){const r=Yf(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const s=Yf(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([u,h])=>this._originChanged(u,r,h)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),s=ku(t);!i||!i.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,X0),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,X0)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(qo(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,X0),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,X0),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,s)=>{(s===t||i.checkChildren&&s.contains(t))&&r.push([s,i])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if("mouse"!==i||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let a=0;a<s.length;a++)if(s[a].contains(r))return!0;return!1}}return n.\u0275fac=function(t){return new(t||n)(St(Kn),St(zs),St(a8),St(sr,8),St(c8,8))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const XI="cdk-high-contrast-black-on-white",KI="cdk-high-contrast-white-on-black",yD="cdk-high-contrast-active";let ZI=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=Ro(KG).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(yD,XI,KI),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(yD,XI):2===r&&t.add(yD,KI)}}}return n.\u0275fac=function(t){return new(t||n)(St(zs),St(sr))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),u8=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(St(ZI))},n.\u0275mod=ei({type:n}),n.\u0275inj=gr({imports:[LG]}),n})();const d8=new Gt("cdk-dir-doc",{providedIn:"root",factory:function h8(){return Ro(sr)}}),f8=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let hm=(()=>{class n{constructor(t){this.value="ltr",this.change=new Pr,t&&(this.value=function p8(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?f8.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(St(d8,8))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),fm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=gr({}),n})();const m8=new Gt("mat-sanity-checks",{providedIn:"root",factory:function g8(){return!0}});let pa=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!uD()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(St(ZI),St(m8,8),St(sr))},n.\u0275mod=ei({type:n}),n.\u0275inj=gr({imports:[fm,fm]}),n})();function eO(n){return class extends n{get disabled(){return this._disabled}set disabled(e){this._disabled=Pc(e)}constructor(...e){super(...e),this._disabled=!1}}}function K0(n,e){return class extends n{get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}constructor(...t){super(...t),this.defaultColor=e,this.color=e}}}function tO(n){return class extends n{get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Pc(e)}constructor(...e){super(...e),this._disableRipple=!1}}}function v8(n,e=0){return class extends n{get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?hD(t):this.defaultTabIndex}constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}}}class b8{constructor(e,t,r,i=!1){this._renderer=e,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const nO=um({passive:!0,capture:!0});class _8{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=ku(e);t&&this._events.get(e.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,r,i){const s=this._events.get(t);if(s){const a=s.get(r);a?a.add(i):s.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,nO)})}removeHandler(e,t,r){const i=this._events.get(e);if(!i)return;const s=i.get(t);s&&(s.delete(r),0===s.size&&i.delete(t),0===i.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,nO)))}}const rO={enterDuration:225,exitDuration:150},iO=um({passive:!0,capture:!0}),sO=["mousedown","touchstart"],oO=["mouseup","mouseleave","touchend","touchcancel"];class gm{constructor(e,t,r,i){this._target=e,this._ngZone=t,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=Yf(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...rO,...r.animation};r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const a=r.radius||function x8(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),u=e-i.left,h=t-i.top,m=s.enterDuration,v=document.createElement("div");v.classList.add("mat-ripple-element"),v.style.left=u-a+"px",v.style.top=h-a+"px",v.style.height=2*a+"px",v.style.width=2*a+"px",null!=r.color&&(v.style.backgroundColor=r.color),v.style.transitionDuration=`${m}ms`,this._containerElement.appendChild(v);const x=window.getComputedStyle(v),j=x.transitionDuration,Q="none"===x.transitionProperty||"0s"===j||"0s, 0s"===j||0===i.width&&0===i.height,oe=new b8(this,v,r,Q);v.style.transform="scale3d(1, 1, 1)",oe.state=0,r.persistent||(this._mostRecentTransientRipple=oe);let ve=null;return!Q&&(m||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Pe=()=>this._finishRippleTransition(oe),Ke=()=>this._destroyRipple(oe);v.addEventListener("transitionend",Pe),v.addEventListener("transitioncancel",Ke),ve={onTransitionEnd:Pe,onTransitionCancel:Ke}}),this._activeRipples.set(oe,ve),(Q||!m)&&this._finishRippleTransition(oe),oe}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,r={...rO,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Yf(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,sO.forEach(r=>{gm._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{oO.forEach(t=>{this._triggerElement.addEventListener(t,this,iO)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=WI(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!qI(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(sO.forEach(t=>gm._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&oO.forEach(t=>e.removeEventListener(t,this,iO)))}}gm._eventManager=new _8;const E8=new Gt("mat-ripple-global-options");let Z0=(()=>{class n{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,r,i,s,a){this._elementRef=t,this._animationMode=a,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new gm(this,r,t,i)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,{...this.rippleConfig,...i}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return n.\u0275fac=function(t){return new(t||n)(et(br),et(Kn),et(zs),et(E8,8),et(Ic,8))},n.\u0275dir=fn({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&ys("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),aO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=gr({imports:[pa,pa]}),n})();function bD(n,e,t){const r=q(n)||e||t?{next:n,error:e,complete:t}:n;return r?pt((i,s)=>{var a;null===(a=r.subscribe)||void 0===a||a.call(r);let u=!0;i.subscribe(at(s,h=>{var m;null===(m=r.next)||void 0===m||m.call(r,h),s.next(h)},()=>{var h;u=!1,null===(h=r.complete)||void 0===h||h.call(r),s.complete()},h=>{var m;u=!1,null===(m=r.error)||void 0===m||m.call(r,h),s.error(h)},()=>{var h,m;u&&(null===(h=r.unsubscribe)||void 0===h||h.call(r)),null===(m=r.finalize)||void 0===m||m.call(r)}))}):ye}function cO(n){return pt((e,t)=>{let s,r=null,i=!1;r=e.subscribe(at(t,void 0,void 0,a=>{s=ls(n(a,cO(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}class _D{}class Ou{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),a=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(a):this.headers.set(s,[a])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ou?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Ou;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Ou?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let a=this.headers.get(t);if(!a)return;a=a.filter(u=>-1===s.indexOf(u)),0===a.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,a)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class M8{encodeKey(e){return dO(e)}encodeValue(e){return dO(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const T8=/%(\d[a-f0-9])/gi,k8={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function dO(n){return encodeURIComponent(n).replace(T8,(e,t)=>k8[t]??e)}function Q0(n){return`${n}`}class Ru{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new M8,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function A8(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[a,u]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],h=t.get(a)||[];h.push(u),t.set(a,h)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(Q0):[Q0(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Ru({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Q0(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(Q0(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class I8{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function hO(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function fO(n){return typeof Blob<"u"&&n instanceof Blob}function pO(n){return typeof FormData<"u"&&n instanceof FormData}class mm{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function O8(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Ou),this.context||(this.context=new I8),this.params){const a=this.params.toString();if(0===a.length)this.urlWithParams=t;else{const u=t.indexOf("?");this.urlWithParams=t+(-1===u?"?":u<t.length-1?"&":"")+a}}else this.params=new Ru,this.urlWithParams=t}serializeBody(){return null===this.body?null:hO(this.body)||fO(this.body)||pO(this.body)||function R8(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ru?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||pO(this.body)?null:fO(this.body)?this.body.type||null:hO(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ru?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,u=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let h=e.headers||this.headers,m=e.params||this.params;const v=e.context??this.context;return void 0!==e.setHeaders&&(h=Object.keys(e.setHeaders).reduce((x,I)=>x.set(I,e.setHeaders[I]),h)),e.setParams&&(m=Object.keys(e.setParams).reduce((x,I)=>x.set(I,e.setParams[I]),m)),new mm(t,r,s,{params:m,headers:h,context:v,reportProgress:u,responseType:i,withCredentials:a})}}var bs=(()=>((bs=bs||{})[bs.Sent=0]="Sent",bs[bs.UploadProgress=1]="UploadProgress",bs[bs.ResponseHeader=2]="ResponseHeader",bs[bs.DownloadProgress=3]="DownloadProgress",bs[bs.Response=4]="Response",bs[bs.User=5]="User",bs))();class P8{constructor(e,t=200,r="OK"){this.headers=e.headers||new Ou,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class wD extends P8{constructor(e={}){super(e),this.type=bs.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new wD({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function xD(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let ED=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof mm)s=t;else{let h,m;h=i.headers instanceof Ou?i.headers:new Ou(i.headers),i.params&&(m=i.params instanceof Ru?i.params:new Ru({fromObject:i.params})),s=new mm(t,r,void 0!==i.body?i.body:null,{headers:h,context:i.context,params:m,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const a=Iu(s).pipe(function S8(n,e){return q(e)?Ta(n,e,1):Ta(n,1)}(h=>this.handler.handle(h)));if(t instanceof mm||"events"===i.observe)return a;const u=a.pipe(dD(h=>h instanceof wD));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return u.pipe(We(h=>{if(null!==h.body&&!(h.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return h.body}));case"blob":return u.pipe(We(h=>{if(null!==h.body&&!(h.body instanceof Blob))throw new Error("Response is not a Blob.");return h.body}));case"text":return u.pipe(We(h=>{if(null!==h.body&&"string"!=typeof h.body)throw new Error("Response is not a string.");return h.body}));default:return u.pipe(We(h=>h.body))}case"response":return u;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Ru).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,xD(i,r))}post(t,r,i={}){return this.request("POST",t,xD(i,r))}put(t,r,i={}){return this.request("PUT",t,xD(i,r))}}return n.\u0275fac=function(t){return new(t||n)(St(_D))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})();const q8=["*"];let eb;function vm(n){return function Y8(){if(void 0===eb&&(eb=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(eb=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return eb}()?.createHTML(n)||n}function xO(n){return Error(`Unable to find icon with the name "${n}"`)}function EO(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function DO(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class lh{constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let tb=(()=>{class n{constructor(t,r,i,s){this._httpClient=t,this._sanitizer=r,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,s){return this._addSvgIconConfig(t,r,new lh(i,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,s){const a=this._sanitizer.sanitize(tt.HTML,i);if(!a)throw DO(i);const u=vm(a);return this._addSvgIconConfig(t,r,new lh("",u,s))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new lh(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const s=this._sanitizer.sanitize(tt.HTML,r);if(!s)throw DO(r);const a=vm(s);return this._addSvgIconSetConfig(t,new lh("",a,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(tt.RESOURCE_URL,t);if(!r)throw EO(t);const i=this._cachedIconsByUrl.get(r);return i?Iu(nb(i)):this._loadSvgIconFromConfig(new lh(t,null)).pipe(bD(s=>this._cachedIconsByUrl.set(r,s)),We(s=>nb(s)))}getNamedSvgIcon(t,r=""){const i=CO(r,t);let s=this._svgIconConfigs.get(i);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,t),s)return this._svgIconConfigs.set(i,s),this._getSvgFromConfig(s);const a=this._iconSetConfigs.get(r);return a?this._getSvgFromIconSetConfigs(t,a):function D8(n,e){const t=q(n)?n:()=>n,r=i=>i.error(t());return new Ie(e?i=>e.schedule(r,0,i):r)}(xO(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Iu(nb(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(We(r=>nb(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?Iu(i):function lO(...n){const e=Lh(n),{args:t,keys:r}=LI(n),i=new Ie(s=>{const{length:a}=t;if(!a)return void s.complete();const u=new Array(a);let h=a,m=a;for(let v=0;v<a;v++){let x=!1;ls(t[v]).subscribe(at(s,I=>{x||(x=!0,m--),u[v]=I},()=>h--,void 0,()=>{(!h||!x)&&(m||s.next(r?FI(r,u):u),s.complete())}))}});return e?i.pipe(fD(e)):i}(r.filter(a=>!a.svgText).map(a=>this._loadSvgIconSetFromConfig(a).pipe(cO(u=>{const m=`Loading icon set URL: ${this._sanitizer.sanitize(tt.RESOURCE_URL,a.url)} failed: ${u.message}`;return this._errorHandler.handleError(new Error(m)),Iu(null)})))).pipe(We(()=>{const a=this._extractIconWithNameFromAnySet(t,r);if(!a)throw xO(t);return a}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const s=r[i];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const a=this._svgElementFromConfig(s),u=this._extractSvgIconFromSet(a,t,s.options);if(u)return u}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(bD(r=>t.svgText=r),We(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Iu(null):this._fetchIcon(t).pipe(bD(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const s=t.querySelector(`[id="${r}"]`);if(!s)return null;const a=s.cloneNode(!0);if(a.removeAttribute("id"),"svg"===a.nodeName.toLowerCase())return this._setSvgAttributes(a,i);if("symbol"===a.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(a),i);const u=this._svgElementFromString(vm("<svg></svg>"));return u.appendChild(a),this._setSvgAttributes(u,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString(vm("<svg></svg>")),i=t.attributes;for(let s=0;s<i.length;s++){const{name:a,value:u}=i[s];"id"!==a&&r.setAttribute(a,u)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){const{url:r,options:i}=t,s=i?.withCredentials??!1;if(!this._httpClient)throw function X8(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const a=this._sanitizer.sanitize(tt.RESOURCE_URL,r);if(!a)throw EO(r);const u=this._inProgressUrlFetches.get(a);if(u)return u;const h=this._httpClient.get(a,{responseType:"text",withCredentials:s}).pipe(We(m=>vm(m)),function C8(n){return pt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>this._inProgressUrlFetches.delete(a)),ka());return this._inProgressUrlFetches.set(a,h),h}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(CO(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const s=this._resolvers[i](r,t);if(s)return Z8(s)?new lh(s.url,null,s.options):new lh(s,null)}}}return n.\u0275fac=function(t){return new(t||n)(St(ED,8),St(rD),St(sr,8),St(ua))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function nb(n){return n.cloneNode(!0)}function CO(n,e){return n+":"+e}function Z8(n){return!(!n.url||!n.options)}const Q8=K0(class{constructor(n){this._elementRef=n}}),J8=new Gt("MAT_ICON_DEFAULT_OPTIONS"),e$=new Gt("mat-icon-location",{providedIn:"root",factory:function t$(){const n=Ro(sr),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),SO=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],n$=SO.map(n=>`[${n}]`).join(", "),r$=/^url\(['"]?#(.*?)['"]?\)$/;let MO=(()=>{class n extends Q8{get inline(){return this._inline}set inline(t){this._inline=Pc(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}constructor(t,r,i,s,a,u){super(t),this._iconRegistry=r,this._location=s,this._errorHandler=a,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=F.EMPTY,u&&(u.color&&(this.color=this.defaultColor=u.color),u.fontSet&&(this.fontSet=u.fontSet)),i||t.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>t.classList.remove(i)),r.forEach(i=>t.classList.add(i)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,s)=>{i.forEach(a=>{s.setAttribute(a.name,`url('${t}#${a.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(n$),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)SO.forEach(a=>{const u=r[s],h=u.getAttribute(a),m=h?h.match(r$):null;if(m){let v=i.get(u);v||(v=[],i.set(u,v)),v.push({name:a,value:m[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(W0(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${s.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(et(br),et(tb),Rd("aria-hidden"),et(e$),et(ua),et(J8,8))},n.\u0275cmp=Qi({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(t,r){2&t&&(Vs("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),ys("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Fn],ngContentSelectors:q8,decls:1,vars:0,template:function(t,r){1&t&&(Eu(),Wo(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),CD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=gr({imports:[pa,pa]}),n})();class Jf{}Jf.\u0275fac=function(e){return new(e||Jf)},Jf.\u0275mod=ei({type:Jf}),Jf.\u0275inj=gr({imports:[Mu,CD]});class SD{constructor(){this.displayContextMenu=!0,this.contextMenuCommands=new i$,this.individualCSS={"background-color":"rgb(64,153,218)",color:"#333","border-color":"#bbb","border-width":3,"border-opacity":.5},this.classNodeCSS={"background-color":"rgb(238, 75, 43)",color:"#333"},this.literalNodeCSS={"background-color":"white",color:"#333",opacity:1,width:"data(width)",shape:"rectangle","border-color":"#bbb","border-width":3,"border-opacity":.5}}}class i${constructor(){this.nodes=[{id:"copyURI",visible:!0,enabled:!0,label:"Copy"},{id:"search",visible:!0,enabled:!0,label:"Search"},{id:"focus",visible:!0,enabled:!0,label:"Focus"},{id:"expandInbound",visible:!0,enabled:!0,label:"+inbound"},{id:"expandOutbound",visible:!0,enabled:!0,label:"+outbound"}],this.edges=[{id:"copyURI",visible:!0,enabled:!0,label:"Copy"},{id:"search",visible:!0,enabled:!0,label:"Search"}],this.canvas=[]}}class s${constructor(e,t,r){this.resourceURI=e,this.commandId=t,this.contextCategory=r}}var ep=(()=>{return(n=ep||(ep={})).CANVAS="CANVAS",n.EDGE="EDGE",n.NODE="NODE",ep;var n})();const MD=new SD;MD.contextMenuCommands.nodes=[{id:"copyURI",visible:!0,enabled:!0,label:"Copy"}],MD.contextMenuCommands.edges=[{id:"copyURI",visible:!0,enabled:!0,label:"Copy"}];var o$=X(6864),ym=X.n(o$),a$=X(3811),l$=X.n(a$),c$=X(1212),u$=X.n(c$),d$=X(5791),h$=X.n(d$),f$=X(6977),p$=X.n(f$);ym().use(l$()),ym().use(u$()),ym().use(h$()),ym().use(p$());class ch{constructor(){this.contextMenuClick$=new Oe,this.settings=new SD}build(e,t,r){this.settings=r,this.initCytoscape(e,t),r.displayContextMenu&&this.setupContextMenus(),this.setupHoverEvents()}addElements(e){null!=this.cy&&(this.cy.add(e),this.updateLayout())}contextMenuClick(){return this.contextMenuClick$.asObservable()}getCytoscape(){return this.cy}initCytoscape(e,t){this.cy=ym()({container:e,wheelSensitivity:.5,elements:t,style:[{selector:"node",style:{content:"data(name)","text-valign":"center",color:"#ccc"}},{selector:"node.individual",style:{width:"data(size)",height:"data(size)",...this.settings.individualCSS}},{selector:"node.class",style:{width:"data(size)",height:"data(size)",...this.settings.classNodeCSS}},{selector:"node.literal",style:{content:"data(name)",...this.settings.literalNodeCSS}},{selector:":selected",style:{"border-width":3,"border-color":"#333"}},{selector:"edge",style:{content:"data(name)","curve-style":"bezier",opacity:.666,"target-arrow-shape":"triangle"}},{selector:".faded",style:{opacity:.25,"text-opacity":0}}]}),this.updateLayout()}updateLayout(){null!=this.cy&&this.cy.layout({name:"cose-bilkent",quality:"default",nodeDimensionsIncludeLabels:!1,refresh:30,fit:!0,padding:100,randomize:!0,nodeRepulsion:4500,idealEdgeLength:200,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",animationDuration:500,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.5}).run()}setupContextMenus(){if(null==this.cy)return;const e=[this.settings.contextMenuCommands.nodes,this.settings.contextMenuCommands.edges,this.settings.contextMenuCommands.canvas],t=[ep.NODE,ep.EDGE,ep.CANVAS],r=["node","edge","core"];for(const i in e){const s=t[i],a=r[i],u=[];e[i].forEach(h=>{h.visible&&u.push({content:h.label,enabled:h.enabled,select:m=>{console.log(m);const x=m.json().data?.uri;if(void 0===x)return;const I=new s$(x,h.id,s);this.contextMenuClick$.next(I)}})}),u.length&&this.cy.cxtmenu({selector:a,commands:u})}}setupHoverEvents(){if(null==this.cy)return;let e=this.cy.collection();this.cy.nodes().on("click",function(t){const r=t.target;console.log(r),e=e.union(r)}),this.cy.nodes().unbind("mouseover"),this.cy.nodes().bind("mouseover",t=>{this.dimAllButNeighbors(t.target)}),this.cy.nodes().unbind("mouseout"),this.cy.nodes().bind("mouseout",()=>{this.unDimAll()})}unDimAll(){null!=this.cy&&this.cy.elements().forEach(e=>{e.removeClass("faded")})}dimAllButNeighbors(e){if(null==this.cy)return;const t=e.neighborhood().map(r=>r.id());this.cy.elements().forEach(r=>{t.includes(r.id())||r.id()===e.id()?r.removeClass("faded"):r.addClass("faded")})}}ch.\u0275fac=function(e){return new(e||ch)},ch.\u0275prov=nn({token:ch,factory:ch.\u0275fac,providedIn:"root"});var rb,AO=X(5049),g$=new Uint8Array(16);function m$(){if(!rb&&!(rb=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return rb(g$)}const v$=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,b$=function y$(n){return"string"==typeof n&&v$.test(n)};for(var _s=[],AD=0;AD<256;++AD)_s.push((AD+256).toString(16).substr(1));const E$=function x$(n,e,t){var r=(n=n||{}).random||(n.rng||m$)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){t=t||0;for(var i=0;i<16;++i)e[t+i]=r[i];return e}return function _$(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(_s[n[e+0]]+_s[n[e+1]]+_s[n[e+2]]+_s[n[e+3]]+"-"+_s[n[e+4]]+_s[n[e+5]]+"-"+_s[n[e+6]]+_s[n[e+7]]+"-"+_s[n[e+8]]+_s[n[e+9]]+"-"+_s[n[e+10]]+_s[n[e+11]]+_s[n[e+12]]+_s[n[e+13]]+_s[n[e+14]]+_s[n[e+15]]).toLowerCase();if(!b$(t))throw TypeError("Stringified UUID is invalid");return t}(r)};class tp{constructor(){this.nodes=[],this.edges=[],this.seenNodes=[],this.resourceLabels={},this.knownPrefixes={schema:"http://schema.org/"}}buildElementData(e,t="en"){var r=this;return oh(function*(){return"http://schema.org/"==e["@context"]&&(e["@context"]="https://schema.org/"),r.context={...e["@context"],...r.knownPrefixes},r.nodes=[],r.edges=[],r.seenNodes=[],r.resourceLabels={},(yield(0,AO.toRDF)(e)).forEach(s=>r.processQuad(s)),r.nodes=r.appendNames(r.nodes,t),r.edges=r.appendNames(r.edges,t),{nodes:r.nodes,edges:r.edges}})()}appendElementData(e,t="en"){var r=this;return oh(function*(){return(yield(0,AO.toRDF)(e)).forEach(s=>r.processQuad(s)),r.nodes=r.appendNames(r.nodes,t),r.edges=r.appendNames(r.edges,t),{nodes:r.nodes,edges:r.edges}})()}processQuad(e){const t=e.subject.value;let r=e.predicate.value,i=e.object.value;if("http://www.w3.org/2004/02/skos/core#prefLabel"===r||"http://www.w3.org/2000/01/rdf-schema#label"===r)return void(Object.keys(this.resourceLabels).includes(t)?this.resourceLabels[t].push(e.object):this.resourceLabels[t]=[e.object]);"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"===r&&(r="a"),this.appendNamedNode(t);const s=e.object.termType;"Literal"===s?i=this.appendLiteralNode(i):"BlankNode"===s?this.appendNamedNode(i,"individual"):"NamedNode"===s?this.appendNamedNode(i,"a"===r?"class":"individual"):console.warn("Unknown term type "+s),this.appendEdge(t,r,i)}appendNames(e,t="en"){return e.map(r=>{const i=this.resourceLabels[r.data.id];if(Array.isArray(i))1===i.length?r.data.name=i[0].value:console.log("MORE THAN ONE LABEL NOT YET SUPPORTED");else{if("class"===r.classes){if(null==r.data.uri)return r;r.data.name=this.getIdFromURI(r.data.uri)}if("edge"===r.classes){if(null==r.data.uri)return r;r.data.name=this.getIdFromURI(r.data.uri)}}return void 0!==r.data.size&&""!=r.data.name&&(r.data.size=70),r})}appendNamedNode(e,t="individual"){if(this.seenNodes.includes(e)){if("class"===t){const r=this.nodes.find(i=>i.data.id===e);null!=r&&(r.classes=t)}}else this.nodes.push({data:{id:e,uri:e,name:"",size:40},classes:t}),this.seenNodes.push(e)}appendLiteralNode(e){""===e&&(e="-");const t=this.camelize(e);return this.seenNodes.includes(t)||(this.nodes.push({data:{id:t,name:e,width:10*e.length+"px"},classes:"literal"}),this.seenNodes.push(t)),t}appendEdge(e,t,r){this.edges.push({data:{id:E$(),source:e,target:r,name:this.appendPrefix(t),uri:t},classes:"edge"})}appendPrefix(e){const t=Object.keys(this.context),r=Object.values(this.context);for(const i in r){const s=r[i];if(e.startsWith(s)){e=e.replace(s,`${t[i]}:`);break}}return e}camelize(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,function(t,r){return 0===r?t.toLowerCase():t.toUpperCase()}).replace(/\s+/g,"")}getIdFromURI(e){return e.includes("#")?e.split("#")[1]:e.split("/").pop()??e}}tp.\u0275fac=function(e){return new(e||tp)},tp.\u0275prov=nn({token:tp,factory:tp.\u0275fac,providedIn:"root"});class D${constructor(e,t){this.newRect=e,this.oldRect=t,this.isFirst=null==t}}class bm{constructor(e,t){this.element=e,this.zone=t,this.resized=new Pr,this.observer=new ResizeObserver(r=>this.zone.run(()=>this.observe(r)))}ngOnInit(){this.observer.observe(this.element.nativeElement)}ngOnDestroy(){this.observer.disconnect()}observe(e){const t=e[0],r=new D$(t.contentRect,this.oldRect);this.oldRect=t.contentRect,this.resized.emit(r)}}bm.\u0275fac=function(e){return new(e||bm)(et(br),et(Kn))},bm.\u0275dir=fn({type:bm,selectors:[["","imPoc1Resized",""]],outputs:{resized:"resized"},standalone:!0});const C$=["cy"];class _m{set content(e){if(e){if(this.canvas=e.nativeElement,null==this.canvas||null==this.elementData)return;this.rdfGraphService.build(this.canvas,this.elementData,this.settings)}}constructor(e,t){this.rdfGraphService=e,this.jsonLDProcessingService=t,this.settings=new SD,this.clickedContextMenu=new Pr}ngOnInit(){this.rdfGraphService.contextMenuClick().subscribe(e=>{e&&this.clickedContextMenu.emit(e),"copyURI"===e?.commandId&&navigator.clipboard.writeText(e.resourceURI??"")})}ngOnChanges(){var e=this;return oh(function*(){e.elementData=yield e.jsonLDProcessingService.buildElementData(e.data),null!=e.canvas&&null!=e.elementData&&e.rdfGraphService.build(e.canvas,e.elementData,e.settings)})()}ngAfterViewInit(){null!=this.canvas&&null!=this.elementData&&this.rdfGraphService.build(this.canvas,this.elementData,this.settings)}append(e){var t=this;return oh(function*(){if(null==t.canvas)return;const r=yield t.jsonLDProcessingService.buildElementData(e);t.rdfGraphService.addElements(r)})()}getCytoscape(){return this.rdfGraphService.getCytoscape()}onResized(){null==this.canvas||null==this.elementData||(this.canvas.innerHTML="",this.rdfGraphService.build(this.canvas,this.elementData,this.settings))}}_m.\u0275fac=function(e){return new(e||_m)(et(ch),et(tp))},_m.\u0275cmp=Qi({type:_m,selectors:[["im-poc1-rdf-graph"]],viewQuery:function(e,t){if(1&e&&Cu(C$,5),2&e){let r;Tc(r=kc())&&(t.content=r.first)}},inputs:{data:"data",settings:"settings"},outputs:{clickedContextMenu:"clickedContextMenu"},features:[Vn],decls:2,vars:0,consts:[["id","graph-canvas","imPoc1Resized","",3,"resized"],["cy",""]],template:function(e,t){1&e&&(_r(0,"div",0,1),jr("resized",function(){return t.onResized()}),Vr())},dependencies:[bm],styles:["#graph-canvas[_ngcontent-%COMP%]{height:100%;width:100%}  .node-hover-div{font-size:.6em}"]});class wm{constructor(){this.settings=MD}onContextMenuClick(e){console.log(e)}}wm.\u0275fac=function(e){return new(e||wm)},wm.\u0275cmp=Qi({type:wm,selectors:[["im-poc1-graph"]],inputs:{data:"data"},standalone:!0,features:[nh],decls:1,vars:2,consts:[[3,"data","settings","clickedContextMenu"]],template:function(e,t){1&e&&(_r(0,"im-poc1-rdf-graph",0),jr("clickedContextMenu",function(i){return t.onContextMenuClick(i)}),Vr()),2&e&&ri("data",t.data)("settings",t.settings)},dependencies:[Mu,Jf,_m],encapsulation:2});class Cr{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,r){let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(t,this.length,i,1),Hl.from(i,this.length-(t-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let r=[];return this.decompose(e,t,r,0),Hl.from(r,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new xm(this),s=new xm(e);for(let a=t,u=t;;){if(i.next(a),s.next(a),a=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(u+=i.value.length,i.done||u>=r)return!0}}iter(e=1){return new xm(this,e)}iterRange(e,t=this.length){return new kO(this,e,t)}iterLines(e,t){let r;if(null==e)r=this.iter();else{null==t&&(t=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new IO(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(0==e.length)throw new RangeError("A document must have at least one line");return 1!=e.length||e[0]?e.length<=32?new Ci(e):Hl.from(Ci.split(e,[])):Cr.empty}}class Ci extends Cr{constructor(e,t=function S$(n){let e=-1;for(let t of n)e+=t.length+1;return e}(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,r,i){for(let s=0;;s++){let a=this.text[s],u=i+a.length;if((t?r:u)>=e)return new M$(i,u,r,a);i=u+1,r++}}decompose(e,t,r,i){let s=e<=0&&t>=this.length?this:new Ci(TO(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(1&i){let a=r.pop(),u=ib(s.text,a.text.slice(),0,s.length);if(u.length<=32)r.push(new Ci(u,a.length+s.length));else{let h=u.length>>1;r.push(new Ci(u.slice(0,h)),new Ci(u.slice(h)))}}else r.push(s)}replace(e,t,r){if(!(r instanceof Ci))return super.replace(e,t,r);let i=ib(this.text,ib(r.text,TO(this.text,0,e)),t),s=this.length+r.length-(t-e);return i.length<=32?new Ci(i,s):Hl.from(Ci.split(i,[]),s)}sliceString(e,t=this.length,r="\n"){let i="";for(let s=0,a=0;s<=t&&a<this.text.length;a++){let u=this.text[a],h=s+u.length;s>e&&a&&(i+=r),e<h&&t>s&&(i+=u.slice(Math.max(0,e-s),t-s)),s=h+1}return i}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,32==r.length&&(t.push(new Ci(r,i)),r=[],i=-1);return i>-1&&t.push(new Ci(r,i)),t}}class Hl extends Cr{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,t,r,i){for(let s=0;;s++){let a=this.children[s],u=i+a.length,h=r+a.lines-1;if((t?h:u)>=e)return a.lineInner(e,t,r,i);i=u+1,r=h+1}}decompose(e,t,r,i){for(let s=0,a=0;a<=t&&s<this.children.length;s++){let u=this.children[s],h=a+u.length;if(e<=h&&t>=a){let m=i&((a<=e?1:0)|(h>=t?2:0));a>=e&&h<=t&&!m?r.push(u):u.decompose(e-a,t-a,r,m)}a=h+1}}replace(e,t,r){if(r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let a=this.children[i],u=s+a.length;if(e>=s&&t<=u){let h=a.replace(e-s,t-s,r),m=this.lines-a.lines+h.lines;if(h.lines<m>>4&&h.lines>m>>6){let v=this.children.slice();return v[i]=h,new Hl(v,this.length-(t-e)+r.length)}return super.replace(s,u,h)}s=u+1}return super.replace(e,t,r)}sliceString(e,t=this.length,r="\n"){let i="";for(let s=0,a=0;s<this.children.length&&a<=t;s++){let u=this.children[s],h=a+u.length;a>e&&s&&(i+=r),e<h&&t>a&&(i+=u.sliceString(e-a,t-a,r)),a=h+1}return i}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Hl))return 0;let r=0,[i,s,a,u]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=t,s+=t){if(i==a||s==u)return r;let h=this.children[i],m=e.children[s];if(h!=m)return r+h.scanIdentical(m,t);r+=h.length+1}}static from(e,t=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let j of e)r+=j.lines;if(r<32){let j=[];for(let Q of e)Q.flatten(j);return new Ci(j,t)}let i=Math.max(32,r>>5),s=i<<1,a=i>>1,u=[],h=0,m=-1,v=[];function x(j){let Q;if(j.lines>s&&j instanceof Hl)for(let oe of j.children)x(oe);else j.lines>a&&(h>a||!h)?(I(),u.push(j)):j instanceof Ci&&h&&(Q=v[v.length-1])instanceof Ci&&j.lines+Q.lines<=32?(h+=j.lines,m+=j.length+1,v[v.length-1]=new Ci(Q.text.concat(j.text),Q.length+1+j.length)):(h+j.lines>i&&I(),h+=j.lines,m+=j.length+1,v.push(j))}function I(){0!=h&&(u.push(1==v.length?v[0]:Hl.from(v,m)),m=-1,h=v.length=0)}for(let j of e)x(j);return I(),1==u.length?u[0]:new Hl(u,t)}}function ib(n,e,t=0,r=1e9){for(let i=0,s=0,a=!0;s<n.length&&i<=r;s++){let u=n[s],h=i+u.length;h>=t&&(h>r&&(u=u.slice(0,r-i)),i<t&&(u=u.slice(t-i)),a?(e[e.length-1]+=u,a=!1):e.push(u)),i=h+1}return e}function TO(n,e,t){return ib(n,[""],e,t)}Cr.empty=new Ci([""],0);class xm{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Ci?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],a=s>>1;if(a==(t>0?i instanceof Ci?i.text.length:i.children.length:0)){if(0==r)return this.done=!0,this.value="",this;t>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&s)==(t>0?0:1)){if(this.offsets[r]+=t,0==e)return this.lineBreak=!0,this.value="\n",this;e--}else if(i instanceof Ci){let h=i.text[a+(t<0?-1:0)];if(this.offsets[r]+=t,h.length>Math.max(0,e))return this.value=0==e?h:t>0?h.slice(e):h.slice(0,h.length-e),this;e-=h.length}else{let h=i.children[a+(t<0?-1:0)];e>h.length?(e-=h.length,this.offsets[r]+=t):(t<0&&this.offsets[r]--,this.nodes.push(h),this.offsets.push(t>0?1:(h instanceof Ci?h.text.length:h.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class kO{constructor(e,t,r){this.value="",this.done=!1,this.cursor=new xm(e,t>r?-1:1),this.pos=t>r?e.length:0,this.from=Math.min(t,r),this.to=Math.max(t,r)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let r=t<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*t,this.value=i.length<=r?i:t<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class IO{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:r,value:i}=this.inner.next(e);return t?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Cr.prototype[Symbol.iterator]=function(){return this.iter()},xm.prototype[Symbol.iterator]=kO.prototype[Symbol.iterator]=IO.prototype[Symbol.iterator]=function(){return this});class M${constructor(e,t,r,i){this.from=e,this.to=t,this.number=r,this.text=i}get length(){return this.to-this.from}}let np="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(n=>n?parseInt(n,36):1);for(let n=1;n<np.length;n++)np[n]+=np[n-1];function A$(n){for(let e=1;e<np.length;e+=2)if(np[e]>n)return np[e-1]<=n;return!1}function OO(n){return n>=127462&&n<=127487}function so(n,e,t=!0,r=!0){return(t?PO:T$)(n,e,r)}function PO(n,e,t){if(e==n.length)return e;e&&NO(n.charCodeAt(e))&&LO(n.charCodeAt(e-1))&&e--;let r=ws(n,e);for(e+=ga(r);e<n.length;){let i=ws(n,e);if(8205==r||8205==i||t&&A$(i))e+=ga(i),r=i;else{if(!OO(i))break;{let s=0,a=e-2;for(;a>=0&&OO(ws(n,a));)s++,a-=2;if(s%2==0)break;e+=2}}}return e}function T$(n,e,t){for(;e>0;){let r=PO(n,e-2,t);if(r<e)return r;e--}return 0}function NO(n){return n>=56320&&n<57344}function LO(n){return n>=55296&&n<56320}function ws(n,e){let t=n.charCodeAt(e);if(!LO(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return NO(r)?r-56320+(t-55296<<10)+65536:t}function TD(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n)))}function ga(n){return n<65536?1:2}const kD=/\r\n?|\n/;var oo=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(oo||(oo={}));class zl{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t+1];e+=r<0?this.sections[t]:r}return e}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(e){for(let t=0,r=0,i=0;t<this.sections.length;){let s=this.sections[t++],a=this.sections[t++];a<0?(e(r,i,s),i+=s):i+=a,r+=s}}iterChangedRanges(e,t=!1){ID(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];i<0?e.push(r,i):e.push(i,r)}return new zl(e)}composeDesc(e){return this.empty?e:e.empty?this:FO(this,e)}mapDesc(e,t=!1){return e.empty?this:OD(this,e,t)}mapPos(e,t=-1,r=oo.Simple){let i=0,s=0;for(let a=0;a<this.sections.length;){let u=this.sections[a++],h=this.sections[a++],m=i+u;if(h<0){if(m>e)return s+(e-i);s+=u}else{if(r!=oo.Simple&&m>=e&&(r==oo.TrackDel&&i<e&&m>e||r==oo.TrackBefore&&i<e||r==oo.TrackAfter&&m>e))return null;if(m>e||m==e&&t<0&&!u)return e==i||t<0?s:s+h;s+=h}i=m}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,t=e){for(let r=0,i=0;r<this.sections.length&&i<=t;){let u=i+this.sections[r++];if(this.sections[r++]>=0&&i<=t&&u>=e)return!(i<e&&u>t)||"cover";i=u}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>"number"!=typeof t))throw new RangeError("Invalid JSON representation of ChangeDesc");return new zl(e)}static create(e){return new zl(e)}}class Xi extends zl{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return ID(this,(t,r,i,s,a)=>e=e.replace(i,i+(r-t),a),!1),e}mapDesc(e,t=!1){return OD(this,e,t,!0)}invert(e){let t=this.sections.slice(),r=[];for(let i=0,s=0;i<t.length;i+=2){let a=t[i],u=t[i+1];if(u>=0){t[i]=u,t[i+1]=a;let h=i>>1;for(;r.length<h;)r.push(Cr.empty);r.push(a?e.slice(s,s+a):Cr.empty)}s+=a}return new Xi(t,r)}compose(e){return this.empty?e:e.empty?this:FO(this,e,!0)}map(e,t=!1){return e.empty?this:OD(this,e,t,!0)}iterChanges(e,t=!1){ID(this,e,t)}get desc(){return zl.create(this.sections)}filter(e){let t=[],r=[],i=[],s=new Em(this);e:for(let a=0,u=0;;){let h=a==e.length?1e9:e[a++];for(;u<h||u==h&&0==s.len;){if(s.done)break e;let v=Math.min(s.len,h-u);js(i,v,-1);let x=-1==s.ins?-1:0==s.off?s.ins:0;js(t,v,x),x>0&&Pu(r,t,s.text),s.forward(v),u+=v}let m=e[a++];for(;u<m;){if(s.done)break e;let v=Math.min(s.len,m-u);js(t,v,-1),js(i,v,-1==s.ins?-1:0==s.off?s.ins:0),s.forward(v),u+=v}}return{changes:new Xi(t,r),filtered:zl.create(i)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t],i=this.sections[t+1];e.push(i<0?r:0==i?[r]:[r].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,r){let i=[],s=[],a=0,u=null;function h(v=!1){if(!v&&!i.length)return;a<t&&js(i,t-a,-1);let x=new Xi(i,s);u=u?u.compose(x.map(u)):x,i=[],s=[],a=0}return function m(v){if(Array.isArray(v))for(let x of v)m(x);else if(v instanceof Xi){if(v.length!=t)throw new RangeError(`Mismatched change set length (got ${v.length}, expected ${t})`);h(),u=u?u.compose(v.map(u)):v}else{let{from:x,to:I=x,insert:j}=v;if(x>I||x<0||I>t)throw new RangeError(`Invalid change range ${x} to ${I} (in doc of length ${t})`);let Q=j?"string"==typeof j?Cr.of(j.split(r||kD)):j:Cr.empty,oe=Q.length;if(x==I&&0==oe)return;x<a&&h(),x>a&&js(i,x-a,-1),js(i,I-x,oe),Pu(s,i,Q),a=I}}(e),h(!u),u}static empty(e){return new Xi(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if("number"==typeof s)t.push(s,-1);else{if(!Array.isArray(s)||"number"!=typeof s[0]||s.some((a,u)=>u&&"string"!=typeof a))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==s.length)t.push(s[0],0);else{for(;r.length<i;)r.push(Cr.empty);r[i]=Cr.of(s.slice(1)),t.push(s[0],r[i].length)}}}return new Xi(t,r)}static createSet(e,t){return new Xi(e,t)}}function js(n,e,t,r=!1){if(0==e&&t<=0)return;let i=n.length-2;i>=0&&t<=0&&t==n[i+1]?n[i]+=e:0==e&&0==n[i]?n[i+1]+=t:r?(n[i]+=e,n[i+1]+=t):n.push(e,t)}function Pu(n,e,t){if(0==t.length)return;let r=e.length-2>>1;if(r<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<r;)n.push(Cr.empty);n.push(t)}}function ID(n,e,t){let r=n.inserted;for(let i=0,s=0,a=0;a<n.sections.length;){let u=n.sections[a++],h=n.sections[a++];if(h<0)i+=u,s+=u;else{let m=i,v=s,x=Cr.empty;for(;m+=u,v+=h,h&&r&&(x=x.append(r[a-2>>1])),!(t||a==n.sections.length||n.sections[a+1]<0);)u=n.sections[a++],h=n.sections[a++];e(i,m,s,v,x),i=m,s=v}}}function OD(n,e,t,r=!1){let i=[],s=r?[]:null,a=new Em(n),u=new Em(e);for(let h=-1;;)if(-1==a.ins&&-1==u.ins){let m=Math.min(a.len,u.len);js(i,m,-1),a.forward(m),u.forward(m)}else if(u.ins>=0&&(a.ins<0||h==a.i||0==a.off&&(u.len<a.len||u.len==a.len&&!t))){let m=u.len;for(js(i,u.ins,-1);m;){let v=Math.min(a.len,m);a.ins>=0&&h<a.i&&a.len<=v&&(js(i,0,a.ins),s&&Pu(s,i,a.text),h=a.i),a.forward(v),m-=v}u.next()}else{if(!(a.ins>=0)){if(a.done&&u.done)return s?Xi.createSet(i,s):zl.create(i);throw new Error("Mismatched change set lengths")}{let m=0,v=a.len;for(;v;)if(-1==u.ins){let x=Math.min(v,u.len);m+=x,v-=x,u.forward(x)}else{if(!(0==u.ins&&u.len<v))break;v-=u.len,u.next()}js(i,m,h<a.i?a.ins:0),s&&h<a.i&&Pu(s,i,a.text),h=a.i,a.forward(a.len-v)}}}function FO(n,e,t=!1){let r=[],i=t?[]:null,s=new Em(n),a=new Em(e);for(let u=!1;;){if(s.done&&a.done)return i?Xi.createSet(r,i):zl.create(r);if(0==s.ins)js(r,s.len,0,u),s.next();else if(0!=a.len||a.done){if(s.done||a.done)throw new Error("Mismatched change set lengths");{let h=Math.min(s.len2,a.len),m=r.length;if(-1==s.ins){let v=-1==a.ins?-1:a.off?0:a.ins;js(r,h,v,u),i&&v&&Pu(i,r,a.text)}else-1==a.ins?(js(r,s.off?0:s.len,h,u),i&&Pu(i,r,s.textBit(h))):(js(r,s.off?0:s.len,a.off?0:a.ins,u),i&&!a.off&&Pu(i,r,a.text));u=(s.ins>h||a.ins>=0&&a.len>h)&&(u||r.length>m),s.forward2(h),a.forward(h)}}else js(r,0,a.ins,u),i&&Pu(i,r,a.text),a.next()}}class Em{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Cr.empty:e[t]}textBit(e){let{inserted:t}=this.set,r=this.i-2>>1;return r>=t.length&&!e?Cr.empty:t[r].slice(this.off,null==e?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){-1==this.ins?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class uh{constructor(e,t,r){this.from=e,this.to=t,this.flags=r}get anchor(){return 16&this.flags?this.to:this.from}get head(){return 16&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 4&this.flags?-1:8&this.flags?1:0}get bidiLevel(){let e=3&this.flags;return 3==e?null:e}get goalColumn(){let e=this.flags>>5;return 33554431==e?void 0:e}map(e,t=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,t):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new uh(r,i,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return Ct.range(e,t);let r=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return Ct.range(this.anchor,r)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||"number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid JSON representation for SelectionRange");return Ct.range(e.anchor,e.head)}static create(e,t,r){return new uh(e,t,r)}}class Ct{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:Ct.create(this.ranges.map(r=>r.map(e,t)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new Ct([this.main],0)}addRange(e,t=!0){return Ct.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let r=this.ranges.slice();return r[t]=e,Ct.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||"number"!=typeof e.main||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Ct(e.ranges.map(t=>uh.fromJSON(t)),e.main)}static single(e,t=e){return new Ct([Ct.range(e,t)],0)}static create(e,t=0){if(0==e.length)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return Ct.normalized(e.slice(),t);r=s.to}return new Ct(e,t)}static cursor(e,t=0,r,i){return uh.create(e,e,(0==t?0:t<0?4:8)|(null==r?3:Math.min(2,r))|(i??33554431)<<5)}static range(e,t,r,i){let s=(r??33554431)<<5|(null==i?3:Math.min(2,i));return t<e?uh.create(t,e,24|s):uh.create(e,t,(t>e?4:0)|s)}static normalized(e,t=0){let r=e[t];e.sort((i,s)=>i.from-s.from),t=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],a=e[i-1];if(s.empty?s.from<=a.to:s.from<a.to){let u=a.from,h=Math.max(s.to,a.to);i<=t&&t--,e.splice(--i,2,s.anchor>s.head?Ct.range(h,u):Ct.range(u,h))}}return new Ct(e,t)}}function BO(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let RD=0;class ln{constructor(e,t,r,i,s){this.combine=e,this.compareInput=t,this.compare=r,this.isStatic=i,this.id=RD++,this.default=e([]),this.extensions="function"==typeof s?s(this):s}static define(e={}){return new ln(e.combine||(t=>t),e.compareInput||((t,r)=>t===r),e.compare||(e.combine?(t,r)=>t===r:PD),!!e.static,e.enables)}of(e){return new sb([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new sb(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new sb(e,this,2,t)}from(e,t){return t||(t=r=>r),this.compute([e],r=>t(r.field(e)))}}function PD(n,e){return n==e||n.length==e.length&&n.every((t,r)=>t===e[r])}class sb{constructor(e,t,r,i){this.dependencies=e,this.facet=t,this.type=r,this.value=i,this.id=RD++}dynamicSlot(e){var t;let r=this.value,i=this.facet.compareInput,s=this.id,a=e[s]>>1,u=2==this.type,h=!1,m=!1,v=[];for(let x of this.dependencies)"doc"==x?h=!0:"selection"==x?m=!0:1&(null!==(t=e[x.id])&&void 0!==t?t:1)||v.push(e[x.id]);return{create:x=>(x.values[a]=r(x),1),update(x,I){if(h&&I.docChanged||m&&(I.docChanged||I.selection)||ND(x,v)){let j=r(x);if(u?!VO(j,x.values[a],i):!i(j,x.values[a]))return x.values[a]=j,1}return 0},reconfigure:(x,I)=>{let j,Q=I.config.address[s];if(null!=Q){let oe=lb(I,Q);if(this.dependencies.every(ve=>ve instanceof ln?I.facet(ve)===x.facet(ve):!(ve instanceof Bi)||I.field(ve,!1)==x.field(ve,!1))||(u?VO(j=r(x),oe,i):i(j=r(x),oe)))return x.values[a]=oe,0}else j=r(x);return x.values[a]=j,1}}}}function VO(n,e,t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!t(n[r],e[r]))return!1;return!0}function ND(n,e){let t=!1;for(let r of e)1&Cm(n,r)&&(t=!0);return t}function k$(n,e,t){let r=t.map(h=>n[h.id]),i=t.map(h=>h.type),s=r.filter(h=>!(1&h)),a=n[e.id]>>1;function u(h){let m=[];for(let v=0;v<r.length;v++){let x=lb(h,r[v]);if(2==i[v])for(let I of x)m.push(I);else m.push(x)}return e.combine(m)}return{create(h){for(let m of r)Cm(h,m);return h.values[a]=u(h),1},update(h,m){if(!ND(h,s))return 0;let v=u(h);return e.compare(v,h.values[a])?0:(h.values[a]=v,1)},reconfigure(h,m){let v=ND(h,r),x=m.config.facets[e.id],I=m.facet(e);if(x&&!v&&PD(t,x))return h.values[a]=I,0;let j=u(h);return e.compare(j,I)?(h.values[a]=I,0):(h.values[a]=j,1)}}}const HO=ln.define({static:!0});class Bi{constructor(e,t,r,i,s){this.id=e,this.createF=t,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let t=new Bi(RD++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){return(e.facet(HO).find(r=>r.field==this)?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:r=>(r.values[t]=this.create(r),1),update:(r,i)=>{let s=r.values[t],a=this.updateF(s,i);return this.compareF(s,a)?0:(r.values[t]=a,1)},reconfigure:(r,i)=>null!=i.config.address[this.id]?(r.values[t]=i.field(this),0):(r.values[t]=this.create(r),1)}}init(e){return[this,HO.of({field:this,create:e})]}get extension(){return this}}function Dm(n){return e=>new zO(e,n)}const hh={highest:Dm(0),high:Dm(1),default:Dm(2),low:Dm(3),lowest:Dm(4)};class zO{constructor(e,t){this.inner=e,this.prec=t}}class ob{of(e){return new LD(this,e)}reconfigure(e){return ob.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class LD{constructor(e,t){this.compartment=e,this.inner=t}}class ab{constructor(e,t,r,i,s,a){for(this.base=e,this.compartments=t,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=a,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return null==t?e.default:this.staticValues[t>>1]}static resolve(e,t,r){let i=[],s=Object.create(null),a=new Map;for(let I of function I$(n,e,t){let r=[[],[],[],[],[]],i=new Map;return function s(a,u){let h=i.get(a);if(null!=h){if(h<=u)return;let m=r[h].indexOf(a);m>-1&&r[h].splice(m,1),a instanceof LD&&t.delete(a.compartment)}if(i.set(a,u),Array.isArray(a))for(let m of a)s(m,u);else if(a instanceof LD){if(t.has(a.compartment))throw new RangeError("Duplicate use of compartment in extensions");let m=e.get(a.compartment)||a.inner;t.set(a.compartment,m),s(m,u)}else if(a instanceof zO)s(a.inner,a.prec);else if(a instanceof Bi)r[u].push(a),a.provides&&s(a.provides,u);else if(a instanceof sb)r[u].push(a),a.facet.extensions&&s(a.facet.extensions,2);else{let m=a.extension;if(!m)throw new Error(`Unrecognized extension value in extension set (${a}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(m,u)}}(n,2),r.reduce((a,u)=>a.concat(u))}(e,t,a))I instanceof Bi?i.push(I):(s[I.facet.id]||(s[I.facet.id]=[])).push(I);let u=Object.create(null),h=[],m=[];for(let I of i)u[I.id]=m.length<<1,m.push(j=>I.slot(j));let v=r?.config.facets;for(let I in s){let j=s[I],Q=j[0].facet,oe=v&&v[I]||[];if(j.every(ve=>0==ve.type))if(u[Q.id]=h.length<<1|1,PD(oe,j))h.push(r.facet(Q));else{let ve=Q.combine(j.map(Pe=>Pe.value));h.push(r&&Q.compare(ve,r.facet(Q))?r.facet(Q):ve)}else{for(let ve of j)0==ve.type?(u[ve.id]=h.length<<1|1,h.push(ve.value)):(u[ve.id]=m.length<<1,m.push(Pe=>ve.dynamicSlot(Pe)));u[Q.id]=m.length<<1,m.push(ve=>k$(ve,Q,j))}}let x=m.map(I=>I(u));return new ab(e,a,x,u,h,s)}}function Cm(n,e){if(1&e)return 2;let t=e>>1,r=n.status[t];if(4==r)throw new Error("Cyclic dependency between fields and/or facets");if(2&r)return r;n.status[t]=4;let i=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|i}function lb(n,e){return 1&e?n.config.staticValues[e>>1]:n.values[e>>1]}const jO=ln.define(),UO=ln.define({combine:n=>n.some(e=>e),static:!0}),GO=ln.define({combine:n=>n.length?n[0]:void 0,static:!0}),$O=ln.define(),WO=ln.define(),qO=ln.define(),YO=ln.define({combine:n=>!!n.length&&n[0]});class Nc{constructor(e,t){this.type=e,this.value=t}static define(){return new O$}}class O${of(e){return new Nc(this,e)}}class R${constructor(e){this.map=e}of(e){return new Qn(this,e)}}let Qn=(()=>{class n{constructor(t,r){this.type=t,this.value=r}map(t){let r=this.type.map(this.value,t);return void 0===r?void 0:r==this.value?this:new n(this.type,r)}is(t){return this.type==t}static define(t={}){return new R$(t.map||(r=>r))}static mapEffects(t,r){if(!t.length)return t;let i=[];for(let s of t){let a=s.map(r);a&&i.push(a)}return i}}return n.reconfigure=n.define(),n.appendConfig=n.define(),n})(),jl=(()=>{class n{constructor(t,r,i,s,a,u){this.startState=t,this.changes=r,this.selection=i,this.effects=s,this.annotations=a,this.scrollIntoView=u,this._doc=null,this._state=null,i&&BO(i,r.newLength),a.some(h=>h.type==n.time)||(this.annotations=a.concat(n.time.of(Date.now())))}static create(t,r,i,s,a,u){return new n(t,r,i,s,a,u)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(t){for(let r of this.annotations)if(r.type==t)return r.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(t){let r=this.annotation(n.userEvent);return!(!r||!(r==t||r.length>t.length&&r.slice(0,t.length)==t&&"."==r[t.length]))}}return n.time=Nc.define(),n.userEvent=Nc.define(),n.addToHistory=Nc.define(),n.remote=Nc.define(),n})();function P$(n,e){let t=[];for(let r=0,i=0;;){let s,a;if(r<n.length&&(i==e.length||e[i]>=n[r]))s=n[r++],a=n[r++];else{if(!(i<e.length))return t;s=e[i++],a=e[i++]}!t.length||t[t.length-1]<s?t.push(s,a):t[t.length-1]<a&&(t[t.length-1]=a)}}function XO(n,e,t){var r;let i,s,a;return t?(i=e.changes,s=Xi.empty(e.changes.length),a=n.changes.compose(e.changes)):(i=e.changes.map(n.changes),s=n.changes.mapDesc(e.changes,!0),a=n.changes.compose(i)),{changes:a,selection:e.selection?e.selection.map(s):null===(r=n.selection)||void 0===r?void 0:r.map(i),effects:Qn.mapEffects(n.effects,i).concat(Qn.mapEffects(e.effects,s)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function FD(n,e,t){let r=e.selection,i=rp(e.annotations);return e.userEvent&&(i=i.concat(jl.userEvent.of(e.userEvent))),{changes:e.changes instanceof Xi?e.changes:Xi.of(e.changes||[],t,n.facet(GO)),selection:r&&(r instanceof Ct?r:Ct.single(r.anchor,r.head)),effects:rp(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function KO(n,e,t){let r=FD(n,e.length?e[0]:{},n.doc.length);e.length&&!1===e[0].filter&&(t=!1);for(let s=1;s<e.length;s++){!1===e[s].filter&&(t=!1);let a=!!e[s].sequential;r=XO(r,FD(n,e[s],a?r.changes.newLength:n.doc.length),a)}let i=jl.create(n,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return function L$(n){let e=n.startState,t=e.facet(qO),r=n;for(let i=t.length-1;i>=0;i--){let s=t[i](n);s&&Object.keys(s).length&&(r=XO(r,FD(e,s,n.changes.newLength),!0))}return r==n?n:jl.create(e,n.changes,n.selection,r.effects,r.annotations,r.scrollIntoView)}(t?function N$(n){let e=n.startState,t=!0;for(let i of e.facet($O)){let s=i(n);if(!1===s){t=!1;break}Array.isArray(s)&&(t=!0===t?s:P$(t,s))}if(!0!==t){let i,s;if(!1===t)s=n.changes.invertedDesc,i=Xi.empty(e.doc.length);else{let a=n.changes.filter(t);i=a.changes,s=a.filtered.mapDesc(a.changes).invertedDesc}n=jl.create(e,i,n.selection&&n.selection.map(s),Qn.mapEffects(n.effects,s),n.annotations,n.scrollIntoView)}let r=e.facet(WO);for(let i=r.length-1;i>=0;i--){let s=r[i](n);n=s instanceof jl?s:Array.isArray(s)&&1==s.length&&s[0]instanceof jl?s[0]:KO(e,rp(s),!1)}return n}(i):i)}const F$=[];function rp(n){return null==n?F$:Array.isArray(n)?n:[n]}var ii=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(ii||(ii={}));const B$=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let BD;try{BD=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}let ao=(()=>{class n{constructor(t,r,i,s,a,u){this.config=t,this.doc=r,this.selection=i,this.values=s,this.status=t.statusTemplate.slice(),this.computeSlot=a,u&&(u._state=this);for(let h=0;h<this.config.dynamicSlots.length;h++)Cm(this,h<<1);this.computeSlot=null}field(t,r=!0){let i=this.config.address[t.id];if(null!=i)return Cm(this,i),lb(this,i);if(r)throw new RangeError("Field is not present in this state")}update(...t){return KO(this,t,!0)}applyTransaction(t){let a,r=this.config,{base:i,compartments:s}=r;for(let u of t.effects)u.is(ob.reconfigure)?(r&&(s=new Map,r.compartments.forEach((h,m)=>s.set(m,h)),r=null),s.set(u.value.compartment,u.value.extension)):u.is(Qn.reconfigure)?(r=null,i=u.value):u.is(Qn.appendConfig)&&(r=null,i=rp(i).concat(u.value));r?a=t.startState.values.slice():(r=ab.resolve(i,s,this),a=new n(r,this.doc,this.selection,r.dynamicSlots.map(()=>null),(h,m)=>m.reconfigure(h,this),null).values),new n(r,t.newDoc,t.newSelection,a,(u,h)=>h.update(u,t),t)}replaceSelection(t){return"string"==typeof t&&(t=this.toText(t)),this.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:t},range:Ct.cursor(r.from+t.length)}))}changeByRange(t){let r=this.selection,i=t(r.ranges[0]),s=this.changes(i.changes),a=[i.range],u=rp(i.effects);for(let h=1;h<r.ranges.length;h++){let m=t(r.ranges[h]),v=this.changes(m.changes),x=v.map(s);for(let j=0;j<h;j++)a[j]=a[j].map(x);let I=s.mapDesc(v,!0);a.push(m.range.map(I)),s=s.compose(x),u=Qn.mapEffects(u,x).concat(Qn.mapEffects(rp(m.effects),I))}return{changes:s,selection:Ct.create(a,r.mainIndex),effects:u}}changes(t=[]){return t instanceof Xi?t:Xi.of(t,this.doc.length,this.facet(n.lineSeparator))}toText(t){return Cr.of(t.split(this.facet(n.lineSeparator)||kD))}sliceDoc(t=0,r=this.doc.length){return this.doc.sliceString(t,r,this.lineBreak)}facet(t){let r=this.config.address[t.id];return null==r?t.default:(Cm(this,r),lb(this,r))}toJSON(t){let r={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(t)for(let i in t){let s=t[i];s instanceof Bi&&null!=this.config.address[s.id]&&(r[i]=s.spec.toJSON(this.field(t[i]),this))}return r}static fromJSON(t,r={},i){if(!t||"string"!=typeof t.doc)throw new RangeError("Invalid JSON representation for EditorState");let s=[];if(i)for(let a in i)if(Object.prototype.hasOwnProperty.call(t,a)){let u=i[a],h=t[a];s.push(u.init(m=>u.spec.fromJSON(h,m)))}return n.create({doc:t.doc,selection:Ct.fromJSON(t.selection),extensions:r.extensions?s.concat([r.extensions]):s})}static create(t={}){let r=ab.resolve(t.extensions||[],new Map),i=t.doc instanceof Cr?t.doc:Cr.of((t.doc||"").split(r.staticFacet(n.lineSeparator)||kD)),s=t.selection?t.selection instanceof Ct?t.selection:Ct.single(t.selection.anchor,t.selection.head):Ct.single(0);return BO(s,i.length),r.staticFacet(UO)||(s=s.asSingle()),new n(r,i,s,r.dynamicSlots.map(()=>null),(a,u)=>u.create(a),null)}get tabSize(){return this.facet(n.tabSize)}get lineBreak(){return this.facet(n.lineSeparator)||"\n"}get readOnly(){return this.facet(YO)}phrase(t,...r){for(let i of this.facet(n.phrases))if(Object.prototype.hasOwnProperty.call(i,t)){t=i[t];break}return r.length&&(t=t.replace(/\$(\$|\d*)/g,(i,s)=>{if("$"==s)return"$";let a=+(s||1);return!a||a>r.length?i:r[a-1]})),t}languageDataAt(t,r,i=-1){let s=[];for(let a of this.facet(jO))for(let u of a(this,r,i))Object.prototype.hasOwnProperty.call(u,t)&&s.push(u[t]);return s}charCategorizer(t){return function H$(n){return e=>{if(!/\S/.test(e))return ii.Space;if(function V$(n){if(BD)return BD.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||B$.test(t)))return!0}return!1}(e))return ii.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return ii.Word;return ii.Other}}(this.languageDataAt("wordChars",t).join(""))}wordAt(t){let{text:r,from:i,length:s}=this.doc.lineAt(t),a=this.charCategorizer(t),u=t-i,h=t-i;for(;u>0;){let m=so(r,u,!1);if(a(r.slice(m,u))!=ii.Word)break;u=m}for(;h<s;){let m=so(r,h);if(a(r.slice(h,m))!=ii.Word)break;h=m}return u==h?null:Ct.range(u+i,h+i)}}return n.allowMultipleSelections=UO,n.tabSize=ln.define({combine:e=>e.length?e[0]:4}),n.lineSeparator=GO,n.readOnly=YO,n.phrases=ln.define({compare(e,t){let r=Object.keys(e),i=Object.keys(t);return r.length==i.length&&r.every(s=>e[s]==t[s])}}),n.languageData=jO,n.changeFilter=$O,n.transactionFilter=WO,n.transactionExtender=qO,n})();function tl(n,e,t={}){let r={};for(let i of n)for(let s of Object.keys(i)){let a=i[s],u=r[s];if(void 0===u)r[s]=a;else if(u!==a&&void 0!==a){if(!Object.hasOwnProperty.call(t,s))throw new Error("Config merge conflict for field "+s);r[s]=t[s](u,a)}}for(let i in e)void 0===r[i]&&(r[i]=e[i]);return r}ob.reconfigure=Qn.define();class fh{eq(e){return this==e}range(e,t=e){return Sm.create(e,t,this)}}fh.prototype.startSide=fh.prototype.endSide=0,fh.prototype.point=!1,fh.prototype.mapMode=oo.TrackDel;class Sm{constructor(e,t,r){this.from=e,this.to=t,this.value=r}static create(e,t,r){return new Sm(e,t,r)}}function VD(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class HD{constructor(e,t,r,i){this.from=e,this.to=t,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,t,r,i=0){let s=r?this.to:this.from;for(let a=i,u=s.length;;){if(a==u)return a;let h=a+u>>1,m=s[h]-e||(r?this.value[h].endSide:this.value[h].startSide)-t;if(h==a)return m>=0?a:u;m>=0?u=h:a=h+1}}between(e,t,r,i){for(let s=this.findIndex(t,-1e9,!0),a=this.findIndex(r,1e9,!1,s);s<a;s++)if(!1===i(this.from[s]+e,this.to[s]+e,this.value[s]))return!1}map(e,t){let r=[],i=[],s=[],a=-1,u=-1;for(let h=0;h<this.value.length;h++){let I,j,m=this.value[h],v=this.from[h]+e,x=this.to[h]+e;if(v==x){let Q=t.mapPos(v,m.startSide,m.mapMode);if(null==Q||(I=j=Q,m.startSide!=m.endSide&&(j=t.mapPos(v,m.endSide),j<I)))continue}else if(I=t.mapPos(v,m.startSide),j=t.mapPos(x,m.endSide),I>j||I==j&&m.startSide>0&&m.endSide<=0)continue;(j-I||m.endSide-m.startSide)<0||(a<0&&(a=I),m.point&&(u=Math.max(u,j-I)),r.push(m),i.push(I-a),s.push(j-a))}return{mapped:r.length?new HD(i,s,r,u):null,pos:a}}}let fi=(()=>{class n{constructor(t,r,i,s){this.chunkPos=t,this.chunk=r,this.nextLayer=i,this.maxPoint=s}static create(t,r,i,s){return new n(t,r,i,s)}get length(){let t=this.chunk.length-1;return t<0?0:Math.max(this.chunkEnd(t),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let t=this.nextLayer.size;for(let r of this.chunk)t+=r.value.length;return t}chunkEnd(t){return this.chunkPos[t]+this.chunk[t].length}update(t){let{add:r=[],sort:i=!1,filterFrom:s=0,filterTo:a=this.length}=t,u=t.filter;if(0==r.length&&!u)return this;if(i&&(r=r.slice().sort(VD)),this.isEmpty)return r.length?n.of(r):this;let h=new QO(this,null,-1).goto(0),m=0,v=[],x=new Nu;for(;h.value||m<r.length;)if(m<r.length&&(h.from-r[m].from||h.startSide-r[m].value.startSide)>=0){let I=r[m++];x.addInner(I.from,I.to,I.value)||v.push(I)}else 1==h.rangeIndex&&h.chunkIndex<this.chunk.length&&(m==r.length||this.chunkEnd(h.chunkIndex)<r[m].from)&&(!u||s>this.chunkEnd(h.chunkIndex)||a<this.chunkPos[h.chunkIndex])&&x.addChunk(this.chunkPos[h.chunkIndex],this.chunk[h.chunkIndex])?h.nextChunk():((!u||s>h.to||a<h.from||u(h.from,h.to,h.value))&&(x.addInner(h.from,h.to,h.value)||v.push(Sm.create(h.from,h.to,h.value))),h.next());return x.finishInner(this.nextLayer.isEmpty&&!v.length?n.empty:this.nextLayer.update({add:v,filter:u,filterFrom:s,filterTo:a}))}map(t){if(t.empty||this.isEmpty)return this;let r=[],i=[],s=-1;for(let u=0;u<this.chunk.length;u++){let h=this.chunkPos[u],m=this.chunk[u],v=t.touchesRange(h,h+m.length);if(!1===v)s=Math.max(s,m.maxPoint),r.push(m),i.push(t.mapPos(h));else if(!0===v){let{mapped:x,pos:I}=m.map(h,t);x&&(s=Math.max(s,x.maxPoint),r.push(x),i.push(I))}}let a=this.nextLayer.map(t);return 0==r.length?a:new n(i,r,a||n.empty,s)}between(t,r,i){if(!this.isEmpty){for(let s=0;s<this.chunk.length;s++){let a=this.chunkPos[s],u=this.chunk[s];if(r>=a&&t<=a+u.length&&!1===u.between(a,t-a,r-a,i))return}this.nextLayer.between(t,r,i)}}iter(t=0){return Mm.from([this]).goto(t)}get isEmpty(){return this.nextLayer==this}static iter(t,r=0){return Mm.from(t).goto(r)}static compare(t,r,i,s,a=-1){let u=t.filter(I=>I.maxPoint>0||!I.isEmpty&&I.maxPoint>=a),h=r.filter(I=>I.maxPoint>0||!I.isEmpty&&I.maxPoint>=a),m=ZO(u,h,i),v=new Am(u,m,a),x=new Am(h,m,a);i.iterGaps((I,j,Q)=>JO(v,I,x,j,Q,s)),i.empty&&0==i.length&&JO(v,0,x,0,0,s)}static eq(t,r,i=0,s){null==s&&(s=999999999);let a=t.filter(x=>!x.isEmpty&&r.indexOf(x)<0),u=r.filter(x=>!x.isEmpty&&t.indexOf(x)<0);if(a.length!=u.length)return!1;if(!a.length)return!0;let h=ZO(a,u),m=new Am(a,h,0).goto(i),v=new Am(u,h,0).goto(i);for(;;){if(m.to!=v.to||!jD(m.active,v.active)||m.point&&(!v.point||!m.point.eq(v.point)))return!1;if(m.to>s)return!0;m.next(),v.next()}}static spans(t,r,i,s,a=-1){let u=new Am(t,null,a).goto(r),h=r,m=u.openStart;for(;;){let v=Math.min(u.to,i);if(u.point){let x=u.activeForPoint(u.to),I=u.pointFrom<r?x.length+1:Math.min(x.length,m);s.point(h,v,u.point,x,I,u.pointRank),m=Math.min(u.openEnd(v),x.length)}else v>h&&(s.span(h,v,u.active,m),m=u.openEnd(v));if(u.to>i)return m+(u.point&&u.to>i?1:0);h=u.to,u.next()}}static of(t,r=!1){let i=new Nu;for(let s of t instanceof Sm?[t]:r?function z$(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let r=n[t];if(VD(e,r)>0)return n.slice().sort(VD);e=r}return n}(t):t)i.add(s.from,s.to,s.value);return i.finish()}}return n.empty=new n([],[],null,-1),n})();fi.empty.nextLayer=fi.empty;class Nu{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new HD(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,t,r){this.addInner(e,t,r)||(this.nextLayer||(this.nextLayer=new Nu)).add(e,t,r)}addInner(e,t,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(i<0||(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=t,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),0))}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let r=t.value.length-1;return this.last=t.value[r],this.lastFrom=t.from[r]+e,this.lastTo=t.to[r]+e,!0}finish(){return this.finishInner(fi.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return e;let t=fi.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function ZO(n,e,t){let r=new Map;for(let s of n)for(let a=0;a<s.chunk.length;a++)s.chunk[a].maxPoint<=0&&r.set(s.chunk[a],s.chunkPos[a]);let i=new Set;for(let s of e)for(let a=0;a<s.chunk.length;a++){let u=r.get(s.chunk[a]);null!=u&&(t?t.mapPos(u):u)==s.chunkPos[a]&&!t?.touchesRange(u,u+s.chunk[a].length)&&i.add(s.chunk[a])}return i}class QO{constructor(e,t,r,i=0){this.layer=e,this.skip=t,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex];if(this.from=e+t.from[this.rangeIndex],this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Mm{constructor(e){this.heap=e}static from(e,t=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let a=e[s];!a.isEmpty;a=a.nextLayer)a.maxPoint>=r&&i.push(new QO(a,t,r,s));return 1==i.length?i[0]:new Mm(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let r of this.heap)r.goto(e,t);for(let r=this.heap.length>>1;r>=0;r--)zD(this.heap,r);return this.next(),this}forward(e,t){for(let r of this.heap)r.forward(e,t);for(let r=this.heap.length>>1;r>=0;r--)zD(this.heap,r);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),zD(this.heap,0)}}}function zD(n,e){for(let t=n[e];;){let r=1+(e<<1);if(r>=n.length)break;let i=n[r];if(r+1<n.length&&i.compare(n[r+1])>=0&&(i=n[r+1],r++),t.compare(i)<0)break;n[r]=t,n[e]=i,e=r}}class Am{constructor(e,t,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Mm.from(e,t,r)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){cb(this.active,e),cb(this.activeTo,e),cb(this.activeRank,e),this.minActive=eR(this.active,this.activeTo)}addActive(e){let t=0,{value:r,to:i,rank:s}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=s;)t++;ub(this.active,t,r),ub(this.activeTo,t,i),ub(this.activeRank,t,s),e&&ub(e,t,this.cursor.from),this.minActive=eR(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&cb(r,i)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let s=this.cursor.value;if(s.point){if(!(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(r),this.cursor.next()}}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&t.push(this.active[r]);return t.reverse()}openEnd(e){let t=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)t++;return t}}function JO(n,e,t,r,i,s){n.goto(e),t.goto(r);let a=r+i,u=r,h=r-e;for(;;){let m=n.to+h-t.to||n.endSide-t.endSide,v=m<0?n.to+h:t.to,x=Math.min(v,a);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&jD(n.activeForPoint(n.to+h),t.activeForPoint(t.to))||s.comparePoint(u,x,n.point,t.point):x>u&&!jD(n.active,t.active)&&s.compareRange(u,x,n.active,t.active),v>a)break;u=v,m<=0&&n.next(),m>=0&&t.next()}}function jD(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function cb(n,e){for(let t=e,r=n.length-1;t<r;t++)n[t]=n[t+1];n.pop()}function ub(n,e,t){for(let r=n.length-1;r>=e;r--)n[r+1]=n[r];n[e]=t}function eR(n,e){let t=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||n[i].endSide-n[t].endSide)<0&&(t=i,r=e[i]);return t}function Tm(n,e,t=n.length){let r=0;for(let i=0;i<t;)9==n.charCodeAt(i)?(r+=e-r%e,i++):(r++,i=so(n,i));return r}function UD(n,e,t,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==n.length)break;s+=9==n.charCodeAt(i)?t-s%t:1,i=so(n,i)}return!0===r?-1:n.length}const tR=typeof Symbol>"u"?"__\u037c":Symbol.for("\u037c"),$D=typeof Symbol>"u"?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),nR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Lu{constructor(e,t){this.rules=[];let{finish:r}=t||{};function i(a){return/^@/.test(a)?[a]:a.split(/,\s*/)}function s(a,u,h,m){let v=[],x=/^@(\w+)\b/.exec(a[0]),I=x&&"keyframes"==x[1];if(x&&null==u)return h.push(a[0]+";");for(let j in u){let Q=u[j];if(/&/.test(j))s(j.split(/,\s*/).map(oe=>a.map(ve=>oe.replace(/&/,ve))).reduce((oe,ve)=>oe.concat(ve)),Q,h);else if(Q&&"object"==typeof Q){if(!x)throw new RangeError("The value of a property ("+j+") should be a primitive value.");s(i(j),Q,v,I)}else null!=Q&&v.push(j.replace(/_.*/,"").replace(/[A-Z]/g,oe=>"-"+oe.toLowerCase())+": "+Q+";")}(v.length||I)&&h.push((!r||x||m?a:a.map(r)).join(", ")+" {"+v.join(" ")+"}")}for(let a in e)s(i(a),e[a],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let e=nR[tR]||1;return nR[tR]=e+1,"\u037c"+e.toString(36)}static mount(e,t){(e[$D]||new j$(e)).mount(Array.isArray(t)?t:[t])}}let db=null;class j${constructor(e){if(!e.head&&e.adoptedStyleSheets&&typeof CSSStyleSheet<"u"){if(db)return e.adoptedStyleSheets=[db.sheet,...e.adoptedStyleSheets],e[$D]=db;this.sheet=new CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],db=this}else{this.styleTag=(e.ownerDocument||e).createElement("style");let t=e.head||e;t.insertBefore(this.styleTag,t.firstChild)}this.modules=[],e[$D]=this}mount(e){let t=this.sheet,r=0,i=0;for(let s=0;s<e.length;s++){let a=e[s],u=this.modules.indexOf(a);if(u<i&&u>-1&&(this.modules.splice(u,1),i--,u=-1),-1==u){if(this.modules.splice(i++,0,a),t)for(let h=0;h<a.rules.length;h++)t.insertRule(a.rules[h],r++)}else{for(;i<u;)r+=this.modules[i++].rules.length;r+=a.rules.length,i++}}if(!t){let s="";for(let a=0;a<this.modules.length;a++)s+=this.modules[a].getRules()+"\n";this.styleTag.textContent=s}}}for(var Fu={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},km={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},rR=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent),U$=(typeof navigator<"u"&&/Gecko\/\d+/.test(navigator.userAgent),typeof navigator<"u"&&/Mac/.test(navigator.platform)),G$=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),$$=U$||rR&&+rR[1]<57,xs=0;xs<10;xs++)Fu[48+xs]=Fu[96+xs]=String(xs);for(xs=1;xs<=24;xs++)Fu[xs+111]="F"+xs;for(xs=65;xs<=90;xs++)Fu[xs]=String.fromCharCode(xs+32),km[xs]=String.fromCharCode(xs);for(var WD in Fu)km.hasOwnProperty(WD)||(km[WD]=Fu[WD]);function hb(n){let e;return e=11==n.nodeType?n.getSelection?n:n.ownerDocument:n,e.getSelection()}function ip(n,e){return!!e&&(n==e||n.contains(1!=e.nodeType?e.parentNode:e))}function fb(n,e){if(!e.anchorNode)return!1;try{return ip(n,e.anchorNode)}catch{return!1}}function Im(n){return 3==n.nodeType?op(n,0,n.nodeValue.length).getClientRects():1==n.nodeType?n.getClientRects():[]}function pb(n,e,t,r){return!!t&&(iR(n,e,t,r,-1)||iR(n,e,t,r,1))}function gb(n){for(var e=0;;e++)if(!(n=n.previousSibling))return e}function iR(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:Om(n))){if("DIV"==n.nodeName)return!1;let s=n.parentNode;if(!s||1!=s.nodeType)return!1;e=gb(n)+(i<0?0:1),n=s}else{if(1!=n.nodeType)return!1;if(1==(n=n.childNodes[e+(i<0?-1:0)]).nodeType&&"false"==n.contentEditable)return!1;e=i<0?Om(n):0}}}function Om(n){return 3==n.nodeType?n.nodeValue.length:n.childNodes.length}const sR={left:0,right:0,top:0,bottom:0};function qD(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function Y$(n){return{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}class Z${constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,t,r,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=r,this.focusOffset=i}}let aR,sp=null;function oR(n){if(n.setActive)return n.setActive();if(sp)return n.focus(sp);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(null==sp?{get preventScroll(){return sp={preventScroll:!0},!0}}:void 0),!sp){sp=!1;for(let t=0;t<e.length;){let r=e[t++],i=e[t++],s=e[t++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}function op(n,e,t=e){let r=aR||(aR=document.createRange());return r.setEnd(n,t),r.setStart(n,e),r}function ap(n,e,t){let r={key:e,code:e,keyCode:t,which:t,cancelable:!0},i=new KeyboardEvent("keydown",r);i.synthetic=!0,n.dispatchEvent(i);let s=new KeyboardEvent("keyup",r);return s.synthetic=!0,n.dispatchEvent(s),i.defaultPrevented||s.defaultPrevented}function lR(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}class Es{constructor(e,t,r=!0){this.node=e,this.offset=t,this.precise=r}static before(e,t){return new Es(e.parentNode,gb(e),t)}static after(e,t){return new Es(e.parentNode,gb(e)+1,t)}}const YD=[];class Kr{constructor(){this.parent=null,this.dom=null,this.dirty=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let r of this.children){if(r==e)return t;t+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,t){return null}sync(e,t){if(2&this.dirty){let s,r=this.dom,i=null;for(let a of this.children){if(a.dirty){if(!a.dom&&(s=i?i.nextSibling:r.firstChild)){let u=Kr.get(s);(!u||!u.parent&&u.canReuseDOM(a))&&a.reuseDOM(s)}a.sync(e,t),a.dirty=0}if(s=i?i.nextSibling:r.firstChild,t&&!t.written&&t.node==r&&s!=a.dom&&(t.written=!0),a.dom.parentNode==r)for(;s&&s!=a.dom;)s=cR(s);else r.insertBefore(a.dom,s);i=a.dom}for(s=i?i.nextSibling:r.firstChild,s&&t&&t.node==r&&(t.written=!0);s;)s=cR(s)}else if(1&this.dirty)for(let r of this.children)r.dirty&&(r.sync(e,t),r.dirty=0)}reuseDOM(e){}localPosFromDOM(e,t){let r;if(e==this.dom)r=this.dom.childNodes[t];else{let i=0==Om(e)?0:0==t?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;0==i&&s.firstChild!=s.lastChild&&(i=e==s.firstChild?-1:1),e=s}r=i<0?e:e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!Kr.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let a=this.children[i];if(a.dom==r)return s;s+=a.length+a.breakAfter}}domBoundsAround(e,t,r=0){let i=-1,s=-1,a=-1,u=-1;for(let h=0,m=r,v=r;h<this.children.length;h++){let x=this.children[h],I=m+x.length;if(m<e&&I>t)return x.domBoundsAround(e,t,m);if(I>=e&&-1==i&&(i=h,s=m),m>t&&x.dom.parentNode==this.dom){a=h,u=v;break}v=I,m=I+x.breakAfter}return{from:s,to:u<0?r+this.length:u,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:a<this.children.length&&a>=0?this.children[a].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),1&t.dirty)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,r=YD){this.markDirty();for(let i=e;i<t;i++){let s=this.children[i];s.parent==this&&s.destroy()}this.children.splice(e,t-e,...r);for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new uR(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,r,i,s,a){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor}getSide(){return 0}destroy(){this.parent=null}}function cR(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}Kr.prototype.breakAfter=0;class uR{constructor(e,t,r){this.children=e,this.pos=t,this.i=r,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function dR(n,e,t,r,i,s,a,u,h){let{children:m}=n,v=m.length?m[e]:null,x=s.length?s[s.length-1]:null,I=x?x.breakAfter:a;if(!(e==r&&v&&!a&&!I&&s.length<2&&v.merge(t,i,s.length?x:null,0==t,u,h))){if(r<m.length){let j=m[r];j&&i<j.length?(e==r&&(j=j.split(i),i=0),!I&&x&&j.merge(0,i,x,!0,0,h)?s[s.length-1]=j:(i&&j.merge(0,i,null,!1,0,h),s.push(j))):j?.breakAfter&&(x?x.breakAfter=1:a=1),r++}for(v&&(v.breakAfter=a,t>0&&(!a&&s.length&&v.merge(t,v.length,s[0],!1,u,0)?v.breakAfter=s.shift().breakAfter:(t<v.length||v.children.length&&0==v.children[v.children.length-1].length)&&v.merge(t,v.length,null,!1,u,0),e++));e<r&&s.length;)if(m[r-1].become(s[s.length-1]))r--,s.pop(),h=s.length?0:u;else{if(!m[e].become(s[0]))break;e++,s.shift(),u=s.length?0:h}!s.length&&e&&r<m.length&&!m[e-1].breakAfter&&m[r].merge(0,0,m[e-1],!1,u,h)&&e--,(e<r||s.length)&&n.replaceChildren(e,r,s)}}function hR(n,e,t,r,i,s){let a=n.childCursor(),{i:u,off:h}=a.findPos(t,1),{i:m,off:v}=a.findPos(e,-1),x=e-t;for(let I of r)x+=I.length;n.length+=x,dR(n,m,v,u,h,r,0,i,s)}let Yo=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},XD=typeof document<"u"?document:{documentElement:{style:{}}};const KD=/Edge\/(\d+)/.exec(Yo.userAgent),fR=/MSIE \d/.test(Yo.userAgent),ZD=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Yo.userAgent),mb=!!(fR||ZD||KD),pR=!mb&&/gecko\/(\d+)/i.test(Yo.userAgent),QD=!mb&&/Chrome\/(\d+)/.exec(Yo.userAgent),gR="webkitFontSmoothing"in XD.documentElement.style,mR=!mb&&/Apple Computer/.test(Yo.vendor),vR=mR&&(/Mobile\/\w+/.test(Yo.userAgent)||Yo.maxTouchPoints>2);var un={mac:vR||/Mac/.test(Yo.platform),windows:/Win/.test(Yo.platform),linux:/Linux|X11/.test(Yo.platform),ie:mb,ie_version:fR?XD.documentMode||6:ZD?+ZD[1]:KD?+KD[1]:0,gecko:pR,gecko_version:pR?+(/Firefox\/(\d+)/.exec(Yo.userAgent)||[0,0])[1]:0,chrome:!!QD,chrome_version:QD?+QD[1]:0,ios:vR,android:/Android\b/.test(Yo.userAgent),webkit:gR,safari:mR,webkit_version:gR?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=XD.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class Bu extends Kr{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){3==e.nodeType&&this.createDOM(e)}merge(e,t,r){return(!r||r instanceof Bu&&!(this.length-(t-e)+r.length>256))&&(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Bu(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new Es(this.dom,e)}domBoundsAround(e,t,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return JD(this.dom,e,t)}}class Ul extends Kr{constructor(e,t=[],r=0){super(),this.mark=e,this.children=t,this.length=r;for(let i of t)i.setParent(this)}setAttrs(e){if(lR(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e,t){this.dom?4&this.dirty&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,r,i,s,a){return!(r&&(!(r instanceof Ul&&r.mark.eq(this.mark))||e&&s<=0||t<this.length&&a<=0)||(hR(this,e,t,r?r.children:[],s-1,a-1),this.markDirty(),0))}split(e){let t=[],r=0,i=-1,s=0;for(let u of this.children){let h=r+u.length;h>e&&t.push(r<e?u.split(e-r):u),i<0&&r>=e&&(i=s),r=h,s++}let a=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new Ul(this.mark,t,a)}domAtPos(e){return _R(this,e)}coordsAt(e,t){return xR(this,e,t)}}function JD(n,e,t){let r=n.nodeValue.length;e>r&&(e=r);let i=e,s=e,a=0;0==e&&t<0||e==r&&t>=0?un.chrome||un.gecko||(e?(i--,a=1):s<r&&(s++,a=-1)):t<0?i--:s<r&&s++;let u=op(n,i,s).getClientRects();if(!u.length)return sR;let h=u[(a?a<0:t>=0)?0:u.length-1];return un.safari&&!a&&0==h.width&&(h=Array.prototype.find.call(u,m=>m.width)||h),a?qD(h,a<0):h||null}class Vu extends Kr{constructor(e,t,r){super(),this.widget=e,this.length=t,this.side=r,this.prevWidget=null}static create(e,t,r){return new(e.customView||Vu)(e,t,r)}split(e){let t=Vu.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,r,i,s,a){return!(r&&(!(r instanceof Vu&&this.widget.compare(r.widget))||e>0&&s<=0||t<this.length&&a<=0)||(this.length=e+(r?r.length:0)+(this.length-t),0))}become(e){return e.length==this.length&&e instanceof Vu&&e.side==this.side&&this.widget.constructor==e.widget.constructor&&(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(0==this.length)return Cr.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,r=t&&t.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):Cr.empty}domAtPos(e){return(this.length?0==e:this.side>0)?Es.before(this.dom):Es.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let r=this.dom.getClientRects(),i=null;if(!r.length)return sR;for(let s=e>0?r.length-1:0;i=r[s],!(e>0?0==s:s==r.length-1||i.top<i.bottom);s+=e>0?-1:1);return this.length?i:qD(i,this.side>0)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class yR extends Vu{domAtPos(e){let{topView:t,text:r}=this.widget;return t?eC(e,0,t,r,(i,s)=>i.domAtPos(s),i=>new Es(r,Math.min(i,r.nodeValue.length))):new Es(r,Math.min(e,r.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){let{topView:r,text:i}=this.widget;return r?bR(e,t,r,i):Math.min(t,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){let{topView:r,text:i}=this.widget;return r?eC(e,t,r,i,(s,a,u)=>s.coordsAt(a,u),(s,a)=>JD(i,s,a)):JD(i,e,t)}destroy(){var e;super.destroy(),null===(e=this.widget.topView)||void 0===e||e.destroy()}get isEditable(){return!0}canReuseDOM(){return!0}}function eC(n,e,t,r,i,s){if(t instanceof Ul){for(let a=t.dom.firstChild;a;a=a.nextSibling){let u=Kr.get(a);if(!u)return s(n,e);let h=ip(a,r),m=u.length+(h?r.nodeValue.length:0);if(n<m||n==m&&u.getSide()<=0)return h?eC(n,e,u,r,i,s):i(u,n,e);n-=m}return i(t,t.length,-1)}return t.dom==r?s(n,e):i(t,n,e)}function bR(n,e,t,r){if(t instanceof Ul){let i=0;for(let s of t.children){let a=ip(s.dom,r);if(ip(s.dom,n))return i+(a?bR(n,e,s,r):s.localPosFromDOM(n,e));i+=a?r.nodeValue.length:s.length}}else if(t.dom==r)return Math.min(e,r.nodeValue.length);return t.localPosFromDOM(n,e)}class ph extends Kr{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof ph&&e.side==this.side}split(){return new ph(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Es.before(this.dom):Es.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){let t=this.dom.getBoundingClientRect(),r=function tW(n,e){let t=n.parent,r=t?t.children.indexOf(n):-1;for(;t&&r>=0;)if(e<0?r>0:r<t.children.length){let i=t.children[r+e];if(i instanceof Bu){let s=i.coordsAt(e<0?i.length:0,e);if(s)return s}r+=e}else{if(!(t instanceof Ul&&t.parent)){let i=t.dom.lastChild;if(i&&"BR"==i.nodeName)return i.getClientRects()[0];break}r=t.parent.children.indexOf(t)+(e<0?0:1),t=t.parent}}(this,this.side>0?-1:1);return r&&r.top<t.bottom&&r.bottom>t.top?{left:t.left,right:t.right,top:r.top,bottom:r.bottom}:t}get overrideDOMText(){return Cr.empty}get isHidden(){return!0}}function _R(n,e){let t=n.dom,{children:r}=n,i=0;for(let s=0;i<r.length;i++){let a=r[i],u=s+a.length;if(!(u==s&&a.getSide()<=0)){if(e>s&&e<u&&a.dom.parentNode==t)return a.domAtPos(e-s);if(e<=s)break;s=u}}for(let s=i;s>0;s--){let a=r[s-1];if(a.dom.parentNode==t)return a.domAtPos(a.length)}for(let s=i;s<r.length;s++){let a=r[s];if(a.dom.parentNode==t)return a.domAtPos(0)}return new Es(t,0)}function wR(n,e,t){let r,{children:i}=n;t>0&&e instanceof Ul&&i.length&&(r=i[i.length-1])instanceof Ul&&r.mark.eq(e.mark)?wR(r,e.children[0],t-1):(i.push(e),e.setParent(n)),n.length+=e.length}function xR(n,e,t){let r=null,i=-1,s=null,a=-1;!function u(m,v){for(let x=0,I=0;x<m.children.length&&I<=v;x++){let j=m.children[x],Q=I+j.length;Q>=v&&(j.children.length?u(j,v-I):(!s||s instanceof ph&&t>0)&&(Q>v||I==Q&&j.getSide()>0)?(s=j,a=v-I):(I<v||I==Q&&j.getSide()<0)&&(r=j,i=v-I)),I=Q}}(n,e);let h=(t<0?r:s)||r||s;return h?h.coordsAt(Math.max(0,h==r?i:a),t):function nW(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=Im(e);return t[t.length-1]||null}(n)}function tC(n,e){for(let t in n)"class"==t&&e.class?e.class+=" "+n.class:"style"==t&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}function nC(n,e){if(n==e)return!0;if(!n||!e)return!1;let t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i of t)if(-1==r.indexOf(i)||n[i]!==e[i])return!1;return!0}function rC(n,e,t){let r=null;if(e)for(let i in e)t&&i in t||n.removeAttribute(r=i);if(t)for(let i in t)e&&e[i]==t[i]||n.setAttribute(r=i,t[i]);return!!r}Bu.prototype.children=Vu.prototype.children=ph.prototype.children=YD;class Lc{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}get isHidden(){return!1}destroy(e){}}var zr=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(zr||(zr={}));class dn extends fh{constructor(e,t,r,i){super(),this.startSide=e,this.endSide=t,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new vb(e)}static widget(e){let t=e.side||0,r=!!e.block;return t+=r?t>0?3e8:-4e8:t>0?1e8:-1e8,new gh(e,t,t,r,e.widget||null,!1)}static replace(e){let r,i,t=!!e.block;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:a}=ER(e,t);r=(s?t?-3e8:-1:5e8)-1,i=1+(a?t?2e8:1:-6e8)}return new gh(e,r,i,t,e.widget||null,!0)}static line(e){return new Rm(e)}static set(e,t=!1){return fi.of(e,t)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}dn.none=fi.empty;class vb extends dn{constructor(e){let{start:t,end:r}=ER(e);super(t?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof vb&&this.tagName==e.tagName&&this.class==e.class&&nC(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}vb.prototype.point=!1;class Rm extends dn{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Rm&&this.spec.class==e.spec.class&&nC(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Rm.prototype.mapMode=oo.TrackBefore,Rm.prototype.point=!0;class gh extends dn{constructor(e,t,r,i,s,a){super(t,r,s,e),this.block=i,this.isReplace=a,this.mapMode=i?t<=0?oo.TrackBefore:oo.TrackAfter:oo.TrackDel}get type(){return this.startSide<this.endSide?zr.WidgetRange:this.startSide<=0?zr.WidgetBefore:zr.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof gh&&function rW(n,e){return n==e||!!(n&&e&&n.compare(e))}(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}function ER(n,e=!1){let{inclusiveStart:t,inclusiveEnd:r}=n;return null==t&&(t=n.inclusive),null==r&&(r=n.inclusive),{start:t??e,end:r??e}}function iC(n,e,t,r=0){let i=t.length-1;i>=0&&t[i]+r>=n?t[i]=Math.max(t[i],e):t.push(n,e)}gh.prototype.point=!0;class lo extends Kr{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,r,i,s,a){if(r){if(!(r instanceof lo))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),hR(this,e,t,r?r.children:[],s,a),!0}split(e){let t=new lo;if(t.breakAfter=this.breakAfter,0==this.length)return t;let{i:r,off:i}=this.childPos(e);i&&(t.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)t.append(this.children[s],0);for(;r>0&&0==this.children[r-1].length;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){nC(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){wR(this,e,t)}addLineDeco(e){let t=e.spec.attributes,r=e.spec.class;t&&(this.attrs=tC(t,this.attrs||{})),r&&(this.attrs=tC({class:r},this.attrs||{}))}domAtPos(e){return _R(this,e)}reuseDOM(e){"DIV"==e.nodeName&&(this.setDOM(e),this.dirty|=6)}sync(e,t){var r;this.dom?4&this.dirty&&(lR(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(rC(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let i=this.dom.lastChild;for(;i&&Kr.get(i)instanceof Ul;)i=i.lastChild;if(!(i&&this.length&&("BR"==i.nodeName||0!=(null===(r=Kr.get(i))||void 0===r?void 0:r.isEditable)||un.ios&&this.children.some(s=>s instanceof Bu)))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let t,e=0;for(let r of this.children){if(!(r instanceof Bu)||/[^ -~]/.test(r.text))return null;let i=Im(r.dom);if(1!=i.length)return null;e+=i[0].width,t=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let r=xR(this,e,t);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let a=(s-i.textHeight)/2;return{top:r.top+a,bottom:r.bottom-a,left:r.left,right:r.left}}}return r}become(e){return!1}get type(){return zr.Text}static find(e,t){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],a=i+s.length;if(a>=t){if(s instanceof lo)return s;if(a>t)break}i=a+s.breakAfter}return null}}class mh extends Kr{constructor(e,t,r){super(),this.widget=e,this.length=t,this.type=r,this.breakAfter=0,this.prevWidget=null}merge(e,t,r,i,s,a){return!(r&&(!(r instanceof mh&&this.widget.compare(r.widget))||e>0&&s<=0||t<this.length&&a<=0)||(this.length=e+(r?r.length:0)+(this.length-t),0))}domAtPos(e){return 0==e?Es.before(this.dom):Es.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let r=new mh(this.widget,t,this.type);return r.breakAfter=this.breakAfter,r}get children(){return YD}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Cr.empty}domBoundsAround(){return null}become(e){return e instanceof mh&&e.type==this.type&&e.widget.constructor==this.widget.constructor&&(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class sC{constructor(e,t,r,i){this.doc=e,this.pos=t,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof mh&&e.type==zr.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new lo),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(yb(new ph(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(e,t,r){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:a,done:u}=this.cursor.next(this.skip);if(this.skip=0,u)throw new Error("Ran out of text content when drawing inline views");if(a){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}this.text=s,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-r)),this.getLine().append(yb(new Bu(this.text.slice(this.textOff,this.textOff+i)),t),r),this.atCursorPos=!0,this.textOff+=i,e-=i,r=0}}span(e,t,r,i){this.buildText(t-e,r,i),this.pos=t,this.openStart<0&&(this.openStart=i)}point(e,t,r,i,s,a){if(this.disallowBlockEffectsFor[a]&&r instanceof gh){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let u=t-e;if(r instanceof gh)if(r.block){let{type:h}=r;h==zr.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new mh(r.widget||new DR("div"),u,h))}else{let h=Vu.create(r.widget||new DR("span"),u,u?0:r.startSide),m=this.atCursorPos&&!h.isEditable&&s<=i.length&&(e<t||r.startSide>0),v=!h.isEditable&&(e<t||s>i.length||r.startSide<=0),x=this.getLine();2==this.pendingBuffer&&!m&&!h.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),m&&(x.append(yb(new ph(1),i),s),s=i.length+Math.max(0,s-i.length)),x.append(yb(h,i),s),this.atCursorPos=v,this.pendingBuffer=v?e<t||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);u&&(this.textOff+u<=this.text.length?this.textOff+=u:(this.skip+=u-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=s)}static build(e,t,r,i,s){let a=new sC(e,t,r,s);return a.openEnd=fi.spans(i,t,r,a),a.openStart<0&&(a.openStart=a.openEnd),a.finish(a.openEnd),a}}function yb(n,e){for(let t of e)n=new Ul(t,[n],n.length);return n}class DR extends Lc{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}const CR=ln.define(),SR=ln.define(),MR=ln.define(),AR=ln.define(),oC=ln.define(),TR=ln.define(),kR=ln.define(),IR=ln.define({combine:n=>n.some(e=>e)}),OR=ln.define({combine:n=>n.some(e=>e)});class bb{constructor(e,t="nearest",r="nearest",i=5,s=5){this.range=e,this.y=t,this.x=r,this.yMargin=i,this.xMargin=s}map(e){return e.empty?this:new bb(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const RR=Qn.define({map:(n,e)=>n.map(e)});function Xo(n,e,t){let r=n.facet(AR);r.length?r[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const _b=ln.define({combine:n=>!n.length||n[0]});let iW=0;const Pm=ln.define();class wi{constructor(e,t,r,i){this.id=e,this.create=t,this.domEventHandlers=r,this.extension=i(this)}static define(e,t){const{eventHandlers:r,provide:i,decorations:s}=t||{};return new wi(iW++,e,r,a=>{let u=[Pm.of(a)];return s&&u.push(Nm.of(h=>{let m=h.plugin(a);return m?s(m):dn.none})),i&&u.push(i(a)),u})}static fromClass(e,t){return wi.define(r=>new e(r),t)}}class aC{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(r){if(Xo(t.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Xo(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(null!==(t=this.value)&&void 0!==t&&t.destroy)try{this.value.destroy()}catch(r){Xo(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const PR=ln.define(),wb=ln.define(),Nm=ln.define(),NR=ln.define(),LR=ln.define(),Lm=ln.define();class nl{constructor(e,t,r,i){this.fromA=e,this.toA=t,this.fromB=r,this.toB=i}join(e){return new nl(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,r=this;for(;t>0;t--){let i=e[t-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(t-1,1)}}return e.splice(t,0,r),e}static extendWithRanges(e,t){if(0==t.length)return e;let r=[];for(let i=0,s=0,a=0,u=0;;i++){let h=i==e.length?null:e[i],m=a-u,v=h?h.fromB:1e9;for(;s<t.length&&t[s]<v;){let I=t[s+1],j=Math.max(u,t[s]),Q=Math.min(v,I);if(j<=Q&&new nl(j+m,Q+m,j,Q).addToSet(r),I>v)break;s+=2}if(!h)return r;new nl(h.fromA,h.toA,h.fromB,h.toB).addToSet(r),a=h.toA,u=h.toB}}}class xb{constructor(e,t,r){this.view=e,this.state=t,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=Xi.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,a,u,h)=>i.push(new nl(s,a,u,h))),this.changedRanges=i}static create(e,t,r){return new xb(e,t,r)}get viewportChanged(){return(4&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(10&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return 0==this.flags&&0==this.transactions.length}}var pi=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(pi||(pi={}));const lC=pi.LTR,sW=pi.RTL;function FR(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const oW=FR("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),aW=FR("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),cC=Object.create(null),Gl=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);cC[e]=t,cC[t]=-e}function lW(n){return n<=247?oW[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?aW[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8203?256:64336<=n&&n<=65023?4:8204==n?256:1}const cW=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class lp{constructor(e,t,r){this.from=e,this.to=t,this.level=r}get dir(){return this.level%2?sW:lC}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,r,i){let s=-1;for(let a=0;a<e.length;a++){let u=e[a];if(u.from<=t&&u.to>=t){if(u.level==r)return a;(s<0||(0!=i?i<0?u.from<t:u.to>t:e[s].level>u.level))&&(s=a)}}if(s<0)throw new RangeError("Index out of range");return s}}const gi=[];function VR(n){return[new lp(0,n,0)]}let HR="";function zR(n,e,t,r,i){var s;let a=r.head-n.from,u=-1;if(0==a){if(!i||!n.length)return null;e[0].level!=t&&(a=e[0].side(!1,t),u=0)}else if(a==n.length){if(i)return null;let I=e[e.length-1];I.level!=t&&(a=I.side(!0,t),u=e.length-1)}u<0&&(u=lp.find(e,a,null!==(s=r.bidiLevel)&&void 0!==s?s:-1,r.assoc));let h=e[u];a==h.side(i,t)&&(h=e[u+=i?1:-1],a=h.side(!i,t));let m=i==(h.dir==t),v=so(n.text,a,m);if(HR=n.text.slice(Math.min(a,v),Math.max(a,v)),v!=h.side(i,t))return Ct.cursor(v+n.from,m?-1:1,h.level);let x=u==(i?e.length-1:0)?null:e[u+(i?1:-1)];return x||h.level==t?x&&x.level<h.level?Ct.cursor(x.side(!i,t)+n.from,i?1:-1,x.level):Ct.cursor(v+n.from,i?-1:1,h.level):Ct.cursor(i?n.to:n.from,i?-1:1,t)}class jR{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(ao.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+="\uffff"}readRange(e,t){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i),this.readNode(i);let s=i.nextSibling;if(s==t)break;let a=Kr.get(i),u=Kr.get(s);(a&&u?a.breakAfter:(a?a.breakAfter:UR(i))||UR(s)&&("BR"!=i.nodeName||i.cmIgnore))&&this.lineBreak(),i=s}return this.findPointBefore(r,t),this}readTextNode(e){let t=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,t.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let u,s=-1,a=1;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,r),a=this.lineSeparator.length):(u=i.exec(t))&&(s=u.index,a=u[0].length),this.append(t.slice(r,s<0?t.length:s)),s<0)break;if(this.lineBreak(),a>1)for(let h of this.points)h.node==e&&h.pos>this.text.length&&(h.pos-=a-1);r=s+a}}readNode(e){if(e.cmIgnore)return;let t=Kr.get(e),r=t&&t.overrideDOMText;if(null!=r){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else 3==e.nodeType?this.readTextNode(e):"BR"==e.nodeName?e.nextSibling&&this.lineBreak():1==e.nodeType&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==t&&(r.pos=this.text.length)}findPointInside(e,t){for(let r of this.points)(3==e.nodeType?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+Math.min(t,r.offset))}}function UR(n){return 1==n.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}class GR{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class $R extends Kr{constructor(e){super(),this.view=e,this.compositionDeco=dn.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new lo],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new nl(0,0,0,e.state.doc.length)],0)}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every(({fromA:a,toA:u})=>u<this.minWidthFrom||a>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=dn.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=function dW(n,e){let t=qR(n);if(!t)return dn.none;let{from:r,to:i,node:s,text:a}=t,u=e.mapPos(r,1),h=Math.max(u,e.mapPos(i,-1)),{state:m}=n,v=3==s.nodeType?s.nodeValue:new jR([],m).readRange(s.firstChild,null).text;if(h-u<v.length)if(m.doc.sliceString(u,Math.min(m.doc.length,u+v.length),"\uffff")==v)h=u+v.length;else{if(m.doc.sliceString(Math.max(0,h-v.length),h,"\uffff")!=v)return dn.none;u=h-v.length}else if(m.doc.sliceString(u,h,"\uffff")!=v)return dn.none;let x=Kr.get(s);return x instanceof yR?x=x.widget.topView:x&&(x.parent=null),dn.set(dn.replace({widget:new hW(s,a,x),inclusive:!0}).range(u,h))}(this.view,e.changes)),(un.ie||un.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let s=function gW(n,e,t){let r=new pW;return fi.compare(n,e,t,r),r.changes}(this.decorations,this.updateDeco(),e.changes);return t=nl.extendWithRanges(t,s),(0!=this.dirty||0!=t.length)&&(this.updateInner(t,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let s=un.chrome||un.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,s),this.dirty=0,s&&(s.written||r.selectionRange.focusNode!=s.node)&&(this.forceSelection=!0),this.dom.style.height=""});let i=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.children)s instanceof mh&&s.widget instanceof WR&&i.push(s.dom);r.updateGaps(i)}updateChildren(e,t){let r=this.childCursor(t);for(let i=e.length-1;;i--){let s=i>=0?e[i]:null;if(!s)break;let{fromA:a,toA:u,fromB:h,toB:m}=s,{content:v,breakAtStart:x,openStart:I,openEnd:j}=sC.build(this.view.state.doc,h,m,this.decorations,this.dynamicDecorationMap),{i:Q,off:oe}=r.findPos(u,1),{i:ve,off:Pe}=r.findPos(a,-1);dR(this,ve,Pe,Q,oe,v,x,I,j)}}updateSelection(e=!1,t=!1){if((e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange(),!t&&!this.mayControlSelection())return;let r=this.forceSelection;this.forceSelection=!1;let i=this.view.state.selection.main,s=this.domAtPos(i.anchor),a=i.empty?s:this.domAtPos(i.head);if(un.gecko&&i.empty&&!this.compositionDeco.size&&function uW(n){return 1==n.node.nodeType&&n.node.firstChild&&(0==n.offset||"false"==n.node.childNodes[n.offset-1].contentEditable)&&(n.offset==n.node.childNodes.length||"false"==n.node.childNodes[n.offset].contentEditable)}(s)){let h=document.createTextNode("");this.view.observer.ignore(()=>s.node.insertBefore(h,s.node.childNodes[s.offset]||null)),s=a=new Es(h,0),r=!0}let u=this.view.observer.selectionRange;(r||!u.focusNode||!pb(s.node,s.offset,u.anchorNode,u.anchorOffset)||!pb(a.node,a.offset,u.focusNode,u.focusOffset))&&(this.view.observer.ignore(()=>{un.android&&un.chrome&&this.dom.contains(u.focusNode)&&function mW(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(1==t.nodeType&&"false"==t.contentEditable)return!0;return!1}(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let h=hb(this.view.root);if(h)if(i.empty){if(un.gecko){let m=function fW(n,e){return 1!=n.nodeType?0:(e&&"false"==n.childNodes[e-1].contentEditable?1:0)|(e<n.childNodes.length&&"false"==n.childNodes[e].contentEditable?2:0)}(s.node,s.offset);if(m&&3!=m){let v=YR(s.node,s.offset,1==m?1:-1);v&&(s=new Es(v,1==m?0:v.nodeValue.length))}}h.collapse(s.node,s.offset),null!=i.bidiLevel&&null!=u.cursorBidiLevel&&(u.cursorBidiLevel=i.bidiLevel)}else if(h.extend){h.collapse(s.node,s.offset);try{h.extend(a.node,a.offset)}catch{}}else{let m=document.createRange();i.anchor>i.head&&([s,a]=[a,s]),m.setEnd(a.node,a.offset),m.setStart(s.node,s.offset),h.removeAllRanges(),h.addRange(m)}}),this.view.observer.setSelectionRange(s,a)),this.impreciseAnchor=s.precise?null:new Es(u.anchorNode,u.anchorOffset),this.impreciseHead=a.precise?null:new Es(u.focusNode,u.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let{view:e}=this,t=e.state.selection.main,r=hb(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!(r&&t.empty&&t.assoc&&r.modify))return;let a=lo.find(this,t.head);if(!a)return;let u=a.posAtStart;if(t.head==u||t.head==u+a.length)return;let h=this.coordsAt(t.head,-1),m=this.coordsAt(t.head,1);if(!h||!m||h.bottom>m.top)return;let v=this.domAtPos(t.head+t.assoc);r.collapse(v.node,v.offset),r.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let x=e.observer.selectionRange;e.docView.posFromDOM(x.anchorNode,x.anchorOffset)!=t.from&&r.collapse(i,s)}mayControlSelection(){let e=this.view.root.activeElement;return e==this.dom||fb(this.dom,this.view.observer.selectionRange)&&!(e&&this.dom.contains(e))}nearest(e){for(let t=e;t;){let r=Kr.get(t);if(r&&r.rootView==this)return r;t=t.parentNode}return null}posFromDOM(e,t){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,t)+r.posAtStart}domAtPos(e){let{i:t,off:r}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let i=this.children[t];if(r<i.length||i instanceof lo)break;t++,r=0}return this.children[t].domAtPos(r)}coordsAt(e,t){for(let r=this.length,i=this.children.length-1;;i--){let s=this.children[i],a=r-s.breakAfter-s.length;if(e>a||e==a&&s.type!=zr.WidgetBefore&&s.type!=zr.WidgetAfter&&(!i||2==t||this.children[i-1].breakAfter||this.children[i-1].type==zr.WidgetBefore&&t>-2))return s.coordsAt(e-a,t);r=a}}measureVisibleLineHeights(e){let t=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,a=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,u=-1,h=this.view.textDirection==pi.LTR;for(let m=0,v=0;v<this.children.length;v++){let x=this.children[v],I=m+x.length;if(I>i)break;if(m>=r){let j=x.dom.getBoundingClientRect();if(t.push(j.height),a){let Q=x.dom.lastChild,oe=Q?Im(Q):[];if(oe.length){let ve=oe[oe.length-1],Pe=h?ve.right-j.left:j.right-ve.left;Pe>u&&(u=Pe,this.minWidth=s,this.minWidthFrom=m,this.minWidthTo=I)}}}m=I+x.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return"rtl"==getComputedStyle(this.children[t].dom).direction?pi.RTL:pi.LTR}measureTextSize(){for(let s of this.children)if(s instanceof lo){let a=s.measureTextSize();if(a)return a}let t,r,i,e=document.createElement("div");return e.className="cm-line",e.style.width="99999px",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Im(e.firstChild)[0];t=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:t,e.remove()}),{lineHeight:t,charWidth:r,textHeight:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new uR(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let r=0,i=0;;i++){let s=i==t.viewports.length?null:t.viewports[i],a=s?s.from-1:this.length;if(a>r){let u=t.lineBlockAt(a).bottom-t.lineBlockAt(r).top;e.push(dn.replace({widget:new WR(u),block:!0,inclusive:!0,isBlockGap:!0}).range(r,a))}if(!s)break;r=s.to+1}return dn.set(e)}updateDeco(){let e=this.view.state.facet(Nm).map((t,r)=>(this.dynamicDecorationMap[r]="function"==typeof t)?t(this.view):t);for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let i,{range:t}=e,r=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1);if(!r)return;!t.empty&&(i=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=0,a=0,u=0,h=0;for(let v of this.view.state.facet(LR).map(x=>x(this.view)))if(v){let{left:x,right:I,top:j,bottom:Q}=v;null!=x&&(s=Math.max(s,x)),null!=I&&(a=Math.max(a,I)),null!=j&&(u=Math.max(u,j)),null!=Q&&(h=Math.max(h,Q))}!function X$(n,e,t,r,i,s,a,u){let h=n.ownerDocument,m=h.defaultView||window;for(let v=n;v;)if(1==v.nodeType){let x,I=v==h.body;if(I)x=Y$(m);else{if(v.scrollHeight<=v.clientHeight&&v.scrollWidth<=v.clientWidth){v=v.assignedSlot||v.parentNode;continue}let oe=v.getBoundingClientRect();x={left:oe.left,right:oe.left+v.clientWidth,top:oe.top,bottom:oe.top+v.clientHeight}}let j=0,Q=0;if("nearest"==i)e.top<x.top?(Q=-(x.top-e.top+a),t>0&&e.bottom>x.bottom+Q&&(Q=e.bottom-x.bottom+Q+a)):e.bottom>x.bottom&&(Q=e.bottom-x.bottom+a,t<0&&e.top-Q<x.top&&(Q=-(x.top+Q-e.top+a)));else{let oe=e.bottom-e.top,ve=x.bottom-x.top;Q=("center"==i&&oe<=ve?e.top+oe/2-ve/2:"start"==i||"center"==i&&t<0?e.top-a:e.bottom-ve+a)-x.top}if("nearest"==r?e.left<x.left?(j=-(x.left-e.left+s),t>0&&e.right>x.right+j&&(j=e.right-x.right+j+s)):e.right>x.right&&(j=e.right-x.right+s,t<0&&e.left<x.left+j&&(j=-(x.left+j-e.left+s))):j=("center"==r?e.left+(e.right-e.left)/2-(x.right-x.left)/2:"start"==r==u?e.left-s:e.right-(x.right-x.left)+s)-x.left,j||Q)if(I)m.scrollBy(j,Q);else{let oe=0,ve=0;if(Q){let Pe=v.scrollTop;v.scrollTop+=Q,ve=v.scrollTop-Pe}if(j){let Pe=v.scrollLeft;v.scrollLeft+=j,oe=v.scrollLeft-Pe}e={left:e.left-oe,top:e.top-ve,right:e.right-oe,bottom:e.bottom-ve},oe&&Math.abs(oe-j)<1&&(r="nearest"),ve&&Math.abs(ve-Q)<1&&(i="nearest")}if(I)break;v=v.assignedSlot||v.parentNode}else{if(11!=v.nodeType)break;v=v.host}}(this.view.scrollDOM,{left:r.left-s,top:r.top-u,right:r.right+a,bottom:r.bottom+h},t.head<t.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==pi.LTR)}}class WR extends Lc{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function qR(n){let e=n.observer.selectionRange,t=e.focusNode&&YR(e.focusNode,e.focusOffset,0);if(!t)return null;let r=n.docView.nearest(t);if(!r)return null;if(r instanceof lo){let i=t;for(;i.parentNode!=r.dom;)i=i.parentNode;let s=i.previousSibling;for(;s&&!Kr.get(s);)s=s.previousSibling;let a=s?Kr.get(s).posAtEnd:r.posAtStart;return{from:a,to:a,node:i,text:t}}{for(;;){let{parent:s}=r;if(!s)return null;if(s instanceof lo)break;r=s}let i=r.posAtStart;return{from:i,to:i+r.length,node:r.dom,text:t}}}class hW extends Lc{constructor(e,t,r){super(),this.top=e,this.text=t,this.topView=r}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return yR}}function YR(n,e,t){if(t<=0)for(let r=n,i=e;;){if(3==r.nodeType)return r;if(!(1==r.nodeType&&i>0))break;r=r.childNodes[i-1],i=Om(r)}if(t>=0)for(let r=n,i=e;;){if(3==r.nodeType)return r;if(!(1==r.nodeType&&i<r.childNodes.length&&t>=0))break;r=r.childNodes[i],i=0}return null}class pW{constructor(){this.changes=[]}compareRange(e,t){iC(e,t,this.changes)}comparePoint(e,t){iC(e,t,this.changes)}}function yW(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function bW(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function uC(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function XR(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function KR(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function dC(n,e,t){let r,i,s,a,h,m,v,x,u=!1;for(let Q=n.firstChild;Q;Q=Q.nextSibling){let oe=Im(Q);for(let ve=0;ve<oe.length;ve++){let Pe=oe[ve];i&&uC(i,Pe)&&(Pe=XR(KR(Pe,i.bottom),i.top));let Ke=yW(e,Pe),Ge=bW(t,Pe);if(0==Ke&&0==Ge)return 3==Q.nodeType?ZR(Q,e,t):dC(Q,e,t);if(!r||a>Ge||a==Ge&&s>Ke){r=Q,i=Pe,s=Ke,a=Ge;let st=Ge?t<Pe.top?-1:1:Ke?e<Pe.left?-1:1:0;u=!st||(st>0?ve<oe.length-1:ve>0)}0==Ke?t>Pe.bottom&&(!v||v.bottom<Pe.bottom)?(h=Q,v=Pe):t<Pe.top&&(!x||x.top>Pe.top)&&(m=Q,x=Pe):v&&uC(v,Pe)?v=KR(v,Pe.bottom):x&&uC(x,Pe)&&(x=XR(x,Pe.top))}}if(v&&v.bottom>=t?(r=h,i=v):x&&x.top<=t&&(r=m,i=x),!r)return{node:n,offset:0};let I=Math.max(i.left,Math.min(i.right,e));return 3==r.nodeType?ZR(r,I,t):u&&"false"!=r.contentEditable?dC(r,I,t):{node:n,offset:Array.prototype.indexOf.call(n.childNodes,r)+(e>=(i.left+i.right)/2?1:0)}}function ZR(n,e,t){let r=n.nodeValue.length,i=-1,s=1e9,a=0;for(let u=0;u<r;u++){let h=op(n,u,u+1).getClientRects();for(let m=0;m<h.length;m++){let v=h[m];if(v.top==v.bottom)continue;a||(a=e-v.left);let x=(v.top>t?v.top-t:t-v.bottom)-1;if(v.left-1<=e&&v.right+1>=e&&x<s){let I=e>=(v.left+v.right)/2,j=I;if((un.chrome||un.gecko)&&op(n,u).getBoundingClientRect().left==v.right&&(j=!I),x<=0)return{node:n,offset:u+(j?1:0)};i=u+(j?1:0),s=x}}}return{node:n,offset:i>-1?i:a>0?n.nodeValue.length:0}}function QR(n,e,t,r=-1){var i,s;let h,a=n.contentDOM.getBoundingClientRect(),u=a.top+n.viewState.paddingTop,{docHeight:m}=n.viewState,{x:v,y:x}=e,I=x-u;if(I<0)return 0;if(I>m)return n.state.doc.length;for(let st=n.defaultLineHeight/2,_t=!1;h=n.elementAtHeight(I),h.type!=zr.Text;)for(;I=r>0?h.bottom+st:h.top-st,!(I>=0&&I<=m);){if(_t)return t?null:0;_t=!0,r=-r}x=u+I;let j=h.from;if(j<n.viewport.from)return 0==n.viewport.from?0:t?null:JR(n,a,h,v,x);if(j>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:JR(n,a,h,v,x);let Q=n.dom.ownerDocument,oe=n.root.elementFromPoint?n.root:Q,ve=oe.elementFromPoint(v,x);ve&&!n.contentDOM.contains(ve)&&(ve=null),ve||(v=Math.max(a.left+1,Math.min(a.right-1,v)),ve=oe.elementFromPoint(v,x),ve&&!n.contentDOM.contains(ve)&&(ve=null));let Pe,Ke=-1;if(ve&&0!=(null===(i=n.docView.nearest(ve))||void 0===i?void 0:i.isEditable))if(Q.caretPositionFromPoint){let st=Q.caretPositionFromPoint(v,x);st&&({offsetNode:Pe,offset:Ke}=st)}else if(Q.caretRangeFromPoint){let st=Q.caretRangeFromPoint(v,x);st&&(({startContainer:Pe,startOffset:Ke}=st),(!n.contentDOM.contains(Pe)||un.safari&&function _W(n,e,t){let r;if(3!=n.nodeType||e!=(r=n.nodeValue.length))return!1;for(let i=n.nextSibling;i;i=i.nextSibling)if(1!=i.nodeType||"BR"!=i.nodeName)return!1;return op(n,r-1,r).getBoundingClientRect().left>t}(Pe,Ke,v)||un.chrome&&function wW(n,e,t){if(0!=e)return!1;for(let i=n;;){let s=i.parentNode;if(!s||1!=s.nodeType||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}return t-(1==n.nodeType?n.getBoundingClientRect():op(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect()).left>5}(Pe,Ke,v))&&(Pe=void 0))}if(!Pe||!n.docView.dom.contains(Pe)){let st=lo.find(n.docView,j);if(!st)return I>h.top+h.height/2?h.to:h.from;({node:Pe,offset:Ke}=dC(st.dom,v,x))}let Ge=n.docView.nearest(Pe);if(!Ge)return null;if(Ge.isWidget&&1==(null===(s=Ge.dom)||void 0===s?void 0:s.nodeType)){let st=Ge.dom.getBoundingClientRect();return e.y<st.top||e.y<=st.bottom&&e.x<=(st.left+st.right)/2?Ge.posAtStart:Ge.posAtEnd}return Ge.localPosFromDOM(Pe,Ke)+Ge.posAtStart}function JR(n,e,t,r,i){let s=Math.round((r-e.left)*n.defaultCharacterWidth);n.lineWrapping&&t.height>1.5*n.defaultLineHeight&&(s+=Math.floor((i-t.top)/n.defaultLineHeight)*n.viewState.heightOracle.lineLength);let a=n.state.sliceDoc(t.from,t.to);return t.from+UD(a,s,n.state.tabSize)}function eP(n,e,t,r){let i=n.state.doc.lineAt(e.head),s=n.bidiSpans(i),a=n.textDirectionAt(i.from);for(let u=e,h=null;;){let m=zR(i,s,a,u,t),v=HR;if(!m){if(i.number==(t?n.state.doc.lines:1))return u;v="\n",i=n.state.doc.line(i.number+(t?1:-1)),s=n.bidiSpans(i),m=Ct.cursor(t?i.from:i.to)}if(h){if(!h(v))return u}else{if(!r)return m;h=r(v)}u=m}}function hC(n,e,t){let r=n.state.facet(NR).map(i=>i(n));for(;;){let i=!1;for(let s of r)s.between(t.from-1,t.from+1,(a,u,h)=>{t.from>a&&t.from<u&&(t=e.head>t.from?Ct.cursor(a,1):Ct.cursor(u,-1),i=!0)});if(!i)return t}}class CW{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null;let t=(r,i)=>{this.ignoreDuringComposition(i)||"keydown"==i.type&&this.keydown(e,i)||(this.mustFlushObserver(i)&&e.observer.forceFlush(),this.runCustomHandlers(i.type,e,i)?i.preventDefault():r(e,i))};for(let r in Ki){let i=Ki[r];e.contentDOM.addEventListener(r,s=>{rP(e,s)&&t(i,s)},fC[r]),this.registeredEvents.push(r)}e.scrollDOM.addEventListener("mousedown",r=>{if(r.target==e.scrollDOM&&r.clientY>e.contentDOM.getBoundingClientRect().bottom&&(t(Ki.mousedown,r),!r.defaultPrevented&&2==r.button)){let i=e.contentDOM.style.minHeight;e.contentDOM.style.minHeight="100%",setTimeout(()=>e.contentDOM.style.minHeight=i,200)}}),un.chrome&&102==un.chrome_version&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,un.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,t){var r;let i;this.customHandlers=[];for(let s of t)if(i=null===(r=s.update(e).spec)||void 0===r?void 0:r.domEventHandlers){this.customHandlers.push({plugin:s.value,handlers:i});for(let a in i)this.registeredEvents.indexOf(a)<0&&"scroll"!=a&&(this.registeredEvents.push(a),e.contentDOM.addEventListener(a,u=>{rP(e,u)&&this.runCustomHandlers(a,e,u)&&u.preventDefault()}))}}runCustomHandlers(e,t,r){for(let i of this.customHandlers){let s=i.handlers[e];if(s)try{if(s.call(i.plugin,r,t)||r.defaultPrevented)return!0}catch(a){Xo(t.state,a)}}return!1}runScrollHandlers(e,t){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let r of this.customHandlers){let i=r.handlers.scroll;if(i)try{i.call(r.plugin,t,e)}catch(s){Xo(e.state,s)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),9==t.keyCode&&Date.now()<this.lastEscPress+2e3)return!0;if(un.android&&un.chrome&&!t.synthetic&&(13==t.keyCode||8==t.keyCode))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let r;return!(!un.ios||t.synthetic||t.altKey||t.metaKey||!((r=tP.find(i=>i.keyCode==t.keyCode))&&!t.ctrlKey||SW.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)||(this.pendingIOSKey=r||t,setTimeout(()=>this.flushIOSKey(e),250),0))}flushIOSKey(e){let t=this.pendingIOSKey;return!!t&&(this.pendingIOSKey=void 0,ap(e.contentDOM,t.key,t.keyCode))}ignoreDuringComposition(e){return!!/^key/.test(e.type)&&(this.composing>0||!!(un.safari&&!un.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))}mustFlushObserver(e){return"keydown"==e.type&&229!=e.keyCode}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const tP=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],SW="dthko",nP=[16,17,18,20,91,92,224,225];function Db(n){return.7*Math.max(0,n)+8}class MW{constructor(e,t,r,i){this.view=e,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParent=function K$(n){let e=n.ownerDocument;for(let t=n.parentNode;t&&t!=e.body;)if(1==t.nodeType){if(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth)return t;t=t.assignedSlot||t.parentNode}else{if(11!=t.nodeType)break;t=t.host}return null}(e.contentDOM);let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(ao.allowMultipleSelections)&&function AW(n,e){let t=n.state.facet(CR);return t.length?t[0](e):un.mac?e.metaKey:e.ctrlKey}(e,t),this.dragMove=function TW(n,e){let t=n.state.facet(SR);return t.length?t[0](e):un.mac?!e.altKey:!e.ctrlKey}(e,t),this.dragging=!(!function kW(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let r=hb(n.root);if(!r||0==r.rangeCount)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let a=i[s];if(a.left<=e.clientX&&a.right>=e.clientX&&a.top<=e.clientY&&a.bottom>=e.clientY)return!0}return!1}(e,t)||1!=fP(t))&&null}start(e){!1===this.dragging&&(e.preventDefault(),this.select(e))}move(e){var t;if(0==e.buttons)return this.destroy();if(!1!==this.dragging)return;this.select(this.lastEvent=e);let r=0,i=0,s=(null===(t=this.scrollParent)||void 0===t?void 0:t.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight};e.clientX<=s.left+6?r=-Db(s.left-e.clientX):e.clientX>=s.right-6&&(r=Db(e.clientX-s.right)),e.clientY<=s.top+6?i=-Db(s.top-e.clientY):e.clientY>=s.bottom-6&&(i=Db(e.clientY-s.bottom)),this.setScrollSpeed(r,i)}up(e){null==this.dragging&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),!1===this.dragging&&this.select(this.lastEvent)}select(e){let t=this.style.get(e,this.extend,this.multiple);(this.mustSelect||!t.eq(this.view.state.selection)||t.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:t,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function rP(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let r,t=e.target;t!=n.contentDOM;t=t.parentNode)if(!t||11==t.nodeType||(r=Kr.get(t))&&r.ignoreEvent(e))return!1;return!0}const Ki=Object.create(null),fC=Object.create(null),iP=un.ie&&un.ie_version<15||un.ios&&un.webkit_version<604;function sP(n,e){let r,{state:t}=n,i=1,s=t.toText(e),a=s.lines==t.selection.ranges.length;if(null!=pC&&t.selection.ranges.every(h=>h.empty)&&pC==s.toString()){let h=-1;r=t.changeByRange(m=>{let v=t.doc.lineAt(m.from);if(v.from==h)return{range:m};h=v.from;let x=t.toText((a?s.line(i++).text:e)+t.lineBreak);return{changes:{from:v.from,insert:x},range:Ct.cursor(m.from+x.length)}})}else r=a?t.changeByRange(h=>{let m=s.line(i++);return{changes:{from:h.from,to:h.to,insert:m.text},range:Ct.cursor(h.from+m.length)}}):t.replaceSelection(s);n.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}function oP(n,e,t,r){if(1==r)return Ct.cursor(e,t);if(2==r)return function vW(n,e,t=1){let r=n.charCategorizer(e),i=n.doc.lineAt(e),s=e-i.from;if(0==i.length)return Ct.cursor(e);0==s?t=1:s==i.length&&(t=-1);let a=s,u=s;t<0?a=so(i.text,s,!1):u=so(i.text,s);let h=r(i.text.slice(a,u));for(;a>0;){let m=so(i.text,a,!1);if(r(i.text.slice(m,a))!=h)break;a=m}for(;u<i.length;){let m=so(i.text,u);if(r(i.text.slice(u,m))!=h)break;u=m}return Ct.range(a+i.from,u+i.from)}(n.state,e,t);{let i=lo.find(n.docView,e),s=n.state.doc.lineAt(i?i.posAtEnd:e),u=i?i.posAtEnd:s.to;return u<n.state.doc.length&&u==s.to&&u++,Ct.range(i?i.posAtStart:s.from,u)}}Ki.keydown=(n,e)=>{n.inputState.setSelectionOrigin("select"),27==e.keyCode?n.inputState.lastEscPress=Date.now():nP.indexOf(e.keyCode)<0&&(n.inputState.lastEscPress=0)},Ki.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")},Ki.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")},fC.touchstart=fC.touchmove={passive:!0},Ki.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return;let t=null;for(let r of n.state.facet(MR))if(t=r(n,e),t)break;if(!t&&0==e.button&&(t=function PW(n,e){let t=cP(n,e),r=fP(e),i=n.state.selection;return{update(s){s.docChanged&&(t.pos=s.changes.mapPos(t.pos),i=i.map(s.changes))},get(s,a,u){let m,h=cP(n,s),v=oP(n,h.pos,h.bias,r);if(t.pos!=h.pos&&!a){let x=oP(n,t.pos,t.bias,r),I=Math.min(x.from,v.from),j=Math.max(x.to,v.to);v=I<v.from?Ct.range(I,j):Ct.range(j,I)}return a?i.replaceRange(i.main.extend(v.from,v.to)):u&&1==r&&i.ranges.length>1&&(m=function NW(n,e){for(let t=0;t<n.ranges.length;t++){let{from:r,to:i}=n.ranges[t];if(r<=e&&i>=e)return Ct.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}(i,h.pos))?m:u?i.addRange(v):Ct.create([v])}}}(n,e)),t){let r=n.root.activeElement!=n.contentDOM;n.inputState.startMouseSelection(new MW(n,e,t,r)),r&&n.observer.ignore(()=>oR(n.contentDOM)),n.inputState.mouseSelection&&n.inputState.mouseSelection.start(e)}};let aP=(n,e)=>n>=e.top&&n<=e.bottom,lP=(n,e,t)=>aP(e,t)&&n>=t.left&&n<=t.right;function OW(n,e,t,r){let i=lo.find(n.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(0==s)return 1;if(s==i.length)return-1;let a=i.coordsAt(s,-1);if(a&&lP(t,r,a))return-1;let u=i.coordsAt(s,1);return u&&lP(t,r,u)?1:a&&aP(r,a)?-1:1}function cP(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:OW(n,t,e.clientX,e.clientY)}}const RW=un.ie&&un.ie_version<=11;let uP=null,dP=0,hP=0;function fP(n){if(!RW)return n.detail;let e=uP,t=hP;return uP=n,hP=Date.now(),dP=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(dP+1)%3:1}function pP(n,e,t,r){if(!t)return;let i=n.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:s}=n.inputState,a=r&&s&&s.dragging&&s.dragMove?{from:s.dragging.from,to:s.dragging.to}:null,u={from:i,insert:t},h=n.state.changes(a?[a,u]:u);n.focus(),n.dispatch({changes:h,selection:{anchor:h.mapPos(i,-1),head:h.mapPos(i,1)},userEvent:a?"move.drop":"input.drop"})}Ki.dragstart=(n,e)=>{let{selection:{main:t}}=n.state,{mouseSelection:r}=n.inputState;r&&(r.dragging=t),e.dataTransfer&&(e.dataTransfer.setData("Text",n.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove")},Ki.drop=(n,e)=>{if(!e.dataTransfer)return;if(n.state.readOnly)return e.preventDefault();let t=e.dataTransfer.files;if(t&&t.length){e.preventDefault();let r=Array(t.length),i=0,s=()=>{++i==t.length&&pP(n,e,r.filter(a=>null!=a).join(n.state.lineBreak),!1)};for(let a=0;a<t.length;a++){let u=new FileReader;u.onerror=s,u.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(u.result)||(r[a]=u.result),s()},u.readAsText(t[a])}}else pP(n,e,e.dataTransfer.getData("Text"),!0)},Ki.paste=(n,e)=>{if(n.state.readOnly)return e.preventDefault();n.observer.flush();let t=iP?null:e.clipboardData;t?(sP(n,t.getData("text/plain")||t.getData("text/uri-text")),e.preventDefault()):function IW(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),sP(n,t.value)},50)}(n)};let pC=null;Ki.copy=Ki.cut=(n,e)=>{let{text:t,ranges:r,linewise:i}=function FW(n){let e=[],t=[],r=!1;for(let i of n.selection.ranges)i.empty||(e.push(n.sliceDoc(i.from,i.to)),t.push(i));if(!e.length){let i=-1;for(let{from:s}of n.selection.ranges){let a=n.doc.lineAt(s);a.number>i&&(e.push(a.text),t.push({from:a.from,to:Math.min(n.doc.length,a.to+1)})),i=a.number}r=!0}return{text:e.join(n.lineBreak),ranges:t,linewise:r}}(n.state);if(!t&&!i)return;pC=i?t:null;let s=iP?null:e.clipboardData;s?(e.preventDefault(),s.clearData(),s.setData("text/plain",t)):function LW(n,e){let t=n.dom.parentNode;if(!t)return;let r=t.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),n.focus()},50)}(n,t),"cut"==e.type&&!n.state.readOnly&&n.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})};const gP=Nc.define();function mP(n,e){let t=[];for(let r of n.facet(kR)){let i=r(n,e);i&&t.push(i)}return t?n.update({effects:t,annotations:gP.of(!0)}):null}function vP(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=mP(n.state,e);t?n.dispatch(t):n.update([])}},10)}Ki.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),vP(n)},Ki.blur=n=>{n.observer.clearSelectionRange(),vP(n)},Ki.compositionstart=Ki.compositionupdate=n=>{null==n.inputState.compositionFirstChange&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0)},Ki.compositionend=n=>{n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,un.chrome&&un.android&&n.observer.flushSoon(),setTimeout(()=>{n.inputState.composing<0&&n.docView.compositionDeco.size&&n.update([])},50)},Ki.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()},Ki.beforeinput=(n,e)=>{var t;let r;if(un.chrome&&un.android&&(r=tP.find(i=>i.inputType==e.inputType))&&(n.observer.delayAndroidKey(r.key,r.keyCode),"Backspace"==r.key||"Delete"==r.key)){let i=(null===(t=window.visualViewport)||void 0===t?void 0:t.height)||0;setTimeout(()=>{var s;((null===(s=window.visualViewport)||void 0===s?void 0:s.height)||0)>i+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}};const yP=["pre-wrap","normal","pre-line","break-spaces"];class bP{constructor(e){this.lineWrapping=e,this.doc=Cr.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let r=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((t-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return yP.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(10*i)]||(t=!0,this.heightSamples[Math.floor(10*i)]=!0)}return t}refresh(e,t,r,i,s,a){let u=yP.indexOf(e)>-1,h=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=u;if(this.lineWrapping=u,this.lineHeight=t,this.charWidth=r,this.textHeight=i,this.lineLength=s,h){this.heightSamples={};for(let m=0;m<a.length;m++){let v=a[m];v<0?m++:this.heightSamples[Math.floor(10*v)]=!0}}return h}}class _P{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Fc{constructor(e,t,r,i,s){this.from=e,this.length=t,this.top=r,this.height=i,this.type=s}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let t=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new Fc(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Gr=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(Gr||(Gr={}));const Cb=.001;class Us{constructor(e,t,r=2){this.length=e,this.height=t,this.flags=r}get outdated(){return(2&this.flags)>0}set outdated(e){this.flags=(e?2:0)|-3&this.flags}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>Cb&&(e.heightChanged=!0),this.height=t)}replace(e,t,r){return Us.of(r)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,r,i){let s=this,a=r.doc;for(let u=i.length-1;u>=0;u--){let{fromA:h,toA:m,fromB:v,toB:x}=i[u],I=s.lineAt(h,Gr.ByPosNoHeight,r.setDoc(t),0,0),j=I.to>=m?I:s.lineAt(m,Gr.ByPosNoHeight,r,0,0);for(x+=j.to-m,m=j.to;u>0&&I.from<=i[u-1].toA;)h=i[u-1].fromA,v=i[u-1].fromB,u--,h<I.from&&(I=s.lineAt(h,Gr.ByPosNoHeight,r,0,0));v+=I.from-h,h=I.from;let Q=gC.build(r.setDoc(a),e,v,x);s=s.replace(h,m,Q)}return s.updateHeight(r,0)}static empty(){return new Ko(0,0)}static of(e){if(1==e.length)return e[0];let t=0,r=e.length,i=0,s=0;for(;;)if(t==r)if(i>2*s){let u=e[t-1];u.break?e.splice(--t,1,u.left,null,u.right):e.splice(--t,1,u.left,u.right),r+=1+u.break,i-=u.size}else{if(!(s>2*i))break;{let u=e[r];u.break?e.splice(r,1,u.left,null,u.right):e.splice(r,1,u.left,u.right),r+=2+u.break,s-=u.size}}else if(i<s){let u=e[t++];u&&(i+=u.size)}else{let u=e[--r];u&&(s+=u.size)}let a=0;return null==e[t-1]?(a=1,t--):null==e[t]&&(a=1,r++),new BW(Us.of(e.slice(0,t)),a,Us.of(e.slice(r)))}}Us.prototype.size=1;class wP extends Us{constructor(e,t,r){super(e,t),this.type=r}blockAt(e,t,r,i){return new Fc(i,this.length,r,this.height,this.type)}lineAt(e,t,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,t,r,i,s,a){e<=s+this.length&&t>=s&&a(this.blockAt(0,r,i,s))}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more&&this.setHeight(e,i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Ko extends wP{constructor(e,t){super(e,t,zr.Text),this.collapsed=0,this.widgetHeight=0}replace(e,t,r){let i=r[0];return 1==r.length&&(i instanceof Ko||i instanceof Ds&&4&i.flags)&&Math.abs(this.length-i.length)<10?(i instanceof Ds?i=new Ko(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Us.of(r)}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more?this.setHeight(e,i.heights[i.index++]):(r||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Ds extends Us{constructor(e){super(e,0)}heightMetrics(e,t){let a,r=e.doc.lineAt(t).number,i=e.doc.lineAt(t+this.length).number,s=i-r+1,u=0;if(e.lineWrapping){let h=Math.min(this.height,e.lineHeight*s);a=h/s,u=(this.height-h)/(this.length-s-1)}else a=this.height/s;return{firstLine:r,lastLine:i,perLine:a,perChar:u}}blockAt(e,t,r,i){let{firstLine:s,lastLine:a,perLine:u,perChar:h}=this.heightMetrics(t,i);if(t.lineWrapping){let m=i+Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length),v=t.doc.lineAt(m),x=u+v.length*h,I=Math.max(r,e-x/2);return new Fc(v.from,v.length,I,x,zr.Text)}{let m=Math.max(0,Math.min(a-s,Math.floor((e-r)/u))),{from:v,length:x}=t.doc.line(s+m);return new Fc(v,x,r+u*m,u,zr.Text)}}lineAt(e,t,r,i,s){if(t==Gr.ByHeight)return this.blockAt(e,r,i,s);if(t==Gr.ByPosNoHeight){let{from:j,to:Q}=r.doc.lineAt(e);return new Fc(j,Q-j,0,0,zr.Text)}let{firstLine:a,perLine:u,perChar:h}=this.heightMetrics(r,s),m=r.doc.lineAt(e),v=u+m.length*h,x=m.number-a;return new Fc(m.from,m.length,Math.max(i,Math.min(i+u*x+h*(m.from-s-x),i+this.height-v)),v,zr.Text)}forEachLine(e,t,r,i,s,a){e=Math.max(e,s),t=Math.min(t,s+this.length);let{firstLine:u,perLine:h,perChar:m}=this.heightMetrics(r,s);for(let v=e,x=i;v<=t;){let I=r.doc.lineAt(v);if(v==e){let Q=I.number-u;x+=h*Q+m*(e-s-Q)}let j=h+m*I.length;a(new Fc(I.from,I.length,x,j,zr.Text)),x+=j,v=I.to+1}}replace(e,t,r){let i=this.length-t;if(i>0){let s=r[r.length-1];s instanceof Ds?r[r.length-1]=new Ds(s.length+i):r.push(null,new Ds(i-1))}if(e>0){let s=r[0];s instanceof Ds?r[0]=new Ds(e+s.length):r.unshift(new Ds(e-1),null)}return Us.of(r)}decomposeLeft(e,t){t.push(new Ds(e-1),null)}decomposeRight(e,t){t.push(null,new Ds(this.length-e-1))}updateHeight(e,t=0,r=!1,i){let s=t+this.length;if(i&&i.from<=t+this.length&&i.more){let a=[],u=Math.max(t,i.from),h=-1;for(i.from>t&&a.push(new Ds(i.from-t-1).updateHeight(e,t));u<=s&&i.more;){let v=e.doc.lineAt(u).length;a.length&&a.push(null);let x=i.heights[i.index++];-1==h?h=x:Math.abs(x-h)>=Cb&&(h=-2);let I=new Ko(v,x);I.outdated=!1,a.push(I),u+=v+1}u<=s&&a.push(null,new Ds(s-u).updateHeight(e,u));let m=Us.of(a);return(h<0||Math.abs(m.height-this.height)>=Cb||Math.abs(h-this.heightMetrics(e,t).perLine)>=Cb)&&(e.heightChanged=!0),m}return(r||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class BW extends Us{constructor(e,t,r){super(e.length+t+r.length,e.height+r.height,t|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return 1&this.flags}blockAt(e,t,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,t,r,i):this.right.blockAt(e,t,s,i+this.left.length+this.break)}lineAt(e,t,r,i,s){let a=i+this.left.height,u=s+this.left.length+this.break,h=t==Gr.ByHeight?e<a:e<u,m=h?this.left.lineAt(e,t,r,i,s):this.right.lineAt(e,t,r,a,u);if(this.break||(h?m.to<u:m.from>u))return m;let v=t==Gr.ByPosNoHeight?Gr.ByPosNoHeight:Gr.ByPos;return h?m.join(this.right.lineAt(u,v,r,a,u)):this.left.lineAt(u,v,r,i,s).join(m)}forEachLine(e,t,r,i,s,a){let u=i+this.left.height,h=s+this.left.length+this.break;if(this.break)e<h&&this.left.forEachLine(e,t,r,i,s,a),t>=h&&this.right.forEachLine(e,t,r,u,h,a);else{let m=this.lineAt(h,Gr.ByPos,r,i,s);e<m.from&&this.left.forEachLine(e,m.from-1,r,i,s,a),m.to>=e&&m.from<=t&&a(m),t>m.to&&this.right.forEachLine(m.to+1,t,r,u,h,a)}}replace(e,t,r){let i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let a=s.length;for(let u of r)s.push(u);if(e>0&&xP(s,a-1),t<this.length){let u=s.length;this.decomposeRight(t,s),xP(s,u)}return Us.of(s)}decomposeLeft(e,t){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(r++,e>=r&&t.push(null)),e>r&&this.right.decomposeLeft(e-r,t)}decomposeRight(e,t){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<r&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Us.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,r=!1,i){let{left:s,right:a}=this,u=t+s.length+this.break,h=null;return i&&i.from<=t+s.length&&i.more?h=s=s.updateHeight(e,t,r,i):s.updateHeight(e,t,r),i&&i.from<=u+a.length&&i.more?h=a=a.updateHeight(e,u,r,i):a.updateHeight(e,u,r),h?this.balanced(s,a):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function xP(n,e){let t,r;null==n[e]&&(t=n[e-1])instanceof Ds&&(r=n[e+1])instanceof Ds&&n.splice(e-1,3,new Ds(t.length+1+r.length))}class gC{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let r=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof Ko?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new Ko(r-this.pos,-1)),this.writtenTo=r,t>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,r){if(e<t||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0;i<0&&(i=this.oracle.lineHeight);let s=t-e;r.block?this.addBlock(new wP(s,i,r.type)):(s||i>=5)&&this.addLineDeco(i,s)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Ko(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let r=new Ds(t-e);return this.oracle.doc.lineAt(e).to==t&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Ko)return e;let t=new Ko(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine(),e.type==zr.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=zr.WidgetBefore&&(this.covering=e)}addLineDeco(e,t){let r=this.ensureLine();r.length+=t,r.collapsed+=t,r.widgetHeight=Math.max(r.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}finish(e){let t=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||t instanceof Ko||this.isCovered?(this.writtenTo<this.pos||null==t)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new Ko(0,-1));let r=e;for(let i of this.nodes)i instanceof Ko&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,t,r,i){let s=new gC(r,e);return fi.spans(t,r,i,s,0),s.finish(r)}}class zW{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,r,i){(e<t||r&&r.heightRelevant||i&&i.heightRelevant)&&iC(e,t,this.changes,5)}}function jW(n,e){let t=n.getBoundingClientRect(),r=n.ownerDocument,i=r.defaultView||window,s=Math.max(0,t.left),a=Math.min(i.innerWidth,t.right),u=Math.max(0,t.top),h=Math.min(i.innerHeight,t.bottom);for(let m=n.parentNode;m&&m!=r.body;)if(1==m.nodeType){let v=m,x=window.getComputedStyle(v);if((v.scrollHeight>v.clientHeight||v.scrollWidth>v.clientWidth)&&"visible"!=x.overflow){let I=v.getBoundingClientRect();s=Math.max(s,I.left),a=Math.min(a,I.right),u=Math.max(u,I.top),h=m==n.parentNode?I.bottom:Math.min(h,I.bottom)}m="absolute"==x.position||"fixed"==x.position?v.offsetParent:v.parentNode}else{if(11!=m.nodeType)break;m=m.host}return{left:s-t.left,right:Math.max(s,a)-t.left,top:u-(t.top+e),bottom:Math.max(u,h)-(t.top+e)}}function UW(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class mC{constructor(e,t,r){this.from=e,this.to=t,this.size=r}static same(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=t[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e){return dn.replace({widget:new GW(this.size,e)}).range(this.from,this.to)}}class GW extends Lc{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class EP{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scaler=DP,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=pi.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(wb).some(r=>"function"!=typeof r&&"cm-lineWrapping"==r.class);this.heightOracle=new bP(t),this.stateDeco=e.facet(Nm).filter(r=>"function"!=typeof r),this.heightMap=Us.empty().applyChanges(this.stateDeco,Cr.empty,this.heightOracle.setDoc(e.doc),[new nl(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=dn.set(this.lineGaps.map(r=>r.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let r=0;r<=1;r++){let i=r?t.head:t.anchor;if(!e.some(({from:s,to:a})=>i>=s&&i<=a)){let{from:s,to:a}=this.lineBlockAt(i);e.push(new Sb(s,a))}}this.viewports=e.sort((r,i)=>r.from-i.from),this.scaler=this.heightMap.height<=7e6?DP:new qW(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(1==this.scaler.scale?e:Fm(e,this.scaler))})}update(e,t=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(Nm).filter(m=>"function"!=typeof m);let s=nl.extendWithRanges(e.changedRanges,function HW(n,e,t){let r=new zW;return fi.compare(n,e,t,r,0),r.changes}(r,this.stateDeco,e?e.changes:Xi.empty(this.state.doc.length))),a=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),this.heightMap.height!=a&&(e.flags|=2);let u=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<u.from||t.range.head>u.to)||!this.viewportIsAppropriate(u))&&(u=this.getViewport(0,t));let h=!e.changes.empty||2&e.flags||u.from!=this.viewport.from||u.to!=this.viewport.to;this.viewport=u,this.updateForViewport(),h&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(OR)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,r=window.getComputedStyle(t),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection="rtl"==r.direction?pi.RTL:pi.LTR;let a=this.heightOracle.mustRefreshForWrapping(s),u=t.getBoundingClientRect(),h=a||this.mustMeasureContent||this.contentDOMHeight!=u.height;this.contentDOMHeight=u.height,this.mustMeasureContent=!1;let m=0,v=0,x=parseInt(r.paddingTop)||0,I=parseInt(r.paddingBottom)||0;(this.paddingTop!=x||this.paddingBottom!=I)&&(this.paddingTop=x,this.paddingBottom=I,m|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(h=!0),this.editorWidth=e.scrollDOM.clientWidth,m|=8);let j=(this.printing?UW:jW)(t,this.paddingTop),Q=j.top-this.pixelViewport.top,oe=j.bottom-this.pixelViewport.bottom;this.pixelViewport=j;let ve=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(ve!=this.inView&&(this.inView=ve,ve&&(h=!0)),!this.inView&&!this.scrollTarget)return 0;let Pe=u.width;if((this.contentDOMWidth!=Pe||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=u.width,this.editorHeight=e.scrollDOM.clientHeight,m|=8),h){let Ge=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(Ge)&&(a=!0),a||i.lineWrapping&&Math.abs(Pe-this.contentDOMWidth)>i.charWidth){let{lineHeight:st,charWidth:_t,textHeight:Et}=e.docView.measureTextSize();a=st>0&&i.refresh(s,st,_t,Et,Pe/_t,Ge),a&&(e.docView.minWidth=0,m|=8)}Q>0&&oe>0?v=Math.max(Q,oe):Q<0&&oe<0&&(v=Math.min(Q,oe)),i.heightChanged=!1;for(let st of this.viewports){let _t=st.from==this.viewport.from?Ge:e.docView.measureVisibleLineHeights(st);this.heightMap=(a?Us.empty().applyChanges(this.stateDeco,Cr.empty,this.heightOracle,[new nl(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,a,new _P(st.from,_t))}i.heightChanged&&(m|=2)}let Ke=!this.viewportIsAppropriate(this.viewport,v)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return Ke&&(this.viewport=this.getViewport(v,this.scrollTarget)),this.updateForViewport(),(2&m||Ke)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(a?[]:this.lineGaps,e)),m|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),m}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:a,visibleBottom:u}=this,h=new Sb(i.lineAt(a-1e3*r,Gr.ByHeight,s,0,0).from,i.lineAt(u+1e3*(1-r),Gr.ByHeight,s,0,0).to);if(t){let{head:m}=t.range;if(m<h.from||m>h.to){let I,v=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),x=i.lineAt(m,Gr.ByPos,s,0,0);I="center"==t.y?(x.top+x.bottom)/2-v/2:"start"==t.y||"nearest"==t.y&&m<h.from?x.top:x.bottom-v,h=new Sb(i.lineAt(I-500,Gr.ByHeight,s,0,0).from,i.lineAt(I+v+500,Gr.ByHeight,s,0,0).to)}}return h}mapViewport(e,t){let r=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new Sb(this.heightMap.lineAt(r,Gr.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,Gr.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,Gr.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(t,Gr.ByPos,this.heightOracle,0,0),{visibleTop:a,visibleBottom:u}=this;return(0==e||i<=a-Math.max(10,Math.min(-r,250)))&&(t==this.state.doc.length||s>=u+Math.max(10,Math.min(r,250)))&&i>a-2e3&&s<u+2e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let r=[];for(let i of e)t.touchesRange(i.from,i.to)||r.push(new mC(t.mapPos(i.from),t.mapPos(i.to),i.size));return r}ensureLineGaps(e,t){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,a=i<<1;if(this.defaultTextDirection!=pi.LTR&&!r)return[];let u=[],h=(m,v,x,I)=>{if(v-m<s)return;let j=this.state.selection.main,Q=[j.from];j.empty||Q.push(j.to);for(let ve of Q)if(ve>m&&ve<v)return h(m,ve-10,x,I),void h(ve+10,v,x,I);let oe=function WW(n,e){for(let t of n)if(e(t))return t}(e,ve=>ve.from>=x.from&&ve.to<=x.to&&Math.abs(ve.from-m)<s&&Math.abs(ve.to-v)<s&&!Q.some(Pe=>ve.from<Pe&&ve.to>Pe));if(!oe){if(v<x.to&&t&&r&&t.visibleRanges.some(ve=>ve.from<=v&&ve.to>=v)){let ve=t.moveToLineBoundary(Ct.cursor(v),!1,!0).head;ve>m&&(v=ve)}oe=new mC(m,v,this.gapSize(x,m,v,I))}u.push(oe)};for(let m of this.viewportLines){if(m.length<a)continue;let v=$W(m.from,m.to,this.stateDeco);if(v.total<a)continue;let I,j,x=this.scrollTarget?this.scrollTarget.range.head:null;if(r){let oe,ve,Q=i/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=x){let Pe=Ab(v,x),Ke=((this.visibleBottom-this.visibleTop)/2+Q)/m.height;oe=Pe-Ke,ve=Pe+Ke}else oe=(this.visibleTop-m.top-Q)/m.height,ve=(this.visibleBottom-m.top+Q)/m.height;I=Mb(v,oe),j=Mb(v,ve)}else{let ve,Pe,Q=v.total*this.heightOracle.charWidth,oe=i*this.heightOracle.charWidth;if(null!=x){let Ke=Ab(v,x),Ge=((this.pixelViewport.right-this.pixelViewport.left)/2+oe)/Q;ve=Ke-Ge,Pe=Ke+Ge}else ve=(this.pixelViewport.left-oe)/Q,Pe=(this.pixelViewport.right+oe)/Q;I=Mb(v,ve),j=Mb(v,Pe)}I>m.from&&h(m.from,I,m,v),j<m.to&&h(j,m.to,m,v)}return u}gapSize(e,t,r,i){let s=Ab(i,r)-Ab(i,t);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){mC.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=dn.set(e.map(t=>t.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];fi.spans(e,this.viewport.from,this.viewport.to,{span(i,s){t.push({from:i,to:s})},point(){}},20);let r=t.length!=this.visibleRanges.length||this.visibleRanges.some((i,s)=>i.from!=t[s].from||i.to!=t[s].to);return this.visibleRanges=t,r?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Fm(this.heightMap.lineAt(e,Gr.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return Fm(this.heightMap.lineAt(this.scaler.fromDOM(e),Gr.ByHeight,this.heightOracle,0,0),this.scaler)}elementAtHeight(e){return Fm(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Sb{constructor(e,t){this.from=e,this.to=t}}function $W(n,e,t){let r=[],i=n,s=0;return fi.spans(t,n,e,{span(){},point(a,u){a>i&&(r.push({from:i,to:a}),s+=a-i),i=u}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function Mb({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let r=Math.floor(n*t);for(let i=0;;i++){let{from:s,to:a}=e[i],u=a-s;if(r<=u)return s+r;r-=u}}function Ab(n,e){let t=0;for(let{from:r,to:i}of n.ranges){if(e<=i){t+=e-r;break}t+=i-r}return t/n.total}const DP={toDOM:n=>n,fromDOM:n=>n,scale:1};class qW{constructor(e,t,r){let i=0,s=0,a=0;this.viewports=r.map(({from:u,to:h})=>{let m=t.lineAt(u,Gr.ByPos,e,0,0).top,v=t.lineAt(h,Gr.ByPos,e,0,0).bottom;return i+=v-m,{from:u,to:h,top:m,bottom:v,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(t.height-i);for(let u of this.viewports)u.domTop=a+(u.top-s)*this.scale,a=u.domBottom=u.domTop+(u.bottom-u.top),s=u.bottom}toDOM(e){for(let t=0,r=0,i=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let t=0,r=0,i=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}}function Fm(n,e){if(1==e.scale)return n;let t=e.toDOM(n.top),r=e.toDOM(n.bottom);return new Fc(n.from,n.length,t,r-t,Array.isArray(n.type)?n.type.map(i=>Fm(i,e)):n.type)}const Tb=ln.define({combine:n=>n.join(" ")}),vC=ln.define({combine:n=>n.indexOf(!0)>-1}),yC=Lu.newName(),CP=Lu.newName(),SP=Lu.newName(),MP={"&light":"."+CP,"&dark":"."+SP};function bC(n,e,t){return new Lu(e,{finish:r=>/&/.test(r)?r.replace(/&\w*/,i=>{if("&"==i)return n;if(!t||!t[i])throw new RangeError(`Unsupported selector: ${i}`);return t[i]}):n+" "+r})}const YW=bC("."+yC,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},MP);class XW{constructor(e,t,r,i){this.typeOver=i,this.bounds=null,this.text="";let{impreciseHead:s,impreciseAnchor:a}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,r,0))){let u=s||a?[]:function ZW(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:s}=n.observer.selectionRange;return t&&(e.push(new GR(t,r)),(i!=t||s!=r)&&e.push(new GR(i,s))),e}(e),h=new jR(u,e.state);h.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=h.text,this.newSel=function QW(n,e){if(0==n.length)return null;let t=n[0].pos,r=2==n.length?n[1].pos:t;return t>-1&&r>-1?Ct.single(t+e,r+e):null}(u,this.bounds.from)}else{let u=e.observer.selectionRange,h=s&&s.node==u.focusNode&&s.offset==u.focusOffset||!ip(e.contentDOM,u.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(u.focusNode,u.focusOffset),m=a&&a.node==u.anchorNode&&a.offset==u.anchorOffset||!ip(e.contentDOM,u.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(u.anchorNode,u.anchorOffset);this.newSel=Ct.single(m,h)}}}function AP(n,e){let t,{newSel:r}=e,i=n.state.selection.main;if(e.bounds){let{from:s,to:a}=e.bounds,u=i.from,h=null;(8===n.inputState.lastKeyCode&&n.inputState.lastKeyTime>Date.now()-100||un.android&&e.text.length<a-s)&&(u=i.to,h="end");let m=function KW(n,e,t,r){let i=Math.min(n.length,e.length),s=0;for(;s<i&&n.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&n.length==e.length)return null;let a=n.length,u=e.length;for(;a>0&&u>0&&n.charCodeAt(a-1)==e.charCodeAt(u-1);)a--,u--;return"end"==r&&(t-=a+Math.max(0,s-Math.min(a,u))-s),a<s&&n.length<e.length?(s-=t<=s&&t>=a?s-t:0,u=s+(u-a),a=s):u<s&&(s-=t<=s&&t>=u?s-t:0,a=s+(a-u),u=s),{from:s,toA:a,toB:u}}(n.state.doc.sliceString(s,a,"\uffff"),e.text,u-s,h);m&&(un.chrome&&13==n.inputState.lastKeyCode&&m.toB==m.from+2&&"\uffff\uffff"==e.text.slice(m.from,m.toB)&&m.toB--,t={from:s+m.from,to:s+m.toA,insert:Cr.of(e.text.slice(m.from,m.toB).split("\uffff"))})}else r&&(!n.hasFocus&&n.state.facet(_b)||r.main.eq(i))&&(r=null);if(!t&&!r)return!1;if(!t&&e.typeOver&&!i.empty&&r&&r.main.empty?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,i.to)}:t&&t.from>=i.from&&t.to<=i.to&&(t.from!=i.from||t.to!=i.to)&&i.to-i.from-(t.to-t.from)<=4?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,i.to))}:(un.mac||un.android)&&t&&t.from==t.to&&t.from==i.head-1&&/^\. ?$/.test(t.insert.toString())&&"off"==n.contentDOM.getAttribute("autocorrect")?(r&&2==t.insert.length&&(r=Ct.single(r.main.anchor-1,r.main.head-1)),t={from:i.from,to:i.to,insert:Cr.of([" "])}):un.chrome&&t&&t.from==t.to&&t.from==i.head&&"\n "==t.insert.toString()&&n.lineWrapping&&(r&&(r=Ct.single(r.main.anchor-1,r.main.head-1)),t={from:i.from,to:i.to,insert:Cr.of([" "])}),t){let s=n.state;if(un.ios&&n.inputState.flushIOSKey(n)||un.android&&(t.from==i.from&&t.to==i.to&&1==t.insert.length&&2==t.insert.lines&&ap(n.contentDOM,"Enter",13)||t.from==i.from-1&&t.to==i.to&&0==t.insert.length&&ap(n.contentDOM,"Backspace",8)||t.from==i.from&&t.to==i.to+1&&0==t.insert.length&&ap(n.contentDOM,"Delete",46)))return!0;let u,a=t.insert.toString();if(n.state.facet(TR).some(m=>m(n,t.from,t.to,a)))return!0;if(n.inputState.composing>=0&&n.inputState.composing++,t.from>=i.from&&t.to<=i.to&&t.to-t.from>=(i.to-i.from)/3&&(!r||r.main.empty&&r.main.from==t.from+t.insert.length)&&n.inputState.composing<0){let m=i.from<t.from?s.sliceDoc(i.from,t.from):"",v=i.to>t.to?s.sliceDoc(t.to,i.to):"";u=s.replaceSelection(n.state.toText(m+t.insert.sliceString(0,void 0,n.state.lineBreak)+v))}else{let m=s.changes(t),v=r&&r.main.to<=m.newLength?r.main:void 0;if(s.selection.ranges.length>1&&n.inputState.composing>=0&&t.to<=i.to&&t.to>=i.to-10){let x=n.state.sliceDoc(t.from,t.to),I=qR(n)||n.state.doc.lineAt(i.head),j=i.to-t.to,Q=i.to-i.from;u=s.changeByRange(oe=>{if(oe.from==i.from&&oe.to==i.to)return{changes:m,range:v||oe.map(m)};let ve=oe.to-j,Pe=ve-x.length;if(oe.to-oe.from!=Q||n.state.sliceDoc(Pe,ve)!=x||I&&oe.to>=I.from&&oe.from<=I.to)return{range:oe};let Ke=s.changes({from:Pe,to:ve,insert:t.insert}),Ge=oe.to-i.to;return{changes:Ke,range:v?Ct.range(Math.max(0,v.anchor+Ge),Math.max(0,v.head+Ge)):oe.map(Ke)}})}else u={changes:m,selection:v&&s.selection.replaceRange(v)}}let h="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,h+=".compose",n.inputState.compositionFirstChange&&(h+=".start",n.inputState.compositionFirstChange=!1)),n.dispatch(u,{scrollIntoView:!0,userEvent:h}),!0}if(r&&!r.main.eq(i)){let s=!1,a="select";return n.inputState.lastSelectionTime>Date.now()-50&&("select"==n.inputState.lastSelectionOrigin&&(s=!0),a=n.inputState.lastSelectionOrigin),n.dispatch({selection:r,scrollIntoView:s,userEvent:a}),!0}return!1}const JW={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},_C=un.ie&&un.ie_version<=11;class e6{constructor(e){this.view=e,this.active=!1,this.selectionRange=new Z$,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let r of t)this.queue.push(r);(un.ie&&un.ie_version<=11||un.ios&&e.composing)&&t.some(r=>"childList"==r.type&&r.removedNodes.length||"characterData"==r.type&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),_C&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver(()=>{var t;(null===(t=this.view.docView)||void 0===t?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(e.contentDOM)),this.addWindowListeners(this.win=e.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,r)=>t!=e[r]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(_b)?r.root.activeElement!=this.dom:!fb(r.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);s&&s.ignoreEvent(e)?t||(this.selectionChanged=!1):(un.ie&&un.ie_version<=11||un.android&&un.chrome)&&!r.state.selection.main.empty&&i.focusNode&&pb(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=un.safari&&11==e.root.nodeType&&function q$(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}(this.dom.ownerDocument)==this.dom&&function t6(n){let e=null;function t(h){h.preventDefault(),h.stopImmediatePropagation(),e=h.getTargetRanges()[0]}if(n.contentDOM.addEventListener("beforeinput",t,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",t,!0),!e)return null;let r=e.startContainer,i=e.startOffset,s=e.endContainer,a=e.endOffset,u=n.docView.domAtPos(n.state.selection.main.anchor);return pb(u.node,u.offset,s,a)&&([r,i,s,a]=[s,a,r,i]),{anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:a}}(this.view)||hb(e.root);if(!t||this.selectionRange.eq(t))return!1;let r=fb(this.dom,t);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&function J$(n,e){let t=e.focusNode,r=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=r)return!1;for(;;)if(r){if(1!=t.nodeType)return!1;let i=t.childNodes[r-1];"false"==i.contentEditable?r--:(t=i,r=Om(t))}else{if(t==n)return!0;r=gb(t),t=t.parentNode}}(this.dom,t)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(t),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let r=this.dom;r;)if(1==r.nodeType)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(r),r=r.assignedSlot||r.parentNode;else{if(11!=r.nodeType)break;r=r.host}if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=t)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,JW),_C&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),_C&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var r;this.delayedAndroidKey||(this.flushingAndroidKey=this.view.win.requestAnimationFrame(()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),!this.flush()&&s.force&&ap(this.dom,s.key,s.keyCode))})),(!this.delayedAndroidKey||"Enter"==e)&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!(null===(r=this.delayedAndroidKey)||void 0===r||!r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,r=-1,i=!1;for(let s of e){let a=this.readMutation(s);a&&(a.typeOver&&(i=!0),-1==t?({from:t,to:r}=a):(t=Math.min(a.from,t),r=Math.max(a.to,r)))}return{from:t,to:r,typeOver:i}}readChange(){let{from:e,to:t,typeOver:r}=this.processRecords(),i=this.selectionChanged&&fb(this.dom,this.selectionRange);return e<0&&!i?null:(e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new XW(this.view,e,t,r))}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return!1;let r=this.view.state,i=AP(this.view,t);return this.view.state==r&&this.view.update([]),i}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty("attributes"==e.type),"attributes"==e.type&&(t.dirty|=4),"childList"==e.type){let r=TP(t,e.previousSibling||e.target.previousSibling,-1),i=TP(t,e.nextSibling||e.target.nextSibling,1);return{from:r?t.posAfter(r):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}return"characterData"==e.type?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,t,r,i;this.stop(),null===(e=this.intersection)||void 0===e||e.disconnect(),null===(t=this.gapIntersection)||void 0===t||t.disconnect(),null===(r=this.resizeScroll)||void 0===r||r.disconnect(),null===(i=this.resizeContent)||void 0===i||i.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function TP(n,e,t){for(;e;){let r=Kr.get(e);if(r&&r.parent==n)return r;let i=e.parentNode;e=i!=n.dom?i:t>0?e.nextSibling:e.previousSibling}return null}let Rn=(()=>{class n{constructor(t={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=t.dispatch||(r=>this.update([r])),this.dispatch=this.dispatch.bind(this),this._root=t.root||function Q$(n){for(;n;){if(n&&(9==n.nodeType||11==n.nodeType&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}(t.parent)||document,this.viewState=new EP(t.state||ao.create(t)),this.plugins=this.state.facet(Pm).map(r=>new aC(r));for(let r of this.plugins)r.update(this);this.observer=new e6(this),this.inputState=new CW(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new $R(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),t.parent&&t.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...t){this._dispatch(1==t.length&&t[0]instanceof jl?t[0]:this.state.update(...t))}update(t){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let s,r=!1,i=!1,a=this.state;for(let j of t){if(j.startState!=a)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");a=j.state}if(this.destroyed)return void(this.viewState.state=a);let u=this.hasFocus,h=0,m=null;t.some(j=>j.annotation(gP))?(this.inputState.notifiedFocused=u,h=1):u!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=u,m=mP(a,u),m||(h=1));let v=this.observer.delayedAndroidKey,x=null;if(v?(this.observer.clearDelayedAndroidKey(),x=this.observer.readChange(),(x&&!this.state.doc.eq(a.doc)||!this.state.selection.eq(a.selection))&&(x=null)):this.observer.clear(),a.facet(ao.phrases)!=this.state.facet(ao.phrases))return this.setState(a);s=xb.create(this,a,t),s.flags|=h;let I=this.viewState.scrollTarget;try{this.updateState=2;for(let j of t){if(I&&(I=I.map(j.changes)),j.scrollIntoView){let{main:Q}=j.state.selection;I=new bb(Q.empty?Q:Ct.cursor(Q.head,Q.head>Q.anchor?-1:1))}for(let Q of j.effects)Q.is(RR)&&(I=Q.value)}this.viewState.update(s,I),this.bidiCache=kb.update(this.bidiCache,s.changes),s.empty||(this.updatePlugins(s),this.inputState.update(s)),r=this.docView.update(s),this.state.facet(Lm)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(t),this.docView.updateSelection(r,t.some(j=>j.isUserEvent("select.pointer")))}finally{this.updateState=0}if(s.startState.facet(Tb)!=s.state.facet(Tb)&&(this.viewState.mustMeasureContent=!0),(r||i||I||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!s.empty)for(let j of this.state.facet(oC))j(s);(m||x)&&Promise.resolve().then(()=>{m&&this.state==m.startState&&this.dispatch(m),x&&!AP(this,x)&&v.force&&ap(this.contentDOM,v.key,v.keyCode)})}setState(t){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=t);this.updateState=2;let r=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new EP(t),this.plugins=t.facet(Pm).map(i=>new aC(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView=new $R(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}r&&this.focus(),this.requestMeasure()}updatePlugins(t){let r=t.startState.facet(Pm),i=t.state.facet(Pm);if(r!=i){let s=[];for(let a of i){let u=r.indexOf(a);if(u<0)s.push(new aC(a));else{let h=this.plugins[u];h.mustUpdate=t,s.push(h)}}for(let a of this.plugins)a.mustUpdate!=t&&a.destroy(this);this.plugins=s,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let s of this.plugins)s.mustUpdate=t;for(let s=0;s<this.plugins.length;s++)this.plugins[s].update(this)}measure(t=!0){if(this.destroyed)return;this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,t&&this.observer.forceFlush();let r=null,{scrollHeight:i,scrollTop:s,clientHeight:a}=this.scrollDOM,u=s>i-a-4?i:s;try{for(let h=0;;h++){this.updateState=1;let m=this.viewport,v=this.viewState.lineBlockAtHeight(u),x=this.viewState.measure(this);if(!x&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(h>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let I=[];4&x||([this.measureRequests,I]=[I,this.measureRequests]);let j=I.map(Pe=>{try{return Pe.read(this)}catch(Ke){return Xo(this.state,Ke),kP}}),Q=xb.create(this,this.state,[]),oe=!1,ve=!1;Q.flags|=x,r?r.flags|=x:r=Q,this.updateState=2,Q.empty||(this.updatePlugins(Q),this.inputState.update(Q),this.updateAttrs(),oe=this.docView.update(Q));for(let Pe=0;Pe<I.length;Pe++)if(j[Pe]!=kP)try{let Ke=I[Pe];Ke.write&&Ke.write(j[Pe],this)}catch(Ke){Xo(this.state,Ke)}if(this.viewState.editorHeight)if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,ve=!0;else{let Pe=this.viewState.lineBlockAt(v.from).top-v.top;(Pe>1||Pe<-1)&&(this.scrollDOM.scrollTop+=Pe,ve=!0)}if(oe&&this.docView.updateSelection(!0),this.viewport.from==m.from&&this.viewport.to==m.to&&!ve&&0==this.measureRequests.length)break}}finally{this.updateState=0,this.measureScheduled=-1}if(r&&!r.empty)for(let h of this.state.facet(oC))h(r)}get themeClasses(){return yC+" "+(this.state.facet(vC)?SP:CP)+" "+this.state.facet(Tb)}updateAttrs(){let t=IP(this,PR,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),r={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(_b)?"true":"false",class:"cm-content",style:`${un.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(r["aria-readonly"]="true"),IP(this,wb,r);let i=this.observer.ignore(()=>{let s=rC(this.contentDOM,this.contentAttrs,r),a=rC(this.dom,this.editorAttrs,t);return s||a});return this.editorAttrs=t,this.contentAttrs=r,i}showAnnouncements(t){let r=!0;for(let i of t)for(let s of i.effects)s.is(n.announce)&&(r&&(this.announceDOM.textContent=""),r=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=s.value)}mountStyles(){this.styleModules=this.state.facet(Lm),Lu.mount(this.root,this.styleModules.concat(YW).reverse())}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(t){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),t){if(this.measureRequests.indexOf(t)>-1)return;if(null!=t.key)for(let r=0;r<this.measureRequests.length;r++)if(this.measureRequests[r].key===t.key)return void(this.measureRequests[r]=t);this.measureRequests.push(t)}}plugin(t){let r=this.pluginMap.get(t);return(void 0===r||r&&r.spec!=t)&&this.pluginMap.set(t,r=this.plugins.find(i=>i.spec==t)||null),r&&r.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(t){return this.readMeasured(),this.viewState.elementAtHeight(t)}lineBlockAtHeight(t){return this.readMeasured(),this.viewState.lineBlockAtHeight(t)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(t){return this.viewState.lineBlockAt(t)}get contentHeight(){return this.viewState.contentHeight}moveByChar(t,r,i){return hC(this,t,eP(this,t,r,i))}moveByGroup(t,r){return hC(this,t,eP(this,t,r,i=>function EW(n,e,t){let r=n.state.charCategorizer(e),i=r(t);return s=>{let a=r(s);return i==ii.Space&&(i=a),i==a}}(this,t.head,i)))}moveToLineBoundary(t,r,i=!0){return function xW(n,e,t,r){let i=n.state.doc.lineAt(e.head),s=r&&n.lineWrapping?n.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head):null;if(s){let h=n.dom.getBoundingClientRect(),m=n.textDirectionAt(i.from),v=n.posAtCoords({x:t==(m==pi.LTR)?h.right-1:h.left+1,y:(s.top+s.bottom)/2});if(null!=v)return Ct.cursor(v,t?-1:1)}let a=lo.find(n.docView,e.head);return Ct.cursor(a?t?a.posAtEnd:a.posAtStart:t?i.to:i.from,t?-1:1)}(this,t,r,i)}moveVertically(t,r,i){return hC(this,t,function DW(n,e,t,r){let i=e.head,s=t?1:-1;if(i==(t?n.state.doc.length:0))return Ct.cursor(i,e.assoc);let u,a=e.goalColumn,h=n.contentDOM.getBoundingClientRect(),m=n.coordsAtPos(i),v=n.documentTop;if(m)null==a&&(a=m.left-h.left),u=s<0?m.top:m.bottom;else{let j=n.viewState.lineBlockAt(i);null==a&&(a=Math.min(h.right-h.left,n.defaultCharacterWidth*(i-j.from))),u=(s<0?j.top:j.bottom)+v}let x=h.left+a,I=r??n.defaultLineHeight>>1;for(let j=0;;j+=10){let Q=u+(I+j)*s,oe=QR(n,{x,y:Q},!1,s);if(Q<h.top||Q>h.bottom||(s<0?oe<i:oe>i))return Ct.cursor(oe,e.assoc,void 0,a)}}(this,t,r,i))}domAtPos(t){return this.docView.domAtPos(t)}posAtDOM(t,r=0){return this.docView.posFromDOM(t,r)}posAtCoords(t,r=!0){return this.readMeasured(),QR(this,t,r)}coordsAtPos(t,r=1){this.readMeasured();let i=this.docView.coordsAt(t,r);if(!i||i.left==i.right)return i;let s=this.state.doc.lineAt(t),a=this.bidiSpans(s);return qD(i,a[lp.find(a,t-s.from,-1,r)].dir==pi.LTR==r>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(t){return!this.state.facet(IR)||t<this.viewport.from||t>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(t))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(t){if(t.length>n6)return VR(t.length);let r=this.textDirectionAt(t.from);for(let s of this.bidiCache)if(s.from==t.from&&s.dir==r)return s.order;let i=function BR(n,e){let t=n.length,r=e==lC?1:2,i=e==lC?2:1;if(!n||1==r&&!cW.test(n))return VR(t);for(let a=0,u=r,h=r;a<t;a++){let m=lW(n.charCodeAt(a));512==m?m=u:8==m&&4==h&&(m=16),gi[a]=4==m?2:m,7&m&&(h=m),u=m}for(let a=0,u=r,h=r;a<t;a++){let m=gi[a];if(128==m)a<t-1&&u==gi[a+1]&&24&u?m=gi[a]=u:gi[a]=256;else if(64==m){let v=a+1;for(;v<t&&64==gi[v];)v++;let x=a&&8==u||v<t&&8==gi[v]?1==h?1:8:256;for(let I=a;I<v;I++)gi[I]=x;a=v-1}else 8==m&&1==h&&(gi[a]=1);u=m,7&m&&(h=m)}for(let m,v,x,a=0,u=0,h=0;a<t;a++)if(v=cC[m=n.charCodeAt(a)])if(v<0){for(let I=u-3;I>=0;I-=3)if(Gl[I+1]==-v){let j=Gl[I+2],Q=2&j?r:4&j?1&j?i:r:0;Q&&(gi[a]=gi[Gl[I]]=Q),u=I;break}}else{if(189==Gl.length)break;Gl[u++]=a,Gl[u++]=m,Gl[u++]=h}else if(2==(x=gi[a])||1==x){let I=x==r;h=I?0:1;for(let j=u-3;j>=0;j-=3){let Q=Gl[j+2];if(2&Q)break;if(I)Gl[j+2]|=2;else{if(4&Q)break;Gl[j+2]|=4}}}for(let a=0;a<t;a++)if(256==gi[a]){let u=a+1;for(;u<t&&256==gi[u];)u++;let h=1==(a?gi[a-1]:r),v=h==(1==(u<t?gi[u]:r))?h?1:2:r;for(let x=a;x<u;x++)gi[x]=v;a=u-1}let s=[];if(1==r)for(let a=0;a<t;){let u=a,h=1!=gi[a++];for(;a<t&&h==(1!=gi[a]);)a++;if(h)for(let m=a;m>u;){let v=m,x=2!=gi[--m];for(;m>u&&x==(2!=gi[m-1]);)m--;s.push(new lp(m,v,x?2:1))}else s.push(new lp(u,a,0))}else for(let a=0;a<t;){let u=a,h=2==gi[a++];for(;a<t&&h==(2==gi[a]);)a++;s.push(new lp(u,a,h?1:2))}return s}(t.text,r);return this.bidiCache.push(new kb(t.from,t.to,r,i)),i}get hasFocus(){var t;return(this.dom.ownerDocument.hasFocus()||un.safari&&(null===(t=this.inputState)||void 0===t?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{oR(this.contentDOM),this.docView.updateSelection()})}setRoot(t){this._root!=t&&(this._root=t,this.observer.setWindow((9==t.nodeType?t:t.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let t of this.plugins)t.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(t,r={}){return RR.of(new bb("number"==typeof t?Ct.cursor(t):t,r.y,r.x,r.yMargin,r.xMargin))}static domEventHandlers(t){return wi.define(()=>({}),{eventHandlers:t})}static theme(t,r){let i=Lu.newName(),s=[Tb.of(i),Lm.of(bC(`.${i}`,t))];return r&&r.dark&&s.push(vC.of(!0)),s}static baseTheme(t){return hh.lowest(Lm.of(bC("."+yC,t,MP)))}static findFromDOM(t){var r;let i=t.querySelector(".cm-content");return(null===(r=(i&&Kr.get(i)||Kr.get(t))?.rootView)||void 0===r?void 0:r.view)||null}}return n.styleModule=Lm,n.inputHandler=TR,n.focusChangeEffect=kR,n.perLineTextDirection=IR,n.exceptionSink=AR,n.updateListener=oC,n.editable=_b,n.mouseSelectionStyle=MR,n.dragMovesSelection=SR,n.clickAddsSelectionRange=CR,n.decorations=Nm,n.atomicRanges=NR,n.scrollMargins=LR,n.darkTheme=vC,n.contentAttributes=wb,n.editorAttributes=PR,n.lineWrapping=n.contentAttributes.of({class:"cm-lineWrapping"}),n.announce=Qn.define(),n})();const n6=4096,kP={};class kb{constructor(e,t,r,i){this.from=e,this.to=t,this.dir=r,this.order=i}static update(e,t){if(t.empty)return e;let r=[],i=e.length?e[e.length-1].dir:pi.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let a=e[s];a.dir==i&&!t.touchesRange(a.from,a.to)&&r.push(new kb(t.mapPos(a.from,1),t.mapPos(a.to,-1),a.dir,a.order))}return r}}function IP(n,e,t){for(let r=n.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],a="function"==typeof s?s(n):s;a&&tC(a,t)}return t}const r6=un.mac?"mac":un.windows?"win":un.linux?"linux":"key";function Ib(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),!1!==t&&e.shiftKey&&(n="Shift-"+n),n}const Ob=ln.define({enables:hh.default(Rn.domEventHandlers({keydown:(n,e)=>PP(RP(e.state),n,e,"editor")}))}),OP=new WeakMap;function RP(n){let e=n.facet(Ob),t=OP.get(e);return t||OP.set(e,t=function l6(n,e=r6){let t=Object.create(null),r=Object.create(null),i=(a,u)=>{let h=r[a];if(null==h)r[a]=u;else if(h!=u)throw new Error("Key binding "+a+" is used both as a regular binding and as a multi-stroke prefix")},s=(a,u,h,m)=>{var v,x;let I=t[a]||(t[a]=Object.create(null)),j=u.split(/ (?!$)/).map(ve=>function i6(n,e){const t=n.split(/-(?!$)/);let i,s,a,u,r=t[t.length-1];"Space"==r&&(r=" ");for(let h=0;h<t.length-1;++h){const m=t[h];if(/^(cmd|meta|m)$/i.test(m))u=!0;else if(/^a(lt)?$/i.test(m))i=!0;else if(/^(c|ctrl|control)$/i.test(m))s=!0;else if(/^s(hift)?$/i.test(m))a=!0;else{if(!/^mod$/i.test(m))throw new Error("Unrecognized modifier name: "+m);"mac"==e?u=!0:s=!0}}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),u&&(r="Meta-"+r),a&&(r="Shift-"+r),r}(ve,e));for(let ve=1;ve<j.length;ve++){let Pe=j.slice(0,ve).join(" ");i(Pe,!0),I[Pe]||(I[Pe]={preventDefault:!0,run:[Ke=>{let Ge=zu={view:Ke,prefix:Pe,scope:a};return setTimeout(()=>{zu==Ge&&(zu=null)},4e3),!0}]})}let Q=j.join(" ");i(Q,!1);let oe=I[Q]||(I[Q]={preventDefault:!1,run:(null===(x=null===(v=I._any)||void 0===v?void 0:v.run)||void 0===x?void 0:x.slice())||[]});h&&oe.run.push(h),m&&(oe.preventDefault=!0)};for(let a of n){let u=a.scope?a.scope.split(" "):["editor"];if(a.any)for(let m of u){let v=t[m]||(t[m]=Object.create(null));v._any||(v._any={preventDefault:!1,run:[]});for(let x in v)v[x].run.push(a.any)}let h=a[e]||a.key;if(h)for(let m of u)s(m,h,a.run,a.preventDefault),a.shift&&s(m,"Shift-"+h,a.shift,a.preventDefault)}return t}(e.reduce((r,i)=>r.concat(i),[]))),t}let zu=null;function PP(n,e,t,r){let i=function W$(n){var t=!($$&&(n.ctrlKey||n.altKey||n.metaKey)||G$&&n.shiftKey&&n.key&&1==n.key.length||"Unidentified"==n.key)&&n.key||(n.shiftKey?km:Fu)[n.keyCode]||n.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(e),a=ga(ws(i,0))==i.length&&" "!=i,u="",h=!1;zu&&zu.view==t&&zu.scope==r&&(u=zu.prefix+" ",(h=nP.indexOf(e.keyCode)<0)&&(zu=null));let I,j,m=new Set,v=Q=>{if(Q){for(let oe of Q.run)if(!m.has(oe)&&(m.add(oe),oe(t,e)))return!0;Q.preventDefault&&(h=!0)}return!1},x=n[r];if(x){if(v(x[u+Ib(i,e,!a)]))return!0;if(a&&(e.altKey||e.metaKey||e.ctrlKey)&&!(un.windows&&e.ctrlKey&&e.altKey)&&(I=Fu[e.keyCode])&&I!=i){if(v(x[u+Ib(I,e,!0)]))return!0;if(e.shiftKey&&(j=km[e.keyCode])!=i&&j!=I&&v(x[u+Ib(j,e,!1)]))return!0}else if(a&&e.shiftKey&&v(x[u+Ib(i,e,!0)]))return!0;if(v(x._any))return!0}return h}class Bm{constructor(e,t,r,i,s){this.className=e,this.left=t,this.top=r,this.width=i,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className==this.className&&(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",null!=this.width&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,r){if(r.empty){let i=e.coordsAtPos(r.head,r.assoc||1);if(!i)return[];let s=NP(e);return[new Bm(t,i.left-s.left,i.top-s.top,null,i.bottom-i.top)]}return function c6(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let r=Math.max(t.from,n.viewport.from),i=Math.min(t.to,n.viewport.to),s=n.textDirection==pi.LTR,a=n.contentDOM,u=a.getBoundingClientRect(),h=NP(n),m=a.querySelector(".cm-line"),v=m&&window.getComputedStyle(m),x=u.left+(v?parseInt(v.paddingLeft)+Math.min(0,parseInt(v.textIndent)):0),I=u.right-(v?parseInt(v.paddingRight):0),j=FP(n,r),Q=FP(n,i),oe=j.type==zr.Text?j:null,ve=Q.type==zr.Text?Q:null;if(n.lineWrapping&&(oe&&(oe=LP(n,r,oe)),ve&&(ve=LP(n,i,ve))),oe&&ve&&oe.from==ve.from)return Ke(Ge(t.from,t.to,oe));{let _t=oe?Ge(t.from,null,oe):st(j,!1),Et=ve?Ge(null,t.to,ve):st(Q,!0),Kt=[];return(oe||j).to<(ve||Q).from-1?Kt.push(Pe(x,_t.bottom,I,Et.top)):_t.bottom<Et.top&&n.elementAtHeight((_t.bottom+Et.top)/2).type==zr.Text&&(_t.bottom=Et.top=(_t.bottom+Et.top)/2),Ke(_t).concat(Kt).concat(Ke(Et))}function Pe(_t,Et,Kt,or){return new Bm(e,_t-h.left,Et-h.top-.01,Kt-_t,or-Et+.01)}function Ke({top:_t,bottom:Et,horizontal:Kt}){let or=[];for(let Cn=0;Cn<Kt.length;Cn+=2)or.push(Pe(Kt[Cn],_t,Kt[Cn+1],Et));return or}function Ge(_t,Et,Kt){let or=1e9,Cn=-1e9,Mn=[];function Nr(Ss,Vi,Ut,on,an){let vn=n.coordsAtPos(Ss,Ss==Kt.to?-2:2),Jn=n.coordsAtPos(Ut,Ut==Kt.from?2:-2);or=Math.min(vn.top,Jn.top,or),Cn=Math.max(vn.bottom,Jn.bottom,Cn),an==pi.LTR?Mn.push(s&&Vi?x:vn.left,s&&on?I:Jn.right):Mn.push(!s&&on?x:Jn.left,!s&&Vi?I:vn.right)}let Zr=_t??Kt.from,oi=Et??Kt.to;for(let Ss of n.visibleRanges)if(Ss.to>Zr&&Ss.from<oi)for(let Vi=Math.max(Ss.from,Zr),Ut=Math.min(Ss.to,oi);;){let on=n.state.doc.lineAt(Vi);for(let an of n.bidiSpans(on)){let vn=an.from+on.from,Jn=an.to+on.from;if(vn>=Ut)break;Jn>Vi&&Nr(Math.max(vn,Vi),null==_t&&vn<=Zr,Math.min(Jn,Ut),null==Et&&Jn>=oi,an.dir)}if(Vi=on.to+1,Vi>=Ut)break}return 0==Mn.length&&Nr(Zr,null==_t,oi,null==Et,n.textDirection),{top:or,bottom:Cn,horizontal:Mn}}function st(_t,Et){let Kt=u.top+(Et?_t.top:_t.bottom);return{top:Kt,bottom:Kt,horizontal:[]}}}(e,t,r)}}function NP(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==pi.LTR?e.left:e.right-n.scrollDOM.clientWidth)-n.scrollDOM.scrollLeft,top:e.top-n.scrollDOM.scrollTop}}function LP(n,e,t){let r=Ct.cursor(e);return{from:Math.max(t.from,n.moveToLineBoundary(r,!1,!0).from),to:Math.min(t.to,n.moveToLineBoundary(r,!0,!0).from),type:zr.Text}}function FP(n,e){let t=n.lineBlockAt(e);if(Array.isArray(t.type))for(let r of t.type)if(r.to>e||r.to==e&&(r.to==t.to||r.type==zr.Text))return r;return t}class d6{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(Rb)!=e.state.facet(Rb)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&e.view.requestMeasure(this.measureReq)}setOrder(e){let t=0,r=e.facet(Rb);for(;t<r.length&&r[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}draw(e){if(e.length!=this.drawn.length||e.some((t,r)=>!function u6(n,e){return n.constructor==e.constructor&&n.eq(e)}(t,this.drawn[r]))){let t=this.dom.firstChild,r=0;for(let i of e)i.update&&t&&i.constructor&&this.drawn[r].constructor&&i.update(t,this.drawn[r])?(t=t.nextSibling,r++):this.dom.insertBefore(i.draw(),t);for(;t;){let i=t.nextSibling;t.remove(),t=i}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Rb=ln.define();function BP(n){return[wi.define(e=>new d6(e,n)),Rb.of(n)]}const VP=!un.ios,Vm=ln.define({combine:n=>tl(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})});function h6(n={}){return[Vm.of(n),f6,p6,g6,OR.of(!0)]}function HP(n){return n.startState.facet(Vm)!=n.state.facet(Vm)}const f6=BP({above:!0,markers(n){let{state:e}=n,t=e.facet(Vm),r=[];for(let i of e.selection.ranges){let s=i==e.selection.main;if(i.empty?!s||VP:t.drawRangeCursor){let a=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",u=i.empty?i:Ct.cursor(i.head,i.head>i.anchor?-1:1);for(let h of Bm.forRange(n,a,u))r.push(h)}}return r},update(n,e){n.transactions.some(r=>r.selection)&&(e.style.animationName="cm-blink"==e.style.animationName?"cm-blink2":"cm-blink");let t=HP(n);return t&&zP(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){zP(e.state,n)},class:"cm-cursorLayer"});function zP(n,e){e.style.animationDuration=n.facet(Vm).cursorBlinkRate+"ms"}const p6=BP({above:!1,markers:n=>n.state.selection.ranges.map(e=>e.empty?[]:Bm.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t)),update:(n,e)=>n.docChanged||n.selectionSet||n.viewportChanged||HP(n),class:"cm-selectionLayer"}),jP={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};VP&&(jP[".cm-line"].caretColor="transparent !important");const g6=hh.highest(Rn.theme(jP)),UP=Qn.define({map:(n,e)=>null==n?null:e.mapPos(n)}),Hm=Bi.define({create:()=>null,update:(n,e)=>(null!=n&&(n=e.changes.mapPos(n)),e.effects.reduce((t,r)=>r.is(UP)?r.value:t,n))}),m6=wi.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(Hm);null==t?null!=this.cursor&&(null===(e=this.cursor)||void 0===e||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(Hm)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let n=this.view.state.field(Hm),e=null!=n&&this.view.coordsAtPos(n);if(!e)return null;let t=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-t.left+this.view.scrollDOM.scrollLeft,top:e.top-t.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(n){this.cursor&&(n?(this.cursor.style.left=n.left+"px",this.cursor.style.top=n.top+"px",this.cursor.style.height=n.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(Hm)!=n&&this.view.dispatch({effects:UP.of(n)})}},{eventHandlers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function GP(n,e,t,r,i){e.lastIndex=0;for(let u,s=n.iterRange(t,r),a=t;!s.next().done;a+=s.value.length)if(!s.lineBreak)for(;u=e.exec(s.value);)i(a+u.index,u)}class wC{constructor(e){const{regexp:t,decoration:r,decorate:i,boundary:s,maxLength:a=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,i)this.addMatch=(u,h,m,v)=>i(v,m,m+u[0].length,u,h);else if("function"==typeof r)this.addMatch=(u,h,m,v)=>{let x=r(u,h,m);x&&v(m,m+u[0].length,x)};else{if(!r)throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.addMatch=(u,h,m,v)=>v(m,m+u[0].length,r)}this.boundary=s,this.maxLength=a}createDeco(e){let t=new Nu,r=t.add.bind(t);for(let{from:i,to:s}of function y6(n,e){let t=n.visibleRanges;if(1==t.length&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let r=[];for(let{from:i,to:s}of t)i=Math.max(n.state.doc.lineAt(i).from,i-e),s=Math.min(n.state.doc.lineAt(s).to,s+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=s:r.push({from:i,to:s});return r}(e,this.maxLength))GP(e.state.doc,this.regexp,i,s,(a,u)=>this.addMatch(u,e,a,r));return t.finish()}updateDeco(e,t){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((s,a,u,h)=>{h>e.view.viewport.from&&u<e.view.viewport.to&&(r=Math.min(u,r),i=Math.max(h,i))}),e.viewportChanged||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,t.map(e.changes),r,i):t}updateRange(e,t,r,i){for(let s of e.visibleRanges){let a=Math.max(s.from,r),u=Math.min(s.to,i);if(u>a){let h=e.state.doc.lineAt(a),m=h.to<u?e.state.doc.lineAt(u):h,v=Math.max(s.from,h.from),x=Math.min(s.to,m.to);if(this.boundary){for(;a>h.from;a--)if(this.boundary.test(h.text[a-1-h.from])){v=a;break}for(;u<m.to;u++)if(this.boundary.test(m.text[u-m.from])){x=u;break}}let j,I=[],Q=(oe,ve,Pe)=>I.push(Pe.range(oe,ve));if(h==m)for(this.regexp.lastIndex=v-h.from;(j=this.regexp.exec(h.text))&&j.index<x-h.from;)this.addMatch(j,e,j.index+h.from,Q);else GP(e.state.doc,this.regexp,v,x,(oe,ve)=>this.addMatch(ve,e,oe,Q));t=t.update({filterFrom:v,filterTo:x,filter:(oe,ve)=>oe<v||ve>x,add:I})}}return t}}const xC=null!=/x/.unicode?"gu":"g",b6=new RegExp("[\0-\b\n-\x1f\x7f-\x9f\xad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]",xC),_6={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let EC=null;const Pb=ln.define({combine(n){let e=tl(n,{render:null,specialChars:b6,addSpecialChars:null});return(e.replaceTabs=!function w6(){var n;if(null==EC&&typeof document<"u"&&document.body){let e=document.body.style;EC=null!=(null!==(n=e.tabSize)&&void 0!==n?n:e.MozTabSize)}return EC||!1}())&&(e.specialChars=new RegExp("\t|"+e.specialChars.source,xC)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,xC)),e}});function x6(n={}){return[Pb.of(n),$P||($P=wi.fromClass(class{constructor(n){this.view=n,this.decorations=dn.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(Pb)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new wC({regexp:n.specialChars,decoration:(e,t,r)=>{let{doc:i}=t.state,s=ws(e[0],0);if(9==s){let a=i.lineAt(r),u=t.state.tabSize,h=Tm(a.text,u,r-a.from);return dn.replace({widget:new M6((u-h%u)*this.view.defaultCharacterWidth)})}return this.decorationCache[s]||(this.decorationCache[s]=dn.replace({widget:new S6(n,s)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(Pb);n.startState.facet(Pb)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))]}let $P=null;class S6 extends Lc{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=function C6(n){return n>=32?"\u2022":10==n?"\u2424":String.fromCharCode(9216+n)}(this.code),r=e.state.phrase("Control character")+" "+(_6[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,t);if(i)return i;let s=document.createElement("span");return s.textContent=t,s.title=r,s.setAttribute("aria-label",r),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class M6 extends Lc{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="\t",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}const T6=dn.line({class:"cm-activeLine"}),k6=wi.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let r of n.state.selection.ranges){let i=n.lineBlockAt(r.head);i.from>e&&(t.push(T6.range(i.from)),e=i.from)}return dn.set(t)}},{decorations:n=>n.decorations});function qP(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),r=n.state.doc.lineAt(t),i=t-r.from,s=i>2e3?-1:i==r.length?function R6(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}(n,e.clientX):Tm(r.text,n.state.tabSize,t-r.from);return{line:r.number,col:s,off:i}}function N6(n){let e=n?.eventFilter||(t=>t.altKey&&0==t.button);return Rn.mouseSelectionStyle.of((t,r)=>e(r)?function P6(n,e){let t=qP(n,e),r=n.state.selection;return t?{update(i){if(i.docChanged){let s=i.changes.mapPos(i.startState.doc.line(t.line).from),a=i.state.doc.lineAt(s);t={line:a.number,col:t.col,off:Math.min(t.off,a.length)},r=r.map(i.changes)}},get(i,s,a){let u=qP(n,i);if(!u)return r;let h=function O6(n,e,t){let r=Math.min(e.line,t.line),i=Math.max(e.line,t.line),s=[];if(e.off>2e3||t.off>2e3||e.col<0||t.col<0){let a=Math.min(e.off,t.off),u=Math.max(e.off,t.off);for(let h=r;h<=i;h++){let m=n.doc.line(h);m.length<=u&&s.push(Ct.range(m.from+a,m.to+u))}}else{let a=Math.min(e.col,t.col),u=Math.max(e.col,t.col);for(let h=r;h<=i;h++){let m=n.doc.line(h),v=UD(m.text,a,n.tabSize,!0);if(v<0)s.push(Ct.cursor(m.to));else{let x=UD(m.text,u,n.tabSize);s.push(Ct.range(m.from+v,m.from+x))}}}return s}(n.state,t,u);return h.length?Ct.create(a?h.concat(r.ranges):h):r}}:null}(t,r):null)}const L6={Alt:[18,n=>n.altKey],Control:[17,n=>n.ctrlKey],Shift:[16,n=>n.shiftKey],Meta:[91,n=>n.metaKey]},F6={style:"cursor: crosshair"};function B6(n={}){let[e,t]=L6[n.key||"Alt"],r=wi.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventHandlers:{keydown(i){this.set(i.keyCode==e||t(i))},keyup(i){(i.keyCode==e||!t(i))&&this.set(!1)},mousemove(i){this.set(t(i))}}});return[r,Rn.contentAttributes.of(i=>{var s;return null!==(s=i.plugin(r))&&void 0!==s&&s.isDown?F6:null})]}const Nb="-10000px";class YP{constructor(e,t,r){this.facet=t,this.createTooltipView=r,this.input=e.state.facet(t),this.tooltips=this.input.filter(i=>i),this.tooltipViews=this.tooltips.map(r)}update(e){var t;let r=e.state.facet(this.facet),i=r.filter(a=>a);if(r===this.input){for(let a of this.tooltipViews)a.update&&a.update(e);return!1}let s=[];for(let a=0;a<i.length;a++){let u=i[a],h=-1;if(u){for(let m=0;m<this.tooltips.length;m++){let v=this.tooltips[m];v&&v.create==u.create&&(h=m)}if(h<0)s[a]=this.createTooltipView(u);else{let m=s[a]=this.tooltipViews[h];m.update&&m.update(e)}}}for(let a of this.tooltipViews)s.indexOf(a)<0&&(a.dom.remove(),null===(t=a.destroy)||void 0===t||t.call(a));return this.input=r,this.tooltips=i,this.tooltipViews=s,!0}}function V6(n){let{win:e}=n;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const Lb=ln.define({combine:n=>{var e,t,r;return{position:un.ios?"absolute":(null===(e=n.find(i=>i.position))||void 0===e?void 0:e.position)||"fixed",parent:(null===(t=n.find(i=>i.parent))||void 0===t?void 0:t.parent)||null,tooltipSpace:(null===(r=n.find(i=>i.tooltipSpace))||void 0===r?void 0:r.tooltipSpace)||V6}}}),XP=new WeakMap,CC=wi.fromClass(class{constructor(n){this.view=n,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(Lb);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new YP(n,Fb,t=>this.createTooltip(t)),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n);e&&this.observeIntersection();let t=e||n.geometryChanged,r=n.state.facet(Lb);if(r.position!=this.position){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;t=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n){let e=n.create(this.view);if(e.dom.classList.add("cm-tooltip"),n.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let t=document.createElement("div");t.className="cm-tooltip-arrow",e.dom.appendChild(t)}return e.dom.style.position=this.position,e.dom.style.top=Nb,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var n,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let t of this.manager.tooltipViews)t.dom.remove(),null===(n=t.destroy)||void 0===n||n.call(t);null===(e=this.intersectionObserver)||void 0===e||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=this.view.dom.getBoundingClientRect();return{editor:n,parent:this.parent?this.container.getBoundingClientRect():n,pos:this.manager.tooltips.map((e,t)=>{let r=this.manager.tooltipViews[t];return r.getCoords?r.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(Lb).tooltipSpace(this.view)}}writeMeasure(n){var e;let{editor:t,space:r}=n,i=[];for(let s=0;s<this.manager.tooltips.length;s++){let a=this.manager.tooltips[s],u=this.manager.tooltipViews[s],{dom:h}=u,m=n.pos[s],v=n.size[s];if(!m||m.bottom<=Math.max(t.top,r.top)||m.top>=Math.min(t.bottom,r.bottom)||m.right<Math.max(t.left,r.left)-.1||m.left>Math.min(t.right,r.right)+.1){h.style.top=Nb;continue}let x=a.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,I=x?7:0,j=v.right-v.left,Q=null!==(e=XP.get(u))&&void 0!==e?e:v.bottom-v.top,oe=u.offset||z6,ve=this.view.textDirection==pi.LTR,Pe=v.width>r.right-r.left?ve?r.left:r.right-v.width:ve?Math.min(m.left-(x?14:0)+oe.x,r.right-j):Math.max(r.left,m.left-j+(x?14:0)-oe.x),Ke=!!a.above;!a.strictSide&&(Ke?m.top-(v.bottom-v.top)-oe.y<r.top:m.bottom+(v.bottom-v.top)+oe.y>r.bottom)&&Ke==r.bottom-m.bottom>m.top-r.top&&(Ke=!Ke);let Ge=(Ke?m.top-r.top:r.bottom-m.bottom)-I;if(Ge<Q&&!1!==u.resize){if(Ge<this.view.defaultLineHeight){h.style.top=Nb;continue}XP.set(u,Q),h.style.height=(Q=Ge)+"px"}else h.style.height&&(h.style.height="");let st=Ke?m.top-Q-I-oe.y:m.bottom+I+oe.y,_t=Pe+j;if(!0!==u.overlap)for(let Et of i)Et.left<_t&&Et.right>Pe&&Et.top<st+Q&&Et.bottom>st&&(st=Ke?Et.top-Q-2-I:Et.bottom+I+2);"absolute"==this.position?(h.style.top=st-n.parent.top+"px",h.style.left=Pe-n.parent.left+"px"):(h.style.top=st+"px",h.style.left=Pe+"px"),x&&(x.style.left=m.left+(ve?oe.x:-oe.x)-(Pe+14-7)+"px"),!0!==u.overlap&&i.push({left:Pe,top:st,right:_t,bottom:st+Q}),h.classList.toggle("cm-tooltip-above",Ke),h.classList.toggle("cm-tooltip-below",!Ke),u.positioned&&u.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=Nb}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),z6={x:0,y:0},Fb=ln.define({enables:[CC,Rn.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}})]}),zm=ln.define();class SC{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new YP(e,zm,t=>this.createHostedView(t))}static create(e){return new SC(e)}createHostedView(e){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}}const j6=Fb.compute([zm],n=>{let e=n.facet(zm).filter(t=>t);return 0===e.length?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.filter(t=>null!=t.end).map(t=>t.end)),create:SC.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class U6{constructor(e,t,r,i,s){this.view=e,this.source=t,this.field=r,this.setHover=i,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,t=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(null==t)return;let r=this.view.coordsAtPos(t);if(null==r||e.y<r.top||e.y>r.bottom||e.x<r.left-this.view.defaultCharacterWidth||e.x>r.right+this.view.defaultCharacterWidth)return;let i=this.view.bidiSpans(this.view.state.doc.lineAt(t)).find(u=>u.from<=t&&u.to>=t),s=i&&i.dir==pi.RTL?-1:1,a=this.source(this.view,t,e.x<r.left?-s:s);if(a?.then){let u=this.pending={pos:t};a.then(h=>{this.pending==u&&(this.pending=null,h&&this.view.dispatch({effects:this.setHover.of(h)}))},h=>Xo(this.view.state,h,"hover tooltip"))}else a&&this.view.dispatch({effects:this.setHover.of(a)})}mousemove(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let r=this.active;if(r&&!KP(this.lastMove.target)||this.pending){let{pos:i}=r||this.pending,s=null!==(t=r?.end)&&void 0!==t?t:i;(i==s?this.view.posAtCoords(this.lastMove)!=i:!function G6(n,e,t,r,i,s){let a=document.createRange(),u=n.domAtPos(e),h=n.domAtPos(t);a.setEnd(h.node,h.offset),a.setStart(u.node,u.offset);let m=a.getClientRects();a.detach();for(let v=0;v<m.length;v++){let x=m[v];if(Math.max(x.top-i,i-x.bottom,x.left-r,r-x.right)<=s)return!0}return!1}(this.view,i,s,e.clientX,e.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!KP(e.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function KP(n){for(let e=n;e;e=e.parentNode)if(1==e.nodeType&&e.classList.contains("cm-tooltip"))return!0;return!1}function $6(n,e={}){let t=Qn.define(),r=Bi.define({create:()=>null,update(i,s){if(i&&(e.hideOnChange&&(s.docChanged||s.selection)||e.hideOn&&e.hideOn(s,i)))return null;if(i&&s.docChanged){let a=s.changes.mapPos(i.pos,-1,oo.TrackDel);if(null==a)return null;let u=Object.assign(Object.create(null),i);u.pos=a,null!=i.end&&(u.end=s.changes.mapPos(i.end)),i=u}for(let a of s.effects)a.is(t)&&(i=a.value),a.is(q6)&&(i=null);return i},provide:i=>zm.from(i)});return[r,wi.define(i=>new U6(i,n,r,t,e.hoverTime||300)),j6]}const q6=Qn.define(),MC=ln.define({combine(n){let e,t;for(let r of n)e=e||r.topContainer,t=t||r.bottomContainer;return{topContainer:e,bottomContainer:t}}});function jm(n,e){let t=n.plugin(ZP),r=t?t.specs.indexOf(e):-1;return r>-1?t.panels[r]:null}const ZP=wi.fromClass(class{constructor(n){this.input=n.state.facet(Um),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(MC);this.top=new Bb(n,!0,e.topContainer),this.bottom=new Bb(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(MC);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Bb(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Bb(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(Um);if(t!=this.input){let r=t.filter(h=>h),i=[],s=[],a=[],u=[];for(let h of r){let v,m=this.specs.indexOf(h);m<0?(v=h(n.view),u.push(v)):(v=this.panels[m],v.update&&v.update(n)),i.push(v),(v.top?s:a).push(v)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(a);for(let h of u)h.dom.classList.add("cm-panel"),h.mount&&h.mount()}else for(let r of this.panels)r.update&&r.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>Rn.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class Bb{constructor(e,t,r){this.view=e,this.top=t,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=QP(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=QP(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function QP(n){let e=n.nextSibling;return n.remove(),e}const Um=ln.define({enables:ZP});class $l extends fh{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}$l.prototype.elementClass="",$l.prototype.toDOM=void 0,$l.prototype.mapMode=oo.TrackBefore,$l.prototype.startSide=$l.prototype.endSide=-1,$l.prototype.point=!0;const Vb=ln.define(),Y6={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>fi.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Gm=ln.define();function JP(n){return[eN(),Gm.of(Object.assign(Object.assign({},Y6),n))]}const AC=ln.define({combine:n=>n.some(e=>e)});function eN(n){let e=[X6];return n&&!1===n.fixed&&e.push(AC.of(!0)),e}const X6=wi.fromClass(class{constructor(n){this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=n.state.facet(Gm).map(e=>new rN(n,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!n.state.facet(AC),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,r=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(r<.8*(t.to-t.from))}n.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(AC)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&this.dom.remove();let t=fi.iter(this.view.state.facet(Vb),this.view.viewport.from),r=[],i=this.gutters.map(s=>new K6(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks){let a;if(Array.isArray(s.type)){for(let u of s.type)if(u.type==zr.Text){a=u;break}}else a=s.type==zr.Text?s:void 0;if(a){r.length&&(r=[]),nN(t,r,s.from);for(let u of i)u.line(this.view,a,r)}}for(let s of i)s.finish();n&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(n){let e=n.startState.facet(Gm),t=n.state.facet(Gm),r=n.docChanged||n.heightChanged||n.viewportChanged||!fi.eq(n.startState.facet(Vb),n.state.facet(Vb),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let i of this.gutters)i.update(n)&&(r=!0);else{r=!0;let i=[];for(let s of t){let a=e.indexOf(s);a<0?i.push(new rN(this.view,s)):(this.gutters[a].update(n),i.push(this.gutters[a]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove()}},{provide:n=>Rn.scrollMargins.of(e=>{let t=e.plugin(n);return t&&0!=t.gutters.length&&t.fixed?e.textDirection==pi.LTR?{left:t.dom.offsetWidth}:{right:t.dom.offsetWidth}:null})});function tN(n){return Array.isArray(n)?n:[n]}function nN(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class K6{constructor(e,t,r){this.gutter=e,this.height=r,this.i=0,this.cursor=fi.iter(e.markers,t.from)}line(e,t,r){let i=[];nN(this.cursor,i,t.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,t,i);s&&i.unshift(s);let a=this.gutter;if(0==i.length&&!a.config.renderEmptyElements)return;let u=t.top-this.height;if(this.i==a.elements.length){let h=new iN(e,t.height,u,i);a.elements.push(h),a.dom.appendChild(h.dom)}else a.elements[this.i].update(e,t.height,u,i);this.height=t.bottom,this.i++}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class rN{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in t.domEventHandlers)this.dom.addEventListener(r,i=>{let a,s=i.target;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let h=s.getBoundingClientRect();a=(h.top+h.bottom)/2}else a=i.clientY;let u=e.lineBlockAtHeight(a-e.documentTop);t.domEventHandlers[r](e,u,i)&&i.preventDefault()});this.markers=tN(t.markers(e)),t.initialSpacer&&(this.spacer=new iN(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=tN(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!fi.eq(this.markers,t,r.from,r.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)}destroy(){for(let e of this.elements)e.destroy()}}class iN{constructor(e,t,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,r,i)}update(e,t,r,i){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),function Z6(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,t){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,a=0;;){let u=a,h=s<t.length?t[s++]:null,m=!1;if(h){let v=h.elementClass;v&&(r+=" "+v);for(let x=a;x<this.markers.length;x++)if(this.markers[x].compare(h)){u=x,m=!0;break}}else u=this.markers.length;for(;a<u;){let v=this.markers[a++];if(v.toDOM){v.destroy(i);let x=i.nextSibling;i.remove(),i=x}}if(!h)break;h.toDOM&&(m?i=i.nextSibling:this.dom.insertBefore(h.toDOM(e),i)),m&&a++}this.dom.className=r,this.markers=t}destroy(){this.setMarkers(null,[])}}const Q6=ln.define(),cp=ln.define({combine:n=>tl(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let r=Object.assign({},e);for(let i in t){let s=r[i],a=t[i];r[i]=s?(u,h,m)=>s(u,h,m)||a(u,h,m):a}return r}})});class TC extends $l{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function kC(n,e){return n.state.facet(cp).formatNumber(e,n.state)}const J6=Gm.compute([cp],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers:e=>e.state.facet(Q6),lineMarker:(e,t,r)=>r.some(i=>i.toDOM)?null:new TC(kC(e,e.state.doc.lineAt(t.from).number)),lineMarkerChange:e=>e.startState.facet(cp)!=e.state.facet(cp),initialSpacer:e=>new TC(kC(e,sN(e.state.doc.lines))),updateSpacer(e,t){let r=kC(t.view,sN(t.view.state.doc.lines));return r==e.number?e:new TC(r)},domEventHandlers:n.facet(cp).domEventHandlers}));function e9(n={}){return[cp.of(n),eN(),J6]}function sN(n){let e=9;for(;e<n;)e=10*e+9;return e}const t9=new class extends $l{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},n9=Vb.compute(["selection"],n=>{let e=[],t=-1;for(let r of n.selection.ranges){let i=n.doc.lineAt(r.head).from;i>t&&(t=i,e.push(t9.range(i)))}return fi.of(e)}),lN=1024;let a9=0;class ma{constructor(e,t){this.from=e,this.to=t}}class zn{constructor(e={}){this.id=a9++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=co.match(e)),t=>{let r=e(t);return void 0===r?null:[this,r]}}}zn.closedBy=new zn({deserialize:n=>n.split(" ")}),zn.openedBy=new zn({deserialize:n=>n.split(" ")}),zn.group=new zn({deserialize:n=>n.split(" ")}),zn.contextHash=new zn({perNode:!0}),zn.lookAhead=new zn({perNode:!0}),zn.mounted=new zn({perNode:!0});const c9=Object.create(null);class co{constructor(e,t,r,i=0){this.name=e,this.props=t,this.id=r,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):c9,i=new co(e.name||"",t,e.id,(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0));if(e.props)for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}return i}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(zn.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let i of r.split(" "))t[i]=e[r];return r=>{for(let i=r.prop(zn.group),s=-1;s<(i?i.length:0);s++){let a=t[s<0?r.name:i[s]];if(a)return a}}}}co.none=new co("",Object.create(null),0,8);class Hb{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let r of this.types){let i=null;for(let s of e){let a=s(r);a&&(i||(i=Object.assign({},r.props)),i[a[0].id]=a[1])}t.push(i?new co(r.name,i,r.id,r.flags):r)}return new Hb(t)}}const zb=new WeakMap,cN=new WeakMap;var si=(()=>{return(n=si||(si={}))[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays",si;var n})();class mi{constructor(e,t,r,i,s){if(this.type=e,this.children=t,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[a,u]of s)this.props["number"==typeof a?a:a.id]=u}}toString(){let e=this.prop(zn.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let r of this.children){let i=r.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new $m(this.topNode,e)}cursorAt(e,t=0,r=0){let i=zb.get(this)||this.topNode,s=new $m(i);return s.moveTo(e,t),zb.set(this,s._tree),s}get topNode(){return new va(this,0,0,null)}resolve(e,t=0){let r=up(zb.get(this)||this.topNode,e,t,!1);return zb.set(this,r),r}resolveInner(e,t=0){let r=up(cN.get(this)||this.topNode,e,t,!0);return cN.set(this,r),r}iterate(e){let{enter:t,leave:r,from:i=0,to:s=this.length}=e;for(let a=this.cursor((e.mode||0)|si.IncludeAnonymous);;){let u=!1;if(a.from<=s&&a.to>=i&&(a.type.isAnonymous||!1!==t(a))){if(a.firstChild())continue;u=!0}for(;u&&r&&!a.type.isAnonymous&&r(a),!a.nextSibling();){if(!a.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:RC(co.none,this.children,this.positions,0,this.children.length,0,this.length,(t,r,i)=>new mi(this.type,t,r,i,this.propValues),e.makeTree||((t,r,i)=>new mi(co.none,t,r,i)))}static build(e){return function d9(n){var e;let{buffer:t,nodeSet:r,maxBufferLength:i=lN,reused:s=[],minRepeatType:a=r.types.length}=n,u=Array.isArray(t)?new IC(t,t.length):t,h=r.types,m=0,v=0;function x(st,_t,Et,Kt,or){let{id:Cn,start:Mn,end:Nr,size:Zr}=u,oi=v;for(;Zr<0;){if(u.next(),-1==Zr)return Et.push(s[Cn]),void Kt.push(Mn-st);if(-3==Zr)return void(m=Cn);if(-4==Zr)return void(v=Cn);throw new RangeError(`Unrecognized record size: ${Zr}`)}let Vi,Ut,Ss=h[Cn],on=Mn-st;if(Nr-Mn<=i&&(Ut=function oe(st,_t){let Et=u.fork(),Kt=0,or=0,Cn=0,Mn=Et.end-i,Nr={size:0,start:0,skip:0};e:for(let Zr=Et.pos-st;Et.pos>Zr;){let oi=Et.size;if(Et.id==_t&&oi>=0){Nr.size=Kt,Nr.start=or,Nr.skip=Cn,Cn+=4,Kt+=4,Et.next();continue}let Ss=Et.pos-oi;if(oi<0||Ss<Zr||Et.start<Mn)break;let Vi=Et.id>=a?4:0,Ut=Et.start;for(Et.next();Et.pos>Ss;){if(Et.size<0){if(-3!=Et.size)break e;Vi+=4}else Et.id>=a&&(Vi+=4);Et.next()}or=Ut,Kt+=oi,Cn+=Vi}return(_t<0||Kt==st)&&(Nr.size=Kt,Nr.start=or,Nr.skip=Cn),Nr.size>4?Nr:void 0}(u.pos-_t,or))){let an=new Uint16Array(Ut.size-Ut.skip),vn=u.pos-Ut.size,Jn=an.length;for(;u.pos>vn;)Jn=ve(Ut.start,an,Jn);Vi=new vh(an,Nr-Ut.start,r),on=Ut.start-st}else{let an=u.pos-Zr;u.next();let vn=[],Jn=[],as=Cn>=a?Cn:-1,Hi=0,ta=Nr;for(;u.pos>an;)as>=0&&u.id==as&&u.size>=0?(u.end<=ta-i&&(j(vn,Jn,Mn,Hi,u.end,ta,as,oi),Hi=vn.length,ta=u.end),u.next()):x(Mn,an,vn,Jn,as);if(as>=0&&Hi>0&&Hi<vn.length&&j(vn,Jn,Mn,Hi,Mn,ta,as,oi),vn.reverse(),Jn.reverse(),as>-1&&Hi>0){let Wr=function I(st){return(_t,Et,Kt)=>{let Mn,Nr,or=0,Cn=_t.length-1;if(Cn>=0&&(Mn=_t[Cn])instanceof mi){if(!Cn&&Mn.type==st&&Mn.length==Kt)return Mn;(Nr=Mn.prop(zn.lookAhead))&&(or=Et[Cn]+Mn.length+Nr)}return Q(st,_t,Et,Kt,or)}}(Ss);Vi=RC(Ss,vn,Jn,0,vn.length,0,Nr-Mn,Wr,Wr)}else Vi=Q(Ss,vn,Jn,Nr-Mn,oi-Nr)}Et.push(Vi),Kt.push(on)}function j(st,_t,Et,Kt,or,Cn,Mn,Nr){let Zr=[],oi=[];for(;st.length>Kt;)Zr.push(st.pop()),oi.push(_t.pop()+Et-or);st.push(Q(r.types[Mn],Zr,oi,Cn-or,Nr-Cn)),_t.push(or-Et)}function Q(st,_t,Et,Kt,or=0,Cn){if(m){let Mn=[zn.contextHash,m];Cn=Cn?[Mn].concat(Cn):[Mn]}if(or>25){let Mn=[zn.lookAhead,or];Cn=Cn?[Mn].concat(Cn):[Mn]}return new mi(st,_t,Et,Kt,Cn)}function ve(st,_t,Et){let{id:Kt,start:or,end:Cn,size:Mn}=u;if(u.next(),Mn>=0&&Kt<a){let Nr=Et;if(Mn>4){let Zr=u.pos-(Mn-4);for(;u.pos>Zr;)Et=ve(st,_t,Et)}_t[--Et]=Nr,_t[--Et]=Cn-st,_t[--Et]=or-st,_t[--Et]=Kt}else-3==Mn?m=Kt:-4==Mn&&(v=Kt);return Et}let Pe=[],Ke=[];for(;u.pos>0;)x(n.start||0,n.bufferStart||0,Pe,Ke,-1);let Ge=null!==(e=n.length)&&void 0!==e?e:Pe.length?Ke[0]+Pe[0].length:0;return new mi(h[n.topID],Pe.reverse(),Ke.reverse(),Ge)}(e)}}mi.empty=new mi(co.none,[],[],0);class IC{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new IC(this.buffer,this.index)}}class vh{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return co.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let r=this.buffer[e+3],i=this.set.types[this.buffer[e]],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),r==(e+=4))return s;let a=[];for(;e<r;)a.push(this.childString(e)),e=this.buffer[e+3];return s+"("+a.join(",")+")"}findChild(e,t,r,i,s){let{buffer:a}=this,u=-1;for(let h=e;h!=t&&!(uN(s,i,a[h+1],a[h+2])&&(u=h,r>0));h=a[h+3]);return u}slice(e,t,r){let i=this.buffer,s=new Uint16Array(t-e),a=0;for(let u=e,h=0;u<t;){s[h++]=i[u++],s[h++]=i[u++]-r;let m=s[h++]=i[u++]-r;s[h++]=i[u++]-e,a=Math.max(a,m)}return new vh(s,a,this.set)}}function uN(n,e,t,r){switch(n){case-2:return t<e;case-1:return r>=e&&t<e;case 0:return t<e&&r>e;case 1:return t<=e&&r>e;case 2:return r>e;case 4:return!0}}function dN(n,e){let t=n.childBefore(e);for(;t;){let r=t.lastChild;if(!r||r.to!=t.to)break;r.type.isError&&r.from==r.to?(n=t,t=r.prevSibling):t=r}return n}function up(n,e,t,r){for(var i;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let a=!r&&n instanceof va&&n.index<0?null:n.parent;if(!a)return n;n=a}let s=r?0:si.IgnoreOverlays;if(r)for(let a=n,u=a.parent;u;a=u,u=a.parent)a instanceof va&&a.index<0&&(null===(i=u.enter(e,t,s))||void 0===i?void 0:i.from)!=a.from&&(n=u);for(;;){let a=n.enter(e,t,s);if(!a)return n;n=a}}class va{constructor(e,t,r,i){this._tree=e,this.from=t,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,i,s=0){for(let a=this;;){for(let{children:u,positions:h}=a._tree,m=t>0?u.length:-1;e!=m;e+=t){let v=u[e],x=h[e]+a.from;if(uN(i,r,x,x+v.length))if(v instanceof vh){if(s&si.ExcludeBuffers)continue;let I=v.findChild(0,v.buffer.length,t,r-x,i);if(I>-1)return new Wl(new u9(a,v,e,x),null,I)}else if(s&si.IncludeAnonymous||!v.type.isAnonymous||OC(v)){let I;if(!(s&si.IgnoreMounts)&&v.props&&(I=v.prop(zn.mounted))&&!I.overlay)return new va(I.tree,x,e,a);let j=new va(v,x,e,a);return s&si.IncludeAnonymous||!j.type.isAnonymous?j:j.nextChild(t<0?v.children.length-1:0,t,r,i)}}if(s&si.IncludeAnonymous||!a.type.isAnonymous||(e=a.index>=0?a.index+t:t<0?-1:a._parent._tree.children.length,a=a._parent,!a))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,r=0){let i;if(!(r&si.IgnoreOverlays)&&(i=this._tree.prop(zn.mounted))&&i.overlay){let s=e-this.from;for(let{from:a,to:u}of i.overlay)if((t>0?a<=s:a<s)&&(t<0?u>=s:u>s))return new va(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new $m(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return up(this,e,t,!1)}resolveInner(e,t=0){return up(this,e,t,!0)}enterUnfinishedNodesBefore(e){return dN(this,e)}getChild(e,t=null,r=null){let i=jb(this,e,t,r);return i.length?i[0]:null}getChildren(e,t=null,r=null){return jb(this,e,t,r)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return Ub(this,e)}}function jb(n,e,t,r){let i=n.cursor(),s=[];if(!i.firstChild())return s;if(null!=t)for(;!i.type.is(t);)if(!i.nextSibling())return s;for(;;){if(null!=r&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return null==r?s:[]}}function Ub(n,e,t=e.length-1){for(let r=n.parent;t>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[t]&&e[t]!=r.name)return!1;t--}}return!0}class u9{constructor(e,t,r,i){this.parent=e,this.buffer=t,this.index=r,this.start=i}}class Wl{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,r){this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,t,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,r);return s<0?null:new Wl(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,r=0){if(r&si.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new Wl(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Wl(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Wl(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new $m(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];return s>i&&(e.push(r.slice(i,s,r.buffer[this.index+1])),t.push(0)),new mi(this.type,e,t,this.to-this.from)}resolve(e,t=0){return up(this,e,t,!1)}resolveInner(e,t=0){return up(this,e,t,!0)}enterUnfinishedNodesBefore(e){return dN(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,r=null){let i=jb(this,e,t,r);return i.length?i[0]:null}getChildren(e,t=null,r=null){return jb(this,e,t,r)}get node(){return this}matchContext(e){return Ub(this,e)}}class $m{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof va)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return!!e&&(e instanceof va?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,r);return!(s<0)&&(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?!(r&si.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&si.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&si.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{let i=t.buffer[this.index+3];if(i<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:r}=i)}else({index:t,_parent:r}=this._tree);for(;r;({index:t,_parent:r}=r))if(t>-1)for(let s=t+e,a=e<0?-1:r._tree.children.length;s!=a;s+=e){let u=r._tree.children[s];if(this.mode&si.IncludeAnonymous||u instanceof vh||!u.type.isAnonymous||OC(u))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let a=e;a;a=a._parent)if(a.index==i){if(i==this.index)return a;t=a,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)t=new Wl(this.buffer,t,this.stack[i]);return this.bufferNode=new Wl(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let i=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;i&&t&&t(this),i=this.type.isAnonymous,!this.nextSibling();){if(!r)return;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return Ub(this.node,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return Ub(this.node,e,i);let a=r[t.buffer[this.stack[s]]];if(!a.isAnonymous){if(e[i]&&e[i]!=a.name)return!1;i--}}return!0}}function OC(n){return n.children.some(e=>e instanceof vh||!e.type.isAnonymous||OC(e))}const hN=new WeakMap;function Gb(n,e){if(!n.isAnonymous||e instanceof vh||e.type!=n)return 1;let t=hN.get(e);if(null==t){t=1;for(let r of e.children){if(r.type!=n||!(r instanceof mi)){t=1;break}t+=Gb(n,r)}hN.set(e,t)}return t}function RC(n,e,t,r,i,s,a,u,h){let m=0;for(let Q=r;Q<i;Q++)m+=Gb(n,e[Q]);let v=Math.ceil(1.5*m/8),x=[],I=[];return function j(Q,oe,ve,Pe,Ke){for(let Ge=ve;Ge<Pe;){let st=Ge,_t=oe[Ge],Et=Gb(n,Q[Ge]);for(Ge++;Ge<Pe;Ge++){let Kt=Gb(n,Q[Ge]);if(Et+Kt>=v)break;Et+=Kt}if(Ge==st+1){if(Et>v){let Kt=Q[st];j(Kt.children,Kt.positions,0,Kt.children.length,oe[st]+Ke);continue}x.push(Q[st])}else x.push(RC(n,Q,oe,st,Ge,_t,oe[Ge-1]+Q[Ge-1].length-_t,null,h));I.push(_t+Ke-s)}}(e,t,r,i,0),(u||h)(x,I,a)}class Bc{constructor(e,t,r,i,s=!1,a=!1){this.from=e,this.to=t,this.tree=r,this.offset=i,this.open=(s?1:0)|(a?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(e,t=[],r=!1){let i=[new Bc(0,e.length,e,0,!1,r)];for(let s of t)s.to>e.length&&i.push(s);return i}static applyChanges(e,t,r=128){if(!t.length)return e;let i=[],s=1,a=e.length?e[0]:null;for(let u=0,h=0,m=0;;u++){let v=u<t.length?t[u]:null,x=v?v.fromA:1e9;if(x-h>=r)for(;a&&a.from<x;){let I=a;if(h>=I.from||x<=I.to||m){let j=Math.max(I.from,h)-m,Q=Math.min(I.to,x)-m;I=j>=Q?null:new Bc(j,Q,I.tree,I.offset+m,u>0,!!v)}if(I&&i.push(I),a.to>x)break;a=s<e.length?e[s++]:null}if(!v)break;h=v.toA,m=v.toA-v.toB}return i}}class fN{startParse(e,t,r){return"string"==typeof e&&(e=new h9(e)),r=r?r.length?r.map(i=>new ma(i.from,i.to)):[new ma(0,0)]:[new ma(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let i=this.startParse(e,t,r);for(;;){let s=i.advance();if(s)return s}}}class h9{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new zn({perNode:!0});class $b{constructor(e,t,r,i,s,a,u,h,m,v=0,x){this.p=e,this.stack=t,this.state=r,this.reducePos=i,this.pos=s,this.score=a,this.buffer=u,this.bufferBase=h,this.curContext=m,this.lookAhead=v,this.parent=x}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,r=0){let i=e.parser.context;return new $b(e,[],t,r,r,0,[],0,i?new bN(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let r=e>>19,i=65535&e,{parser:s}=this.p,a=s.dynamicPrecedence(i);if(a&&(this.score+=a),0==r)return this.pushState(s.getGoto(this.state,i,!0),this.reducePos),i<s.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,4,!0),void this.reduceContext(i,this.reducePos);let u=this.stack.length-3*(r-1)-(262144&e?6:0),h=u?this.stack[u-2]:this.p.ranges[0].from,m=this.reducePos-h;m>=2e3&&(null===(t=this.p.parser.nodeSet.types[i])||void 0===t||!t.isAnonymous)&&(h==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=m):this.p.lastBigReductionSize<m&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=h,this.p.lastBigReductionSize=m));let x=this.bufferBase+this.buffer.length-(u?this.stack[u-1]:0);if(i<s.minRepeatTerm||131072&e){let I=s.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,h,I,x+4,!0)}for(this.state=262144&e?this.stack[u]:s.getGoto(this.stack[u-3],i,!0);this.stack.length>u;)this.stack.pop();this.reduceContext(i,h)}storeNode(e,t,r,i=4,s=!1){if(0==e&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let a=this,u=this.buffer.length;if(0==u&&a.parent&&(u=a.bufferBase-a.parent.bufferBase,a=a.parent),u>0&&0==a.buffer[u-4]&&a.buffer[u-1]>-1){if(t==r)return;if(a.buffer[u-2]>=t)return void(a.buffer[u-2]=r)}}if(s&&this.pos!=r){let a=this.buffer.length;if(a>0&&0!=this.buffer[a-4])for(;a>0&&this.buffer[a-2]>r;)this.buffer[a]=this.buffer[a-4],this.buffer[a+1]=this.buffer[a-3],this.buffer[a+2]=this.buffer[a-2],this.buffer[a+3]=this.buffer[a-1],a-=4,i>4&&(i-=4);this.buffer[a]=e,this.buffer[a+1]=t,this.buffer[a+2]=r,this.buffer[a+3]=i}else this.buffer.push(e,t,r,i)}shift(e,t,r){let i=this.pos;if(131072&e)this.pushState(65535&e,this.pos);else if(262144&e)this.pos=r,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,r,4);else{let s=e,{parser:a}=this.p;(r>this.pos||t<=a.maxNode)&&(this.pos=r,a.stateFlag(s,1)||(this.reducePos=r)),this.pushState(s,i),this.shiftContext(t,i),t<=a.maxNode&&this.buffer.push(t,i,r,4)}}apply(e,t,r){65536&e?this.reduce(e):this.shift(e,t,r)}useNode(e,t){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(t,i),this.buffer.push(r,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let r=e.buffer.slice(t),i=e.bufferBase+t;for(;e&&i==e.bufferBase;)e=e.parent;return new $b(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,r?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new b9(this);;){let r=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(0==r)return!1;if(!(65536&r))return!0;t.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let i=[];for(let a,s=0;s<t.length;s+=2)(a=t[s+1])!=this.state&&this.p.parser.hasAction(a,e)&&i.push(t[s],a);if(this.stack.length<120)for(let s=0;i.length<8&&s<t.length;s+=2){let a=t[s+1];i.some((u,h)=>1&h&&u==a)||i.push(t[s],a)}t=i}let r=[];for(let i=0;i<t.length&&r.length<4;i+=2){let s=t[i+1];if(s==this.state)continue;let a=this.split();a.pushState(s,this.pos),a.storeNode(0,a.pos,a.pos,4,!0),a.shiftContext(t[i],this.pos),a.score-=200,r.push(a)}return r}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if(!(65536&e))return!1;let{parser:t}=this.p;if(!t.validAction(this.state,e)){let s=this.stack.length-3*(e>>19);if(s<0||t.getGoto(this.stack[s],65535&e,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:e}=this.p;return 65535==e.data[e.stateSlot(this.state,1)]&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||-3!=this.buffer[e])&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||-4!=this.buffer[e])&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new bN(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class bN{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class b9{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=65535&e,r=e>>19;0==r?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(r-1);let i=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=i}}class Wb{constructor(e,t,r){this.stack=e,this.pos=t,this.index=r,this.buffer=e.buffer,0==this.index&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new Wb(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;null!=e&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new Wb(this.stack,this.pos,this.index)}}function Wm(n,e=Uint16Array){if("string"!=typeof n)return n;let t=null;for(let r=0,i=0;r<n.length;){let s=0;for(;;){let a=n.charCodeAt(r++),u=!1;if(126==a){s=65535;break}a>=92&&a--,a>=34&&a--;let h=a-32;if(h>=46&&(h-=46,u=!0),s+=h,u)break;s*=46}t?t[i++]=s:t=new e(s)}return t}class qb{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const _N=new qb;class _9{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=_N,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let r=this.range,i=this.rangeIndex,s=this.pos+e;for(;s<r.from;){if(!i)return null;let a=this.ranges[--i];s-=r.from-a.to,r=a}for(;t<0?s>r.to:s>=r.to;){if(i==this.ranges.length-1)return null;let a=this.ranges[++i];s+=a.from-r.to,r=a}return s}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let r,i,t=this.chunkOff+e;if(t>=0&&t<this.chunk.length)r=this.pos+e,i=this.chunk.charCodeAt(t);else{let s=this.resolveOffset(e,1);if(null==s)return-1;if(r=s,r>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let a=this.rangeIndex,u=this.range;for(;u.to<=r;)u=this.ranges[++a];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>u.to&&(this.chunk2=this.chunk2.slice(0,u.to-r)),i=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),i}acceptToken(e,t=0){let r=t?this.resolveOffset(t,-1):this.pos;if(null==r||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos);this.chunk=this.pos+e.length>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.next=this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?-1:this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=_N,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let r="";for(let i of this.ranges){if(i.from>=t)break;i.to>e&&(r+=this.input.read(Math.max(i.from,e),Math.min(i.to,t)))}return r}}class dp{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:r}=t.p;!function wN(n,e,t,r,i,s){let a=0,u=1<<r,{dialect:h}=t.p.parser;e:for(;u&n[a];){let m=n[a+1];for(let j=a+3;j<m;j+=2)if((n[j+1]&u)>0){let Q=n[j];if(h.allows(Q)&&(-1==e.token.value||e.token.value==Q||x9(Q,e.token.value,i,s))){e.acceptToken(Q);break}}let v=e.next,x=0,I=n[a+2];if(!(e.next<0&&I>x&&65535==n[m+3*I-3]&&65535==n[m+3*I-3])){for(;x<I;){let j=x+I>>1,Q=m+j+(j<<1);if(v<n[Q])I=j;else{if(!(v>=(n[Q+1]||65536))){a=n[Q+2],e.advance();continue e}x=j+1}}break}a=n[m+3*I-1]}}(this.data,e,t,this.id,r.data,r.tokenPrecTable)}}function xN(n,e,t){for(let i,r=e;65535!=(i=n[r]);r++)if(i==t)return r-e;return-1}function x9(n,e,t,r){let i=xN(t,r,e);return i<0||xN(t,r,n)<i}dp.prototype.contextual=dp.prototype.fallback=dp.prototype.extend=!1,dp.prototype.fallback=dp.prototype.extend=!1;const rl=typeof process<"u"&&process.env&&/\bparse\b/.test(process.env.LOG);let NC=null;function EN(n,e,t){let r=n.cursor(si.IncludeAnonymous);for(r.moveTo(e);;)if(!(t<0?r.childBefore(e):r.childAfter(e)))for(;;){if((t<0?r.to<e:r.from>e)&&!r.type.isError)return t<0?Math.max(0,Math.min(r.to-1,e-25)):Math.min(n.length,Math.max(r.from+1,e+25));if(t<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return t<0?0:n.length}}class E9{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?EN(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?EN(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let r=this.trees[t],i=this.index[t];if(i==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=r.children[i],a=this.start[t]+r.positions[i];if(a>e)return this.nextStart=a,null;if(s instanceof mi){if(a==e){if(a<this.safeFrom)return null;let u=a+s.length;if(u<=this.safeTo){let h=s.prop(zn.lookAhead);if(!h||u+h<this.fragment.to)return s}}this.index[t]++,a+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(a),this.index.push(0))}else this.index[t]++,this.nextStart=a+s.length}}}class D9{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(r=>new qb)}getActions(e){let t=0,r=null,{parser:i}=e.p,{tokenizers:s}=i,a=i.stateSlot(e.state,3),u=e.curContext?e.curContext.hash:0,h=0;for(let m=0;m<s.length;m++){if(!(1<<m&a))continue;let v=s[m],x=this.tokens[m];if((!r||v.fallback)&&((v.contextual||x.start!=e.pos||x.mask!=a||x.context!=u)&&(this.updateCachedToken(x,v,e),x.mask=a,x.context=u),x.lookAhead>x.end+25&&(h=Math.max(x.lookAhead,h)),0!=x.value)){let I=t;if(x.extended>-1&&(t=this.addActions(e,x.extended,x.end,t)),t=this.addActions(e,x.value,x.end,t),!v.extend&&(r=x,t>I))break}}for(;this.actions.length>t;)this.actions.pop();return h&&e.setLookAhead(h),!r&&e.pos==this.stream.end&&(r=new qb,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,t=this.addActions(e,r.value,r.end,t)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new qb,{pos:r,p:i}=e;return t.start=r,t.end=Math.min(r+1,i.stream.end),t.value=r==i.stream.end?i.parser.eofTerm:0,t}updateCachedToken(e,t,r){let i=this.stream.clipPos(r.pos);if(t.token(this.stream.reset(i,e),r),e.value>-1){let{parser:s}=r.p;for(let a=0;a<s.specialized.length;a++)if(s.specialized[a]==e.value){let u=s.specializers[a](this.stream.read(e.start,e.end),r);if(u>=0&&r.p.parser.dialect.allows(u>>1)){1&u?e.extended=u>>1:e.value=u>>1;break}}}else e.value=0,e.end=this.stream.clipPos(i+1)}putAction(e,t,r,i){for(let s=0;s<i;s+=3)if(this.actions[s]==e)return i;return this.actions[i++]=e,this.actions[i++]=t,this.actions[i++]=r,i}addActions(e,t,r,i){let{state:s}=e,{parser:a}=e.p,{data:u}=a;for(let h=0;h<2;h++)for(let m=a.stateSlot(s,h?2:1);;m+=3){if(65535==u[m]){if(1!=u[m+1]){0==i&&2==u[m+1]&&(i=this.putAction(Vc(u,m+2),t,r,i));break}m=Vc(u,m+2)}u[m]==t&&(i=this.putAction(Vc(u,m+1),t,r,i))}return i}}class C9{constructor(e,t,r,i){this.parser=e,this.input=t,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new _9(t,i),this.tokens=new D9(e,this.stream),this.topTerm=e.top[1];let{from:s}=i[0];this.stacks=[$b.start(this,e.top[0],s)],this.fragments=r.length&&this.stream.end-s>4*e.bufferLength?new E9(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let i,s,e=this.stacks,t=this.minStackPos,r=this.stacks=[];if(this.bigReductionCount>300&&1==e.length){let[a]=e;for(;a.forceReduce()&&a.stack.length&&a.stack[a.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let a=0;a<e.length;a++){let u=e[a];for(;;){if(this.tokens.mainToken=null,u.pos>t)r.push(u);else{if(this.advanceStack(u,r,e))continue;{i||(i=[],s=[]),i.push(u);let h=this.tokens.getMainToken(u);s.push(h.value,h.end)}}break}}if(!r.length){let a=i&&function M9(n){let e=null;for(let t of n){let r=t.p.stoppedAt;(t.pos==t.p.stream.end||null!=r&&t.pos>r)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}(i);if(a)return this.stackToTree(a);if(this.parser.strict)throw rl&&i&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&i){let a=null!=this.stoppedAt&&i[0].pos>this.stoppedAt?i[0]:this.runRecovery(i,s,r);if(a)return this.stackToTree(a.forceAll())}if(this.recovering){let a=1==this.recovering?1:3*this.recovering;if(r.length>a)for(r.sort((u,h)=>h.score-u.score);r.length>a;)r.pop();r.some(u=>u.reducePos>t)&&this.recovering--}else if(r.length>1){e:for(let a=0;a<r.length-1;a++){let u=r[a];for(let h=a+1;h<r.length;h++){let m=r[h];if(u.sameState(m)||u.buffer.length>500&&m.buffer.length>500){if(!((u.score-m.score||u.buffer.length-m.buffer.length)>0)){r.splice(a--,1);continue e}r.splice(h--,1)}}}r.length>12&&r.splice(12,r.length-12)}this.minStackPos=r[0].pos;for(let a=1;a<r.length;a++)r[a].pos<this.minStackPos&&(this.minStackPos=r[a].pos);return null}stopAt(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,r){let i=e.pos,{parser:s}=this,a=rl?this.stackID(e)+" -> ":"";if(null!=this.stoppedAt&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let m=e.curContext&&e.curContext.tracker.strict,v=m?e.curContext.hash:0;for(let x=this.fragments.nodeAt(i);x;){let I=this.parser.nodeSet.types[x.type.id]==x.type?s.getGoto(e.state,x.type.id):-1;if(I>-1&&x.length&&(!m||(x.prop(zn.contextHash)||0)==v))return e.useNode(x,I),rl&&console.log(a+this.stackID(e)+` (via reuse of ${s.getName(x.type.id)})`),!0;if(!(x instanceof mi)||0==x.children.length||x.positions[0]>0)break;let j=x.children[0];if(!(j instanceof mi&&0==x.positions[0]))break;x=j}}let u=s.stateSlot(e.state,4);if(u>0)return e.reduce(u),rl&&console.log(a+this.stackID(e)+` (via always-reduce ${s.getName(65535&u)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let h=this.tokens.getActions(e);for(let m=0;m<h.length;){let v=h[m++],x=h[m++],I=h[m++],j=m==h.length||!r,Q=j?e:e.split();if(Q.apply(v,x,I),rl&&console.log(a+this.stackID(Q)+` (via ${65536&v?`reduce of ${s.getName(65535&v)}`:"shift"} for ${s.getName(x)} @ ${i}${Q==e?"":", split"})`),j)return!0;Q.pos>i?t.push(Q):r.push(Q)}return!1}advanceFully(e,t){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return DN(e,t),!0}}runRecovery(e,t,r){let i=null,s=!1;for(let a=0;a<e.length;a++){let u=e[a],h=t[a<<1],m=t[1+(a<<1)],v=rl?this.stackID(u)+" -> ":"";if(u.deadEnd&&(s||(s=!0,u.restart(),rl&&console.log(v+this.stackID(u)+" (restarted)"),this.advanceFully(u,r))))continue;let x=u.split(),I=v;for(let j=0;x.forceReduce()&&j<10&&(rl&&console.log(I+this.stackID(x)+" (via force-reduce)"),!this.advanceFully(x,r));j++)rl&&(I=this.stackID(x)+" -> ");for(let j of u.recoverByInsert(h))rl&&console.log(v+this.stackID(j)+" (via recover-insert)"),this.advanceFully(j,r);this.stream.end>u.pos?(m==u.pos&&(m++,h=0),u.recoverByDelete(h,m),rl&&console.log(v+this.stackID(u)+` (via recover-delete ${this.parser.getName(h)})`),DN(u,r)):(!i||i.score<u.score)&&(i=u)}return i}stackToTree(e){return e.close(),mi.build({buffer:Wb.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(NC||(NC=new WeakMap)).get(e);return t||NC.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function DN(n,e){for(let t=0;t<e.length;t++){let r=e[t];if(r.pos==n.pos&&r.sameState(n))return void(e[t].score<n.score&&(e[t]=n))}e.push(n)}class S9{constructor(e,t,r){this.source=e,this.flags=t,this.disabled=r}allows(e){return!this.disabled||0==this.disabled[e]}}class Yb extends fN{constructor(e){if(super(),this.wrappers=[],14!=e.version)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let u=0;u<e.repeatNodeCount;u++)t.push("");let r=Object.keys(e.topRules).map(u=>e.topRules[u][1]),i=[];for(let u=0;u<t.length;u++)i.push([]);function s(u,h,m){i[u].push([h,h.deserialize(String(m))])}if(e.nodeProps)for(let u of e.nodeProps){let h=u[0];"string"==typeof h&&(h=zn[h]);for(let m=1;m<u.length;){let v=u[m++];if(v>=0)s(v,h,u[m++]);else{let x=u[m+-v];for(let I=-v;I>0;I--)s(u[m++],h,x);m++}}}this.nodeSet=new Hb(t.map((u,h)=>co.define({name:h>=this.minRepeatTerm?void 0:u,id:h,props:i[h],top:r.indexOf(h)>-1,error:0==h,skipped:e.skippedNodes&&e.skippedNodes.indexOf(h)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=lN;let a=Wm(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let u=0;u<this.specializerSpecs.length;u++)this.specialized[u]=this.specializerSpecs[u].term;this.specializers=this.specializerSpecs.map(CN),this.states=Wm(e.states,Uint32Array),this.data=Wm(e.stateData),this.goto=Wm(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(u=>"number"==typeof u?new dp(a,u):u),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,r){let i=new C9(this,e,t,r);for(let s of this.wrappers)i=s(i,e,t,r);return i}getGoto(e,t,r=!1){let i=this.goto;if(t>=i[0])return-1;for(let s=i[t+1];;){let a=i[s++],u=1&a,h=i[s++];if(u&&r)return h;for(let m=s+(a>>1);s<m;s++)if(i[s]==e)return h;if(u)return-1}}hasAction(e,t){let r=this.data;for(let i=0;i<2;i++)for(let a,s=this.stateSlot(e,i?2:1);;s+=3){if(65535==(a=r[s])){if(1!=r[s+1]){if(2==r[s+1])return Vc(r,s+2);break}a=r[s=Vc(r,s+2)]}if(a==t||0==a)return Vc(r,s+1)}return 0}stateSlot(e,t){return this.states[6*e+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){if(t==this.stateSlot(e,4))return!0;for(let r=this.stateSlot(e,1);;r+=3){if(65535==this.data[r]){if(1!=this.data[r+1])return!1;r=Vc(this.data,r+2)}if(t==Vc(this.data,r+1))return!0}}nextStates(e){let t=[];for(let r=this.stateSlot(e,1);;r+=3){if(65535==this.data[r]){if(1!=this.data[r+1])break;r=Vc(this.data,r+2)}if(!(1&this.data[r+2])){let i=this.data[r+1];t.some((s,a)=>1&a&&s==i)||t.push(this.data[r],i)}}return t}configure(e){let t=Object.assign(Object.create(Yb.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=r}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(r=>{let i=e.tokenizers.find(s=>s.from==r);return i?i.to:r})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((r,i)=>{let s=e.specializers.find(u=>u.from==r.external);if(!s)return r;let a=Object.assign(Object.assign({},r),{external:s.to});return t.specializers[i]=CN(a),a})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),null!=e.strict&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),null!=e.bufferLength&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return null==t?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),r=t.map(()=>!1);if(e)for(let s of e.split(" ")){let a=t.indexOf(s);a>=0&&(r[a]=!0)}let i=null;for(let s=0;s<t.length;s++)if(!r[s])for(let u,a=this.dialects[t[s]];65535!=(u=this.data[a++]);)(i||(i=new Uint8Array(this.maxTerm+1)))[u]=1;return new S9(e,r,i)}static deserialize(e){return new Yb(e)}}function Vc(n,e){return n[e]|n[e+1]<<16}function CN(n){if(n.external){let e=n.extend?1:0;return(t,r)=>n.external(t,r)<<1|e}return n.get}let A9=0;class ql{constructor(e,t,r){this.set=e,this.base=t,this.modified=r,this.id=A9++}static define(e){if(e?.base)throw new Error("Can not derive from a modified tag");let t=new ql([],null,[]);if(t.set.push(t),e)for(let r of e.set)t.set.push(r);return t}static defineModifier(){let e=new Xb;return t=>t.modified.indexOf(e)>-1?t:Xb.get(t.base||t,t.modified.concat(e).sort((r,i)=>r.id-i.id))}}let T9=0;class Xb{constructor(){this.instances=[],this.id=T9++}static get(e,t){if(!t.length)return e;let r=t[0].instances.find(u=>u.base==e&&function k9(n,e){return n.length==e.length&&n.every((t,r)=>t==e[r])}(t,u.modified));if(r)return r;let i=[],s=new ql(i,e,t);for(let u of t)u.instances.push(s);let a=function I9(n){let e=[[]];for(let t=0;t<n.length;t++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(n[t]));return e.sort((t,r)=>r.length-t.length)}(t);for(let u of e.set)if(!u.modified.length)for(let h of a)i.push(Xb.get(u,h));return s}}function SN(n){let e=Object.create(null);for(let t in n){let r=n[t];Array.isArray(r)||(r=[r]);for(let i of t.split(" "))if(i){let s=[],a=2,u=i;for(let x=0;;){if("..."==u&&x>0&&x+3==i.length){a=1;break}let I=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(u);if(!I)throw new RangeError("Invalid path: "+i);if(s.push("*"==I[0]?"":'"'==I[0][0]?JSON.parse(I[0]):I[0]),x+=I[0].length,x==i.length)break;let j=i[x++];if(x==i.length&&"!"==j){a=0;break}if("/"!=j)throw new RangeError("Invalid path: "+i);u=i.slice(x)}let h=s.length-1,m=s[h];if(!m)throw new RangeError("Invalid path: "+i);let v=new Kb(r,a,h>0?s.slice(0,h):null);e[m]=v.sort(e[m])}}return MN.add(e)}const MN=new zn;class Kb{constructor(e,t,r,i){this.tags=e,this.mode=t,this.context=r,this.next=i}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function AN(n,e){let t=Object.create(null);for(let s of n)if(Array.isArray(s.tag))for(let a of s.tag)t[a.id]=s.class;else t[s.tag.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let a=i;for(let u of s)for(let h of u.set){let m=t[h.id];if(m){a=a?a+" "+m:m;break}}return a},scope:r}}function R9(n,e,t,r=0,i=n.length){let s=new P9(r,Array.isArray(e)?e:[e],t);s.highlightRange(n.cursor(),r,i,"",s.highlighters),s.flush(i)}Kb.empty=new Kb([],2,null);class P9{constructor(e,t,r){this.at=e,this.highlighters=t,this.span=r,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,r,i,s){let{type:a,from:u,to:h}=e;if(u>=r||h<=t)return;a.isTop&&(s=this.highlighters.filter(j=>!j.scope||j.scope(a)));let m=i,v=function N9(n){let e=n.type.prop(MN);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}(e)||Kb.empty,x=function O9(n,e){let t=null;for(let r of n){let i=r.style(e);i&&(t=t?t+" "+i:i)}return t}(s,v.tags);if(x&&(m&&(m+=" "),m+=x,1==v.mode&&(i+=(i?" ":"")+x)),this.startSpan(e.from,m),v.opaque)return;let I=e.tree&&e.tree.prop(zn.mounted);if(I&&I.overlay){let j=e.node.enter(I.overlay[0].from+u,1),Q=this.highlighters.filter(ve=>!ve.scope||ve.scope(I.tree.type)),oe=e.firstChild();for(let ve=0,Pe=u;;ve++){let Ke=ve<I.overlay.length?I.overlay[ve]:null,Ge=Ke?Ke.from+u:h,st=Math.max(t,Pe),_t=Math.min(r,Ge);if(st<_t&&oe)for(;e.from<_t&&(this.highlightRange(e,st,_t,i,s),this.startSpan(Math.min(_t,e.to),m),!(e.to>=Ge)&&e.nextSibling()););if(!Ke||Ge>r)break;Pe=Ke.to+u,Pe>t&&(this.highlightRange(j.cursor(),Math.max(t,Ke.from+u),Math.min(r,Pe),i,Q),this.startSpan(Pe,m))}oe&&e.parent()}else if(e.firstChild()){do{if(!(e.to<=t)){if(e.from>=r)break;this.highlightRange(e,t,r,i,s),this.startSpan(Math.min(r,e.to),m)}}while(e.nextSibling());e.parent()}}}const $t=ql.define,Zb=$t(),ju=$t(),TN=$t(ju),kN=$t(ju),Uu=$t(),Qb=$t(Uu),FC=$t(Uu),Yl=$t(),yh=$t(Yl),Xl=$t(),Kl=$t(),BC=$t(),qm=$t(BC),Jb=$t(),ze={comment:Zb,lineComment:$t(Zb),blockComment:$t(Zb),docComment:$t(Zb),name:ju,variableName:$t(ju),typeName:TN,tagName:$t(TN),propertyName:kN,attributeName:$t(kN),className:$t(ju),labelName:$t(ju),namespace:$t(ju),macroName:$t(ju),literal:Uu,string:Qb,docString:$t(Qb),character:$t(Qb),attributeValue:$t(Qb),number:FC,integer:$t(FC),float:$t(FC),bool:$t(Uu),regexp:$t(Uu),escape:$t(Uu),color:$t(Uu),url:$t(Uu),keyword:Xl,self:$t(Xl),null:$t(Xl),atom:$t(Xl),unit:$t(Xl),modifier:$t(Xl),operatorKeyword:$t(Xl),controlKeyword:$t(Xl),definitionKeyword:$t(Xl),moduleKeyword:$t(Xl),operator:Kl,derefOperator:$t(Kl),arithmeticOperator:$t(Kl),logicOperator:$t(Kl),bitwiseOperator:$t(Kl),compareOperator:$t(Kl),updateOperator:$t(Kl),definitionOperator:$t(Kl),typeOperator:$t(Kl),controlOperator:$t(Kl),punctuation:BC,separator:$t(BC),bracket:qm,angleBracket:$t(qm),squareBracket:$t(qm),paren:$t(qm),brace:$t(qm),content:Yl,heading:yh,heading1:$t(yh),heading2:$t(yh),heading3:$t(yh),heading4:$t(yh),heading5:$t(yh),heading6:$t(yh),contentSeparator:$t(Yl),list:$t(Yl),quote:$t(Yl),emphasis:$t(Yl),strong:$t(Yl),link:$t(Yl),monospace:$t(Yl),strikethrough:$t(Yl),inserted:$t(),deleted:$t(),changed:$t(),invalid:$t(),meta:Jb,documentMeta:$t(Jb),annotation:$t(Jb),processingInstruction:$t(Jb),definition:ql.defineModifier(),constant:ql.defineModifier(),function:ql.defineModifier(),standard:ql.defineModifier(),local:ql.defineModifier(),special:ql.defineModifier()},L9=(AN([{tag:ze.link,class:"tok-link"},{tag:ze.heading,class:"tok-heading"},{tag:ze.emphasis,class:"tok-emphasis"},{tag:ze.strong,class:"tok-strong"},{tag:ze.keyword,class:"tok-keyword"},{tag:ze.atom,class:"tok-atom"},{tag:ze.bool,class:"tok-bool"},{tag:ze.url,class:"tok-url"},{tag:ze.labelName,class:"tok-labelName"},{tag:ze.inserted,class:"tok-inserted"},{tag:ze.deleted,class:"tok-deleted"},{tag:ze.literal,class:"tok-literal"},{tag:ze.string,class:"tok-string"},{tag:ze.number,class:"tok-number"},{tag:[ze.regexp,ze.escape,ze.special(ze.string)],class:"tok-string2"},{tag:ze.variableName,class:"tok-variableName"},{tag:ze.local(ze.variableName),class:"tok-variableName tok-local"},{tag:ze.definition(ze.variableName),class:"tok-variableName tok-definition"},{tag:ze.special(ze.variableName),class:"tok-variableName2"},{tag:ze.definition(ze.propertyName),class:"tok-propertyName tok-definition"},{tag:ze.typeName,class:"tok-typeName"},{tag:ze.namespace,class:"tok-namespace"},{tag:ze.className,class:"tok-className"},{tag:ze.macroName,class:"tok-macroName"},{tag:ze.propertyName,class:"tok-propertyName"},{tag:ze.operator,class:"tok-operator"},{tag:ze.comment,class:"tok-comment"},{tag:ze.meta,class:"tok-meta"},{tag:ze.invalid,class:"tok-invalid"},{tag:ze.punctuation,class:"tok-punctuation"}]),SN({String:ze.string,Number:ze.number,"True False":ze.bool,PropertyName:ze.propertyName,Null:ze.null,",":ze.separator,"[ ]":ze.squareBracket,"{ }":ze.brace})),F9=Yb.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#CjOOQO'#Cp'#CpQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CrOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59U,59UO!iQPO,59UOVQPO,59QOqQPO'#CkO!nQPO,59^OOQO1G.k1G.kOVQPO'#ClO!vQPO,59aOOQO1G.p1G.pOOQO1G.l1G.lOOQO,59V,59VOOQO-E6i-E6iOOQO,59W,59WOOQO-E6j-E6j",stateData:"#O~OcOS~OQSORSOSSOTSOWQO]ROePO~OVXOeUO~O[[O~PVOg^O~Oh_OVfX~OVaO~OhbO[iX~O[dO~Oh_OVfa~OhbO[ia~O",goto:"!kjPPPPPPkPPkqwPPk{!RPPP!XP!ePP!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:"\u26a0 JsonText True False Null Number String } { Object Property PropertyName ] [ Array",maxTerm:25,nodeProps:[["openedBy",7,"{",12,"["],["closedBy",8,"}",13,"]"]],propSources:[L9],skippedNodes:[0],repeatNodeCount:2,tokenData:"(p~RaXY!WYZ!W]^!Wpq!Wrs!]|}$i}!O$n!Q!R$w!R![&V![!]&h!}#O&m#P#Q&r#Y#Z&w#b#c'f#h#i'}#o#p(f#q#r(k~!]Oc~~!`Upq!]qr!]rs!rs#O!]#O#P!w#P~!]~!wOe~~!zXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#g~#jR!Q![#s!c!i#s#T#Z#s~#vR!Q![$P!c!i$P#T#Z$P~$SR!Q![$]!c!i$]#T#Z$]~$`R!Q![!]!c!i!]#T#Z!]~$nOh~~$qQ!Q!R$w!R![&V~$|RT~!O!P%V!g!h%k#X#Y%k~%YP!Q![%]~%bRT~!Q![%]!g!h%k#X#Y%k~%nR{|%w}!O%w!Q![%}~%zP!Q![%}~&SPT~!Q![%}~&[ST~!O!P%V!Q![&V!g!h%k#X#Y%k~&mOg~~&rO]~~&wO[~~&zP#T#U&}~'QP#`#a'T~'WP#g#h'Z~'^P#X#Y'a~'fOR~~'iP#i#j'l~'oP#`#a'r~'uP#`#a'x~'}OS~~(QP#f#g(T~(WP#i#j(Z~(^P#X#Y(a~(fOQ~~(kOW~~(pOV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0});var VC;const bh=new zn;const B9=new zn;let ya=(()=>{class n{constructor(t,r,i=[],s=""){this.data=t,this.name=s,ao.prototype.hasOwnProperty("tree")||Object.defineProperty(ao.prototype,"tree",{get(){return os(this)}}),this.parser=r,this.extension=[Gu.of(this),ao.languageData.of((a,u,h)=>{let m=ON(a,u,h),v=m.type.prop(bh);if(!v)return[];let x=a.facet(v),I=m.type.prop(B9);if(I){let j=m.resolve(u-m.from,h);for(let Q of I)if(Q.test(j,a)){let oe=a.facet(Q.facet);return"replace"==Q.type?oe:oe.concat(x)}}return x})].concat(i)}isActiveAt(t,r,i=-1){return ON(t,r,i).type.prop(bh)==this.data}findRegions(t){let r=t.facet(Gu);if(r?.data==this.data)return[{from:0,to:t.doc.length}];if(!r||!r.allowsNesting)return[];let i=[],s=(a,u)=>{if(a.prop(bh)==this.data)return void i.push({from:u,to:u+a.length});let h=a.prop(zn.mounted);if(h){if(h.tree.prop(bh)==this.data){if(h.overlay)for(let m of h.overlay)i.push({from:m.from+u,to:m.to+u});else i.push({from:u,to:u+a.length});return}if(h.overlay){let m=i.length;if(s(h.tree,h.overlay[0].from+u),i.length>m)return}}for(let m=0;m<a.children.length;m++){let v=a.children[m];v instanceof mi&&s(v,a.positions[m]+u)}};return s(os(t),0),i}get allowsNesting(){return!0}}return n.setState=Qn.define(),n})();function ON(n,e,t){let r=n.facet(Gu),i=os(n).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,t,si.ExcludeBuffers))s.type.isTop&&(i=s);return i}class e_ extends ya{constructor(e,t,r){super(e,t,[],r),this.parser=t}static define(e){let t=function IN(n){return ln.define({combine:n?e=>e.concat(n):void 0})}(e.languageData);return new e_(t,e.parser.configure({props:[bh.add(r=>r.isTop?t:void 0)]}),e.name)}configure(e,t){return new e_(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function os(n){let e=n.field(ya.state,!1);return e?e.tree:mi.empty}class H9{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let r=this.cursorPos-this.string.length;return e<r||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-r,t-r)}}let Ym=null;class hp{constructor(e,t,r=[],i,s,a,u,h){this.parser=e,this.state=t,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=a,this.skipped=u,this.scheduleOn=h,this.parse=null,this.tempSkipped=[]}static create(e,t,r){return new hp(e,t,[],mi.empty,0,r,[],null)}startParse(){return this.parser.startParse(new H9(this.state.doc),this.fragments)}work(e,t){return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=mi.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if("number"==typeof e){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),null!=t&&(null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i){if(this.fragments=this.withoutTempSkipped(Bc.addTree(i,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(r=this.parse.stoppedAt)&&void 0!==r?r:this.state.doc.length,this.tree=i,this.parse=null,!(this.treeLen<(t??this.state.doc.length)))return!0;this.parse=this.startParse()}if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Bc.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Ym;Ym=this;try{return e()}finally{Ym=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=RN(e,t.from,t.to);return e}changes(e,t){let{fragments:r,tree:i,treeLen:s,viewport:a,skipped:u}=this;if(this.takeTree(),!e.empty){let h=[];if(e.iterChangedRanges((m,v,x,I)=>h.push({fromA:m,toA:v,fromB:x,toB:I})),r=Bc.applyChanges(r,h),i=mi.empty,s=0,a={from:e.mapPos(a.from,-1),to:e.mapPos(a.to,1)},this.skipped.length){u=[];for(let m of this.skipped){let v=e.mapPos(m.from,1),x=e.mapPos(m.to,-1);v<x&&u.push({from:v,to:x})}}}return new hp(this.parser,t,r,i,s,a,u,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=RN(this.fragments,i,s),this.skipped.splice(r--,1))}return!(this.skipped.length>=t||(this.reset(),0))}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends fN{createParse(t,r,i){let s=i[0].from,a=i[i.length-1].to;return{parsedPos:s,advance(){let h=Ym;if(h){for(let m of i)h.tempSkipped.push(m);e&&(h.scheduleOn=h.scheduleOn?Promise.all([h.scheduleOn,e]):e)}return this.parsedPos=a,new mi(co.none,[],[],a-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}static get(){return Ym}}function RN(n,e,t){return Bc.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class fp{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,r)||t.takeTree(),new fp(t)}static init(e){let t=Math.min(3e3,e.doc.length),r=hp.create(e.facet(Gu).parser,e,{from:0,to:t});return r.work(20,t)||r.takeTree(),new fp(r)}}ya.state=Bi.define({create:fp.init,update(n,e){for(let t of e.effects)if(t.is(ya.setState))return t.value;return e.startState.facet(Gu)!=e.state.facet(Gu)?fp.init(e.state):n.apply(e)}});let PN=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(PN=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const HC=typeof navigator<"u"&&null!==(VC=navigator.scheduling)&&void 0!==VC&&VC.isInputPending?()=>navigator.scheduling.isInputPending():null,NN=wi.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(ya.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(ya.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=PN(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(ya.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let a=Date.now()+Math.min(this.chunkBudget,100,e&&!HC?Math.max(25,e.timeRemaining()-5):1e9),u=s.context.treeLen<i&&r.doc.length>i+1e3,h=s.context.work(()=>HC&&HC()||Date.now()>a,i+(u?0:1e5));this.chunkBudget-=Date.now()-t,(h||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:ya.setState.of(new fp(s.context))})),this.chunkBudget>0&&!(h&&!u)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Xo(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Gu=ln.define({combine:n=>n.length?n[0]:null,enables:n=>[ya.state,NN,Rn.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class z9{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const FN=ln.define(),zC=ln.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function _h(n){let e=n.facet(zC);return 9==e.charCodeAt(0)?n.tabSize*e.length:e.length}function pp(n,e){let t="",r=n.tabSize,i=n.facet(zC)[0];if("\t"==i){for(;e>=r;)t+="\t",e-=r;i=" "}for(let s=0;s<e;s++)t+=i;return t}function t_(n,e){n instanceof ao&&(n=new Xm(n));for(let r of n.state.facet(FN)){let i=r(n,e);if(void 0!==i)return i}let t=os(n.state);return t?function j9(n,e,t){return VN(e.resolveInner(t).enterUnfinishedNodesBefore(t),t,n)}(n,t,e):null}class Xm{constructor(e,t={}){this.state=e,this.options=t,this.unit=_h(e)}lineAt(e,t=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return null!=i&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(t<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,t);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,t=1){let{text:r,from:i}=this.lineAt(e,t),s=this.countColumn(r,e-i),a=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return a>-1&&(s+=a-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,t=e.length){return Tm(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:r,from:i}=this.lineAt(e,t),s=this.options.overrideIndentation;if(s){let a=s(i);if(a>-1)return a}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const BN=new zn;function G9(n){let e=n.type.prop(BN);if(e)return e;let r,t=n.firstChild;if(t&&(r=t.type.prop(zn.closedBy))){let i=n.lastChild,s=i&&r.indexOf(i.name)>-1;return a=>function HN(n,e,t,r,i){let s=n.textAfter,a=s.match(/^\s*/)[0].length,u=r&&s.slice(a,a+r.length)==r||i==n.pos+a,h=e?function q9(n){let e=n.node,t=e.childAfter(e.from),r=e.lastChild;if(!t)return null;let i=n.options.simulateBreak,s=n.state.doc.lineAt(t.from),a=null==i||i<=s.from?s.to:Math.min(s.to,i);for(let u=t.to;;){let h=e.childAfter(u);if(!h||h==r)return null;if(!h.type.isSkipped)return h.from<a?t:null;u=h.to}}(n):null;return h?n.column(u?h.from:h.to):n.baseIndent+(u?0:n.unit*t)}(a,!0,1,void 0,s&&!function U9(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}(a)?i.from:void 0)}return null==n.parent?$9:null}function VN(n,e,t){for(;n;n=n.parent){let r=G9(n);if(r)return r(jC.create(t,e,n))}return null}function $9(){return 0}class jC extends Xm{constructor(e,t,r){super(e.state,e.options),this.base=e,this.pos=t,this.node=r}static create(e,t,r){return new jC(e,t,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let t=this.node.resolve(e.from);for(;t.parent&&t.parent.from==t.from;)t=t.parent;if(W9(t,this.node))break;e=this.state.doc.lineAt(t.from)}return this.lineIndent(e.from)}continue(){let e=this.node.parent;return e?VN(e,this.pos,this.base):0}}function W9(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function zN({except:n,units:e=1}={}){return t=>{let r=n&&n.test(t.textAfter);return t.baseIndent+(r?0:e*t.unit)}}const K9=ln.define(),jN=new zn;function J9(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function Km(n,e,t){for(let r of n.facet(K9)){let i=r(n,e,t);if(i)return i}return function Q9(n,e,t){let r=os(n);if(r.length<t)return null;let s=null;for(let a=r.resolveInner(t,1);a;a=a.parent){if(a.to<=t||a.from>t)continue;if(s&&a.from<e)break;let u=a.type.prop(jN);if(u&&(a.to<r.length-50||r.length==n.doc.length||!J9(a))){let h=u(a,n);h&&h.from<=t&&h.from>=e&&h.to>t&&(s=h)}}return s}(n,e,t)}function UN(n,e){let t=e.mapPos(n.from,1),r=e.mapPos(n.to,-1);return t>=r?void 0:{from:t,to:r}}const Zm=Qn.define({map:UN}),gp=Qn.define({map:UN});function UC(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(r=>r.from<=t&&r.to>=t)||e.push(n.lineBlockAt(t));return e}const $u=Bi.define({create:()=>dn.none,update(n,e){n=n.map(e.changes);for(let t of e.effects)t.is(Zm)&&!eq(n,t.value.from,t.value.to)?n=n.update({add:[WN.range(t.value.from,t.value.to)]}):t.is(gp)&&(n=n.update({filter:(r,i)=>t.value.from!=r||t.value.to!=i,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:r}=e.selection.main;n.between(r,r,(i,s)=>{i<r&&s>r&&(t=!0)}),t&&(n=n.update({filterFrom:r,filterTo:r,filter:(i,s)=>s<=r||i>=r}))}return n},provide:n=>Rn.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(r,i)=>{t.push(r,i)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let r=n[t++],i=n[t++];if("number"!=typeof r||"number"!=typeof i)throw new RangeError("Invalid JSON for fold state");e.push(WN.range(r,i))}return dn.set(e,!0)}});function Qm(n,e,t){var r;let i=null;return null===(r=n.field($u,!1))||void 0===r||r.between(e,t,(s,a)=>{(!i||i.from>s)&&(i={from:s,to:a})}),i}function eq(n,e,t){let r=!1;return n.between(e,e,(i,s)=>{i==e&&s==t&&(r=!0)}),r}function GC(n,e){return n.field($u,!1)?e:e.concat(Qn.appendConfig.of($N()))}function n_(n,e,t=!0){let r=n.state.doc.lineAt(e.from).number,i=n.state.doc.lineAt(e.to).number;return Rn.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${r} ${n.state.phrase("to")} ${i}.`)}const oq=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:n=>{for(let e of UC(n)){let t=Km(n.state,e.from,e.to);if(t)return n.dispatch({effects:GC(n.state,[Zm.of(t),n_(n,t)])}),!0}return!1}},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:n=>{if(!n.state.field($u,!1))return!1;let e=[];for(let t of UC(n)){let r=Qm(n.state,t.from,t.to);r&&e.push(gp.of(r),n_(n,r,!1))}return e.length&&n.dispatch({effects:e}),e.length>0}},{key:"Ctrl-Alt-[",run:n=>{let{state:e}=n,t=[];for(let r=0;r<e.doc.length;){let i=n.lineBlockAt(r),s=Km(e,i.from,i.to);s&&t.push(Zm.of(s)),r=(s?n.lineBlockAt(s.to):i).to+1}return t.length&&n.dispatch({effects:GC(n.state,t)}),!!t.length}},{key:"Ctrl-Alt-]",run:n=>{let e=n.state.field($u,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(r,i)=>{t.push(gp.of({from:r,to:i}))}),n.dispatch({effects:t}),!0}}],aq={placeholderDOM:null,placeholderText:"\u2026"},GN=ln.define({combine:n=>tl(n,aq)});function $N(n){let e=[$u,uq];return n&&e.push(GN.of(n)),e}const WN=dn.replace({widget:new class extends Lc{toDOM(n){let{state:e}=n,t=e.facet(GN),r=s=>{let a=n.lineBlockAt(n.posAtDOM(s.target)),u=Qm(n.state,a.from,a.to);u&&n.dispatch({effects:gp.of(u)}),s.preventDefault()};if(t.placeholderDOM)return t.placeholderDOM(n,r);let i=document.createElement("span");return i.textContent=t.placeholderText,i.setAttribute("aria-label",e.phrase("folded code")),i.title=e.phrase("unfold"),i.className="cm-foldPlaceholder",i.onclick=r,i}}}),lq={openText:"\u2304",closedText:"\u203a",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class $C extends $l{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function cq(n={}){let e=Object.assign(Object.assign({},lq),n),t=new $C(e,!0),r=new $C(e,!1),i=wi.fromClass(class{constructor(a){this.from=a.viewport.from,this.markers=this.buildMarkers(a)}update(a){(a.docChanged||a.viewportChanged||a.startState.facet(Gu)!=a.state.facet(Gu)||a.startState.field($u,!1)!=a.state.field($u,!1)||os(a.startState)!=os(a.state)||e.foldingChanged(a))&&(this.markers=this.buildMarkers(a.view))}buildMarkers(a){let u=new Nu;for(let h of a.viewportLineBlocks){let m=Qm(a.state,h.from,h.to)?r:Km(a.state,h.from,h.to)?t:null;m&&u.add(h.from,h.from,m)}return u.finish()}}),{domEventHandlers:s}=e;return[i,JP({class:"cm-foldGutter",markers(a){var u;return(null===(u=a.plugin(i))||void 0===u?void 0:u.markers)||fi.empty},initialSpacer:()=>new $C(e,!1),domEventHandlers:Object.assign(Object.assign({},s),{click:(a,u,h)=>{if(s.click&&s.click(a,u,h))return!0;let m=Qm(a.state,u.from,u.to);if(m)return a.dispatch({effects:gp.of(m)}),!0;let v=Km(a.state,u.from,u.to);return!!v&&(a.dispatch({effects:Zm.of(v)}),!0)}})}),$N()]}const uq=Rn.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class mp{constructor(e,t){let r;function i(u){let h=Lu.newName();return(r||(r=Object.create(null)))["."+h]=u,h}this.specs=e;const s="string"==typeof t.all?t.all:t.all?i(t.all):void 0,a=t.scope;this.scope=a instanceof ya?u=>u.prop(bh)==a.data:a?u=>u==a:void 0,this.style=AN(e.map(u=>({tag:u.tag,class:u.class||i(Object.assign({},u,{tag:null}))})),{all:s}).style,this.module=r?new Lu(r):null,this.themeType=t.themeType}static define(e,t){return new mp(e,t||{})}}const WC=ln.define(),qN=ln.define({combine:n=>n.length?[n[0]]:null});function r_(n){let e=n.facet(WC);return e.length?e:n.facet(qN)}function qC(n,e){let r,t=[hq];return n instanceof mp&&(n.module&&t.push(Rn.styleModule.of(n.module)),r=n.themeType),t.push(e?.fallback?qN.of(n):r?WC.computeN([Rn.darkTheme],i=>i.facet(Rn.darkTheme)==("dark"==r)?[n]:[]):WC.of(n)),t}class dq{constructor(e){this.markCache=Object.create(null),this.tree=os(e.state),this.decorations=this.buildDeco(e,r_(e.state))}update(e){let t=os(e.state),r=r_(e.state),i=r!=r_(e.startState);t.length<e.view.viewport.to&&!i&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,r))}buildDeco(e,t){if(!t||!this.tree.length)return dn.none;let r=new Nu;for(let{from:i,to:s}of e.visibleRanges)R9(this.tree,t,(a,u,h)=>{r.add(a,u,this.markCache[h]||(this.markCache[h]=dn.mark({class:h})))},i,s);return r.finish()}}const hq=hh.high(wi.fromClass(dq,{decorations:n=>n.decorations})),fq=mp.define([{tag:ze.meta,color:"#404740"},{tag:ze.link,textDecoration:"underline"},{tag:ze.heading,textDecoration:"underline",fontWeight:"bold"},{tag:ze.emphasis,fontStyle:"italic"},{tag:ze.strong,fontWeight:"bold"},{tag:ze.strikethrough,textDecoration:"line-through"},{tag:ze.keyword,color:"#708"},{tag:[ze.atom,ze.bool,ze.url,ze.contentSeparator,ze.labelName],color:"#219"},{tag:[ze.literal,ze.inserted],color:"#164"},{tag:[ze.string,ze.deleted],color:"#a11"},{tag:[ze.regexp,ze.escape,ze.special(ze.string)],color:"#e40"},{tag:ze.definition(ze.variableName),color:"#00f"},{tag:ze.local(ze.variableName),color:"#30a"},{tag:[ze.typeName,ze.namespace],color:"#085"},{tag:ze.className,color:"#167"},{tag:[ze.special(ze.variableName),ze.macroName],color:"#256"},{tag:ze.definition(ze.propertyName),color:"#00c"},{tag:ze.comment,color:"#940"},{tag:ze.invalid,color:"#f00"}]),pq=Rn.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),KN=ln.define({combine:n=>tl(n,{afterCursor:!0,brackets:"()[]{}",maxScanDistance:1e4,renderMatch:vq})}),gq=dn.mark({class:"cm-matchingBracket"}),mq=dn.mark({class:"cm-nonmatchingBracket"});function vq(n){let e=[],t=n.matched?gq:mq;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const yq=[Bi.define({create:()=>dn.none,update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],r=e.state.facet(KN);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=Zl(e.state,i.head,-1,r)||i.head>0&&Zl(e.state,i.head-1,1,r)||r.afterCursor&&(Zl(e.state,i.head,1,r)||i.head<e.state.doc.length&&Zl(e.state,i.head+1,-1,r));s&&(t=t.concat(r.renderMatch(s,e.state)))}return dn.set(t,!0)},provide:n=>Rn.decorations.from(n)}),pq];function bq(n={}){return[KN.of(n),yq]}const _q=new zn;function YC(n,e,t){let r=n.prop(e<0?zn.openedBy:zn.closedBy);if(r)return r;if(1==n.name.length){let i=t.indexOf(n.name);if(i>-1&&i%2==(e<0?1:0))return[t[i+e]]}return null}function XC(n){let e=n.type.prop(_q);return e?e(n.node):n}function Zl(n,e,t,r={}){let i=r.maxScanDistance||1e4,s=r.brackets||"()[]{}",a=os(n),u=a.resolveInner(e,t);for(let h=u;h;h=h.parent){let m=YC(h.type,t,s);if(m&&h.from<h.to){let v=XC(h);if(v&&(t>0?e>=v.from&&e<v.to:e>v.from&&e<=v.to))return wq(0,0,t,h,v,m,s)}}return function xq(n,e,t,r,i,s,a){let u=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),h=a.indexOf(u);if(h<0||h%2==0!=t>0)return null;let m={from:t<0?e-1:e,to:t>0?e+1:e},v=n.doc.iterRange(e,t>0?n.doc.length:0),x=0;for(let I=0;!v.next().done&&I<=s;){let j=v.value;t<0&&(I+=j.length);let Q=e+I*t;for(let oe=t>0?0:j.length-1,ve=t>0?j.length:-1;oe!=ve;oe+=t){let Pe=a.indexOf(j[oe]);if(!(Pe<0||r.resolveInner(Q+oe,1).type!=i))if(Pe%2==0==t>0)x++;else{if(1==x)return{start:m,end:{from:Q+oe,to:Q+oe+1},matched:Pe>>1==h>>1};x--}}t>0&&(I+=j.length)}return v.done?{start:m,matched:!1}:null}(n,e,t,a,u.type,i,s)}function wq(n,e,t,r,i,s,a){let h={from:i.from,to:i.to},m=0,v=r.parent?.cursor();if(v&&(t<0?v.childBefore(r.from):v.childAfter(r.to)))do{if(t<0?v.to<=r.from:v.from>=r.to){if(0==m&&s.indexOf(v.type.name)>-1&&v.from<v.to){let x=XC(v);return{start:h,end:x?{from:x.from,to:x.to}:void 0,matched:!0}}if(YC(v.type,t,a))m++;else if(YC(v.type,-t,a)){if(0==m){let x=XC(v);return{start:h,end:x&&x.from<x.to?{from:x.from,to:x.to}:void 0,matched:!1}}m--}}}while(t<0?v.prevSibling():v.nextSibling());return{start:h,matched:!1}}const ZC=Object.create(null),Jm=[co.none],rL=[],iL=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])iL[n]=oL(ZC,e);function QC(n,e){rL.indexOf(n)>-1||(rL.push(n),console.warn(e))}function oL(n,e){let t=null;for(let s of e.split(".")){let a=n[s]||ze[s];a?"function"==typeof a?t?t=a(t):QC(s,`Modifier ${s} used at start of tag`):t?QC(s,`Tag ${s} used as modifier`):t=a:QC(s,`Unknown highlighting tag ${s}`)}if(!t)return 0;let r=e.replace(/ /g,"_"),i=co.define({id:Jm.length,name:r,props:[SN({[r]:t})]});return Jm.push(i),i.id}const Oq=e_.define({name:"json",parser:F9.configure({props:[BN.add({Object:zN({except:/^\s*\}/}),Array:zN({except:/^\s*\]/})}),jN.add({"Object Array":function Z9(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function $r(){var n=arguments[0];"string"==typeof n&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&"object"==typeof t&&null==t.nodeType&&!Array.isArray(t)){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=t[r];"string"==typeof i?n.setAttribute(r,i):null!=i&&(n[r]=i)}e++}for(;e<arguments.length;e++)aL(n,arguments[e]);return n}function aL(n,e){if("string"==typeof e)n.appendChild(document.createTextNode(e));else if(null!=e)if(null!=e.nodeType)n.appendChild(e);else{if(!Array.isArray(e))throw new RangeError("Unsupported child node: "+e);for(var t=0;t<e.length;t++)aL(n,e[t])}}class Pq{constructor(e,t,r){this.from=e,this.to=t,this.diagnostic=r}}class wh{constructor(e,t,r){this.diagnostics=e,this.panel=t,this.selected=r}static init(e,t,r){let i=e,s=r.facet(xh).markerFilter;s&&(i=s(i));let a=dn.set(i.map(u=>u.from==u.to||u.from==u.to-1&&r.doc.lineAt(u.from).to==u.from?dn.widget({widget:new zq(u),diagnostic:u}).range(u.from):dn.mark({attributes:{class:"cm-lintRange cm-lintRange-"+u.severity},diagnostic:u}).range(u.from,u.to)),!0);return new wh(a,t,vp(a))}}function vp(n,e=null,t=0){let r=null;return n.between(t,1e9,(i,s,{spec:a})=>{if(!e||a.diagnostic==e)return r=new Pq(i,s,a.diagnostic),!1}),r}function lL(n,e){return!(!n.effects.some(t=>t.is(i_))&&!n.changes.touchesRange(e.pos))}function cL(n,e){return n.field(uo,!1)?e:e.concat(Qn.appendConfig.of([uo,Rn.decorations.compute([uo],t=>{let{selected:r,panel:i}=t.field(uo);return r&&i&&r.from!=r.to?dn.set([Lq.range(r.from,r.to)]):dn.none}),$6(Fq,{hideOn:lL}),jq]))}const i_=Qn.define(),JC=Qn.define(),uL=Qn.define(),uo=Bi.define({create:()=>new wh(dn.none,null,null),update(n,e){if(e.docChanged){let t=n.diagnostics.map(e.changes),r=null;if(n.selected){let i=e.changes.mapPos(n.selected.from,1);r=vp(t,n.selected.diagnostic,i)||vp(t,null,i)}n=new wh(t,n.panel,r)}for(let t of e.effects)t.is(i_)?n=wh.init(t.value,n.panel,e.state):t.is(JC)?n=new wh(n.diagnostics,t.value?s_.open:null,n.selected):t.is(uL)&&(n=new wh(n.diagnostics,n.panel,t.value));return n},provide:n=>[Um.from(n,e=>e.panel),Rn.decorations.from(n,e=>e.diagnostics)]}),Lq=dn.mark({class:"cm-lintRange cm-lintRange-active"});function Fq(n,e,t){let{diagnostics:r}=n.state.field(uo),i=[],s=2e8,a=0;r.between(e-(t<0?1:0),e+(t>0?1:0),(h,m,{spec:v})=>{e>=h&&e<=m&&(h==m||(e>h||t>0)&&(e<m||t<0))&&(i.push(v.diagnostic),s=Math.min(h,s),a=Math.max(m,a))});let u=n.state.facet(xh).tooltipFilter;return u&&(i=u(i)),i.length?{pos:s,end:a,above:n.state.doc.lineAt(s).to<a,create:()=>({dom:dL(n,i)})}:null}function dL(n,e){return $r("ul",{class:"cm-tooltip-lint"},e.map(t=>gL(n,t,!1)))}const hL=n=>{let e=n.state.field(uo,!1);return!(!e||!e.panel||(n.dispatch({effects:JC.of(!1)}),0))},Vq=[{key:"Mod-Shift-m",run:n=>{let e=n.state.field(uo,!1);(!e||!e.panel)&&n.dispatch({effects:cL(n.state,[JC.of(!0)])});let t=jm(n,s_.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},preventDefault:!0},{key:"F8",run:n=>{let e=n.state.field(uo,!1);if(!e)return!1;let t=n.state.selection.main,r=e.diagnostics.iter(t.to+1);return!(!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==t.from&&r.to==t.to)||(n.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),0))}}],xh=ln.define({combine:n=>Object.assign({sources:n.map(e=>e.source)},tl(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,t)=>e?t?r=>e(r)||t(r):e:t})),enables:wi.fromClass(class{constructor(n){this.view=n,this.timeout=-1,this.set=!0;let{delay:e}=n.state.facet(xh);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let n=Date.now();if(n<this.lintTime-10)setTimeout(this.run,this.lintTime-n);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(xh);Promise.all(t.map(r=>Promise.resolve(r(this.view)))).then(r=>{let i=r.reduce((s,a)=>s.concat(a));this.view.state.doc==e.doc&&this.view.dispatch(function Nq(n,e){return{effects:cL(n,[i_.of(e)])}}(this.view.state,i))},r=>{Xo(this.view.state,r)})}}update(n){let e=n.state.facet(xh);(n.docChanged||e!=n.startState.facet(xh)||e.needsRefresh&&e.needsRefresh(n))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}})});function pL(n){let e=[];if(n)e:for(let{name:t}of n){for(let r=0;r<t.length;r++){let i=t[r];if(/[a-zA-Z]/.test(i)&&!e.some(s=>s.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function gL(n,e,t){var r;let i=t?pL(e.actions):[];return $r("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},$r("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),null===(r=e.actions)||void 0===r?void 0:r.map((s,a)=>{let u=!1,h=I=>{if(I.preventDefault(),u)return;u=!0;let j=vp(n.state.field(uo).diagnostics,e);j&&s.apply(n,j.from,j.to)},{name:m}=s,v=i[a]?m.indexOf(i[a]):-1,x=v<0?m:[m.slice(0,v),$r("u",m.slice(v,v+1)),m.slice(v+1)];return $r("button",{type:"button",class:"cm-diagnosticAction",onclick:h,onmousedown:h,"aria-label":` Action: ${m}${v<0?"":` (access key "${i[a]})"`}.`},x)}),e.source&&$r("div",{class:"cm-diagnosticSource"},e.source))}class zq extends Lc{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return $r("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class mL{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=gL(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class s_{constructor(e){this.view=e,this.items=[],this.list=$r("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:i=>{if(27==i.keyCode)hL(this.view),this.view.focus();else if(38==i.keyCode||33==i.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==i.keyCode||34==i.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==i.keyCode)this.moveSelection(0);else if(35==i.keyCode)this.moveSelection(this.items.length-1);else if(13==i.keyCode)this.view.focus();else{if(!(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0))return;{let{diagnostic:s}=this.items[this.selectedIndex],a=pL(s.actions);for(let u=0;u<a.length;u++)if(a[u].toUpperCase().charCodeAt(0)==i.keyCode){let h=vp(this.view.state.field(uo).diagnostics,s);h&&s.actions[u].apply(e,h.from,h.to)}}}i.preventDefault()},onclick:i=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(i.target)&&this.moveSelection(s)}}),this.dom=$r("div",{class:"cm-panel-lint"},this.list,$r("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>hL(this.view)},"\xd7")),this.update()}get selectedIndex(){let e=this.view.state.field(uo).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(uo),r=0,i=!1,s=null;for(e.between(0,this.view.state.doc.length,(a,u,{spec:h})=>{let v,m=-1;for(let x=r;x<this.items.length;x++)if(this.items[x].diagnostic==h.diagnostic){m=x;break}m<0?(v=new mL(this.view,h.diagnostic),this.items.splice(r,0,v),i=!0):(v=this.items[m],m>r&&(this.items.splice(r,m-r),i=!0)),t&&v.diagnostic==t.diagnostic?v.dom.hasAttribute("aria-selected")||(v.dom.setAttribute("aria-selected","true"),s=v):v.dom.hasAttribute("aria-selected")&&v.dom.removeAttribute("aria-selected"),r++});r<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();0==this.items.length&&(this.items.push(new mL(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:u})=>{a.top<u.top?this.list.scrollTop-=u.top-a.top:a.bottom>u.bottom&&(this.list.scrollTop+=a.bottom-u.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function t(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)t();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let r=vp(this.view.state.field(uo).diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:uL.of(r)})}static open(e){return new s_(e)}}function eS(n){return function o_(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const jq=Rn.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:eS("#d11")},".cm-lintRange-warning":{backgroundImage:eS("orange")},".cm-lintRange-info":{backgroundImage:eS("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function nS(n,e){return({state:t,dispatch:r})=>{if(t.readOnly)return!1;let i=n(e,t);return!!i&&(r(t.update(i)),!0)}}const Kq=nS(tY,0),Zq=nS(bL,0),Qq=nS((n,e)=>bL(n,e,function eY(n){let e=[];for(let t of n.selection.ranges){let r=n.doc.lineAt(t.from),i=t.to<=r.to?r:n.doc.lineAt(t.to),s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from,to:i.to})}return e}(e)),0);function rS(n,e){let t=n.languageDataAt("commentTokens",e);return t.length?t[0]:{}}function bL(n,e,t=e.selection.ranges){let r=t.map(s=>rS(e,s.from).block);if(!r.every(s=>s))return null;let i=t.map((s,a)=>function Jq(n,{open:e,close:t},r,i){let v,x,s=n.sliceDoc(r-50,r),a=n.sliceDoc(i,i+50),u=/\s*$/.exec(s)[0].length,h=/^\s*/.exec(a)[0].length,m=s.length-u;if(s.slice(m-e.length,m)==e&&a.slice(h,h+t.length)==t)return{open:{pos:r-u,margin:u&&1},close:{pos:i+h,margin:h&&1}};i-r<=100?v=x=n.sliceDoc(r,i):(v=n.sliceDoc(r,r+50),x=n.sliceDoc(i-50,i));let I=/^\s*/.exec(v)[0].length,j=/\s*$/.exec(x)[0].length,Q=x.length-j-t.length;return v.slice(I,I+e.length)==e&&x.slice(Q,Q+t.length)==t?{open:{pos:r+I+e.length,margin:/\s/.test(v.charAt(I+e.length))?1:0},close:{pos:i-j-t.length,margin:/\s/.test(x.charAt(Q-1))?1:0}}:null}(e,r[a],s.from,s.to));if(2!=n&&!i.every(s=>s))return{changes:e.changes(t.map((s,a)=>i[a]?[]:[{from:s.from,insert:r[a].open+" "},{from:s.to,insert:" "+r[a].close}]))};if(1!=n&&i.some(s=>s)){let s=[];for(let u,a=0;a<i.length;a++)if(u=i[a]){let h=r[a],{open:m,close:v}=u;s.push({from:m.pos-h.open.length,to:m.pos+m.margin},{from:v.pos-v.margin,to:v.pos+h.close.length})}return{changes:s}}return null}function tY(n,e,t=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:a}of t){let u=r.length,h=1e9,m=rS(e,s).line;if(m){for(let v=s;v<=a;){let x=e.doc.lineAt(v);if(x.from>i&&(s==a||a>x.from)){i=x.from;let I=/^\s*/.exec(x.text)[0].length,j=I==x.length,Q=x.text.slice(I,I+m.length)==m?I:-1;I<x.text.length&&I<h&&(h=I),r.push({line:x,comment:Q,token:m,indent:I,empty:j,single:!1})}v=x.to+1}if(h<1e9)for(let v=u;v<r.length;v++)r[v].indent<r[v].line.text.length&&(r[v].indent=h);r.length==u+1&&(r[u].single=!0)}}if(2!=n&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:u,token:h,indent:m,empty:v,single:x}of r)(x||!v)&&s.push({from:u.from+m,insert:h+" "});let a=e.changes(s);return{changes:a,selection:e.selection.map(a,1)}}if(1!=n&&r.some(s=>s.comment>=0)){let s=[];for(let{line:a,comment:u,token:h}of r)if(u>=0){let m=a.from+u,v=m+h.length;" "==a.text[v-a.from]&&v++,s.push({from:m,to:v})}return{changes:s}}return null}const iS=Nc.define(),nY=Nc.define(),rY=ln.define(),_L=ln.define({combine:n=>tl(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(r,i)=>e(r,i)||t(r,i)})}),sS=Bi.define({create:()=>lS.empty,update(n,e){let t=e.state.facet(_L),r=e.annotation(iS);if(r){let h=e.docChanged?Ct.single(function iY(n){let e=0;return n.iterChangedRanges((t,r)=>e=r),e}(e.changes)):void 0,m=Ao.fromTransaction(e,h),v=r.side,x=0==v?n.undone:n.done;return x=m?c_(x,x.length,t.minDepth,m):EL(x,e.startState.selection),new lS(0==v?r.rest:x,0==v?x:r.rest)}let i=e.annotation(nY);if(("full"==i||"before"==i)&&(n=n.isolate()),!1===e.annotation(jl.addToHistory))return e.changes.empty?n:n.addMapping(e.changes.desc);let s=Ao.fromTransaction(e),a=e.annotation(jl.time),u=e.annotation(jl.userEvent);return s?n=n.addChanges(s,a,u,t,e):e.selection&&(n=n.addSelection(e.startState.selection,a,u,t.newGroupDelay)),("full"==i||"after"==i)&&(n=n.isolate()),n},toJSON:n=>({done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}),fromJSON:n=>new lS(n.done.map(Ao.fromJSON),n.undone.map(Ao.fromJSON))});function sY(n={}){return[sS,_L.of(n),Rn.domEventHandlers({beforeinput(e,t){let r="historyUndo"==e.inputType?wL:"historyRedo"==e.inputType?oS:null;return!!r&&(e.preventDefault(),r(t))}})]}function l_(n,e){return function({state:t,dispatch:r}){if(!e&&t.readOnly)return!1;let i=t.field(sS,!1);if(!i)return!1;let s=i.pop(n,t,e);return!!s&&(r(s),!0)}}const wL=l_(0,!1),oS=l_(1,!1),oY=l_(0,!0),aY=l_(1,!0);class Ao{constructor(e,t,r,i,s){this.changes=e,this.effects=t,this.mapped=r,this.startSelection=i,this.selectionsAfter=s}setSelAfter(e){return new Ao(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,r;return{changes:null===(e=this.changes)||void 0===e?void 0:e.toJSON(),mapped:null===(t=this.mapped)||void 0===t?void 0:t.toJSON(),startSelection:null===(r=this.startSelection)||void 0===r?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new Ao(e.changes&&Xi.fromJSON(e.changes),[],e.mapped&&zl.fromJSON(e.mapped),e.startSelection&&Ct.fromJSON(e.startSelection),e.selectionsAfter.map(Ct.fromJSON))}static fromTransaction(e,t){let r=ba;for(let i of e.startState.facet(rY)){let s=i(e);s.length&&(r=r.concat(s))}return!r.length&&e.changes.empty?null:new Ao(e.changes.invert(e.startState.doc),r,void 0,t||e.startState.selection,ba)}static selection(e){return new Ao(void 0,ba,void 0,void 0,e)}}function c_(n,e,t,r){let s=n.slice(e+1>t+20?e-t-1:0,e);return s.push(r),s}function xL(n,e){return n.length?e.length?n.concat(e):n:e}const ba=[];function EL(n,e){if(n.length){let t=n[n.length-1],r=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-200));return r.length&&r[r.length-1].eq(e)?n:(r.push(e),c_(n,n.length-1,1e9,t.setSelAfter(r)))}return[Ao.selection([e])]}function dY(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function aS(n,e){if(!n.length)return n;let t=n.length,r=ba;for(;t;){let i=hY(n[t-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let s=n.slice(0,t);return s[t-1]=i,s}e=i.mapped,t--,r=i.selectionsAfter}return r.length?[Ao.selection(r)]:ba}function hY(n,e,t){let r=xL(n.selectionsAfter.length?n.selectionsAfter.map(u=>u.map(e)):ba,t);if(!n.changes)return Ao.selection(r);let i=n.changes.map(e),s=e.mapDesc(n.changes,!0),a=n.mapped?n.mapped.composeDesc(s):s;return new Ao(i,Qn.mapEffects(n.effects,e),a,n.startSelection.map(s),r)}const fY=/^(input\.type|delete)($|\.)/;let lS=(()=>{class n{constructor(t,r,i=0,s){this.done=t,this.undone=r,this.prevTime=i,this.prevUserEvent=s}isolate(){return this.prevTime?new n(this.done,this.undone):this}addChanges(t,r,i,s,a){let u=this.done,h=u[u.length-1];return u=h&&h.changes&&!h.changes.empty&&t.changes&&(!i||fY.test(i))&&(!h.selectionsAfter.length&&r-this.prevTime<s.newGroupDelay&&s.joinToEvent(a,function lY(n,e){let t=[],r=!1;return n.iterChangedRanges((i,s)=>t.push(i,s)),e.iterChangedRanges((i,s,a,u)=>{for(let h=0;h<t.length;){let m=t[h++],v=t[h++];u>=m&&a<=v&&(r=!0)}}),r}(h.changes,t.changes))||"input.type.compose"==i)?c_(u,u.length-1,s.minDepth,new Ao(t.changes.compose(h.changes),xL(t.effects,h.effects),h.mapped,h.startSelection,ba)):c_(u,u.length,s.minDepth,t),new n(u,ba,r,i)}addSelection(t,r,i,s){let a=this.done.length?this.done[this.done.length-1].selectionsAfter:ba;return a.length>0&&r-this.prevTime<s&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&function cY(n,e){return n.ranges.length==e.ranges.length&&0===n.ranges.filter((t,r)=>t.empty!=e.ranges[r].empty).length}(a[a.length-1],t)?this:new n(EL(this.done,t),this.undone,r,i)}addMapping(t){return new n(aS(this.done,t),aS(this.undone,t),this.prevTime,this.prevUserEvent)}pop(t,r,i){let s=0==t?this.done:this.undone;if(0==s.length)return null;let a=s[s.length-1];if(i&&a.selectionsAfter.length)return r.update({selection:a.selectionsAfter[a.selectionsAfter.length-1],annotations:iS.of({side:t,rest:dY(s)}),userEvent:0==t?"select.undo":"select.redo",scrollIntoView:!0});if(a.changes){let u=1==s.length?ba:s.slice(0,s.length-1);return a.mapped&&(u=aS(u,a.mapped)),r.update({changes:a.changes,selection:a.startSelection,effects:a.effects,annotations:iS.of({side:t,rest:u}),filter:!1,userEvent:0==t?"undo":"redo",scrollIntoView:!0})}return null}}return n.empty=new n(ba,ba),n})();const pY=[{key:"Mod-z",run:wL,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:oS,preventDefault:!0},{linux:"Ctrl-Shift-z",run:oS,preventDefault:!0},{key:"Mod-u",run:oY,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:aY,preventDefault:!0}];function yp(n,e){return Ct.create(n.ranges.map(e),n.mainIndex)}function Ql(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function _a({state:n,dispatch:e},t){let r=yp(n.selection,t);return!r.eq(n.selection)&&(e(Ql(n,r)),!0)}function tv(n,e){return Ct.cursor(e?n.to:n.from)}function u_(n,e){return _a(n,t=>t.empty?n.moveByChar(t,e):tv(t,e))}function Gs(n){return n.textDirectionAt(n.state.selection.main.head)==pi.LTR}const DL=n=>u_(n,!Gs(n)),CL=n=>u_(n,Gs(n));function d_(n,e){return _a(n,t=>t.empty?n.moveByGroup(t,e):tv(t,e))}function vY(n,e,t){if(e.type.prop(t))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function h_(n,e,t){let a,u,r=os(n).resolveInner(e.head),i=t?zn.closedBy:zn.openedBy;for(let h=e.head;;){let m=t?r.childAfter(h):r.childBefore(h);if(!m)break;vY(n,m,i)?r=m:h=t?m.to:m.from}return u=r.type.prop(i)&&(a=t?Zl(n,r.from,1):Zl(n,r.to,-1))&&a.matched?t?a.end.to:a.end.from:t?r.to:r.from,Ct.cursor(u,t?-1:1)}function AL(n,e){return _a(n,t=>{if(!t.empty)return tv(t,e);let r=n.moveVertically(t,e);return r.head!=t.head?r:n.moveToLineBoundary(t,e)})}const TL=n=>AL(n,!1),kL=n=>AL(n,!0);function IL(n){let i,e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,r=0;if(e){for(let s of n.state.facet(Rn.scrollMargins)){let a=s(n);a?.top&&(t=Math.max(a?.top,t)),a?.bottom&&(r=Math.max(a?.bottom,r))}i=n.scrollDOM.clientHeight-t-r}else i=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:r,selfScroll:e,height:Math.max(n.defaultLineHeight,i-5)}}function OL(n,e){let s,t=IL(n),{state:r}=n,i=yp(r.selection,a=>a.empty?n.moveVertically(a,e,t.height):tv(a,e));if(i.eq(r.selection))return!1;if(t.selfScroll){let a=n.coordsAtPos(r.selection.main.head),u=n.scrollDOM.getBoundingClientRect(),h=u.top+t.marginTop;a&&a.top>h&&a.bottom<u.bottom-t.marginBottom&&(s=Rn.scrollIntoView(i.main.head,{y:"start",yMargin:a.top-h}))}return n.dispatch(Ql(r,i),{effects:s}),!0}const RL=n=>OL(n,!1),cS=n=>OL(n,!0);function Wu(n,e,t){let r=n.lineBlockAt(e.head),i=n.moveToLineBoundary(e,t);if(i.head==e.head&&i.head!=(t?r.to:r.from)&&(i=n.moveToLineBoundary(e,t,!1)),!t&&i.head==r.from&&r.length){let s=/^\s*/.exec(n.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=Ct.cursor(r.from+s))}return i}function Zo(n,e){let t=yp(n.state.selection,r=>{let i=e(r);return Ct.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return!t.eq(n.state.selection)&&(n.dispatch(Ql(n.state,t)),!0)}function f_(n,e){return Zo(n,t=>n.moveByChar(t,e))}const NL=n=>f_(n,!Gs(n)),LL=n=>f_(n,Gs(n));function p_(n,e){return Zo(n,t=>n.moveByGroup(t,e))}function BL(n,e){return Zo(n,t=>n.moveVertically(t,e))}const VL=n=>BL(n,!1),HL=n=>BL(n,!0);function zL(n,e){return Zo(n,t=>n.moveVertically(t,e,IL(n).height))}const jL=n=>zL(n,!1),UL=n=>zL(n,!0),GL=({state:n,dispatch:e})=>(e(Ql(n,{anchor:0})),!0),$L=({state:n,dispatch:e})=>(e(Ql(n,{anchor:n.doc.length})),!0),WL=({state:n,dispatch:e})=>(e(Ql(n,{anchor:n.selection.main.anchor,head:0})),!0),qL=({state:n,dispatch:e})=>(e(Ql(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0);function g_(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:r}=n,i=r.changeByRange(s=>{let{from:a,to:u}=s;if(a==u){let h=e(a);h<a?(t="delete.backward",h=m_(n,h,!1)):h>a&&(t="delete.forward",h=m_(n,h,!0)),a=Math.min(a,h),u=Math.max(u,h)}else a=m_(n,a,!1),u=m_(n,u,!0);return a==u?{range:s}:{changes:{from:a,to:u},range:Ct.cursor(a)}});return!i.changes.empty&&(n.dispatch(r.update(i,{scrollIntoView:!0,userEvent:t,effects:"delete.selection"==t?Rn.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function m_(n,e,t){if(n instanceof Rn)for(let r of n.state.facet(Rn.atomicRanges).map(i=>i(n)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=t?s:i)});return e}const YL=(n,e)=>g_(n,t=>{let s,a,{state:r}=n,i=r.doc.lineAt(t);if(!e&&t>i.from&&t<i.from+200&&!/[^ \t]/.test(s=i.text.slice(0,t-i.from))){if("\t"==s[s.length-1])return t-1;let h=Tm(s,r.tabSize)%_h(r)||_h(r);for(let m=0;m<h&&" "==s[s.length-1-m];m++)t--;a=t}else a=so(i.text,t-i.from,e,e)+i.from,a==t&&i.number!=(e?r.doc.lines:1)&&(a+=e?1:-1);return a}),uS=n=>YL(n,!1),XL=n=>YL(n,!0),KL=(n,e)=>g_(n,t=>{let r=t,{state:i}=n,s=i.doc.lineAt(r),a=i.charCategorizer(r);for(let u=null;;){if(r==(e?s.to:s.from)){r==t&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let h=so(s.text,r-s.from,e)+s.from,m=s.text.slice(Math.min(r,h)-s.from,Math.max(r,h)-s.from),v=a(m);if(null!=u&&v!=u)break;(" "!=m||r!=t)&&(u=v),r=h}return r}),ZL=n=>KL(n,!1),QL=n=>g_(n,e=>{let t=n.lineBlockAt(e).to;return e<t?t:Math.min(n.state.doc.length,e+1)});function v_(n){let e=[],t=-1;for(let r of n.selection.ranges){let i=n.doc.lineAt(r.from),s=n.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=n.doc.lineAt(r.to-1)),t>=i.number){let a=e[e.length-1];a.to=s.to,a.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});t=s.number+1}return e}function JL(n,e,t){if(n.readOnly)return!1;let r=[],i=[];for(let s of v_(n)){if(t?s.to==n.doc.length:0==s.from)continue;let a=n.doc.lineAt(t?s.to+1:s.from-1),u=a.length+1;if(t){r.push({from:s.to,to:a.to},{from:s.from,insert:a.text+n.lineBreak});for(let h of s.ranges)i.push(Ct.range(Math.min(n.doc.length,h.anchor+u),Math.min(n.doc.length,h.head+u)))}else{r.push({from:a.from,to:s.from},{from:s.to,insert:n.lineBreak+a.text});for(let h of s.ranges)i.push(Ct.range(h.anchor-u,h.head-u))}}return!!r.length&&(e(n.update({changes:r,scrollIntoView:!0,selection:Ct.create(i,n.selection.mainIndex),userEvent:"move.line"})),!0)}function eF(n,e,t){if(n.readOnly)return!1;let r=[];for(let i of v_(n))r.push(t?{from:i.from,insert:n.doc.slice(i.from,i.to)+n.lineBreak}:{from:i.to,insert:n.lineBreak+n.doc.slice(i.from,i.to)});return e(n.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const ZY=tF(!1);function tF(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:a}=i,u=e.doc.lineAt(s),h=!n&&s==a&&function KY(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let s,t=os(n).resolveInner(e),r=t.childBefore(e),i=t.childAfter(e);return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(zn.closedBy))&&s.indexOf(i.name)>-1&&n.doc.lineAt(r.to).from==n.doc.lineAt(i.from).from?{from:r.to,to:i.from}:null}(e,s);n&&(s=a=(a<=u.to?u:e.doc.lineAt(a)).to);let m=new Xm(e,{simulateBreak:s,simulateDoubleBreak:!!h}),v=t_(m,s);for(null==v&&(v=/^\s*/.exec(e.doc.lineAt(s).text)[0].length);a<u.to&&/\s/.test(u.text[a-u.from]);)a++;h?({from:s,to:a}=h):s>u.from&&s<u.from+100&&!/\S/.test(u.text.slice(0,s))&&(s=u.from);let x=["",pp(e,v)];return h&&x.push(pp(e,m.lineIndent(u.from,-1))),{changes:{from:s,to:a,insert:Cr.of(x)},range:Ct.cursor(s+1+x[1].length)}});return t(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function dS(n,e){let t=-1;return n.changeByRange(r=>{let i=[];for(let a=r.from;a<=r.to;){let u=n.doc.lineAt(a);u.number>t&&(r.empty||r.to>u.from)&&(e(u,i,r),t=u.number),a=u.to+1}let s=n.changes(i);return{changes:i,range:Ct.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const n7=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:n=>_a(n,e=>h_(n.state,e,!Gs(n))),shift:n=>Zo(n,e=>h_(n.state,e,!Gs(n)))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:n=>_a(n,e=>h_(n.state,e,Gs(n))),shift:n=>Zo(n,e=>h_(n.state,e,Gs(n)))},{key:"Alt-ArrowUp",run:({state:n,dispatch:e})=>JL(n,e,!1)},{key:"Shift-Alt-ArrowUp",run:({state:n,dispatch:e})=>eF(n,e,!1)},{key:"Alt-ArrowDown",run:({state:n,dispatch:e})=>JL(n,e,!0)},{key:"Shift-Alt-ArrowDown",run:({state:n,dispatch:e})=>eF(n,e,!0)},{key:"Escape",run:({state:n,dispatch:e})=>{let t=n.selection,r=null;return t.ranges.length>1?r=Ct.create([t.main]):t.main.empty||(r=Ct.create([Ct.cursor(t.main.head)])),!!r&&(e(Ql(n,r)),!0)}},{key:"Mod-Enter",run:tF(!0)},{key:"Alt-l",mac:"Ctrl-l",run:({state:n,dispatch:e})=>{let t=v_(n).map(({from:r,to:i})=>Ct.range(r,Math.min(i+1,n.doc.length)));return e(n.update({selection:Ct.create(t),userEvent:"select"})),!0}},{key:"Mod-i",run:({state:n,dispatch:e})=>{let t=yp(n.selection,r=>{var i;let s=os(n).resolveInner(r.head,1);for(;!(s.from<r.from&&s.to>=r.to||s.to>r.to&&s.from<=r.from||null===(i=s.parent)||void 0===i)&&i.parent;)s=s.parent;return Ct.range(s.to,s.from)});return e(Ql(n,t)),!0},preventDefault:!0},{key:"Mod-[",run:({state:n,dispatch:e})=>!n.readOnly&&(e(n.update(dS(n,(t,r)=>{let i=/^\s*/.exec(t.text)[0];if(!i)return;let s=Tm(i,n.tabSize),a=0,u=pp(n,Math.max(0,s-_h(n)));for(;a<i.length&&a<u.length&&i.charCodeAt(a)==u.charCodeAt(a);)a++;r.push({from:t.from+a,to:t.from+i.length,insert:u.slice(a)})}),{userEvent:"delete.dedent"})),!0)},{key:"Mod-]",run:({state:n,dispatch:e})=>!n.readOnly&&(e(n.update(dS(n,(t,r)=>{r.push({from:t.from,insert:n.facet(zC)})}),{userEvent:"input.indent"})),!0)},{key:"Mod-Alt-\\",run:({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),r=new Xm(n,{overrideIndentation:s=>t[s]??-1}),i=dS(n,(s,a,u)=>{let h=t_(r,s.from);if(null==h)return;/\S/.test(s.text)||(h=0);let m=/^\s*/.exec(s.text)[0],v=pp(n,h);(m!=v||u.from<s.from+m.length)&&(t[s.from]=h,a.push({from:s.from,to:s.from+m.length,insert:v}))});return i.changes.empty||e(n.update(i,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(v_(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=yp(e.selection,i=>n.moveVertically(i,!0)).map(t);return n.dispatch({changes:t,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:({state:n,dispatch:e})=>function PL(n,e,t){let r=!1,i=yp(n.selection,s=>{let a=Zl(n,s.head,-1)||Zl(n,s.head,1)||s.head>0&&Zl(n,s.head-1,1)||s.head<n.doc.length&&Zl(n,s.head+1,-1);if(!a||!a.end)return s;r=!0;let u=a.start.from==s.head?a.end.to:a.end.from;return t?Ct.range(s.anchor,u):Ct.cursor(u)});return!!r&&(e(Ql(n,i)),!0)}(n,e,!1)},{key:"Mod-/",run:n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),r=rS(n.state,t.from);return r.line?Kq(n):!!r.block&&Qq(n)}},{key:"Alt-A",run:Zq}].concat([{key:"ArrowLeft",run:DL,shift:NL,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:n=>d_(n,!Gs(n)),shift:n=>p_(n,!Gs(n)),preventDefault:!0},{mac:"Cmd-ArrowLeft",run:n=>_a(n,e=>Wu(n,e,!Gs(n))),shift:n=>Zo(n,e=>Wu(n,e,!Gs(n))),preventDefault:!0},{key:"ArrowRight",run:CL,shift:LL,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:n=>d_(n,Gs(n)),shift:n=>p_(n,Gs(n)),preventDefault:!0},{mac:"Cmd-ArrowRight",run:n=>_a(n,e=>Wu(n,e,Gs(n))),shift:n=>Zo(n,e=>Wu(n,e,Gs(n))),preventDefault:!0},{key:"ArrowUp",run:TL,shift:VL,preventDefault:!0},{mac:"Cmd-ArrowUp",run:GL,shift:WL},{mac:"Ctrl-ArrowUp",run:RL,shift:jL},{key:"ArrowDown",run:kL,shift:HL,preventDefault:!0},{mac:"Cmd-ArrowDown",run:$L,shift:qL},{mac:"Ctrl-ArrowDown",run:cS,shift:UL},{key:"PageUp",run:RL,shift:jL},{key:"PageDown",run:cS,shift:UL},{key:"Home",run:n=>_a(n,e=>Wu(n,e,!1)),shift:n=>Zo(n,e=>Wu(n,e,!1)),preventDefault:!0},{key:"Mod-Home",run:GL,shift:WL},{key:"End",run:n=>_a(n,e=>Wu(n,e,!0)),shift:n=>Zo(n,e=>Wu(n,e,!0)),preventDefault:!0},{key:"Mod-End",run:$L,shift:qL},{key:"Enter",run:ZY},{key:"Mod-a",run:({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0)},{key:"Backspace",run:uS,shift:uS},{key:"Delete",run:XL},{key:"Mod-Backspace",mac:"Alt-Backspace",run:ZL},{key:"Mod-Delete",mac:"Alt-Delete",run:n=>KL(n,!0)},{mac:"Mod-Backspace",run:n=>g_(n,e=>{let t=n.lineBlockAt(e).from;return e>t?t:Math.max(0,e-1)})},{mac:"Mod-Delete",run:QL}].concat([{key:"Ctrl-b",run:DL,shift:NL,preventDefault:!0},{key:"Ctrl-f",run:CL,shift:LL},{key:"Ctrl-p",run:TL,shift:VL},{key:"Ctrl-n",run:kL,shift:HL},{key:"Ctrl-a",run:n=>_a(n,e=>Ct.cursor(n.lineBlockAt(e.head).from,1)),shift:n=>Zo(n,e=>Ct.cursor(n.lineBlockAt(e.head).from))},{key:"Ctrl-e",run:n=>_a(n,e=>Ct.cursor(n.lineBlockAt(e.head).to,-1)),shift:n=>Zo(n,e=>Ct.cursor(n.lineBlockAt(e.head).to))},{key:"Ctrl-d",run:XL},{key:"Ctrl-h",run:uS},{key:"Ctrl-k",run:QL},{key:"Ctrl-Alt-h",run:ZL},{key:"Ctrl-o",run:({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:Cr.of(["",""])},range:Ct.cursor(r.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>{if(!r.empty||0==r.from||r.from==n.doc.length)return{range:r};let i=r.from,s=n.doc.lineAt(i),a=i==s.from?i-1:so(s.text,i-s.from,!1)+s.from,u=i==s.to?i+1:so(s.text,i-s.from,!0)+s.from;return{changes:{from:a,to:u,insert:n.doc.slice(i,u).append(n.doc.slice(a,i))},range:Ct.cursor(u)}});return!t.changes.empty&&(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:cS}].map(n=>({mac:n.key,run:n.run,shift:n.shift})))),rF="function"==typeof String.prototype.normalize?n=>n.normalize("NFKD"):n=>n;class bp{constructor(e,t,r=0,i=e.length,s,a){this.test=a,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?u=>s(rF(u)):rF,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return ws(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=TD(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=ga(e);let i=this.normalize(t);for(let s=0,a=r;;s++){let u=i.charCodeAt(s),h=this.match(u,a);if(h)return this.value=h,this;if(s==i.length-1)break;a==r&&s<t.length&&t.charCodeAt(s)==u&&a++}}}match(e,t){let r=null;for(let i=0;i<this.matches.length;i+=2){let s=this.matches[i],a=!1;this.query.charCodeAt(s)==e&&(s==this.query.length-1?r={from:this.matches[i+1],to:t+1}:(this.matches[i]++,a=!0)),a||(this.matches.splice(i,2),i-=2)}return this.query.charCodeAt(0)==e&&(1==this.query.length?r={from:t,to:t+1}:this.matches.push(1,t)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferPos)&&(r=null),r}}typeof Symbol<"u"&&(bp.prototype[Symbol.iterator]=function(){return this});const iF={from:-1,to:-1,match:/.*/.exec("")},fS="gm"+(null==/x/.unicode?"":"u");class sF{constructor(e,t,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=iF,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new oF(e,t,r,i,s);this.re=new RegExp(t,fS+(r?.ignoreCase?"i":"")),this.test=r?.test,this.iter=e.iter();let a=e.lineAt(i);this.curLineStart=a.from,this.matchPos=y_(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let r=this.curLineStart+t.index,i=r+t[0].length;if(this.matchPos=y_(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,t)))return this.value={from:r,to:i,match:t},this;e=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),e=0}}}}const pS=new WeakMap;class _p{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,r){let i=pS.get(e);if(!i||i.from>=r||i.to<=t){let u=new _p(t,e.sliceString(t,r));return pS.set(e,u),u}if(i.from==t&&i.to==r)return i;let{text:s,from:a}=i;return a>t&&(s=e.sliceString(t,a)+s,a=t),i.to<r&&(s+=e.sliceString(i.to,r)),pS.set(e,new _p(a,s)),new _p(t,s.slice(t-a,r-a))}}class oF{constructor(e,t,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=iF,this.matchPos=y_(e,i),this.re=new RegExp(t,fS+(r?.ignoreCase?"i":"")),this.test=r?.test,this.flat=_p.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let r=this.flat.from+t.index,i=r+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,t)))return this.value={from:r,to:i,match:t},this.matchPos=y_(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=_p.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}function y_(n,e){if(e>=n.length)return e;let r,t=n.lineAt(e);for(;e<t.to&&(r=t.text.charCodeAt(e-t.from))>=56320&&r<57344;)e++;return e}function gS(n){let e=$r("input",{class:"cm-textfield",name:"line"});function r(){let i=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!i)return;let{state:s}=n,a=s.doc.lineAt(s.selection.main.head),[,u,h,m,v]=i,x=m?+m.slice(1):0,I=h?+h:a.number;if(h&&v){let Q=I/100;u&&(Q=Q*("-"==u?-1:1)+a.number/s.doc.lines),I=Math.round(s.doc.lines*Q)}else h&&u&&(I=I*("-"==u?-1:1)+a.number);let j=s.doc.line(Math.max(1,Math.min(s.doc.lines,I)));n.dispatch({effects:b_.of(!1),selection:Ct.cursor(j.from+Math.max(0,Math.min(x,j.length))),scrollIntoView:!0}),n.focus()}return{dom:$r("form",{class:"cm-gotoLine",onkeydown:i=>{27==i.keyCode?(i.preventDefault(),n.dispatch({effects:b_.of(!1)}),n.focus()):13==i.keyCode&&(i.preventDefault(),r())},onsubmit:i=>{i.preventDefault(),r()}},$r("label",n.state.phrase("Go to line"),": ",e)," ",$r("button",{class:"cm-button",type:"submit"},n.state.phrase("go")))}}typeof Symbol<"u"&&(sF.prototype[Symbol.iterator]=oF.prototype[Symbol.iterator]=function(){return this});const b_=Qn.define(),aF=Bi.define({create:()=>!0,update(n,e){for(let t of e.effects)t.is(b_)&&(n=t.value);return n},provide:n=>Um.from(n,e=>e?gS:null)}),s7=Rn.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),o7={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},lF=ln.define({combine:n=>tl(n,o7,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})});function a7(n){let e=[h7,d7];return n&&e.push(lF.of(n)),e}const l7=dn.mark({class:"cm-selectionMatch"}),c7=dn.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function cF(n,e,t,r){return!(0!=t&&n(e.sliceDoc(t-1,t))==ii.Word||r!=e.doc.length&&n(e.sliceDoc(r,r+1))==ii.Word)}const d7=wi.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(lF),{state:t}=n,r=t.selection;if(r.ranges.length>1)return dn.none;let s,i=r.main,a=null;if(i.empty){if(!e.highlightWordAroundCursor)return dn.none;let h=t.wordAt(i.head);if(!h)return dn.none;a=t.charCategorizer(i.head),s=t.sliceDoc(h.from,h.to)}else{let h=i.to-i.from;if(h<e.minSelectionLength||h>200)return dn.none;if(e.wholeWords){if(s=t.sliceDoc(i.from,i.to),a=t.charCategorizer(i.head),!cF(a,t,i.from,i.to)||!function u7(n,e,t,r){return n(e.sliceDoc(t,t+1))==ii.Word&&n(e.sliceDoc(r-1,r))==ii.Word}(a,t,i.from,i.to))return dn.none}else if(s=t.sliceDoc(i.from,i.to).trim(),!s)return dn.none}let u=[];for(let h of n.visibleRanges){let m=new bp(t.doc,s,h.from,h.to);for(;!m.next().done;){let{from:v,to:x}=m.value;if((!a||cF(a,t,v,x))&&(i.empty&&v<=i.from&&x>=i.to?u.push(c7.range(v,x)):(v>=i.to||x<=i.from)&&u.push(l7.range(v,x)),u.length>e.maxMatches))return dn.none}}return dn.set(u)}},{decorations:n=>n.decorations}),h7=Rn.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),Eh=ln.define({combine:n=>tl(n,{top:!1,caseSensitive:!1,literal:!1,wholeWord:!1,createPanel:e=>new M7(e),scrollToMatch:e=>Rn.scrollIntoView(e)})});class uF{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||function r7(n){try{return new RegExp(n,fS),!0}catch{return!1}}(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,r)=>"n"==r?"\n":"r"==r?"\r":"t"==r?"\t":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new b7(this):new v7(this)}getCursor(e,t=0,r){let i=e.doc?e:ao.create({doc:e});return null==r&&(r=i.doc.length),this.regexp?xp(this,i,t,r):wp(this,i,t,r)}}class dF{constructor(e){this.spec=e}}function wp(n,e,t,r){return new bp(e.doc,n.unquoted,t,r,n.caseSensitive?void 0:i=>i.toLowerCase(),n.wholeWord?function m7(n,e){return(t,r,i,s)=>((s>t||s+i.length<r)&&(s=Math.max(0,t-2),i=n.sliceString(s,Math.min(n.length,r+2))),!(e(__(i,t-s))==ii.Word&&e(w_(i,t-s))==ii.Word||e(w_(i,r-s))==ii.Word&&e(__(i,r-s))==ii.Word))}(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}class v7 extends dF{constructor(e){super(e)}nextMatch(e,t,r){let i=wp(this.spec,e,r,e.doc.length).nextOverlapping();return i.done&&(i=wp(this.spec,e,0,t).nextOverlapping()),i.done?null:i.value}prevMatchInRange(e,t,r){for(let i=r;;){let s=Math.max(t,i-1e4-this.spec.unquoted.length),a=wp(this.spec,e,s,i),u=null;for(;!a.nextOverlapping().done;)u=a.value;if(u)return u;if(s==t)return null;i-=1e4}}prevMatch(e,t,r){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let r=wp(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=t)return null;i.push(r.value)}return i}highlight(e,t,r,i){let s=wp(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function xp(n,e,t,r){return new sF(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?y7(e.charCategorizer(e.selection.main.head)):void 0},t,r)}function __(n,e){return n.slice(so(n,e,!1),e)}function w_(n,e){return n.slice(e,so(n,e))}function y7(n){return(e,t,r)=>!r[0].length||(n(__(r.input,r.index))!=ii.Word||n(w_(r.input,r.index))!=ii.Word)&&(n(w_(r.input,r.index+r[0].length))!=ii.Word||n(__(r.input,r.index+r[0].length))!=ii.Word)}class b7 extends dF{nextMatch(e,t,r){let i=xp(this.spec,e,r,e.doc.length).next();return i.done&&(i=xp(this.spec,e,0,t).next()),i.done?null:i.value}prevMatchInRange(e,t,r){for(let i=1;;i++){let s=Math.max(t,r-1e4*i),a=xp(this.spec,e,s,r),u=null;for(;!a.next().done;)u=a.value;if(u&&(s==t||u.from>s+10))return u;if(s==t)return null}}prevMatch(e,t,r){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(t,r)=>"$"==r?"$":"&"==r?e.match[0]:"0"!=r&&+r<e.match.length?e.match[r]:t))}matchAll(e,t){let r=xp(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=t)return null;i.push(r.value)}return i}highlight(e,t,r,i){let s=xp(this.spec,e,Math.max(0,t-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const nv=Qn.define(),mS=Qn.define(),Jl=Bi.define({create:n=>new vS(D_(n).create(),null),update(n,e){for(let t of e.effects)t.is(nv)?n=new vS(t.value.create(),n.panel):t.is(mS)&&(n=new vS(n.query,t.value?yS:null));return n},provide:n=>Um.from(n,e=>e.panel)});class vS{constructor(e,t){this.query=e,this.panel=t}}const _7=dn.mark({class:"cm-searchMatch"}),w7=dn.mark({class:"cm-searchMatch cm-searchMatch-selected"}),x7=wi.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(Jl))}update(n){let e=n.state.field(Jl);(e!=n.startState.field(Jl)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return dn.none;let{view:t}=this,r=new Nu;for(let i=0,s=t.visibleRanges,a=s.length;i<a;i++){let{from:u,to:h}=s[i];for(;i<a-1&&h>s[i+1].from-500;)h=s[++i].to;n.highlight(t.state,u,h,(m,v)=>{let x=t.state.selection.ranges.some(I=>I.from==m&&I.to==v);r.add(m,v,x?w7:_7)})}return r.finish()}},{decorations:n=>n.decorations});function rv(n){return e=>{let t=e.state.field(Jl,!1);return t&&t.query.spec.valid?n(e,t):fF(e)}}const x_=rv((n,{query:e})=>{let{to:t}=n.state.selection.main,r=e.nextMatch(n.state,t,t);if(!r)return!1;let i=Ct.single(r.from,r.to),s=n.state.facet(Eh);return n.dispatch({selection:i,effects:[bS(n,r),s.scrollToMatch(i.main)],userEvent:"select.search"}),!0}),E_=rv((n,{query:e})=>{let{state:t}=n,{from:r}=t.selection.main,i=e.prevMatch(t,r,r);if(!i)return!1;let s=Ct.single(i.from,i.to),a=n.state.facet(Eh);return n.dispatch({selection:s,effects:[bS(n,i),a.scrollToMatch(s.main)],userEvent:"select.search"}),!0}),E7=rv((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!(!t||!t.length||(n.dispatch({selection:Ct.create(t.map(r=>Ct.range(r.from,r.to))),userEvent:"select.search.matches"}),0))}),hF=rv((n,{query:e})=>{let{state:t}=n,{from:r,to:i}=t.selection.main;if(t.readOnly)return!1;let s=e.nextMatch(t,r,r);if(!s)return!1;let u,h,a=[],m=[];if(s.from==r&&s.to==i&&(h=t.toText(e.getReplacement(s)),a.push({from:s.from,to:s.to,insert:h}),s=e.nextMatch(t,s.from,s.to),m.push(Rn.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(r).number)+"."))),s){let v=0==a.length||a[0].from>=s.to?0:s.to-s.from-h.length;u=Ct.single(s.from-v,s.to-v),m.push(bS(n,s)),m.push(t.facet(Eh).scrollToMatch(u.main))}return n.dispatch({changes:a,selection:u,effects:m,userEvent:"input.replace"}),!0}),C7=rv((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(i=>{let{from:s,to:a}=i;return{from:s,to:a,insert:e.getReplacement(i)}});if(!t.length)return!1;let r=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:Rn.announce.of(r),userEvent:"input.replace.all"}),!0});function yS(n){return n.state.facet(Eh).createPanel(n)}function D_(n,e){var t,r,i,s;let a=n.selection.main,u=a.empty||a.to>a.from+100?"":n.sliceDoc(a.from,a.to);if(e&&!u)return e;let h=n.facet(Eh);return new uF({search:(null!==(t=e?.literal)&&void 0!==t?t:h.literal)?u:u.replace(/\n/g,"\\n"),caseSensitive:null!==(r=e?.caseSensitive)&&void 0!==r?r:h.caseSensitive,literal:null!==(i=e?.literal)&&void 0!==i?i:h.literal,wholeWord:null!==(s=e?.wholeWord)&&void 0!==s?s:h.wholeWord})}const fF=n=>{let e=n.state.field(Jl,!1);if(e&&e.panel){let t=jm(n,yS);if(!t)return!1;let r=t.dom.querySelector("[main-field]");if(r&&r!=n.root.activeElement){let i=D_(n.state,e.query.spec);i.valid&&n.dispatch({effects:nv.of(i)}),r.focus(),r.select()}}else n.dispatch({effects:[mS.of(!0),e?nv.of(D_(n.state,e.query.spec)):Qn.appendConfig.of(_S)]});return!0},pF=n=>{let e=n.state.field(Jl,!1);if(!e||!e.panel)return!1;let t=jm(n,yS);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:mS.of(!1)}),!0},S7=[{key:"Mod-f",run:fF,scope:"editor search-panel"},{key:"F3",run:x_,shift:E_,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:x_,shift:E_,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:pF,scope:"editor search-panel"},{key:"Mod-Shift-l",run:({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:r,to:i}=t.main,s=[],a=0;for(let u=new bp(n.doc,n.sliceDoc(r,i));!u.next().done;){if(s.length>1e3)return!1;u.value.from==r&&(a=s.length),s.push(Ct.range(u.value.from,u.value.to))}return e(n.update({selection:Ct.create(s,a),userEvent:"select.search.matches"})),!0}},{key:"Alt-g",run:n=>{let e=jm(n,gS);if(!e){let t=[b_.of(!0)];null==n.state.field(aF,!1)&&t.push(Qn.appendConfig.of([aF,s7])),n.dispatch({effects:t}),e=jm(n,gS)}return e&&e.dom.querySelector("input").focus(),!0}},{key:"Mod-d",run:({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(s=>s.from===s.to))return(({state:n,dispatch:e})=>{let{selection:t}=n,r=Ct.create(t.ranges.map(i=>n.wordAt(i.head)||Ct.cursor(i.head)),t.mainIndex);return!r.eq(t)&&(e(n.update({selection:r})),!0)})({state:n,dispatch:e});let r=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(s=>n.sliceDoc(s.from,s.to)!=r))return!1;let i=function p7(n,e){let{main:t,ranges:r}=n.selection,i=n.wordAt(t.head),s=i&&i.from==t.from&&i.to==t.to;for(let a=!1,u=new bp(n.doc,e,r[r.length-1].to);;){if(u.next(),!u.done){if(a&&r.some(h=>h.from==u.value.from))continue;if(s){let h=n.wordAt(u.value.from);if(!h||h.from!=u.value.from||h.to!=u.value.to)continue}return u.value}if(a)return null;u=new bp(n.doc,e,0,Math.max(0,r[r.length-1].from-1)),a=!0}}(n,r);return!!i&&(e(n.update({selection:n.selection.addRange(Ct.range(i.from,i.to),!1),effects:Rn.scrollIntoView(i.to)})),!0)},preventDefault:!0}];class M7{constructor(e){this.view=e;let t=this.query=e.state.field(Jl).query.spec;function r(i,s,a){return $r("button",{class:"cm-button",name:i,onclick:s,type:"button"},a)}this.commit=this.commit.bind(this),this.searchField=$r("input",{value:t.search,placeholder:Qo(e,"Find"),"aria-label":Qo(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=$r("input",{value:t.replace,placeholder:Qo(e,"Replace"),"aria-label":Qo(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=$r("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=$r("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=$r("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit}),this.dom=$r("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>x_(e),[Qo(e,"next")]),r("prev",()=>E_(e),[Qo(e,"previous")]),r("select",()=>E7(e),[Qo(e,"all")]),$r("label",null,[this.caseField,Qo(e,"match case")]),$r("label",null,[this.reField,Qo(e,"regexp")]),$r("label",null,[this.wordField,Qo(e,"by word")]),...e.state.readOnly?[]:[$r("br"),this.replaceField,r("replace",()=>hF(e),[Qo(e,"replace")]),r("replaceAll",()=>C7(e),[Qo(e,"replace all")])],$r("button",{name:"close",onclick:()=>pF(e),"aria-label":Qo(e,"close"),type:"button"},["\xd7"])])}commit(){let e=new uF({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:nv.of(e)}))}keydown(e){!function o6(n,e,t){return PP(RP(n.state),e,n,t)}(this.view,e,"search-panel")?13==e.keyCode&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?E_:x_)(this.view)):13==e.keyCode&&e.target==this.replaceField&&(e.preventDefault(),hF(this.view)):e.preventDefault()}update(e){for(let t of e.transactions)for(let r of t.effects)r.is(nv)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Eh).top}}function Qo(n,e){return n.state.phrase(e)}const S_=/[\s\.,:;?!]/;function bS(n,{from:e,to:t}){let r=n.state.doc.lineAt(e),i=n.state.doc.lineAt(t).to,s=Math.max(r.from,e-30),a=Math.min(i,t+30),u=n.state.sliceDoc(s,a);if(s!=r.from)for(let h=0;h<30;h++)if(!S_.test(u[h+1])&&S_.test(u[h])){u=u.slice(h);break}if(a!=i)for(let h=u.length-1;h>u.length-30;h--)if(!S_.test(u[h-1])&&S_.test(u[h])){u=u.slice(0,h);break}return Rn.announce.of(`${n.state.phrase("current match")}. ${u} ${n.state.phrase("on line")} ${r.number}.`)}const A7=Rn.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),_S=[Jl,hh.lowest(x7),A7];class gF{constructor(e,t,r){this.state=e,this.pos=t,this.explicit=r,this.abortListeners=[]}tokenBefore(e){let t=os(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),r=Math.max(t.from,this.pos-250),i=t.text.slice(r-t.from,this.pos-t.from),s=i.search(yF(e,!1));return s<0?null:{from:r+s,to:this.pos,text:i.slice(s)}}get aborted(){return null==this.abortListeners}addEventListener(e,t){"abort"==e&&this.abortListeners&&this.abortListeners.push(t)}}function mF(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}class vF{constructor(e,t,r){this.completion=e,this.source=t,this.match=r}}function qu(n){return n.selection.main.head}function yF(n,e){var t;let{source:r}=n,i=e&&"^"!=r[0],s="$"!=r[r.length-1];return i||s?new RegExp(`${i?"^":""}(?:${r})${s?"$":""}`,null!==(t=n.flags)&&void 0!==t?t:n.ignoreCase?"i":""):n}const bF=Nc.define();function _F(n,e){const t=e.completion.apply||e.completion.label;let r=e.source;"string"==typeof t?n.dispatch(Object.assign(Object.assign({},function I7(n,e,t,r){return Object.assign(Object.assign({},n.changeByRange(i=>{if(i==n.selection.main)return{changes:{from:t,to:r,insert:e},range:Ct.cursor(t+e.length)};let s=r-t;return!i.empty||s&&n.sliceDoc(i.from-s,i.from)!=n.sliceDoc(t,r)?{range:i}:{changes:{from:i.from-s,to:i.from,insert:e},range:Ct.cursor(i.from-s+e.length)}})),{userEvent:"input.complete"})}(n.state,t,r.from,r.to)),{annotations:bF.of(e.completion)})):t(n,e.completion,r.from,r.to)}const wF=new WeakMap;function O7(n){if(!Array.isArray(n))return n;let e=wF.get(n);return e||wF.set(n,e=function k7(n){let e=n.map(i=>"string"==typeof i?{label:i}:i),[t,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:function T7(n){let e=Object.create(null),t=Object.create(null);for(let{label:i}of n){e[i[0]]=!0;for(let s=1;s<i.length;s++)t[i[s]]=!0}let r=mF(e)+mF(t)+"*$";return[new RegExp("^"+r),new RegExp(r)]}(e);return i=>{let s=i.matchBefore(r);return s||i.explicit?{from:s?s.from:i.pos,options:e,validFor:t}:null}}(n)),e}class R7{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let t=0;t<e.length;){let r=ws(e,t),i=ga(r);this.chars.push(r);let s=e.slice(t,t+i),a=s.toUpperCase();this.folded.push(ws(a==s?s.toLowerCase():a,0)),t+=i}this.astral=e.length!=this.chars.length}match(e){if(0==this.pattern.length)return[0];if(e.length<this.pattern.length)return null;let{chars:t,folded:r,any:i,precise:s,byWord:a}=this;if(1==t.length){let Ke=ws(e,0),Ge=ga(Ke),st=Ge==e.length?0:-100;if(Ke!=t[0]){if(Ke!=r[0])return null;st+=-200}return[st,0,Ge]}let u=e.indexOf(this.pattern);if(0==u)return[e.length==this.pattern.length?0:-100,0,this.pattern.length];let h=t.length,m=0;if(u<0){for(let Ke=0,Ge=Math.min(e.length,200);Ke<Ge&&m<h;){let st=ws(e,Ke);(st==t[m]||st==r[m])&&(i[m++]=Ke),Ke+=ga(st)}if(m<h)return null}let v=0,x=0,I=!1,j=0,Q=-1,oe=-1,ve=/[a-z]/.test(e),Pe=!0;for(let Ke=0,Ge=Math.min(e.length,200),st=0;Ke<Ge&&x<h;){let _t=ws(e,Ke);u<0&&(v<h&&_t==t[v]&&(s[v++]=Ke),j<h&&(_t==t[j]||_t==r[j]?(0==j&&(Q=Ke),oe=Ke+1,j++):j=0));let Et,Kt=_t<255?_t>=48&&_t<=57||_t>=97&&_t<=122?2:_t>=65&&_t<=90?1:0:(Et=TD(_t))!=Et.toLowerCase()?1:Et!=Et.toUpperCase()?2:0;(!Ke||1==Kt&&ve||0==st&&0!=Kt)&&(t[x]==_t||r[x]==_t&&(I=!0)?a[x++]=Ke:a.length&&(Pe=!1)),st=Kt,Ke+=ga(_t)}return x==h&&0==a[0]&&Pe?this.result((I?-200:0)-100,a,e):j==h&&0==Q?[-200-e.length+(oe==e.length?0:-100),0,oe]:u>-1?[-700-e.length,u,u+this.pattern.length]:j==h?[-900-e.length,Q,oe]:x==h?this.result((I?-200:0)-100-700+(Pe?0:-1100),a,e):2==t.length?null:this.result((i[0]?-700:0)-200-1100,i,e)}result(e,t,r){let i=[e-r.length],s=1;for(let a of t){let u=a+(this.astral?ga(ws(r,a)):1);s>1&&i[s-1]==a?i[s-1]=u:(i[s++]=a,i[s++]=u)}return i}}const wa=ln.define({combine:n=>tl(n,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>r=>xF(e(r),t(r)),optionClass:(e,t)=>r=>xF(e(r),t(r)),addToOptions:(e,t)=>e.concat(t)})});function xF(n,e){return n?e?n+" "+e:n:e}function EF(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let i=Math.floor(e/t);return{from:i*t,to:(i+1)*t}}let r=Math.floor((n-e)/t);return{from:n-(r+1)*t,to:n-r*t}}class N7{constructor(e,t){this.view=e,this.stateField=t,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:u=>this.positionInfo(u),key:this},this.space=null,this.currentClass="";let r=e.state.field(t),{options:i,selected:s}=r.open,a=e.state.facet(wa);this.optionContent=function P7(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),t.type&&r.classList.add(...t.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(t,r,i){let s=document.createElement("span");s.className="cm-completionLabel";let{label:a}=t,u=0;for(let h=1;h<i.length;){let m=i[h++],v=i[h++];m>u&&s.appendChild(document.createTextNode(a.slice(u,m)));let x=s.appendChild(document.createElement("span"));x.appendChild(document.createTextNode(a.slice(m,v))),x.className="cm-completionMatchedText",u=v}return u<a.length&&s.appendChild(document.createTextNode(a.slice(u))),s},position:50},{render(t){if(!t.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=t.detail,r},position:80}),e.sort((t,r)=>t.position-r.position).map(t=>t.render)}(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=EF(i.length,s,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",u=>{for(let m,h=u.target;h&&h!=this.dom;h=h.parentNode)if("LI"==h.nodeName&&(m=/-(\d+)$/.exec(h.id))&&+m[1]<i.length)return _F(e,i[+m[1]]),void u.preventDefault()}),this.list=this.dom.appendChild(this.createListBox(i,r.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})}mount(){this.updateSel()}update(e){var t,r,i;let s=e.state.field(this.stateField),a=e.startState.field(this.stateField);this.updateTooltipClass(e.state),s!=a&&(this.updateSel(),(null===(t=s.open)||void 0===t?void 0:t.disabled)!=(null===(r=a.open)||void 0===r?void 0:r.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!(null===(i=s.open)||void 0===i||!i.disabled)))}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of t.split(" "))r&&this.dom.classList.add(r);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=EF(t.options.length,t.selected,this.view.state.facet(wa).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})),this.updateSelectedOption(t.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:r}=t.options[t.selected],{info:i}=r;if(!i)return;let s="string"==typeof i?document.createTextNode(i):i(r);if(!s)return;"then"in s?s.then(a=>{a&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(a)}).catch(a=>Xo(this.view.state,a,"completion info")):this.addInfoPane(s)}}addInfoPane(e){let t=this.info=document.createElement("div");t.className="cm-tooltip cm-completionInfo",t.appendChild(e),this.dom.appendChild(t),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(e){let t=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),t=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return t&&function F7(n,e){let t=n.getBoundingClientRect(),r=e.getBoundingClientRect();r.top<t.top?n.scrollTop-=t.top-r.top:r.bottom>t.bottom&&(n.scrollTop+=r.bottom-t.bottom)}(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),s=this.space;if(!s){let Q=this.dom.ownerDocument.defaultView||window;s={left:0,top:0,right:Q.innerWidth,bottom:Q.innerHeight}}if(i.top>Math.min(s.bottom,t.bottom)-10||i.bottom<Math.max(s.top,t.top)+10)return null;let m,a=this.view.textDirection==pi.RTL,u=a,h=!1,v="",x="",I=t.left-s.left,j=s.right-t.right;if(u&&I<Math.min(r.width,j)?u=!1:!u&&j<Math.min(r.width,I)&&(u=!0),r.width<=(u?I:j))v=Math.max(s.top,Math.min(i.top,s.bottom-r.height))-t.top+"px",m=Math.min(400,u?I:j)+"px";else{h=!0,m=Math.min(400,(a?t.right:s.right-t.left)-30)+"px";let Q=s.bottom-t.bottom;Q>=r.height||Q>t.top?v=i.bottom-t.top+"px":x=t.bottom-i.top+"px"}return{top:v,bottom:x,maxWidth:m,class:h?a?"left-narrow":"right-narrow":u?"left":"right"}}positionInfo(e){this.info&&(e?(this.info.style.top=e.top,this.info.style.bottom=e.bottom,this.info.style.maxWidth=e.maxWidth,this.info.className="cm-tooltip cm-completionInfo cm-completionInfo-"+e.class):this.info.style.top="-1e6px")}createListBox(e,t,r){const i=document.createElement("ul");i.id=t,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let s=r.from;s<r.to;s++){let{completion:a,match:u}=e[s];const h=i.appendChild(document.createElement("li"));h.id=t+"-"+s,h.setAttribute("role","option");let m=this.optionClass(a);m&&(h.className=m);for(let v of this.optionContent){let x=v(a,this.view.state,u);x&&h.appendChild(x)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}}function DF(n){return 100*(n.boost||0)+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}class Ep{constructor(e,t,r,i,s,a){this.options=e,this.attrs=t,this.tooltip=r,this.timestamp=i,this.selected=s,this.disabled=a}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new Ep(this.options,CF(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,r,i,s){let a=function B7(n,e){let t=[],r=0;for(let u of n)if(u.hasResult())if(!1===u.result.filter){let h=u.result.getMatch;for(let m of u.result.options){let v=[1e9-r++];if(h)for(let x of h(m))v.push(x);t.push(new vF(m,u,v))}}else{let m,h=new R7(e.sliceDoc(u.from,u.to));for(let v of u.result.options)(m=h.match(v.label))&&(null!=v.boost&&(m[0]+=v.boost),t.push(new vF(v,u,m)))}let i=[],s=null,a=e.facet(wa).compareCompletions;for(let u of t.sort((h,m)=>m.match[0]-h.match[0]||a(h.completion,m.completion)))!s||s.label!=u.completion.label||s.detail!=u.completion.detail||null!=s.type&&null!=u.completion.type&&s.type!=u.completion.type||s.apply!=u.completion.apply?i.push(u):DF(u.completion)>DF(s)&&(i[i.length-1]=u),s=u.completion;return i}(e,t);if(!a.length)return i&&e.some(h=>1==h.state)?new Ep(i.options,i.attrs,i.tooltip,i.timestamp,i.selected,!0):null;let u=t.facet(wa).selectOnOpen?0:-1;if(i&&i.selected!=u&&-1!=i.selected){let h=i.options[i.selected].completion;for(let m=0;m<a.length;m++)if(a[m].completion==h){u=m;break}}return new Ep(a,CF(r,u),{pos:e.reduce((h,m)=>m.hasResult()?Math.min(h,m.from):h,1e8),create:(n=$s,e=>new N7(e,n)),above:s.aboveCursor},i?i.timestamp:Date.now(),u,!1);var n}map(e){return new Ep(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class M_{constructor(e,t,r){this.active=e,this.id=t,this.open=r}static start(){return new M_(z7,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(e){let{state:t}=e,r=t.facet(wa),s=(r.override||t.languageDataAt("autocomplete",qu(t)).map(O7)).map(u=>(this.active.find(m=>m.source==u)||new To(u,this.active.some(m=>0!=m.state)?1:0)).update(e,r));s.length==this.active.length&&s.every((u,h)=>u==this.active[h])&&(s=this.active);let a=this.open;a&&e.docChanged&&(a=a.map(e.changes)),e.selection||s.some(u=>u.hasResult()&&e.changes.touchesRange(u.from,u.to))||!function V7(n,e){if(n==e)return!0;for(let t=0,r=0;;){for(;t<n.length&&!n[t].hasResult;)t++;for(;r<e.length&&!e[r].hasResult;)r++;let i=t==n.length,s=r==e.length;if(i||s)return i==s;if(n[t++].result!=e[r++].result)return!1}}(s,this.active)?a=Ep.build(s,t,this.id,a,r):a&&a.disabled&&!s.some(u=>1==u.state)&&(a=null),!a&&s.every(u=>1!=u.state)&&s.some(u=>u.hasResult())&&(s=s.map(u=>u.hasResult()?new To(u.source,0):u));for(let u of e.effects)u.is(ES)&&(a=a&&a.setSelected(u.value,this.id));return s==this.active&&a==this.open?this:new M_(s,this.id,a)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:H7}}const H7={"aria-autocomplete":"list"};function CF(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const z7=[];function wS(n){return n.isUserEvent("input.type")?"input":n.isUserEvent("delete.backward")?"delete":null}class To{constructor(e,t,r=-1){this.source=e,this.state=t,this.explicitPos=r}hasResult(){return!1}update(e,t){let r=wS(e),i=this;r?i=i.handleUserEvent(e,r,t):e.docChanged?i=i.handleChange(e):e.selection&&0!=i.state&&(i=new To(i.source,0));for(let s of e.effects)if(s.is(xS))i=new To(i.source,1,s.value?qu(e.state):-1);else if(s.is(A_))i=new To(i.source,0);else if(s.is(SF))for(let a of s.value)a.source==i.source&&(i=a);return i}handleUserEvent(e,t,r){return"delete"!=t&&r.activateOnTyping?new To(this.source,1):this.map(e.changes)}handleChange(e){return e.changes.touchesRange(qu(e.startState))?new To(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new To(this.source,this.state,e.mapPos(this.explicitPos))}}class iv extends To{constructor(e,t,r,i,s){super(e,2,t),this.result=r,this.from=i,this.to=s}hasResult(){return!0}handleUserEvent(e,t,r){var i;let s=e.changes.mapPos(this.from),a=e.changes.mapPos(this.to,1),u=qu(e.state);if((this.explicitPos<0?u<=s:u<this.from)||u>a||"delete"==t&&qu(e.startState)==this.from)return new To(this.source,"input"==t&&r.activateOnTyping?1:0);let m,h=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return function j7(n,e,t,r){if(!n)return!1;let i=e.sliceDoc(t,r);return"function"==typeof n?n(i,t,r,e):yF(n,!0).test(i)}(this.result.validFor,e.state,s,a)?new iv(this.source,h,this.result,s,a):this.result.update&&(m=this.result.update(this.result,s,a,new gF(e.state,u,h>=0)))?new iv(this.source,h,m,m.from,null!==(i=m.to)&&void 0!==i?i:qu(e.state)):new To(this.source,1,h)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new To(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new iv(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}const xS=Qn.define(),A_=Qn.define(),SF=Qn.define({map:(n,e)=>n.map(t=>t.map(e))}),ES=Qn.define(),$s=Bi.define({create:()=>M_.start(),update:(n,e)=>n.update(e),provide:n=>[Fb.from(n,e=>e.tooltip),Rn.contentAttributes.from(n,e=>e.attrs)]});function T_(n,e="option"){return t=>{let r=t.state.field($s,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<t.state.facet(wa).interactionDelay)return!1;let s,i=1;"page"==e&&(s=function W6(n,e){let t=n.plugin(CC);if(!t)return null;let r=t.manager.tooltips.indexOf(e);return r<0?null:t.manager.tooltipViews[r]}(t,r.open.tooltip))&&(i=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:a}=r.open.options,u=r.open.selected>-1?r.open.selected+i*(n?1:-1):n?0:a-1;return u<0?u="page"==e?0:a-1:u>=a&&(u="page"==e?a-1:0),t.dispatch({effects:ES.of(u)}),!0}}class W7{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const X7=wi.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of n.state.field($s).active)1==e.state&&this.startQuery(e)}update(n){let e=n.state.field($s);if(!n.selectionSet&&!n.docChanged&&n.startState.field($s)==e)return;let t=n.transactions.some(r=>(r.selection||r.docChanged)&&!wS(r));for(let r=0;r<this.running.length;r++){let i=this.running[r];if(t||i.updates.length+n.transactions.length>50&&Date.now()-i.time>1e3){for(let s of i.context.abortListeners)try{s()}catch(a){Xo(this.view.state,a)}i.context.abortListeners=null,this.running.splice(r--,1)}else i.updates.push(...n.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(r=>1==r.state&&!this.running.some(i=>i.active.source==r.source))?setTimeout(()=>this.startUpdate(),50):-1,0!=this.composing)for(let r of n.transactions)"input"==wS(r)?this.composing=2:2==this.composing&&r.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:n}=this.view,e=n.field($s);for(let t of e.active)1==t.state&&!this.running.some(r=>r.active.source==t.source)&&this.startQuery(t)}startQuery(n){let{state:e}=this.view,t=qu(e),r=new gF(e,t,n.explicitPos==t),i=new W7(n,r);this.running.push(i),Promise.resolve(n.source(r)).then(s=>{i.context.aborted||(i.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:A_.of(null)}),Xo(this.view.state,s)})}scheduleAccept(){this.running.every(n=>void 0!==n.done)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),50))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(wa);for(let r=0;r<this.running.length;r++){let i=this.running[r];if(void 0===i.done)continue;if(this.running.splice(r--,1),i.done){let a=new iv(i.active.source,i.active.explicitPos,i.done,i.done.from,null!==(n=i.done.to)&&void 0!==n?n:qu(i.updates.length?i.updates[0].startState:this.view.state));for(let u of i.updates)a=a.update(u,t);if(a.hasResult()){e.push(a);continue}}let s=this.view.state.field($s).active.find(a=>a.source==i.active.source);if(s&&1==s.state)if(null==i.done){let a=new To(i.active.source,0);for(let u of i.updates)a=a.update(u,t);1!=a.state&&e.push(a)}else this.startQuery(s)}e.length&&this.view.dispatch({effects:SF.of(e)})}},{eventHandlers:{blur(){let n=this.view.state.field($s,!1);n&&n.tooltip&&this.view.state.facet(wa).closeOnBlur&&this.view.dispatch({effects:A_.of(null)})},compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout(()=>this.view.dispatch({effects:xS.of(!1)}),20),this.composing=0}}}),AF=Rn.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xb7\xb7\xb7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25cb'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25cc'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1d465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1d436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1d461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222a'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25a1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1f511}\ufe0e'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25a2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),av={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Dh=Qn.define({map:(n,e)=>e.mapPos(n,-1,oo.TrackAfter)??void 0}),MS=Qn.define({map:(n,e)=>e.mapPos(n)}),AS=new class extends fh{};AS.startSide=1,AS.endSide=-1;const NF=Bi.define({create:()=>fi.empty,update(n,e){if(e.selection){let t=e.state.doc.lineAt(e.selection.main.head).from,r=e.startState.doc.lineAt(e.startState.selection.main.head).from;t!=e.changes.mapPos(r,-1)&&(n=fi.empty)}n=n.map(e.changes);for(let t of e.effects)t.is(Dh)?n=n.update({add:[AS.range(t.value,t.value+1)]}):t.is(MS)&&(n=n.update({filter:r=>r!=t.value}));return n}}),TS="()[]{}<>";function LF(n){for(let e=0;e<TS.length;e+=2)if(TS.charCodeAt(e)==n)return TS.charAt(e+1);return TD(n<128?n:n+1)}function FF(n,e){return n.languageDataAt("closeBrackets",e)[0]||av}const aX="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),lX=Rn.inputHandler.of((n,e,t,r)=>{if((aX?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let i=n.state.selection.main;if(r.length>2||2==r.length&&1==ga(ws(r,0))||e!=i.from||t!=i.to)return!1;let s=function uX(n,e){let t=FF(n,n.selection.main.head),r=t.brackets||av.brackets;for(let i of r){let s=LF(ws(i,0));if(e==i)return s==i?pX(n,i,r.indexOf(i+i+i)>-1,t):hX(n,i,s,t.before||av.before);if(e==s&&BF(n,n.selection.main.from))return fX(n,0,s)}return null}(n.state,r);return!!s&&(n.dispatch(s),!0)}),cX=[{key:"Backspace",run:({state:n,dispatch:e})=>{if(n.readOnly)return!1;let r=FF(n,n.selection.main.head).brackets||av.brackets,i=null,s=n.changeByRange(a=>{if(a.empty){let u=function dX(n,e){let t=n.sliceString(e-2,e);return ga(ws(t,0))==t.length?t:t.slice(1)}(n.doc,a.head);for(let h of r)if(h==u&&k_(n.doc,a.head)==LF(ws(h,0)))return{changes:{from:a.head-h.length,to:a.head+h.length},range:Ct.cursor(a.head-h.length)}}return{range:i=a}});return i||e(n.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!i}}];function BF(n,e){let t=!1;return n.field(NF).between(0,n.doc.length,r=>{r==e&&(t=!0)}),t}function k_(n,e){let t=n.sliceString(e,e+2);return t.slice(0,ga(ws(t,0)))}function hX(n,e,t,r){let i=null,s=n.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:t,from:a.to}],effects:Dh.of(a.to+e.length),range:Ct.range(a.anchor+e.length,a.head+e.length)};let u=k_(n.doc,a.head);return!u||/\s/.test(u)||r.indexOf(u)>-1?{changes:{insert:e+t,from:a.head},effects:Dh.of(a.head+e.length),range:Ct.cursor(a.head+e.length)}:{range:i=a}});return i?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function fX(n,e,t){let r=null,i=n.selection.ranges.map(s=>s.empty&&k_(n.doc,s.head)==t?Ct.cursor(s.head+t.length):r=s);return r?null:n.update({selection:Ct.create(i,n.selection.mainIndex),scrollIntoView:!0,effects:n.selection.ranges.map(({from:s})=>MS.of(s))})}function pX(n,e,t,r){let i=r.stringPrefixes||av.stringPrefixes,s=null,a=n.changeByRange(u=>{if(!u.empty)return{changes:[{insert:e,from:u.from},{insert:e,from:u.to}],effects:Dh.of(u.to+e.length),range:Ct.range(u.anchor+e.length,u.head+e.length)};let v,h=u.head,m=k_(n.doc,h);if(m==e){if(VF(n,h))return{changes:{insert:e+e,from:h},effects:Dh.of(h+e.length),range:Ct.cursor(h+e.length)};if(BF(n,h)){let x=t&&n.sliceDoc(h,h+3*e.length)==e+e+e;return{range:Ct.cursor(h+e.length*(x?3:1)),effects:MS.of(h)}}}else{if(t&&n.sliceDoc(h-2*e.length,h)==e+e&&(v=HF(n,h-2*e.length,i))>-1&&VF(n,v))return{changes:{insert:e+e+e+e,from:h},effects:Dh.of(h+e.length),range:Ct.cursor(h+e.length)};if(n.charCategorizer(h)(m)!=ii.Word&&HF(n,h,i)>-1&&!function gX(n,e,t,r){let i=os(n).resolveInner(e,-1),s=r.reduce((a,u)=>Math.max(a,u.length),0);for(let a=0;a<5;a++){let u=n.sliceDoc(i.from,Math.min(i.to,i.from+t.length+s)),h=u.indexOf(t);if(!h||h>-1&&r.indexOf(u.slice(0,h))>-1){let v=i.firstChild;for(;v&&v.from==i.from&&v.to-v.from>t.length+h;){if(n.sliceDoc(v.to-t.length,v.to)==t)return!1;v=v.firstChild}return!0}let m=i.to==e&&i.parent;if(!m)break;i=m}return!1}(n,h,e,i))return{changes:{insert:e+e,from:h},effects:Dh.of(h+e.length),range:Ct.cursor(h+e.length)}}return{range:s=u}});return s?null:n.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function VF(n,e){let t=os(n).resolveInner(e+1);return t.parent&&t.from==e}function HF(n,e,t){let r=n.charCategorizer(e);if(r(n.sliceDoc(e-1,e))!=ii.Word)return e;for(let i of t){let s=e-i.length;if(n.sliceDoc(s,e)==i&&r(n.sliceDoc(s-1,s))!=ii.Word)return s}return-1}function mX(n={}){return[$s,wa.of(n),X7,vX,AF]}const zF=[{key:"Ctrl-Space",run:n=>!!n.state.field($s,!1)&&(n.dispatch({effects:xS.of(!0)}),!0)},{key:"Escape",run:n=>{let e=n.state.field($s,!1);return!(!e||!e.active.some(t=>0!=t.state)||(n.dispatch({effects:A_.of(null)}),0))}},{key:"ArrowDown",run:T_(!0)},{key:"ArrowUp",run:T_(!1)},{key:"PageDown",run:T_(!0,"page")},{key:"PageUp",run:T_(!1,"page")},{key:"Enter",run:n=>{let e=n.state.field($s,!1);return!(n.state.readOnly||!e||!e.open||e.open.selected<0||Date.now()-e.open.timestamp<n.state.facet(wa).interactionDelay||(e.open.disabled||_F(n,e.open.options[e.open.selected]),0))}}],vX=hh.highest(Ob.computeN([wa],n=>n.facet(wa).defaultKeymap?[zF]:[])),yX=(()=>[e9(),n9,x6(),sY(),cq(),h6(),[Hm,m6],ao.allowMultipleSelections.of(!0),ao.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:r}=n.newSelection.main,i=t.lineAt(r);if(r>i.from+200)return n;let s=t.sliceString(i.from,r);if(!e.some(m=>m.test(s)))return n;let{state:a}=n,u=-1,h=[];for(let{head:m}of a.selection.ranges){let v=a.doc.lineAt(m);if(v.from==u)continue;u=v.from;let x=t_(a,v.from);if(null==x)continue;let I=/^\s*/.exec(v.text)[0],j=pp(a,x);I!=j&&h.push({from:v.from,to:v.from+I.length,insert:j})}return h.length?[n,{changes:h,sequential:!0}]:n}),qC(fq,{fallback:!0}),bq(),[lX,NF],mX(),N6(),B6(),k6,a7(),Ob.of([...cX,...n7,...S7,...pY,...oq,...zF,...Vq])])(),kS="#2e3440",UF="#3b4252",GF="#434c5e",Cp="#4c566a",lv="#d8dee9",Ch="#8fbcbb",$F="#88c0d0",ec="#5e81ac",WF="#d08770",IS="#ebcb8b",I_="#a3be8c",OS="#b48ead",qF="#d30102",NS=[Rn.theme({"&":{color:lv,backgroundColor:kS},".cm-content":{caretColor:lv},".cm-cursor, .cm-dropCursor":{borderLeftColor:lv},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Cp},".cm-panels":{backgroundColor:"#252a33",color:Cp},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"transparent",outline:`1px solid ${Ch}`},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:lv,color:kS},".cm-activeLine":{backgroundColor:Cp},".cm-selectionMatch":{backgroundColor:"#e5e9f0",color:UF},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${Ch}`},"&.cm-focused .cm-matchingBracket":{backgroundColor:"#eceff4",color:GF},".cm-gutters":{backgroundColor:kS,color:Cp,border:"none"},".cm-activeLineGutter":{backgroundColor:Cp,color:lv},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:UF},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:UF,borderBottomColor:UF},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Cp,color:Cp}}},{dark:!0}),qC(mp.define([{tag:ze.keyword,color:ec},{tag:[ze.name,ze.deleted,ze.character,ze.propertyName,ze.macroName],color:$F},{tag:[ze.variableName],color:Ch},{tag:[ze.function(ze.variableName)],color:Ch},{tag:[ze.labelName],color:"#81a1c1"},{tag:[ze.color,ze.constant(ze.name),ze.standard(ze.name)],color:ec},{tag:[ze.definition(ze.name),ze.separator],color:I_},{tag:[ze.brace],color:Ch},{tag:[ze.annotation],color:qF},{tag:[ze.number,ze.changed,ze.annotation,ze.modifier,ze.self,ze.namespace],color:OS},{tag:[ze.typeName,ze.className],color:IS},{tag:[ze.operator,ze.operatorKeyword],color:I_},{tag:[ze.tagName],color:OS},{tag:[ze.squareBracket],color:"#bf616a"},{tag:[ze.angleBracket],color:WF},{tag:[ze.attributeName],color:IS},{tag:[ze.regexp],color:ec},{tag:[ze.quote],color:OS},{tag:[ze.string],color:I_},{tag:ze.link,color:I_,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[ze.url,ze.escape,ze.special(ze.string)],color:Ch},{tag:[ze.meta],color:$F},{tag:[ze.monospace],color:lv,fontStyle:"italic"},{tag:[ze.comment],color:Cp,fontStyle:"italic"},{tag:ze.strong,fontWeight:"bold",color:ec},{tag:ze.emphasis,fontStyle:"italic",color:ec},{tag:ze.strikethrough,textDecoration:"line-through"},{tag:ze.heading,fontWeight:"bold",color:ec},{tag:ze.special(ze.heading1),fontWeight:"bold",color:ec},{tag:ze.heading1,fontWeight:"bold",color:ec},{tag:[ze.heading2,ze.heading3,ze.heading4],fontWeight:"bold",color:ec},{tag:[ze.heading5,ze.heading6],color:ec},{tag:[ze.atom,ze.bool,ze.special(ze.variableName)],color:WF},{tag:[ze.processingInstruction,ze.inserted],color:Ch},{tag:[ze.contentSeparator],color:IS},{tag:ze.invalid,color:GF,borderBottom:`1px dotted ${qF}`}]))],XF="#2e3440",KF="#3b4252",ZF="#434c5e",O_="#4c566a",LS="#e5e9f0",FS="#eceff4",BS="#8fbcbb",QF="#88c0d0",il="#5e81ac",Sp="#d08770",VS="#ebcb8b",JF="#a3be8c",e2="#d30102",NX=[Rn.theme({"&":{color:XF,backgroundColor:"#ffffff"},".cm-content":{caretColor:KF},".cm-cursor, .cm-dropCursor":{borderLeftColor:KF},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:FS},".cm-panels":{backgroundColor:FS,color:O_},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:`1px solid ${O_}`},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:LS},".cm-activeLine":{backgroundColor:FS},".cm-selectionMatch":{backgroundColor:LS},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${O_}`},"&.cm-focused .cm-matchingBracket":{backgroundColor:FS},".cm-gutters":{backgroundColor:FS,color:XF,border:"none"},".cm-activeLineGutter":{backgroundColor:FS},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:LS},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:LS,borderBottomColor:LS},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:FS,color:O_}}},{dark:!1}),qC(mp.define([{tag:ze.keyword,color:il},{tag:[ze.name,ze.deleted,ze.character,ze.propertyName,ze.macroName],color:Sp},{tag:[ze.variableName],color:Sp},{tag:[ze.function(ze.variableName)],color:il},{tag:[ze.labelName],color:"#81a1c1"},{tag:[ze.color,ze.constant(ze.name),ze.standard(ze.name)],color:il},{tag:[ze.definition(ze.name),ze.separator],color:JF},{tag:[ze.brace],color:BS},{tag:[ze.annotation],color:e2},{tag:[ze.number,ze.changed,ze.annotation,ze.modifier,ze.self,ze.namespace],color:QF},{tag:[ze.typeName,ze.className],color:VS},{tag:[ze.operator,ze.operatorKeyword],color:JF},{tag:[ze.tagName],color:"#b48ead"},{tag:[ze.squareBracket],color:"#bf616a"},{tag:[ze.angleBracket],color:Sp},{tag:[ze.attributeName],color:VS},{tag:[ze.regexp],color:il},{tag:[ze.quote],color:KF},{tag:[ze.string],color:Sp},{tag:ze.link,color:BS,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[ze.url,ze.escape,ze.special(ze.string)],color:Sp},{tag:[ze.meta],color:QF},{tag:[ze.comment],color:ZF,fontStyle:"italic"},{tag:ze.strong,fontWeight:"bold",color:il},{tag:ze.emphasis,fontStyle:"italic",color:il},{tag:ze.strikethrough,textDecoration:"line-through"},{tag:ze.heading,fontWeight:"bold",color:il},{tag:ze.special(ze.heading1),fontWeight:"bold",color:il},{tag:ze.heading1,fontWeight:"bold",color:il},{tag:[ze.heading2,ze.heading3,ze.heading4],fontWeight:"bold",color:il},{tag:[ze.heading5,ze.heading6],color:il},{tag:[ze.atom,ze.bool,ze.special(ze.variableName)],color:Sp},{tag:[ze.processingInstruction,ze.inserted],color:BS},{tag:[ze.contentSeparator],color:VS},{tag:ze.invalid,color:ZF,borderBottom:`1px dotted ${e2}`}]))];class Yu{constructor(){this._darkMode=!1,this._darkMode$=new PI(this._darkMode)}toggleDarkMode(){this._darkMode=!this._darkMode,this._darkMode$.next(this._darkMode)}darkMode(){return this._darkMode$.asObservable()}}Yu.\u0275fac=function(e){return new(e||Yu)},Yu.\u0275prov=nn({token:Yu,factory:Yu.\u0275fac,providedIn:"root"});const LX=["cm"];class cv{set targetContent(e){e&&(this.editorSource=e.nativeElement,this.initEditor())}constructor(e){this.globalSettings=e,this.editorReady=new Promise(t=>{this.editorReadyPromiseResolve=t}),this.theme=NS,this.extensions=this.updateExtensions(),this.text="",this.docChangedDebounceTime=400,this.docChanged=new Pr,this.darkMode=!1,this.docValue$=new Oe,this.invalidInput=!1}ngOnInit(){this.globalSettings.darkMode().subscribe(e=>{this.darkMode=e,this.updateTheme()}),this.docValue$.asObservable().pipe(aD(this.docChangedDebounceTime)).subscribe(e=>{this.docChanged.emit(e)})}ngOnChanges(){this.setEditorContent(this.text)}initEditor(){null!=this.editorSource&&(this.view=new Rn({state:ao.create({doc:this.text,extensions:this.extensions}),parent:this.editorSource}),this.editorReadyPromiseResolve())}setEditorContent(e){var t=this;return oh(function*(){if(yield t.editorReady,null==t.view)return;const r=ao.create({doc:e,extensions:t.extensions});t.view.setState(r)})()}updateTheme(){var e=this;return oh(function*(){if(yield e.editorReady,null==e.view)return;e.theme=e.darkMode?NS:NX,e.updateExtensions();const t=ao.create({doc:e.view.state.doc,extensions:e.extensions});e.view.setState(t)})()}updateExtensions(){null==this.theme&&(this.theme=NS);const e=function Hq(n,e={}){return xh.of({source:n,config:e})}(n=>{try{JSON.parse(n.state.doc.toString())}catch(e){if(!(e instanceof SyntaxError))throw e;const t=function Iq(n,e){let t;return(t=n.message.match(/at position (\d+)/))?Math.min(+t[1],e.length):(t=n.message.match(/at line (\d+) column (\d+)/))?Math.min(e.line(+t[1]).from+ +t[2]-1,e.length):0}(e,n.state.doc);return[{from:t,message:e.message,severity:"error",to:t}]}return[]});return this.extensions=[yX,Rn.lineWrapping,new z9(Oq),e,this.theme,Rn.updateListener.of(t=>{if(t.docChanged)try{const r=JSON.parse(t.state.doc.toString());this.docValue$.next(r)}catch{this.invalidInput=!0}})],this.extensions}onSaveHandler(e){console.log("Save"),e.preventDefault()}onPasteHandler(e){console.log("Pasted")}}cv.\u0275fac=function(e){return new(e||cv)(et(Yu))},cv.\u0275cmp=Qi({type:cv,selectors:[["im-poc1-rdf-editor"]],viewQuery:function(e,t){if(1&e&&Cu(LX,5),2&e){let r;Tc(r=kc())&&(t.targetContent=r.first)}},hostBindings:function(e,t){1&e&&jr("keydown.control.s",function(i){return t.onSaveHandler(i)},0,no)("keydown.control.v",function(i){return t.onPasteHandler(i)},!1,no)},inputs:{text:"text",docChangedDebounceTime:"docChangedDebounceTime"},outputs:{docChanged:"docChanged"},standalone:!0,features:[Vn,nh],decls:3,vars:2,consts:[[1,"container"],["cm",""]],template:function(e,t){1&e&&(_r(0,"div",0),Hs(1,"div",null,1),Vr()),2&e&&Jd("background-color",t.darkMode?"#2e3440":"white")},dependencies:[Mu],styles:[".container[_ngcontent-%COMP%]{height:100%}"]});const sl=new Gt("NgValueAccessor"),VK=["switch"],HK=["*"],zK=new Gt("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})}),jK={provide:sl,useExisting:lt(()=>oB),multi:!0};class sB{constructor(e,t){this.source=e,this.checked=t}}let UK=0;const GK=v8(K0(tO(eO(class{constructor(n){this._elementRef=n}}))));let $K=(()=>{class n extends GK{get required(){return this._required}set required(t){this._required=Pc(t)}get checked(){return this._checked}set checked(t){this._checked=Pc(t),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(t,r,i,s,a,u,h){super(t),this._focusMonitor=r,this._changeDetectorRef=i,this.defaults=a,this._onChange=m=>{},this._onTouched=()=>{},this._required=!1,this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new Pr,this.toggleChange=new Pr,this.tabIndex=parseInt(s)||0,this.color=this.defaultColor=a.color||"accent",this._noopAnimations="NoopAnimations"===u,this.id=this._uniqueId=`${h}${++UK}`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{"keyboard"===t||"program"===t?(this._focused=!0,this._changeDetectorRef.markForCheck()):t||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(t){this.checked=!!t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}}return n.\u0275fac=function(t){Jy()},n.\u0275dir=fn({type:n,inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},features:[Fn]}),n})(),oB=(()=>{class n extends $K{get buttonId(){return`${this.id||this._uniqueId}-button`}constructor(t,r,i,s,a,u){super(t,r,i,s,a,u,"mat-mdc-slide-toggle-"),this._labelId=this._uniqueId+"-label"}_handleClick(){this.toggleChange.emit(),this.defaults.disableToggleValue||(this.checked=!this.checked,this._onChange(this.checked),this.change.emit(new sB(this,this.checked)))}focus(){this._switchElement.nativeElement.focus()}_createChangeEvent(t){return new sB(this,t)}_getAriaLabelledBy(){return this.ariaLabelledby?this.ariaLabelledby:this.ariaLabel?null:this._labelId}}return n.\u0275fac=function(t){return new(t||n)(et(br),et(vD),et(rh),Rd("tabindex"),et(zK),et(Ic,8))},n.\u0275cmp=Qi({type:n,selectors:[["mat-slide-toggle"]],viewQuery:function(t,r){if(1&t&&Cu(VK,5),2&t){let i;Tc(i=kc())&&(r._switchElement=i.first)}},hostAttrs:[1,"mat-mdc-slide-toggle"],hostVars:11,hostBindings:function(t,r){2&t&&(Yx("id",r.id),Vs("tabindex",null)("aria-label",null)("name",null)("aria-labelledby",null),ys("mat-mdc-slide-toggle-focused",r._focused)("mat-mdc-slide-toggle-checked",r.checked)("_mat-animation-noopable",r._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matSlideToggle"],features:[Hr([jK]),Fn],ngContentSelectors:HK,decls:17,vars:24,consts:[[1,"mdc-form-field"],["role","switch","type","button",1,"mdc-switch",3,"tabIndex","disabled","click"],["switch",""],[1,"mdc-switch__track"],[1,"mdc-switch__handle-track"],[1,"mdc-switch__handle"],[1,"mdc-switch__shadow"],[1,"mdc-elevation-overlay"],[1,"mdc-switch__ripple"],["mat-ripple","",1,"mat-mdc-slide-toggle-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-switch__icons"],["viewBox","0 0 24 24",1,"mdc-switch__icon","mdc-switch__icon--on"],["d","M19.69,5.23L8.96,15.96l-4.23-4.23L2.96,13.5l6,6L21.46,7L19.69,5.23z"],["viewBox","0 0 24 24",1,"mdc-switch__icon","mdc-switch__icon--off"],["d","M20 13H4v-2h16v2z"],[3,"for","click"]],template:function(t,r){if(1&t&&(Eu(),_r(0,"div",0)(1,"button",1,2),jr("click",function(){return r._handleClick()}),Hs(3,"div",3),_r(4,"div",4)(5,"div",5)(6,"div",6),Hs(7,"div",7),Vr(),_r(8,"div",8),Hs(9,"div",9),Vr(),_r(10,"div",10),function ry(){yn.lFrame.currentNamespace="svg"}(),_r(11,"svg",11),Hs(12,"path",12),Vr(),_r(13,"svg",13),Hs(14,"path",14),Vr()()()()(),function Jp(){!function Sd(){yn.lFrame.currentNamespace=null}()}(),_r(15,"label",15),jr("click",function(s){return s.stopPropagation()}),Wo(16),Vr()()),2&t){const i=function tA(n){return function nu(n,e){return n[e]}(function xl(){return yn.lFrame.contextLView}(),22+n)}(2);ys("mdc-form-field--align-end","before"==r.labelPosition),di(1),ys("mdc-switch--selected",r.checked)("mdc-switch--unselected",!r.checked)("mdc-switch--checked",r.checked)("mdc-switch--disabled",r.disabled),ri("tabIndex",r.tabIndex)("disabled",r.disabled),Vs("id",r.buttonId)("name",r.name)("aria-label",r.ariaLabel)("aria-labelledby",r._getAriaLabelledBy())("aria-describedby",r.ariaDescribedby)("aria-required",r.required||null)("aria-checked",r.checked),di(8),ri("matRippleTrigger",i)("matRippleDisabled",r.disableRipple||r.disabled)("matRippleCentered",!0),di(6),ri("for",r.buttonId),Vs("id",r._labelId)}},dependencies:[Z0],styles:['.mdc-form-field{display:inline-flex;align-items:center;vertical-align:middle}.mdc-form-field[hidden]{display:none}.mdc-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{margin-left:auto;margin-right:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{padding-left:0;padding-right:4px}.mdc-form-field--nowrap>label{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{margin-left:0;margin-right:auto}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{padding-left:4px;padding-right:0}.mdc-form-field--space-between{justify-content:space-between}.mdc-form-field--space-between>label{margin:0}[dir=rtl] .mdc-form-field--space-between>label,.mdc-form-field--space-between>label[dir=rtl]{margin:0}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1);background-color:var(--mdc-elevation-overlay-color, #fff)}.mdc-switch{align-items:center;background:none;border:none;cursor:pointer;display:inline-flex;flex-shrink:0;margin:0;outline:none;overflow:visible;padding:0;position:relative}.mdc-switch[hidden]{display:none}.mdc-switch:disabled{cursor:default;pointer-events:none}.mdc-switch__track{overflow:hidden;position:relative;width:100%}.mdc-switch__track::before,.mdc-switch__track::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";height:100%;left:0;position:absolute;width:100%}@media screen and (forced-colors: active){.mdc-switch__track::before,.mdc-switch__track::after{border-color:currentColor}}.mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0)}.mdc-switch__track::after{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(-100%)}[dir=rtl] .mdc-switch__track::after,.mdc-switch__track[dir=rtl]::after{transform:translateX(100%)}.mdc-switch--selected .mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__track::before,.mdc-switch--selected .mdc-switch__track[dir=rtl]::before{transform:translateX(-100%)}.mdc-switch--selected .mdc-switch__track::after{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0)}.mdc-switch__handle-track{height:100%;pointer-events:none;position:absolute;top:0;transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);left:0;right:auto;transform:translateX(0)}[dir=rtl] .mdc-switch__handle-track,.mdc-switch__handle-track[dir=rtl]{left:auto;right:0}.mdc-switch--selected .mdc-switch__handle-track{transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__handle-track,.mdc-switch--selected .mdc-switch__handle-track[dir=rtl]{transform:translateX(-100%)}.mdc-switch__handle{display:flex;pointer-events:auto;position:absolute;top:50%;transform:translateY(-50%);left:0;right:auto}[dir=rtl] .mdc-switch__handle,.mdc-switch__handle[dir=rtl]{left:auto;right:0}.mdc-switch__handle::before,.mdc-switch__handle::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";width:100%;height:100%;left:0;position:absolute;top:0;transition:background-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1),border-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);z-index:-1}@media screen and (forced-colors: active){.mdc-switch__handle::before,.mdc-switch__handle::after{border-color:currentColor}}.mdc-switch__shadow{border-radius:inherit;bottom:0;left:0;position:absolute;right:0;top:0}.mdc-elevation-overlay{bottom:0;left:0;right:0;top:0}.mdc-switch__ripple{left:50%;position:absolute;top:50%;transform:translate(-50%, -50%);z-index:-1}.mdc-switch:disabled .mdc-switch__ripple{display:none}.mdc-switch__icons{height:100%;position:relative;width:100%;z-index:1}.mdc-switch__icon{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;opacity:0;transition:opacity 30ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-switch--selected .mdc-switch__icon--on,.mdc-switch--unselected .mdc-switch__icon--off{opacity:1;transition:opacity 45ms 30ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle{display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-mdc-slide-toggle .mdc-switch{width:var(--mdc-switch-track-width, 36px)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-selected-handle-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-hover-handle-color, #310077)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-focus-handle-color, #310077)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-selected-pressed-handle-color, #310077)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-selected-handle-color, #424242)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-unselected-handle-color, #616161)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-hover-handle-color, #212121)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-focus-handle-color, #212121)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-unselected-pressed-handle-color, #212121)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-unselected-handle-color, #424242)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__handle::before{background:var(--mdc-switch-handle-surface-color, var(--mdc-theme-surface, #fff))}.mat-mdc-slide-toggle .mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation, 0px 2px 1px -1px rgba(0, 0, 0, 0.2), 0px 1px 1px 0px rgba(0, 0, 0, 0.14), 0px 1px 3px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-slide-toggle .mdc-switch:disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__focus-ring-wrapper,.mat-mdc-slide-toggle .mdc-switch .mdc-switch__handle{height:var(--mdc-switch-handle-height, 20px)}.mat-mdc-slide-toggle .mdc-switch:disabled .mdc-switch__handle::after{opacity:var(--mdc-switch-disabled-handle-opacity, 0.38)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__handle{border-radius:var(--mdc-switch-handle-shape, 10px)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__handle{width:var(--mdc-switch-handle-width, 20px)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__handle-track{width:calc(100% - var(--mdc-switch-handle-width, 20px))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled .mdc-switch__icon{fill:var(--mdc-switch-selected-icon-color, var(--mdc-theme-on-primary, #fff))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-selected-icon-color, var(--mdc-theme-on-primary, #fff))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled .mdc-switch__icon{fill:var(--mdc-switch-unselected-icon-color, var(--mdc-theme-on-primary, #fff))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-unselected-icon-color, var(--mdc-theme-on-primary, #fff))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-selected-icon-opacity, 0.38)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-unselected-icon-opacity, 0.38)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected .mdc-switch__icon{width:var(--mdc-switch-selected-icon-size, 18px);height:var(--mdc-switch-selected-icon-size, 18px)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected .mdc-switch__icon{width:var(--mdc-switch-unselected-icon-size, 18px);height:var(--mdc-switch-unselected-icon-size, 18px)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-hover-state-layer-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:focus .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:focus .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-focus-state-layer-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-pressed-state-layer-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-hover-state-layer-color, #424242)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-focus-state-layer-color, #424242)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-pressed-state-layer-color, #424242)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:hover:not(:focus):hover .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:hover:not(:focus).mdc-ripple-surface--hover .mdc-switch__ripple::before{opacity:var(--mdc-switch-selected-hover-state-layer-opacity, 0.04)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:focus.mdc-ripple-upgraded--background-focused .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:focus:not(.mdc-ripple-upgraded):focus .mdc-switch__ripple::before{transition-duration:75ms;opacity:var(--mdc-switch-selected-focus-state-layer-opacity, 0.12)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active:not(.mdc-ripple-upgraded) .mdc-switch__ripple::after{transition:opacity 150ms linear}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active:not(.mdc-ripple-upgraded):active .mdc-switch__ripple::after{transition-duration:75ms;opacity:var(--mdc-switch-selected-pressed-state-layer-opacity, 0.1)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-switch-selected-pressed-state-layer-opacity, 0.1)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus):hover .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus).mdc-ripple-surface--hover .mdc-switch__ripple::before{opacity:var(--mdc-switch-unselected-hover-state-layer-opacity, 0.04)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:focus.mdc-ripple-upgraded--background-focused .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:focus:not(.mdc-ripple-upgraded):focus .mdc-switch__ripple::before{transition-duration:75ms;opacity:var(--mdc-switch-unselected-focus-state-layer-opacity, 0.12)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active:not(.mdc-ripple-upgraded) .mdc-switch__ripple::after{transition:opacity 150ms linear}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active:not(.mdc-ripple-upgraded):active .mdc-switch__ripple::after{transition-duration:75ms;opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity, 0.1)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity, 0.1)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__ripple{height:var(--mdc-switch-state-layer-size, 48px);width:var(--mdc-switch-state-layer-size, 48px)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__track{height:var(--mdc-switch-track-height, 14px)}.mat-mdc-slide-toggle .mdc-switch:disabled .mdc-switch__track{opacity:var(--mdc-switch-disabled-track-opacity, 0.12)}.mat-mdc-slide-toggle .mdc-switch:enabled .mdc-switch__track::after{background:var(--mdc-switch-selected-track-color, #d7bbff)}.mat-mdc-slide-toggle .mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-hover-track-color, #d7bbff)}.mat-mdc-slide-toggle .mdc-switch:enabled:focus:not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-focus-track-color, #d7bbff)}.mat-mdc-slide-toggle .mdc-switch:enabled:active .mdc-switch__track::after{background:var(--mdc-switch-selected-pressed-track-color, #d7bbff)}.mat-mdc-slide-toggle .mdc-switch:disabled .mdc-switch__track::after{background:var(--mdc-switch-disabled-selected-track-color, #424242)}.mat-mdc-slide-toggle .mdc-switch:enabled .mdc-switch__track::before{background:var(--mdc-switch-unselected-track-color, #e0e0e0)}.mat-mdc-slide-toggle .mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-hover-track-color, #e0e0e0)}.mat-mdc-slide-toggle .mdc-switch:enabled:focus:not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-focus-track-color, #e0e0e0)}.mat-mdc-slide-toggle .mdc-switch:enabled:active .mdc-switch__track::before{background:var(--mdc-switch-unselected-pressed-track-color, #e0e0e0)}.mat-mdc-slide-toggle .mdc-switch:disabled .mdc-switch__track::before{background:var(--mdc-switch-disabled-unselected-track-color, #424242)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__track{border-radius:var(--mdc-switch-track-shape, 7px)}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple,.mat-mdc-slide-toggle .mdc-switch__ripple::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple:not(:empty),.mat-mdc-slide-toggle .mdc-switch__ripple::after:not(:empty){transform:translateZ(0)}.mat-mdc-slide-toggle .mdc-switch__ripple::after{content:"";opacity:0}.mat-mdc-slide-toggle .mdc-switch:hover .mdc-switch__ripple::after{opacity:.04;transition:opacity 75ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mdc-switch .mdc-switch__ripple::after{opacity:.12}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mat-mdc-focus-indicator::before{content:""}.mat-mdc-slide-toggle .mat-ripple-element{opacity:.12}.mat-mdc-slide-toggle .mat-mdc-focus-indicator::before{border-radius:50%}.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle-track,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-elevation-overlay,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__icon,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::after,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::after{transition:none}'],encapsulation:2,changeDetection:0}),n})(),aB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=gr({}),n})(),YK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=gr({imports:[aB,pa,aO,Mu,aB,pa]}),n})();const XK=["*",[["mat-toolbar-row"]]],KK=["*","mat-toolbar-row"],ZK=K0(class{constructor(n){this._elementRef=n}});let QK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=fn({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),JK=(()=>{class n extends ZK{constructor(t,r,i){super(t),this._platform=r,this._document=i}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(t){return new(t||n)(et(br),et(zs),et(sr))},n.\u0275cmp=Qi({type:n,selectors:[["mat-toolbar"]],contentQueries:function(t,r,i){if(1&t&&function jT(n,e,t,r){const i=Un();if(i.firstCreatePass){const s=Tr();GT(i,new HT(e,t,r),s.index),function A3(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(i,n),2==(2&t)&&(i.staticContentQueries=!0)}UT(i,At(),t)}(i,QK,5),2&t){let s;Tc(s=kc())&&(r._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,r){2&t&&ys("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",0===r._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[Fn],ngContentSelectors:KK,decls:2,vars:0,template:function(t,r){1&t&&(Eu(XK),Wo(0),Wo(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color: inherit;--mdc-outlined-button-label-text-color: inherit}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),n})(),eZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=gr({imports:[pa,pa]}),n})();class gv{constructor(e,t){this.document=e,this.globalSettings=t,this.darkMode=!1}ngOnInit(){this.globalSettings.darkMode().subscribe(e=>{this.darkMode=e,this.document.body.style.backgroundColor=e?"#bbb":"#eee"})}}gv.\u0275fac=function(e){return new(e||gv)(et(sr),et(Yu))},gv.\u0275cmp=Qi({type:gv,selectors:[["im-poc1-top-bar"]],standalone:!0,features:[nh],decls:9,vars:3,consts:[[1,"toolbar"],[1,"toggle"],[1,"mr-8"],[3,"checked","click"]],template:function(e,t){1&e&&(_r(0,"mat-toolbar",0)(1,"h2"),eh(2,"JSON-LD graph view"),Vr(),_r(3,"div",1)(4,"mat-icon",2),eh(5,"brightness_5"),Vr(),_r(6,"mat-slide-toggle",3),jr("click",function(){return t.globalSettings.toggleDarkMode()}),Vr(),_r(7,"mat-icon"),eh(8,"bedtime"),Vr()()()),2&e&&(ys("dark",t.darkMode),di(6),ri("checked",t.darkMode))},dependencies:[Mu,eZ,JK,YK,oB,CD,MO],styles:[".toolbar[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;box-shadow:#00000026 1.95px 1.95px 2.6px;background-color:#fff}.toggle[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;gap:3px}.dark[_ngcontent-%COMP%]{color:#fff!important;background-color:#020b4a!important}@media screen and (max-width: 500px){h2[_ngcontent-%COMP%]{font-size:1em}}"]});class lB{}class tZ{}const Hc="*";function f1(n,e){return{type:7,name:n,definitions:e,options:{}}}function mv(n,e=null){return{type:4,styles:e,timings:n}}function cB(n,e=null){return{type:2,steps:n,options:e}}function ol(n){return{type:6,styles:n,offset:null}}function j_(n,e,t){return{type:0,name:n,styles:e,options:t}}function uB(n){return{type:5,steps:n}}function U_(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function p1(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function dB(n){Promise.resolve().then(n)}class vv{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){dB(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class hB{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?dB(()=>this._onFinish()):this.players.forEach(a=>{a.onDone(()=>{++t==s&&this._onFinish()}),a.onDestroy(()=>{++r==s&&this._onDestroy()}),a.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((a,u)=>Math.max(a,u.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const rZ=[f1("fabToggler",[j_("inactive",ol({transform:"rotate(0deg)"})),j_("active",ol({transform:"rotate(225deg)"})),U_("* <=> *",mv("200ms cubic-bezier(0.4, 0.0, 0.2, 1)"))]),f1("speedDialStagger",[U_("* => *",[p1(":enter",ol({opacity:0}),{optional:!0}),p1(":enter",function nZ(n,e){return{type:12,timings:n,animation:e}}("40ms",[mv("200ms cubic-bezier(0.4, 0.0, 0.2, 1)",uB([ol({opacity:0,transform:"translateY(10px)"}),ol({opacity:1,transform:"translateY(0)"})]))]),{optional:!0}),p1(":leave",mv("200ms cubic-bezier(0.4, 0.0, 0.2, 1)",uB([ol({opacity:1}),ol({opacity:0})])),{optional:!0})])])],fB=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],pB=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],iZ=["mat-fab",""],sZ=["mat-mini-fab",""],aZ=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],lZ=K0(eO(tO(class{constructor(n){this._elementRef=n}})));let gB=(()=>{class n extends lZ{constructor(t,r,i,s){super(t),this._platform=r,this._ngZone=i,this._animationMode=s,this._focusMonitor=Ro(vD),this._isFab=!1;const a=t.nativeElement.classList;for(const u of aZ)this._hasHostAttributes(u.selector)&&u.mdcClasses.forEach(h=>{a.add(h)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t="program",r){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,r):this._elementRef.nativeElement.focus(r)}_hasHostAttributes(...t){return t.some(r=>this._elementRef.nativeElement.hasAttribute(r))}_isRippleDisabled(){return this.disableRipple||this.disabled}}return n.\u0275fac=function(t){Jy()},n.\u0275dir=fn({type:n,viewQuery:function(t,r){if(1&t&&Cu(Z0,5),2&t){let i;Tc(i=kc())&&(r.ripple=i.first)}},features:[Fn]}),n})();const mB=new Gt("mat-mdc-fab-default-options",{providedIn:"root",factory:vB});function vB(){return{color:"accent"}}const G_=vB();let uZ=(()=>{class n extends gB{get extended(){return this._extended}set extended(t){this._extended=Pc(t)}constructor(t,r,i,s,a){super(t,r,i,s),this._options=a,this._isFab=!0,this._options=this._options||G_,this.color=this.defaultColor=this._options.color||G_.color}}return n.\u0275fac=function(t){return new(t||n)(et(br),et(zs),et(Kn),et(Ic,8),et(mB,8))},n.\u0275cmp=Qi({type:n,selectors:[["button","mat-fab",""]],hostVars:11,hostBindings:function(t,r){2&t&&(Vs("disabled",r.disabled||null),ys("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0)("mdc-fab--extended",r.extended)("mat-mdc-extended-fab",r.extended))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",extended:"extended"},exportAs:["matButton"],features:[Fn],attrs:iZ,ngContentSelectors:pB,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(t,r){1&t&&(Eu(fB),Hs(0,"span",0),Wo(1),_r(2,"span",1),Wo(3,1),Vr(),Wo(4,2),Hs(5,"span",2)(6,"span",3)(7,"span",4)),2&t&&(ys("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab),di(6),ri("matRippleDisabled",r._isRippleDisabled())("matRippleTrigger",r._elementRef.nativeElement))},dependencies:[Z0],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-fab{position:relative;display:inline-flex;position:relative;align-items:center;justify-content:center;box-sizing:border-box;width:56px;height:56px;padding:0;border:none;fill:currentColor;text-decoration:none;cursor:pointer;user-select:none;-moz-appearance:none;-webkit-appearance:none;overflow:visible;transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1),opacity 15ms linear 30ms,transform 270ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-fab .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-fab[hidden]{display:none}.mdc-fab::-moz-focus-inner{padding:0;border:0}.mdc-fab .mdc-fab__focus-ring{position:absolute}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    )}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{border-color:CanvasText}}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{border-color:CanvasText}}.mdc-fab:active,.mdc-fab:focus{outline:none}.mdc-fab:hover{cursor:pointer}.mdc-fab>svg{width:100%}.mdc-fab--mini{width:40px;height:40px}.mdc-fab--extended{border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mdc-fab--extended .mdc-fab__ripple{border-radius:24px}.mdc-fab--extended .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mdc-fab--extended .mdc-fab__icon,.mdc-fab--extended .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mdc-fab--extended .mdc-fab__label+.mdc-fab__icon,.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mdc-fab--touch{margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-fab--touch .mdc-fab__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-fab::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-fab::before{border-color:CanvasText}}.mdc-fab__label{justify-content:flex-start;text-overflow:ellipsis;white-space:nowrap;overflow-x:hidden;overflow-y:visible}.mdc-fab__icon{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mdc-fab .mdc-fab__icon{display:inline-flex;align-items:center;justify-content:center}.mdc-fab--exited{transform:scale(0);opacity:0;transition:opacity 15ms linear 150ms,transform 180ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab--exited .mdc-fab__icon{transform:scale(0);transition:transform 135ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab .mdc-fab__icon{width:24px;height:24px;font-size:24px}.mdc-fab:not(.mdc-fab--extended){border-radius:50%}.mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:50%}.mat-mdc-fab,.mat-mdc-mini-fab{-webkit-tap-highlight-color:rgba(0,0,0,0);background-color:var(--mdc-fab-container-color, transparent);box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);color:var(--mat-mdc-fab-color, inherit);flex-shrink:0}.mat-mdc-fab .mat-mdc-button-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-fab .mat-ripple-element,.mat-mdc-mini-fab .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-fab .mdc-button__label,.mat-mdc-mini-fab .mdc-button__label{z-index:1}.mat-mdc-fab .mat-mdc-focus-indicator,.mat-mdc-mini-fab .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-fab:focus .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-fab .mat-mdc-button-touch-target,.mat-mdc-mini-fab .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-fab._mat-animation-noopable,.mat-mdc-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-fab:not(:disabled) .mdc-fab__icon,.mat-mdc-mini-fab:not(:disabled) .mdc-fab__icon{color:var(--mdc-fab-icon-color, inherit)}.mat-mdc-fab:not(.mdc-fab--extended),.mat-mdc-mini-fab:not(.mdc-fab--extended){border-radius:var(--mdc-fab-container-shape, 50%)}.mat-mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple,.mat-mdc-mini-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:var(--mdc-fab-container-shape, 50%)}.mat-mdc-fab:hover,.mat-mdc-fab:focus,.mat-mdc-mini-fab:hover,.mat-mdc-mini-fab:focus{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12)}.mat-mdc-fab:active,.mat-mdc-fab:focus:active,.mat-mdc-mini-fab:active,.mat-mdc-mini-fab:focus:active{box-shadow:0px 7px 8px -4px rgba(0, 0, 0, 0.2), 0px 12px 17px 2px rgba(0, 0, 0, 0.14), 0px 5px 22px 4px rgba(0, 0, 0, 0.12)}.mat-mdc-fab[disabled],.mat-mdc-mini-fab[disabled]{cursor:default;pointer-events:none;box-shadow:0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-fab:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-mini-fab:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}.mat-mdc-fab .mat-icon,.mat-mdc-fab .material-icons,.mat-mdc-mini-fab .mat-icon,.mat-mdc-mini-fab .material-icons{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mat-mdc-fab .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-extended-fab{border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mat-mdc-extended-fab .mdc-fab__ripple{border-radius:24px}.mat-mdc-extended-fab .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab .mdc-fab__icon,.mat-mdc-extended-fab .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon,.mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mat-mdc-extended-fab>.mat-icon,.mat-mdc-extended-fab>.material-icons{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab>.mat-icon,[dir=rtl] .mat-mdc-extended-fab>.material-icons,.mat-mdc-extended-fab>.mat-icon[dir=rtl],.mat-mdc-extended-fab>.material-icons[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mdc-button__label+.mat-icon,.mat-mdc-extended-fab .mdc-button__label+.material-icons{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.material-icons,.mat-mdc-extended-fab .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-extended-fab .mdc-button__label+.material-icons[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mat-mdc-extended-fab .mat-mdc-button-touch-target{width:100%}'],encapsulation:2,changeDetection:0}),n})(),dZ=(()=>{class n extends gB{constructor(t,r,i,s,a){super(t,r,i,s),this._options=a,this._isFab=!0,this._options=this._options||G_,this.color=this.defaultColor=this._options.color||G_.color}}return n.\u0275fac=function(t){return new(t||n)(et(br),et(zs),et(Kn),et(Ic,8),et(mB,8))},n.\u0275cmp=Qi({type:n,selectors:[["button","mat-mini-fab",""]],hostVars:7,hostBindings:function(t,r){2&t&&(Vs("disabled",r.disabled||null),ys("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Fn],attrs:sZ,ngContentSelectors:pB,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(t,r){1&t&&(Eu(fB),Hs(0,"span",0),Wo(1),_r(2,"span",1),Wo(3,1),Vr(),Wo(4,2),Hs(5,"span",2)(6,"span",3)(7,"span",4)),2&t&&(ys("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab),di(6),ri("matRippleDisabled",r._isRippleDisabled())("matRippleTrigger",r._elementRef.nativeElement))},dependencies:[Z0],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-fab{position:relative;display:inline-flex;position:relative;align-items:center;justify-content:center;box-sizing:border-box;width:56px;height:56px;padding:0;border:none;fill:currentColor;text-decoration:none;cursor:pointer;user-select:none;-moz-appearance:none;-webkit-appearance:none;overflow:visible;transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1),opacity 15ms linear 30ms,transform 270ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-fab .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-fab[hidden]{display:none}.mdc-fab::-moz-focus-inner{padding:0;border:0}.mdc-fab .mdc-fab__focus-ring{position:absolute}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    )}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{border-color:CanvasText}}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{border-color:CanvasText}}.mdc-fab:active,.mdc-fab:focus{outline:none}.mdc-fab:hover{cursor:pointer}.mdc-fab>svg{width:100%}.mdc-fab--mini{width:40px;height:40px}.mdc-fab--extended{border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mdc-fab--extended .mdc-fab__ripple{border-radius:24px}.mdc-fab--extended .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mdc-fab--extended .mdc-fab__icon,.mdc-fab--extended .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mdc-fab--extended .mdc-fab__label+.mdc-fab__icon,.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mdc-fab--touch{margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-fab--touch .mdc-fab__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-fab::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-fab::before{border-color:CanvasText}}.mdc-fab__label{justify-content:flex-start;text-overflow:ellipsis;white-space:nowrap;overflow-x:hidden;overflow-y:visible}.mdc-fab__icon{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mdc-fab .mdc-fab__icon{display:inline-flex;align-items:center;justify-content:center}.mdc-fab--exited{transform:scale(0);opacity:0;transition:opacity 15ms linear 150ms,transform 180ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab--exited .mdc-fab__icon{transform:scale(0);transition:transform 135ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab .mdc-fab__icon{width:24px;height:24px;font-size:24px}.mdc-fab:not(.mdc-fab--extended){border-radius:50%}.mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:50%}.mat-mdc-fab,.mat-mdc-mini-fab{-webkit-tap-highlight-color:rgba(0,0,0,0);background-color:var(--mdc-fab-container-color, transparent);box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);color:var(--mat-mdc-fab-color, inherit);flex-shrink:0}.mat-mdc-fab .mat-mdc-button-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-fab .mat-ripple-element,.mat-mdc-mini-fab .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-fab .mdc-button__label,.mat-mdc-mini-fab .mdc-button__label{z-index:1}.mat-mdc-fab .mat-mdc-focus-indicator,.mat-mdc-mini-fab .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-fab:focus .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-fab .mat-mdc-button-touch-target,.mat-mdc-mini-fab .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-fab._mat-animation-noopable,.mat-mdc-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-fab:not(:disabled) .mdc-fab__icon,.mat-mdc-mini-fab:not(:disabled) .mdc-fab__icon{color:var(--mdc-fab-icon-color, inherit)}.mat-mdc-fab:not(.mdc-fab--extended),.mat-mdc-mini-fab:not(.mdc-fab--extended){border-radius:var(--mdc-fab-container-shape, 50%)}.mat-mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple,.mat-mdc-mini-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:var(--mdc-fab-container-shape, 50%)}.mat-mdc-fab:hover,.mat-mdc-fab:focus,.mat-mdc-mini-fab:hover,.mat-mdc-mini-fab:focus{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12)}.mat-mdc-fab:active,.mat-mdc-fab:focus:active,.mat-mdc-mini-fab:active,.mat-mdc-mini-fab:focus:active{box-shadow:0px 7px 8px -4px rgba(0, 0, 0, 0.2), 0px 12px 17px 2px rgba(0, 0, 0, 0.14), 0px 5px 22px 4px rgba(0, 0, 0, 0.12)}.mat-mdc-fab[disabled],.mat-mdc-mini-fab[disabled]{cursor:default;pointer-events:none;box-shadow:0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-fab:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-mini-fab:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}.mat-mdc-fab .mat-icon,.mat-mdc-fab .material-icons,.mat-mdc-mini-fab .mat-icon,.mat-mdc-mini-fab .material-icons{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mat-mdc-fab .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-extended-fab{border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mat-mdc-extended-fab .mdc-fab__ripple{border-radius:24px}.mat-mdc-extended-fab .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab .mdc-fab__icon,.mat-mdc-extended-fab .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon,.mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mat-mdc-extended-fab>.mat-icon,.mat-mdc-extended-fab>.material-icons{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab>.mat-icon,[dir=rtl] .mat-mdc-extended-fab>.material-icons,.mat-mdc-extended-fab>.mat-icon[dir=rtl],.mat-mdc-extended-fab>.material-icons[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mdc-button__label+.mat-icon,.mat-mdc-extended-fab .mdc-button__label+.material-icons{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.material-icons,.mat-mdc-extended-fab .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-extended-fab .mdc-button__label+.material-icons[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mat-mdc-extended-fab .mat-mdc-button-touch-target{width:100%}'],encapsulation:2,changeDetection:0}),n})(),hZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=gr({imports:[pa,aO,pa]}),n})();const fZ=["addListener","removeListener"],pZ=["addEventListener","removeEventListener"],gZ=["on","off"];function $_(n,e,t,r){if(q(t)&&(r=t,t=void 0),r)return $_(n,e,t).pipe(fD(r));const[i,s]=function yZ(n){return q(n.addEventListener)&&q(n.removeEventListener)}(n)?pZ.map(a=>u=>n[a](e,u,t)):function mZ(n){return q(n.addListener)&&q(n.removeListener)}(n)?fZ.map(yB(n,e)):function vZ(n){return q(n.on)&&q(n.off)}(n)?gZ.map(yB(n,e)):[];if(!i&&Si(n))return Ta(a=>$_(a,e,t))(ls(n));if(!i)throw new TypeError("Invalid event target");return new Ie(a=>{const u=(...h)=>a.next(1<h.length?h:h[0]);return i(u),()=>s(u)})}function yB(n,e){return t=>r=>n[t](e,r)}const yv={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=yv;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(s=>{t=void 0,n(s)});return new F(()=>t?.(i))},requestAnimationFrame(...n){const{delegate:e}=yv;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=yv;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0},wZ=new class _Z extends sD{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class bZ extends iD{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=yv.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:s}=e;null!=t&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==t&&(yv.cancelAnimationFrame(t),e._scheduled=void 0)}});let m1,xZ=1;const W_={};function bB(n){return n in W_&&(delete W_[n],!0)}const EZ={setImmediate(n){const e=xZ++;return W_[e]=!0,m1||(m1=Promise.resolve()),m1.then(()=>bB(e)&&n()),e},clearImmediate(n){bB(n)}},{setImmediate:DZ,clearImmediate:CZ}=EZ,q_={setImmediate(...n){const{delegate:e}=q_;return(e?.setImmediate||DZ)(...n)},clearImmediate(n){const{delegate:e}=q_;return(e?.clearImmediate||CZ)(n)},delegate:void 0},AZ=new class MZ extends sD{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class SZ extends iD{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=q_.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:s}=e;null!=t&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==t&&(q_.clearImmediate(t),e._scheduled=void 0)}});function v1(n,e=oD){return function TZ(n){return pt((e,t)=>{let r=!1,i=null,s=null,a=!1;const u=()=>{if(s?.unsubscribe(),s=null,r){r=!1;const m=i;i=null,t.next(m)}a&&t.complete()},h=()=>{s=null,a&&t.complete()};e.subscribe(at(t,m=>{r=!0,i=m,s||ls(n(m)).subscribe(s=at(t,u,h))},()=>{a=!0,(!r||!s||s.closed)&&t.complete()}))})}(()=>function IZ(n=0,e,t=uG){let r=-1;return null!=e&&(id(e)?t=e:r=e),new Ie(i=>{let s=function kZ(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let a=0;return t.schedule(function(){i.closed||(i.next(a++),0<=r?this.schedule(void 0,r):i.complete())},s)})}(n,e))}const OZ=["contentWrapper"],RZ=["*"],PZ=new Gt("VIRTUAL_SCROLL_STRATEGY");let bv=(()=>{class n{constructor(t,r,i){this._ngZone=t,this._platform=r,this._scrolled=new Oe,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Ie(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(v1(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Iu()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(dD(s=>!s||i.indexOf(s)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,s)=>{this._scrollableContainsElement(s,t)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=Yf(r),s=t.getElementRef().nativeElement;do{if(i==s)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>$_(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(St(Kn),St(zs),St(sr,8))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),_B=(()=>{class n{constructor(t,r,i,s){this.elementRef=t,this.scrollDispatcher=r,this.ngZone=i,this.dir=s,this._destroyed=new Oe,this._elementScrolled=new Ie(a=>this.ngZone.runOutsideAngular(()=>$_(this.elementRef.nativeElement,"scroll").pipe(qo(this._destroyed)).subscribe(a)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const r=this.elementRef.nativeElement,i=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=i?t.end:t.start),null==t.right&&(t.right=i?t.start:t.end),null!=t.bottom&&(t.top=r.scrollHeight-r.clientHeight-t.bottom),i&&0!=dm()?(null!=t.left&&(t.right=r.scrollWidth-r.clientWidth-t.left),2==dm()?t.left=t.right:1==dm()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=r.scrollWidth-r.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const r=this.elementRef.nativeElement;RI()?r.scrollTo(t):(null!=t.top&&(r.scrollTop=t.top),null!=t.left&&(r.scrollLeft=t.left))}measureScrollOffset(t){const r="left",i="right",s=this.elementRef.nativeElement;if("top"==t)return s.scrollTop;if("bottom"==t)return s.scrollHeight-s.clientHeight-s.scrollTop;const a=this.dir&&"rtl"==this.dir.value;return"start"==t?t=a?i:r:"end"==t&&(t=a?r:i),a&&2==dm()?t==r?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:a&&1==dm()?t==r?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:t==r?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}}return n.\u0275fac=function(t){return new(t||n)(et(br),et(bv),et(Kn),et(hm,8))},n.\u0275dir=fn({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0}),n})(),y1=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new Oe,this._changeListener=s=>{this._change.next(s)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,s=i.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-s.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(v1(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(St(zs),St(Kn),St(sr,8))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const wB=new Gt("VIRTUAL_SCROLLABLE");let FZ=(()=>{class n extends _B{constructor(t,r,i,s){super(t,r,i,s)}measureViewportSize(t){const r=this.elementRef.nativeElement;return"horizontal"===t?r.clientWidth:r.clientHeight}}return n.\u0275fac=function(t){return new(t||n)(et(br),et(bv),et(Kn),et(hm,8))},n.\u0275dir=fn({type:n,features:[Fn]}),n})();const VZ=typeof requestAnimationFrame<"u"?wZ:AZ;let HZ=(()=>{class n extends FZ{get orientation(){return this._orientation}set orientation(t){this._orientation!==t&&(this._orientation=t,this._calculateSpacerSize())}get appendOnly(){return this._appendOnly}set appendOnly(t){this._appendOnly=Pc(t)}constructor(t,r,i,s,a,u,h,m){super(t,u,i,a),this.elementRef=t,this._changeDetectorRef=r,this._scrollStrategy=s,this.scrollable=m,this._platform=Ro(zs),this._detachedSubject=new Oe,this._renderedRangeSubject=new Oe,this._orientation="vertical",this._appendOnly=!1,this.scrolledIndexChange=new Ie(v=>this._scrollStrategy.scrolledIndexChange.subscribe(x=>Promise.resolve().then(()=>this.ngZone.run(()=>v.next(x))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=F.EMPTY,this._viewportChanges=h.change().subscribe(()=>{this.checkViewportSize()}),this.scrollable||(this.elementRef.nativeElement.classList.add("cdk-virtual-scrollable"),this.scrollable=this)}ngOnInit(){this._platform.isBrowser&&(this.scrollable===this&&super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.scrollable.elementScrolled().pipe(VI(null),v1(0,VZ)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()})))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(t){this.ngZone.runOutsideAngular(()=>{this._forOf=t,this._forOf.dataStream.pipe(qo(this._detachedSubject)).subscribe(r=>{const i=r.length;i!==this._dataLength&&(this._dataLength=i,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}measureBoundingClientRectWithScrollOffset(t){return this.getElementRef().nativeElement.getBoundingClientRect()[t]}setTotalContentSize(t){this._totalContentSize!==t&&(this._totalContentSize=t,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(t){(function BZ(n,e){return n.start==e.start&&n.end==e.end})(this._renderedRange,t)||(this.appendOnly&&(t={start:0,end:Math.max(this._renderedRange.end,t.end)}),this._renderedRangeSubject.next(this._renderedRange=t),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(t,r="to-start"){t=this.appendOnly&&"to-start"===r?0:t;const s="horizontal"==this.orientation,a=s?"X":"Y";let h=`translate${a}(${Number((s&&this.dir&&"rtl"==this.dir.value?-1:1)*t)}px)`;this._renderedContentOffset=t,"to-end"===r&&(h+=` translate${a}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=h&&(this._renderedContentTransform=h,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(t,r="auto"){const i={behavior:r};"horizontal"===this.orientation?i.start=t:i.top=t,this.scrollable.scrollTo(i)}scrollToIndex(t,r="auto"){this._scrollStrategy.scrollToIndex(t,r)}measureScrollOffset(t){let r;return r=this.scrollable==this?i=>super.measureScrollOffset(i):i=>this.scrollable.measureScrollOffset(i),Math.max(0,r(t??("horizontal"===this.orientation?"start":"top"))-this.measureViewportOffset())}measureViewportOffset(t){let r;const i="left",s="right",a="rtl"==this.dir?.value;r="start"==t?a?s:i:"end"==t?a?i:s:t||("horizontal"===this.orientation?"left":"top");const u=this.scrollable.measureBoundingClientRectWithScrollOffset(r);return this.elementRef.nativeElement.getBoundingClientRect()[r]-u}measureRenderedContentSize(){const t=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?t.offsetWidth:t.offsetHeight}measureRangeSize(t){return this._forOf?this._forOf.measureRangeSize(t,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){this._viewportSize=this.scrollable.measureViewportSize(this.orientation)}_markChangeDetectionNeeded(t){t&&this._runAfterChangeDetection.push(t),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const t=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const r of t)r()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}}return n.\u0275fac=function(t){return new(t||n)(et(br),et(rh),et(Kn),et(PZ,8),et(hm,8),et(bv),et(y1),et(wB,8))},n.\u0275cmp=Qi({type:n,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(t,r){if(1&t&&Cu(OZ,7),2&t){let i;Tc(i=kc())&&(r._contentWrapper=i.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(t,r){2&t&&ys("cdk-virtual-scroll-orientation-horizontal","horizontal"===r.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==r.orientation)},inputs:{orientation:"orientation",appendOnly:"appendOnly"},outputs:{scrolledIndexChange:"scrolledIndexChange"},standalone:!0,features:[Hr([{provide:_B,useFactory:(e,t)=>e||t,deps:[[new Ml,new cf(wB)],n]}]),Fn,nh],ngContentSelectors:RZ,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(t,r){1&t&&(Eu(),_r(0,"div",0,1),Wo(2),Vr(),Hs(3,"div",2)),2&t&&(di(3),Jd("width",r._totalContentWidth)("height",r._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;transform:translateZ(0)}.cdk-virtual-scrollable{overflow:auto;will-change:scroll-position;contain:strict;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{height:1px;transform-origin:0 0;flex:0 0 auto}[dir=rtl] .cdk-virtual-scroll-spacer{transform-origin:100% 0}"],encapsulation:2,changeDetection:0}),n})(),b1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=gr({}),n})(),xB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=gr({imports:[fm,b1,HZ,fm,b1]}),n})();class _1{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class EB extends _1{constructor(e,t,r,i,s){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=i,this.projectableNodes=s}}class zZ extends _1{constructor(e,t,r,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r,this.injector=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class jZ extends _1{constructor(e){super(),this.element=e instanceof br?e.nativeElement:e}}class UZ{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof EB?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof zZ?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof jZ?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class GZ extends UZ{constructor(e,t,r,i,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=a=>{const u=a.element,h=this._document.createComment("dom-portal");u.parentNode.insertBefore(h,u),this.outletElement.appendChild(u),this._attachedPortal=a,super.setDisposeFn(()=>{h.parentNode&&h.parentNode.replaceChild(u,h)})},this._document=s}attachComponentPortal(e){const r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let i;return e.viewContainerRef?(i=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>i.destroy())):(i=r.create(e.injector||this._defaultInjector||Ya.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=e,i}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=e,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let $Z=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=gr({}),n})();const DB=RI();class WZ{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Fi(-this._previousScrollPosition.left),e.style.top=Fi(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,i=this._document.body.style,s=r.scrollBehavior||"",a=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),DB&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),DB&&(r.scrollBehavior=s,i.scrollBehavior=a)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class qZ{constructor(e,t,r,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class CB{enable(){}disable(){}attach(){}}function w1(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function SB(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class YZ{constructor(e,t,r,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();w1(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let XZ=(()=>{class n{constructor(t,r,i,s){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new CB,this.close=a=>new qZ(this._scrollDispatcher,this._ngZone,this._viewportRuler,a),this.block=()=>new WZ(this._viewportRuler,this._document),this.reposition=a=>new YZ(this._scrollDispatcher,this._viewportRuler,this._ngZone,a),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(St(bv),St(y1),St(Kn),St(sr))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class KZ{constructor(e){if(this.scrollStrategy=new CB,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class ZZ{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let MB=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(St(sr))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),QZ=(()=>{class n extends MB{constructor(t,r){super(t),this._ngZone=r,this._keydownListener=i=>{const s=this._attachedOverlays;for(let a=s.length-1;a>-1;a--)if(s[a]._keydownEvents.observers.length>0){const u=s[a]._keydownEvents;this._ngZone?this._ngZone.run(()=>u.next(i)):u.next(i);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(St(sr),St(Kn,8))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),JZ=(()=>{class n extends MB{constructor(t,r,i){super(t),this._platform=r,this._ngZone=i,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=ku(s)},this._clickListener=s=>{const a=ku(s),u="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;const h=this._attachedOverlays.slice();for(let m=h.length-1;m>-1;m--){const v=h[m];if(v._outsidePointerEvents.observers.length<1||!v.hasAttached())continue;if(v.overlayElement.contains(a)||v.overlayElement.contains(u))break;const x=v._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>x.next(s)):x.next(s)}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(St(sr),St(zs),St(Kn,8))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),AB=(()=>{class n{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||uD()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<i.length;s++)i[s].remove()}const r=this._document.createElement("div");r.classList.add(t),uD()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return n.\u0275fac=function(t){return new(t||n)(St(sr),St(zs))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class eQ{constructor(e,t,r,i,s,a,u,h,m,v=!1){this._portalOutlet=e,this._host=t,this._pane=r,this._config=i,this._ngZone=s,this._keyboardDispatcher=a,this._document=u,this._location=h,this._outsideClickDispatcher=m,this._animationsDisabled=v,this._backdropElement=null,this._backdropClick=new Oe,this._attachments=new Oe,this._detachments=new Oe,this._locationChanges=F.EMPTY,this._backdropClickHandler=x=>this._backdropClick.next(x),this._backdropTransitionendHandler=x=>{this._disposeBackdrop(x.target)},this._keydownEvents=new Oe,this._outsidePointerEvents=new Oe,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(W0(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Fi(this._config.width),e.height=Fi(this._config.height),e.minWidth=Fi(this._config.minWidth),e.minHeight=Fi(this._config.minHeight),e.maxWidth=Fi(this._config.maxWidth),e.maxHeight=Fi(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,r){const i=$0(t||[]).filter(s=>!!s);i.length&&(r?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(qo(Bh(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const TB="cdk-overlay-connected-position-bounding-box",tQ=/([A-Za-z%]+)$/;class nQ{get positions(){return this._preferredPositions}constructor(e,t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Oe,this._resizeSubscription=F.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(TB),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,i=this._containerRect,s=[];let a;for(let u of this._preferredPositions){let h=this._getOriginPoint(e,i,u),m=this._getOverlayPoint(h,t,u),v=this._getOverlayFit(m,t,r,u);if(v.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(u,h);this._canFitWithFlexibleDimensions(v,m,r)?s.push({position:u,origin:h,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(h,u)}):(!a||a.overlayFit.visibleArea<v.visibleArea)&&(a={overlayFit:v,overlayPoint:m,originPoint:h,position:u,overlayRect:t})}if(s.length){let u=null,h=-1;for(const m of s){const v=m.boundingBoxRect.width*m.boundingBoxRect.height*(m.position.weight||1);v>h&&(h=v,u=m)}return this._isPushed=!1,void this._applyPosition(u.position,u.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(a.position,a.originPoint);this._applyPosition(a.position,a.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Ah(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(TB),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let i,s;if("center"==r.originX)i=e.left+e.width/2;else{const a=this._isRtl()?e.right:e.left,u=this._isRtl()?e.left:e.right;i="start"==r.originX?a:u}return t.left<0&&(i-=t.left),s="center"==r.originY?e.top+e.height/2:"top"==r.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:i,y:s}}_getOverlayPoint(e,t,r){let i,s;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+i,y:e.y+s}}_getOverlayFit(e,t,r,i){const s=IB(t);let{x:a,y:u}=e,h=this._getOffset(i,"x"),m=this._getOffset(i,"y");h&&(a+=h),m&&(u+=m);let I=0-u,j=u+s.height-r.height,Q=this._subtractOverflows(s.width,0-a,a+s.width-r.width),oe=this._subtractOverflows(s.height,I,j),ve=Q*oe;return{visibleArea:ve,isCompletelyWithinViewport:s.width*s.height===ve,fitsInViewportVertically:oe===s.height,fitsInViewportHorizontally:Q==s.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,s=r.right-t.x,a=kB(this._overlayRef.getConfig().minHeight),u=kB(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=a&&a<=i)&&(e.fitsInViewportHorizontally||null!=u&&u<=s)}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=IB(t),s=this._viewportRect,a=Math.max(e.x+i.width-s.width,0),u=Math.max(e.y+i.height-s.height,0),h=Math.max(s.top-r.top-e.y,0),m=Math.max(s.left-r.left-e.x,0);let v=0,x=0;return v=i.width<=s.width?m||-a:e.x<this._viewportMargin?s.left-r.left-e.x:0,x=i.height<=s.height?h||-u:e.y<this._viewportMargin?s.top-r.top-e.y:0,this._previousPushAmount={x:v,y:x},{x:e.x+v,y:e.y+x}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new ZZ(e,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,i=this._isRtl();let s,a,u,v,x,I;if("top"===t.overlayY)a=e.y,s=r.height-a+this._viewportMargin;else if("bottom"===t.overlayY)u=r.height-e.y+2*this._viewportMargin,s=r.height-u+this._viewportMargin;else{const j=Math.min(r.bottom-e.y+r.top,e.y),Q=this._lastBoundingBoxSize.height;s=2*j,a=e.y-j,s>Q&&!this._isInitialRender&&!this._growAfterOpen&&(a=e.y-Q/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)I=r.width-e.x+this._viewportMargin,v=e.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)x=e.x,v=r.right-e.x;else{const j=Math.min(r.right-e.x+r.left,e.x),Q=this._lastBoundingBoxSize.width;v=2*j,x=e.x-j,v>Q&&!this._isInitialRender&&!this._growAfterOpen&&(x=e.x-Q/2)}return{top:a,left:x,bottom:u,right:I,width:v,height:s}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,a=this._overlayRef.getConfig().maxWidth;i.height=Fi(r.height),i.top=Fi(r.top),i.bottom=Fi(r.bottom),i.width=Fi(r.width),i.left=Fi(r.left),i.right=Fi(r.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(i.maxHeight=Fi(s)),a&&(i.maxWidth=Fi(a))}this._lastBoundingBoxSize=r,Ah(this._boundingBox.style,i)}_resetBoundingBoxStyles(){Ah(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Ah(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},i=this._hasExactPosition(),s=this._hasFlexibleDimensions,a=this._overlayRef.getConfig();if(i){const v=this._viewportRuler.getViewportScrollPosition();Ah(r,this._getExactOverlayY(t,e,v)),Ah(r,this._getExactOverlayX(t,e,v))}else r.position="static";let u="",h=this._getOffset(t,"x"),m=this._getOffset(t,"y");h&&(u+=`translateX(${h}px) `),m&&(u+=`translateY(${m}px)`),r.transform=u.trim(),a.maxHeight&&(i?r.maxHeight=Fi(a.maxHeight):s&&(r.maxHeight="")),a.maxWidth&&(i?r.maxWidth=Fi(a.maxWidth):s&&(r.maxWidth="")),Ah(this._pane.style,r)}_getExactOverlayY(e,t,r){let i={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":i.top=Fi(s.y),i}_getExactOverlayX(e,t,r){let a,i={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),a=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===a?i.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":i.left=Fi(s.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:SB(e,r),isOriginOutsideView:w1(e,r),isOverlayClipped:SB(t,r),isOverlayOutsideView:w1(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&$0(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof br)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function Ah(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function kB(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(tQ);return t&&"px"!==t?null:parseFloat(e)}return n||null}function IB(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const OB="cdk-global-overlay-wrapper";class rQ{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(OB),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:s,maxWidth:a,maxHeight:u}=r,h=!("100%"!==i&&"100vw"!==i||a&&"100%"!==a&&"100vw"!==a),m=!("100%"!==s&&"100vh"!==s||u&&"100%"!==u&&"100vh"!==u),v=this._xPosition,x=this._xOffset,I="rtl"===this._overlayRef.getConfig().direction;let j="",Q="",oe="";h?oe="flex-start":"center"===v?(oe="center",I?Q=x:j=x):I?"left"===v||"end"===v?(oe="flex-end",j=x):("right"===v||"start"===v)&&(oe="flex-start",Q=x):"left"===v||"start"===v?(oe="flex-start",j=x):("right"===v||"end"===v)&&(oe="flex-end",Q=x),e.position=this._cssPosition,e.marginLeft=h?"0":j,e.marginTop=m?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=h?"0":Q,t.justifyContent=oe,t.alignItems=m?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(OB),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let iQ=(()=>{class n{constructor(t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s}global(){return new rQ}flexibleConnectedTo(t){return new nQ(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(St(y1),St(sr),St(zs),St(AB))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),sQ=0,Y_=(()=>{class n{constructor(t,r,i,s,a,u,h,m,v,x,I,j){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=s,this._keyboardDispatcher=a,this._injector=u,this._ngZone=h,this._document=m,this._directionality=v,this._location=x,this._outsideClickDispatcher=I,this._animationsModuleType=j}create(t){const r=this._createHostElement(),i=this._createPaneElement(r),s=this._createPortalOutlet(i),a=new KZ(t);return a.direction=a.direction||this._directionality.value,new eQ(s,r,i,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+sQ++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(Jg)),new GZ(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(St(XZ),St(AB),St(Ri),St(iQ),St(QZ),St(Ya),St(Kn),St(sr),St(hm),St(zk),St(JZ),St(Ic,8))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const lQ={provide:new Gt("cdk-connected-overlay-scroll-strategy"),deps:[Y_],useFactory:function aQ(n){return()=>n.scrollStrategies.reposition()}};let cQ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=gr({providers:[Y_,lQ],imports:[fm,$Z,xB,xB]}),n})();const uQ=["tooltip"],RB=new Gt("mat-tooltip-scroll-strategy"),fQ={provide:RB,deps:[Y_],useFactory:function hQ(n){return()=>n.scrollStrategies.reposition({scrollThrottle:20})}},gQ=new Gt("mat-tooltip-default-options",{providedIn:"root",factory:function pQ(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}}),PB="tooltip-panel",NB=um({passive:!0});let wQ=(()=>{class n{get position(){return this._position}set position(t){t!==this._position&&(this._position=t,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(t){this._positionAtOrigin=Pc(t),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(t){this._disabled=Pc(t),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(t){this._showDelay=hD(t)}get hideDelay(){return this._hideDelay}set hideDelay(t){this._hideDelay=hD(t),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(t){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=t?String(t).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(t){this._tooltipClass=t,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}constructor(t,r,i,s,a,u,h,m,v,x,I,j){this._overlay=t,this._elementRef=r,this._scrollDispatcher=i,this._viewContainerRef=s,this._ngZone=a,this._platform=u,this._ariaDescriber=h,this._focusMonitor=m,this._dir=x,this._defaultOptions=I,this._position="below",this._positionAtOrigin=!1,this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._viewportMargin=8,this._cssClassPrefix="mat",this._showDelay=this._defaultOptions.showDelay,this._hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new Oe,this._scrollStrategy=v,this._document=j,I&&(I.position&&(this.position=I.position),I.positionAtOrigin&&(this.positionAtOrigin=I.positionAtOrigin),I.touchGestures&&(this.touchGestures=I.touchGestures)),x.change.pipe(qo(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(qo(this._destroyed)).subscribe(t=>{t?"keyboard"===t&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const t=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([r,i])=>{t.removeEventListener(r,i,NB)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(t,this.message,"tooltip"),this._focusMonitor.stopMonitoring(t)}show(t=this.showDelay,r){if(this.disabled||!this.message||this._isTooltipVisible())return void this._tooltipInstance?._cancelPendingAnimations();const i=this._createOverlay(r);this._detach(),this._portal=this._portal||new EB(this._tooltipComponent,this._viewContainerRef);const s=this._tooltipInstance=i.attach(this._portal).instance;s._triggerElement=this._elementRef.nativeElement,s._mouseLeaveHideDelay=this._hideDelay,s.afterHidden().pipe(qo(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),s.show(t)}hide(t=this.hideDelay){const r=this._tooltipInstance;r&&(r.isVisible()?r.hide(t):(r._cancelPendingAnimations(),this._detach()))}toggle(t){this._isTooltipVisible()?this.hide():this.show(void 0,t)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(t){if(this._overlayRef){const s=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!t)&&s._origin instanceof br)return this._overlayRef;this._detach()}const r=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),i=this._overlay.position().flexibleConnectedTo(this.positionAtOrigin&&t||this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(r);return i.positionChanges.pipe(qo(this._destroyed)).subscribe(s=>{this._updateCurrentPositionClass(s.connectionPair),this._tooltipInstance&&s.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:i,panelClass:`${this._cssClassPrefix}-${PB}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(qo(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(qo(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(qo(this._destroyed)).subscribe(s=>{this._isTooltipVisible()&&27===s.keyCode&&!function IG(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}(s)&&(s.preventDefault(),s.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(t){const r=t.getConfig().positionStrategy,i=this._getOrigin(),s=this._getOverlayPosition();r.withPositions([this._addOffset({...i.main,...s.main}),this._addOffset({...i.fallback,...s.fallback})])}_addOffset(t){return t}_getOrigin(){const t=!this._dir||"ltr"==this._dir.value,r=this.position;let i;"above"==r||"below"==r?i={originX:"center",originY:"above"==r?"top":"bottom"}:"before"==r||"left"==r&&t||"right"==r&&!t?i={originX:"start",originY:"center"}:("after"==r||"right"==r&&t||"left"==r&&!t)&&(i={originX:"end",originY:"center"});const{x:s,y:a}=this._invertPosition(i.originX,i.originY);return{main:i,fallback:{originX:s,originY:a}}}_getOverlayPosition(){const t=!this._dir||"ltr"==this._dir.value,r=this.position;let i;"above"==r?i={overlayX:"center",overlayY:"bottom"}:"below"==r?i={overlayX:"center",overlayY:"top"}:"before"==r||"left"==r&&t||"right"==r&&!t?i={overlayX:"end",overlayY:"center"}:("after"==r||"right"==r&&t||"left"==r&&!t)&&(i={overlayX:"start",overlayY:"center"});const{x:s,y:a}=this._invertPosition(i.overlayX,i.overlayY);return{main:i,fallback:{overlayX:s,overlayY:a}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe(W0(1),qo(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(t){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=t,this._tooltipInstance._markForCheck())}_invertPosition(t,r){return"above"===this.position||"below"===this.position?"top"===r?r="bottom":"bottom"===r&&(r="top"):"end"===t?t="start":"start"===t&&(t="end"),{x:t,y:r}}_updateCurrentPositionClass(t){const{overlayY:r,originX:i,originY:s}=t;let a;if(a="center"===r?this._dir&&"rtl"===this._dir.value?"end"===i?"left":"right":"start"===i?"left":"right":"bottom"===r&&"top"===s?"above":"below",a!==this._currentPosition){const u=this._overlayRef;if(u){const h=`${this._cssClassPrefix}-${PB}-`;u.removePanelClass(h+this._currentPosition),u.addPanelClass(h+a)}this._currentPosition=a}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",t=>{let r;this._setupPointerExitEventsIfNeeded(),void 0!==t.x&&void 0!==t.y&&(r=t),this.show(void 0,r)}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",t=>{const r=t.targetTouches?.[0],i=r?{x:r.clientX,y:r.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(void 0,i),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const t=[];if(this._platformSupportsMouseEvents())t.push(["mouseleave",r=>{const i=r.relatedTarget;(!i||!this._overlayRef?.overlayElement.contains(i))&&this.hide()}],["wheel",r=>this._wheelListener(r)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const r=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};t.push(["touchend",r],["touchcancel",r])}this._addListeners(t),this._passiveListeners.push(...t)}_addListeners(t){t.forEach(([r,i])=>{this._elementRef.nativeElement.addEventListener(r,i,NB)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(t){if(this._isTooltipVisible()){const r=this._document.elementFromPoint(t.clientX,t.clientY),i=this._elementRef.nativeElement;r!==i&&!i.contains(r)&&this.hide()}}_disableNativeGesturesIfNecessary(){const t=this.touchGestures;if("off"!==t){const r=this._elementRef.nativeElement,i=r.style;("on"===t||"INPUT"!==r.nodeName&&"TEXTAREA"!==r.nodeName)&&(i.userSelect=i.msUserSelect=i.webkitUserSelect=i.MozUserSelect="none"),("on"===t||!r.draggable)&&(i.webkitUserDrag="none"),i.touchAction="none",i.webkitTapHighlightColor="transparent"}}}return n.\u0275fac=function(t){Jy()},n.\u0275dir=fn({type:n,inputs:{position:["matTooltipPosition","position"],positionAtOrigin:["matTooltipPositionAtOrigin","positionAtOrigin"],disabled:["matTooltipDisabled","disabled"],showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]}}),n})(),xQ=(()=>{class n extends wQ{constructor(t,r,i,s,a,u,h,m,v,x,I,j){super(t,r,i,s,a,u,h,m,v,x,I,j),this._tooltipComponent=DQ,this._cssClassPrefix="mat-mdc",this._viewportMargin=8}_addOffset(t){const i=!this._dir||"ltr"==this._dir.value;return"top"===t.originY?t.offsetY=-8:"bottom"===t.originY?t.offsetY=8:"start"===t.originX?t.offsetX=i?-8:8:"end"===t.originX&&(t.offsetX=i?8:-8),t}}return n.\u0275fac=function(t){return new(t||n)(et(Y_),et(br),et(bv),et(Za),et(Kn),et(zs),et(JG),et(vD),et(RB),et(hm,8),et(gQ,8),et(sr))},n.\u0275dir=fn({type:n,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],exportAs:["matTooltip"],features:[Fn]}),n})(),EQ=(()=>{class n{constructor(t,r){this._changeDetectorRef=t,this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new Oe,this._animationsDisabled="NoopAnimations"===r}show(t){clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},t)}hide(t){clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},t)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:t}){(!t||!this._triggerElement.contains(t))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){}_handleAnimationEnd({animationName:t}){(t===this._showAnimation||t===this._hideAnimation)&&this._finalizeAnimation(t===this._showAnimation)}_cancelPendingAnimations(){clearTimeout(this._showTimeoutId),clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(t){t?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(t){const r=this._tooltip.nativeElement,i=this._showAnimation,s=this._hideAnimation;if(r.classList.remove(t?s:i),r.classList.add(t?i:s),this._isVisible=t,t&&!this._animationsDisabled&&"function"==typeof getComputedStyle){const a=getComputedStyle(r);("0s"===a.getPropertyValue("animation-duration")||"none"===a.getPropertyValue("animation-name"))&&(this._animationsDisabled=!0)}t&&this._onShow(),this._animationsDisabled&&(r.classList.add("_mat-animation-noopable"),this._finalizeAnimation(t))}}return n.\u0275fac=function(t){return new(t||n)(et(rh),et(Ic,8))},n.\u0275dir=fn({type:n}),n})(),DQ=(()=>{class n extends EQ{constructor(t,r,i){super(t,i),this._elementRef=r,this._isMultiline=!1,this._showAnimation="mat-mdc-tooltip-show",this._hideAnimation="mat-mdc-tooltip-hide"}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){const t=this._elementRef.nativeElement.getBoundingClientRect();return t.height>24&&t.width>=200}}return n.\u0275fac=function(t){return new(t||n)(et(rh),et(br),et(Ic,8))},n.\u0275cmp=Qi({type:n,selectors:[["mat-tooltip-component"]],viewQuery:function(t,r){if(1&t&&Cu(uQ,7),2&t){let i;Tc(i=kc())&&(r._tooltip=i.first)}},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(t,r){1&t&&jr("mouseleave",function(s){return r._handleMouseLeave(s)}),2&t&&Jd("zoom",r.isVisible()?1:null)},features:[Fn],decls:4,vars:4,consts:[[1,"mdc-tooltip","mdc-tooltip--shown","mat-mdc-tooltip",3,"ngClass","animationend"],["tooltip",""],[1,"mdc-tooltip__surface","mdc-tooltip__surface-animation"]],template:function(t,r){1&t&&(_r(0,"div",0,1),jr("animationend",function(s){return r._handleAnimationEnd(s)}),_r(2,"div",2),eh(3),Vr()()),2&t&&(ys("mdc-tooltip--multiline",r._isMultiline),ri("ngClass",r.tooltipClass),di(3),Gg(r.message))},dependencies:[Qk],styles:['.mdc-tooltip__surface{word-break:var(--mdc-tooltip-word-break, normal);overflow-wrap:anywhere}.mdc-tooltip{position:fixed;display:none;z-index:9}.mdc-tooltip-wrapper--rich{position:relative}.mdc-tooltip--shown,.mdc-tooltip--showing,.mdc-tooltip--hide{display:inline-flex}.mdc-tooltip--shown.mdc-tooltip--rich,.mdc-tooltip--showing.mdc-tooltip--rich,.mdc-tooltip--hide.mdc-tooltip--rich{display:inline-block;left:-320px;position:absolute}.mdc-tooltip__surface{line-height:16px;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center}.mdc-tooltip__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-tooltip__surface::before{border-color:CanvasText}}.mdc-tooltip--rich .mdc-tooltip__surface{align-items:flex-start;display:flex;flex-direction:column;min-height:24px;min-width:40px;max-width:320px;position:relative}.mdc-tooltip--multiline .mdc-tooltip__surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mdc-tooltip__surface,.mdc-tooltip--multiline .mdc-tooltip__surface[dir=rtl]{text-align:right}.mdc-tooltip__surface .mdc-tooltip__title{margin:0 8px}.mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(200px - (2 * 8px));margin:8px;text-align:left}[dir=rtl] .mdc-tooltip__surface .mdc-tooltip__content,.mdc-tooltip__surface .mdc-tooltip__content[dir=rtl]{text-align:right}.mdc-tooltip--rich .mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(320px - (2 * 8px));align-self:stretch}.mdc-tooltip__surface .mdc-tooltip__content-link{text-decoration:none}.mdc-tooltip--rich-actions,.mdc-tooltip__content,.mdc-tooltip__title{z-index:1}.mdc-tooltip__surface-animation{opacity:0;transform:scale(0.8);will-change:transform,opacity}.mdc-tooltip--shown .mdc-tooltip__surface-animation{transform:scale(1);opacity:1}.mdc-tooltip--hide .mdc-tooltip__surface-animation{transform:scale(1)}.mdc-tooltip__caret-surface-top,.mdc-tooltip__caret-surface-bottom{position:absolute;height:24px;width:24px;transform:rotate(35deg) skewY(20deg) scaleX(0.9396926208)}.mdc-tooltip__caret-surface-top .mdc-elevation-overlay,.mdc-tooltip__caret-surface-bottom .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-tooltip__caret-surface-bottom{outline:1px solid rgba(0,0,0,0);z-index:-1}@media screen and (forced-colors: active){.mdc-tooltip__caret-surface-bottom{outline-color:CanvasText}}.mdc-tooltip__surface{background-color:var(--mdc-plain-tooltip-container-color, #fff)}.mdc-tooltip__surface{border-radius:var(--mdc-plain-tooltip-container-shape, var(--mdc-shape-small, 4px))}.mdc-tooltip__caret-surface-top,.mdc-tooltip__caret-surface-bottom{border-radius:var(--mdc-plain-tooltip-container-shape, var(--mdc-shape-small, 4px))}.mdc-tooltip__surface{color:var(--mdc-plain-tooltip-supporting-text-color, #000)}.mdc-tooltip__surface{font-family:var(--mdc-plain-tooltip-supporting-text-font, inherit);font-size:var(--mdc-plain-tooltip-supporting-text-size, inherit);font-weight:var(--mdc-plain-tooltip-supporting-text-weight, inherit);letter-spacing:var(--mdc-plain-tooltip-supporting-text-tracking, inherit)}.mat-mdc-tooltip{position:relative;transform:scale(0)}.mat-mdc-tooltip::before{content:"";top:-8px;right:-8px;bottom:-8px;left:-8px;z-index:-1;position:absolute}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}'],encapsulation:2,changeDetection:0}),n})(),CQ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=gr({providers:[fQ],imports:[u8,Mu,cQ,pa,pa,b1]}),n})();function SQ(n,e){if(1&n){const t=jg();_r(0,"div",2),jr("click",function(){return Bo(t),Ns(vs().toggle())}),Vr()}}function MQ(n,e){if(1&n){const t=jg();_r(0,"button",7),jr("click",function(){const s=Bo(t).$implicit;return Ns(vs(2).onBtnClick(s))}),_r(1,"mat-icon"),eh(2),Vr()()}if(2&n){const t=e.$implicit;ri("matTooltip",t.tooltip),di(2),Gg(t.icon)}}const AQ=function(n){return{value:n}};function TQ(n,e){if(1&n){const t=jg();_r(0,"div",3)(1,"button",4),jr("click",function(){return Bo(t),Ns(vs().toggle())}),_r(2,"mat-icon",5),eh(3),Vr()(),_r(4,"div"),Vf(5,MQ,3,2,"button",6),Vr()()}if(2&n){const t=vs();di(2),ri("@fabToggler",IT(4,AQ,t.fabTogglerState)),di(1),Gg(t.options.icon),di(1),ri("@speedDialStagger",t.buttons.length),di(1),ri("ngForOf",t.buttons)}}class _v{constructor(){this.clickedMenuItem=new Pr,this.buttons=[],this.fabTogglerState="inactive"}ngOnInit(){null!=this.options&&this.options.buttons.length>6&&this.options.buttons.splice(5,this.options.buttons.length-6)}showItems(){null!=this.options&&(this.fabTogglerState="active",this.buttons=this.options.buttons,console.log(this.buttons))}hideItems(){this.fabTogglerState="inactive",this.buttons=[]}toggle(){this.buttons.length?this.hideItems():this.showItems()}onBtnClick(e){this.toggle(),this.clickedMenuItem.emit(e.id)}}_v.\u0275fac=function(e){return new(e||_v)},_v.\u0275cmp=Qi({type:_v,selectors:[["im-poc1-fab-menu"]],inputs:{options:"options"},outputs:{clickedMenuItem:"clickedMenuItem"},standalone:!0,features:[nh],decls:2,vars:2,consts:[["id","fab-dismiss",3,"click",4,"ngIf"],["class","fab-container",4,"ngIf"],["id","fab-dismiss",3,"click"],[1,"fab-container"],["mat-fab","",1,"fab-toggler",3,"click"],[1,"material-icons"],["mat-mini-fab","","class","fab-secondary","color","secondary",3,"matTooltip","click",4,"ngFor","ngForOf"],["mat-mini-fab","","color","secondary",1,"fab-secondary",3,"matTooltip","click"]],template:function(e,t){1&e&&(Vf(0,SQ,1,0,"div",0),Vf(1,TQ,6,6,"div",1)),2&e&&(ri("ngIf","active"===t.fabTogglerState),di(1),ri("ngIf",t.options))},dependencies:[Mu,jE,UE,CD,MO,hZ,dZ,uZ,CQ,xQ],styles:[".fab-container[_ngcontent-%COMP%]{position:fixed;bottom:15px;right:15px;z-index:100;display:flex;flex-direction:column-reverse;align-items:center}.fab-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse;align-items:center;margin-bottom:5px}.fab-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:17px}.fab-toggler[_ngcontent-%COMP%]{float:right;z-index:100}#fab-dismiss[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:99}"],data:{animation:rZ}});const FB=(n,e=1)=>{const t=[['"',"'"],["':","!"],[",'","~"],["}",")","\\","\\"],["{","(","\\","\\"]],r=(i,s)=>{let a=new RegExp(`${(s[2]?s[2]:"")+s[0]}|${(s[3]?s[3]:"")+s[1]}`,"g");return i.replace(a,u=>u===s[0]?s[1]:s[0])};if(e)for(let i=0;i<t.length;++i)n=r(n,t[i]);else for(let i=t.length;i--;)n=r(n,t[i]);return n};class wv{constructor(e,t){this.globalSettings=e,this.rdfGraphService=t,this.graphData={"@context":{name:"http://schema.org/name",description:"http://schema.org/description",image:{"@id":"http://schema.org/image","@type":"@id"},geo:"http://schema.org/geo",latitude:{"@id":"http://schema.org/latitude","@type":"xsd:float"},longitude:{"@id":"http://schema.org/longitude","@type":"xsd:float"},xsd:"http://www.w3.org/2001/XMLSchema#"},name:"The Empire State Building",description:"The Empire State Building is a 102-story landmark in New York City.",image:"http://www.civil.usherbrooke.ca/cours/gci215a/empire-state-building.jpg",geo:{latitude:"40.75",longitude:"73.98"}},this.fabOptions={icon:"share",buttons:[{id:"permalink",icon:"link",tooltip:"Copy permalink"},{id:"image-png",icon:"image",tooltip:"Save image"}]},this.rdfText=JSON.stringify(this.graphData,null,2),this.darkMode=!1,this.isSmallScreen=!1}ngOnInit(){this.globalSettings.darkMode().subscribe(e=>{this.darkMode=e}),this.detectScreenSize(),this.getJSONFromURL()}getJSONFromURL(){const e=window.location.search,r=new URLSearchParams(e).get("d");if(null!=r){const i=(n=>{const e=(n=n.substring(0,n.length-1)).split("\x01");let t=e[0];if(e.length>1){let r=e[1];for(let i of r){let s=t.split(i);t=s.join(s.pop())}}return FB(t,0)})(r);this.graphData=JSON.parse(i),this.rdfText=JSON.stringify(this.graphData,null,2)}}onRDFDocUpdate(e){this.graphData=e}onShareMenuBtnClick(e){var t=this;return oh(function*(){if("permalink"===e){console.log("Create permalink");const r=window.location.href.split("?")[0],i=((n,e=50)=>{let i=[];for(let h=127;--h;)(h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||"-_.!~*'()".includes(String.fromCharCode(h)))&&i.push(String.fromCharCode(h));for(let h=32;h<255;++h){let m=String.fromCharCode(h);"\\"!=m&&!i.includes(m)&&i.unshift(m)}n=n.replace(new RegExp("\x01","g"),"");const a=((h,m)=>{let v=m.length,x="";const I=oe=>encodeURI(encodeURIComponent(oe)).replace(/%../g,"i").length,j=oe=>{let ve=oe.charCodeAt(0),Pe=oe.charCodeAt(oe.length-1);return ve>=56320&&ve<=57343||Pe>=55296&&Pe<=56319};let Q={};for(let oe=2;oe<e;oe++)for(let ve=0;ve<h.length-oe;++ve){let Pe=h.substr(ve,oe);if(Q[Pe]||j(Pe))continue;let Ke=1;for(let Ge=h.indexOf(Pe,ve+oe);Ge>=0;++Ke)Ge=h.indexOf(Pe,Ge+oe);Ke>1&&(Q[Pe]=Ke)}for(;;){for(;v--&&h.includes(m[v]););if(v<0)break;let ve,oe=m[v],Pe=0,Ke=I(oe);for(let st in Q){let _t=Q[st],Et=(_t-1)*I(st)-(_t+1)*Ke;x.length||(Et-=I("\x01")),Et<=0?delete Q[st]:Et>Pe&&(ve=st,Pe=Et)}if(!ve)break;h=h.split(ve).join(oe)+oe+ve,x=oe+x;let Ge={};for(let st in Q){let _t=st.split(ve).join(oe),Et=0;for(let Kt=h.indexOf(_t);Kt>=0;++Et)Kt=h.indexOf(_t,Kt+_t.length);Et>1&&(Ge[_t]=Et)}Q=Ge}return{a:h,b:x}})(n=FB(n),i);let u=a.a;return a.b.length&&(u+="\x01"+a.b),u+="_",u})(JSON.stringify(t.graphData));console.log(encodeURIComponent(i)),navigator.clipboard.writeText(`${r}?d=${encodeURIComponent(i)}`)}if("image-png"===e){const r=t.rdfGraphService.getCytoscape();if(null==r)return;const i=r.svg(),s="graph.svg",a=document.createElement("a");a.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(i)),a.setAttribute("download",s),a.click()}})()}onWindowResize(){this.detectScreenSize()}detectScreenSize(){this.isSmallScreen=window.innerWidth<500}}function BB(n){return new Ye(3e3,!1)}function uJ(){return typeof window<"u"&&typeof window.document<"u"}function x1(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Qu(n){switch(n.length){case 0:return new vv;case 1:return n[0];default:return new hB(n)}}function VB(n,e,t,r,i=new Map,s=new Map){const a=[],u=[];let h=-1,m=null;if(r.forEach(v=>{const x=v.get("offset"),I=x==h,j=I&&m||new Map;v.forEach((Q,oe)=>{let ve=oe,Pe=Q;if("offset"!==oe)switch(ve=e.normalizePropertyName(ve,a),Pe){case"!":Pe=i.get(oe);break;case Hc:Pe=s.get(oe);break;default:Pe=e.normalizeStyleValue(oe,ve,Pe,a)}j.set(ve,Pe)}),I||u.push(j),m=j,h=x}),a.length)throw function QQ(n){return new Ye(3502,!1)}();return u}function E1(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&D1(t,"start",n)));break;case"done":n.onDone(()=>r(t&&D1(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&D1(t,"destroy",n)))}}function D1(n,e,t){const s=C1(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),a=n._data;return null!=a&&(s._data=a),s}function C1(n,e,t,r,i="",s=0,a){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!a}}function Jo(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function HB(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}wv.\u0275fac=function(e){return new(e||wv)(et(Yu),et(ch))},wv.\u0275cmp=Qi({type:wv,selectors:[["im-poc1-root"]],hostBindings:function(e,t){1&e&&jr("resize",function(i){return t.onWindowResize(i)},0,xu)},standalone:!0,features:[nh],decls:9,vars:8,consts:[[1,"main"],[1,"split-container"],[3,"direction"],[3,"size"],[3,"text","docChanged"],[3,"data"],[3,"options","clickedMenuItem"]],template:function(e,t){1&e&&(Hs(0,"im-poc1-top-bar"),_r(1,"div",0)(2,"div",1)(3,"as-split",2)(4,"as-split-area",3)(5,"im-poc1-rdf-editor",4),jr("docChanged",function(i){return t.onRDFDocUpdate(i)}),Vr()(),_r(6,"as-split-area",3),Hs(7,"im-poc1-graph",5),Vr()()()(),_r(8,"im-poc1-fab-menu",6),jr("clickedMenuItem",function(i){return t.onShareMenuBtnClick(i)}),Vr()),2&e&&(di(2),Jd("background-color",t.darkMode?"#595959":"white"),di(1),ri("direction",t.isSmallScreen?"vertical":"horizontal"),di(1),ri("size",40),di(1),ri("text",t.rdfText),di(1),ri("size",60),di(1),ri("data",t.graphData),di(1),ri("options",t.fabOptions))},dependencies:[wm,cv,wG,II,_G,gv,_v],styles:[".split-container[_ngcontent-%COMP%]{width:calc(100% - 20px);height:calc(100vh - 200px);box-shadow:#00000026 1.95px 1.95px 2.6px;border-radius:10px;padding:10px}.main[_ngcontent-%COMP%]{padding:50px}@media screen and (max-width: 500px){.main[_ngcontent-%COMP%]{padding:5px}.split-container[_ngcontent-%COMP%]{width:calc(100% - 20px);height:calc(100vh - 75px)}}"]});let S1=(n,e)=>!1,zB=(n,e,t)=>[],jB=null;function M1(n){const e=n.parentNode||n.host;return e===jB?null:e}(x1()||typeof Element<"u")&&(uJ()?(jB=(()=>document.documentElement)(),S1=(n,e)=>{for(;e;){if(e===n)return!0;e=M1(e)}return!1}):S1=(n,e)=>n.contains(e),zB=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Th=null,UB=!1;const GB=S1,$B=zB;let WB=(()=>{class n{validateStyleProperty(t){return function hJ(n){Th||(Th=function fJ(){return typeof document<"u"?document.body:null}()||{},UB=!!Th.style&&"WebkitAppearance"in Th.style);let e=!0;return Th.style&&!function dJ(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Th.style,!e&&UB&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Th.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return GB(t,r)}getParentElement(t){return M1(t)}query(t,r,i){return $B(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,a,u=[],h){return new vv(i,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})(),A1=(()=>{class n{}return n.NOOP=new WB,n})();const T1="ng-enter",X_="ng-leave",K_="ng-trigger",Z_=".ng-trigger",YB="ng-animating",k1=".ng-animating";function zc(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:I1(parseFloat(e[1]),e[2])}function I1(n,e){return"s"===e?1e3*n:n}function Q_(n,e,t){return n.hasOwnProperty("duration")?n:function mJ(n,e,t){let i,s=0,a="";if("string"==typeof n){const u=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===u)return e.push(BB()),{duration:0,delay:0,easing:""};i=I1(parseFloat(u[1]),u[2]);const h=u[3];null!=h&&(s=I1(parseFloat(h),u[4]));const m=u[5];m&&(a=m)}else i=n;if(!t){let u=!1,h=e.length;i<0&&(e.push(function kQ(){return new Ye(3100,!1)}()),u=!0),s<0&&(e.push(function IQ(){return new Ye(3101,!1)}()),u=!0),u&&e.splice(h,0,BB())}return{duration:i,delay:s,easing:a}}(n,e,t)}function xv(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function XB(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Ju(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function ZB(n,e,t){return t?e+":"+t+";":""}function QB(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=ZB(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=ZB(0,_J(t),n.style[t]));n.setAttribute("style",e)}function tc(n,e,t){n.style&&(e.forEach((r,i)=>{const s=R1(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r}),x1()&&QB(n))}function kh(n,e){n.style&&(e.forEach((t,r)=>{const i=R1(r);n.style[i]=""}),x1()&&QB(n))}function Ev(n){return Array.isArray(n)?1==n.length?n[0]:cB(n):n}const O1=new RegExp("{{\\s*(.+?)\\s*}}","g");function JB(n){let e=[];if("string"==typeof n){let t;for(;t=O1.exec(n);)e.push(t[1]);O1.lastIndex=0}return e}function Dv(n,e,t){const r=n.toString(),i=r.replace(O1,(s,a)=>{let u=e[a];return null==u&&(t.push(function RQ(n){return new Ye(3003,!1)}()),u=""),u.toString()});return i==r?n:i}function J_(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const bJ=/-+([a-z0-9])/g;function R1(n){return n.replace(bJ,(...e)=>e[1].toUpperCase())}function _J(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ea(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function PQ(n){return new Ye(3004,!1)}()}}function eV(n,e){return window.getComputedStyle(n)[e]}function SJ(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function MJ(n,e,t){if(":"==n[0]){const h=function AJ(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function YQ(n){return new Ye(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof h)return void e.push(h);n=h}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function qQ(n){return new Ye(3015,!1)}()),e;const i=r[1],s=r[2],a=r[3];e.push(tV(i,a));"<"==s[0]&&!("*"==i&&"*"==a)&&e.push(tV(a,i))}(r,t,e)):t.push(n),t}const rw=new Set(["true","1"]),iw=new Set(["false","0"]);function tV(n,e){const t=rw.has(n)||iw.has(n),r=rw.has(e)||iw.has(e);return(i,s)=>{let a="*"==n||n==i,u="*"==e||e==s;return!a&&t&&"boolean"==typeof i&&(a=i?rw.has(n):iw.has(n)),!u&&r&&"boolean"==typeof s&&(u=s?rw.has(e):iw.has(e)),a&&u}}const TJ=new RegExp("s*:selfs*,?","g");function P1(n,e,t,r){return new kJ(n).build(e,t,r)}class kJ{constructor(e){this._driver=e}build(e,t,r){const i=new RJ(t);return this._resetContextStyleTimingState(i),ea(this,Ev(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],a=[];return"@"==e.name.charAt(0)&&t.errors.push(function LQ(){return new Ye(3006,!1)}()),e.definitions.forEach(u=>{if(this._resetContextStyleTimingState(t),0==u.type){const h=u,m=h.name;m.toString().split(/\s*,\s*/).forEach(v=>{h.name=v,s.push(this.visitState(h,t))}),h.name=m}else if(1==u.type){const h=this.visitTransition(u,t);r+=h.queryCount,i+=h.depCount,a.push(h)}else t.errors.push(function FQ(){return new Ye(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:a,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,a=i||{};r.styles.forEach(u=>{u instanceof Map&&u.forEach(h=>{JB(h).forEach(m=>{a.hasOwnProperty(m)||s.add(m)})})}),s.size&&(J_(s.values()),t.errors.push(function BQ(n,e){return new Ye(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=ea(this,Ev(e.animation),t);return{type:1,matchers:SJ(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Ih(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>ea(this,r,t)),options:Ih(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(a=>{t.currentTime=r;const u=ea(this,a,t);return i=Math.max(i,t.currentTime),u});return t.currentTime=i,{type:3,steps:s,options:Ih(e.options)}}visitAnimate(e,t){const r=function NJ(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return N1(Q_(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=N1(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=Q_(t,e);return N1(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:ol({});if(5==s.type)i=this.visitKeyframes(s,t);else{let a=e.styles,u=!1;if(!a){u=!0;const m={};r.easing&&(m.easing=r.easing),a=ol(m)}t.currentTime+=r.duration+r.delay;const h=this.visitStyle(a,t);h.isEmptyStep=u,i=h}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let u of i)"string"==typeof u?u===Hc?r.push(u):t.errors.push(new Ye(3002,!1)):r.push(XB(u));let s=!1,a=null;return r.forEach(u=>{if(u instanceof Map&&(u.has("easing")&&(a=u.get("easing"),u.delete("easing")),!s))for(let h of u.values())if(h.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:a,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(a=>{"string"!=typeof a&&a.forEach((u,h)=>{const m=t.collectedStyles.get(t.currentQuerySelector),v=m.get(h);let x=!0;v&&(s!=i&&s>=v.startTime&&i<=v.endTime&&(t.errors.push(function HQ(n,e,t,r,i){return new Ye(3010,!1)}()),x=!1),s=v.startTime),x&&m.set(h,{startTime:s,endTime:i}),t.options&&function yJ(n,e,t){const r=e.params||{},i=JB(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function OQ(n){return new Ye(3001,!1)}())})}(u,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function zQ(){return new Ye(3011,!1)}()),r;let s=0;const a=[];let u=!1,h=!1,m=0;const v=e.steps.map(Pe=>{const Ke=this._makeStyleAst(Pe,t);let Ge=null!=Ke.offset?Ke.offset:function PJ(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(Ke.styles),st=0;return null!=Ge&&(s++,st=Ke.offset=Ge),h=h||st<0||st>1,u=u||st<m,m=st,a.push(st),Ke});h&&t.errors.push(function jQ(){return new Ye(3012,!1)}()),u&&t.errors.push(function UQ(){return new Ye(3200,!1)}());const x=e.steps.length;let I=0;s>0&&s<x?t.errors.push(function GQ(){return new Ye(3202,!1)}()):0==s&&(I=1/(x-1));const j=x-1,Q=t.currentTime,oe=t.currentAnimateTimings,ve=oe.duration;return v.forEach((Pe,Ke)=>{const Ge=I>0?Ke==j?1:I*Ke:a[Ke],st=Ge*ve;t.currentTime=Q+oe.delay+st,oe.duration=st,this._validateStyleAst(Pe,t),Pe.offset=Ge,r.styles.push(Pe)}),r}visitReference(e,t){return{type:8,animation:ea(this,Ev(e.animation),t),options:Ih(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Ih(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Ih(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,a]=function IJ(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(TJ,"")),n=n.replace(/@\*/g,Z_).replace(/@\w+/g,t=>Z_+"-"+t.slice(1)).replace(/:animating/g,k1),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,Jo(t.collectedStyles,t.currentQuerySelector,new Map);const u=ea(this,Ev(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:a,animation:u,originalSelector:e.selector,options:Ih(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function $Q(){return new Ye(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:Q_(e.timings,t.errors,!0);return{type:12,animation:ea(this,Ev(e.animation),t),timings:r,options:null}}}class RJ{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Ih(n){return n?(n=xv(n)).params&&(n.params=function OJ(n){return n?xv(n):null}(n.params)):n={},n}function N1(n,e,t){return{duration:n,delay:e,easing:t}}function L1(n,e,t,r,i,s,a=null,u=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:a,subTimeline:u}}class sw{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const BJ=new RegExp(":enter","g"),HJ=new RegExp(":leave","g");function F1(n,e,t,r,i,s=new Map,a=new Map,u,h,m=[]){return(new zJ).buildKeyframes(n,e,t,r,i,s,a,u,h,m)}class zJ{buildKeyframes(e,t,r,i,s,a,u,h,m,v=[]){m=m||new sw;const x=new B1(e,t,m,i,s,v,[]);x.options=h;const I=h.delay?zc(h.delay):0;x.currentTimeline.delayNextStep(I),x.currentTimeline.setStyles([a],null,x.errors,h),ea(this,r,x);const j=x.timelines.filter(Q=>Q.containsAnimation());if(j.length&&u.size){let Q;for(let oe=j.length-1;oe>=0;oe--){const ve=j[oe];if(ve.element===t){Q=ve;break}}Q&&!Q.allowOnlyTimelineStyles()&&Q.setStyles([u],null,x.errors,h)}return j.length?j.map(Q=>Q.buildKeyframes()):[L1(t,[],[],[],0,I,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,a=this._visitSubInstructions(r,i,i.options);s!=a&&t.transformIntoNewTimeline(a)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const a="number"==typeof s?s:zc(Dv(s,i?.params??{},t.errors));r.delayNextStep(a)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const a=null!=r.duration?zc(r.duration):null,u=null!=r.delay?zc(r.delay):null;return 0!==a&&e.forEach(h=>{const m=t.appendInstructionToTimeline(h,a,u);s=Math.max(s,m.duration+m.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),ea(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=ow);const a=zc(s.delay);i.delayNextStep(a)}e.steps.length&&(e.steps.forEach(a=>ea(this,a,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?zc(e.options.delay):0;e.steps.forEach(a=>{const u=t.createSubContext(e.options);s&&u.delayNextStep(s),ea(this,a,u),i=Math.max(i,u.currentTimeline.currentTime),r.push(u.currentTimeline)}),r.forEach(a=>t.currentTimeline.mergeTimelineCollectedStyles(a)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return Q_(t.params?Dv(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,u=t.createSubContext().currentTimeline;u.easing=r.easing,e.styles.forEach(h=>{u.forwardTime((h.offset||0)*s),u.setStyles(h.styles,h.easing,t.errors,t.options),u.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(u),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?zc(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=ow);let a=r;const u=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=u.length;let h=null;u.forEach((m,v)=>{t.currentQueryIndex=v;const x=t.createSubContext(e.options,m);s&&x.delayNextStep(s),m===t.element&&(h=x.currentTimeline),ea(this,e.animation,x),x.currentTimeline.applyStylesToKeyframe(),a=Math.max(a,x.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(a),h&&(t.currentTimeline.mergeTimelineCollectedStyles(h),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,a=Math.abs(s.duration),u=a*(t.currentQueryTotal-1);let h=a*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":h=u-h;break;case"full":h=r.currentStaggerTime}const v=t.currentTimeline;h&&v.delayNextStep(h);const x=v.currentTime;ea(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-x+(i.startTime-r.currentTimeline.startTime)}}const ow={};class B1{constructor(e,t,r,i,s,a,u,h){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=a,this.timelines=u,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=ow,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=h||new aw(this._driver,t,0),u.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=zc(r.duration)),null!=r.delay&&(i.delay=zc(r.delay));const s=r.params;if(s){let a=i.params;a||(a=this.options.params={}),Object.keys(s).forEach(u=>{(!t||!a.hasOwnProperty(u))&&(a[u]=Dv(s[u],a,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new B1(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=ow,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new jJ(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,a){let u=[];if(i&&u.push(this.element),e.length>0){e=(e=e.replace(BJ,"."+this._enterClassName)).replace(HJ,"."+this._leaveClassName);let m=this._driver.query(this.element,e,1!=r);0!==r&&(m=r<0?m.slice(m.length+r,m.length):m.slice(0,r)),u.push(...m)}return!s&&0==u.length&&a.push(function WQ(n){return new Ye(3014,!1)}()),u}}class aw{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new aw(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Hc),this._currentKeyframe.set(t,Hc);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},a=function UJ(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)t.set(s,Hc)}else Ju(i,t)}),t}(e,this._globalTimelineStyles);for(let[u,h]of a){const m=Dv(h,s,r);this._pendingStyles.set(u,m),this._localTimelineStyles.has(u)||this._backFill.set(u,this._globalTimelineStyles.get(u)??Hc),this._updateStyle(u,m)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((u,h)=>{const m=Ju(u,new Map,this._backFill);m.forEach((v,x)=>{"!"===v?e.add(x):v===Hc&&t.add(x)}),r||m.set("offset",h/this.duration),i.push(m)});const s=e.size?J_(e.values()):[],a=t.size?J_(t.values()):[];if(r){const u=i[0],h=new Map(u);u.set("offset",0),h.set("offset",1),i=[u,h]}return L1(this.element,i,s,a,this.duration,this.startTime,this.easing,!1)}}class jJ extends aw{constructor(e,t,r,i,s,a,u=!1){super(e,t,a.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=u,this.timings={duration:a.duration,delay:a.delay,easing:a.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],a=r+t,u=t/a,h=Ju(e[0]);h.set("offset",0),s.push(h);const m=Ju(e[0]);m.set("offset",iV(u)),s.push(m);const v=e.length-1;for(let x=1;x<=v;x++){let I=Ju(e[x]);const j=I.get("offset");I.set("offset",iV((t+j*r)/a)),s.push(I)}r=a,t=0,i="",e=s}return L1(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function iV(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class V1{}const GJ=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class $J extends V1{normalizePropertyName(e,t){return R1(e)}normalizeStyleValue(e,t,r,i){let s="";const a=r.toString().trim();if(GJ.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const u=r.match(/^[+-]?[\d\.]+([a-z]*)$/);u&&0==u[1].length&&i.push(function NQ(n,e){return new Ye(3005,!1)}())}return a+s}}function sV(n,e,t,r,i,s,a,u,h,m,v,x,I){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:a,timelines:u,queriedElements:h,preStyleProps:m,postStyleProps:v,totalTime:x,errors:I}}const H1={};class oV{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function WJ(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,a,u,h,m,v){const x=[],I=this.ast.options&&this.ast.options.params||H1,Q=this.buildStyles(r,u&&u.params||H1,x),oe=h&&h.params||H1,ve=this.buildStyles(i,oe,x),Pe=new Set,Ke=new Map,Ge=new Map,st="void"===i,_t={params:qJ(oe,I),delay:this.ast.options?.delay},Et=v?[]:F1(e,t,this.ast.animation,s,a,Q,ve,_t,m,x);let Kt=0;if(Et.forEach(Cn=>{Kt=Math.max(Cn.duration+Cn.delay,Kt)}),x.length)return sV(t,this._triggerName,r,i,st,Q,ve,[],[],Ke,Ge,Kt,x);Et.forEach(Cn=>{const Mn=Cn.element,Nr=Jo(Ke,Mn,new Set);Cn.preStyleProps.forEach(oi=>Nr.add(oi));const Zr=Jo(Ge,Mn,new Set);Cn.postStyleProps.forEach(oi=>Zr.add(oi)),Mn!==t&&Pe.add(Mn)});const or=J_(Pe.values());return sV(t,this._triggerName,r,i,st,Q,ve,Et,or,Ke,Ge,Kt)}}function qJ(n,e){const t=xv(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class YJ{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=xv(this.defaultParams);return Object.keys(e).forEach(s=>{const a=e[s];null!==a&&(i[s]=a)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((a,u)=>{a&&(a=Dv(a,i,t));const h=this.normalizer.normalizePropertyName(u,t);a=this.normalizer.normalizeStyleValue(u,h,a,t),r.set(u,a)})}),r}}class KJ{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new YJ(i.style,i.options&&i.options.params||{},r))}),aV(this.states,"true","1"),aV(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new oV(e,i,this.states))}),this.fallbackTransition=function ZJ(n,e,t){return new oV(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(a,u)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(a=>a.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function aV(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const QJ=new sw;class JJ{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],s=P1(this._driver,t,r,[]);if(r.length)throw function JQ(n){return new Ye(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=VB(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let a;const u=new Map;if(s?(a=F1(this._driver,t,s,T1,X_,new Map,new Map,r,QJ,i),a.forEach(v=>{const x=Jo(u,v.element,new Map);v.postStyleProps.forEach(I=>x.set(I,null))})):(i.push(function eJ(){return new Ye(3300,!1)}()),a=[]),i.length)throw function tJ(n){return new Ye(3504,!1)}();u.forEach((v,x)=>{v.forEach((I,j)=>{v.set(j,this._driver.computeStyle(x,j,Hc))})});const m=Qu(a.map(v=>{const x=u.get(v.element);return this._buildPlayer(v,new Map,x)}));return this._playersById.set(e,m),m.onDestroy(()=>this.destroy(e)),this.players.push(m),m}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function nJ(n){return new Ye(3301,!1)}();return t}listen(e,t,r,i){const s=C1(t,"","","");return E1(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const lV="ng-animate-queued",z1="ng-animate-disabled",iee=[],cV={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},see={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},xa="__ng_removed";class j1{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function cee(n){return n??null}(r?e.value:e),r){const s=xv(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Cv="void",U1=new j1(Cv);class oee{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ea(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function rJ(n,e){return new Ye(3302,!1)}();if(null==r||0==r.length)throw function iJ(n){return new Ye(3303,!1)}();if(!function uee(n){return"start"==n||"done"==n}(r))throw function sJ(n,e){return new Ye(3400,!1)}();const s=Jo(this._elementListeners,e,[]),a={name:t,phase:r,callback:i};s.push(a);const u=Jo(this._engine.statesByElement,e,new Map);return u.has(t)||(Ea(e,K_),Ea(e,K_+"-"+t),u.set(t,U1)),()=>{this._engine.afterFlush(()=>{const h=s.indexOf(a);h>=0&&s.splice(h,1),this._triggers.has(t)||u.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function oJ(n){return new Ye(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),a=new G1(this.id,t,e);let u=this._engine.statesByElement.get(e);u||(Ea(e,K_),Ea(e,K_+"-"+t),this._engine.statesByElement.set(e,u=new Map));let h=u.get(t);const m=new j1(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&h&&m.absorbOptions(h.options),u.set(t,m),h||(h=U1),m.value!==Cv&&h.value===m.value){if(!function fee(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(h.params,m.params)){const oe=[],ve=s.matchStyles(h.value,h.params,oe),Pe=s.matchStyles(m.value,m.params,oe);oe.length?this._engine.reportError(oe):this._engine.afterFlush(()=>{kh(e,ve),tc(e,Pe)})}return}const I=Jo(this._engine.playersByElement,e,[]);I.forEach(oe=>{oe.namespaceId==this.id&&oe.triggerName==t&&oe.queued&&oe.destroy()});let j=s.matchTransition(h.value,m.value,e,m.params),Q=!1;if(!j){if(!i)return;j=s.fallbackTransition,Q=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:j,fromState:h,toState:m,player:a,isFallbackTransition:Q}),Q||(Ea(e,lV),a.onStart(()=>{Ap(e,lV)})),a.onDone(()=>{let oe=this.players.indexOf(a);oe>=0&&this.players.splice(oe,1);const ve=this._engine.playersByElement.get(e);if(ve){let Pe=ve.indexOf(a);Pe>=0&&ve.splice(Pe,1)}}),this.players.push(a),I.push(a),a}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,Z_,!0);r.forEach(i=>{if(i[xa])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(a=>a.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),a=new Map;if(s){const u=[];if(s.forEach((h,m)=>{if(a.set(m,h.value),this._triggers.has(m)){const v=this.trigger(e,m,Cv,i);v&&u.push(v)}}),u.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,a),r&&Qu(u).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const a=s.name;if(i.has(a))return;i.add(a);const h=this._triggers.get(a).fallbackTransition,m=r.get(a)||U1,v=new j1(Cv),x=new G1(this.id,a,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:a,transition:h,fromState:m,toState:v,player:x,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let a=e;for(;a=a.parentNode;)if(r.statesByElement.get(a)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[xa];(!s||s===cV)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Ea(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,a=this._elementListeners.get(s);a&&a.forEach(u=>{if(u.name==r.triggerName){const h=C1(s,r.triggerName,r.fromState.value,r.toState.value);h._data=e,E1(r.player,u.phase,h,u.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,a=i.transition.ast.depCount;return 0==s||0==a?s-a:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class aee{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new oee(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let a=!1,u=this.driver.getParentElement(t);for(;u;){const h=i.get(u);if(h){const m=r.indexOf(h);r.splice(m+1,0,e),a=!0;break}u=this.driver.getParentElement(u)}a||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(lw(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!lw(t))return;const s=t[xa];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const a=this.collectedLeaveElements.indexOf(t);a>=0&&this.collectedLeaveElements.splice(a,1)}if(e){const a=this._fetchNamespace(e);a&&a.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ea(e,z1)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Ap(e,z1))}removeNode(e,t,r,i){if(lw(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const a=this.namespacesByHostElement.get(t);a&&a.id!==e&&a.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[xa]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return lw(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,Z_,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,k1,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Qu(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[xa];if(t&&t.setForRemoval){if(e[xa]=cV,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(z1)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ea(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Qu(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function aJ(n){return new Ye(3402,!1)}()}_flushAnimations(e,t){const r=new sw,i=[],s=new Map,a=[],u=new Map,h=new Map,m=new Map,v=new Set;this.disabledNodes.forEach(Ut=>{v.add(Ut);const on=this.driver.query(Ut,".ng-animate-queued",!0);for(let an=0;an<on.length;an++)v.add(on[an])});const x=this.bodyNode,I=Array.from(this.statesByElement.keys()),j=hV(I,this.collectedEnterElements),Q=new Map;let oe=0;j.forEach((Ut,on)=>{const an=T1+oe++;Q.set(on,an),Ut.forEach(vn=>Ea(vn,an))});const ve=[],Pe=new Set,Ke=new Set;for(let Ut=0;Ut<this.collectedLeaveElements.length;Ut++){const on=this.collectedLeaveElements[Ut],an=on[xa];an&&an.setForRemoval&&(ve.push(on),Pe.add(on),an.hasAnimation?this.driver.query(on,".ng-star-inserted",!0).forEach(vn=>Pe.add(vn)):Ke.add(on))}const Ge=new Map,st=hV(I,Array.from(Pe));st.forEach((Ut,on)=>{const an=X_+oe++;Ge.set(on,an),Ut.forEach(vn=>Ea(vn,an))}),e.push(()=>{j.forEach((Ut,on)=>{const an=Q.get(on);Ut.forEach(vn=>Ap(vn,an))}),st.forEach((Ut,on)=>{const an=Ge.get(on);Ut.forEach(vn=>Ap(vn,an))}),ve.forEach(Ut=>{this.processLeaveNode(Ut)})});const _t=[],Et=[];for(let Ut=this._namespaceList.length-1;Ut>=0;Ut--)this._namespaceList[Ut].drainQueuedTransitions(t).forEach(an=>{const vn=an.player,Jn=an.element;if(_t.push(vn),this.collectedEnterElements.length){const Ws=Jn[xa];if(Ws&&Ws.setForMove){if(Ws.previousTriggersValues&&Ws.previousTriggersValues.has(an.triggerName)){const Oh=Ws.previousTriggersValues.get(an.triggerName),Da=this.statesByElement.get(an.element);if(Da&&Da.has(an.triggerName)){const dw=Da.get(an.triggerName);dw.value=Oh,Da.set(an.triggerName,dw)}}return void vn.destroy()}}const as=!x||!this.driver.containsElement(x,Jn),Hi=Ge.get(Jn),ta=Q.get(Jn),Wr=this._buildInstruction(an,r,ta,Hi,as);if(Wr.errors&&Wr.errors.length)return void Et.push(Wr);if(as)return vn.onStart(()=>kh(Jn,Wr.fromStyles)),vn.onDestroy(()=>tc(Jn,Wr.toStyles)),void i.push(vn);if(an.isFallbackTransition)return vn.onStart(()=>kh(Jn,Wr.fromStyles)),vn.onDestroy(()=>tc(Jn,Wr.toStyles)),void i.push(vn);const _V=[];Wr.timelines.forEach(Ws=>{Ws.stretchStartingKeyframe=!0,this.disabledNodes.has(Ws.element)||_V.push(Ws)}),Wr.timelines=_V,r.append(Jn,Wr.timelines),a.push({instruction:Wr,player:vn,element:Jn}),Wr.queriedElements.forEach(Ws=>Jo(u,Ws,[]).push(vn)),Wr.preStyleProps.forEach((Ws,Oh)=>{if(Ws.size){let Da=h.get(Oh);Da||h.set(Oh,Da=new Set),Ws.forEach((dw,W1)=>Da.add(W1))}}),Wr.postStyleProps.forEach((Ws,Oh)=>{let Da=m.get(Oh);Da||m.set(Oh,Da=new Set),Ws.forEach((dw,W1)=>Da.add(W1))})});if(Et.length){const Ut=[];Et.forEach(on=>{Ut.push(function lJ(n,e){return new Ye(3505,!1)}())}),_t.forEach(on=>on.destroy()),this.reportError(Ut)}const Kt=new Map,or=new Map;a.forEach(Ut=>{const on=Ut.element;r.has(on)&&(or.set(on,on),this._beforeAnimationBuild(Ut.player.namespaceId,Ut.instruction,Kt))}),i.forEach(Ut=>{const on=Ut.element;this._getPreviousPlayers(on,!1,Ut.namespaceId,Ut.triggerName,null).forEach(vn=>{Jo(Kt,on,[]).push(vn),vn.destroy()})});const Cn=ve.filter(Ut=>pV(Ut,h,m)),Mn=new Map;dV(Mn,this.driver,Ke,m,Hc).forEach(Ut=>{pV(Ut,h,m)&&Cn.push(Ut)});const Zr=new Map;j.forEach((Ut,on)=>{dV(Zr,this.driver,new Set(Ut),h,"!")}),Cn.forEach(Ut=>{const on=Mn.get(Ut),an=Zr.get(Ut);Mn.set(Ut,new Map([...Array.from(on?.entries()??[]),...Array.from(an?.entries()??[])]))});const oi=[],Ss=[],Vi={};a.forEach(Ut=>{const{element:on,player:an,instruction:vn}=Ut;if(r.has(on)){if(v.has(on))return an.onDestroy(()=>tc(on,vn.toStyles)),an.disabled=!0,an.overrideTotalTime(vn.totalTime),void i.push(an);let Jn=Vi;if(or.size>1){let Hi=on;const ta=[];for(;Hi=Hi.parentNode;){const Wr=or.get(Hi);if(Wr){Jn=Wr;break}ta.push(Hi)}ta.forEach(Wr=>or.set(Wr,Jn))}const as=this._buildAnimation(an.namespaceId,vn,Kt,s,Zr,Mn);if(an.setRealPlayer(as),Jn===Vi)oi.push(an);else{const Hi=this.playersByElement.get(Jn);Hi&&Hi.length&&(an.parentPlayer=Qu(Hi)),i.push(an)}}else kh(on,vn.fromStyles),an.onDestroy(()=>tc(on,vn.toStyles)),Ss.push(an),v.has(on)&&i.push(an)}),Ss.forEach(Ut=>{const on=s.get(Ut.element);if(on&&on.length){const an=Qu(on);Ut.setRealPlayer(an)}}),i.forEach(Ut=>{Ut.parentPlayer?Ut.syncPlayerEvents(Ut.parentPlayer):Ut.destroy()});for(let Ut=0;Ut<ve.length;Ut++){const on=ve[Ut],an=on[xa];if(Ap(on,X_),an&&an.hasAnimation)continue;let vn=[];if(u.size){let as=u.get(on);as&&as.length&&vn.push(...as);let Hi=this.driver.query(on,k1,!0);for(let ta=0;ta<Hi.length;ta++){let Wr=u.get(Hi[ta]);Wr&&Wr.length&&vn.push(...Wr)}}const Jn=vn.filter(as=>!as.destroyed);Jn.length?dee(this,on,Jn):this.processLeaveNode(on)}return ve.length=0,oi.forEach(Ut=>{this.players.push(Ut),Ut.onDone(()=>{Ut.destroy();const on=this.players.indexOf(Ut);this.players.splice(on,1)}),Ut.play()}),oi}elementContainsData(e,t){let r=!1;const i=t[xa];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let a=[];if(t){const u=this.playersByQueriedElement.get(e);u&&(a=u)}else{const u=this.playersByElement.get(e);if(u){const h=!s||s==Cv;u.forEach(m=>{m.queued||!h&&m.triggerName!=i||a.push(m)})}}return(r||i)&&(a=a.filter(u=>!(r&&r!=u.namespaceId||i&&i!=u.triggerName))),a}_beforeAnimationBuild(e,t,r){const s=t.element,a=t.isRemovalTransition?void 0:e,u=t.isRemovalTransition?void 0:t.triggerName;for(const h of t.timelines){const m=h.element,v=m!==s,x=Jo(r,m,[]);this._getPreviousPlayers(m,v,a,u,t.toState).forEach(j=>{const Q=j.getRealPlayer();Q.beforeDestroy&&Q.beforeDestroy(),j.destroy(),x.push(j)})}kh(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,a){const u=t.triggerName,h=t.element,m=[],v=new Set,x=new Set,I=t.timelines.map(Q=>{const oe=Q.element;v.add(oe);const ve=oe[xa];if(ve&&ve.removedBeforeQueried)return new vv(Q.duration,Q.delay);const Pe=oe!==h,Ke=function hee(n){const e=[];return fV(n,e),e}((r.get(oe)||iee).map(Kt=>Kt.getRealPlayer())).filter(Kt=>!!Kt.element&&Kt.element===oe),Ge=s.get(oe),st=a.get(oe),_t=VB(0,this._normalizer,0,Q.keyframes,Ge,st),Et=this._buildPlayer(Q,_t,Ke);if(Q.subTimeline&&i&&x.add(oe),Pe){const Kt=new G1(e,u,oe);Kt.setRealPlayer(Et),m.push(Kt)}return Et});m.forEach(Q=>{Jo(this.playersByQueriedElement,Q.element,[]).push(Q),Q.onDone(()=>function lee(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,Q.element,Q))}),v.forEach(Q=>Ea(Q,YB));const j=Qu(I);return j.onDestroy(()=>{v.forEach(Q=>Ap(Q,YB)),tc(h,t.toStyles)}),x.forEach(Q=>{Jo(i,Q,[]).push(j)}),j}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new vv(e.duration,e.delay)}}class G1{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new vv,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>E1(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Jo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function lw(n){return n&&1===n.nodeType}function uV(n,e){const t=n.style.display;return n.style.display=e??"none",t}function dV(n,e,t,r,i){const s=[];t.forEach(h=>s.push(uV(h)));const a=[];r.forEach((h,m)=>{const v=new Map;h.forEach(x=>{const I=e.computeStyle(m,x,i);v.set(x,I),(!I||0==I.length)&&(m[xa]=see,a.push(m))}),n.set(m,v)});let u=0;return t.forEach(h=>uV(h,s[u++])),a}function hV(n,e){const t=new Map;if(n.forEach(u=>t.set(u,[])),0==e.length)return t;const i=new Set(e),s=new Map;function a(u){if(!u)return 1;let h=s.get(u);if(h)return h;const m=u.parentNode;return h=t.has(m)?m:i.has(m)?1:a(m),s.set(u,h),h}return e.forEach(u=>{const h=a(u);1!==h&&t.get(h).push(u)}),t}function Ea(n,e){n.classList?.add(e)}function Ap(n,e){n.classList?.remove(e)}function dee(n,e,t){Qu(t).onDone(()=>n.processLeaveNode(e))}function fV(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof hB?fV(r.players,e):e.push(r)}}function pV(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class cw{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new aee(e,t,r),this._timelineEngine=new JJ(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const a=e+"-"+i;let u=this._triggerCache[a];if(!u){const h=[],v=P1(this._driver,s,h,[]);if(h.length)throw function ZQ(n,e){return new Ye(3404,!1)}();u=function XJ(n,e,t){return new KJ(n,e,t)}(i,v,this._normalizer),this._triggerCache[a]=u}this._transitionEngine.registerTrigger(t,i,u)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,a]=HB(r);this._timelineEngine.command(s,t,a,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[a,u]=HB(r);return this._timelineEngine.listen(a,t,u,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let gee=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&tc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(tc(this._element,this._initialStyles),this._endStyles&&(tc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(kh(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(kh(this._element,this._endStyles),this._endStyles=null),tc(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function $1(n){let e=null;return n.forEach((t,r)=>{(function mee(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class gV{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:eV(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class vee{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return GB(e,t)}getParentElement(e){return M1(e)}query(e,t,r){return $B(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,a=[]){const h={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(h.easing=s);const m=new Map,v=a.filter(j=>j instanceof gV);(function wJ(n,e){return 0===n||0===e})(r,i)&&v.forEach(j=>{j.currentSnapshot.forEach((Q,oe)=>m.set(oe,Q))});let x=function vJ(n){return n.length?n[0]instanceof Map?n:n.map(e=>XB(e)):[]}(t).map(j=>Ju(j));x=function xJ(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,a)=>{r.has(a)||i.push(a),r.set(a,s)}),i.length)for(let s=1;s<e.length;s++){let a=e[s];i.forEach(u=>a.set(u,eV(n,u)))}}return e}(e,x,m);const I=function pee(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=$1(e[0]),e.length>1&&(r=$1(e[e.length-1]))):e instanceof Map&&(t=$1(e)),t||r?new gee(n,t,r):null}(e,x);return new gV(e,x,h,I)}}let yee=(()=>{class n extends lB{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:No.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?cB(t):t;return mV(this._renderer,null,r,"register",[i]),new bee(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(St(Yd),St(sr))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})();class bee extends tZ{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new _ee(this._id,e,t||{},this._renderer)}}class _ee{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return mV(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function mV(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const vV="@.disabled";let wee=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,a)=>{const u=a?.parentNode(s);u&&a.removeChild(u,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let v=this._rendererCache.get(s);return v||(v=new yV("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,v)),v}const a=r.id,u=r.id+"-"+this._currentId;this._currentId++,this.engine.register(u,t);const h=v=>{Array.isArray(v)?v.forEach(h):this.engine.registerTrigger(a,u,t,v.name,v)};return r.data.animation.forEach(h),new xee(this,u,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[a,u]=s;a(u)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(St(Yd),St(cw),St(Kn))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})();class yV{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==vV?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class xee extends yV{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==vV?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function Eee(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),a="";return"@"!=s.charAt(0)&&([s,a]=function Dee(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,a,u=>{this.factory.scheduleListenerCallback(u._data||-1,r,u)})}return this.delegate.listen(e,t,r)}}const Aee=[{provide:A1,useFactory:()=>new vee},{provide:Ic,useValue:"BrowserAnimations"},...[{provide:lB,useClass:yee},{provide:V1,useFactory:function See(){return new $J}},{provide:cw,useClass:(()=>{class n extends cw{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(St(sr),St(A1),St(V1),St(Jg))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})()},{provide:Yd,useFactory:function Mee(n,e,t){return new wee(n,e,t)},deps:[H0,cw,Kn]}]];(function WU(n,e){return hj({rootComponent:n,...wI(e)})})(wv,{providers:function kee(){return[...Aee]}()}).catch(n=>console.error(n))},7352:(Ne,Re,X)=>{"use strict";X.r(Re),X.d(Re,{afterMain:()=>ce,afterRead:()=>se,afterWrite:()=>H,applyStyles:()=>He,arrow:()=>ai,auto:()=>F,basePlacements:()=>D,beforeMain:()=>te,beforeRead:()=>ie,beforeWrite:()=>W,bottom:()=>N,clippingParents:()=>G,computeStyles:()=>ks,createPopper:()=>ka,createPopperBase:()=>hl,createPopperLite:()=>yr,detectOverflow:()=>go,end:()=>k,eventListeners:()=>fo,flip:()=>Nh,hide:()=>Uc,left:()=>S,main:()=>be,modifierPhases:()=>ee,offset:()=>Ta,placements:()=>V,popper:()=>L,popperGenerator:()=>cs,popperOffsets:()=>Sr,preventOverflow:()=>id,read:()=>Y,reference:()=>U,right:()=>C,start:()=>T,top:()=>q,variationPlacements:()=>O,viewport:()=>z,write:()=>B});var q="top",N="bottom",C="right",S="left",F="auto",D=[q,N,C,S],T="start",k="end",G="clippingParents",z="viewport",L="popper",U="reference",O=D.reduce(function(Ae,xe){return Ae.concat([xe+"-"+T,xe+"-"+k])},[]),V=[].concat(D,[F]).reduce(function(Ae,xe){return Ae.concat([xe,xe+"-"+T,xe+"-"+k])},[]),ie="beforeRead",Y="read",se="afterRead",te="beforeMain",be="main",ce="afterMain",W="beforeWrite",B="write",H="afterWrite",ee=[ie,Y,se,te,be,ce,W,B,H];function le(Ae){return Ae?(Ae.nodeName||"").toLowerCase():null}function me(Ae){if(null==Ae)return window;if("[object Window]"!==Ae.toString()){var xe=Ae.ownerDocument;return xe&&xe.defaultView||window}return Ae}function ae(Ae){return Ae instanceof me(Ae).Element||Ae instanceof Element}function _e(Ae){return Ae instanceof me(Ae).HTMLElement||Ae instanceof HTMLElement}function Le(Ae){return!(typeof ShadowRoot>"u")&&(Ae instanceof me(Ae).ShadowRoot||Ae instanceof ShadowRoot)}const He={name:"applyStyles",enabled:!0,phase:"write",fn:function ye(Ae){var xe=Ae.state;Object.keys(xe.elements).forEach(function(Ue){var bt=xe.styles[Ue]||{},lt=xe.attributes[Ue]||{},dt=xe.elements[Ue];!_e(dt)||!le(dt)||(Object.assign(dt.style,bt),Object.keys(lt).forEach(function(Jt){var Bt=lt[Jt];!1===Bt?dt.removeAttribute(Jt):dt.setAttribute(Jt,!0===Bt?"":Bt)}))})},effect:function $e(Ae){var xe=Ae.state,Ue={popper:{position:xe.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(xe.elements.popper.style,Ue.popper),xe.styles=Ue,xe.elements.arrow&&Object.assign(xe.elements.arrow.style,Ue.arrow),function(){Object.keys(xe.elements).forEach(function(bt){var lt=xe.elements[bt],dt=xe.attributes[bt]||{},Bt=Object.keys(xe.styles.hasOwnProperty(bt)?xe.styles[bt]:Ue[bt]).reduce(function(zt,gn){return zt[gn]="",zt},{});!_e(lt)||!le(lt)||(Object.assign(lt.style,Bt),Object.keys(dt).forEach(function(zt){lt.removeAttribute(zt)}))})}},requires:["computeStyles"]};function Ie(Ae){return Ae.split("-")[0]}var we=Math.max,pe=Math.min,nt=Math.round;function qe(){var Ae=navigator.userAgentData;return null!=Ae&&Ae.brands?Ae.brands.map(function(xe){return xe.brand+"/"+xe.version}).join(" "):navigator.userAgent}function Oe(){return!/^((?!chrome|android).)*safari/i.test(qe())}function Je(Ae,xe,Ue){void 0===xe&&(xe=!1),void 0===Ue&&(Ue=!1);var bt=Ae.getBoundingClientRect(),lt=1,dt=1;xe&&_e(Ae)&&(lt=Ae.offsetWidth>0&&nt(bt.width)/Ae.offsetWidth||1,dt=Ae.offsetHeight>0&&nt(bt.height)/Ae.offsetHeight||1);var Bt=(ae(Ae)?me(Ae):window).visualViewport,zt=!Oe()&&Ue,gn=(bt.left+(zt&&Bt?Bt.offsetLeft:0))/lt,Ye=(bt.top+(zt&&Bt?Bt.offsetTop:0))/dt,er=bt.width/lt,Wt=bt.height/dt;return{width:er,height:Wt,top:Ye,right:gn+er,bottom:Ye+Wt,left:gn,x:gn,y:Ye}}function Pt(Ae){var xe=Je(Ae),Ue=Ae.offsetWidth,bt=Ae.offsetHeight;return Math.abs(xe.width-Ue)<=1&&(Ue=xe.width),Math.abs(xe.height-bt)<=1&&(bt=xe.height),{x:Ae.offsetLeft,y:Ae.offsetTop,width:Ue,height:bt}}function pt(Ae,xe){var Ue=xe.getRootNode&&xe.getRootNode();if(Ae.contains(xe))return!0;if(Ue&&Le(Ue)){var bt=xe;do{if(bt&&Ae.isSameNode(bt))return!0;bt=bt.parentNode||bt.host}while(bt)}return!1}function at(Ae){return me(Ae).getComputedStyle(Ae)}function ut(Ae){return["table","td","th"].indexOf(le(Ae))>=0}function We(Ae){return((ae(Ae)?Ae.ownerDocument:Ae.document)||window.document).documentElement}function De(Ae){return"html"===le(Ae)?Ae:Ae.assignedSlot||Ae.parentNode||(Le(Ae)?Ae.host:null)||We(Ae)}function Be(Ae){return _e(Ae)&&"fixed"!==at(Ae).position?Ae.offsetParent:null}function kt(Ae){for(var xe=me(Ae),Ue=Be(Ae);Ue&&ut(Ue)&&"static"===at(Ue).position;)Ue=Be(Ue);return Ue&&("html"===le(Ue)||"body"===le(Ue)&&"static"===at(Ue).position)?xe:Ue||function ht(Ae){var xe=/firefox/i.test(qe());if(/Trident/i.test(qe())&&_e(Ae)&&"fixed"===at(Ae).position)return null;var lt=De(Ae);for(Le(lt)&&(lt=lt.host);_e(lt)&&["html","body"].indexOf(le(lt))<0;){var dt=at(lt);if("none"!==dt.transform||"none"!==dt.perspective||"paint"===dt.contain||-1!==["transform","perspective"].indexOf(dt.willChange)||xe&&"filter"===dt.willChange||xe&&dt.filter&&"none"!==dt.filter)return lt;lt=lt.parentNode}return null}(Ae)||xe}function ft(Ae){return["top","bottom"].indexOf(Ae)>=0?"x":"y"}function Nt(Ae,xe,Ue){return we(Ae,pe(xe,Ue))}function sn(Ae){return Object.assign({},{top:0,right:0,bottom:0,left:0},Ae)}function hn(Ae,xe){return xe.reduce(function(Ue,bt){return Ue[bt]=Ae,Ue},{})}const ai={name:"arrow",enabled:!0,phase:"main",fn:function wr(Ae){var xe,Ue=Ae.state,bt=Ae.name,lt=Ae.options,dt=Ue.elements.arrow,Jt=Ue.modifiersData.popperOffsets,Bt=Ie(Ue.placement),zt=ft(Bt),Ye=[S,C].indexOf(Bt)>=0?"height":"width";if(dt&&Jt){var er=function(xe,Ue){return sn("number"!=typeof(xe="function"==typeof xe?xe(Object.assign({},Ue.rects,{placement:Ue.placement})):xe)?xe:hn(xe,D))}(lt.padding,Ue),Wt=Pt(dt),qt="y"===zt?q:S,Ir="y"===zt?N:C,Wn=Ue.rects.reference[Ye]+Ue.rects.reference[zt]-Jt[zt]-Ue.rects.popper[Ye],qn=Jt[zt]-Ue.rects.reference[zt],Yn=kt(dt),Xn=Yn?"y"===zt?Yn.clientHeight||0:Yn.clientWidth||0:0,Ln=Xn/2-Wt[Ye]/2+(Wn/2-qn/2),Ar=Nt(er[qt],Ln,Xn-Wt[Ye]-er[Ir]);Ue.modifiersData[bt]=((xe={})[zt]=Ar,xe.centerOffset=Ar-Ln,xe)}},effect:function vr(Ae){var xe=Ae.state,bt=Ae.options.element,lt=void 0===bt?"[data-popper-arrow]":bt;null!=lt&&("string"==typeof lt&&!(lt=xe.elements.popper.querySelector(lt))||pt(xe.elements.popper,lt)&&(xe.elements.arrow=lt))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function vi(Ae){return Ae.split("-")[1]}var Ms={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Ts(Ae){var xe,Ue=Ae.popper,bt=Ae.popperRect,lt=Ae.placement,dt=Ae.variation,Jt=Ae.offsets,Bt=Ae.position,zt=Ae.gpuAcceleration,gn=Ae.adaptive,Ye=Ae.roundOffsets,er=Ae.isFixed,Wt=Jt.x,qt=void 0===Wt?0:Wt,Ir=Jt.y,Wn=void 0===Ir?0:Ir,qn="function"==typeof Ye?Ye({x:qt,y:Wn}):{x:qt,y:Wn};qt=qn.x,Wn=qn.y;var Yn=Jt.hasOwnProperty("x"),Xn=Jt.hasOwnProperty("y"),Qr=S,ar=q,pr=window;if(gn){var Ln=kt(Ue),Ar="clientHeight",Jr="clientWidth";Ln===me(Ue)&&"static"!==at(Ln=We(Ue)).position&&"absolute"===Bt&&(Ar="scrollHeight",Jr="scrollWidth"),(lt===q||(lt===S||lt===C)&&dt===k)&&(ar=N,Wn-=(er&&Ln===pr&&pr.visualViewport?pr.visualViewport.height:Ln[Ar])-bt.height,Wn*=zt?1:-1),lt!==S&&(lt!==q&&lt!==N||dt!==k)||(Qr=C,qt-=(er&&Ln===pr&&pr.visualViewport?pr.visualViewport.width:Ln[Jr])-bt.width,qt*=zt?1:-1)}var tr,xr=Object.assign({position:Bt},gn&&Ms),bo=!0===Ye?function As(Ae){var Ue=Ae.y,lt=window.devicePixelRatio||1;return{x:nt(Ae.x*lt)/lt||0,y:nt(Ue*lt)/lt||0}}({x:qt,y:Wn}):{x:qt,y:Wn};return qt=bo.x,Wn=bo.y,Object.assign({},xr,zt?((tr={})[ar]=Xn?"0":"",tr[Qr]=Yn?"0":"",tr.transform=(pr.devicePixelRatio||1)<=1?"translate("+qt+"px, "+Wn+"px)":"translate3d("+qt+"px, "+Wn+"px, 0)",tr):((xe={})[ar]=Xn?Wn+"px":"",xe[Qr]=Yn?qt+"px":"",xe.transform="",xe))}const ks={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function Zt(Ae){var xe=Ae.state,Ue=Ae.options,bt=Ue.gpuAcceleration,lt=void 0===bt||bt,dt=Ue.adaptive,Jt=void 0===dt||dt,Bt=Ue.roundOffsets,zt=void 0===Bt||Bt,Ye={placement:Ie(xe.placement),variation:vi(xe.placement),popper:xe.elements.popper,popperRect:xe.rects.popper,gpuAcceleration:lt,isFixed:"fixed"===xe.options.strategy};null!=xe.modifiersData.popperOffsets&&(xe.styles.popper=Object.assign({},xe.styles.popper,Ts(Object.assign({},Ye,{offsets:xe.modifiersData.popperOffsets,position:xe.options.strategy,adaptive:Jt,roundOffsets:zt})))),null!=xe.modifiersData.arrow&&(xe.styles.arrow=Object.assign({},xe.styles.arrow,Ts(Object.assign({},Ye,{offsets:xe.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:zt})))),xe.attributes.popper=Object.assign({},xe.attributes.popper,{"data-popper-placement":xe.placement})},data:{}};var jn={passive:!0};const fo={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function ed(Ae){var xe=Ae.state,Ue=Ae.instance,bt=Ae.options,lt=bt.scroll,dt=void 0===lt||lt,Jt=bt.resize,Bt=void 0===Jt||Jt,zt=me(xe.elements.popper),gn=[].concat(xe.scrollParents.reference,xe.scrollParents.popper);return dt&&gn.forEach(function(Ye){Ye.addEventListener("scroll",Ue.update,jn)}),Bt&&zt.addEventListener("resize",Ue.update,jn),function(){dt&&gn.forEach(function(Ye){Ye.removeEventListener("scroll",Ue.update,jn)}),Bt&&zt.removeEventListener("resize",Ue.update,jn)}},data:{}};var Ca={left:"right",right:"left",bottom:"top",top:"bottom"};function nc(Ae){return Ae.replace(/left|right|bottom|top/g,function(xe){return Ca[xe]})}var jc={start:"end",end:"start"};function al(Ae){return Ae.replace(/start|end/g,function(xe){return jc[xe]})}function ko(Ae){var xe=me(Ae);return{scrollLeft:xe.pageXOffset,scrollTop:xe.pageYOffset}}function Sa(Ae){return Je(We(Ae)).left+ko(Ae).scrollLeft}function Si(Ae){var xe=at(Ae);return/auto|scroll|overlay|hidden/.test(xe.overflow+xe.overflowY+xe.overflowX)}function na(Ae){return["html","body","#document"].indexOf(le(Ae))>=0?Ae.ownerDocument.body:_e(Ae)&&Si(Ae)?Ae:na(De(Ae))}function Ma(Ae,xe){var Ue;void 0===xe&&(xe=[]);var bt=na(Ae),lt=bt===(null==(Ue=Ae.ownerDocument)?void 0:Ue.body),dt=me(bt),Jt=lt?[dt].concat(dt.visualViewport||[],Si(bt)?bt:[]):bt,Bt=xe.concat(Jt);return lt?Bt:Bt.concat(Ma(De(Jt)))}function ra(Ae){return Object.assign({},Ae,{left:Ae.x,top:Ae.y,right:Ae.x+Ae.width,bottom:Ae.y+Ae.height})}function cl(Ae,xe,Ue){return xe===z?ra(function rc(Ae,xe){var Ue=me(Ae),bt=We(Ae),lt=Ue.visualViewport,dt=bt.clientWidth,Jt=bt.clientHeight,Bt=0,zt=0;if(lt){dt=lt.width,Jt=lt.height;var gn=Oe();(gn||!gn&&"fixed"===xe)&&(Bt=lt.offsetLeft,zt=lt.offsetTop)}return{width:dt,height:Jt,x:Bt+Sa(Ae),y:zt}}(Ae,Ue)):ae(xe)?function td(Ae,xe){var Ue=Je(Ae,!1,"fixed"===xe);return Ue.top=Ue.top+Ae.clientTop,Ue.left=Ue.left+Ae.clientLeft,Ue.bottom=Ue.top+Ae.clientHeight,Ue.right=Ue.left+Ae.clientWidth,Ue.width=Ae.clientWidth,Ue.height=Ae.clientHeight,Ue.x=Ue.left,Ue.y=Ue.top,Ue}(xe,Ue):ra(function ll(Ae){var xe,Ue=We(Ae),bt=ko(Ae),lt=null==(xe=Ae.ownerDocument)?void 0:xe.body,dt=we(Ue.scrollWidth,Ue.clientWidth,lt?lt.scrollWidth:0,lt?lt.clientWidth:0),Jt=we(Ue.scrollHeight,Ue.clientHeight,lt?lt.scrollHeight:0,lt?lt.clientHeight:0),Bt=-bt.scrollLeft+Sa(Ae),zt=-bt.scrollTop;return"rtl"===at(lt||Ue).direction&&(Bt+=we(Ue.clientWidth,lt?lt.clientWidth:0)-dt),{width:dt,height:Jt,x:Bt,y:zt}}(We(Ae)))}function po(Ae){var zt,xe=Ae.reference,Ue=Ae.element,bt=Ae.placement,lt=bt?Ie(bt):null,dt=bt?vi(bt):null,Jt=xe.x+xe.width/2-Ue.width/2,Bt=xe.y+xe.height/2-Ue.height/2;switch(lt){case q:zt={x:Jt,y:xe.y-Ue.height};break;case N:zt={x:Jt,y:xe.y+xe.height};break;case C:zt={x:xe.x+xe.width,y:Bt};break;case S:zt={x:xe.x-Ue.width,y:Bt};break;default:zt={x:xe.x,y:xe.y}}var gn=lt?ft(lt):null;if(null!=gn){var Ye="y"===gn?"height":"width";switch(dt){case T:zt[gn]=zt[gn]-(xe[Ye]/2-Ue[Ye]/2);break;case k:zt[gn]=zt[gn]+(xe[Ye]/2-Ue[Ye]/2)}}return zt}function go(Ae,xe){void 0===xe&&(xe={});var bt=xe.placement,lt=void 0===bt?Ae.placement:bt,dt=xe.strategy,Jt=void 0===dt?Ae.strategy:dt,Bt=xe.boundary,zt=void 0===Bt?G:Bt,gn=xe.rootBoundary,Ye=void 0===gn?z:gn,er=xe.elementContext,Wt=void 0===er?L:er,qt=xe.altBoundary,Ir=void 0!==qt&&qt,Wn=xe.padding,qn=void 0===Wn?0:Wn,Yn=sn("number"!=typeof qn?qn:hn(qn,D)),Qr=Ae.rects.popper,ar=Ae.elements[Ir?Wt===L?U:L:Wt],pr=function Rh(Ae,xe,Ue,bt){var lt="clippingParents"===xe?function ul(Ae){var xe=Ma(De(Ae)),bt=["absolute","fixed"].indexOf(at(Ae).position)>=0&&_e(Ae)?kt(Ae):Ae;return ae(bt)?xe.filter(function(lt){return ae(lt)&&pt(lt,bt)&&"body"!==le(lt)}):[]}(Ae):[].concat(xe),dt=[].concat(lt,[Ue]),Bt=dt.reduce(function(zt,gn){var Ye=cl(Ae,gn,bt);return zt.top=we(Ye.top,zt.top),zt.right=pe(Ye.right,zt.right),zt.bottom=pe(Ye.bottom,zt.bottom),zt.left=we(Ye.left,zt.left),zt},cl(Ae,dt[0],bt));return Bt.width=Bt.right-Bt.left,Bt.height=Bt.bottom-Bt.top,Bt.x=Bt.left,Bt.y=Bt.top,Bt}(ae(ar)?ar:ar.contextElement||We(Ae.elements.popper),zt,Ye,Jt),Ln=Je(Ae.elements.reference),Ar=po({reference:Ln,element:Qr,strategy:"absolute",placement:lt}),Jr=ra(Object.assign({},Qr,Ar)),li=Wt===L?Jr:Ln,Or={top:pr.top-li.top+Yn.top,bottom:li.bottom-pr.bottom+Yn.bottom,left:pr.left-li.left+Yn.left,right:li.right-pr.right+Yn.right},xr=Ae.modifiersData.offset;if(Wt===L&&xr){var bo=xr[lt];Object.keys(Or).forEach(function(tr){var qs=[C,N].indexOf(tr)>=0?1:-1,bi=[q,N].indexOf(tr)>=0?"y":"x";Or[tr]+=bo[bi]*qs})}return Or}const Nh={name:"flip",enabled:!0,phase:"main",fn:function Ph(Ae){var xe=Ae.state,Ue=Ae.options,bt=Ae.name;if(!xe.modifiersData[bt]._skip){for(var lt=Ue.mainAxis,dt=void 0===lt||lt,Jt=Ue.altAxis,Bt=void 0===Jt||Jt,zt=Ue.fallbackPlacements,gn=Ue.padding,Ye=Ue.boundary,er=Ue.rootBoundary,Wt=Ue.altBoundary,qt=Ue.flipVariations,Ir=void 0===qt||qt,Wn=Ue.allowedAutoPlacements,qn=xe.options.placement,Yn=Ie(qn),Qr=zt||(Yn!==qn&&Ir?function Aa(Ae){if(Ie(Ae)===F)return[];var xe=nc(Ae);return[al(Ae),xe,al(xe)]}(qn):[nc(qn)]),ar=[qn].concat(Qr).reduce(function(gl,Ys){return gl.concat(Ie(Ys)===F?function ls(Ae,xe){void 0===xe&&(xe={});var lt=xe.boundary,dt=xe.rootBoundary,Jt=xe.padding,Bt=xe.flipVariations,zt=xe.allowedAutoPlacements,gn=void 0===zt?V:zt,Ye=vi(xe.placement),er=Ye?Bt?O:O.filter(function(Ir){return vi(Ir)===Ye}):D,Wt=er.filter(function(Ir){return gn.indexOf(Ir)>=0});0===Wt.length&&(Wt=er);var qt=Wt.reduce(function(Ir,Wn){return Ir[Wn]=go(Ae,{placement:Wn,boundary:lt,rootBoundary:dt,padding:Jt})[Ie(Wn)],Ir},{});return Object.keys(qt).sort(function(Ir,Wn){return qt[Ir]-qt[Wn]})}(xe,{placement:Ys,boundary:Ye,rootBoundary:er,padding:gn,flipVariations:Ir,allowedAutoPlacements:Wn}):Ys)},[]),pr=xe.rects.reference,Ln=xe.rects.popper,Ar=new Map,Jr=!0,li=ar[0],Or=0;Or<ar.length;Or++){var xr=ar[Or],bo=Ie(xr),tr=vi(xr)===T,qs=[q,N].indexOf(bo)>=0,bi=qs?"width":"height",wn=go(xe,{placement:xr,boundary:Ye,rootBoundary:er,altBoundary:Wt,padding:gn}),Lr=qs?tr?C:S:tr?N:q;pr[bi]>Ln[bi]&&(Lr=nc(Lr));var ad=nc(Lr),pl=[];if(dt&&pl.push(wn[bo]<=0),Bt&&pl.push(wn[Lr]<=0,wn[ad]<=0),pl.every(function(gl){return gl})){li=xr,Jr=!1;break}Ar.set(xr,pl)}if(Jr)for(var Vh=function(Ys){var _o=ar.find(function(Wc){var Oo=Ar.get(Wc);if(Oo)return Oo.slice(0,Ys).every(function(Ia){return Ia})});if(_o)return li=_o,"break"},gr=Ir?3:1;gr>0&&"break"!==Vh(gr);gr--);xe.placement!==li&&(xe.modifiersData[bt]._skip=!0,xe.placement=li,xe.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function nd(Ae,xe,Ue){return void 0===Ue&&(Ue={x:0,y:0}),{top:Ae.top-xe.height-Ue.y,right:Ae.right-xe.width+Ue.x,bottom:Ae.bottom-xe.height+Ue.y,left:Ae.left-xe.width-Ue.x}}function rd(Ae){return[q,C,N,S].some(function(xe){return Ae[xe]>=0})}const Uc={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function Tp(Ae){var xe=Ae.state,Ue=Ae.name,bt=xe.rects.reference,lt=xe.rects.popper,dt=xe.modifiersData.preventOverflow,Jt=go(xe,{elementContext:"reference"}),Bt=go(xe,{altBoundary:!0}),zt=nd(Jt,bt),gn=nd(Bt,lt,dt),Ye=rd(zt),er=rd(gn);xe.modifiersData[Ue]={referenceClippingOffsets:zt,popperEscapeOffsets:gn,isReferenceHidden:Ye,hasPopperEscaped:er},xe.attributes.popper=Object.assign({},xe.attributes.popper,{"data-popper-reference-hidden":Ye,"data-popper-escaped":er})}},Ta={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function Gc(Ae){var xe=Ae.state,bt=Ae.name,lt=Ae.options.offset,dt=void 0===lt?[0,0]:lt,Jt=V.reduce(function(Ye,er){return Ye[er]=function mo(Ae,xe,Ue){var bt=Ie(Ae),lt=[S,q].indexOf(bt)>=0?-1:1,dt="function"==typeof Ue?Ue(Object.assign({},xe,{placement:Ae})):Ue,Jt=dt[0],Bt=dt[1];return Jt=Jt||0,Bt=(Bt||0)*lt,[S,C].indexOf(bt)>=0?{x:Bt,y:Jt}:{x:Jt,y:Bt}}(er,xe.rects,dt),Ye},{}),Bt=Jt[xe.placement],gn=Bt.y;null!=xe.modifiersData.popperOffsets&&(xe.modifiersData.popperOffsets.x+=Bt.x,xe.modifiersData.popperOffsets.y+=gn),xe.modifiersData[bt]=Jt}},Sr={name:"popperOffsets",enabled:!0,phase:"read",fn:function $c(Ae){var xe=Ae.state;xe.modifiersData[Ae.name]=po({reference:xe.rects.reference,element:xe.rects.popper,strategy:"absolute",placement:xe.placement})},data:{}},id={name:"preventOverflow",enabled:!0,phase:"main",fn:function ur(Ae){var xe=Ae.state,Ue=Ae.options,bt=Ae.name,lt=Ue.mainAxis,dt=void 0===lt||lt,Jt=Ue.altAxis,Bt=void 0!==Jt&&Jt,Wt=Ue.tether,qt=void 0===Wt||Wt,Ir=Ue.tetherOffset,Wn=void 0===Ir?0:Ir,qn=go(xe,{boundary:Ue.boundary,rootBoundary:Ue.rootBoundary,padding:Ue.padding,altBoundary:Ue.altBoundary}),Yn=Ie(xe.placement),Xn=vi(xe.placement),Qr=!Xn,ar=ft(Yn),pr=function kp(Ae){return"x"===Ae?"y":"x"}(ar),Ln=xe.modifiersData.popperOffsets,Ar=xe.rects.reference,Jr=xe.rects.popper,li="function"==typeof Wn?Wn(Object.assign({},xe.rects,{placement:xe.placement})):Wn,Or="number"==typeof li?{mainAxis:li,altAxis:li}:Object.assign({mainAxis:0,altAxis:0},li),xr=xe.modifiersData.offset?xe.modifiersData.offset[xe.placement]:null,bo={x:0,y:0};if(Ln){if(dt){var tr,qs="y"===ar?q:S,bi="y"===ar?N:C,wn="y"===ar?"height":"width",Lr=Ln[ar],ad=Lr+qn[qs],pl=Lr-qn[bi],nn=qt?-Jr[wn]/2:0,Vh=Xn===T?Ar[wn]:Jr[wn],gr=Xn===T?-Jr[wn]:-Ar[wn],Io=xe.elements.arrow,gl=qt&&Io?Pt(Io):{width:0,height:0},Ys=xe.modifiersData["arrow#persistent"]?xe.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},_o=Ys[qs],Wc=Ys[bi],Oo=Nt(0,Ar[wn],gl[wn]),Ia=Qr?Ar[wn]/2-nn-Oo-_o-Or.mainAxis:Vh-Oo-_o-Or.mainAxis,ld=Qr?-Ar[wn]/2+nn+Oo+Wc+Or.mainAxis:gr+Oo+Wc+Or.mainAxis,qc=xe.elements.arrow&&kt(xe.elements.arrow),bn=null!=(tr=xr?.[ar])?tr:0,Rp=Lr+ld-bn,Mr=Nt(qt?pe(ad,Lr+Ia-bn-(qc?"y"===ar?qc.clientTop||0:qc.clientLeft||0:0)):ad,Lr,qt?we(pl,Rp):pl);Ln[ar]=Mr,bo[ar]=Mr-Lr}if(Bt){var Xs,Oa=Ln[pr],ud="y"===pr?"height":"width",Ra=Oa+qn["x"===ar?q:S],wo=Oa-qn["x"===ar?N:C],Pa=-1!==[q,S].indexOf(Yn),Os=null!=(Xs=xr?.[pr])?Xs:0,ml=Pa?Ra:Oa-Ar[ud]-Jr[ud]-Os+Or.altAxis,Hh=Pa?Oa+Ar[ud]+Jr[ud]-Os-Or.altAxis:wo,ic=qt&&Pa?function tn(Ae,xe,Ue){var bt=Nt(Ae,xe,Ue);return bt>Ue?Ue:bt}(ml,Oa,Hh):Nt(qt?ml:Ra,Oa,qt?Hh:wo);Ln[pr]=ic,bo[pr]=ic-Oa}xe.modifiersData[bt]=bo}},requiresIfExists:["offset"]};function Ip(Ae,xe,Ue){void 0===Ue&&(Ue=!1);var bt=_e(xe),lt=_e(xe)&&function dl(Ae){var xe=Ae.getBoundingClientRect(),Ue=nt(xe.width)/Ae.offsetWidth||1,bt=nt(xe.height)/Ae.offsetHeight||1;return 1!==Ue||1!==bt}(xe),dt=We(xe),Jt=Je(Ae,lt,Ue),Bt={scrollLeft:0,scrollTop:0},zt={x:0,y:0};return(bt||!bt&&!Ue)&&(("body"!==le(xe)||Si(dt))&&(Bt=function Lh(Ae){return Ae!==me(Ae)&&_e(Ae)?function Is(Ae){return{scrollLeft:Ae.scrollLeft,scrollTop:Ae.scrollTop}}(Ae):ko(Ae)}(xe)),_e(xe)?((zt=Je(xe,!0)).x+=xe.clientLeft,zt.y+=xe.clientTop):dt&&(zt.x=Sa(dt))),{x:Jt.left+Bt.scrollLeft-zt.x,y:Jt.top+Bt.scrollTop-zt.y,width:Jt.width,height:Jt.height}}function sd(Ae){var xe=new Map,Ue=new Set,bt=[];function lt(dt){Ue.add(dt.name),[].concat(dt.requires||[],dt.requiresIfExists||[]).forEach(function(Bt){if(!Ue.has(Bt)){var zt=xe.get(Bt);zt&&lt(zt)}}),bt.push(dt)}return Ae.forEach(function(dt){xe.set(dt.name,dt)}),Ae.forEach(function(dt){Ue.has(dt.name)||lt(dt)}),bt}function ia(Ae){var xe;return function(){return xe||(xe=new Promise(function(Ue){Promise.resolve().then(function(){xe=void 0,Ue(Ae())})})),xe}}var yo={placement:"bottom",modifiers:[],strategy:"absolute"};function Fh(){for(var Ae=arguments.length,xe=new Array(Ae),Ue=0;Ue<Ae;Ue++)xe[Ue]=arguments[Ue];return!xe.some(function(bt){return!(bt&&"function"==typeof bt.getBoundingClientRect)})}function cs(Ae){void 0===Ae&&(Ae={});var Ue=Ae.defaultModifiers,bt=void 0===Ue?[]:Ue,lt=Ae.defaultOptions,dt=void 0===lt?yo:lt;return function(Bt,zt,gn){void 0===gn&&(gn=dt);var Ye={placement:"bottom",orderedModifiers:[],options:Object.assign({},yo,dt),modifiersData:{},elements:{reference:Bt,popper:zt},attributes:{},styles:{}},er=[],Wt=!1,qt={state:Ye,setOptions:function(Yn){var Xn="function"==typeof Yn?Yn(Ye.options):Yn;Wn(),Ye.options=Object.assign({},dt,Ye.options,Xn),Ye.scrollParents={reference:ae(Bt)?Ma(Bt):Bt.contextElement?Ma(Bt.contextElement):[],popper:Ma(zt)};var Qr=function yi(Ae){var xe=sd(Ae);return ee.reduce(function(Ue,bt){return Ue.concat(xe.filter(function(lt){return lt.phase===bt}))},[])}(function od(Ae){var xe=Ae.reduce(function(Ue,bt){var lt=Ue[bt.name];return Ue[bt.name]=lt?Object.assign({},lt,bt,{options:Object.assign({},lt.options,bt.options),data:Object.assign({},lt.data,bt.data)}):bt,Ue},{});return Object.keys(xe).map(function(Ue){return xe[Ue]})}([].concat(bt,Ye.options.modifiers)));return Ye.orderedModifiers=Qr.filter(function(xr){return xr.enabled}),function Ir(){Ye.orderedModifiers.forEach(function(qn){var Xn=qn.options,ar=qn.effect;if("function"==typeof ar){var pr=ar({state:Ye,name:qn.name,instance:qt,options:void 0===Xn?{}:Xn});er.push(pr||function(){})}})}(),qt.update()},forceUpdate:function(){if(!Wt){var Yn=Ye.elements,Xn=Yn.reference,Qr=Yn.popper;if(Fh(Xn,Qr)){Ye.rects={reference:Ip(Xn,kt(Qr),"fixed"===Ye.options.strategy),popper:Pt(Qr)},Ye.reset=!1,Ye.placement=Ye.options.placement,Ye.orderedModifiers.forEach(function(xr){return Ye.modifiersData[xr.name]=Object.assign({},xr.data)});for(var pr=0;pr<Ye.orderedModifiers.length;pr++)if(!0!==Ye.reset){var Ln=Ye.orderedModifiers[pr],Ar=Ln.fn,Jr=Ln.options;"function"==typeof Ar&&(Ye=Ar({state:Ye,options:void 0===Jr?{}:Jr,name:Ln.name,instance:qt})||Ye)}else Ye.reset=!1,pr=-1}}},update:ia(function(){return new Promise(function(qn){qt.forceUpdate(),qn(Ye)})}),destroy:function(){Wn(),Wt=!0}};if(!Fh(Bt,zt))return qt;function Wn(){er.forEach(function(qn){return qn()}),er=[]}return qt.setOptions(gn).then(function(qn){!Wt&&gn.onFirstUpdate&&gn.onFirstUpdate(qn)}),qt}}var hl=cs(),ka=cs({defaultModifiers:[fo,Sr,ks,He,Ta,Nh,id,ai,Uc]}),yr=cs({defaultModifiers:[fo,Sr,ks,He]})},5423:Ne=>{"use strict";Ne.exports=function Re(X){return null===X||"object"!=typeof X||null!=X.toJSON?JSON.stringify(X):Array.isArray(X)?"["+X.reduce((q,N,C)=>q+(0===C?"":",")+Re(void 0===N||"symbol"==typeof N?null:N),"")+"]":"{"+Object.keys(X).sort().reduce((q,N,C)=>void 0===X[N]||"symbol"==typeof X[N]?q:q+(0===q.length?"":",")+Re(N)+":"+Re(X[N]),"")+"}"}},2405:function(Ne,Re,X){var q;Ne.exports=(q=X(5982),function(N){var C={};function S(F){if(C[F])return C[F].exports;var D=C[F]={i:F,l:!1,exports:{}};return N[F].call(D.exports,D,D.exports,S),D.l=!0,D.exports}return S.m=N,S.c=C,S.i=function(F){return F},S.d=function(F,D,T){S.o(F,D)||Object.defineProperty(F,D,{configurable:!1,enumerable:!0,get:T})},S.n=function(F){var D=F&&F.__esModule?function(){return F.default}:function(){return F};return S.d(D,"a",D),D},S.o=function(F,D){return Object.prototype.hasOwnProperty.call(F,D)},S.p="",S(S.s=7)}([function(N,C){N.exports=q},function(N,C,S){"use strict";var F=S(0).FDLayoutConstants;function D(){}for(var T in F)D[T]=F[T];D.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,D.DEFAULT_RADIAL_SEPARATION=F.DEFAULT_EDGE_LENGTH,D.DEFAULT_COMPONENT_SEPERATION=60,D.TILE=!0,D.TILING_PADDING_VERTICAL=10,D.TILING_PADDING_HORIZONTAL=10,D.TREE_REDUCTION_ON_INCREMENTAL=!1,N.exports=D},function(N,C,S){"use strict";var F=S(0).FDLayoutEdge;function D(k,G,z){F.call(this,k,G,z)}for(var T in D.prototype=Object.create(F.prototype),F)D[T]=F[T];N.exports=D},function(N,C,S){"use strict";var F=S(0).LGraph;function D(k,G,z){F.call(this,k,G,z)}for(var T in D.prototype=Object.create(F.prototype),F)D[T]=F[T];N.exports=D},function(N,C,S){"use strict";var F=S(0).LGraphManager;function D(k){F.call(this,k)}for(var T in D.prototype=Object.create(F.prototype),F)D[T]=F[T];N.exports=D},function(N,C,S){"use strict";var F=S(0).FDLayoutNode,D=S(0).IMath;function T(G,z,L,U){F.call(this,G,z,L,U)}for(var k in T.prototype=Object.create(F.prototype),F)T[k]=F[k];T.prototype.move=function(){var G=this.graphManager.getLayout();this.displacementX=G.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY=G.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren,Math.abs(this.displacementX)>G.coolingFactor*G.maxNodeDisplacement&&(this.displacementX=G.coolingFactor*G.maxNodeDisplacement*D.sign(this.displacementX)),Math.abs(this.displacementY)>G.coolingFactor*G.maxNodeDisplacement&&(this.displacementY=G.coolingFactor*G.maxNodeDisplacement*D.sign(this.displacementY)),null==this.child||0==this.child.getNodes().length?this.moveBy(this.displacementX,this.displacementY):this.propogateDisplacementToChildren(this.displacementX,this.displacementY),G.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},T.prototype.propogateDisplacementToChildren=function(G,z){for(var U,L=this.getChild().getNodes(),O=0;O<L.length;O++)null==(U=L[O]).getChild()?(U.moveBy(G,z),U.displacementX+=G,U.displacementY+=z):U.propogateDisplacementToChildren(G,z)},T.prototype.setPred1=function(G){this.pred1=G},T.prototype.getPred1=function(){return pred1},T.prototype.getPred2=function(){return pred2},T.prototype.setNext=function(G){this.next=G},T.prototype.getNext=function(){return next},T.prototype.setProcessed=function(G){this.processed=G},T.prototype.isProcessed=function(){return processed},N.exports=T},function(N,C,S){"use strict";var F=S(0).FDLayout,D=S(4),T=S(3),k=S(5),G=S(2),z=S(1),L=S(0).FDLayoutConstants,U=S(0).LayoutConstants,O=S(0).Point,V=S(0).PointD,ie=S(0).Layout,Y=S(0).Integer,se=S(0).IGeometry,te=S(0).LGraph,be=S(0).Transform;function ce(){F.call(this),this.toBeTiled={}}for(var W in ce.prototype=Object.create(F.prototype),F)ce[W]=F[W];ce.prototype.newGraphManager=function(){var B=new D(this);return this.graphManager=B,B},ce.prototype.newGraph=function(B){return new T(null,this.graphManager,B)},ce.prototype.newNode=function(B){return new k(this.graphManager,B)},ce.prototype.newEdge=function(B){return new G(null,null,B)},ce.prototype.initParameters=function(){F.prototype.initParameters.call(this,arguments),this.isSubLayout||(this.idealEdgeLength=z.DEFAULT_EDGE_LENGTH<10?10:z.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=z.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.springConstant=L.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=L.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=L.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=L.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=L.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=L.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1,this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/L.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=L.CONVERGENCE_CHECK_PERIOD/this.maxIterations,this.coolingAdjuster=1)},ce.prototype.layout=function(){return U.DEFAULT_CREATE_BENDS_AS_NEEDED&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},ce.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(z.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var H=new Set(this.getAllNodes()),ee=this.nodesWithGravity.filter(function(ae){return H.has(ae)});this.graphManager.setAllNodesToApplyGravitation(ee)}}else{var B=this.getFlatForest();B.length>0?this.positionNodesRadially(B):(this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation(),H=new Set(this.getAllNodes()),ee=this.nodesWithGravity.filter(function(le){return H.has(le)}),this.graphManager.setAllNodesToApplyGravitation(ee),this.positionNodesRandomly())}return this.initSpringEmbedder(),this.runSpringEmbedder(),!0},ce.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}if(this.totalIterations%L.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged()){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}this.coolingCycle++,0==this.layoutQuality?this.coolingAdjuster=this.coolingCycle:1==this.layoutQuality&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var B=new Set(this.getAllNodes()),H=this.nodesWithGravity.filter(function(me){return B.has(me)});this.graphManager.setAllNodesToApplyGravitation(H),this.graphManager.updateBounds(),this.updateGrid(),this.coolingFactor=L.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),this.coolingFactor=L.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var ee=!this.isTreeGrowing&&!this.isGrowthFinished,le=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(ee,le),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},ce.prototype.getPositionsData=function(){for(var B=this.graphManager.getAllNodes(),H={},ee=0;ee<B.length;ee++){var le=B[ee].rect,me=B[ee].id;H[me]={id:me,x:le.getCenterX(),y:le.getCenterY(),w:le.width,h:le.height}}return H},ce.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var B=!1;if("during"===L.ANIMATE)this.emit("layoutstarted");else{for(;!B;)B=this.tick();this.graphManager.updateBounds()}},ce.prototype.calculateNodesToApplyGravitationTo=function(){var H,me,B=[],ee=this.graphManager.getGraphs(),le=ee.length;for(me=0;me<le;me++)(H=ee[me]).updateConnected(),H.isConnected||(B=B.concat(H.getNodes()));return B},ce.prototype.createBendpoints=function(){var B=[];B=B.concat(this.graphManager.getAllEdges());var ee,H=new Set;for(ee=0;ee<B.length;ee++){var le=B[ee];if(!H.has(le)){var me=le.getSource(),ae=le.getTarget();if(me==ae)le.getBendpoints().push(new V),le.getBendpoints().push(new V),this.createDummyNodesForBendpoints(le),H.add(le);else{var _e=[];if(_e=(_e=_e.concat(me.getEdgeListToNode(ae))).concat(ae.getEdgeListToNode(me)),!H.has(_e[0])){var Le;if(_e.length>1)for(Le=0;Le<_e.length;Le++){var ye=_e[Le];ye.getBendpoints().push(new V),this.createDummyNodesForBendpoints(ye)}_e.forEach(function($e){H.add($e)})}}}if(H.size==B.length)break}},ce.prototype.positionNodesRadially=function(B){for(var H=new O(0,0),ee=Math.ceil(Math.sqrt(B.length)),le=0,me=0,ae=0,_e=new V(0,0),Le=0;Le<B.length;Le++){Le%ee==0&&(ae=0,me=le,0!=Le&&(me+=z.DEFAULT_COMPONENT_SEPERATION),le=0);var ye=B[Le],$e=ie.findCenterOfTree(ye);H.x=ae,H.y=me,(_e=ce.radialLayout(ye,$e,H)).y>le&&(le=Math.floor(_e.y)),ae=Math.floor(_e.x+z.DEFAULT_COMPONENT_SEPERATION)}this.transform(new V(U.WORLD_CENTER_X-_e.x/2,U.WORLD_CENTER_Y-_e.y/2))},ce.radialLayout=function(B,H,ee){var le=Math.max(this.maxDiagonalInTree(B),z.DEFAULT_RADIAL_SEPARATION);ce.branchRadialLayout(H,null,0,359,0,le);var me=te.calculateBounds(B),ae=new be;ae.setDeviceOrgX(me.getMinX()),ae.setDeviceOrgY(me.getMinY()),ae.setWorldOrgX(ee.x),ae.setWorldOrgY(ee.y);for(var _e=0;_e<B.length;_e++)B[_e].transform(ae);var ye=new V(me.getMaxX(),me.getMaxY());return ae.inverseTransformPoint(ye)},ce.branchRadialLayout=function(B,H,ee,le,me,ae){var _e=(le-ee+1)/2;_e<0&&(_e+=180);var ye=(_e+ee)%360*se.TWO_PI/360,He=(Math.cos(ye),me*Math.cos(ye)),Ie=me*Math.sin(ye);B.setCenter(He,Ie);var we=[],pe=(we=we.concat(B.getEdges())).length;null!=H&&pe--;for(var Oe,nt=0,qe=we.length,Je=B.getEdgesBetween(H);Je.length>1;){var Pt=Je[0];Je.splice(0,1);var pt=we.indexOf(Pt);pt>=0&&we.splice(pt,1),qe--,pe--}Oe=null!=H?(we.indexOf(Je[0])+1)%qe:0;for(var at=Math.abs(le-ee)/pe,ut=Oe;nt!=pe;ut=++ut%qe){var We=we[ut].getOtherEnd(B);if(We!=H){var De=(ee+nt*at)%360;ce.branchRadialLayout(We,B,De,(De+at)%360,me+ae,ae),nt++}}},ce.maxDiagonalInTree=function(B){for(var H=Y.MIN_VALUE,ee=0;ee<B.length;ee++){var me=B[ee].getDiagonal();me>H&&(H=me)}return H},ce.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},ce.prototype.groupZeroDegreeMembers=function(){var B=this,H={};this.memberGroups={},this.idToDummyNode={};for(var ee=[],le=this.graphManager.getAllNodes(),me=0;me<le.length;me++){var _e=(ae=le[me]).getParent();0===this.getNodeDegreeWithChildren(ae)&&(null==_e.id||!this.getToBeTiled(_e))&&ee.push(ae)}for(me=0;me<ee.length;me++){var ae,Le=(ae=ee[me]).getParent().id;typeof H[Le]>"u"&&(H[Le]=[]),H[Le]=H[Le].concat(ae)}Object.keys(H).forEach(function(ye){if(H[ye].length>1){var $e="DummyCompound_"+ye;B.memberGroups[$e]=H[ye];var He=H[ye][0].getParent(),Ie=new k(B.graphManager);Ie.id=$e,Ie.paddingLeft=He.paddingLeft||0,Ie.paddingRight=He.paddingRight||0,Ie.paddingBottom=He.paddingBottom||0,Ie.paddingTop=He.paddingTop||0,B.idToDummyNode[$e]=Ie;var we=B.getGraphManager().add(B.newGraph(),Ie),pe=He.getChild();pe.add(Ie);for(var nt=0;nt<H[ye].length;nt++){var qe=H[ye][nt];pe.remove(qe),we.add(qe)}}})},ce.prototype.clearCompounds=function(){var B={},H={};this.performDFSOnCompounds();for(var ee=0;ee<this.compoundOrder.length;ee++)H[this.compoundOrder[ee].id]=this.compoundOrder[ee],B[this.compoundOrder[ee].id]=[].concat(this.compoundOrder[ee].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[ee].getChild()),this.compoundOrder[ee].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(B,H)},ce.prototype.clearZeroDegreeMembers=function(){var B=this,H=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(ee){var le=B.idToDummyNode[ee];H[ee]=B.tileNodes(B.memberGroups[ee],le.paddingLeft+le.paddingRight),le.rect.width=H[ee].width,le.rect.height=H[ee].height})},ce.prototype.repopulateCompounds=function(){for(var B=this.compoundOrder.length-1;B>=0;B--){var H=this.compoundOrder[B];this.adjustLocations(this.tiledMemberPack[H.id],H.rect.x,H.rect.y,H.paddingLeft,H.paddingTop)}},ce.prototype.repopulateZeroDegreeMembers=function(){var B=this,H=this.tiledZeroDegreePack;Object.keys(H).forEach(function(ee){var le=B.idToDummyNode[ee];B.adjustLocations(H[ee],le.rect.x,le.rect.y,le.paddingLeft,le.paddingTop)})},ce.prototype.getToBeTiled=function(B){var H=B.id;if(null!=this.toBeTiled[H])return this.toBeTiled[H];var ee=B.getChild();if(null==ee)return this.toBeTiled[H]=!1,!1;for(var le=ee.getNodes(),me=0;me<le.length;me++){var ae=le[me];if(this.getNodeDegree(ae)>0)return this.toBeTiled[H]=!1,!1;if(null!=ae.getChild()){if(!this.getToBeTiled(ae))return this.toBeTiled[H]=!1,!1}else this.toBeTiled[ae.id]=!1}return this.toBeTiled[H]=!0,!0},ce.prototype.getNodeDegree=function(B){for(var ee=B.getEdges(),le=0,me=0;me<ee.length;me++){var ae=ee[me];ae.getSource().id!==ae.getTarget().id&&(le+=1)}return le},ce.prototype.getNodeDegreeWithChildren=function(B){var H=this.getNodeDegree(B);if(null==B.getChild())return H;for(var ee=B.getChild().getNodes(),le=0;le<ee.length;le++)H+=this.getNodeDegreeWithChildren(ee[le]);return H},ce.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},ce.prototype.fillCompexOrderByDFS=function(B){for(var H=0;H<B.length;H++){var ee=B[H];null!=ee.getChild()&&this.fillCompexOrderByDFS(ee.getChild().getNodes()),this.getToBeTiled(ee)&&this.compoundOrder.push(ee)}},ce.prototype.adjustLocations=function(B,H,ee,le,me){ee+=me;for(var ae=H+=le,_e=0;_e<B.rows.length;_e++){var Le=B.rows[_e];H=ae;for(var ye=0,$e=0;$e<Le.length;$e++){var He=Le[$e];He.rect.x=H,He.rect.y=ee,H+=He.rect.width+B.horizontalPadding,He.rect.height>ye&&(ye=He.rect.height)}ee+=ye+B.verticalPadding}},ce.prototype.tileCompoundMembers=function(B,H){var ee=this;this.tiledMemberPack=[],Object.keys(B).forEach(function(le){var me=H[le];ee.tiledMemberPack[le]=ee.tileNodes(B[le],me.paddingLeft+me.paddingRight),me.rect.width=ee.tiledMemberPack[le].width,me.rect.height=ee.tiledMemberPack[le].height})},ce.prototype.tileNodes=function(B,H){var me={rows:[],rowWidth:[],rowHeight:[],width:0,height:H,verticalPadding:z.TILING_PADDING_VERTICAL,horizontalPadding:z.TILING_PADDING_HORIZONTAL};B.sort(function(Le,ye){return Le.rect.width*Le.rect.height>ye.rect.width*ye.rect.height?-1:Le.rect.width*Le.rect.height<ye.rect.width*ye.rect.height?1:0});for(var ae=0;ae<B.length;ae++){var _e=B[ae];0==me.rows.length?this.insertNodeToRow(me,_e,0,H):this.canAddHorizontal(me,_e.rect.width,_e.rect.height)?this.insertNodeToRow(me,_e,this.getShortestRowIndex(me),H):this.insertNodeToRow(me,_e,me.rows.length,H),this.shiftToLastRow(me)}return me},ce.prototype.insertNodeToRow=function(B,H,ee,le){var me=le;ee==B.rows.length&&(B.rows.push([]),B.rowWidth.push(me),B.rowHeight.push(0));var _e=B.rowWidth[ee]+H.rect.width;B.rows[ee].length>0&&(_e+=B.horizontalPadding),B.rowWidth[ee]=_e,B.width<_e&&(B.width=_e);var Le=H.rect.height;ee>0&&(Le+=B.verticalPadding);var ye=0;Le>B.rowHeight[ee]&&(ye=B.rowHeight[ee],B.rowHeight[ee]=Le,ye=B.rowHeight[ee]-ye),B.height+=ye,B.rows[ee].push(H)},ce.prototype.getShortestRowIndex=function(B){for(var H=-1,ee=Number.MAX_VALUE,le=0;le<B.rows.length;le++)B.rowWidth[le]<ee&&(H=le,ee=B.rowWidth[le]);return H},ce.prototype.getLongestRowIndex=function(B){for(var H=-1,ee=Number.MIN_VALUE,le=0;le<B.rows.length;le++)B.rowWidth[le]>ee&&(H=le,ee=B.rowWidth[le]);return H},ce.prototype.canAddHorizontal=function(B,H,ee){var le=this.getShortestRowIndex(B);if(le<0)return!0;var me=B.rowWidth[le];if(me+B.horizontalPadding+H<=B.width)return!0;var _e,Le,ae=0;return B.rowHeight[le]<ee&&le>0&&(ae=ee+B.verticalPadding-B.rowHeight[le]),_e=B.width-me>=H+B.horizontalPadding?(B.height+ae)/(me+H+B.horizontalPadding):(B.height+ae)/B.width,ae=ee+B.verticalPadding,(Le=B.width<H?(B.height+ae)/H:(B.height+ae)/B.width)<1&&(Le=1/Le),_e<1&&(_e=1/_e),_e<Le},ce.prototype.shiftToLastRow=function(B){var H=this.getLongestRowIndex(B),ee=B.rowWidth.length-1,le=B.rows[H],me=le[le.length-1],ae=me.width+B.horizontalPadding;if(B.width-B.rowWidth[ee]>ae&&H!=ee){le.splice(-1,1),B.rows[ee].push(me),B.rowWidth[H]=B.rowWidth[H]-ae,B.rowWidth[ee]=B.rowWidth[ee]+ae,B.width=B.rowWidth[instance.getLongestRowIndex(B)];for(var _e=Number.MIN_VALUE,Le=0;Le<le.length;Le++)le[Le].height>_e&&(_e=le[Le].height);H>0&&(_e+=B.verticalPadding);var ye=B.rowHeight[H]+B.rowHeight[ee];B.rowHeight[H]=_e,B.rowHeight[ee]<me.height+B.verticalPadding&&(B.rowHeight[ee]=me.height+B.verticalPadding),B.height+=B.rowHeight[H]+B.rowHeight[ee]-ye,this.shiftToLastRow(B)}},ce.prototype.tilingPreLayout=function(){z.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},ce.prototype.tilingPostLayout=function(){z.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},ce.prototype.reduceTrees=function(){for(var ee,B=[],H=!0;H;){var le=this.graphManager.getAllNodes(),me=[];H=!1;for(var ae=0;ae<le.length;ae++)1==(ee=le[ae]).getEdges().length&&!ee.getEdges()[0].isInterGraph&&null==ee.getChild()&&(me.push([ee,ee.getEdges()[0],ee.getOwner()]),H=!0);if(1==H){for(var _e=[],Le=0;Le<me.length;Le++)1==me[Le][0].getEdges().length&&(_e.push(me[Le]),me[Le][0].getOwner().remove(me[Le][0]));B.push(_e),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=B},ce.prototype.growTree=function(B){for(var le,ee=B[B.length-1],me=0;me<ee.length;me++)this.findPlaceforPrunedNode(le=ee[me]),le[2].add(le[0]),le[2].add(le[1],le[1].source,le[1].target);B.splice(B.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},ce.prototype.findPlaceforPrunedNode=function(B){var H,ee,le=B[0],me=(ee=le==B[1].source?B[1].target:B[1].source).startX,ae=ee.finishX,_e=ee.startY,Le=ee.finishY,we=[0,0,0,0];if(_e>0)for(var pe=me;pe<=ae;pe++)we[0]+=this.grid[pe][_e-1].length+this.grid[pe][_e].length-1;if(ae<this.grid.length-1)for(pe=_e;pe<=Le;pe++)we[1]+=this.grid[ae+1][pe].length+this.grid[ae][pe].length-1;if(Le<this.grid[0].length-1)for(pe=me;pe<=ae;pe++)we[2]+=this.grid[pe][Le+1].length+this.grid[pe][Le].length-1;if(me>0)for(pe=_e;pe<=Le;pe++)we[3]+=this.grid[me-1][pe].length+this.grid[me][pe].length-1;for(var qe,Oe,nt=Y.MAX_VALUE,Je=0;Je<we.length;Je++)we[Je]<nt?(nt=we[Je],qe=1,Oe=Je):we[Je]==nt&&qe++;if(3==qe&&0==nt)0==we[0]&&0==we[1]&&0==we[2]?H=1:0==we[0]&&0==we[1]&&0==we[3]?H=0:0==we[0]&&0==we[2]&&0==we[3]?H=3:0==we[1]&&0==we[2]&&0==we[3]&&(H=2);else if(2==qe&&0==nt){var Pt=Math.floor(2*Math.random());H=0==we[0]&&0==we[1]?0==Pt?0:1:0==we[0]&&0==we[2]?0==Pt?0:2:0==we[0]&&0==we[3]?0==Pt?0:3:0==we[1]&&0==we[2]?0==Pt?1:2:0==we[1]&&0==we[3]?0==Pt?1:3:0==Pt?2:3}else H=4==qe&&0==nt?Pt=Math.floor(4*Math.random()):Oe;0==H?le.setCenter(ee.getCenterX(),ee.getCenterY()-ee.getHeight()/2-L.DEFAULT_EDGE_LENGTH-le.getHeight()/2):1==H?le.setCenter(ee.getCenterX()+ee.getWidth()/2+L.DEFAULT_EDGE_LENGTH+le.getWidth()/2,ee.getCenterY()):2==H?le.setCenter(ee.getCenterX(),ee.getCenterY()+ee.getHeight()/2+L.DEFAULT_EDGE_LENGTH+le.getHeight()/2):le.setCenter(ee.getCenterX()-ee.getWidth()/2-L.DEFAULT_EDGE_LENGTH-le.getWidth()/2,ee.getCenterY())},N.exports=ce},function(N,C,S){"use strict";var F={};F.layoutBase=S(0),F.CoSEConstants=S(1),F.CoSEEdge=S(2),F.CoSEGraph=S(3),F.CoSEGraphManager=S(4),F.CoSELayout=S(6),F.CoSENode=S(5),N.exports=F}]))},5791:function(Ne,Re,X){var q;Ne.exports=(q=X(2405),function(N){var C={};function S(F){if(C[F])return C[F].exports;var D=C[F]={i:F,l:!1,exports:{}};return N[F].call(D.exports,D,D.exports,S),D.l=!0,D.exports}return S.m=N,S.c=C,S.i=function(F){return F},S.d=function(F,D,T){S.o(F,D)||Object.defineProperty(F,D,{configurable:!1,enumerable:!0,get:T})},S.n=function(F){var D=F&&F.__esModule?function(){return F.default}:function(){return F};return S.d(D,"a",D),D},S.o=function(F,D){return Object.prototype.hasOwnProperty.call(F,D)},S.p="",S(S.s=1)}([function(N,C){N.exports=q},function(N,C,S){"use strict";var F=S(0).layoutBase.LayoutConstants,D=S(0).layoutBase.FDLayoutConstants,T=S(0).CoSEConstants,k=S(0).CoSELayout,G=S(0).CoSENode,z=S(0).layoutBase.PointD,L=S(0).layoutBase.DimensionD,U={ready:function(){},stop:function(){},quality:"default",nodeDimensionsIncludeLabels:!1,refresh:30,fit:!0,padding:10,randomize:!0,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",animationDuration:500,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.5};function V(se){this.options=function O(se,te){var be={};for(var ce in se)be[ce]=se[ce];for(var ce in te)be[ce]=te[ce];return be}(U,se),ie(this.options)}var ie=function(te){null!=te.nodeRepulsion&&(T.DEFAULT_REPULSION_STRENGTH=D.DEFAULT_REPULSION_STRENGTH=te.nodeRepulsion),null!=te.idealEdgeLength&&(T.DEFAULT_EDGE_LENGTH=D.DEFAULT_EDGE_LENGTH=te.idealEdgeLength),null!=te.edgeElasticity&&(T.DEFAULT_SPRING_STRENGTH=D.DEFAULT_SPRING_STRENGTH=te.edgeElasticity),null!=te.nestingFactor&&(T.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=D.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=te.nestingFactor),null!=te.gravity&&(T.DEFAULT_GRAVITY_STRENGTH=D.DEFAULT_GRAVITY_STRENGTH=te.gravity),null!=te.numIter&&(T.MAX_ITERATIONS=D.MAX_ITERATIONS=te.numIter),null!=te.gravityRange&&(T.DEFAULT_GRAVITY_RANGE_FACTOR=D.DEFAULT_GRAVITY_RANGE_FACTOR=te.gravityRange),null!=te.gravityCompound&&(T.DEFAULT_COMPOUND_GRAVITY_STRENGTH=D.DEFAULT_COMPOUND_GRAVITY_STRENGTH=te.gravityCompound),null!=te.gravityRangeCompound&&(T.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=D.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=te.gravityRangeCompound),null!=te.initialEnergyOnIncremental&&(T.DEFAULT_COOLING_FACTOR_INCREMENTAL=D.DEFAULT_COOLING_FACTOR_INCREMENTAL=te.initialEnergyOnIncremental),F.QUALITY="draft"==te.quality?0:"proof"==te.quality?2:1,T.NODE_DIMENSIONS_INCLUDE_LABELS=D.NODE_DIMENSIONS_INCLUDE_LABELS=F.NODE_DIMENSIONS_INCLUDE_LABELS=te.nodeDimensionsIncludeLabels,T.DEFAULT_INCREMENTAL=D.DEFAULT_INCREMENTAL=F.DEFAULT_INCREMENTAL=!te.randomize,T.ANIMATE=D.ANIMATE=F.ANIMATE=te.animate,T.TILE=te.tile,T.TILING_PADDING_VERTICAL="function"==typeof te.tilingPaddingVertical?te.tilingPaddingVertical.call():te.tilingPaddingVertical,T.TILING_PADDING_HORIZONTAL="function"==typeof te.tilingPaddingHorizontal?te.tilingPaddingHorizontal.call():te.tilingPaddingHorizontal};V.prototype.run=function(){var se,te,be=this.options,W=(this.idToLNode={},this.layout=new k),B=this;B.stopped=!1,this.cy=this.options.cy,this.cy.trigger({type:"layoutstart",layout:this});var H=W.newGraphManager();this.gm=H;var ee=this.options.eles.nodes(),le=this.options.eles.edges();this.root=H.addRoot(),this.processChildrenList(this.root,this.getTopMostNodes(ee),W);for(var me=0;me<le.length;me++){var ae=le[me],_e=this.idToLNode[ae.data("source")],Le=this.idToLNode[ae.data("target")];_e!==Le&&0==_e.getEdgesBetween(Le).length&&(H.add(W.newEdge(),_e,Le).id=ae.id())}var $e=function(we,pe){"number"==typeof we&&(we=pe);var nt=we.data("id"),qe=B.idToLNode[nt];return{x:qe.getRect().getCenterX(),y:qe.getRect().getCenterY()}},He=function Ie(){for(var nt,we=function(){be.fit&&be.cy.fit(be.eles,be.padding),se||(se=!0,B.cy.one("layoutready",be.ready),B.cy.trigger({type:"layoutready",layout:B}))},pe=B.options.refresh,qe=0;qe<pe&&!nt;qe++)nt=B.stopped||B.layout.tick();if(nt)return W.checkLayoutSuccess()&&!W.isSubLayout&&W.doPostLayout(),W.tilingPostLayout&&W.tilingPostLayout(),W.isLayoutFinished=!0,B.options.eles.nodes().positions($e),we(),B.cy.one("layoutstop",B.options.stop),B.cy.trigger({type:"layoutstop",layout:B}),te&&cancelAnimationFrame(te),void(se=!1);var Oe=B.layout.getPositionsData();be.eles.nodes().positions(function(Je,Pt){if("number"==typeof Je&&(Je=Pt),!Je.isParent()){for(var pt=Je.id(),at=Oe[pt],ut=Je;null==at&&(at=Oe[ut.data("parent")]||Oe["DummyCompound_"+ut.data("parent")],Oe[pt]=at,null!=(ut=ut.parent()[0])););return null!=at?{x:at.x,y:at.y}:{x:Je.position("x"),y:Je.position("y")}}}),we(),te=requestAnimationFrame(Ie)};return W.addListener("layoutstarted",function(){"during"===B.options.animate&&(te=requestAnimationFrame(He))}),W.runLayout(),"during"!==this.options.animate&&(B.options.eles.nodes().not(":parent").layoutPositions(B,B.options,$e),se=!1),this},V.prototype.getTopMostNodes=function(se){for(var te={},be=0;be<se.length;be++)te[se[be].id()]=!0;return se.filter(function(W,B){"number"==typeof W&&(W=B);for(var H=W.parent()[0];null!=H;){if(te[H.id()])return!1;H=H.parent()[0]}return!0})},V.prototype.processChildrenList=function(se,te,be){for(var ce=te.length,W=0;W<ce;W++){var ee,Le,B=te[W],H=B.children(),le=B.layoutDimensions({nodeDimensionsIncludeLabels:this.options.nodeDimensionsIncludeLabels});if((ee=null!=B.outerWidth()&&null!=B.outerHeight()?se.add(new G(be.graphManager,new z(B.position("x")-le.w/2,B.position("y")-le.h/2),new L(parseFloat(le.w),parseFloat(le.h)))):se.add(new G(this.graphManager))).id=B.data("id"),ee.paddingLeft=parseInt(B.css("padding")),ee.paddingTop=parseInt(B.css("padding")),ee.paddingRight=parseInt(B.css("padding")),ee.paddingBottom=parseInt(B.css("padding")),this.options.nodeDimensionsIncludeLabels&&B.isParent()){var me=B.boundingBox({includeLabels:!0,includeNodes:!1}).w,ae=B.boundingBox({includeLabels:!0,includeNodes:!1}).h,_e=B.css("text-halign");ee.labelWidth=me,ee.labelHeight=ae,ee.labelPos=_e}this.idToLNode[B.data("id")]=ee,isNaN(ee.rect.x)&&(ee.rect.x=0),isNaN(ee.rect.y)&&(ee.rect.y=0),null!=H&&H.length>0&&(Le=be.getGraphManager().add(be.newGraph(),ee),this.processChildrenList(Le,H,be))}},V.prototype.stop=function(){return this.stopped=!0,this};var Y=function(te){te("layout","cose-bilkent",V)};typeof cytoscape<"u"&&Y(cytoscape),N.exports=Y}]))},1212:function(Ne){Ne.exports=function(Re){var X={};function q(N){if(X[N])return X[N].exports;var C=X[N]={i:N,l:!1,exports:{}};return Re[N].call(C.exports,C,C.exports,q),C.l=!0,C.exports}return q.m=Re,q.c=X,q.i=function(N){return N},q.d=function(N,C,S){q.o(N,C)||Object.defineProperty(N,C,{configurable:!1,enumerable:!0,get:S})},q.n=function(N){var C=N&&N.__esModule?function(){return N.default}:function(){return N};return q.d(C,"a",C),C},q.o=function(N,C){return Object.prototype.hasOwnProperty.call(N,C)},q.p="",q(q.s=4)}([function(Re,X,q){"use strict";var N=q(2),C=q(1),S=q(3),F=S.removeEles,D=S.setStyles,T=S.createElement,k=S.getPixelRatio,G=S.getOffset;Re.exports=function(U){var O=C({},N,U),V=this,ie=V.container(),Y=void 0,se={options:O,handlers:[],container:T({class:"cxtmenu"})},te=se.container,be=T(),ce=T({tag:"canvas"}),W=[],B=ce.getContext("2d"),H=100,ee=2*(H+O.activePadding),le=void 0,me=void 0;function _e(We,De){we.drawBg=[We,De]}function Le(We,De){B.globalCompositeOperation="source-over",B.clearRect(0,0,ee,ee),B.fillStyle=O.fillColor;for(var Be=2*Math.PI/W.length,ht=Math.PI/2,kt=ht+Be,ft=0;ft<W.length;ft++){var Nt=W[ft];Nt.fillColor&&(B.fillStyle=Nt.fillColor),B.beginPath(),B.moveTo(We+O.activePadding,We+O.activePadding),B.arc(We+O.activePadding,We+O.activePadding,We,2*Math.PI-ht,2*Math.PI-kt,!0),B.closePath(),B.fill(),ht+=Be,kt+=Be,B.fillStyle=O.fillColor}B.globalCompositeOperation="destination-out",B.strokeStyle="white",B.lineWidth=O.separatorWidth,kt=(ht=Math.PI/2)+Be;for(var tn=0;tn<W.length;tn++){var Ot=We*Math.cos(ht),sn=We*Math.sin(ht);B.beginPath(),B.moveTo(We+O.activePadding,We+O.activePadding),B.lineTo(We+O.activePadding+Ot,We+O.activePadding-sn),B.closePath(),B.stroke(),ht+=Be,kt+=Be}B.fillStyle="white",B.globalCompositeOperation="destination-out",B.beginPath(),B.arc(We+O.activePadding,We+O.activePadding,De+O.spotlightPadding,0,2*Math.PI,!0),B.closePath(),B.fill(),B.globalCompositeOperation="source-over"}function $e(We,De,Be,ht,kt){var ft=2*Math.PI/W.length,Nt=Math.PI/2,tn=Nt+ft;Nt+=ft*le,tn+=ft*le,B.fillStyle=O.activeFillColor,B.strokeStyle="black",B.lineWidth=1,B.beginPath(),B.moveTo(Be+O.activePadding,Be+O.activePadding),B.arc(Be+O.activePadding,Be+O.activePadding,Be+O.activePadding,2*Math.PI-Nt,2*Math.PI-tn,!0),B.closePath(),B.fill(),B.fillStyle="white",B.globalCompositeOperation="destination-out";var Ot=Be+O.activePadding+We/Be*(kt+O.spotlightPadding-O.indicatorSize/4),sn=Be+O.activePadding+De/Be*(kt+O.spotlightPadding-O.indicatorSize/4),hn=Math.PI/4-ht;B.translate(Ot,sn),B.rotate(hn);var $n=O.indicatorSize>kt+O.spotlightPadding?kt+O.spotlightPadding:O.indicatorSize;B.beginPath(),B.fillRect(-$n/2,-$n/2,$n,$n),B.closePath(),B.fill(),B.rotate(-hn),B.translate(-Ot,-sn),B.beginPath(),B.arc(Be+O.activePadding,Be+O.activePadding,kt+O.spotlightPadding,0,2*Math.PI,!0),B.closePath(),B.fill(),B.globalCompositeOperation="source-over"}function He(){var We=k(),De=ee,Be=ee;ce.width=De*We,ce.height=Be*We,ce.style.width=De+"px",ce.style.height=Be+"px",B.setTransform(1,0,0,1,0,0),B.scale(We,We)}ie.insertBefore(te,ie.firstChild),te.appendChild(be),be.appendChild(ce),D(te,{position:"absolute",zIndex:O.zIndex,userSelect:"none",pointerEvents:"none"}),["mousedown","mousemove","mouseup","contextmenu"].forEach(function(We){te.addEventListener(We,function(De){return De.preventDefault(),!1})}),D(be,{display:"none",width:ee+"px",height:ee+"px",position:"absolute",zIndex:1,marginLeft:-O.activePadding+"px",marginTop:-O.activePadding+"px",userSelect:"none"}),ce.width=ee,ce.height=ee;var Ie=!0,we={},pe=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(We){return setTimeout(We,16)};He(),function We(){we.drawBg&&Le.apply(null,we.drawBg),we.drawCommands&&$e.apply(null,we.drawCommands),we={},Ie&&pe(We)}();var qe=void 0,Oe=void 0,Je=void 0,Pt={on:function(De,Be,ht){var kt=ht;return"core"===Be&&(kt=function(Nt){if(Nt.cyTarget===V||Nt.target===V)return ht.apply(this,[Nt])}),se.handlers.push({events:De,selector:Be,fn:kt}),"core"===Be?V.on(De,kt):V.on(De,Be,kt),this}};function ut(){Ie=!1,function at(){for(var We=se.handlers,De=0;De<We.length;De++){var Be=We[De];"core"===Be.selector?V.off(Be.events,Be.fn):V.off(Be.events,Be.selector,Be.fn)}window.removeEventListener("resize",He)}(),te.remove()}return function pt(){var Be,We=void 0,De=!1,ht=void 0,kt=void 0,ft=void 0,Nt=void 0,tn=void 0,wr=function(){We&&Y.grabify(),ht&&V.userZoomingEnabled(!0),kt&&V.userPanningEnabled(!0),ft&&V.boxSelectionEnabled(!0)};window.addEventListener("resize",He),Pt.on("resize",function(){He()}).on(O.openMenuEvents,O.selector,function(vr){Y=this;var ai=this,vi=this===V;if(De&&(be.style.display="none",De=!1,wr()),"function"==typeof O.commands){var Ms=O.commands(Y);Ms.then?Ms.then(function(Ts){W=Ts,As()}):(W=Ms,As())}else W=O.commands,As();function As(){if(W&&0!==W.length){ht=V.userZoomingEnabled(),V.userZoomingEnabled(!1),kt=V.userPanningEnabled(),V.userPanningEnabled(!1),ft=V.boxSelectionEnabled(),V.boxSelectionEnabled(!1),(We=Y.grabbable&&Y.grabbable())&&Y.ungrabify();var Ts=void 0,Zt=void 0,jn=void 0;!vi&&ai&&ai.isNode instanceof Function&&ai.isNode()&&!ai.isParent()&&!O.atMouse?(Ts=ai.renderedPosition(),Zt=ai.renderedOuterWidth(),ai.renderedOuterHeight(),jn=Zt/2,jn=!O.adaptativeNodeSpotlightRadius&&O.minSpotlightRadius?Math.max(jn,O.minSpotlightRadius):jn,jn=!O.adaptativeNodeSpotlightRadius&&O.maxSpotlightRadius?Math.min(jn,O.maxSpotlightRadius):jn):(Ts=vr.renderedPosition||vr.cyRenderedPosition,jn=(Zt=1)/2,jn=O.minSpotlightRadius?Math.max(jn,O.minSpotlightRadius):jn,jn=O.maxSpotlightRadius?Math.min(jn,O.maxSpotlightRadius):jn),me=G(ie),qe=Ts.x,Oe=Ts.y,H=Zt/2+(O.menuRadius instanceof Function?O.menuRadius(Y):Number(O.menuRadius)),ee=2*(H+O.activePadding),He(),D(be,{width:ee+"px",height:ee+"px",display:"block",left:Ts.x-H+"px",top:Ts.y-H+"px"}),function ae(We,De){F(".cxtmenu-item",be);for(var Be=2*Math.PI/W.length,ht=Math.PI/2,kt=ht+Be,ft=0;ft<W.length;ft++){var Nt=W[ft],tn=(ht+kt)/2,Ot=(We+De)/2*Math.cos(tn),sn=(We+De)/2*Math.sin(tn),hn=1*Math.abs((We-De)*Math.cos(tn)),$n=1*Math.abs((We-De)*Math.sin(tn));hn=Math.max(hn,$n);var wr=T({class:"cxtmenu-item"});D(wr,{color:O.itemColor,cursor:"default",display:"table","text-align":"center",position:"absolute","text-shadow":"-1px -1px 2px "+O.itemTextShadowColor+", 1px -1px 2px "+O.itemTextShadowColor+", -1px 1px 2px "+O.itemTextShadowColor+", 1px 1px 1px "+O.itemTextShadowColor,left:"50%",top:"50%","min-height":hn+"px",width:hn+"px",height:hn+"px",marginLeft:Ot-hn/2+"px",marginTop:-sn-hn/2+"px"});var vr=T({class:"cxtmenu-content"});Nt.content instanceof HTMLElement?vr.appendChild(Nt.content):vr.innerHTML=Nt.content,D(vr,{width:hn+"px",height:hn+"px","vertical-align":"middle",display:"table-cell"}),D(vr,Nt.contentStyle||{}),(!0===Nt.disabled||!1===Nt.enabled)&&vr.setAttribute("class","cxtmenu-content cxtmenu-disabled"),be.appendChild(wr),wr.appendChild(vr),ht+=Be,kt+=Be}}(H,jn),_e(H,jn),le=void 0,De=!0,Nt=vr}}}).on("cxtdrag tapdrag",O.selector,Be=function(ai){if(De){ai.preventDefault();var vi=ai.originalEvent,Ms=vi.touches&&vi.touches.length>0,As=(Ms?vi.touches[0].pageX:vi.pageX)-window.pageXOffset,Ts=(Ms?vi.touches[0].pageY:vi.pageY)-window.pageYOffset;le=void 0;var Zt=As-me.left-qe,ks=Ts-me.top-Oe;0===Zt&&(Zt=.01);var jn=Math.sqrt(Zt*Zt+ks*ks),fo=Math.acos((ks*ks-jn*jn-Zt*Zt)/(-2*jn*Zt)),Ca=void 0;if(Y&&Y.isNode instanceof Function&&Y.isNode()&&!Y.isParent()&&!O.atMouse?(Ca=Y.renderedOuterWidth(),Je=Ca/2,Je=!O.adaptativeNodeSpotlightRadius&&O.minSpotlightRadius?Math.max(Je,O.minSpotlightRadius):Je,Je=!O.adaptativeNodeSpotlightRadius&&O.maxSpotlightRadius?Math.min(Je,O.maxSpotlightRadius):Je):(Je=(Ca=1)/2,Je=O.minSpotlightRadius?Math.max(Je,O.minSpotlightRadius):Je,Je=O.maxSpotlightRadius?Math.min(Je,O.maxSpotlightRadius):Je),H=Ca/2+(O.menuRadius instanceof Function?O.menuRadius(Y):Number(O.menuRadius)),jn<Je+O.spotlightPadding||"number"==typeof O.outsideMenuCancel&&jn>H+O.activePadding+O.outsideMenuCancel)return void _e(H,Je);_e(H,Je);var nc=Zt*H/jn,jc=ks*H/jn;ks>0&&(fo=Math.PI+Math.abs(fo-Math.PI));for(var al=2*Math.PI/W.length,ko=Math.PI/2,Sa=ko+al,rc=0;rc<W.length;rc++){var ll=W[rc],Si=ko<=fo&&fo<=Sa||ko<=fo+2*Math.PI&&fo+2*Math.PI<=Sa;if((!0===ll.disabled||!1===ll.enabled)&&(Si=!1),Si){le=rc;break}ko+=al,Sa+=al}!function ye(We,De,Be,ht,kt){we.drawCommands=[We,De,Be,ht,kt]}(nc,jc,H,fo,Je)}}).on("tapdrag",Be).on("mousemove",function(){if(void 0!==le){var vr=W[le].hover;vr&&(tn!==le&&vr.apply(Y,[Y,Nt]),tn=le)}}).on("cxttapend tapend",function(){if(be.style.display="none",void 0!==le){var vr=W[le].select;vr&&(vr.apply(Y,[Y,Nt]),le=void 0)}tn=void 0,De=!1,wr()})}(),{destroy:function(){ut()}}}},function(Re,X,q){"use strict";Re.exports=null!=Object.assign?Object.assign.bind(Object):function(N){for(var C=arguments.length,S=Array(C>1?C-1:0),F=1;F<C;F++)S[F-1]=arguments[F];return S.filter(function(D){return null!=D}).forEach(function(D){Object.keys(D).forEach(function(T){return N[T]=D[T]})}),N}},function(Re,X,q){"use strict";Re.exports={menuRadius:function(S){return 100},selector:"node",commands:[],fillColor:"rgba(0, 0, 0, 0.75)",activeFillColor:"rgba(1, 105, 217, 0.75)",activePadding:20,indicatorSize:24,separatorWidth:3,spotlightPadding:4,adaptativeNodeSpotlightRadius:!1,minSpotlightRadius:24,maxSpotlightRadius:38,openMenuEvents:"cxttapstart taphold",itemColor:"white",itemTextShadowColor:"transparent",zIndex:9999,atMouse:!1,outsideMenuCancel:!1}},function(Re,X,q){"use strict";var C=function(k,G){for(var z=Object.keys(G),L=0,U=z.length;L<U;L++)k.style[z[L]]=G[z[L]]};Re.exports={removeEles:function(k){for(var z=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).querySelectorAll(k),L=0;L<z.length;L++){var U=z[L];U.parentNode.removeChild(U)}},setStyles:C,createElement:function(k){k=k||{};var G=document.createElement(k.tag||"div");return G.className=k.class||"",k.style&&C(G,k.style),G},getPixelRatio:function(){return window.devicePixelRatio||1},getOffset:function(k){var G=k.getBoundingClientRect();return{left:G.left+document.body.scrollLeft+parseFloat(getComputedStyle(document.body)["padding-left"])+parseFloat(getComputedStyle(document.body)["border-left-width"]),top:G.top+document.body.scrollTop+parseFloat(getComputedStyle(document.body)["padding-top"])+parseFloat(getComputedStyle(document.body)["border-top-width"])}}}},function(Re,X,q){"use strict";var N=q(0),C=function(F){F&&F("core","cxtmenu",N)};typeof cytoscape<"u"&&C(cytoscape),Re.exports=C}])},3811:function(Ne,Re,X){var q;Ne.exports=(q=X(7352),function(N){var C={};function S(F){if(C[F])return C[F].exports;var D=C[F]={i:F,l:!1,exports:{}};return N[F].call(D.exports,D,D.exports,S),D.l=!0,D.exports}return S.m=N,S.c=C,S.i=function(F){return F},S.d=function(F,D,T){S.o(F,D)||Object.defineProperty(F,D,{configurable:!1,enumerable:!0,get:T})},S.n=function(F){var D=F&&F.__esModule?function(){return F.default}:function(){return F};return S.d(D,"a",D),D},S.o=function(F,D){return Object.prototype.hasOwnProperty.call(F,D)},S.p="",S(S.s=7)}([function(N,C,S){"use strict";N.exports=null!=Object.assign?Object.assign.bind(Object):function(F){for(var D=arguments.length,T=Array(D>1?D-1:0),k=1;k<D;k++)T[k-1]=arguments[k];return T.forEach(function(G){null!=G&&Object.keys(G).forEach(function(z){return F[z]=G[z]})}),F}},function(N,C,S){"use strict";var D=S(5).getBoundingBox;N.exports={getRef:function T(k,G){return{getBoundingClientRect:function(){return D(k,G)}}}}},function(N,C,S){"use strict";var F=S(0),T=S(1).getRef,G=S(6).getContent,z={},U=S(8).createPopper;N.exports={getPopper:function O(V,ie){var Y=T(V,ie),se=G(V,ie.content),te=F({},z,ie.popper);return U(Y,se,te)}}},function(N,C,S){"use strict";var F=S(0),T=S(2).getPopper,G=S(1).getRef;function U(Y,se){var te=function(ee){return ee.isNode()?{w:ee.renderedWidth(),h:ee.renderedHeight()}:{w:3,h:3}},W=Y.cy();return F({},{renderedDimensions:te,renderedPosition:function(ee){return ee.isNode()?function O(Y,se){var te=Y.renderedPosition(),be=se(Y);return{x:te.x-be.w/2,y:te.y-be.h/2}}(ee,te):function V(Y){var se=Y.midpoint(),te=Y.cy().pan(),be=Y.cy().zoom();return{x:se.x*be+te.x,y:se.y*be+te.y}}(ee)},popper:{},cy:W},se)}function ie(Y){Y.length>1&&(console.warn("Popper.js Extension should only be used on one element."),console.warn("Ignoring all subsequent elements"))}N.exports={popper:function z(Y){return ie(this),T(this[0],U(this[0],Y))},popperRef:function L(Y){return ie(this),G(this[0],U(this[0],Y))}}},function(N,C,S){"use strict";var F=S(0),T=S(2).getPopper,G=S(1).getRef;function U(O,V){return F({},{boundingBox:{top:0,left:0,right:0,bottom:0,w:3,h:3},renderedDimensions:function(){return{w:3,h:3}},renderedPosition:function(){return{x:0,y:0}},popper:{},cy:O},V)}N.exports={popper:function z(O){return T(this,U(this,O))},popperRef:function L(O){return G(this,U(this,O))}}},function(N,C,S){"use strict";N.exports={getBoundingBox:function F(D,T){var k=T.renderedPosition,z=T.renderedDimensions,L=T.cy.container().getBoundingClientRect(),U=z(D),O=k(D);return{top:O.y+L.top,left:O.x+L.left,right:O.x+U.w+L.left,bottom:O.y+U.h+L.top,width:U.w,height:U.h}}}},function(N,C,S){"use strict";N.exports={getContent:function F(D,T){var k;if("function"!=typeof T){if(T instanceof HTMLElement)return T;throw new Error("Can not create popper from 'target' with unknown type")}if(null===(k=T(D)))throw new Error("No 'target' specified to create popper");return k}}},function(N,C,S){"use strict";var F=S(4),D=S(3),T=function(G){G&&(G("core","popper",F.popper),G("collection","popper",D.popper),G("core","popperRef",F.popperRef),G("collection","popperRef",D.popperRef))};typeof cytoscape<"u"&&T(cytoscape),N.exports=T},function(N,C){N.exports=q}]))},6977:Ne=>{window,Ne.exports=function(Re){var X={};function q(N){if(X[N])return X[N].exports;var C=X[N]={i:N,l:!1,exports:{}};return Re[N].call(C.exports,C,C.exports,q),C.l=!0,C.exports}return q.m=Re,q.c=X,q.d=function(N,C,S){q.o(N,C)||Object.defineProperty(N,C,{enumerable:!0,get:S})},q.r=function(N){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(N,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(N,"__esModule",{value:!0})},q.t=function(N,C){if(1&C&&(N=q(N)),8&C||4&C&&"object"==typeof N&&N&&N.__esModule)return N;var S=Object.create(null);if(q.r(S),Object.defineProperty(S,"default",{enumerable:!0,value:N}),2&C&&"string"!=typeof N)for(var F in N)q.d(S,F,function(D){return N[D]}.bind(null,F));return S},q.n=function(N){var C=N&&N.__esModule?function(){return N.default}:function(){return N};return q.d(C,"a",C),C},q.o=function(N,C){return Object.prototype.hasOwnProperty.call(N,C)},q.p="",q(q.s=0)}([function(Re,X,q){"use strict";var N=q(1),C=function(S){S&&S("core","svg",N.svg)};typeof cytoscape<"u"&&C(cytoscape),Re.exports=C},function(Re,X,q){"use strict";var N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},C=q(2),S={},F_number=function(D){return null!=D&&(void 0===D?"undefined":N(D))===N(1)&&!isNaN(D)};S.bufferCanvasImage=function(D,T){var k=T.renderer().usePaths;T.renderer().usePaths=function(){return!1},T.elements().forEach(function(ee){ee._private.rscratch.pathCacheKey=null,ee._private.rscratch.pathCache=null});var G=T.renderer(),z=T.mutableElements().boundingBox(),L=G.findContainerClientCoords(),U=D.full?Math.ceil(z.w):L[2],O=D.full?Math.ceil(z.h):L[3],V=F_number(D.maxWidth)||F_number(D.maxHeight),ie=G.getPixelRatio(),Y=1;if(void 0!==D.scale)U*=D.scale,O*=D.scale,Y=D.scale;else if(V){var se=1/0,te=1/0;F_number(D.maxWidth)&&(se=Y*D.maxWidth/U),F_number(D.maxHeight)&&(te=Y*D.maxHeight/O),U*=Y=Math.min(se,te),O*=Y}V||(U*=ie,O*=ie,Y*=ie);var be=null,ce=be=new C(U,O);if(U>0&&O>0){be.clearRect(0,0,U,O),D.bg&&(be.globalCompositeOperation="destination-over",be.fillStyle=D.bg,be.fillRect(0,0,U,O)),be.globalCompositeOperation="source-over";var W=G.getCachedZSortedEles();if(D.full)be.translate(-z.x1*Y,-z.y1*Y),be.scale(Y,Y),G.drawElements(be,W),be.scale(1/Y,1/Y),be.translate(z.x1*Y,z.y1*Y);else{var B=T.pan(),H={x:B.x*Y,y:B.y*Y};Y*=T.zoom(),be.translate(H.x,H.y),be.scale(Y,Y),G.drawElements(be,W),be.scale(1/Y,1/Y),be.translate(-H.x,-H.y)}}return T.renderer().usePaths=k,ce},S.svg=function(D){return S.bufferCanvasImage(D||{},this).getSerializedSvg()},Re.exports=S},function(Re,X,q){!function(){"use strict";var N,C,S,F,D;function T(L,U){var O,V=Object.keys(U);for(O=0;O<V.length;O++)L=L.replace(new RegExp("\\{"+V[O]+"\\}","gi"),U[V[O]]);return L}function k(L){var U,O,V;if(!L)throw new Error("cannot create a random attribute name for an undefined object");U="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",O="";do{for(O="",V=0;V<12;V++)O+=U[Math.floor(Math.random()*U.length)]}while(L[O]);return O}function G(L){var U={alphabetic:"alphabetic",hanging:"hanging",top:"text-before-edge",bottom:"text-after-edge",middle:"central"};return U[L]||U.alphabetic}D=function(L,U){var O,V,ie,Y={};for(L=L.split(","),U=U||10,O=0;O<L.length;O+=2)V="&"+L[O+1]+";",ie=parseInt(L[O],U),Y[V]="&#"+ie+";";return Y["\\xa0"]="&#160;",Y}("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),N={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"},lineDash:{svgAttr:"stroke-dasharray",canvas:[],svg:null,apply:"stroke"}},(S=function(L,U){this.__root=L,this.__ctx=U}).prototype.addColorStop=function(L,U){var O,V=this.__ctx.__createElement("stop");V.setAttribute("offset",L),-1!==U.indexOf("rgba")?(O=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(U),V.setAttribute("stop-color",T("rgb({r},{g},{b})",{r:O[1],g:O[2],b:O[3]})),V.setAttribute("stop-opacity",O[4])):V.setAttribute("stop-color",U),this.__root.appendChild(V)},F=function(L,U){this.__root=L,this.__ctx=U},(C=function(L){var U,O={width:500,height:500,enableMirroring:!1};if(arguments.length>1?((U=O).width=arguments[0],U.height=arguments[1]):U=L||O,!(this instanceof C))return new C(U);this.width=U.width||O.width,this.height=U.height||O.height,this.enableMirroring=void 0!==U.enableMirroring?U.enableMirroring:O.enableMirroring,this.canvas=this,this.__document=U.document||document,U.ctx?this.__ctx=U.ctx:(this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d")),this.__setDefaultStyles(),this.__stack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__document.createElementNS("http://www.w3.org/2000/svg","svg"),this.__root.setAttribute("version",1.1),this.__root.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.__root.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.__root.setAttribute("width",this.width),this.__root.setAttribute("height",this.height),this.__ids={},this.__defs=this.__document.createElementNS("http://www.w3.org/2000/svg","defs"),this.__root.appendChild(this.__defs),this.__currentElement=this.__document.createElementNS("http://www.w3.org/2000/svg","g"),this.__root.appendChild(this.__currentElement)}).prototype.__createElement=function(L,U,O){void 0===U&&(U={});var V,ie,Y=this.__document.createElementNS("http://www.w3.org/2000/svg",L),se=Object.keys(U);for(O&&(Y.setAttribute("fill","none"),Y.setAttribute("stroke","none")),V=0;V<se.length;V++)Y.setAttribute(ie=se[V],U[ie]);return Y},C.prototype.__setDefaultStyles=function(){var L,U,O=Object.keys(N);for(L=0;L<O.length;L++)this[U=O[L]]=N[U].canvas},C.prototype.__applyStyleState=function(L){if(L){var U,O,V=Object.keys(L);for(U=0;U<V.length;U++)this[O=V[U]]=L[O]}},C.prototype.__getStyleState=function(){var L,U,O={},V=Object.keys(N);for(L=0;L<V.length;L++)O[U=V[L]]=this[U];return O},C.prototype.__applyStyleToCurrentElement=function(L){var O,V,ie,Y,se,U=this.__currentElement,te=Object.keys(N);for(O=0;O<te.length;O++)if(ie=this[te[O]],(V=N[te[O]]).apply)if(ie instanceof F){if(ie.__ctx)for(;ie.__ctx.__defs.childNodes.length;)Y=ie.__ctx.__defs.childNodes[0].getAttribute("id"),this.__ids[Y]=Y,this.__defs.appendChild(ie.__ctx.__defs.childNodes[0]);U.setAttribute(V.apply,T("url(#{id})",{id:ie.__root.getAttribute("id")}))}else if(ie instanceof S)U.setAttribute(V.apply,T("url(#{id})",{id:ie.__root.getAttribute("id")}));else if(-1!==V.apply.indexOf(L)&&V.svg!==ie)if("stroke"!==V.svgAttr&&"fill"!==V.svgAttr||-1===ie.indexOf("rgba")){var be=V.svgAttr;if("globalAlpha"===te[O]&&U.getAttribute(be=L+"-"+V.svgAttr))continue;U.setAttribute(be,ie)}else{se=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(ie),U.setAttribute(V.svgAttr,T("rgb({r},{g},{b})",{r:se[1],g:se[2],b:se[3]}));var ce=se[4],W=this.globalAlpha;null!=W&&(ce*=W),U.setAttribute(V.svgAttr+"-opacity",ce)}},C.prototype.__closestGroupOrSvg=function(L){return"g"===(L=L||this.__currentElement).nodeName||"svg"===L.nodeName?L:this.__closestGroupOrSvg(L.parentNode)},C.prototype.getSerializedSvg=function(L){var U,O,V,ie,Y,se=(new XMLSerializer).serializeToString(this.__root);if(/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi.test(se)&&(se=se.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink')),L)for(U=Object.keys(D),O=0;O<U.length;O++)ie=D[V=U[O]],(Y=new RegExp(V,"gi")).test(se)&&(se=se.replace(Y,ie));return se},C.prototype.getSvg=function(){return this.__root},C.prototype.save=function(){var L=this.__createElement("g"),U=this.__closestGroupOrSvg();this.__groupStack.push(U),U.appendChild(L),this.__currentElement=L,this.__stack.push(this.__getStyleState())},C.prototype.restore=function(){this.__currentElement=this.__groupStack.pop(),this.__currentElementsToStyle=null,this.__currentElement||(this.__currentElement=this.__root.childNodes[1]);var L=this.__stack.pop();this.__applyStyleState(L)},C.prototype.__addTransform=function(L){var U=this.__closestGroupOrSvg();if(U.childNodes.length>0){"path"===this.__currentElement.nodeName&&(this.__currentElementsToStyle||(this.__currentElementsToStyle={element:U,children:[]}),this.__currentElementsToStyle.children.push(this.__currentElement),this.__applyCurrentDefaultPath());var O=this.__createElement("g");U.appendChild(O),this.__currentElement=O}var V=this.__currentElement.getAttribute("transform");V?V+=" ":V="",this.__currentElement.setAttribute("transform",V+=L)},C.prototype.scale=function(L,U){void 0===U&&(U=L),this.__addTransform(T("scale({x},{y})",{x:L,y:U}))},C.prototype.rotate=function(L){var U=180*L/Math.PI;this.__addTransform(T("rotate({angle},{cx},{cy})",{angle:U,cx:0,cy:0}))},C.prototype.translate=function(L,U){this.__addTransform(T("translate({x},{y})",{x:L,y:U}))},C.prototype.transform=function(L,U,O,V,ie,Y){this.__addTransform(T("matrix({a},{b},{c},{d},{e},{f})",{a:L,b:U,c:O,d:V,e:ie,f:Y}))},C.prototype.beginPath=function(){var L;this.__currentDefaultPath="",this.__currentPosition={},L=this.__createElement("path",{},!0),this.__closestGroupOrSvg().appendChild(L),this.__currentElement=L},C.prototype.__applyCurrentDefaultPath=function(){var L=this.__currentElement;"path"===L.nodeName?L.setAttribute("d",this.__currentDefaultPath):console.error("Attempted to apply path command to node",L.nodeName)},C.prototype.__addPathCommand=function(L){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=L},C.prototype.moveTo=function(L,U){"path"!==this.__currentElement.nodeName&&this.beginPath(),this.__currentPosition={x:L,y:U},this.__addPathCommand(T("M {x} {y}",{x:L,y:U}))},C.prototype.closePath=function(){this.__currentDefaultPath&&this.__addPathCommand("Z")},C.prototype.lineTo=function(L,U){this.__currentPosition={x:L,y:U},this.__currentDefaultPath.indexOf("M")>-1?this.__addPathCommand(T("L {x} {y}",{x:L,y:U})):this.__addPathCommand(T("M {x} {y}",{x:L,y:U}))},C.prototype.bezierCurveTo=function(L,U,O,V,ie,Y){this.__currentPosition={x:ie,y:Y},this.__addPathCommand(T("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:L,cp1y:U,cp2x:O,cp2y:V,x:ie,y:Y}))},C.prototype.quadraticCurveTo=function(L,U,O,V){this.__currentPosition={x:O,y:V},this.__addPathCommand(T("Q {cpx} {cpy} {x} {y}",{cpx:L,cpy:U,x:O,y:V}))};var z=function(L){var U=Math.sqrt(L[0]*L[0]+L[1]*L[1]);return[L[0]/U,L[1]/U]};C.prototype.arcTo=function(L,U,O,V,ie){var Y=this.__currentPosition&&this.__currentPosition.x,se=this.__currentPosition&&this.__currentPosition.y;if(void 0!==Y&&void 0!==se){if(ie<0)throw new Error("IndexSizeError: The radius provided ("+ie+") is negative.");if(Y===L&&se===U||L===O&&U===V||0===ie)this.lineTo(L,U);else{var te=z([Y-L,se-U]),be=z([O-L,V-U]);if(te[0]*be[1]!=te[1]*be[0]){var W=Math.acos(Math.abs(te[0]*be[0]+te[1]*be[1])),B=z([te[0]+be[0],te[1]+be[1]]),H=ie/Math.sin(W/2),ee=L+H*B[0],le=U+H*B[1],me=[-te[1],te[0]],ae=[be[1],-be[0]],_e=function($e){var He=$e[0];return $e[1]>=0?Math.acos(He):-Math.acos(He)},Le=_e(me),ye=_e(ae);this.lineTo(ee+me[0]*ie,le+me[1]*ie),this.arc(ee,le,ie,Le,ye)}else this.lineTo(L,U)}}},C.prototype.stroke=function(){"path"===this.__currentElement.nodeName&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")},C.prototype.fill=function(){"path"===this.__currentElement.nodeName&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")},C.prototype.rect=function(L,U,O,V){"path"!==this.__currentElement.nodeName&&this.beginPath(),this.moveTo(L,U),this.lineTo(L+O,U),this.lineTo(L+O,U+V),this.lineTo(L,U+V),this.lineTo(L,U),this.closePath()},C.prototype.fillRect=function(L,U,O,V){var ie;ie=this.__createElement("rect",{x:L,y:U,width:O,height:V},!0),this.__closestGroupOrSvg().appendChild(ie),this.__currentElement=ie,this.__applyStyleToCurrentElement("fill")},C.prototype.strokeRect=function(L,U,O,V){var ie;ie=this.__createElement("rect",{x:L,y:U,width:O,height:V},!0),this.__closestGroupOrSvg().appendChild(ie),this.__currentElement=ie,this.__applyStyleToCurrentElement("stroke")},C.prototype.__clearCanvas=function(){for(var L=this.__closestGroupOrSvg().getAttribute("transform"),U=this.__root.childNodes[1],O=U.childNodes,V=O.length-1;V>=0;V--)O[V]&&U.removeChild(O[V]);this.__currentElement=U,this.__groupStack=[],L&&this.__addTransform(L)},C.prototype.clearRect=function(L,U,O,V){if(0!==L||0!==U||O!==this.width||V!==this.height){var ie,Y=this.__closestGroupOrSvg();ie=this.__createElement("rect",{x:L,y:U,width:O,height:V,fill:"#FFFFFF"},!0),Y.appendChild(ie)}else this.__clearCanvas()},C.prototype.createLinearGradient=function(L,U,O,V){var ie=this.__createElement("linearGradient",{id:k(this.__ids),x1:L+"px",x2:O+"px",y1:U+"px",y2:V+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(ie),new S(ie,this)},C.prototype.createRadialGradient=function(L,U,O,V,ie,Y){var se=this.__createElement("radialGradient",{id:k(this.__ids),cx:V+"px",cy:ie+"px",r:Y+"px",fx:L+"px",fy:U+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(se),new S(se,this)},C.prototype.__parseFont=function(){var L=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-,\'\"\sa-z0-9]+?)\s*$/i.exec(this.font),U={style:L[1]||"normal",size:L[4]||"10px",family:L[6]||"sans-serif",weight:L[3]||"normal",decoration:L[2]||"normal",href:null};return"underline"===this.__fontUnderline&&(U.decoration="underline"),this.__fontHref&&(U.href=this.__fontHref),U},C.prototype.__wrapTextLink=function(L,U){if(L.href){var O=this.__createElement("a");return O.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",L.href),O.appendChild(U),O}return U},C.prototype.__applyText=function(L,U,O,V){var ie,Y,se=this.__parseFont(),te=this.__closestGroupOrSvg(),be=this.__createElement("text",{"font-family":se.family,"font-size":se.size,"font-style":se.style,"font-weight":se.weight,"text-decoration":se.decoration,x:U,y:O,"text-anchor":(ie=this.textAlign,Y={left:"start",right:"end",center:"middle",start:"start",end:"end"},Y[ie]||Y.start),"dominant-baseline":G(this.textBaseline)},!0);be.appendChild(this.__document.createTextNode(L)),this.__currentElement=be,this.__applyStyleToCurrentElement(V),te.appendChild(this.__wrapTextLink(se,be))},C.prototype.fillText=function(L,U,O){this.__applyText(L,U,O,"fill")},C.prototype.strokeText=function(L,U,O){this.__applyText(L,U,O,"stroke")},C.prototype.measureText=function(L){return this.__ctx.font=this.font,this.__ctx.measureText(L)},C.prototype.arc=function(L,U,O,V,ie,Y){if(V!==ie){(V%=2*Math.PI)==(ie%=2*Math.PI)&&(ie=(ie+2*Math.PI-.001*(Y?-1:1))%(2*Math.PI));var B,se=L+O*Math.cos(ie),te=U+O*Math.sin(ie),be=L+O*Math.cos(V),ce=U+O*Math.sin(V),W=Y?0:1,H=ie-V;H<0&&(H+=2*Math.PI),B=Y?H>Math.PI?0:1:H>Math.PI?1:0,this.lineTo(be,ce),this.__addPathCommand(T("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:O,ry:O,xAxisRotation:0,largeArcFlag:B,sweepFlag:W,endX:se,endY:te})),this.__currentPosition={x:se,y:te}}},C.prototype.clip=function(){var L=this.__closestGroupOrSvg(),U=this.__createElement("clipPath"),O=k(this.__ids),V=this.__createElement("g");this.__applyCurrentDefaultPath(),L.removeChild(this.__currentElement),U.setAttribute("id",O),U.appendChild(this.__currentElement),this.__defs.appendChild(U),L.setAttribute("clip-path",T("url(#{id})",{id:O})),L.appendChild(V),this.__currentElement=V},C.prototype.drawImage=function(){var L,U,O,V,ie,Y,se,te,be,ce,W,B,H,ee=Array.prototype.slice.call(arguments),le=ee[0],me=0,ae=0;if(3===ee.length)L=ee[1],U=ee[2],O=ie=le.width,V=Y=le.height;else if(5===ee.length)L=ee[1],U=ee[2],O=ee[3],V=ee[4],ie=le.width,Y=le.height;else{if(9!==ee.length)throw new Error("Inavlid number of arguments passed to drawImage: "+arguments.length);me=ee[1],ae=ee[2],ie=ee[3],Y=ee[4],L=ee[5],U=ee[6],O=ee[7],V=ee[8]}se=this.__closestGroupOrSvg();var _e="translate("+L+", "+U+")";if(le instanceof C){if((te=le.getSvg().cloneNode(!0)).childNodes&&te.childNodes.length>1){for(be=te.childNodes[0];be.childNodes.length;)H=be.childNodes[0].getAttribute("id"),this.__ids[H]=H,this.__defs.appendChild(be.childNodes[0]);if(ce=te.childNodes[1]){var ye=ce.getAttribute("transform");ce.setAttribute("transform",ye?ye+" "+_e:_e),se.appendChild(ce)}}}else"CANVAS"!==le.nodeName&&"IMG"!==le.nodeName||((W=this.__createElement("image")).setAttribute("width",O),W.setAttribute("height",V),W.setAttribute("opacity",this.globalAlpha),W.setAttribute("preserveAspectRatio","none"),(B=this.__document.createElement("canvas")).width=O,B.height=V,B.getContext("2d").drawImage(le,me,ae,ie,Y,0,0,O,V),le=B,W.setAttribute("transform",_e),W.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","CANVAS"===le.nodeName?le.toDataURL():le.getAttribute("src")),se.appendChild(W))},C.prototype.createPattern=function(L,U){var O,V=this.__document.createElementNS("http://www.w3.org/2000/svg","pattern"),ie=k(this.__ids);return V.setAttribute("id",ie),V.setAttribute("width",L.width),V.setAttribute("height",L.height),"CANVAS"===L.nodeName||"IMG"===L.nodeName?((O=this.__document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("width",L.width),O.setAttribute("height",L.height),O.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","CANVAS"===L.nodeName?L.toDataURL():L.getAttribute("src")),V.appendChild(O),this.__defs.appendChild(V)):L instanceof C&&(V.appendChild(L.__root.childNodes[1]),this.__defs.appendChild(V)),new F(V,this)},C.prototype.setLineDash=function(L){this.lineDash=L&&L.length>0?L.join(","):null},C.prototype.drawFocusRing=function(){},C.prototype.createImageData=function(){},C.prototype.getImageData=function(){},C.prototype.putImageData=function(){},C.prototype.globalCompositeOperation=function(){},C.prototype.setTransform=function(){},"object"==typeof window&&(window.C2S=C),"object"==typeof Re.exports&&(Re.exports=C)}()}])},6864:(Ne,Re,X)=>{"use strict";var q=X(406),N=X(5203),C=X(8817),S=X(4793),F=X(4152);function D(c){return c&&"object"==typeof c&&"default"in c?c:{default:c}}var T=D(q),k=D(N),G=D(C),z=D(S),L=D(F);function U(c){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(c)}function O(c,o){if(!(c instanceof o))throw new TypeError("Cannot call a class as a function")}function V(c,o){for(var l=0;l<o.length;l++){var d=o[l];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(c,d.key,d)}}function ie(c,o,l){return o&&V(c.prototype,o),l&&V(c,l),Object.defineProperty(c,"prototype",{writable:!1}),c}function Y(c,o,l){return o in c?Object.defineProperty(c,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):c[o]=l,c}function se(c,o){return function te(c){if(Array.isArray(c))return c}(c)||function be(c,o){var l=null==c?null:typeof Symbol<"u"&&c[Symbol.iterator]||c["@@iterator"];if(null!=l){var g,y,d=[],f=!0,p=!1;try{for(l=l.call(c);!(f=(g=l.next()).done)&&(d.push(g.value),!o||d.length!==o);f=!0);}catch(_){p=!0,y=_}finally{try{!f&&null!=l.return&&l.return()}finally{if(p)throw y}}return d}}(c,o)||function ce(c,o){if(c){if("string"==typeof c)return W(c,o);var l=Object.prototype.toString.call(c).slice(8,-1);if("Object"===l&&c.constructor&&(l=c.constructor.name),"Map"===l||"Set"===l)return Array.from(c);if("Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return W(c,o)}}(c,o)||function B(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(c,o){(null==o||o>c.length)&&(o=c.length);for(var l=0,d=new Array(o);l<o;l++)d[l]=c[l];return d}var H=typeof window>"u"?null:window,ee=H?H.navigator:null,le=U(""),me=U({}),ae=U(function(){}),_e=typeof HTMLElement>"u"?"undefined":U(HTMLElement),Le=function(o){return o&&o.instanceString&&$e(o.instanceString)?o.instanceString():null},ye=function(o){return null!=o&&U(o)==le},$e=function(o){return null!=o&&U(o)===ae},He=function(o){return!Oe(o)&&(Array.isArray?Array.isArray(o):null!=o&&o instanceof Array)},Ie=function(o){return null!=o&&U(o)===me&&!He(o)&&o.constructor===Object},pe=function(o){return null!=o&&U(o)===U(1)&&!isNaN(o)},qe=function(o){if("undefined"!==_e)return null!=o&&o instanceof HTMLElement},Oe=function(o){return Je(o)||Pt(o)},Je=function(o){return"collection"===Le(o)&&o._private.single},Pt=function(o){return"collection"===Le(o)&&!o._private.single},pt=function(o){return"core"===Le(o)},at=function(o){return"stylesheet"===Le(o)},We=function(o){return null==o||!(""!==o&&!o.match(/^\s+$/))},ht=function(o){return function(o){return null!=o&&U(o)===me}(o)&&$e(o.then)},ft=function(o,l){l||(l=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var p=[],g=0;g<arguments.length;g++)p.push(arguments[g]);return p.join("$")});var d=function f(){var y,p=this,g=arguments,_=l.apply(p,g),b=f.cache;return(y=b[_])||(y=b[_]=o.apply(p,g)),y};return d.cache={},d},Nt=ft(function(c){return c.replace(/([A-Z])/g,function(o){return"-"+o.toLowerCase()})}),tn=ft(function(c){return c.replace(/(-\w)/g,function(o){return o[1].toUpperCase()})}),Ot=ft(function(c,o){return c+o[0].toUpperCase()+o.substring(1)},function(c,o){return c+"$"+o}),sn=function(o){return We(o)?o:o.charAt(0).toUpperCase()+o.substring(1)},hn="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",$n="rgb[a]?\\(("+hn+"[%]?)\\s*,\\s*("+hn+"[%]?)\\s*,\\s*("+hn+"[%]?)(?:\\s*,\\s*("+hn+"))?\\)",wr="rgb[a]?\\((?:"+hn+"[%]?)\\s*,\\s*(?:"+hn+"[%]?)\\s*,\\s*(?:"+hn+"[%]?)(?:\\s*,\\s*(?:"+hn+"))?\\)",vr="hsl[a]?\\(("+hn+")\\s*,\\s*("+hn+"[%])\\s*,\\s*("+hn+"[%])(?:\\s*,\\s*("+hn+"))?\\)",ai="hsl[a]?\\((?:"+hn+")\\s*,\\s*(?:"+hn+"[%])\\s*,\\s*(?:"+hn+"[%])(?:\\s*,\\s*(?:"+hn+"))?\\)",As=function(o,l){return o<l?-1:o>l?1:0},Zt=null!=Object.assign?Object.assign.bind(Object):function(c){for(var o=arguments,l=1;l<o.length;l++){var d=o[l];if(null!=d)for(var f=Object.keys(d),p=0;p<f.length;p++){var g=f[p];c[g]=d[g]}}return c},nc={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},jc=function(o){for(var l=o.map,d=o.keys,f=d.length,p=0;p<f;p++){var g=d[p];if(Ie(g))throw Error("Tried to set map with object key");p<d.length-1?(null==l[g]&&(l[g]={}),l=l[g]):l[g]=o.value}},al=function(o){for(var l=o.map,d=o.keys,f=d.length,p=0;p<f;p++){var g=d[p];if(Ie(g))throw Error("Tried to get map with object key");if(null==(l=l[g]))return l}return l},ko=H?H.performance:null,Sa=ko&&ko.now?function(){return ko.now()}:function(){return Date.now()},rc=function(){if(H){if(H.requestAnimationFrame)return function(c){H.requestAnimationFrame(c)};if(H.mozRequestAnimationFrame)return function(c){H.mozRequestAnimationFrame(c)};if(H.webkitRequestAnimationFrame)return function(c){H.webkitRequestAnimationFrame(c)};if(H.msRequestAnimationFrame)return function(c){H.msRequestAnimationFrame(c)}}return function(c){c&&setTimeout(function(){c(Sa())},1e3/60)}}(),ll=function(o){return rc(o)},Si=Sa,na=9261,Ma=65599,ra=5381,td=function(o){for(var f,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:na,d=l;!(f=o.next()).done;)d=d*Ma+f.value|0;return d},cl=function(o){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:na;return l*Ma+o|0},ul=function(o){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ra;return(l<<5)+l+o|0},po=function(o){return 2097152*o[0]+o[1]},go=function(o,l){return[cl(o[0],l[0]),ul(o[1],l[1])]},Aa=function(o,l){var d={value:0,done:!1},f=0,p=o.length;return td({next:function(){return f<p?d.value=o.charCodeAt(f++):d.done=!0,d}},l)},Ph=function(){return Nh(arguments)},Nh=function(o){for(var l,d=0;d<o.length;d++){var f=o[d];l=0===d?Aa(f):Aa(f,l)}return l},nd=!0,rd=null!=console.warn,Tp=null!=console.trace,Uc=Number.MAX_SAFE_INTEGER||9007199254740991,mo=function(){return!0},Gc=function(){return!1},Ta=function(){return 0},$c=function(){},Sr=function(o){throw new Error(o)},kp=function(o){if(void 0===o)return nd;nd=!!o},ur=function(o){kp()&&(rd?console.warn(o):(console.log(o),Tp&&console.trace()))},Is=function(o){return null==o?o:He(o)?o.slice():Ie(o)?function(o){return Zt({},o)}(o):o},dl=function(o,l){for(l=o="";o++<36;l+=51*o&52?(15^o?8^Math.random()*(20^o?16:4):4).toString(16):"-");return l},Ip={},sd=function(){return Ip},yi=function(o){var l=Object.keys(o);return function(d){for(var f={},p=0;p<l.length;p++){var g=l[p],y=d?.[g];f[g]=void 0===y?o[g]:y}return f}},ia=function(o,l,d){for(var f=o.length-1;f>=0&&(o[f]!==l||(o.splice(f,1),!d));f--);},od=function(o){o.splice(0,o.length)},vo=function(o,l,d){return d&&(l=Ot(d,l)),o[l]},yo=function(o,l,d,f){d&&(l=Ot(d,l)),o[l]=f},cs=typeof Map<"u"?Map:function(){function c(){O(this,c),this._obj={}}return ie(c,[{key:"set",value:function(l,d){return this._obj[l]=d,this}},{key:"delete",value:function(l){return this._obj[l]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(l){return void 0!==this._obj[l]}},{key:"get",value:function(l){return this._obj[l]}}]),c}(),Bh=function(){function c(o){if(O(this,c),this._obj=Object.create(null),this.size=0,null!=o){var l;l=null!=o.instanceString&&o.instanceString()===this.instanceString()?o.toArray():o;for(var d=0;d<l.length;d++)this.add(l[d])}}return ie(c,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(l){var d=this._obj;1!==d[l]&&(d[l]=1,this.size++)}},{key:"delete",value:function(l){var d=this._obj;1===d[l]&&(d[l]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(l){return 1===this._obj[l]}},{key:"toArray",value:function(){var l=this;return Object.keys(this._obj).filter(function(d){return l.has(d)})}},{key:"forEach",value:function(l,d){return this.toArray().forEach(l,d)}}]),c}(),ka="undefined"!==(typeof Set>"u"?"undefined":U(Set))?Set:Bh,fl=function(o,l){var d=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==o&&void 0!==l&&pt(o)){var f=l.group;if(null==f&&(f=l.data&&null!=l.data.source&&null!=l.data.target?"edges":"nodes"),"nodes"===f||"edges"===f){this.length=1,this[0]=this;var p=this._private={cy:o,single:!0,data:l.data||{},position:l.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:f,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!l.selected,selectable:void 0===l.selectable||!!l.selectable,locked:!!l.locked,grabbed:!1,grabbable:void 0===l.grabbable||!!l.grabbable,pannable:void 0===l.pannable?"edges"===f:!!l.pannable,active:!1,classes:new ka,animation:{current:[],queue:[]},rscratch:{},scratch:l.scratch||{},edges:[],children:[],parent:l.parent&&l.parent.isNode()?l.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==p.position.x&&(p.position.x=0),null==p.position.y&&(p.position.y=0),l.renderedPosition){var g=l.renderedPosition,y=o.pan(),_=o.zoom();p.position={x:(g.x-y.x)/_,y:(g.y-y.y)/_}}var b=[];He(l.classes)?b=l.classes:ye(l.classes)&&(b=l.classes.split(/\s+/));for(var w=0,E=b.length;w<E;w++){var M=b[w];!M||""===M||p.classes.add(M)}this.createEmitter();var R=l.style||l.css;R&&(ur("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(R)),(void 0===d||d)&&this.restore()}else Sr("An element must be of type `nodes` or `edges`; you specified `"+f+"`")}else Sr("An element must have a core reference and parameters set")},yr=function(o){return o={bfs:o.bfs||!o.dfs,dfs:o.dfs||!o.bfs},function(d,f,p){var g;Ie(d)&&!Oe(d)&&(d=(g=d).roots||g.root,f=g.visit,p=g.directed),p=2!==arguments.length||$e(f)?p:f,f=$e(f)?f:function(){};for(var $,y=this._private.cy,_=d=ye(d)?this.filter(d):d,b=[],w=[],E={},M={},R={},P=0,K=this.byGroup(),J=K.nodes,ne=K.edges,re=0;re<_.length;re++){var ue=_[re],Ce=ue.id();ue.isNode()&&(b.unshift(ue),o.bfs&&(R[Ce]=!0,w.push(ue)),M[Ce]=0)}for(var Se=function(){var Fe=o.bfs?b.shift():b.pop(),Me=Fe.id();if(o.dfs){if(R[Me])return"continue";R[Me]=!0,w.push(Fe)}var ct,Xe=M[Me],Ve=E[Me],je=null!=Ve?Ve.source():null,Qe=null!=Ve?Ve.target():null,it=null==Ve?void 0:Fe.same(je)?Qe[0]:je[0];if(!0===(ct=f(Fe,Ve,it,P++,Xe)))return $=Fe,"break";if(!1===ct)return"break";for(var rt=Fe.connectedEdges().filter(function(mt){return(!p||mt.source().same(Fe))&&ne.has(mt)}),tt=0;tt<rt.length;tt++){var wt=rt[tt],Dt=wt.connectedNodes().filter(function(mt){return!mt.same(Fe)&&J.has(mt)}),yt=Dt.id();0!==Dt.length&&!R[yt]&&(b.push(Dt=Dt[0]),o.bfs&&(R[yt]=!0,w.push(Dt)),E[yt]=wt,M[yt]=M[Me]+1)}};0!==b.length;){var de=Se();if("continue"!==de&&"break"===de)break}for(var Ee=y.collection(),he=0;he<w.length;he++){var ke=w[he],Te=E[ke.id()];null!=Te&&Ee.push(Te),Ee.push(ke)}return{path:y.collection(Ee),found:y.collection($)}}},Ae={breadthFirstSearch:yr({bfs:!0}),depthFirstSearch:yr({dfs:!0})};Ae.bfs=Ae.breadthFirstSearch,Ae.dfs=Ae.depthFirstSearch;var xe=yi({root:null,weight:function(o){return 1},directed:!1}),Ue={dijkstra:function(o){if(!Ie(o)){var l=arguments;o={root:l[0],weight:l[1],directed:l[2]}}var d=xe(o),f=d.root,p=d.weight,g=d.directed,y=this,_=p,b=ye(f)?this.filter(f)[0]:f[0],w={},E={},M={},R=this.byGroup(),P=R.nodes,$=R.edges;$.unmergeBy(function(Xe){return Xe.isLoop()});for(var K=function(Ve){return w[Ve.id()]},J=function(Ve,je){w[Ve.id()]=je,ne.updateItem(Ve)},ne=new k.default(function(Xe,Ve){return K(Xe)-K(Ve)}),re=0;re<P.length;re++){var ue=P[re];w[ue.id()]=ue.same(b)?0:1/0,ne.push(ue)}for(var Ce=function(Ve,je){for(var ct,Qe=(g?Ve.edgesTo(je):Ve.edgesWith(je)).intersect($),it=1/0,rt=0;rt<Qe.length;rt++){var tt=Qe[rt],wt=_(tt);(wt<it||!ct)&&(it=wt,ct=tt)}return{edge:ct,dist:it}};ne.size()>0;){var Se=ne.pop(),de=K(Se),Ee=Se.id();if(M[Ee]=de,de!==1/0)for(var he=Se.neighborhood().intersect(P),ke=0;ke<he.length;ke++){var Te=he[ke],ge=Te.id(),Fe=Ce(Se,Te),Me=de+Fe.dist;Me<K(Te)&&(J(Te,Me),E[ge]={node:Se,edge:Fe.edge})}}return{distanceTo:function(Ve){var je=ye(Ve)?P.filter(Ve)[0]:Ve[0];return M[je.id()]},pathTo:function(Ve){var je=ye(Ve)?P.filter(Ve)[0]:Ve[0],Qe=[],it=je,ct=it.id();if(je.length>0)for(Qe.unshift(je);E[ct];){var rt=E[ct];Qe.unshift(rt.edge),Qe.unshift(rt.node),ct=(it=rt.node).id()}return y.spawn(Qe)}}}},bt={kruskal:function(o){o=o||function(re){return 1};for(var l=this.byGroup(),d=l.nodes,f=l.edges,p=d.length,g=new Array(p),y=d,_=function(ue){for(var Ce=0;Ce<g.length;Ce++)if(g[Ce].has(ue))return Ce},b=0;b<p;b++)g[b]=this.spawn(d[b]);for(var w=f.sort(function(re,ue){return o(re)-o(ue)}),E=0;E<w.length;E++){var M=w[E],R=M.source()[0],P=M.target()[0],$=_(R),K=_(P),J=g[$],ne=g[K];$!==K&&(y.merge(M),J.merge(ne),g.splice(K,1))}return y}},lt=yi({root:null,goal:null,weight:function(o){return 1},heuristic:function(o){return 0},directed:!1}),dt={aStar:function(o){var l=this.cy(),d=lt(o),f=d.root,p=d.goal,g=d.heuristic,y=d.directed,_=d.weight;f=l.collection(f)[0],p=l.collection(p)[0];var re,ue,b=f.id(),w=p.id(),E={},M={},R={},P=new k.default(function(ct,rt){return M[ct.id()]-M[rt.id()]}),$=new ka,K={},J={},ne=function(rt,tt){P.push(rt),$.add(tt)};ne(f,b),E[b]=0,M[b]=g(f);for(var de=0;P.size()>0;){if(ue=(re=P.pop()).id(),$.delete(ue),de++,ue===w){for(var Ee=[],he=p,ke=w,Te=J[ke];Ee.unshift(he),null!=Te&&Ee.unshift(Te),null!=(he=K[ke]);)Te=J[ke=he.id()];return{found:!0,distance:E[ue],path:this.spawn(Ee),steps:de}}R[ue]=!0;for(var ge=re._private.edges,Fe=0;Fe<ge.length;Fe++){var Me=ge[Fe];if(this.hasElementWithId(Me.id())&&(!y||Me.data("source")===ue)){var Xe=Me.source(),Ve=Me.target(),je=Xe.id()!==ue?Xe:Ve,Qe=je.id();if(this.hasElementWithId(Qe)&&!R[Qe]){var it=E[ue]+_(Me);if(!$.has(Qe)){E[Qe]=it,M[Qe]=it+g(je),ne(je,Qe),K[Qe]=re,J[Qe]=Me;continue}it<E[Qe]&&(E[Qe]=it,M[Qe]=it+g(je),K[Qe]=re,J[Qe]=Me)}}}}return{found:!1,distance:void 0,path:void 0,steps:de}}},Jt=yi({weight:function(o){return 1},directed:!1}),Bt={floydWarshall:function(o){for(var l=this.cy(),d=Jt(o),p=d.directed,g=d.weight,y=this.byGroup(),_=y.nodes,b=y.edges,w=_.length,E=w*w,M=function(wt){return _.indexOf(wt)},R=function(wt){return _[wt]},P=new Array(E),$=0;$<E;$++){var K=$%w;P[$]=($-K)/w===K?0:1/0}for(var ne=new Array(E),re=new Array(E),ue=0;ue<b.length;ue++){var Ce=b[ue],Se=Ce.source()[0],de=Ce.target()[0];if(Se!==de){var Ee=M(Se),he=M(de),ke=Ee*w+he,Te=g(Ce);if(P[ke]>Te&&(P[ke]=Te,ne[ke]=he,re[ke]=Ce),!p){var ge=he*w+Ee;!p&&P[ge]>Te&&(P[ge]=Te,ne[ge]=Ee,re[ge]=Ce)}}}for(var Fe=0;Fe<w;Fe++)for(var Me=0;Me<w;Me++)for(var Xe=Me*w+Fe,Ve=0;Ve<w;Ve++){var je=Me*w+Ve,Qe=Fe*w+Ve;P[Xe]+P[Qe]<P[je]&&(P[je]=P[Xe]+P[Qe],ne[je]=ne[Xe])}var ct=function(wt){return M(function(wt){return(ye(wt)?l.filter(wt):wt)[0]}(wt))};return{distance:function(wt,Dt){var yt=ct(wt),mt=ct(Dt);return P[yt*w+mt]},path:function(wt,Dt){var yt=ct(wt),mt=ct(Dt),Ze=R(yt);if(yt===mt)return Ze.collection();if(null==ne[yt*w+mt])return l.collection();var xt=l.collection();for(xt.merge(Ze);yt!==mt;)xt.merge(re[yt*w+(yt=ne[yt*w+mt])]),xt.merge(R(yt));return xt}}}},zt=yi({weight:function(o){return 1},directed:!1,root:null}),gn={bellmanFord:function(o){var l=this,d=zt(o),p=d.directed,g=d.root,y=d.weight,_=this,b=this.cy(),w=this.byGroup(),E=w.edges,M=w.nodes,R=M.length,P=new cs,$=!1,K=[];g=b.collection(g)[0],E.unmergeBy(function(en){return en.isLoop()});for(var J=E.length,ne=function(jt){var cn=P.get(jt.id());return cn||(cn={},P.set(jt.id(),cn)),cn},re=function(jt){return(ye(jt)?b.$(jt):jt)[0]},Se=0;Se<R;Se++){var de=M[Se],Ee=ne(de);Ee.dist=de.same(g)?0:1/0,Ee.pred=null,Ee.edge=null}for(var he=!1,ke=function(jt,cn,Hn,An,mn,Rt){var fe=An.dist+Rt;fe<mn.dist&&!Hn.same(An.edge)&&(mn.dist=fe,mn.pred=jt,mn.edge=Hn,he=!0)},Te=1;Te<R;Te++){he=!1;for(var ge=0;ge<J;ge++){var Fe=E[ge],Me=Fe.source(),Xe=Fe.target(),Ve=y(Fe),je=ne(Me),Qe=ne(Xe);ke(Me,0,Fe,je,Qe,Ve),p||ke(Xe,0,Fe,Qe,je,Ve)}if(!he)break}if(he)for(var it=[],ct=0;ct<J;ct++){var rt=E[ct],tt=rt.source(),wt=rt.target(),Dt=y(rt),yt=ne(tt).dist,mt=ne(wt).dist;if(yt+Dt<mt||!p&&mt+Dt<yt){if($||(ur("Graph contains a negative weight cycle for Bellman-Ford"),$=!0),!1===o.findNegativeWeightCycles)break;var Ze=[];yt+Dt<mt&&Ze.push(tt),!p&&mt+Dt<yt&&Ze.push(wt);for(var xt=Ze.length,Mt=0;Mt<xt;Mt++){var Lt=Ze[Mt],Vt=[Lt];Vt.push(ne(Lt).edge);for(var xn=ne(Lt).pred;-1===Vt.indexOf(xn);)Vt.push(xn),Vt.push(ne(xn).edge),xn=ne(xn).pred;for(var kn=(Vt=Vt.slice(Vt.indexOf(xn)))[0].id(),Ht=0,Ft=2;Ft<Vt.length;Ft+=2)Vt[Ft].id()<kn&&(kn=Vt[Ft].id(),Ht=Ft);(Vt=Vt.slice(Ht).concat(Vt.slice(0,Ht))).push(Vt[0]);var pn=Vt.map(function(en){return en.id()}).join(",");-1===it.indexOf(pn)&&(K.push(_.spawn(Vt)),it.push(pn))}}}return{distanceTo:function(jt){return ne(re(jt)).dist},pathTo:function(jt){for(var cn=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g,Hn=re(jt),An=[],mn=Hn;;){if(null==mn)return l.spawn();var Rt=ne(mn),fe=Rt.edge,ot=Rt.pred;if(An.unshift(mn[0]),mn.same(cn)&&An.length>0)break;null!=fe&&An.unshift(fe),mn=ot}return _.spawn(An)},hasNegativeWeightCycle:$,negativeWeightCycles:K}}},Ye=Math.sqrt(2),er=function(o,l,d){0===d.length&&Sr("Karger-Stein must be run on a connected (sub)graph");for(var f=d[o],y=l[f[1]],_=l[f[2]],b=d,w=b.length-1;w>=0;w--){var E=b[w],M=E[1],R=E[2];(l[M]===y&&l[R]===_||l[M]===_&&l[R]===y)&&b.splice(w,1)}for(var P=0;P<b.length;P++){var $=b[P];$[1]===_?(b[P]=$.slice(),b[P][1]=y):$[2]===_&&(b[P]=$.slice(),b[P][2]=y)}for(var K=0;K<l.length;K++)l[K]===_&&(l[K]=y);return b},Wt=function(o,l,d,f){for(;d>f;){var p=Math.floor(Math.random()*l.length);l=er(p,o,l),d--}return l},qt={kargerStein:function(){var o=this,l=this.byGroup(),d=l.nodes,f=l.edges;f.unmergeBy(function(Qe){return Qe.isLoop()});var p=d.length,g=f.length,y=Math.ceil(Math.pow(Math.log(p)/Math.LN2,2)),_=Math.floor(p/Ye);if(!(p<2)){for(var b=[],w=0;w<g;w++){var E=f[w];b.push([w,d.indexOf(E.source()),d.indexOf(E.target())])}for(var M=1/0,R=[],P=new Array(p),$=new Array(p),K=new Array(p),J=function(it,ct){for(var rt=0;rt<p;rt++)ct[rt]=it[rt]},ne=0;ne<=y;ne++){for(var re=0;re<p;re++)$[re]=re;var ue=Wt($,b.slice(),p,_),Ce=ue.slice();J($,K);var Se=Wt($,ue,_,2),de=Wt(K,Ce,_,2);Se.length<=de.length&&Se.length<M?(M=Se.length,R=Se,J($,P)):de.length<=Se.length&&de.length<M&&(M=de.length,R=de,J(K,P))}for(var Ee=this.spawn(R.map(function(Qe){return f[Qe[0]]})),he=this.spawn(),ke=this.spawn(),Te=P[0],ge=0;ge<P.length;ge++){var Me=d[ge];P[ge]===Te?he.merge(Me):ke.merge(Me)}var Xe=function(it){var ct=o.spawn();return it.forEach(function(rt){ct.merge(rt),rt.connectedEdges().forEach(function(tt){o.contains(tt)&&!Ee.contains(tt)&&ct.merge(tt)})}),ct},Ve=[Xe(he),Xe(ke)];return{cut:Ee,components:Ve,partition1:he,partition2:ke}}Sr("At least 2 nodes are required for Karger-Stein algorithm")}},Wn=function(o,l,d){return{x:o.x*l+d.x,y:o.y*l+d.y}},qn=function(o,l,d){return{x:(o.x-d.x)/l,y:(o.y-d.y)/l}},Yn=function(o){return{x:o[0],y:o[1]}},Ar=function(o,l){return Math.atan2(l,o)-Math.PI/2},Jr=Math.log2||function(c){return Math.log(c)/Math.log(2)},li=function(o){return o>0?1:o<0?-1:0},Or=function(o,l){return Math.sqrt(xr(o,l))},xr=function(o,l){var d=l.x-o.x,f=l.y-o.y;return d*d+f*f},bo=function(o){for(var l=o.length,d=0,f=0;f<l;f++)d+=o[f];for(var p=0;p<l;p++)o[p]=o[p]/d;return o},tr=function(o,l,d,f){return(1-f)*(1-f)*o+2*(1-f)*f*l+f*f*d},qs=function(o,l,d,f){return{x:tr(o.x,l.x,d.x,f),y:tr(o.y,l.y,d.y,f)}},wn=function(o,l,d){return Math.max(o,Math.min(d,l))},Lr=function(o){if(null==o)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=o.x1&&null!=o.y1){if(null!=o.x2&&null!=o.y2&&o.x2>=o.x1&&o.y2>=o.y1)return{x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2,w:o.x2-o.x1,h:o.y2-o.y1};if(null!=o.w&&null!=o.h&&o.w>=0&&o.h>=0)return{x1:o.x1,y1:o.y1,x2:o.x1+o.w,y2:o.y1+o.h,w:o.w,h:o.h}}},nn=function(o,l){o.x1=Math.min(o.x1,l.x1),o.x2=Math.max(o.x2,l.x2),o.w=o.x2-o.x1,o.y1=Math.min(o.y1,l.y1),o.y2=Math.max(o.y2,l.y2),o.h=o.y2-o.y1},Vh=function(o,l,d){o.x1=Math.min(o.x1,l),o.x2=Math.max(o.x2,l),o.w=o.x2-o.x1,o.y1=Math.min(o.y1,d),o.y2=Math.max(o.y2,d),o.h=o.y2-o.y1},gr=function(o){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return o.x1-=l,o.x2+=l,o.y1-=l,o.y2+=l,o.w=o.x2-o.x1,o.h=o.y2-o.y1,o},Io=function(o){var d,f,p,g,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===l.length)d=f=p=g=l[0];else if(2===l.length)d=p=l[0],g=f=l[1];else if(4===l.length){var y=se(l,4);d=y[0],f=y[1],p=y[2],g=y[3]}return o.x1-=g,o.x2+=f,o.y1-=d,o.y2+=p,o.w=o.x2-o.x1,o.h=o.y2-o.y1,o},gl=function(o,l){o.x1=l.x1,o.y1=l.y1,o.x2=l.x2,o.y2=l.y2,o.w=o.x2-o.x1,o.h=o.y2-o.y1},Ys=function(o,l){return!(o.x1>l.x2||l.x1>o.x2||o.x2<l.x1||l.x2<o.x1||o.y2<l.y1||l.y2<o.y1||o.y1>l.y2||l.y1>o.y2)},_o=function(o,l,d){return o.x1<=l&&l<=o.x2&&o.y1<=d&&d<=o.y2},Wc=function(o,l){return _o(o,l.x,l.y)},Oo=function(o,l){return _o(o,l.x1,l.y1)&&_o(o,l.x2,l.y2)},Ia=function(o,l,d,f,p,g,y){var E,_=dd(p,g),b=p/2,w=g/2,R=f-w-y;if((E=Os(o,l,d,f,d-b+_-y,R,d+b-_+y,R,!1)).length>0)return E;var K=d+b+y;if((E=Os(o,l,d,f,K,f-w+_-y,K,f+w-_+y,!1)).length>0)return E;var Ce=f+w+y;if((E=Os(o,l,d,f,d-b+_-y,Ce,d+b-_+y,Ce,!1)).length>0)return E;var ge,Ee=d-b-y;if((E=Os(o,l,d,f,Ee,f-w+_-y,Ee,f+w-_+y,!1)).length>0)return E;var Fe=d-b+_,Me=f-w+_;if((ge=wo(o,l,d,f,Fe,Me,_+y)).length>0&&ge[0]<=Fe&&ge[1]<=Me)return[ge[0],ge[1]];var Xe=d+b-_,Ve=f-w+_;if((ge=wo(o,l,d,f,Xe,Ve,_+y)).length>0&&ge[0]>=Xe&&ge[1]<=Ve)return[ge[0],ge[1]];var je=d+b-_,Qe=f+w-_;if((ge=wo(o,l,d,f,je,Qe,_+y)).length>0&&ge[0]>=je&&ge[1]>=Qe)return[ge[0],ge[1]];var it=d-b+_,ct=f+w-_;return(ge=wo(o,l,d,f,it,ct,_+y)).length>0&&ge[0]<=it&&ge[1]>=ct?[ge[0],ge[1]]:[]},ld=function(o,l,d,f,p,g,y){var _=y,b=Math.min(d,p),w=Math.max(d,p),E=Math.min(f,g),M=Math.max(f,g);return b-_<=o&&o<=w+_&&E-_<=l&&l<=M+_},qc=function(o,l,d,f,p,g,y,_,b){var w_x1=Math.min(d,y,p)-b,w_x2=Math.max(d,y,p)+b,w_y1=Math.min(f,_,g)-b,w_y2=Math.max(f,_,g)+b;return!(o<w_x1||o>w_x2||l<w_y1||l>w_y2)},cd=function(o,l,d,f,p,g,y,_){var R=[];!function(o,l,d,f,p){var y,_,b,w,E,M,R,P;0===o&&(o=1e-5),b=-27*(f/=o)+(l/=o)*(9*(d/=o)-l*l*2),y=(_=(3*d-l*l)/9)*_*_+(b/=54)*b,p[1]=0,R=l/3,y>0?(E=(E=b+Math.sqrt(y))<0?-Math.pow(-E,1/3):Math.pow(E,1/3),M=(M=b-Math.sqrt(y))<0?-Math.pow(-M,1/3):Math.pow(M,1/3),p[0]=-R+E+M,p[4]=p[2]=-(R+=(E+M)/2),R=Math.sqrt(3)*(-M+E)/2,p[3]=R,p[5]=-R):(p[5]=p[3]=0,0===y?(P=b<0?-Math.pow(-b,1/3):Math.pow(b,1/3),p[0]=2*P-R,p[4]=p[2]=-(P+R)):(w=(_=-_)*_*_,w=Math.acos(b/Math.sqrt(w)),P=2*Math.sqrt(_),p[0]=-R+P*Math.cos(w/3),p[2]=-R+P*Math.cos((w+2*Math.PI)/3),p[4]=-R+P*Math.cos((w+4*Math.PI)/3)))}(1*d*d-4*d*p+2*d*y+4*p*p-4*p*y+y*y+f*f-4*f*g+2*f*_+4*g*g-4*g*_+_*_,9*d*p-3*d*d-3*d*y-6*p*p+3*p*y+9*f*g-3*f*f-3*f*_-6*g*g+3*g*_,3*d*d-6*d*p+d*y-d*o+2*p*p+2*p*o-y*o+3*f*f-6*f*g+f*_-f*l+2*g*g+2*g*l-_*l,1*d*p-d*d+d*o-p*o+f*g-f*f+f*l-g*l,R);for(var $=[],K=0;K<6;K+=2)Math.abs(R[K+1])<1e-7&&R[K]>=0&&R[K]<=1&&$.push(R[K]);$.push(1),$.push(0);for(var ne,re,ue,J=-1,Ce=0;Ce<$.length;Ce++)ne=Math.pow(1-$[Ce],2)*d+2*(1-$[Ce])*$[Ce]*p+$[Ce]*$[Ce]*y,re=Math.pow(1-$[Ce],2)*f+2*(1-$[Ce])*$[Ce]*g+$[Ce]*$[Ce]*_,ue=Math.pow(ne-o,2)+Math.pow(re-l,2),J>=0?ue<J&&(J=ue):J=ue;return J},Rp=function(o,l,d,f,p,g){var y=[o-d,l-f],_=[p-d,g-f],b=_[0]*_[0]+_[1]*_[1],w=y[0]*y[0]+y[1]*y[1],E=y[0]*_[0]+y[1]*_[1],M=E*E/b;return E<0?w:M>b?(o-p)*(o-p)+(l-g)*(l-g):w-M},Mr=function(o,l,d){for(var f,p,g,y,b=0,w=0;w<d.length/2;w++)if(p=d[2*w+1],w+1<d.length/2?(g=d[2*(w+1)],y=d[2*(w+1)+1]):(g=d[2*(w+1-d.length/2)],y=d[2*(w+1-d.length/2)+1]),(f=d[2*w])!=o||g!=o){if(!(f>=o&&o>=g||f<=o&&o<=g))continue;(o-f)/(g-f)*(y-p)+p>l&&b++}return b%2!=0},Xs=function(o,l,d,f,p,g,y,_,b){var E,$,w=new Array(d.length);null!=_[0]?(E=Math.atan(_[1]/_[0]),_[0]<0?E+=Math.PI/2:E=-E-Math.PI/2):E=_;for(var M=Math.cos(-E),R=Math.sin(-E),P=0;P<w.length/2;P++)w[2*P]=g/2*(d[2*P]*M-d[2*P+1]*R),w[2*P+1]=y/2*(d[2*P+1]*M+d[2*P]*R),w[2*P]+=f,w[2*P+1]+=p;if(b>0){var K=Oa(w,-b);$=Er(K)}else $=w;return Mr(o,l,$)},Er=function(o){for(var y,_,b,w,l=new Array(o.length/2),E=0;E<o.length/4;E++){E<o.length/4-1?(y=o[4*(E+1)],_=o[4*(E+1)+1],b=o[4*(E+1)+2],w=o[4*(E+1)+3]):(y=o[0],_=o[1],b=o[2],w=o[3]);var M=Os(o[4*E],o[4*E+1],o[4*E+2],o[4*E+3],y,_,b,w,!0);l[2*E]=M[0],l[2*E+1]=M[1]}return l},Oa=function(o,l){for(var f,p,g,y,d=new Array(2*o.length),_=0;_<o.length/2;_++){_<o.length/2-1?(g=o[2*(_+1)],y=o[2*(_+1)+1]):(g=o[0],y=o[1]);var b=y-(p=o[2*_+1]),w=-(g-(f=o[2*_])),E=Math.sqrt(b*b+w*w),M=b/E,R=w/E;d[4*_]=f+M*l,d[4*_+1]=p+R*l,d[4*_+2]=g+M*l,d[4*_+3]=y+R*l}return d},Ra=function(o,l,d,f,p,g,y){return o-=p,l-=g,(o/=d/2+y)*o+(l/=f/2+y)*l<=1},wo=function(o,l,d,f,p,g,y){var _=[d-o,f-l],b=[o-p,l-g],w=_[0]*_[0]+_[1]*_[1],E=2*(b[0]*_[0]+b[1]*_[1]),R=E*E-4*w*(b[0]*b[0]+b[1]*b[1]-y*y);if(R<0)return[];var P=(-E+Math.sqrt(R))/(2*w),$=(-E-Math.sqrt(R))/(2*w),K=Math.min(P,$),J=Math.max(P,$),ne=[];if(K>=0&&K<=1&&ne.push(K),J>=0&&J<=1&&ne.push(J),0===ne.length)return[];var re=ne[0]*_[0]+o,ue=ne[0]*_[1]+l;return ne.length>1?ne[0]==ne[1]?[re,ue]:[re,ue,ne[1]*_[0]+o,ne[1]*_[1]+l]:[re,ue]},Pa=function(o,l,d){return l<=o&&o<=d||d<=o&&o<=l?o:o<=l&&l<=d||d<=l&&l<=o?l:d},Os=function(o,l,d,f,p,g,y,_,b){var w=o-p,E=d-o,M=y-p,R=l-g,P=f-l,$=_-g,K=M*R-$*w,J=E*R-P*w,ne=$*E-M*P;if(0!==ne){var re=K/ne,ue=J/ne;return-.001<=re&&re<=1.001&&-.001<=ue&&ue<=1.001||b?[o+re*E,l+re*P]:[]}return 0===K||0===J?Pa(o,d,y)===y?[y,_]:Pa(o,d,p)===p?[p,g]:Pa(p,y,d)===d?[d,f]:[]:[]},ml=function(o,l,d,f,p,g,y,_){var w,R,b=[],E=new Array(d.length),M=!0;if(null==g&&(M=!1),M){for(var P=0;P<E.length/2;P++)E[2*P]=d[2*P]*g+f,E[2*P+1]=d[2*P+1]*y+p;if(_>0){var $=Oa(E,-_);R=Er($)}else R=E}else R=d;for(var ne,re,ue=0;ue<R.length/2;ue++)ue<R.length/2-1?(ne=R[2*(ue+1)],re=R[2*(ue+1)+1]):(ne=R[0],re=R[1]),0!==(w=Os(o,l,f,p,R[2*ue],R[2*ue+1],ne,re)).length&&b.push(w[0],w[1]);return b},ic=function(o,l,d){var f=[o[0]-l[0],o[1]-l[1]],p=Math.sqrt(f[0]*f[0]+f[1]*f[1]),g=(p-d)/p;return g<0&&(g=1e-5),[l[0]+g*f[0],l[1]+g*f[1]]},Zi=function(o,l){var d=vl(o,l);return Yc(d)},Yc=function(o){for(var l,d,f=o.length/2,p=1/0,g=1/0,y=-1/0,_=-1/0,b=0;b<f;b++)l=o[2*b],d=o[2*b+1],p=Math.min(p,l),y=Math.max(y,l),g=Math.min(g,d),_=Math.max(_,d);for(var w=2/(y-p),E=2/(_-g),M=0;M<f;M++)l=o[2*M]=o[2*M]*w,d=o[2*M+1]=o[2*M+1]*E,p=Math.min(p,l),y=Math.max(y,l),g=Math.min(g,d),_=Math.max(_,d);if(g<-1)for(var R=0;R<f;R++)d=o[2*R+1]=o[2*R+1]+(-1-g);return o},vl=function(o,l){var d=1/o*2*Math.PI,f=o%2==0?Math.PI/2+d/2:Math.PI/2;f+=l;for(var g,p=new Array(2*o),y=0;y<o;y++)g=y*d+f,p[2*y]=Math.cos(g),p[2*y+1]=Math.sin(-g);return p},dd=function(o,l){return Math.min(o/4,l/4,8)},St=function(o,l){return Math.min(o/10,l/10,8)},Xc=function(o,l){return{heightOffset:Math.min(15,.05*l),widthOffset:Math.min(100,.25*o),ctrlPtOffsetPct:.05}},Np=yi({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(o){return 1}}),hd={pageRank:function(o){for(var l=Np(o),d=l.dampingFactor,f=l.precision,p=l.iterations,g=l.weight,y=this._private.cy,_=this.byGroup(),b=_.nodes,w=_.edges,E=b.length,R=w.length,P=new Array(E*E),$=new Array(E),K=(1-d)/E,J=0;J<E;J++){for(var ne=0;ne<E;ne++)P[J*E+ne]=0;$[J]=0}for(var ue=0;ue<R;ue++){var Ce=w[ue],Se=Ce.data("source"),de=Ce.data("target");if(Se!==de){var Ee=b.indexOfId(Se),he=b.indexOfId(de),ke=g(Ce);P[he*E+Ee]+=ke,$[Ee]+=ke}}for(var ge=1/E+K,Fe=0;Fe<E;Fe++)if(0===$[Fe])for(var Me=0;Me<E;Me++)P[Me*E+Fe]=ge;else for(var Ve=0;Ve<E;Ve++){var je=Ve*E+Fe;P[je]=P[je]/$[Fe]+K}for(var ct,Qe=new Array(E),it=new Array(E),rt=0;rt<E;rt++)Qe[rt]=1;for(var tt=0;tt<p;tt++){for(var wt=0;wt<E;wt++)it[wt]=0;for(var Dt=0;Dt<E;Dt++)for(var yt=0;yt<E;yt++)it[Dt]+=P[Dt*E+yt]*Qe[yt];bo(it),ct=Qe,Qe=it,it=ct;for(var Ze=0,xt=0;xt<E;xt++){var Mt=ct[xt]-Qe[xt];Ze+=Mt*Mt}if(Ze<f)break}return{rank:function(xn){return xn=y.collection(xn)[0],Qe[b.indexOf(xn)]}}}},Av=yi({root:null,weight:function(o){return 1},directed:!1,alpha:0}),Kc={degreeCentralityNormalized:function(o){o=Av(o);var l=this.cy(),d=this.nodes(),f=d.length;if(o.directed){for(var w={},E={},M=0,R=0,P=0;P<f;P++){var $=d[P],K=$.id();o.root=$;var J=this.degreeCentrality(o);M<J.indegree&&(M=J.indegree),R<J.outdegree&&(R=J.outdegree),w[K]=J.indegree,E[K]=J.outdegree}return{indegree:function(re){return 0==M?0:(ye(re)&&(re=l.filter(re)),w[re.id()]/M)},outdegree:function(re){return 0===R?0:(ye(re)&&(re=l.filter(re)),E[re.id()]/R)}}}for(var p={},g=0,y=0;y<f;y++){var _=d[y];o.root=_;var b=this.degreeCentrality(o);g<b.degree&&(g=b.degree),p[_.id()]=b.degree}return{degree:function(re){return 0===g?0:(ye(re)&&(re=l.filter(re)),p[re.id()]/g)}}},degreeCentrality:function(o){o=Av(o);var l=this.cy(),d=this,p=o.root,g=o.weight,y=o.directed,_=o.alpha;if(p=l.collection(p)[0],y){for(var R=p.connectedEdges(),P=R.filter(function(Se){return Se.target().same(p)&&d.has(Se)}),$=R.filter(function(Se){return Se.source().same(p)&&d.has(Se)}),K=P.length,J=$.length,ne=0,re=0,ue=0;ue<P.length;ue++)ne+=g(P[ue]);for(var Ce=0;Ce<$.length;Ce++)re+=g($[Ce]);return{indegree:Math.pow(K,1-_)*Math.pow(ne,_),outdegree:Math.pow(J,1-_)*Math.pow(re,_)}}for(var b=p.connectedEdges().intersection(d),w=b.length,E=0,M=0;M<b.length;M++)E+=g(b[M]);return{degree:Math.pow(w,1-_)*Math.pow(E,_)}}};Kc.dc=Kc.degreeCentrality,Kc.dcn=Kc.degreeCentralityNormalised=Kc.degreeCentralityNormalized;var Tv=yi({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Ks={closenessCentralityNormalized:function(o){for(var l=Tv(o),d=l.harmonic,f=l.weight,p=l.directed,g=this.cy(),y={},_=0,b=this.nodes(),w=this.floydWarshall({weight:f,directed:p}),E=0;E<b.length;E++){for(var M=0,R=b[E],P=0;P<b.length;P++)if(E!==P){var $=w.distance(R,b[P]);M+=d?1/$:$}d||(M=1/M),_<M&&(_=M),y[R.id()]=M}return{closeness:function(J){return 0==_?0:(J=ye(J)?g.filter(J)[0].id():J.id(),y[J]/_)}}},closenessCentrality:function(o){var l=Tv(o),d=l.root,f=l.weight,p=l.directed,g=l.harmonic;d=this.filter(d)[0];for(var y=this.dijkstra({root:d,weight:f,directed:p}),_=0,b=this.nodes(),w=0;w<b.length;w++){var E=b[w];if(!E.same(d)){var M=y.distanceTo(E);_+=g?1/M:M}}return g?_:1/_}};Ks.cc=Ks.closenessCentrality,Ks.ccn=Ks.closenessCentralityNormalised=Ks.closenessCentralityNormalized;var Po=yi({weight:null,directed:!1}),kv={betweennessCentrality:function(o){for(var l=Po(o),d=l.directed,f=l.weight,p=null!=f,g=this.cy(),y=this.nodes(),_={},b={},w=0,E={set:function(re,ue){b[re]=ue,ue>w&&(w=ue)},get:function(re){return b[re]}},M=0;M<y.length;M++){var R=y[M],P=R.id();_[P]=d?R.outgoers().nodes():R.openNeighborhood().nodes(),E.set(P,0)}for(var $=function(re){for(var ue=y[re].id(),Ce=[],Se={},de={},Ee={},he=new k.default(function(yt,mt){return Ee[yt]-Ee[mt]}),ke=0;ke<y.length;ke++){var Te=y[ke].id();Se[Te]=[],de[Te]=0,Ee[Te]=1/0}for(de[ue]=1,Ee[ue]=0,he.push(ue);!he.empty();){var ge=he.pop();if(Ce.push(ge),p)for(var Fe=0;Fe<_[ge].length;Fe++){var Ve,Me=_[ge][Fe],Xe=g.getElementById(ge);Ve=Xe.edgesTo(Me).length>0?Xe.edgesTo(Me)[0]:Me.edgesTo(Xe)[0];var je=f(Ve);Me=Me.id(),Ee[Me]>Ee[ge]+je&&(Ee[Me]=Ee[ge]+je,he.nodes.indexOf(Me)<0?he.push(Me):he.updateItem(Me),de[Me]=0,Se[Me]=[]),Ee[Me]==Ee[ge]+je&&(de[Me]=de[Me]+de[ge],Se[Me].push(ge))}else for(var Qe=0;Qe<_[ge].length;Qe++){var it=_[ge][Qe].id();Ee[it]==1/0&&(he.push(it),Ee[it]=Ee[ge]+1),Ee[it]==Ee[ge]+1&&(de[it]=de[it]+de[ge],Se[it].push(ge))}}for(var ct={},rt=0;rt<y.length;rt++)ct[y[rt].id()]=0;for(;Ce.length>0;){for(var tt=Ce.pop(),wt=0;wt<Se[tt].length;wt++){var Dt=Se[tt][wt];ct[Dt]=ct[Dt]+de[Dt]/de[tt]*(1+ct[tt])}tt!=y[re].id()&&E.set(tt,E.get(tt)+ct[tt])}},K=0;K<y.length;K++)$(K);var J={betweenness:function(re){var ue=g.collection(re).id();return E.get(ue)},betweennessNormalized:function(re){if(0==w)return 0;var ue=g.collection(re).id();return E.get(ue)/w}};return J.betweennessNormalised=J.betweennessNormalized,J}};kv.bc=kv.betweennessCentrality;var q1=yi({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(c){return 1}]}),Na=function(o,l){for(var d=0,f=0;f<l.length;f++)d+=l[f](o);return d},fd=function(o,l){for(var d,f=0;f<l;f++){d=0;for(var p=0;p<l;p++)d+=o[p*l+f];for(var g=0;g<l;g++)o[g*l+f]=o[g*l+f]/d}},Lp=function(o,l,d){for(var f=new Array(d*d),p=0;p<d;p++){for(var g=0;g<d;g++)f[p*d+g]=0;for(var y=0;y<d;y++)for(var _=0;_<d;_++)f[p*d+_]+=o[p*d+y]*l[y*d+_]}return f},Fp=function(o,l,d){for(var f=o.slice(0),p=1;p<d;p++)o=Lp(o,f,l);return o},Iv=function(o,l,d){for(var f=new Array(l*l),p=0;p<l*l;p++)f[p]=Math.pow(o[p],d);return fd(f,l),f},La=function(o,l,d,f){for(var p=0;p<d;p++)if(Math.round(o[p]*Math.pow(10,f))/Math.pow(10,f)!=Math.round(l[p]*Math.pow(10,f))/Math.pow(10,f))return!1;return!0},fw=function(o,l){for(var d=0;d<o.length;d++)if(!l[d]||o[d].id()!==l[d].id())return!1;return!0},Ov=function(o){for(var l=this.nodes(),d=this.edges(),f=this.cy(),p=function(o){return q1(o)}(o),g={},y=0;y<l.length;y++)g[l[y].id()]=y;for(var E,_=l.length,b=_*_,w=new Array(b),M=0;M<b;M++)w[M]=0;for(var R=0;R<d.length;R++){var P=d[R],$=g[P.source().id()],K=g[P.target().id()],J=Na(P,p.attributes);w[$*_+K]+=J,w[K*_+$]+=J}(function(o,l,d){for(var f=0;f<l;f++)o[f*l+f]=d})(w,_,p.multFactor),fd(w,_);for(var ne=!0,re=0;ne&&re<p.maxIterations;)ne=!1,E=Fp(w,_,p.expandFactor),w=Iv(E,_,p.inflateFactor),La(w,E,b,4)||(ne=!0),re++;var ue=function(o,l,d,f){for(var p=[],g=0;g<l;g++){for(var y=[],_=0;_<l;_++)Math.round(1e3*o[g*l+_])/1e3>0&&y.push(d[_]);0!==y.length&&p.push(f.collection(y))}return p}(w,_,l,f);return ue=function(o){for(var l=0;l<o.length;l++)for(var d=0;d<o.length;d++)l!=d&&fw(o[l],o[d])&&o.splice(d,1);return o}(ue),ue},Rv={markovClustering:Ov,mcl:Ov},Pv=function(o){return o},ei=function(o,l){return Math.abs(l-o)},Nv=function(o,l,d){return o+ei(l,d)},Bp=function(o,l,d){return o+Math.pow(d-l,2)},fn=function(o){return Math.sqrt(o)},Rs=function(o,l,d){return Math.max(o,ei(l,d))},nr=function(o,l,d,f,p){for(var g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Pv,y=f,w=0;w<o;w++)y=p(y,l(w),d(w));return g(y)},ci={euclidean:function(o,l,d){return o>=2?nr(o,l,d,0,Bp,fn):nr(o,l,d,0,Nv)},squaredEuclidean:function(o,l,d){return nr(o,l,d,0,Bp)},manhattan:function(o,l,d){return nr(o,l,d,0,Nv)},max:function(o,l,d){return nr(o,l,d,-1/0,Rs)}};function Mi(c,o,l,d,f,p){var g;return g=$e(c)?c:ci[c]||ci.euclidean,0===o&&$e(c)?g(f,p):g(o,l,d,f,p)}ci["squared-euclidean"]=ci.squaredEuclidean,ci.squaredeuclidean=ci.squaredEuclidean;var gd=yi({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),us=function(o){return gd(o)},xo=function(o,l,d,f,p){var y="kMedoids"!==p?function(E){return d[E]}:function(E){return f[E](d)};return Mi(o,f.length,y,function(M){return f[M](l)},d,l)},Yt=function(o,l,d){for(var f=d.length,p=new Array(f),g=new Array(f),y=new Array(l),_=null,b=0;b<f;b++)p[b]=o.min(d[b]).value,g[b]=o.max(d[b]).value;for(var w=0;w<l;w++){_=[];for(var E=0;E<f;E++)_[E]=Math.random()*(g[E]-p[E])+p[E];y[w]=_}return y},In=function(o,l,d,f,p){for(var g=1/0,y=0,_=0;_<l.length;_++){var b=xo(d,o,l[_],f,p);b<g&&(g=b,y=_)}return y},qr=function(o,l,d){for(var f=[],p=null,g=0;g<l.length;g++)d[(p=l[g]).id()]===o&&f.push(p);return f},Lo=function(o,l,d){return Math.abs(l-o)<=d},sc=function(o,l,d){for(var f=0;f<o.length;f++)for(var p=0;p<o[f].length;p++)if(Math.abs(o[f][p]-l[f][p])>d)return!1;return!0},Ji=function(o,l,d){for(var f=0;f<d;f++)if(o===l[f])return!0;return!1},oc=function(o,l){var d=new Array(l);if(o.length<50)for(var f=0;f<l;f++){for(var p=o[Math.floor(Math.random()*o.length)];Ji(p,d,f);)p=o[Math.floor(Math.random()*o.length)];d[f]=p}else for(var g=0;g<l;g++)d[g]=o[Math.floor(Math.random()*o.length)];return d},ti=function(o,l,d){for(var f=0,p=0;p<l.length;p++)f+=xo("manhattan",l[p],o,d,"kMedoids");return f},Pn=function(o,l,d,f,p){for(var g,y,_=0;_<l.length;_++)for(var b=0;b<o.length;b++)f[_][b]=Math.pow(d[_][b],p.m);for(var w=0;w<o.length;w++)for(var E=0;E<p.attributes.length;E++){g=0,y=0;for(var M=0;M<l.length;M++)g+=f[M][w]*p.attributes[E](l[M]),y+=f[M][w];o[w][E]=g/y}},Vp=function(o,l,d,f,p){for(var g=0;g<o.length;g++)l[g]=o[g].slice();for(var y,_,b,w=2/(p.m-1),E=0;E<d.length;E++)for(var M=0;M<f.length;M++){y=0;for(var R=0;R<d.length;R++)_=xo(p.distance,f[M],d[E],p.attributes,"cmeans"),b=xo(p.distance,f[M],d[R],p.attributes,"cmeans"),y+=Math.pow(_/b,w);o[M][E]=1/y}},Hp=function(o){var p,g,y,_,b,l=this.cy(),d=this.nodes(),f=us(o);_=new Array(d.length);for(var w=0;w<d.length;w++)_[w]=new Array(f.k);y=new Array(d.length);for(var E=0;E<d.length;E++)y[E]=new Array(f.k);for(var M=0;M<d.length;M++){for(var R=0,P=0;P<f.k;P++)y[M][P]=Math.random(),R+=y[M][P];for(var $=0;$<f.k;$++)y[M][$]=y[M][$]/R}g=new Array(f.k);for(var K=0;K<f.k;K++)g[K]=new Array(f.attributes.length);b=new Array(d.length);for(var J=0;J<d.length;J++)b[J]=new Array(f.k);for(var ne=!0,re=0;ne&&re<f.maxIterations;)ne=!1,Pn(g,d,y,b,f),Vp(y,_,g,d,f),sc(y,_,f.sensitivityThreshold)||(ne=!0),re++;return p=function(o,l,d,f){for(var p=new Array(d.k),g=0;g<p.length;g++)p[g]=[];for(var y,_,b=0;b<l.length;b++){y=-1/0,_=-1;for(var w=0;w<l[0].length;w++)l[b][w]>y&&(y=l[b][w],_=w);p[_].push(o[b])}for(var E=0;E<p.length;E++)p[E]=f.collection(p[E]);return p}(d,y,f,l),{clusters:p,degreeOfMembership:y}},Zc={kMeans:function(o){var _,l=this.cy(),d=this.nodes(),f=null,p=us(o),g=new Array(p.k),y={};_=p.testMode?"number"==typeof p.testCentroids?Yt(d,p.k,p.attributes):"object"===U(p.testCentroids)?p.testCentroids:Yt(d,p.k,p.attributes):Yt(d,p.k,p.attributes);for(var b=!0,w=0;b&&w<p.maxIterations;){for(var E=0;E<d.length;E++)y[(f=d[E]).id()]=In(f,_,p.distance,p.attributes,"kMeans");b=!1;for(var M=0;M<p.k;M++){var R=qr(M,d,y);if(0!==R.length){for(var P=p.attributes.length,$=_[M],K=new Array(P),J=new Array(P),ne=0;ne<P;ne++){J[ne]=0;for(var re=0;re<R.length;re++)J[ne]+=p.attributes[ne](f=R[re]);K[ne]=J[ne]/R.length,Lo(K[ne],$[ne],p.sensitivityThreshold)||(b=!0)}_[M]=K,g[M]=l.collection(R)}}w++}return g},kMedoids:function(o){var y,b,l=this.cy(),d=this.nodes(),f=null,p=us(o),g=new Array(p.k),_={},w=new Array(p.k);p.testMode?"number"==typeof p.testCentroids||(y="object"===U(p.testCentroids)?p.testCentroids:oc(d,p.k)):y=oc(d,p.k);for(var E=!0,M=0;E&&M<p.maxIterations;){for(var R=0;R<d.length;R++)_[(f=d[R]).id()]=In(f,y,p.distance,p.attributes,"kMedoids");E=!1;for(var P=0;P<y.length;P++){var $=qr(P,d,_);if(0!==$.length){w[P]=ti(y[P],$,p.attributes);for(var K=0;K<$.length;K++)(b=ti($[K],$,p.attributes))<w[P]&&(w[P]=b,y[P]=$[K],E=!0);g[P]=l.collection($)}}M++}return g},fuzzyCMeans:Hp,fcm:Hp},es=yi({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),vd={single:"min",complete:"max"},Fo=function(o,l,d,f,p){for(var _,g=0,y=1/0,b=p.attributes,w=function(he,ke){return Mi(p.distance,b.length,function(Te){return b[Te](he)},function(Te){return b[Te](ke)},he,ke)},E=0;E<o.length;E++){var M=o[E].key,R=d[M][f[M]];R<y&&(g=M,y=R)}if("threshold"===p.mode&&y>=p.threshold||"dendrogram"===p.mode&&1===o.length)return!1;var K,P=l[g],$=l[f[g]];K="dendrogram"===p.mode?{left:P,right:$,key:P.key}:{value:P.value.concat($.value),key:P.key},o[P.index]=K,o.splice($.index,1),l[P.key]=K;for(var J=0;J<o.length;J++){var ne=o[J];P.key===ne.key?_=1/0:"min"===p.linkage?(_=d[P.key][ne.key],d[P.key][ne.key]>d[$.key][ne.key]&&(_=d[$.key][ne.key])):"max"===p.linkage?(_=d[P.key][ne.key],d[P.key][ne.key]<d[$.key][ne.key]&&(_=d[$.key][ne.key])):_="mean"===p.linkage?(d[P.key][ne.key]*P.size+d[$.key][ne.key]*$.size)/(P.size+$.size):"dendrogram"===p.mode?w(ne.value,P.value):w(ne.value[0],P.value[0]),d[P.key][ne.key]=d[ne.key][P.key]=_}for(var re=0;re<o.length;re++){var ue=o[re].key;if(f[ue]===P.key||f[ue]===$.key){for(var Ce=ue,Se=0;Se<o.length;Se++){var de=o[Se].key;d[ue][de]<d[ue][Ce]&&(Ce=de)}f[ue]=Ce}o[re].index=re}return P.key=$.key=P.index=$.index=null,!0},yl=function c(o,l,d){o&&(o.value?l.push(o.value):(o.left&&c(o.left,l),o.right&&c(o.right,l)))},Lv=function c(o,l){if(!o)return"";if(o.left&&o.right){var d=c(o.left,l),f=c(o.right,l),p=l.add({group:"nodes",data:{id:d+","+f}});return l.add({group:"edges",data:{source:d,target:p.id()}}),l.add({group:"edges",data:{source:f,target:p.id()}}),p.id()}return o.value?o.value.id():void 0},Fr=function c(o,l,d){if(!o)return[];var f=[],p=[],g=[];return 0===l?(o.left&&yl(o.left,f),o.right&&yl(o.right,p),g=f.concat(p),[d.collection(g)]):1===l?o.value?[d.collection(o.value)]:(o.left&&yl(o.left,f),o.right&&yl(o.right,p),[d.collection(f),d.collection(p)]):o.value?[d.collection(o.value)]:(o.left&&(f=c(o.left,l-1,d)),o.right&&(p=c(o.right,l-1,d)),f.concat(p))},pw=function(o){for(var l=this.cy(),d=this.nodes(),f=function(o){var l=es(o),d=vd[l.linkage];return null!=d&&(l.linkage=d),l}(o),p=f.attributes,g=function(re,ue){return Mi(f.distance,p.length,function(Ce){return p[Ce](re)},function(Ce){return p[Ce](ue)},re,ue)},y=[],_=[],b=[],w=[],E=0;E<d.length;E++){var M={value:"dendrogram"===f.mode?d[E]:[d[E]],key:E,index:E};y[E]=M,w[E]=M,_[E]=[],b[E]=0}for(var R=0;R<y.length;R++)for(var P=0;P<=R;P++){var $;$="dendrogram"===f.mode?R===P?1/0:g(y[R].value,y[P].value):R===P?1/0:g(y[R].value[0],y[P].value[0]),_[R][P]=$,_[P][R]=$,$<_[R][b[R]]&&(b[R]=P)}for(var K=Fo(y,w,_,b,f);K;)K=Fo(y,w,_,b,f);var J;return"dendrogram"===f.mode?(J=Fr(y[0],f.dendrogramDepth,l),f.addDendrogram&&Lv(y[0],l)):(J=new Array(y.length),y.forEach(function(ne,re){ne.key=ne.index=null,J[re]=l.collection(ne.value)})),J},zp={hierarchicalClustering:pw,hca:pw},Fv=yi({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),Gh=function(o,l,d,f){var p=function(y,_){return f[_](y)};return-Mi(o,f.length,function(g){return p(l,g)},function(g){return p(d,g)},l,d)},gw=function(o,l,d){for(var f=[],p=0;p<o;p++){for(var g=-1,y=-1/0,_=0;_<d.length;_++){var b=d[_];l[p*o+b]>y&&(g=b,y=l[p*o+b])}g>0&&f.push(g)}for(var w=0;w<d.length;w++)f[d[w]]=d[w];return f},Eo=function(o){for(var l=this.cy(),d=this.nodes(),f=function(o){var l=o.damping,d=o.preference;.5<=l&&l<1||Sr("Damping must range on [0.5, 1).  Got: ".concat(l));var f=["median","mean","min","max"];return f.some(function(p){return p===d})||pe(d)||Sr("Preference must be one of [".concat(f.map(function(p){return"'".concat(p,"'")}).join(", "),"] or a number.  Got: ").concat(d)),Fv(o)}(o),p={},g=0;g<d.length;g++)p[d[g].id()]=g;var y,_,b,w,E,M,he;_=(y=d.length)*y,b=new Array(_);for(var R=0;R<_;R++)b[R]=-1/0;for(var P=0;P<y;P++)for(var $=0;$<y;$++)P!==$&&(b[P*y+$]=Gh(f.distance,d[P],d[$],f.attributes));w=function(o,l){var d;return d="median"===l?function(o){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.length,p=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],g=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];!(arguments.length>3&&void 0!==arguments[3])||arguments[3]?o=o.slice(l,d):(d<o.length&&o.splice(d,o.length-d),l>0&&o.splice(0,l));for(var y=0,_=o.length-1;_>=0;_--)g?isFinite(o[_])||(o[_]=-1/0,y++):o.splice(_,1);p&&o.sort(function(M,R){return M-R});var w=o.length,E=Math.floor(w/2);return w%2!=0?o[E+1+y]:(o[E-1+y]+o[E+y])/2}(o):"mean"===l?function(o){for(var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.length,f=0,p=0,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;g<d;g++){var y=o[g];isFinite(y)&&(f+=y,p++)}return f/p}(o):"min"===l?function(o){for(var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.length,f=1/0,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;p<d;p++){var g=o[p];isFinite(g)&&(f=Math.min(g,f))}return f}(o):"max"===l?function(o){for(var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.length,f=-1/0,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;p<d;p++){var g=o[p];isFinite(g)&&(f=Math.max(g,f))}return f}(o):l,d}(b,f.preference);for(var K=0;K<y;K++)b[K*y+K]=w;E=new Array(_);for(var J=0;J<_;J++)E[J]=0;M=new Array(_);for(var ne=0;ne<_;ne++)M[ne]=0;for(var re=new Array(y),ue=new Array(y),Ce=new Array(y),Se=0;Se<y;Se++)re[Se]=0,ue[Se]=0,Ce[Se]=0;for(var de=new Array(y*f.minIterations),Ee=0;Ee<de.length;Ee++)de[Ee]=0;for(he=0;he<f.maxIterations;he++){for(var ke=0;ke<y;ke++){for(var Te=-1/0,ge=-1/0,Fe=-1,Me=0,Xe=0;Xe<y;Xe++)re[Xe]=E[ke*y+Xe],(Me=M[ke*y+Xe]+b[ke*y+Xe])>=Te?(ge=Te,Te=Me,Fe=Xe):Me>ge&&(ge=Me);for(var Ve=0;Ve<y;Ve++)E[ke*y+Ve]=(1-f.damping)*(b[ke*y+Ve]-Te)+f.damping*re[Ve];E[ke*y+Fe]=(1-f.damping)*(b[ke*y+Fe]-ge)+f.damping*re[Fe]}for(var je=0;je<y;je++){for(var Qe=0,it=0;it<y;it++)re[it]=M[it*y+je],ue[it]=Math.max(0,E[it*y+je]),Qe+=ue[it];Qe-=ue[je],ue[je]=E[je*y+je],Qe+=ue[je];for(var ct=0;ct<y;ct++)M[ct*y+je]=(1-f.damping)*Math.min(0,Qe-ue[ct])+f.damping*re[ct];M[je*y+je]=(1-f.damping)*(Qe-ue[je])+f.damping*re[je]}for(var rt=0,tt=0;tt<y;tt++){var wt=M[tt*y+tt]+E[tt*y+tt]>0?1:0;de[he%f.minIterations*y+tt]=wt,rt+=wt}if(rt>0&&(he>=f.minIterations-1||he==f.maxIterations-1)){for(var Dt=0,yt=0;yt<y;yt++){Ce[yt]=0;for(var mt=0;mt<f.minIterations;mt++)Ce[yt]+=de[mt*y+yt];(0===Ce[yt]||Ce[yt]===f.minIterations)&&Dt++}if(Dt===y)break}}for(var Ze=function(o,l,d){for(var f=[],p=0;p<o;p++)l[p*o+p]+d[p*o+p]>0&&f.push(p);return f}(y,E,M),xt=function(o,l,d){for(var f=gw(o,l,d),p=0;p<d.length;p++){for(var g=[],y=0;y<f.length;y++)f[y]===d[p]&&g.push(y);for(var _=-1,b=-1/0,w=0;w<g.length;w++){for(var E=0,M=0;M<g.length;M++)E+=l[g[M]*o+g[w]];E>b&&(_=w,b=E)}d[p]=g[_]}return gw(o,l,d)}(y,b,Ze),Mt={},Lt=0;Lt<Ze.length;Lt++)Mt[Ze[Lt]]=[];for(var Vt=0;Vt<d.length;Vt++){var kn=xt[p[d[Vt].id()]];null!=kn&&Mt[kn].push(d[Vt])}for(var Ht=new Array(Ze.length),Ft=0;Ft<Ze.length;Ft++)Ht[Ft]=l.collection(Mt[Ze[Ft]]);return Ht},jp={affinityPropagation:Eo,ap:Eo},yd=yi({root:void 0,directed:!1}),$h={hierholzer:function(o){if(!Ie(o)){var l=arguments;o={root:l[0],directed:l[1]}}var _,b,w,d=yd(o),f=d.root,p=d.directed,g=this,y=!1;f&&(w=ye(f)?this.filter(f)[0].id():f[0].id());var E={},M={};g.forEach(p?function(ne){var re=ne.id();if(ne.isNode()){var ue=ne.indegree(!0),Ce=ne.outdegree(!0),Se=ue-Ce,de=Ce-ue;1==Se?_?y=!0:_=re:1==de?b?y=!0:b=re:(de>1||Se>1)&&(y=!0),E[re]=[],ne.outgoers().forEach(function(Ee){Ee.isEdge()&&E[re].push(Ee.id())})}else M[re]=[void 0,ne.target().id()]}:function(ne){var re=ne.id();ne.isNode()?(ne.degree(!0)%2&&(_?b?y=!0:b=re:_=re),E[re]=[],ne.connectedEdges().forEach(function(Ce){return E[re].push(Ce.id())})):M[re]=[ne.source().id(),ne.target().id()]});var R={found:!1,trail:void 0};if(y)return R;if(b&&_)if(p){if(w&&b!=w)return R;w=b}else{if(w&&b!=w&&_!=w)return R;w||(w=b)}else w||(w=g[0].id());var P=function(re){for(var Se,de,Ee,ue=re,Ce=[re];E[ue].length;)Se=E[ue].shift(),de=M[Se][0],ue!=(Ee=M[Se][1])?(E[Ee]=E[Ee].filter(function(he){return he!=Se}),ue=Ee):!p&&ue!=de&&(E[de]=E[de].filter(function(he){return he!=Se}),ue=de),Ce.unshift(Se),Ce.unshift(ue);return Ce},$=[],K=[];for(K=P(w);1!=K.length;)0==E[K[0]].length?($.unshift(g.getElementById(K.shift())),$.unshift(g.getElementById(K.shift()))):K=P(K.shift()).concat(K);for(var J in $.unshift(g.getElementById(K.shift())),E)if(E[J].length)return R;return R.found=!0,R.trail=this.spawn($,!0),R}},Ps=function(){var o=this,l={},d=0,f=0,p=[],g=[],y={},b=function E(M,R,P){M===P&&(f+=1),l[R]={id:d,low:d++,cutVertex:!1};var K,J,ne,re,$=o.getElementById(R).connectedEdges().intersection(o);0===$.size()?p.push(o.spawn(o.getElementById(R))):$.forEach(function(ue){K=ue.source().id(),J=ue.target().id(),(ne=K===R?J:K)!==P&&(re=ue.id(),y[re]||(y[re]=!0,g.push({x:R,y:ne,edge:ue})),ne in l?l[R].low=Math.min(l[R].low,l[ne].id):(E(M,ne,R),l[R].low=Math.min(l[R].low,l[ne].low),l[R].id<=l[ne].low&&(l[R].cutVertex=!0,function(M,R){for(var P=g.length-1,$=[],K=o.spawn();g[P].x!=M||g[P].y!=R;)$.push(g.pop().edge),P--;$.push(g.pop().edge),$.forEach(function(J){var ne=J.connectedNodes().intersection(o);K.merge(J),ne.forEach(function(re){var ue=re.id(),Ce=re.connectedEdges().intersection(o);K.merge(re),K.merge(l[ue].cutVertex?Ce.filter(function(Se){return Se.isLoop()}):Ce)})}),p.push(K)}(R,ne))))})};o.forEach(function(E){if(E.isNode()){var M=E.id();M in l||(f=0,b(M,M),l[M].cutVertex=f>1)}});var w=Object.keys(l).filter(function(E){return l[E].cutVertex}).map(function(E){return o.getElementById(E)});return{cut:o.spawn(w),components:p}},Up=function(){var o=this,l={},d=0,f=[],p=[],g=o.spawn(o),y=function _(b){if(p.push(b),l[b]={index:d,low:d++,explored:!1},o.getElementById(b).connectedEdges().intersection(o).forEach(function($){var K=$.target().id();K!==b&&(K in l||_(K),l[K].explored||(l[b].low=Math.min(l[b].low,l[K].low)))}),l[b].index===l[b].low){for(var E=o.spawn();;){var M=p.pop();if(E.merge(o.getElementById(M)),l[M].low=l[b].index,l[M].explored=!0,M===b)break}var R=E.edgesWith(E),P=E.merge(R);f.push(P),g=g.difference(P)}};return o.forEach(function(_){if(_.isNode()){var b=_.id();b in l||y(b)}}),{cut:g,components:f}},Bv={};[Ae,Ue,bt,dt,Bt,gn,qt,hd,Kc,Ks,kv,Rv,Zc,zp,jp,$h,{hopcroftTarjanBiconnected:Ps,htbc:Ps,htb:Ps,hopcroftTarjanBiconnectedComponents:Ps},{tarjanStronglyConnected:Up,tsc:Up,tscc:Up,tarjanStronglyConnectedComponents:Up}].forEach(function(c){Zt(Bv,c)});var bl=function c(o){if(!(this instanceof c))return new c(o);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof o&&o.call(this,this.fulfill.bind(this),this.reject.bind(this))};bl.prototype={fulfill:function(o){return ww(this,1,"fulfillValue",o)},reject:function(o){return ww(this,2,"rejectReason",o)},then:function(o,l){var d=this,f=new bl;return d.onFulfilled.push(Dw(o,f,"fulfill")),d.onRejected.push(Dw(l,f,"reject")),xw(d),f.proxy}};var ww=function(o,l,d,f){return 0===o.state&&(o.state=l,o[d]=f,xw(o)),o},xw=function(o){1===o.state?Ew(o,"onFulfilled",o.fulfillValue):2===o.state&&Ew(o,"onRejected",o.rejectReason)},Ew=function(o,l,d){if(0!==o[l].length){var f=o[l];o[l]=[];var p=function(){for(var y=0;y<f.length;y++)f[y](d)};"function"==typeof setImmediate?setImmediate(p):setTimeout(p,0)}},Dw=function(o,l,d){return function(f){if("function"!=typeof o)l[d].call(l,f);else{var p;try{p=o(f)}catch(g){return void l.reject(g)}Y1(l,p)}}},Y1=function c(o,l){if(o!==l&&o.proxy!==l){var d;if("object"===U(l)&&null!==l||"function"==typeof l)try{d=l.then}catch(p){return void o.reject(p)}if("function"!=typeof d)o.fulfill(l);else{var f=!1;try{d.call(l,function(p){f||(f=!0,p===l?o.reject(new TypeError("circular thenable chain")):c(o,p))},function(p){f||(f=!0,o.reject(p))})}catch(p){f||o.reject(p)}}}else o.reject(new TypeError("cannot resolve promise with itself"))};bl.all=function(c){return new bl(function(o,l){for(var d=new Array(c.length),f=0,p=function(_,b){d[_]=b,++f===c.length&&o(d)},g=0;g<c.length;g++)!function(y){var _=c[y];null!=_&&null!=_.then?_.then(function(E){p(y,E)},function(E){l(E)}):p(y,_)}(g)})},bl.resolve=function(c){return new bl(function(o,l){o(c)})},bl.reject=function(c){return new bl(function(o,l){l(c)})};var bd=typeof Promise<"u"?Promise:bl,Vv=function(o,l,d){var f=pt(o),p=!f,g=this._private=Zt({duration:1e3},l,d);if(g.target=o,g.style=g.style||g.css,g.started=!1,g.playing=!1,g.hooked=!1,g.applying=!1,g.progress=0,g.completes=[],g.frames=[],g.complete&&$e(g.complete)&&g.completes.push(g.complete),p){var y=o.position();g.startPosition=g.startPosition||{x:y.x,y:y.y},g.startStyle=g.startStyle||o.cy().style().getAnimationStartStyle(o,g.style)}if(f){var _=o.pan();g.startPan={x:_.x,y:_.y},g.startZoom=o.zoom()}this.length=1,this[0]=this},eu=Vv.prototype;Zt(eu,{instanceString:function(){return"animation"},hook:function(){var o=this._private;if(!o.hooked){var d=o.target._private.animation;(o.queue?d.queue:d.current).push(this),Oe(o.target)&&o.target.cy().addToAnimationPool(o.target),o.hooked=!0}return this},play:function(){var o=this._private;return 1===o.progress&&(o.progress=0),o.playing=!0,o.started=!1,o.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var o=this._private;return o.applying=!0,o.started=!1,o.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var o=this._private;return o.playing=!1,o.started=!1,this},stop:function(){var o=this._private;return o.playing=!1,o.started=!1,o.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(o){var l=this._private;return void 0===o?l.progress*l.duration:this.progress(o/l.duration)},progress:function(o){var l=this._private,d=l.playing;return void 0===o?l.progress:(d&&this.pause(),l.progress=o,l.started=!1,d&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var o=this._private,l=o.playing;l&&this.pause(),o.progress=1-o.progress,o.started=!1;var d=function(b,w){var E=o[b];null!=E&&(o[b]=o[w],o[w]=E)};if(d("zoom","startZoom"),d("pan","startPan"),d("position","startPosition"),o.style)for(var f=0;f<o.style.length;f++){var p=o.style[f],g=p.name,y=o.startStyle[g];o.startStyle[g]=p,o.style[f]=y}return l&&this.play(),this},promise:function(o){var d,l=this._private;return d="frame"===o?l.frames:l.completes,new bd(function(f,p){d.push(function(){f()})})}}),eu.complete=eu.completed,eu.run=eu.play,eu.running=eu.playing;var zv={data:function(o){return o=Zt({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(f){},beforeSet:function(f,p){},onSet:function(f){},canSet:function(f){return!0}},o),function(f,p){var g=o,y=this,_=void 0!==y.length,b=_?y:[y],w=_?y[0]:y;if(ye(f)){var R,M=-1!==f.indexOf(".")&&L.default(f);if(g.allowGetting&&void 0===p)return w&&(g.beforeGet(w),R=M&&void 0===w._private[g.field][f]?G.default(w._private[g.field],M):w._private[g.field][f]),R;if(g.allowSetting&&void 0!==p&&!g.immutableKeys[f]){var $=Y({},f,p);g.beforeSet(y,$);for(var K=0,J=b.length;K<J;K++){var ne=b[K];g.canSet(ne)&&(M&&void 0===w._private[g.field][f]?z.default(ne._private[g.field],M,p):ne._private[g.field][f]=p)}g.updateStyle&&y.updateStyle(),g.onSet(y),g.settingTriggersEvent&&y[g.triggerFnName](g.settingEvent)}}else if(g.allowSetting&&Ie(f)){var ue,Ce,re=f,Se=Object.keys(re);g.beforeSet(y,re);for(var de=0;de<Se.length;de++)if(Ce=re[ue=Se[de]],!g.immutableKeys[ue])for(var he=0;he<b.length;he++){var ke=b[he];g.canSet(ke)&&(ke._private[g.field][ue]=Ce)}g.updateStyle&&y.updateStyle(),g.onSet(y),g.settingTriggersEvent&&y[g.triggerFnName](g.settingEvent)}else if(g.allowBinding&&$e(f))y.on(g.bindingEvent,f);else if(g.allowGetting&&void 0===f){var ge;return w&&(g.beforeGet(w),ge=w._private[g.field]),ge}return y}},removeData:function(o){return o=Zt({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},o),function(f){var p=o,g=this,_=void 0!==g.length?g:[g];if(ye(f)){for(var b=f.split(/\s+/),w=b.length,E=0;E<w;E++){var M=b[E];if(!We(M)&&!p.immutableKeys[M])for(var P=0,$=_.length;P<$;P++)_[P]._private[p.field][M]=void 0}p.triggerEvent&&g[p.triggerFnName](p.event)}else if(void 0===f){for(var K=0,J=_.length;K<J;K++)for(var ne=_[K]._private[p.field],re=Object.keys(ne),ue=0;ue<re.length;ue++){var Ce=re[ue];!p.immutableKeys[Ce]&&(ne[Ce]=void 0)}p.triggerEvent&&g[p.triggerFnName](p.event)}return g}}},X1={eventAliasesOn:function(o){var l=o;l.addListener=l.listen=l.bind=l.on,l.unlisten=l.unbind=l.off=l.removeListener,l.trigger=l.emit,l.pon=l.promiseOn=function(d,f){var p=this,g=Array.prototype.slice.call(arguments,0);return new bd(function(y,_){var w=g.concat([function(R){p.off.apply(p,E),y(R)}]),E=w.concat([]);p.on.apply(p,w)})}}},Dr={};[{animated:function(){return function(){var l=this,f=void 0!==l.length?l:[l];if(!(this._private.cy||this).styleEnabled())return!1;var g=f[0];return g?g._private.animation.current.length>0:void 0}},clearQueue:function(){return function(){var l=this,f=void 0!==l.length?l:[l];if(!(this._private.cy||this).styleEnabled())return this;for(var g=0;g<f.length;g++)f[g]._private.animation.queue=[];return this}},delay:function(){return function(l,d){return(this._private.cy||this).styleEnabled()?this.animate({delay:l,duration:l,complete:d}):this}},delayAnimation:function(){return function(l,d){return(this._private.cy||this).styleEnabled()?this.animation({delay:l,duration:l,complete:d}):this}},animation:function(){return function(l,d){var f=this,p=void 0!==f.length,g=p?f:[f],y=this._private.cy||this,_=!p,b=!_;if(!y.styleEnabled())return this;var w=y.style();if(l=Zt({},l,d),0===Object.keys(l).length)return new Vv(g[0],l);switch(void 0===l.duration&&(l.duration=400),l.duration){case"slow":l.duration=600;break;case"fast":l.duration=200}if(b&&(l.style=w.getPropsList(l.style||l.css),l.css=void 0),b&&null!=l.renderedPosition){var M=l.renderedPosition,R=y.pan(),P=y.zoom();l.position=qn(M,P,R)}if(_&&null!=l.panBy){var $=l.panBy,K=y.pan();l.pan={x:K.x+$.x,y:K.y+$.y}}var J=l.center||l.centre;if(_&&null!=J){var ne=y.getCenterPan(J.eles,l.zoom);null!=ne&&(l.pan=ne)}if(_&&null!=l.fit){var re=l.fit,ue=y.getFitViewport(re.eles||re.boundingBox,re.padding);null!=ue&&(l.pan=ue.pan,l.zoom=ue.zoom)}if(_&&Ie(l.zoom)){var Ce=y.getZoomedViewport(l.zoom);null!=Ce?(Ce.zoomed&&(l.zoom=Ce.zoom),Ce.panned&&(l.pan=Ce.pan)):l.zoom=null}return new Vv(g[0],l)}},animate:function(){return function(l,d){var f=this,g=void 0!==f.length?f:[f];if(!(this._private.cy||this).styleEnabled())return this;d&&(l=Zt({},l,d));for(var _=0;_<g.length;_++){var b=g[_],w=b.animated()&&(void 0===l.queue||l.queue);b.animation(l,w?{queue:!0}:void 0).play()}return this}},stop:function(){return function(l,d){var f=this,g=void 0!==f.length?f:[f],y=this._private.cy||this;if(!y.styleEnabled())return this;for(var _=0;_<g.length;_++){for(var w=g[_]._private,E=w.animation.current,M=0;M<E.length;M++)d&&(E[M]._private.duration=0);l&&(w.animation.queue=[]),d||(w.animation.current=[])}return y.notify("draw"),this}}},zv,X1].forEach(function(c){Zt(Dr,c)});var K1={animate:Dr.animate(),animation:Dr.animation(),animated:Dr.animated(),clearQueue:Dr.clearQueue(),delay:Dr.delay(),delayAnimation:Dr.delayAnimation(),stop:Dr.stop()},sa={classes:function(o){var l=this;if(void 0===o){var d=[];return l[0]._private.classes.forEach(function(P){return d.push(P)}),d}He(o)||(o=(o||"").match(/\S+/g)||[]);for(var f=[],p=new ka(o),g=0;g<l.length;g++){for(var y=l[g],_=y._private,b=_.classes,w=!1,E=0;E<o.length;E++)if(!b.has(o[E])){w=!0;break}w||(w=b.size!==o.length),w&&(_.classes=p,f.push(y))}return f.length>0&&this.spawn(f).updateStyle().emit("class"),l},addClass:function(o){return this.toggleClass(o,!0)},hasClass:function(o){var l=this[0];return null!=l&&l._private.classes.has(o)},toggleClass:function(o,l){He(o)||(o=o.match(/\S+/g)||[]);for(var d=this,f=void 0===l,p=[],g=0,y=d.length;g<y;g++)for(var _=d[g],b=_._private.classes,w=!1,E=0;E<o.length;E++){var M=o[E],R=b.has(M),P=!1;l||f&&!R?(b.add(M),P=!0):(!l||f&&R)&&(b.delete(M),P=!0),!w&&P&&(p.push(_),w=!0)}return p.length>0&&this.spawn(p).updateStyle().emit("class"),d},removeClass:function(o){return this.toggleClass(o,!1)},flashClass:function(o,l){var d=this;if(null==l)l=250;else if(0===l)return d;return d.addClass(o),setTimeout(function(){d.removeClass(o)},l),d}};sa.className=sa.classNames=sa.classes;var lr={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:"\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'",number:hn,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};lr.variable="(?:[\\w-.]|(?:\\\\"+lr.metaChar+"))+",lr.className="(?:[\\w-]|(?:\\\\"+lr.metaChar+"))+",lr.value=lr.string+"|"+lr.number,lr.id=lr.variable,function(){var c,o,l;for(c=lr.comparatorOp.split("|"),l=0;l<c.length;l++)lr.comparatorOp+="|@"+(o=c[l]);for(c=lr.comparatorOp.split("|"),l=0;l<c.length;l++)!((o=c[l]).indexOf("!")>=0)&&"="!==o&&(lr.comparatorOp+="|\\!"+o)}();var Gp=[{selector:":selected",matches:function(o){return o.selected()}},{selector:":unselected",matches:function(o){return!o.selected()}},{selector:":selectable",matches:function(o){return o.selectable()}},{selector:":unselectable",matches:function(o){return!o.selectable()}},{selector:":locked",matches:function(o){return o.locked()}},{selector:":unlocked",matches:function(o){return!o.locked()}},{selector:":visible",matches:function(o){return o.visible()}},{selector:":hidden",matches:function(o){return!o.visible()}},{selector:":transparent",matches:function(o){return o.transparent()}},{selector:":grabbed",matches:function(o){return o.grabbed()}},{selector:":free",matches:function(o){return!o.grabbed()}},{selector:":removed",matches:function(o){return o.removed()}},{selector:":inside",matches:function(o){return!o.removed()}},{selector:":grabbable",matches:function(o){return o.grabbable()}},{selector:":ungrabbable",matches:function(o){return!o.grabbable()}},{selector:":animated",matches:function(o){return o.animated()}},{selector:":unanimated",matches:function(o){return!o.animated()}},{selector:":parent",matches:function(o){return o.isParent()}},{selector:":childless",matches:function(o){return o.isChildless()}},{selector:":child",matches:function(o){return o.isChild()}},{selector:":orphan",matches:function(o){return o.isOrphan()}},{selector:":nonorphan",matches:function(o){return o.isChild()}},{selector:":compound",matches:function(o){return o.isNode()?o.isParent():o.source().isParent()||o.target().isParent()}},{selector:":loop",matches:function(o){return o.isLoop()}},{selector:":simple",matches:function(o){return o.isSimple()}},{selector:":active",matches:function(o){return o.active()}},{selector:":inactive",matches:function(o){return!o.active()}},{selector:":backgrounding",matches:function(o){return o.backgrounding()}},{selector:":nonbackgrounding",matches:function(o){return!o.backgrounding()}}].sort(function(c,o){return function(o,l){return-1*As(o,l)}(c.selector,o.selector)}),Cw=function(){for(var o,c={},l=0;l<Gp.length;l++)c[(o=Gp[l]).selector]=o.matches;return c}(),Uv="("+Gp.map(function(c){return c.selector}).join("|")+")",tu=function(o){return o.replace(new RegExp("\\\\("+lr.metaChar+")","g"),function(l,d){return d})},oa=function(o,l,d){o[o.length-1]=d},$p=[{name:"group",query:!0,regex:"("+lr.group+")",populate:function(o,l,d){var p=se(d,1)[0];l.checks.push({type:0,value:"*"===p?p:p+"s"})}},{name:"state",query:!0,regex:Uv,populate:function(o,l,d){var f=se(d,1);l.checks.push({type:7,value:f[0]})}},{name:"id",query:!0,regex:"\\#("+lr.id+")",populate:function(o,l,d){var f=se(d,1);l.checks.push({type:8,value:tu(f[0])})}},{name:"className",query:!0,regex:"\\.("+lr.className+")",populate:function(o,l,d){var f=se(d,1);l.checks.push({type:9,value:tu(f[0])})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+lr.variable+")\\s*\\]",populate:function(o,l,d){var f=se(d,1);l.checks.push({type:4,field:tu(f[0])})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+lr.variable+")\\s*("+lr.comparatorOp+")\\s*("+lr.value+")\\s*\\]",populate:function(o,l,d){var f=se(d,3),p=f[0],g=f[1],y=f[2];y=null!=new RegExp("^"+lr.string+"$").exec(y)?y.substring(1,y.length-1):parseFloat(y),l.checks.push({type:3,field:tu(p),operator:g,value:y})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+lr.boolOp+")\\s*("+lr.variable+")\\s*\\]",populate:function(o,l,d){var f=se(d,2),p=f[0];l.checks.push({type:5,field:tu(f[1]),operator:p})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+lr.meta+")\\s*("+lr.comparatorOp+")\\s*("+lr.number+")\\s*\\]\\]",populate:function(o,l,d){var f=se(d,3),g=f[1],y=f[2];l.checks.push({type:6,field:tu(f[0]),operator:g,value:parseFloat(y)})}},{name:"nextQuery",separator:!0,regex:lr.separator,populate:function(o,l){var d=o.currentSubject,f=o.edgeCount,p=o.compoundCount,g=o[o.length-1];return null!=d&&(g.subject=d,o.currentSubject=null),g.edgeCount=f,g.compoundCount=p,o.edgeCount=0,o.compoundCount=0,o[o.length++]={checks:[]}}},{name:"directedEdge",separator:!0,regex:lr.directedEdge,populate:function(o,l){if(null==o.currentSubject){var d={checks:[]},p={checks:[]};return d.checks.push({type:11,source:l,target:p}),oa(o,0,d),o.edgeCount++,p}var g={checks:[]},_={checks:[]};return g.checks.push({type:12,source:l,target:_}),oa(o,0,g),o.edgeCount++,_}},{name:"undirectedEdge",separator:!0,regex:lr.undirectedEdge,populate:function(o,l){if(null==o.currentSubject){var d={checks:[]},p={checks:[]};return d.checks.push({type:10,nodes:[l,p]}),oa(o,0,d),o.edgeCount++,p}var g={checks:[]},_={checks:[]};return g.checks.push({type:14,node:l,neighbor:_}),oa(o,0,g),_}},{name:"child",separator:!0,regex:lr.child,populate:function(o,l){if(null==o.currentSubject){var d={checks:[]},f={checks:[]};return d.checks.push({type:15,parent:o[o.length-1],child:f}),oa(o,0,d),o.compoundCount++,f}if(o.currentSubject===l){var g={checks:[]},_={checks:[]},b={checks:[]},w={checks:[]},E={checks:[]};return g.checks.push({type:19,left:o[o.length-1],right:_,subject:b}),b.checks=l.checks,l.checks=[{type:20}],E.checks.push({type:20}),_.checks.push({type:17,parent:E,child:w}),oa(o,0,g),o.currentSubject=b,o.compoundCount++,w}var M={checks:[]},R={checks:[]},P=[{type:17,parent:M,child:R}];return M.checks=l.checks,l.checks=P,o.compoundCount++,R}},{name:"descendant",separator:!0,regex:lr.descendant,populate:function(o,l){if(null==o.currentSubject){var d={checks:[]},f={checks:[]};return d.checks.push({type:16,ancestor:o[o.length-1],descendant:f}),oa(o,0,d),o.compoundCount++,f}if(o.currentSubject===l){var g={checks:[]},_={checks:[]},b={checks:[]},w={checks:[]},E={checks:[]};return g.checks.push({type:19,left:o[o.length-1],right:_,subject:b}),b.checks=l.checks,l.checks=[{type:20}],E.checks.push({type:20}),_.checks.push({type:18,ancestor:E,descendant:w}),oa(o,0,g),o.currentSubject=b,o.compoundCount++,w}var M={checks:[]},R={checks:[]},P=[{type:18,ancestor:M,descendant:R}];return M.checks=l.checks,l.checks=P,o.compoundCount++,R}},{name:"subject",modifier:!0,regex:lr.subject,populate:function(o,l){if(null!=o.currentSubject&&o.currentSubject!==l)return ur("Redefinition of subject in selector `"+o.toString()+"`"),!1;o.currentSubject=l;var f=o[o.length-1].checks[0],p=null==f?null:f.type;11===p?f.type=13:10===p&&(f.type=14,f.node=f.nodes[1],f.neighbor=f.nodes[0],f.nodes=null)}}];$p.forEach(function(c){return c.regexObj=new RegExp("^"+c.regex)});var Do=function(o){for(var l,d,f,p=0;p<$p.length;p++){var g=$p[p],y=g.name,_=o.match(g.regexObj);if(null!=_){d=_,l=g,f=y,o=o.substring(_[0].length);break}}return{expr:l,match:d,name:f,remaining:o}},Sw={parse:function(o){var l=this,d=l.inputText=o,f=l[0]={checks:[]};for(l.length=1,d=function(o){var l=o.match(/^\s+/);return l&&(o=o.substring(l[0].length)),o}(d);;){var p=Do(d);if(null==p.expr)return ur("The selector `"+o+"`is invalid"),!1;var g=p.match.slice(1),y=p.expr.populate(l,f,g);if(!1===y)return!1;if(null!=y&&(f=y),(d=p.remaining).match(/^\s*$/))break}var _=l[l.length-1];null!=l.currentSubject&&(_.subject=l.currentSubject),_.edgeCount=l.edgeCount,_.compoundCount=l.compoundCount;for(var b=0;b<l.length;b++){var w=l[b];if(w.compoundCount>0&&w.edgeCount>0)return ur("The selector `"+o+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(w.edgeCount>1)return ur("The selector `"+o+"` is invalid because it uses multiple edge selectors"),!1;1===w.edgeCount&&ur("The selector `"+o+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString:function(){if(null!=this.toStringCache)return this.toStringCache;for(var o=function(w){return w??""},l=function(w){return ye(w)?'"'+w+'"':o(w)},d=function(w){return" "+w+" "},p=function(w,E){return w.checks.reduce(function(M,R,P){return M+(E===w&&0===P?"$":"")+function(w,E){var R=w.value;switch(w.type){case 0:var P=o(R);return P.substring(0,P.length-1);case 3:return"["+w.field+d(o(w.operator))+l(R)+"]";case 5:var ne=w.field;return"["+o(w.operator)+ne+"]";case 4:return"["+w.field+"]";case 6:return"[["+w.field+d(o(w.operator))+l(R)+"]]";case 7:return R;case 8:return"#"+R;case 9:return"."+R;case 17:case 15:return p(w.parent,E)+d(">")+p(w.child,E);case 18:case 16:return p(w.ancestor,E)+" "+p(w.descendant,E);case 19:var Se=p(w.left,E),de=p(w.subject,E),Ee=p(w.right,E);return Se+(Se.length>0?" ":"")+de+Ee;case 20:return""}}(R,E)},"")},g="",y=0;y<this.length;y++){var _=this[y];g+=p(_,_.subject),this.length>1&&y<this.length-1&&(g+=", ")}return this.toStringCache=g,g}},_d=function(o,l,d){var f,_,b,p=ye(o),g=pe(o),y=ye(d),w=!1,E=!1,M=!1;switch(l.indexOf("!")>=0&&(l=l.replace("!",""),E=!0),l.indexOf("@")>=0&&(l=l.replace("@",""),w=!0),(p||y||w)&&(_=p||g?""+o:"",b=""+d),w&&(o=_=_.toLowerCase(),d=b=b.toLowerCase()),l){case"*=":f=_.indexOf(b)>=0;break;case"$=":f=_.indexOf(b,_.length-b.length)>=0;break;case"^=":f=0===_.indexOf(b);break;case"=":f=o===d;break;case">":M=!0,f=o>d;break;case">=":M=!0,f=o>=d;break;case"<":M=!0,f=o<d;break;case"<=":M=!0,f=o<=d;break;default:f=!1}return E&&(null!=o||!M)&&(f=!f),f},Wh=function(o,l){return o.data(l)},rr=[],Br=function(o,l){return o.checks.every(function(d){return rr[d.type](d,l)})};rr[0]=function(c,o){var l=c.value;return"*"===l||l===o.group()},rr[7]=function(c,o){return function(o,l){return Cw[o](l)}(c.value,o)},rr[8]=function(c,o){var l=c.value;return o.id()===l},rr[9]=function(c,o){return o.hasClass(c.value)},rr[6]=function(c,o){var d=c.operator,f=c.value;return _d(function(o,l){return o[l]()}(o,c.field),d,f)},rr[3]=function(c,o){var d=c.operator,f=c.value;return _d(Wh(o,c.field),d,f)},rr[5]=function(c,o){var d=c.operator;return function(o,l){switch(l){case"?":return!!o;case"!":return!o;case"^":return void 0===o}}(Wh(o,c.field),d)},rr[4]=function(c,o){return function(o){return void 0!==o}(Wh(o,c.field))},rr[10]=function(c,o){var l=c.nodes[0],d=c.nodes[1],f=o.source(),p=o.target();return Br(l,f)&&Br(d,p)||Br(d,f)&&Br(l,p)},rr[14]=function(c,o){return Br(c.node,o)&&o.neighborhood().some(function(l){return l.isNode()&&Br(c.neighbor,l)})},rr[11]=function(c,o){return Br(c.source,o.source())&&Br(c.target,o.target())},rr[12]=function(c,o){return Br(c.source,o)&&o.outgoers().some(function(l){return l.isNode()&&Br(c.target,l)})},rr[13]=function(c,o){return Br(c.target,o)&&o.incomers().some(function(l){return l.isNode()&&Br(c.source,l)})},rr[15]=function(c,o){return Br(c.child,o)&&Br(c.parent,o.parent())},rr[17]=function(c,o){return Br(c.parent,o)&&o.children().some(function(l){return Br(c.child,l)})},rr[16]=function(c,o){return Br(c.descendant,o)&&o.ancestors().some(function(l){return Br(c.ancestor,l)})},rr[18]=function(c,o){return Br(c.ancestor,o)&&o.descendants().some(function(l){return Br(c.descendant,l)})},rr[19]=function(c,o){return Br(c.subject,o)&&Br(c.left,o)&&Br(c.right,o)},rr[20]=function(){return!0},rr[1]=function(c,o){return c.value.has(o)},rr[2]=function(c,o){return(0,c.value)(o)};var _l={matches:function(o){for(var d=0;d<this.length;d++)if(Br(this[d],o))return!0;return!1},filter:function(o){var l=this;if(1===l.length&&1===l[0].checks.length&&8===l[0].checks[0].type)return o.getElementById(l[0].checks[0].value).collection();var d=function(p){for(var g=0;g<l.length;g++)if(Br(l[g],p))return!0;return!1};return null==l.text()&&(d=function(){return!0}),o.filter(d)}},Fa=function(o){this.inputText=o,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==o||ye(o)&&o.match(/^\s*$/)||(Oe(o)?this.addQuery({checks:[{type:1,value:o.collection()}]}):$e(o)?this.addQuery({checks:[{type:2,value:o}]}):ye(o)?this.parse(o)||(this.invalid=!0):Sr("A selector must be created from a string; found "))},aa=Fa.prototype;[Sw,_l].forEach(function(c){return Zt(aa,c)}),aa.text=function(){return this.inputText},aa.size=function(){return this.length},aa.eq=function(c){return this[c]},aa.sameText=function(c){return!this.invalid&&!c.invalid&&this.text()===c.text()},aa.addQuery=function(c){this[this.length++]=c},aa.selector=aa.toString;var yn={allAre:function(o){var l=new Fa(o);return this.every(function(d){return l.matches(d)})},is:function(o){var l=new Fa(o);return this.some(function(d){return l.matches(d)})},some:function(o,l){for(var d=0;d<this.length;d++)if(l?o.apply(l,[this[d],d,this]):o(this[d],d,this))return!0;return!1},every:function(o,l){for(var d=0;d<this.length;d++)if(!(l?o.apply(l,[this[d],d,this]):o(this[d],d,this)))return!1;return!0},same:function(o){if(this===o)return!0;o=this.cy().collection(o);var l=this.length;return l===o.length&&(1===l?this[0]===o[0]:this.every(function(f){return o.hasElementWithId(f.id())}))},anySame:function(o){return o=this.cy().collection(o),this.some(function(l){return o.hasElementWithId(l.id())})},allAreNeighbors:function(o){o=this.cy().collection(o);var l=this.neighborhood();return o.every(function(d){return l.hasElementWithId(d.id())})},contains:function(o){o=this.cy().collection(o);var l=this;return o.every(function(d){return l.hasElementWithId(d.id())})}};yn.allAreNeighbours=yn.allAreNeighbors,yn.has=yn.contains,yn.equal=yn.equals=yn.same;var xd,Xv,Js=function(o,l){return function(f,p,g,y){var w,_=f,b=this;if(null==_?w="":Oe(_)&&1===_.length&&(w=_.id()),1===b.length&&w){var E=b[0]._private,M=E.traversalCache=E.traversalCache||{},R=M[l]=M[l]||[],P=Aa(w);return R[P]||(R[P]=o.call(b,f,p,g,y))}return o.call(b,f,p,g,y)}},wd={parent:function(o){var l=[];if(1===this.length){var d=this[0]._private.parent;if(d)return d}for(var f=0;f<this.length;f++){var g=this[f]._private.parent;g&&l.push(g)}return this.spawn(l,!0).filter(o)},parents:function(o){for(var l=[],d=this.parent();d.nonempty();){for(var f=0;f<d.length;f++)l.push(d[f]);d=d.parent()}return this.spawn(l,!0).filter(o)},commonAncestors:function(o){for(var l,d=0;d<this.length;d++){var p=this[d].parents();l=(l=l||p).intersect(p)}return l.filter(o)},orphans:function(o){return this.stdFilter(function(l){return l.isOrphan()}).filter(o)},nonorphans:function(o){return this.stdFilter(function(l){return l.isChild()}).filter(o)},children:Js(function(c){for(var o=[],l=0;l<this.length;l++)for(var f=this[l]._private.children,p=0;p<f.length;p++)o.push(f[p]);return this.spawn(o,!0).filter(c)},"children"),siblings:function(o){return this.parent().children().not(this).filter(o)},isParent:function(){var o=this[0];if(o)return o.isNode()&&0!==o._private.children.length},isChildless:function(){var o=this[0];if(o)return o.isNode()&&0===o._private.children.length},isChild:function(){var o=this[0];if(o)return o.isNode()&&null!=o._private.parent},isOrphan:function(){var o=this[0];if(o)return o.isNode()&&null==o._private.parent},descendants:function(o){var l=[];return function d(f){for(var p=0;p<f.length;p++){var g=f[p];l.push(g),g.children().nonempty()&&d(g.children())}}(this.children()),this.spawn(l,!0).filter(o)}};function Wp(c,o,l,d){for(var f=[],p=new ka,y=c.cy().hasCompoundNodes(),_=0;_<c.length;_++){var b=c[_];l?f.push(b):y&&d(f,p,b)}for(;f.length>0;){var w=f.shift();o(w),p.add(w.id()),y&&d(f,p,w)}return c}function Wv(c,o,l){if(l.isParent())for(var d=l._private.children,f=0;f<d.length;f++){var p=d[f];o.has(p.id())||c.push(p)}}function qv(c,o,l){if(l.isChild()){var d=l._private.parent;o.has(d.id())||c.push(d)}}function Yv(c,o,l){qv(c,o,l),Wv(c,o,l)}wd.forEachDown=function(c){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Wp(this,c,o,Wv)},wd.forEachUp=function(c){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Wp(this,c,o,qv)},wd.forEachUpAndDown=function(c){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Wp(this,c,o,Yv)},wd.ancestors=wd.parents,xd=Xv={data:Dr.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:Dr.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:Dr.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Dr.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:Dr.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:Dr.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var o=this[0];if(o)return o._private.data.id}},xd.attr=xd.data,xd.removeAttr=xd.removeData;var At=Xv,Un={};function Bo(c){return function(o){var l=this;if(void 0===o&&(o=!0),0===l.length);else if(l.isNode()&&!l.removed()){for(var d=0,f=l[0],p=f._private.edges,g=0;g<p.length;g++){var y=p[g];!o&&y.isLoop()||(d+=c(f,y))}return d}}}function Ns(c,o){return function(l){for(var d,f=this.nodes(),p=0;p<f.length;p++){var y=f[p][c](l);void 0!==y&&(void 0===d||o(y,d))&&(d=y)}return d}}Zt(Un,{degree:Bo(function(c,o){return o.source().same(o.target())?2:1}),indegree:Bo(function(c,o){return o.target().same(c)?1:0}),outdegree:Bo(function(c,o){return o.source().same(c)?1:0})}),Zt(Un,{minDegree:Ns("degree",function(c,o){return c<o}),maxDegree:Ns("degree",function(c,o){return c>o}),minIndegree:Ns("indegree",function(c,o){return c<o}),maxIndegree:Ns("indegree",function(c,o){return c>o}),minOutdegree:Ns("outdegree",function(c,o){return c<o}),maxOutdegree:Ns("outdegree",function(c,o){return c>o})}),Zt(Un,{totalDegree:function(o){for(var l=0,d=this.nodes(),f=0;f<d.length;f++)l+=d[f].degree(o);return l}});var Tr,qp,ru=function(o,l,d){for(var f=0;f<o.length;f++){var p=o[f];if(!p.locked()){var g=p._private.position,y={x:null!=l.x?l.x-g.x:0,y:null!=l.y?l.y-g.y:0};p.isParent()&&!(0===y.x&&0===y.y)&&p.children().shift(y,d),p.dirtyBoundingBoxCache()}}},Vo={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(o){o.updateCompoundBounds()},beforeSet:function(o,l){ru(o,l,!1)},onSet:function(o){o.dirtyCompoundBoundsCache()},canSet:function(o){return!o.locked()}};Tr=qp={position:Dr.data(Vo),silentPosition:Dr.data(Zt({},Vo,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(o,l){ru(o,l,!0)},onSet:function(o){o.dirtyCompoundBoundsCache()}})),positions:function(o,l){if(Ie(o))l?this.silentPosition(o):this.position(o);else if($e(o)){var d=o,f=this.cy();f.startBatch();for(var p=0;p<this.length;p++){var y,g=this[p];(y=d(g,p))&&(l?g.silentPosition(y):g.position(y))}f.endBatch()}return this},silentPositions:function(o){return this.positions(o,!0)},shift:function(o,l,d){var f;if(Ie(o)?(f={x:pe(o.x)?o.x:0,y:pe(o.y)?o.y:0},d=l):ye(o)&&pe(l)&&((f={x:0,y:0})[o]=l),null!=f){var p=this.cy();p.startBatch();for(var g=0;g<this.length;g++){var y=this[g];if(!(p.hasCompoundNodes()&&y.isChild()&&y.ancestors().anySame(this))){var _=y.position(),b={x:_.x+f.x,y:_.y+f.y};d?y.silentPosition(b):y.position(b)}}p.endBatch()}return this},silentShift:function(o,l){return Ie(o)?this.shift(o,!0):ye(o)&&pe(l)&&this.shift(o,l,!0),this},renderedPosition:function(o,l){var d=this[0],f=this.cy(),p=f.zoom(),g=f.pan(),y=Ie(o)?o:void 0,_=void 0!==y||void 0!==l&&ye(o);if(d&&d.isNode()){if(!_){var E=d.position();return y=Wn(E,p,g),void 0===o?y:y[o]}for(var b=0;b<this.length;b++){var w=this[b];void 0!==l?w.position(o,(l-g[o])/p):void 0!==y&&w.position(qn(y,p,g))}}else if(!_)return;return this},relativePosition:function(o,l){var d=this[0],f=this.cy(),p=Ie(o)?o:void 0,g=void 0!==p||void 0!==l&&ye(o),y=f.hasCompoundNodes();if(d&&d.isNode()){if(!g){var P=d.position(),$=y?d.parent():null,K=$&&$.length>0;K&&($=$[0]);var ne=K?$.position():{x:0,y:0};return p={x:P.x-ne.x,y:P.y-ne.y},void 0===o?p:p[o]}for(var _=0;_<this.length;_++){var b=this[_],w=y?b.parent():null,E=w&&w.length>0;E&&(w=w[0]);var R=E?w.position():{x:0,y:0};void 0!==l?b.position(o,l+R[o]):void 0!==p&&b.position({x:p.x+R.x,y:p.y+R.y})}}else if(!g)return;return this}},Tr.modelPosition=Tr.point=Tr.position,Tr.modelPositions=Tr.points=Tr.positions,Tr.renderedPoint=Tr.renderedPosition,Tr.relativePoint=Tr.relativePosition;var wl,xl,Yp=qp;wl=xl={},xl.renderedBoundingBox=function(c){var o=this.boundingBox(c),l=this.cy(),d=l.zoom(),f=l.pan(),p=o.x1*d+f.x,g=o.x2*d+f.x,y=o.y1*d+f.y,_=o.y2*d+f.y;return{x1:p,x2:g,y1:y,y2:_,w:g-p,h:_-y}},xl.dirtyCompoundBoundsCache=function(){var c=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=this.cy();return o.styleEnabled()&&o.hasCompoundNodes()?(this.forEachUp(function(l){if(l.isParent()){var d=l._private;d.compoundBoundsClean=!1,d.bbCache=null,c||l.emitAndNotify("bounds")}}),this):this},xl.updateCompoundBounds=function(){var c=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=this.cy();if(!o.styleEnabled()||!o.hasCompoundNodes())return this;if(!c&&o.batching())return this;function l(g){if(g.isParent()){var y=g._private,_=g.children(),b="include"===g.pstyle("compound-sizing-wrt-labels").value,w={width:{val:g.pstyle("min-width").pfValue,left:g.pstyle("min-width-bias-left"),right:g.pstyle("min-width-bias-right")},height:{val:g.pstyle("min-height").pfValue,top:g.pstyle("min-height-bias-top"),bottom:g.pstyle("min-height-bias-bottom")}},E=_.boundingBox({includeLabels:b,includeOverlays:!1,useCache:!1}),M=y.position;(0===E.w||0===E.h)&&((E={w:g.pstyle("width").pfValue,h:g.pstyle("height").pfValue}).x1=M.x-E.w/2,E.x2=M.x+E.w/2,E.y1=M.y-E.h/2,E.y2=M.y+E.h/2);var $=w.width.left.value;"px"===w.width.left.units&&w.width.val>0&&($=100*$/w.width.val);var K=w.width.right.value;"px"===w.width.right.units&&w.width.val>0&&(K=100*K/w.width.val);var J=w.height.top.value;"px"===w.height.top.units&&w.height.val>0&&(J=100*J/w.height.val);var ne=w.height.bottom.value;"px"===w.height.bottom.units&&w.height.val>0&&(ne=100*ne/w.height.val);var re=R(w.width.val-E.w,$,K),ue=re.biasDiff,Ce=re.biasComplementDiff,Se=R(w.height.val-E.h,J,ne),de=Se.biasDiff,Ee=Se.biasComplementDiff;y.autoPadding=function P(he,ke,Te,ge){if("%"!==Te.units)return"px"===Te.units?Te.pfValue:0;switch(ge){case"width":return he>0?Te.pfValue*he:0;case"height":return ke>0?Te.pfValue*ke:0;case"average":return he>0&&ke>0?Te.pfValue*(he+ke)/2:0;case"min":return he>0&&ke>0?he>ke?Te.pfValue*ke:Te.pfValue*he:0;case"max":return he>0&&ke>0?he>ke?Te.pfValue*he:Te.pfValue*ke:0;default:return 0}}(E.w,E.h,g.pstyle("padding"),g.pstyle("padding-relative-to").value),y.autoWidth=Math.max(E.w,w.width.val),M.x=(-ue+E.x1+E.x2+Ce)/2,y.autoHeight=Math.max(E.h,w.height.val),M.y=(-de+E.y1+E.y2+Ee)/2}function R(he,ke,Te){var ge=0,Fe=0,Me=ke+Te;return he>0&&Me>0&&(ge=ke/Me*he,Fe=Te/Me*he),{biasDiff:ge,biasComplementDiff:Fe}}}for(var d=0;d<this.length;d++){var f=this[d],p=f._private;(!p.compoundBoundsClean||c)&&(l(f),o.batching()||(p.compoundBoundsClean=!0))}return this};var Ho=function(o){return o===1/0||o===-1/0?0:o},Co=function(o,l,d,f,p){f-l==0||p-d==0||null==l||null==d||null==f||null==p||(o.x1=l<o.x1?l:o.x1,o.x2=f>o.x2?f:o.x2,o.y1=d<o.y1?d:o.y1,o.y2=p>o.y2?p:o.y2,o.w=o.x2-o.x1,o.h=o.y2-o.y1)},ui=function(o,l){return null==l?o:Co(o,l.x1,l.y1,l.x2,l.y2)},eo=function(o,l,d){return vo(o,l,d)},Ed=function(o,l,d){if(!l.cy().headless()){var _,b,f=l._private,p=f.rstyle,g=p.arrowWidth/2;if("none"!==l.pstyle(d+"-arrow-shape").value){"source"===d?(_=p.srcX,b=p.srcY):"target"===d?(_=p.tgtX,b=p.tgtY):(_=p.midX,b=p.midY);var w=f.arrowBounds=f.arrowBounds||{},E=w[d]=w[d]||{};E.x1=_-g,E.y1=b-g,E.x2=_+g,E.y2=b+g,E.w=E.x2-E.x1,E.h=E.y2-E.y1,gr(E,1),Co(o,E.x1,E.y1,E.x2,E.y2)}}},El=function(o,l,d){if(!l.cy().headless()){var f,p=l._private,g=p.rstyle;if(l.pstyle((f=d?d+"-":"")+"label").strValue){var Te,ge,Fe,Me,_=l.pstyle("text-halign"),b=l.pstyle("text-valign"),w=eo(g,"labelWidth",d),E=eo(g,"labelHeight",d),M=eo(g,"labelX",d),R=eo(g,"labelY",d),P=l.pstyle(f+"text-margin-x").pfValue,$=l.pstyle(f+"text-margin-y").pfValue,K=l.isEdge(),J=l.pstyle(f+"text-rotation"),ne=l.pstyle("text-outline-width").pfValue,ue=l.pstyle("text-border-width").pfValue/2,Ce=l.pstyle("text-background-padding").pfValue,de=E,Ee=w,he=Ee/2,ke=de/2;if(K)Te=M-he,ge=M+he,Fe=R-ke,Me=R+ke;else{switch(_.value){case"left":Te=M-Ee,ge=M;break;case"center":Te=M-he,ge=M+he;break;case"right":Te=M,ge=M+Ee}switch(b.value){case"top":Fe=R-de,Me=R;break;case"center":Fe=R-ke,Me=R+ke;break;case"bottom":Fe=R,Me=R+de}}Te+=P-Math.max(ne,ue)-Ce-2,ge+=P+Math.max(ne,ue)+Ce+2,Fe+=$-Math.max(ne,ue)-Ce-2,Me+=$+Math.max(ne,ue)+Ce+2;var Xe=d||"main",Ve=p.labelBounds,je=Ve[Xe]=Ve[Xe]||{};je.x1=Te,je.y1=Fe,je.x2=ge,je.y2=Me,je.w=ge-Te,je.h=Me-Fe;var Qe=K&&"autorotate"===J.strValue;if(Qe||null!=J.pfValue&&0!==J.pfValue){var ct=Qe?eo(p.rstyle,"labelAngle",d):J.pfValue,rt=Math.cos(ct),tt=Math.sin(ct),wt=(Te+ge)/2,Dt=(Fe+Me)/2;if(!K){switch(_.value){case"left":wt=ge;break;case"right":wt=Te}switch(b.value){case"top":Dt=Me;break;case"bottom":Dt=Fe}}var yt=function(kn,Ht){return{x:(kn-=wt)*rt-(Ht-=Dt)*tt+wt,y:kn*tt+Ht*rt+Dt}},mt=yt(Te,Fe),Ze=yt(Te,Me),xt=yt(ge,Fe),Mt=yt(ge,Me);Te=Math.min(mt.x,Ze.x,xt.x,Mt.x),ge=Math.max(mt.x,Ze.x,xt.x,Mt.x),Fe=Math.min(mt.y,Ze.y,xt.y,Mt.y),Me=Math.max(mt.y,Ze.y,xt.y,Mt.y)}var Lt=Xe+"Rot",Vt=Ve[Lt]=Ve[Lt]||{};Vt.x1=Te,Vt.y1=Fe,Vt.x2=ge,Vt.y2=Me,Vt.w=ge-Te,Vt.h=Me-Fe,Co(o,Te,Fe,ge,Me),Co(p.labelBounds.all,Te,Fe,ge,Me)}return o}},Kv=function(o){var l=0,d=function(g){return(g?1:0)<<l++},f=0;return f+=d(o.incudeNodes),f+=d(o.includeEdges),f+=d(o.includeLabels),f+=d(o.includeMainLabels),f+=d(o.includeSourceLabels),(f+=d(o.includeTargetLabels))+d(o.includeOverlays)},Xp=function(o){if(o.isEdge()){var l=o.source().position(),d=o.target().position(),f=function(g){return Math.round(g)};return function(o,l){var d={value:0,done:!1},f=0,p=o.length;return td({next:function(){return f<p?d.value=o[f++]:d.done=!0,d}},void 0)}([f(l.x),f(l.y),f(d.x),f(d.y)])}return 0},Zv=function(o,l){var f,d=o._private,p=o.isEdge(),y=(null==l?Yh:Kv(l))===Yh,_=Xp(o),b=d.bbCachePosKey===_,w=l.useCache&&b,E=function($){return null==$._private.bbCache||$._private.styleDirty};if(!w||E(o)||p&&E(o.source())||E(o.target())?(b||o.recalculateRenderedStyle(w),f=function(o,l){var w,E,M,R,P,$,d=o._private.cy,f=d.styleEnabled(),p=d.headless(),g=Lr(),y=o._private,_=o.isNode(),b=o.isEdge(),K=y.rstyle,J=_&&f?o.pstyle("bounds-expansion").pfValue:[0],ne=function(pn){return"none"!==pn.pstyle("display").value},re=!f||ne(o)&&(!b||ne(o.source())&&ne(o.target()));if(re){var Ce=0;f&&l.includeOverlays&&0!==o.pstyle("overlay-opacity").value&&(Ce=o.pstyle("overlay-padding").value);var de=0;f&&l.includeUnderlays&&0!==o.pstyle("underlay-opacity").value&&(de=o.pstyle("underlay-padding").value);var Ee=Math.max(Ce,de),ke=0;if(f&&(ke=o.pstyle("width").pfValue/2),_&&l.includeNodes){var Te=o.position();P=Te.x,$=Te.y;var Fe=o.outerWidth()/2,Xe=o.outerHeight()/2;Co(g,w=P-Fe,M=$-Xe,E=P+Fe,R=$+Xe)}else if(b&&l.includeEdges)if(f&&!p){var Ve=o.pstyle("curve-style").strValue;if(w=Math.min(K.srcX,K.midX,K.tgtX),E=Math.max(K.srcX,K.midX,K.tgtX),M=Math.min(K.srcY,K.midY,K.tgtY),R=Math.max(K.srcY,K.midY,K.tgtY),Co(g,w-=ke,M-=ke,E+=ke,R+=ke),"haystack"===Ve){var je=K.haystackPts;if(je&&2===je.length){if((w=je[0].x)>(E=je[1].x)){var Qe=w;w=E,E=Qe}if((M=je[0].y)>(R=je[1].y)){var it=M;M=R,R=it}Co(g,w-ke,M-ke,E+ke,R+ke)}}else if("bezier"===Ve||"unbundled-bezier"===Ve||"segments"===Ve||"taxi"===Ve){var ct;switch(Ve){case"bezier":case"unbundled-bezier":ct=K.bezierPts;break;case"segments":case"taxi":ct=K.linePts}if(null!=ct)for(var rt=0;rt<ct.length;rt++){var tt=ct[rt];Co(g,w=tt.x-ke,M=tt.y-ke,E=tt.x+ke,R=tt.y+ke)}}}else{var Dt=o.source().position(),mt=o.target().position();if((w=Dt.x)>(E=mt.x)){var Ze=w;w=E,E=Ze}if((M=Dt.y)>(R=mt.y)){var xt=M;M=R,R=xt}Co(g,w-=ke,M-=ke,E+=ke,R+=ke)}if(f&&l.includeEdges&&b&&(Ed(g,o,"mid-source"),Ed(g,o,"mid-target"),Ed(g,o,"source"),Ed(g,o,"target")),f&&"yes"===o.pstyle("ghost").value){var Lt=o.pstyle("ghost-offset-x").pfValue,Vt=o.pstyle("ghost-offset-y").pfValue;Co(g,g.x1+Lt,g.y1+Vt,g.x2+Lt,g.y2+Vt)}var xn=y.bodyBounds=y.bodyBounds||{};gl(xn,g),Io(xn,J),gr(xn,1),f&&Co(g,(w=g.x1)-Ee,(M=g.y1)-Ee,(E=g.x2)+Ee,(R=g.y2)+Ee);var kn=y.overlayBounds=y.overlayBounds||{};gl(kn,g),Io(kn,J),gr(kn,1);var Ht=y.labelBounds=y.labelBounds||{};null!=Ht.all?function(o){o.x1=1/0,o.y1=1/0,o.x2=-1/0,o.y2=-1/0,o.w=0,o.h=0}(Ht.all):Ht.all=Lr(),f&&l.includeLabels&&(l.includeMainLabels&&El(g,o,null),b&&(l.includeSourceLabels&&El(g,o,"source"),l.includeTargetLabels&&El(g,o,"target")))}return g.x1=Ho(g.x1),g.y1=Ho(g.y1),g.x2=Ho(g.x2),g.y2=Ho(g.y2),g.w=Ho(g.x2-g.x1),g.h=Ho(g.y2-g.y1),g.w>0&&g.h>0&&re&&(Io(g,J),gr(g,1)),g}(o,Dd),d.bbCache=f,d.bbCachePosKey=_):f=d.bbCache,!y){var R=o.isNode();f=Lr(),(l.includeNodes&&R||l.includeEdges&&!R)&&ui(f,l.includeOverlays?d.overlayBounds:d.bodyBounds),l.includeLabels&&(l.includeMainLabels&&(!p||l.includeSourceLabels&&l.includeTargetLabels)?ui(f,d.labelBounds.all):(l.includeMainLabels&&ui(f,d.labelBounds.mainRot),l.includeSourceLabels&&ui(f,d.labelBounds.sourceRot),l.includeTargetLabels&&ui(f,d.labelBounds.targetRot))),f.w=f.x2-f.x1,f.h=f.y2-f.y1}return f},Dd={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,useCache:!0},Yh=Kv(Dd),Xh=yi(Dd);xl.boundingBox=function(c){var o;if(1!==this.length||null==this[0]._private.bbCache||this[0]._private.styleDirty||void 0!==c&&void 0!==c.useCache&&!0!==c.useCache){o=Lr();var l=Xh(c=c||Dd),d=this;if(d.cy().styleEnabled())for(var g=0;g<d.length;g++){var y=d[g],_=y._private,b=Xp(y);y.recalculateRenderedStyle(l.useCache&&_.bbCachePosKey===b&&!_.styleDirty)}this.updateCompoundBounds(!c.useCache);for(var M=0;M<d.length;M++)ui(o,Zv(d[M],l))}else c=void 0===c?Dd:Xh(c),o=Zv(this[0],c);return o.x1=Ho(o.x1),o.y1=Ho(o.y1),o.x2=Ho(o.x2),o.y2=Ho(o.y2),o.w=Ho(o.x2-o.x1),o.h=Ho(o.y2-o.y1),o},xl.dirtyBoundingBoxCache=function(){for(var c=0;c<this.length;c++){var o=this[c]._private;o.bbCache=null,o.bbCachePosKey=null,o.bodyBounds=null,o.overlayBounds=null,o.labelBounds.all=null,o.labelBounds.source=null,o.labelBounds.target=null,o.labelBounds.main=null,o.labelBounds.sourceRot=null,o.labelBounds.targetRot=null,o.labelBounds.mainRot=null,o.arrowBounds.source=null,o.arrowBounds.target=null,o.arrowBounds["mid-source"]=null,o.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},xl.boundingBoxAt=function(c){var o=this.nodes(),l=this.cy(),d=l.hasCompoundNodes(),f=l.collection();if(d&&(f=o.filter(function(b){return b.isParent()}),o=o.not(f)),Ie(c)){var p=c;c=function(){return p}}l.startBatch(),o.forEach(function(w,E){return w._private.bbAtOldPos=c(w,E)}).silentPositions(c),d&&(f.dirtyCompoundBoundsCache(),f.dirtyBoundingBoxCache(),f.updateCompoundBounds(!0));var _=function(o){return{x1:o.x1,x2:o.x2,w:o.w,y1:o.y1,y2:o.y2,h:o.h}}(this.boundingBox({useCache:!1}));return o.silentPositions(function(w){return w._private.bbAtOldPos}),d&&(f.dirtyCompoundBoundsCache(),f.dirtyBoundingBoxCache(),f.updateCompoundBounds(!0)),l.endBatch(),_},wl.boundingbox=wl.bb=wl.boundingBox,wl.renderedBoundingbox=wl.renderedBoundingBox;var ac,Cd,Qv=xl;ac=Cd={};var Kp=function(o){o.uppercaseName=sn(o.name),o.autoName="auto"+o.uppercaseName,o.labelName="label"+o.uppercaseName,o.outerName="outer"+o.uppercaseName,o.uppercaseOuterName=sn(o.outerName),ac[o.name]=function(){var d=this[0],f=d._private;if(d){if(f.cy._private.styleEnabled){if(d.isParent())return d.updateCompoundBounds(),f[o.autoName]||0;var y=d.pstyle(o.name);return"label"===y.strValue?(d.recalculateRenderedStyle(),f.rstyle[o.labelName]||0):y.pfValue}return 1}},ac["outer"+o.uppercaseName]=function(){var d=this[0];if(d)return d._private.cy._private.styleEnabled?d[o.name]()+d.pstyle("border-width").pfValue+2*d.padding():1},ac["rendered"+o.uppercaseName]=function(){var d=this[0];if(d)return d[o.name]()*this.cy().zoom()},ac["rendered"+o.uppercaseOuterName]=function(){var d=this[0];if(d)return d[o.outerName]()*this.cy().zoom()}};Kp({name:"width"}),Kp({name:"height"}),Cd.padding=function(){var c=this[0],o=c._private;return c.isParent()?(c.updateCompoundBounds(),void 0!==o.autoPadding?o.autoPadding:c.pstyle("padding").pfValue):c.pstyle("padding").pfValue},Cd.paddedHeight=function(){var c=this[0];return c.height()+2*c.padding()},Cd.paddedWidth=function(){var c=this[0];return c.width()+2*c.padding()};var Zp=Cd,Dl={controlPoints:{get:function(o){return o.renderer().getControlPoints(o)},mult:!0},segmentPoints:{get:function(o){return o.renderer().getSegmentPoints(o)},mult:!0},sourceEndpoint:{get:function(o){return o.renderer().getSourceEndpoint(o)}},targetEndpoint:{get:function(o){return o.renderer().getTargetEndpoint(o)}},midpoint:{get:function(o){return o.renderer().getEdgeMidpoint(o)}}},ry=Object.keys(Dl).reduce(function(c,o){var l=Dl[o],d=function(o){return"rendered"+o[0].toUpperCase()+o.substr(1)}(o);return c[o]=function(){return function(o,l){if(o.isEdge())return l(o)}(this,l.get)},c[d]=l.mult?function(){return function(o,l){if(o.isEdge()){var d=o.cy(),f=d.pan(),p=d.zoom();return l(o).map(function(g){return Wn(g,p,f)})}}(this,l.get)}:function(){return function(o,l){if(o.isEdge()){var d=o.cy();return Wn(l(o),d.zoom(),d.pan())}}(this,l.get)},c},{}),Iw=Zt({},Yp,Qv,Zp,ry),Jp=function(o,l){this.recycle(o,l)};function Sd(){return!1}function Kh(){return!0}Jp.prototype={instanceString:function(){return"event"},recycle:function(o,l){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Sd,null!=o&&o.preventDefault?(this.type=o.type,this.isDefaultPrevented=o.defaultPrevented?Kh:Sd):null!=o&&o.type?l=o:this.type=o,null!=l&&(this.originalEvent=l.originalEvent,this.type=null!=l.type?l.type:this.type,this.cy=l.cy,this.target=l.target,this.position=l.position,this.renderedPosition=l.renderedPosition,this.namespace=l.namespace,this.layout=l.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var d=this.position,f=this.cy.zoom(),p=this.cy.pan();this.renderedPosition={x:d.x*f+p.x,y:d.y*f+p.y}}this.timeStamp=o&&o.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=Kh;var o=this.originalEvent;o&&o.preventDefault&&o.preventDefault()},stopPropagation:function(){this.isPropagationStopped=Kh;var o=this.originalEvent;o&&o.stopPropagation&&o.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Kh,this.stopPropagation()},isDefaultPrevented:Sd,isPropagationStopped:Sd,isImmediatePropagationStopped:Sd};var iy=/^([^.]+)(\.(?:[^.]+))?$/,Md={qualifierCompare:function(o,l){return o===l},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(o){return o},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},Ad=Object.keys(Md),eg={};function Td(){for(var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:eg,o=arguments.length>1?arguments[1]:void 0,l=0;l<Ad.length;l++){var d=Ad[l];this[d]=c[d]||Md[d]}this.context=o||this.context,this.listeners=[],this.emitting=0}var Cl=Td.prototype,lc=function(o,l,d,f,p,g,y){$e(f)&&(p=f,f=null),y&&(g=null==g?y:Zt({},g,y));for(var _=He(d)?d:d.split(/\s+/),b=0;b<_.length;b++){var w=_[b];if(!We(w)){var E=w.match(iy);if(E&&!1===l(o,w,E[1],E[2]?E[2]:null,f,p,g))break}}},iu=function(o,l){return o.addEventFields(o.context,l),new Jp(l.type,l)};Cl.on=Cl.addListener=function(c,o,l,d,f){return lc(this,function(p,g,y,_,b,w,E){$e(w)&&p.listeners.push({event:g,callback:w,type:y,namespace:_,qualifier:b,conf:E})},c,o,l,d,f),this},Cl.one=function(c,o,l,d){return this.on(c,o,l,d,{one:!0})},Cl.removeListener=Cl.off=function(c,o,l,d){var f=this;0!==this.emitting&&(this.listeners=function(o){return o.slice()}(this.listeners));for(var p=this.listeners,g=function(b){var w=p[b];lc(f,function(E,M,R,P,$,K){if((w.type===R||"*"===c)&&(!P&&".*"!==w.namespace||w.namespace===P)&&(!$||E.qualifierCompare(w.qualifier,$))&&(!K||w.callback===K))return p.splice(b,1),!1},c,o,l,d)},y=p.length-1;y>=0;y--)g(y);return this},Cl.removeAllListeners=function(){return this.removeListener("*")},Cl.emit=Cl.trigger=function(c,o,l){var d=this.listeners,f=d.length;return this.emitting++,He(o)||(o=[o]),function(o,l,d){if(function(o){return"event"===Le(o)}(d))l(o,d);else if(Ie(d))l(o,iu(o,d));else for(var f=He(d)?d:d.split(/\s+/),p=0;p<f.length;p++){var g=f[p];if(!We(g)){var y=g.match(iy);y&&l(o,iu(o,{type:y[1],namespace:y[2]?y[2]:null,target:o.context}))}}}(this,function(p,g){null!=l&&(f=(d=[{event:g.event,type:g.type,namespace:g.namespace,callback:l}]).length);for(var y=function(w){var E=d[w];if(E.type===g.type&&(!E.namespace||E.namespace===g.namespace||".*"===E.namespace)&&p.eventMatches(p.context,E,g)){var M=[g];null!=o&&function(o,l){for(var d=0;d<l.length;d++)o.push(l[d])}(M,o),p.beforeEmit(p.context,E,g),E.conf&&E.conf.one&&(p.listeners=p.listeners.filter(function($){return $!==E}));var R=p.callbackContext(p.context,E,g),P=E.callback.apply(R,M);p.afterEmit(p.context,E,g),!1===P&&(g.stopPropagation(),g.preventDefault())}},_=0;_<f;_++)y(_);p.bubble(p.context)&&!g.isPropagationStopped()&&p.parent(p.context).emit(g,o)},c),this.emitting--,this};var Z1={qualifierCompare:function(o,l){return null==o||null==l?null==o&&null==l:o.sameText(l)},eventMatches:function(o,l,d){var f=l.qualifier;return null==f||o!==d.target&&Je(d.target)&&f.matches(d.target)},addEventFields:function(o,l){l.cy=o.cy(),l.target=o},callbackContext:function(o,l,d){return null!=l.qualifier?d.target:o},beforeEmit:function(o,l){l.conf&&l.conf.once&&l.conf.onceCollection.removeListener(l.event,l.qualifier,l.callback)},bubble:function(){return!0},parent:function(o){return o.isChild()?o.parent():o.cy()}},su=function(o){return ye(o)?new Fa(o):o},Rw={createEmitter:function(){for(var o=0;o<this.length;o++){var l=this[o],d=l._private;d.emitter||(d.emitter=new Td(Z1,l))}return this},emitter:function(){return this._private.emitter},on:function(o,l,d){for(var f=su(l),p=0;p<this.length;p++)this[p].emitter().on(o,f,d);return this},removeListener:function(o,l,d){for(var f=su(l),p=0;p<this.length;p++)this[p].emitter().removeListener(o,f,d);return this},removeAllListeners:function(){for(var o=0;o<this.length;o++)this[o].emitter().removeAllListeners();return this},one:function(o,l,d){for(var f=su(l),p=0;p<this.length;p++)this[p].emitter().one(o,f,d);return this},once:function(o,l,d){for(var f=su(l),p=0;p<this.length;p++)this[p].emitter().on(o,f,d,{once:!0,onceCollection:this})},emit:function(o,l){for(var d=0;d<this.length;d++)this[d].emitter().emit(o,l);return this},emitAndNotify:function(o,l){if(0!==this.length)return this.cy().notify(o,this),this.emit(o,l),this}};Dr.eventAliasesOn(Rw);var sy={nodes:function(o){return this.filter(function(l){return l.isNode()}).filter(o)},edges:function(o){return this.filter(function(l){return l.isEdge()}).filter(o)},byGroup:function(){for(var o=this.spawn(),l=this.spawn(),d=0;d<this.length;d++){var f=this[d];f.isNode()?o.push(f):l.push(f)}return{nodes:o,edges:l}},filter:function(o,l){if(void 0===o)return this;if(ye(o)||Oe(o))return new Fa(o).filter(this);if($e(o)){for(var d=this.spawn(),f=this,p=0;p<f.length;p++){var g=f[p];(l?o.apply(l,[g,p,f]):o(g,p,f))&&d.push(g)}return d}return this.spawn()},not:function(o){if(o){ye(o)&&(o=this.filter(o));for(var l=this.spawn(),d=0;d<this.length;d++){var f=this[d];o.has(f)||l.push(f)}return l}return this},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(o){if(ye(o))return this.filter(o);for(var d=this.spawn(),g=this.length<o.length,y=g?this:o,_=g?o:this,b=0;b<y.length;b++){var w=y[b];_.has(w)&&d.push(w)}return d},xor:function(o){var l=this._private.cy;ye(o)&&(o=l.$(o));var d=this.spawn(),p=o,g=function(_,b){for(var w=0;w<_.length;w++){var E=_[w];b.hasElementWithId(E._private.data.id)||d.push(E)}};return g(this,p),g(p,this),d},diff:function(o){var l=this._private.cy;ye(o)&&(o=l.$(o));var d=this.spawn(),f=this.spawn(),p=this.spawn(),y=o,_=function(w,E,M){for(var R=0;R<w.length;R++){var P=w[R];E.hasElementWithId(P._private.data.id)?p.merge(P):M.push(P)}};return _(this,y,d),_(y,this,f),{left:d,right:f,both:p}},add:function(o){var l=this._private.cy;if(!o)return this;if(ye(o)){var d=o;o=l.mutableElements().filter(d)}for(var f=this.spawnSelf(),p=0;p<o.length;p++){var g=o[p];!this.has(g)&&f.push(g)}return f},merge:function(o){var l=this._private,d=l.cy;if(!o)return this;if(o&&ye(o)){var f=o;o=d.mutableElements().filter(f)}for(var p=l.map,g=0;g<o.length;g++){var y=o[g],_=y._private.data.id;if(!p.has(_)){var w=this.length++;this[w]=y,p.set(_,{ele:y,index:w})}}return this},unmergeAt:function(o){var d=this[o].id(),p=this._private.map;if(this[o]=void 0,p.delete(d),this.length>1&&o!==this.length-1){var y=this.length-1,_=this[y],b=_._private.data.id;this[y]=void 0,this[o]=_,p.set(b,{ele:_,index:o})}return this.length--,this},unmergeOne:function(o){var p=this._private.map.get((o=o[0])._private.data.id);return p?(this.unmergeAt(p.index),this):this},unmerge:function(o){var l=this._private.cy;if(!o)return this;if(o&&ye(o)){var d=o;o=l.mutableElements().filter(d)}for(var f=0;f<o.length;f++)this.unmergeOne(o[f]);return this},unmergeBy:function(o){for(var l=this.length-1;l>=0;l--)o(this[l])&&this.unmergeAt(l);return this},map:function(o,l){for(var d=[],f=this,p=0;p<f.length;p++){var g=f[p],y=l?o.apply(l,[g,p,f]):o(g,p,f);d.push(y)}return d},reduce:function(o,l){for(var d=l,f=this,p=0;p<f.length;p++)d=o(d,f[p],p,f);return d},max:function(o,l){for(var f,d=-1/0,p=this,g=0;g<p.length;g++){var y=p[g],_=l?o.apply(l,[y,g,p]):o(y,g,p);_>d&&(d=_,f=y)}return{value:d,ele:f}},min:function(o,l){for(var f,d=1/0,p=this,g=0;g<p.length;g++){var y=p[g],_=l?o.apply(l,[y,g,p]):o(y,g,p);_<d&&(d=_,f=y)}return{value:d,ele:f}}},dr=sy;dr.u=dr["|"]=dr["+"]=dr.union=dr.or=dr.add,dr["\\"]=dr["!"]=dr["-"]=dr.difference=dr.relativeComplement=dr.subtract=dr.not,dr.n=dr["&"]=dr["."]=dr.and=dr.intersection=dr.intersect,dr["^"]=dr["(+)"]=dr["(-)"]=dr.symmetricDifference=dr.symdiff=dr.xor,dr.fnFilter=dr.filterFn=dr.stdFilter=dr.filter,dr.complement=dr.abscomp=dr.absoluteComplement;var o,Pw=function(o,l){var f=o.cy().hasCompoundNodes();function p(w){var E=w.pstyle("z-compound-depth");return"auto"===E.value?f?w.zDepth():0:"bottom"===E.value?-1:"top"===E.value?Uc:0}var g=p(o)-p(l);if(0!==g)return g;function y(w){return"auto"===w.pstyle("z-index-compare").value&&w.isNode()?1:0}var _=y(o)-y(l);if(0!==_)return _;var b=o.pstyle("z-index").value-l.pstyle("z-index").value;return 0!==b?b:o.poolIndex()-l.poolIndex()},ou={forEach:function(o,l){if($e(o))for(var d=this.length,f=0;f<d;f++){var p=this[f];if(!1===(l?o.apply(l,[p,f,this]):o(p,f,this)))break}return this},toArray:function(){for(var o=[],l=0;l<this.length;l++)o.push(this[l]);return o},slice:function(o,l){var d=[],f=this.length;null==l&&(l=f),null==o&&(o=0),o<0&&(o=f+o),l<0&&(l=f+l);for(var p=o;p>=0&&p<l&&p<f;p++)d.push(this[p]);return this.spawn(d)},size:function(){return this.length},eq:function(o){return this[o]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(o){if(!$e(o))return this;var l=this.toArray().sort(o);return this.spawn(l)},sortByZIndex:function(){return this.sort(Pw)},zDepth:function(){var o=this[0];if(o){var l=o._private;if("nodes"===l.group){var f=l.data.parent?o.parents().size():0;return o.isParent()?f:Uc-1}var g=l.target,y=l.source.zDepth(),_=g.zDepth();return Math.max(y,_,0)}}};ou.each=ou.forEach,o="undefined",(typeof Symbol>"u"?"undefined":U(Symbol))!=o&&U(Symbol.iterator)!=o&&(ou[Symbol.iterator]=function(){var d=this,f={value:void 0,done:!1},p=0,g=this.length;return Y({next:function(){return p<g?f.value=d[p++]:(f.value=void 0,f.done=!0),f}},Symbol.iterator,function(){return this})});var ay=yi({nodeDimensionsIncludeLabels:!1}),Sl={layoutDimensions:function(o){var l;if(o=ay(o),this.takesUpSpace())if(o.nodeDimensionsIncludeLabels){var d=this.boundingBox();l={w:d.w,h:d.h}}else l={w:this.outerWidth(),h:this.outerHeight()};else l={w:0,h:0};return(0===l.w||0===l.h)&&(l.w=l.h=1),l},layoutPositions:function(o,l,d){var f=this.nodes().filter(function(Ce){return!Ce.isParent()}),p=this.cy(),g=l.eles,y=function(Se){return Se.id()},_=ft(d,y);o.emit({type:"layoutstart",layout:o}),o.animations=[];var w=l.spacingFactor&&1!==l.spacingFactor,M=function(){if(!w)return null;for(var Se=Lr(),de=0;de<f.length;de++){var he=_(f[de],de);Vh(Se,he.x,he.y)}return Se}(),R=ft(function(Ce,Se){var de=_(Ce,Se);return w&&(de=function(Se,de,Ee){var he_x=de.x1+de.w/2,he_y=de.y1+de.h/2;return{x:he_x+(Ee.x-he_x)*Se,y:he_y+(Ee.y-he_y)*Se}}(Math.abs(l.spacingFactor),M,de)),null!=l.transform&&(de=l.transform(Ce,de)),de},y);if(l.animate){for(var P=0;P<f.length;P++){var $=f[P],K=R($,P);if(null==l.animateFilter||l.animateFilter($,P)){var ne=$.animation({position:K,duration:l.animationDuration,easing:l.animationEasing});o.animations.push(ne)}else $.position(K)}if(l.fit){var re=p.animation({fit:{boundingBox:g.boundingBoxAt(R),padding:l.padding},duration:l.animationDuration,easing:l.animationEasing});o.animations.push(re)}else if(void 0!==l.zoom&&void 0!==l.pan){var ue=p.animation({zoom:l.zoom,pan:l.pan,duration:l.animationDuration,easing:l.animationEasing});o.animations.push(ue)}o.animations.forEach(function(Ce){return Ce.play()}),o.one("layoutready",l.ready),o.emit({type:"layoutready",layout:o}),bd.all(o.animations.map(function(Ce){return Ce.promise()})).then(function(){o.one("layoutstop",l.stop),o.emit({type:"layoutstop",layout:o})})}else f.positions(R),l.fit&&p.fit(l.eles,l.padding),null!=l.zoom&&p.zoom(l.zoom),l.pan&&p.pan(l.pan),o.one("layoutready",l.ready),o.emit({type:"layoutready",layout:o}),o.one("layoutstop",l.stop),o.emit({type:"layoutstop",layout:o});return this},layout:function(o){return this.cy().makeLayout(Zt({},o,{eles:this}))}};function tg(c,o,l){var p,d=l._private,f=d.styleCache=d.styleCache||[];return null!=(p=f[c])||(p=f[c]=o(l)),p}function kd(c,o){return c=Aa(c),function(d){return tg(c,o,d)}}function cc(c,o){c=Aa(c);var l=function(f){return o.call(f)};return function(){var f=this[0];if(f)return tg(c,l,f)}}Sl.createLayout=Sl.makeLayout=Sl.layout;var ji={recalculateRenderedStyle:function(o){var l=this.cy(),d=l.renderer(),f=l.styleEnabled();return d&&f&&d.recalculateRenderedStyle(this,o),this},dirtyStyleCache:function(){var d,o=this.cy(),l=function(p){return p._private.styleCache=null};return o.hasCompoundNodes()?((d=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(d.connectedEdges()),d.forEach(l)):this.forEach(function(f){l(f),f.connectedEdges().forEach(l)}),this},updateStyle:function(o){var l=this._private.cy;if(!l.styleEnabled())return this;if(l.batching())return l._private.batchStyleEles.merge(this),this;var p=this;o=!(!o&&void 0!==o),l.hasCompoundNodes()&&(p=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var g=p;return o?g.emitAndNotify("style"):g.emit("style"),p.forEach(function(y){return y._private.styleDirty=!0}),this},cleanStyle:function(){var o=this.cy();if(o.styleEnabled())for(var l=0;l<this.length;l++){var d=this[l];d._private.styleDirty&&(d._private.styleDirty=!1,o.style().apply(d))}},parsedStyle:function(o){var l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],d=this[0],f=d.cy();if(f.styleEnabled()&&d){this.cleanStyle();var p=d._private.style[o];return p??(l?f.style().getDefaultProperty(o):null)}},numericStyle:function(o){var l=this[0];if(l.cy().styleEnabled()&&l){var d=l.pstyle(o);return void 0!==d.pfValue?d.pfValue:d.value}},numericStyleUnits:function(o){var l=this[0];if(l.cy().styleEnabled()&&l)return l.pstyle(o).units},renderedStyle:function(o){var l=this.cy();if(!l.styleEnabled())return this;var d=this[0];return d?l.style().getRenderedStyle(d,o):void 0},style:function(o,l){var d=this.cy();if(!d.styleEnabled())return this;var p=d.style();if(Ie(o))p.applyBypass(this,o,!1),this.emitAndNotify("style");else if(ye(o)){if(void 0===l){var y=this[0];return y?p.getStylePropertyValue(y,o):void 0}p.applyBypass(this,o,l,!1),this.emitAndNotify("style")}else if(void 0===o){var _=this[0];return _?p.getRawStyle(_):void 0}return this},removeStyle:function(o){var l=this.cy();if(!l.styleEnabled())return this;var f=l.style(),p=this;if(void 0===o)for(var g=0;g<p.length;g++)f.removeAllBypasses(p[g],!1);else{o=o.split(/\s+/);for(var _=0;_<p.length;_++)f.removeBypasses(p[_],o,!1)}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var o=this.cy();if(!o.styleEnabled())return 1;var l=o.hasCompoundNodes(),d=this[0];if(d){var f=d._private,p=d.pstyle("opacity").value;if(!l)return p;var g=f.data.parent?d.parents():null;if(g)for(var y=0;y<g.length;y++)p*=g[y].pstyle("opacity").value;return p}},transparent:function(){if(!this.cy().styleEnabled())return!1;var l=this[0],d=l.cy().hasCompoundNodes();return l?d?0===l.effectiveOpacity():0===l.pstyle("opacity").value:void 0},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function au(c,o){var d=c._private.data.parent?c.parents():null;if(d)for(var f=0;f<d.length;f++)if(!o(d[f]))return!1;return!0}function Id(c){var o=c.ok,l=c.edgeOkViaNode||c.ok,d=c.parentOk||c.ok;return function(){var f=this.cy();if(!f.styleEnabled())return!0;var p=this[0],g=f.hasCompoundNodes();if(p){var y=p._private;if(!o(p))return!1;if(p.isNode())return!g||au(p,d);var _=y.source,b=y.target;return l(_)&&(!g||au(_,l))&&(_===b||l(b)&&(!g||au(b,l)))}}}var Va=kd("eleTakesUpSpace",function(c){return"element"===c.pstyle("display").value&&0!==c.width()&&(!c.isNode()||0!==c.height())});ji.takesUpSpace=cc("takesUpSpace",Id({ok:Va}));var J1=kd("eleInteractive",function(c){return"yes"===c.pstyle("events").value&&"visible"===c.pstyle("visibility").value&&Va(c)}),ly=kd("parentInteractive",function(c){return"visible"===c.pstyle("visibility").value&&Va(c)});ji.interactive=cc("interactive",Id({ok:J1,parentOk:ly,edgeOkViaNode:Va})),ji.noninteractive=function(){var c=this[0];if(c)return!c.interactive()};var cy=kd("eleVisible",function(c){return"visible"===c.pstyle("visibility").value&&0!==c.pstyle("opacity").pfValue&&Va(c)});ji.visible=cc("visible",Id({ok:cy,edgeOkViaNode:Va})),ji.hidden=function(){var c=this[0];if(c)return!c.visible()},ji.isBundledBezier=cc("isBundledBezier",function(){return!!this.cy().styleEnabled()&&!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace()}),ji.bypass=ji.css=ji.style,ji.renderedCss=ji.renderedStyle,ji.removeBypass=ji.removeCss=ji.removeStyle,ji.pstyle=ji.parsedStyle;var Ui={};function uy(c){return function(){var o=arguments,l=[];if(2===o.length){var d=o[0],f=o[1];this.on(c.event,d,f)}else if(1===o.length&&$e(o[0])){var p=o[0];this.on(c.event,p)}else if(0===o.length||1===o.length&&He(o[0])){for(var g=1===o.length?o[0]:null,y=0;y<this.length;y++){var _=this[y],b=!c.ableField||_._private[c.ableField],w=_._private[c.field]!=c.value;if(c.overrideAble){var E=c.overrideAble(_);if(void 0!==E&&(b=E,!E))return this}b&&(_._private[c.field]=c.value,w&&l.push(_))}var M=this.spawn(l);M.updateStyle(),M.emit(c.event),g&&M.emit(g)}return this}}function Ha(c){Ui[c.field]=function(){var o=this[0];if(o){if(c.overrideField){var l=c.overrideField(o);if(void 0!==l)return l}return o._private[c.field]}},Ui[c.on]=uy({event:c.on,field:c.field,ableField:c.ableField,overrideAble:c.overrideAble,value:!0}),Ui[c.off]=uy({event:c.off,field:c.field,ableField:c.ableField,overrideAble:c.overrideAble,value:!1})}Ha({field:"locked",overrideField:function(o){return!!o.cy().autolock()||void 0},on:"lock",off:"unlock"}),Ha({field:"grabbable",overrideField:function(o){return!o.cy().autoungrabify()&&!o.pannable()&&void 0},on:"grabify",off:"ungrabify"}),Ha({field:"selected",ableField:"selectable",overrideAble:function(o){return!o.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),Ha({field:"selectable",overrideField:function(o){return!o.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),Ui.deselect=Ui.unselect,Ui.grabbed=function(){var c=this[0];if(c)return c._private.grabbed},Ha({field:"active",on:"activate",off:"unactivate"}),Ha({field:"pannable",on:"panify",off:"unpanify"}),Ui.inactive=function(){var c=this[0];if(c)return!c._private.active};var Ai={},ng=function(o){return function(d){for(var p=[],g=0;g<this.length;g++){var y=this[g];if(y.isNode()){for(var _=!1,b=y.connectedEdges(),w=0;w<b.length;w++){var E=b[w],M=E.source(),R=E.target();if(o.noIncomingEdges&&R===y&&M!==y||o.noOutgoingEdges&&M===y&&R!==y){_=!0;break}}_||p.push(y)}}return this.spawn(p,!0).filter(d)}},Qh=function(o){return function(l){for(var f=[],p=0;p<this.length;p++){var g=this[p];if(g.isNode())for(var y=g.connectedEdges(),_=0;_<y.length;_++){var b=y[_],w=b.source(),E=b.target();o.outgoing&&w===g?(f.push(b),f.push(E)):o.incoming&&E===g&&(f.push(b),f.push(w))}}return this.spawn(f,!0).filter(l)}},Jh=function(o){return function(l){for(var d=this,f=[],p={};;){var g=o.outgoing?d.outgoers():d.incomers();if(0===g.length)break;for(var y=!1,_=0;_<g.length;_++){var b=g[_],w=b.id();p[w]||(p[w]=!0,f.push(b),y=!0)}if(!y)break;d=g}return this.spawn(f,!0).filter(l)}};function dy(c){return function(l){for(var d=[],f=0;f<this.length;f++){var g=this[f]._private[c.attr];g&&d.push(g)}return this.spawn(d,!0).filter(l)}}function rg(c){return function(l){var d=[],f=this._private.cy,p=c||{};ye(l)&&(l=f.$(l));for(var g=0;g<l.length;g++)for(var y=l[g]._private.edges,_=0;_<y.length;_++){var b=y[_],w=b._private.data,E=this.hasElementWithId(w.source)&&l.hasElementWithId(w.target),M=l.hasElementWithId(w.source)&&this.hasElementWithId(w.target);(E||M)&&((p.thisIsSrc||p.thisIsTgt)&&(p.thisIsSrc&&!E||p.thisIsTgt&&!M)||d.push(b))}return this.spawn(d,!0)}}function ig(c){return c=Zt({},{codirected:!1},c),function(d){for(var f=[],p=this.edges(),g=c,y=0;y<p.length;y++)for(var b=p[y]._private,w=b.source,E=w._private.data.id,M=b.data.target,R=w._private.edges,P=0;P<R.length;P++){var $=R[P],K=$._private.data,J=K.target,ne=K.source,re=J===M&&ne===E;(g.codirected&&re||!g.codirected&&(re||E===J&&M===ne))&&f.push($)}return this.spawn(f,!0).filter(d)}}Ai.clearTraversalCache=function(){for(var c=0;c<this.length;c++)this[c]._private.traversalCache=null},Zt(Ai,{roots:ng({noIncomingEdges:!0}),leaves:ng({noOutgoingEdges:!0}),outgoers:Js(Qh({outgoing:!0}),"outgoers"),successors:Jh({outgoing:!0}),incomers:Js(Qh({incoming:!0}),"incomers"),predecessors:Jh({incoming:!0})}),Zt(Ai,{neighborhood:Js(function(c){for(var o=[],l=this.nodes(),d=0;d<l.length;d++)for(var f=l[d],p=f.connectedEdges(),g=0;g<p.length;g++){var y=p[g],_=y.source(),b=y.target(),w=f===_?b:_;w.length>0&&o.push(w[0]),o.push(y[0])}return this.spawn(o,!0).filter(c)},"neighborhood"),closedNeighborhood:function(o){return this.neighborhood().add(this).filter(o)},openNeighborhood:function(o){return this.neighborhood(o)}}),Ai.neighbourhood=Ai.neighborhood,Ai.closedNeighbourhood=Ai.closedNeighborhood,Ai.openNeighbourhood=Ai.openNeighborhood,Zt(Ai,{source:Js(function(o){var d,l=this[0];return l&&(d=l._private.source||l.cy().collection()),d&&o?d.filter(o):d},"source"),target:Js(function(o){var d,l=this[0];return l&&(d=l._private.target||l.cy().collection()),d&&o?d.filter(o):d},"target"),sources:dy({attr:"source"}),targets:dy({attr:"target"})}),Zt(Ai,{edgesWith:Js(rg(),"edgesWith"),edgesTo:Js(rg({thisIsSrc:!0}),"edgesTo")}),Zt(Ai,{connectedEdges:Js(function(c){for(var o=[],d=0;d<this.length;d++){var f=this[d];if(f.isNode())for(var p=f._private.edges,g=0;g<p.length;g++)o.push(p[g])}return this.spawn(o,!0).filter(c)},"connectedEdges"),connectedNodes:Js(function(c){for(var o=[],d=0;d<this.length;d++){var f=this[d];f.isEdge()&&(o.push(f.source()[0]),o.push(f.target()[0]))}return this.spawn(o,!0).filter(c)},"connectedNodes"),parallelEdges:Js(ig(),"parallelEdges"),codirectedEdges:Js(ig({codirected:!0}),"codirectedEdges")}),Zt(Ai,{components:function(o){var l=this,d=l.cy(),f=d.collection(),p=null==o?l.nodes():o.nodes(),g=[];null!=o&&p.empty()&&(p=o.sources());var y=function(w,E){f.merge(w),p.unmerge(w),E.merge(w)};if(p.empty())return l.spawn();var _=function(){var w=d.collection();g.push(w);var E=p[0];y(E,w),l.bfs({directed:!1,roots:E,visit:function(R){return y(R,w)}}),w.forEach(function(M){M.connectedEdges().forEach(function(R){l.has(R)&&w.has(R.source())&&w.has(R.target())&&w.merge(R)})})};do{_()}while(p.length>0);return g},component:function(){var o=this[0];return o.cy().mutableElements().components(o)[0]}}),Ai.componentsOf=Ai.components;var Ti=function(o,l){var d=arguments.length>2&&void 0!==arguments[2]&&arguments[2],f=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(void 0!==o){var p=new cs,g=!1;if(l){if(l.length>0&&Ie(l[0])&&!Je(l[0])){g=!0;for(var y=[],_=new ka,b=0,w=l.length;b<w;b++){var E=l[b];null==E.data&&(E.data={});var M=E.data;if(null==M.id)M.id=dl();else if(o.hasElementWithId(M.id)||_.has(M.id))continue;var R=new fl(o,E,!1);y.push(R),_.add(M.id)}l=y}}else l=[];this.length=0;for(var P=0,$=l.length;P<$;P++){var K=l[P][0];if(null!=K){var J=K._private.data.id;(!d||!p.has(J))&&(d&&p.set(J,{index:this.length,ele:K}),this[this.length]=K,this.length++)}}this._private={eles:this,cy:o,get map(){return null==this.lazyMap&&this.rebuildMap(),this.lazyMap},set map(ne){this.lazyMap=ne},rebuildMap:function(){for(var re=this.lazyMap=new cs,ue=this.eles,Ce=0;Ce<ue.length;Ce++){var Se=ue[Ce];re.set(Se.id(),{index:Ce,ele:Se})}}},d&&(this._private.map=p),g&&!f&&this.restore()}else Sr("A collection must have a reference to the core")},kr=fl.prototype=Ti.prototype=Object.create(Array.prototype);kr.instanceString=function(){return"collection"},kr.spawn=function(c,o){return new Ti(this.cy(),c,o)},kr.spawnSelf=function(){return this.spawn(this)},kr.cy=function(){return this._private.cy},kr.renderer=function(){return this._private.cy.renderer()},kr.element=function(){return this[0]},kr.collection=function(){return Pt(this)?this:new Ti(this._private.cy,[this])},kr.unique=function(){return new Ti(this._private.cy,this,!0)},kr.hasElementWithId=function(c){return this._private.map.has(c=""+c)},kr.getElementById=function(c){var o=this._private.cy,l=this._private.map.get(c=""+c);return l?l.ele:new Ti(o)},kr.$id=kr.getElementById,kr.poolIndex=function(){return this._private.cy._private.elements._private.map.get(this[0]._private.data.id).index},kr.indexOf=function(c){return this._private.map.get(c[0]._private.data.id).index},kr.indexOfId=function(c){return this._private.map.get(c=""+c).index},kr.json=function(c){var o=this.element(),l=this.cy();if(null==o&&c)return this;if(null!=o){var d=o._private;if(Ie(c)){if(l.startBatch(),c.data){o.data(c.data);var f=d.data;if(o.isEdge()){var p=!1,g={},y=c.data.source,_=c.data.target;null!=y&&y!=f.source&&(g.source=""+y,p=!0),null!=_&&_!=f.target&&(g.target=""+_,p=!0),p&&(o=o.move(g))}else{var w=c.data.parent;"parent"in c.data&&(null!=w||null!=f.parent)&&w!=f.parent&&(void 0===w&&(w=null),null!=w&&(w=""+w),o=o.move({parent:w}))}}c.position&&o.position(c.position);var E=function($,K,J){var ne=c[$];null!=ne&&ne!==d[$]&&(ne?o[K]():o[J]())};return E("removed","remove","restore"),E("selected","select","unselect"),E("selectable","selectify","unselectify"),E("locked","lock","unlock"),E("grabbable","grabify","ungrabify"),E("pannable","panify","unpanify"),null!=c.classes&&o.classes(c.classes),l.endBatch(),this}if(void 0===c){var M={data:Is(d.data),position:Is(d.position),group:d.group,removed:d.removed,selected:d.selected,selectable:d.selectable,locked:d.locked,grabbable:d.grabbable,pannable:d.pannable,classes:""},R=0;return d.classes.forEach(function(P){return M.classes+=0==R++?P:" "+P}),M}}},kr.jsons=function(){for(var c=[],o=0;o<this.length;o++){var d=this[o].json();c.push(d)}return c},kr.clone=function(){for(var c=this.cy(),o=[],l=0;l<this.length;l++){var f=this[l].json(),p=new fl(c,f,!1);o.push(p)}return new Ti(c,o)},kr.copy=kr.clone,kr.restore=function(){for(var y,c=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],l=this,d=l.cy(),f=d._private,p=[],g=[],_=0,b=l.length;_<b;_++){var w=l[_];o&&!w.removed()||(w.isNode()?p.push(w):g.push(w))}y=p.concat(g);var E,M=function(){y.splice(E,1),E--};for(E=0;E<y.length;E++){var R=y[E],P=R._private,$=P.data;if(R.clearTraversalCache(),o||P.removed)if(void 0===$.id)$.id=dl();else if(pe($.id))$.id=""+$.id;else{if(We($.id)||!ye($.id)){Sr("Can not create element with invalid string ID `"+$.id+"`"),M();continue}if(d.hasElementWithId($.id)){Sr("Can not create second element with ID `"+$.id+"`"),M();continue}}var K=$.id;if(R.isNode()){var J=P.position;null==J.x&&(J.x=0),null==J.y&&(J.y=0)}if(R.isEdge()){for(var ne=R,re=["source","target"],ue=re.length,Ce=!1,Se=0;Se<ue;Se++){var de=re[Se],Ee=$[de];pe(Ee)&&(Ee=$[de]=""+$[de]),null==Ee||""===Ee?(Sr("Can not create edge `"+K+"` with unspecified "+de),Ce=!0):d.hasElementWithId(Ee)||(Sr("Can not create edge `"+K+"` with nonexistant "+de+" `"+Ee+"`"),Ce=!0)}if(Ce){M();continue}var he=d.getElementById($.source),ke=d.getElementById($.target);he.same(ke)?he._private.edges.push(ne):(he._private.edges.push(ne),ke._private.edges.push(ne)),ne._private.source=he,ne._private.target=ke}P.map=new cs,P.map.set(K,{ele:R,index:0}),P.removed=!1,o&&d.addToPool(R)}for(var Te=0;Te<p.length;Te++){var ge=p[Te],Fe=ge._private.data;pe(Fe.parent)&&(Fe.parent=""+Fe.parent);var Me=Fe.parent,Xe=null!=Me;if(Xe||ge._private.parent){var Ve=ge._private.parent?d.collection().merge(ge._private.parent):d.getElementById(Me);if(Ve.empty())Fe.parent=void 0;else if(Ve[0].removed())ur("Node added with missing parent, reference to parent removed"),Fe.parent=void 0,ge._private.parent=null;else{for(var je=!1,Qe=Ve;!Qe.empty();){if(ge.same(Qe)){je=!0,Fe.parent=void 0;break}Qe=Qe.parent()}je||(Ve[0]._private.children.push(ge),ge._private.parent=Ve[0],f.hasCompoundNodes=!0)}}}if(y.length>0){for(var it=y.length===l.length?l:new Ti(d,y),ct=0;ct<it.length;ct++){var rt=it[ct];rt.isNode()||(rt.parallelEdges().clearTraversalCache(),rt.source().clearTraversalCache(),rt.target().clearTraversalCache())}(f.hasCompoundNodes?d.collection().merge(it).merge(it.connectedNodes()).merge(it.parent()):it).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(c),c?it.emitAndNotify("add"):o&&it.emit("add")}return l},kr.removed=function(){var c=this[0];return c&&c._private.removed},kr.inside=function(){var c=this[0];return c&&!c._private.removed},kr.remove=function(){var c=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],l=this,d=[],f={},p=l._private.cy;function g(Me){for(var Xe=Me._private.edges,Ve=0;Ve<Xe.length;Ve++)_(Xe[Ve])}function y(Me){for(var Xe=Me._private.children,Ve=0;Ve<Xe.length;Ve++)_(Xe[Ve])}function _(Me){var Xe=f[Me.id()];o&&Me.removed()||Xe||(f[Me.id()]=!0,Me.isNode()?(d.push(Me),g(Me),y(Me)):d.unshift(Me))}for(var b=0,w=l.length;b<w;b++){var E=l[b];_(E)}function M(Me,Xe){ia(Me._private.edges,Xe),Me.clearTraversalCache()}function R(Me){Me.clearTraversalCache()}var P=[];function $(Me,Xe){Xe=Xe[0];var Ve=(Me=Me[0])._private.children,je=Me.id();ia(Ve,Xe),Xe._private.parent=null,P.ids[je]||(P.ids[je]=!0,P.push(Me))}P.ids={},l.dirtyCompoundBoundsCache(),o&&p.removeFromPool(d);for(var K=0;K<d.length;K++){var J=d[K];if(J.isEdge()){var ne=J.source()[0],re=J.target()[0];M(ne,J),M(re,J);for(var ue=J.parallelEdges(),Ce=0;Ce<ue.length;Ce++){var Se=ue[Ce];R(Se),Se.isBundledBezier()&&Se.dirtyBoundingBoxCache()}}else{var de=J.parent();0!==de.length&&$(de,J)}o&&(J._private.removed=!0)}var Ee=p._private.elements;p._private.hasCompoundNodes=!1;for(var he=0;he<Ee.length;he++){var ke=Ee[he];if(ke.isParent()){p._private.hasCompoundNodes=!0;break}}var Te=new Ti(this.cy(),d);Te.size()>0&&(c?Te.emitAndNotify("remove"):o&&Te.emit("remove"));for(var ge=0;ge<P.length;ge++){var Fe=P[ge];(!o||!Fe.removed())&&Fe.updateStyle()}return Te},kr.move=function(c){var o=this._private.cy,l=this,d=!1,f=!1,p=function(P){return null==P?P:""+P};if(void 0!==c.source||void 0!==c.target){var g=p(c.source),y=p(c.target),_=null!=g&&o.hasElementWithId(g),b=null!=y&&o.hasElementWithId(y);(_||b)&&(o.batch(function(){l.remove(d,f),l.emitAndNotify("moveout");for(var R=0;R<l.length;R++){var P=l[R],$=P._private.data;P.isEdge()&&(_&&($.source=g),b&&($.target=y))}l.restore(d,f)}),l.emitAndNotify("move"))}else if(void 0!==c.parent){var w=p(c.parent);if(null===w||o.hasElementWithId(w)){var M=null===w?void 0:w;o.batch(function(){var R=l.remove(d,f);R.emitAndNotify("moveout");for(var P=0;P<l.length;P++){var $=l[P],K=$._private.data;$.isNode()&&(K.parent=M)}R.restore(d,f)}),l.emitAndNotify("move")}}return this},[Bv,K1,sa,yn,wd,At,Un,Iw,Rw,sy,{isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var o=this[0];if(o)return o._private.group}},ou,Sl,ji,Ui,Ai].forEach(function(c){Zt(kr,c)});var Lw={add:function(o){var l,d=this;if(Oe(o)){var f=o;if(f._private.cy===d)l=f.restore();else{for(var p=[],g=0;g<f.length;g++)p.push(f[g].json());l=new Ti(d,p)}}else if(He(o))l=new Ti(d,o);else if(Ie(o)&&(He(o.nodes)||He(o.edges))){for(var b=o,w=[],E=["nodes","edges"],M=0,R=E.length;M<R;M++){var P=E[M],$=b[P];if(He($))for(var K=0,J=$.length;K<J;K++){var ne=Zt({group:P},$[K]);w.push(ne)}}l=new Ti(d,w)}else l=new fl(d,o).collection();return l},remove:function(o){return Oe(o)||ye(o)&&(o=this.$(o)),o.remove()}},uc=function(){function c(d){return-d.tension*d.x-d.friction*d.v}function o(d,f,p){var g={x:d.x+p.dx*f,v:d.v+p.dv*f,tension:d.tension,friction:d.friction};return{dx:g.v,dv:c(g)}}function l(d,f){var p={dx:d.v,dv:c(d)},g=o(d,.5*f,p),y=o(d,.5*f,g),_=o(d,f,y),w=1/6*(p.dv+2*(g.dv+y.dv)+_.dv);return d.x=d.x+1/6*(p.dx+2*(g.dx+y.dx)+_.dx)*f,d.v=d.v+w*f,d}return function d(f,p,g){var M,R,P,y={x:-1,v:0,tension:null,friction:null},_=[0],b=0,w=1e-4;for(f=parseFloat(f)||500,p=parseFloat(p)||20,g=g||null,y.tension=f,y.friction=p,R=(M=null!==g)?(b=d(f,p))/g*.016:.016;P=l(P||y,R),_.push(1+P.x),b+=16,Math.abs(P.x)>w&&Math.abs(P.v)>w;);return M?function($){return _[$*(_.length-1)|0]}:b}}(),Rr=function(o,l,d,f){var p=function ef(c,o,l,d){var f=4,p=.001,g=1e-7,y=10,_=11,b=1/(_-1),w=typeof Float32Array<"u";if(4!==arguments.length)return!1;for(var E=0;E<4;++E)if("number"!=typeof arguments[E]||isNaN(arguments[E])||!isFinite(arguments[E]))return!1;c=Math.min(c,1),l=Math.min(l,1),c=Math.max(c,0),l=Math.max(l,0);var M=w?new Float32Array(_):new Array(_);function R(ke,Te){return 1-3*Te+3*ke}function P(ke,Te){return 3*Te-6*ke}function $(ke){return 3*ke}function K(ke,Te,ge){return((R(Te,ge)*ke+P(Te,ge))*ke+$(Te))*ke}function J(ke,Te,ge){return 3*R(Te,ge)*ke*ke+2*P(Te,ge)*ke+$(Te)}function ne(ke,Te){for(var ge=0;ge<f;++ge){var Fe=J(Te,c,l);if(0===Fe)return Te;Te-=(K(Te,c,l)-ke)/Fe}return Te}function re(){for(var ke=0;ke<_;++ke)M[ke]=K(ke*b,c,l)}function ue(ke,Te,ge){var Fe,Me,Xe=0;do{(Fe=K(Me=Te+(ge-Te)/2,c,l)-ke)>0?ge=Me:Te=Me}while(Math.abs(Fe)>g&&++Xe<y);return Me}function Ce(ke){for(var Te=0,ge=1,Fe=_-1;ge!==Fe&&M[ge]<=ke;++ge)Te+=b;--ge;var Xe=Te+(ke-M[ge])/(M[ge+1]-M[ge])*b,Ve=J(Xe,c,l);return Ve>=p?ne(ke,Xe):0===Ve?Xe:ue(ke,Te,Te+b)}var Se=!1;function de(){Se=!0,(c!==o||l!==d)&&re()}var Ee=function(Te){return Se||de(),c===o&&l===d?Te:0===Te?0:1===Te?1:K(Ce(Te),o,d)};Ee.getControlPoints=function(){return[{x:c,y:o},{x:l,y:d}]};var he="generateBezier("+[c,o,l,d]+")";return Ee.toString=function(){return he},Ee}(o,l,d,f);return function(g,y,_){return g+(y-g)*p(_)}},Od={linear:function(o,l,d){return o+(l-o)*d},ease:Rr(.25,.1,.25,1),"ease-in":Rr(.42,0,1,1),"ease-out":Rr(0,0,.58,1),"ease-in-out":Rr(.42,0,.58,1),"ease-in-sine":Rr(.47,0,.745,.715),"ease-out-sine":Rr(.39,.575,.565,1),"ease-in-out-sine":Rr(.445,.05,.55,.95),"ease-in-quad":Rr(.55,.085,.68,.53),"ease-out-quad":Rr(.25,.46,.45,.94),"ease-in-out-quad":Rr(.455,.03,.515,.955),"ease-in-cubic":Rr(.55,.055,.675,.19),"ease-out-cubic":Rr(.215,.61,.355,1),"ease-in-out-cubic":Rr(.645,.045,.355,1),"ease-in-quart":Rr(.895,.03,.685,.22),"ease-out-quart":Rr(.165,.84,.44,1),"ease-in-out-quart":Rr(.77,0,.175,1),"ease-in-quint":Rr(.755,.05,.855,.06),"ease-out-quint":Rr(.23,1,.32,1),"ease-in-out-quint":Rr(.86,0,.07,1),"ease-in-expo":Rr(.95,.05,.795,.035),"ease-out-expo":Rr(.19,1,.22,1),"ease-in-out-expo":Rr(1,0,0,1),"ease-in-circ":Rr(.6,.04,.98,.335),"ease-out-circ":Rr(.075,.82,.165,1),"ease-in-out-circ":Rr(.785,.135,.15,.86),spring:function(o,l,d){if(0===d)return Od.linear;var f=uc(o,l,d);return function(p,g,y){return p+(g-p)*f(y)}},"cubic-bezier":Rr};function sg(c,o,l,d,f){if(1===d||o===l)return l;var p=f(o,l,d);return null==c||((c.roundValue||c.color)&&(p=Math.round(p)),void 0!==c.min&&(p=Math.max(p,c.min)),void 0!==c.max&&(p=Math.min(p,c.max))),p}function dc(c,o){return null!=c.pfValue||null!=c.value?null==c.pfValue||null!=o&&"%"===o.type.units?c.value:c.pfValue:c}function lu(c,o,l,d,f){var p=null!=f?f.type:null;l<0?l=0:l>1&&(l=1);var g=dc(c,f),y=dc(o,f);if(pe(g)&&pe(y))return sg(p,g,y,l,d);if(He(g)&&He(y)){for(var _=[],b=0;b<y.length;b++){var w=g[b],E=y[b];if(null!=w&&null!=E){var M=sg(p,w,E,l,d);_.push(M)}else _.push(E)}return _}}function Gi(c,o,l,d){var f=!d,p=c._private,g=o._private,y=g.easing,_=g.startTime,w=(d?c:c.cy()).style();if(!g.easingImpl)if(null==y)g.easingImpl=Od.linear;else{var E,R,P;E=ye(y)?w.parse("transition-timing-function",y).value:y,ye(E)?(R=E,P=[]):(R=E[1],P=E.slice(2).map(function(it){return+it})),P.length>0?("spring"===R&&P.push(g.duration),g.easingImpl=Od[R].apply(null,P)):g.easingImpl=Od[R]}var K,$=g.easingImpl;if(K=0===g.duration?1:(l-_)/g.duration,g.applying&&(K=g.progress),K<0?K=0:K>1&&(K=1),null==g.delay){var J=g.startPosition,ne=g.position;if(ne&&f&&!c.locked()){var re={};hc(J.x,ne.x)&&(re.x=lu(J.x,ne.x,K,$)),hc(J.y,ne.y)&&(re.y=lu(J.y,ne.y,K,$)),c.position(re)}var ue=g.startPan,Ce=g.pan,Se=p.pan,de=null!=Ce&&d;de&&(hc(ue.x,Ce.x)&&(Se.x=lu(ue.x,Ce.x,K,$)),hc(ue.y,Ce.y)&&(Se.y=lu(ue.y,Ce.y,K,$)),c.emit("pan"));var Ee=g.startZoom,he=g.zoom,ke=null!=he&&d;ke&&(hc(Ee,he)&&(p.zoom=wn(p.minZoom,lu(Ee,he,K,$),p.maxZoom)),c.emit("zoom")),(de||ke)&&c.emit("viewport");var Te=g.style;if(Te&&Te.length>0&&f){for(var ge=0;ge<Te.length;ge++){var Fe=Te[ge],Me=Fe.name,Ve=g.startStyle[Me],Qe=lu(Ve,Fe,K,$,w.properties[Ve.name]);w.overrideBypass(c,Me,Qe)}c.emit("style")}}return g.progress=K,K}function hc(c,o){return!!(null!=c&&null!=o&&(pe(c)&&pe(o)||c&&o))}function Fw(c,o,l,d){var f=o._private;f.started=!0,f.startTime=l-f.progress*f.duration}function og(c,o){var l=o._private.aniEles,d=[];function f(w,E){var M=w._private,R=M.animation.current,P=M.animation.queue,$=!1;if(0===R.length){var K=P.shift();K&&R.push(K)}for(var J=function(Se){for(var de=Se.length-1;de>=0;de--)(0,Se[de])();Se.splice(0,Se.length)},ne=R.length-1;ne>=0;ne--){var re=R[ne],ue=re._private;ue.stopped?(R.splice(ne,1),ue.hooked=!1,ue.playing=!1,ue.started=!1,J(ue.frames)):!ue.playing&&!ue.applying||(ue.playing&&ue.applying&&(ue.applying=!1),ue.started||Fw(0,re,c),Gi(w,re,c,E),ue.applying&&(ue.applying=!1),J(ue.frames),null!=ue.step&&ue.step(c),re.completed()&&(R.splice(ne,1),ue.hooked=!1,ue.playing=!1,ue.started=!1,J(ue.completes)),$=!0)}return!E&&0===R.length&&0===P.length&&d.push(w),$}for(var p=!1,g=0;g<l.length;g++){var _=f(l[g]);p=p||_}var b=f(o,!0);(p||b)&&(l.length>0?o.notify("draw",l):o.notify("draw")),l.unmerge(d),o.emit("step")}var Rd={animate:Dr.animate(),animation:Dr.animation(),animated:Dr.animated(),clearQueue:Dr.clearQueue(),delay:Dr.delay(),delayAnimation:Dr.delayAnimation(),stop:Dr.stop(),addToAnimationPool:function(o){this.styleEnabled()&&this._private.aniEles.merge(o)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var o=this;if(o._private.animationsRunning=!0,o.styleEnabled()){var d=o.renderer();d&&d.beforeRender?d.beforeRender(function(p,g){og(g,o)},d.beforeRenderPriorities.animations):function l(){o._private.animationsRunning&&ll(function(p){og(p,o),l()})}()}}},cu={qualifierCompare:function(o,l){return null==o||null==l?null==o&&null==l:o.sameText(l)},eventMatches:function(o,l,d){var f=l.qualifier;return null==f||o!==d.target&&Je(d.target)&&f.matches(d.target)},addEventFields:function(o,l){l.cy=o,l.target=o},callbackContext:function(o,l,d){return null!=l.qualifier?d.target:o}},za=function(o){return ye(o)?new Fa(o):o},fc={createEmitter:function(){var o=this._private;return o.emitter||(o.emitter=new Td(cu,this)),this},emitter:function(){return this._private.emitter},on:function(o,l,d){return this.emitter().on(o,za(l),d),this},removeListener:function(o,l,d){return this.emitter().removeListener(o,za(l),d),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(o,l,d){return this.emitter().one(o,za(l),d),this},once:function(o,l,d){return this.emitter().one(o,za(l),d),this},emit:function(o,l){return this.emitter().emit(o,l),this},emitAndNotify:function(o,l){return this.emit(o),this.notify(o,l),this}};Dr.eventAliasesOn(fc);var tf={png:function(o){return this._private.renderer.png(o=o||{})},jpg:function(o){var l=this._private.renderer;return(o=o||{}).bg=o.bg||"#fff",l.jpg(o)}};tf.jpeg=tf.jpg;var uu={layout:function(o){var l=this;if(null!=o)if(null!=o.name){var p,d=o.name,f=l.extension("layout",d);if(null!=f)return p=ye(o.eles)?l.$(o.eles):null!=o.eles?o.eles:l.$(),new f(Zt({},o,{cy:l,eles:p}));Sr("No such layout `"+d+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else Sr("A `name` must be specified to make a layout");else Sr("Layout options must be specified to make a layout")}};uu.createLayout=uu.makeLayout=uu.layout;var du={notify:function(o,l){var d=this._private;if(this.batching()){d.batchNotifications=d.batchNotifications||{};var f=d.batchNotifications[o]=d.batchNotifications[o]||this.collection();null!=l&&f.merge(l)}else if(d.notificationsEnabled){var p=this.renderer();this.destroyed()||!p||p.notify(o,l)}},notifications:function(o){var l=this._private;return void 0===o?l.notificationsEnabled:(l.notificationsEnabled=!!o,this)},noNotifications:function(o){this.notifications(!1),o(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var o=this._private;return null==o.batchCount&&(o.batchCount=0),0===o.batchCount&&(o.batchStyleEles=this.collection(),o.batchNotifications={}),o.batchCount++,this},endBatch:function(){var o=this._private;if(0===o.batchCount)return this;if(o.batchCount--,0===o.batchCount){o.batchStyleEles.updateStyle();var l=this.renderer();Object.keys(o.batchNotifications).forEach(function(d){var f=o.batchNotifications[d];f.empty()?l.notify(d):l.notify(d,f)})}return this},batch:function(o){return this.startBatch(),o(),this.endBatch(),this},batchData:function(o){var l=this;return this.batch(function(){for(var d=Object.keys(o),f=0;f<d.length;f++){var p=d[f],g=o[p];l.getElementById(p).data(g)}})}},eM=yi({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),ag={renderTo:function(o,l,d,f){return this._private.renderer.renderTo(o,l,d,f),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(o){var l=this,d=l.extension("renderer",o.name);if(null!=d){void 0!==o.wheelSensitivity&&ur("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var f=eM(o);f.cy=l,l._private.renderer=new d(f),this.notify("init")}else Sr("Can not initialise: No such renderer `".concat(o.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))},destroyRenderer:function(){var o=this;o.notify("destroy");var l=o.container();if(l)for(l._cyreg=null;l.childNodes.length>0;)l.removeChild(l.childNodes[0]);o._private.renderer=null,o.mutableElements().forEach(function(d){var f=d._private;f.rscratch={},f.rstyle={},f.animation.current=[],f.animation.queue=[]})},onRender:function(o){return this.on("render",o)},offRender:function(o){return this.off("render",o)}};ag.invalidateDimensions=ag.resize;var Gt={collection:function(o,l){return ye(o)?this.$(o):Oe(o)?o.collection():He(o)?(l||(l={}),new Ti(this,o,l.unique,l.removed)):new Ti(this)},nodes:function(o){var l=this.$(function(d){return d.isNode()});return o?l.filter(o):l},edges:function(o){var l=this.$(function(d){return d.isEdge()});return o?l.filter(o):l},$:function(o){var l=this._private.elements;return o?l.filter(o):l.spawnSelf()},mutableElements:function(){return this._private.elements}};Gt.elements=Gt.filter=Gt.$;var fs={apply:function(c){for(var o=this,f=o._private.cy.collection(),p=0;p<c.length;p++){var g=c[p],y=o.getContextMeta(g);if(!y.empty){var _=o.getContextStyle(y),b=o.applyContextStyle(y,_,g);g._private.appliedInitStyle?o.updateTransitions(g,b.diffProps):g._private.appliedInitStyle=!0,o.updateStyleHints(g)&&f.push(g)}}return f},getPropertiesDiff:function(c,o){var l=this,d=l._private.propDiffs=l._private.propDiffs||{},f=c+"-"+o,p=d[f];if(p)return p;for(var g=[],y={},_=0;_<l.length;_++){var b=l[_],E="t"===o[_],M="t"===c[_]!==E,R=b.mappedProperties.length>0;if(M||E&&R){var P=void 0;M&&R||M?P=b.properties:R&&(P=b.mappedProperties);for(var $=0;$<P.length;$++){for(var K=P[$],J=K.name,ne=!1,re=_+1;re<l.length&&("t"!==o[re]||!(ne=null!=l[re].properties[K.name]));re++);!y[J]&&!ne&&(y[J]=!0,g.push(J))}}}return d[f]=g,g},getContextMeta:function(c){for(var d,o=this,l="",f=c._private.styleCxtKey||"",p=0;p<o.length;p++){var g=o[p];l+=g.selector&&g.selector.matches(c)?"t":"f"}return d=o.getPropertiesDiff(f,l),c._private.styleCxtKey=l,{key:l,diffPropNames:d,empty:0===d.length}},getContextStyle:function(c){var o=c.key,d=this._private.contextStyles=this._private.contextStyles||{};if(d[o])return d[o];for(var f={_private:{key:o}},p=0;p<this.length;p++){var g=this[p];if("t"===o[p])for(var _=0;_<g.properties.length;_++){var b=g.properties[_];f[b.name]=b}}return d[o]=f,f},applyContextStyle:function(c,o,l){for(var f=c.diffPropNames,p={},g=this.types,y=0;y<f.length;y++){var _=f[y],b=o[_],w=l.pstyle(_);if(!b){if(!w)continue;b=w.bypass?{name:_,deleteBypassed:!0}:{name:_,delete:!0}}if(w!==b){if(b.mapped===g.fn&&null!=w&&null!=w.mapping&&w.mapping.value===b.value){var E=w.mapping;if((E.fnValue=b.value(l))===E.prevFnValue)continue}var R=p[_]={prev:w};this.applyParsedProperty(l,b),R.next=l.pstyle(_),R.next&&R.next.bypass&&(R.next=R.next.bypassed)}}return{diffProps:p}},updateStyleHints:function(c){var d,o=c._private,l=this,f=l.propertyGroupKeys,p=function(Lt,Vt,xn){return l.getPropertiesHash(Lt,Vt,xn)},g=o.styleKey;if(c.removed())return!1;var Lt,y="nodes"===o.group,_=c._private.style;d=Object.keys(_);for(var b=0;b<f.length;b++)o.styleKeys[f[b]]=[na,ra];for(var E=function(Lt,Vt){return o.styleKeys[Vt][0]=cl(Lt,o.styleKeys[Vt][0])},M=function(Lt,Vt){return o.styleKeys[Vt][1]=ul(Lt,o.styleKeys[Vt][1])},R=function(Lt,Vt){E(Lt,Vt),M(Lt,Vt)},P=function(Lt,Vt){for(var xn=0;xn<Lt.length;xn++){var kn=Lt.charCodeAt(xn);E(kn,Vt),M(kn,Vt)}},J=0;J<d.length;J++){var ne=d[J],re=_[ne];if(null!=re){var ue=this.properties[ne],Ce=ue.type,Se=ue.groupKey,de=void 0;null!=ue.hashOverride?de=ue.hashOverride(c,re):null!=re.pfValue&&(de=re.pfValue);var Ee=null==ue.enums?re.value:null,he=null!=de,ge=re.units;!Ce.number||!he&&null==Ee||Ce.multiple?P(re.strValue,Se):(R(-128<(Lt=he?de:Ee)&&Lt<128&&Math.floor(Lt)!==Lt?2e9-(1024*Lt|0):Lt,Se),!he&&null!=ge&&P(ge,Se))}}for(var Me=[na,ra],Xe=0;Xe<f.length;Xe++){var je=o.styleKeys[f[Xe]];Me[0]=cl(je[0],Me[0]),Me[1]=ul(je[1],Me[1])}o.styleKey=function(o,l){return 2097152*o+l}(Me[0],Me[1]);var Qe=o.styleKeys;o.labelDimsKey=po(Qe.labelDimensions);var it=p(c,["label"],Qe.labelDimensions);if(o.labelKey=po(it),o.labelStyleKey=po(go(Qe.commonLabel,it)),!y){var ct=p(c,["source-label"],Qe.labelDimensions);o.sourceLabelKey=po(ct),o.sourceLabelStyleKey=po(go(Qe.commonLabel,ct));var rt=p(c,["target-label"],Qe.labelDimensions);o.targetLabelKey=po(rt),o.targetLabelStyleKey=po(go(Qe.commonLabel,rt))}if(y){var tt=o.styleKeys,Ze=tt.pie,xt=[tt.nodeBody,tt.nodeBorder,tt.backgroundImage,tt.compound,Ze].filter(function(Mt){return null!=Mt}).reduce(go,[na,ra]);o.nodeKey=po(xt),o.hasPie=null!=Ze&&Ze[0]!==na&&Ze[1]!==ra}return g!==o.styleKey},clearStyleHints:function(c){var o=c._private;o.styleCxtKey="",o.styleKeys={},o.styleKey=null,o.labelKey=null,o.labelStyleKey=null,o.sourceLabelKey=null,o.sourceLabelStyleKey=null,o.targetLabelKey=null,o.targetLabelStyleKey=null,o.nodeKey=null,o.hasPie=null},applyParsedProperty:function(c,o){var p,l=this,d=o,f=c._private.style,g=l.types,y=l.properties[d.name].type,_=d.bypass,b=f[d.name],w=b&&b.bypass,E=c._private,M="mapping",R=function(wt){return null==wt?null:null!=wt.pfValue?wt.pfValue:wt.value},P=function(){var wt=R(b),Dt=R(d);l.checkTriggers(c,d.name,wt,Dt)};if(d&&"pie"===d.name.substr(0,3)&&ur("The pie style properties are deprecated.  Create charts using background images instead."),"curve-style"===o.name&&c.isEdge()&&("bezier"!==o.value&&c.isLoop()||"haystack"===o.value&&(c.source().isParent()||c.target().isParent()))&&(d=o=this.parse(o.name,"bezier",_)),d.delete)return f[d.name]=void 0,P(),!0;if(d.deleteBypassed)return b?!!b.bypass&&(b.bypassed=void 0,P(),!0):(P(),!0);if(d.deleteBypass)return b?!!b.bypass&&(f[d.name]=b.bypassed,P(),!0):(P(),!0);var $=function(){ur("Do not assign mappings to elements without corresponding data (i.e. ele `"+c.id()+"` has no mapping for property `"+d.name+"` with data field `"+d.field+"`); try a `["+d.field+"]` selector to limit scope to elements with `"+d.field+"` defined")};switch(d.mapped){case g.mapData:for(var K=d.field.split("."),J=E.data,ne=0;ne<K.length&&J;ne++)J=J[K[ne]];if(null==J)return $(),!1;var ue;if(!pe(J))return ur("Do not use continuous mappers without specifying numeric data (i.e. `"+d.field+": "+J+"` for `"+c.id()+"` is non-numeric)"),!1;var Ce=d.fieldMax-d.fieldMin;if((ue=0===Ce?0:(J-d.fieldMin)/Ce)<0?ue=0:ue>1&&(ue=1),y.color){var Se=d.valueMin[0],Ee=d.valueMin[1],he=d.valueMax[1],ke=d.valueMin[2],Te=d.valueMax[2],ge=null==d.valueMin[3]?1:d.valueMin[3],Fe=null==d.valueMax[3]?1:d.valueMax[3],Me=[Math.round(Se+(d.valueMax[0]-Se)*ue),Math.round(Ee+(he-Ee)*ue),Math.round(ke+(Te-ke)*ue),Math.round(ge+(Fe-ge)*ue)];p={bypass:d.bypass,name:d.name,value:Me,strValue:"rgb("+Me[0]+", "+Me[1]+", "+Me[2]+")"}}else{if(!y.number)return!1;p=this.parse(d.name,d.valueMin+(d.valueMax-d.valueMin)*ue,d.bypass,M)}if(!p)return $(),!1;p.mapping=d,d=p;break;case g.data:for(var Ve=d.field.split("."),je=E.data,Qe=0;Qe<Ve.length&&je;Qe++)je=je[Ve[Qe]];if(null!=je&&(p=this.parse(d.name,je,d.bypass,M)),!p)return $(),!1;p.mapping=d,d=p;break;case g.fn:var rt=null!=d.fnValue?d.fnValue:(0,d.value)(c);if(d.prevFnValue=rt,null==rt)return ur("Custom function mappers may not return null (i.e. `"+d.name+"` for ele `"+c.id()+"` is null)"),!1;if(!(p=this.parse(d.name,rt,d.bypass,M)))return ur("Custom function mappers may not return invalid values for the property type (i.e. `"+d.name+"` for ele `"+c.id()+"` is invalid)"),!1;p.mapping=Is(d),d=p;break;case void 0:break;default:return!1}return _?(d.bypassed=w?b.bypassed:b,f[d.name]=d):w?b.bypassed=d:f[d.name]=d,P(),!0},cleanElements:function(c,o){for(var l=0;l<c.length;l++){var d=c[l];if(this.clearStyleHints(d),d.dirtyCompoundBoundsCache(),d.dirtyBoundingBoxCache(),o)for(var f=d._private.style,p=Object.keys(f),g=0;g<p.length;g++){var y=p[g],_=f[y];null!=_&&(_.bypass?_.bypassed=null:f[y]=null)}else d._private.style={}}},update:function(){this._private.cy.mutableElements().updateStyle()},updateTransitions:function(c,o){var l=this,d=c._private,f=c.pstyle("transition-property").value,p=c.pstyle("transition-duration").pfValue,g=c.pstyle("transition-delay").pfValue;if(f.length>0&&p>0){for(var y={},_=!1,b=0;b<f.length;b++){var w=f[b],E=c.pstyle(w),M=o[w];if(M){var P=M.prev,$=null!=M.next?M.next:E,K=!1,J=void 0;P&&(pe(P.pfValue)&&pe($.pfValue)?J=P.pfValue+1e-6*(K=$.pfValue-P.pfValue):pe(P.value)&&pe($.value)?J=P.value+1e-6*(K=$.value-P.value):He(P.value)&&He($.value)&&(K=P.value[0]!==$.value[0]||P.value[1]!==$.value[1]||P.value[2]!==$.value[2],J=P.strValue),K&&(y[w]=$.strValue,this.applyBypass(c,w,J),_=!0))}}if(!_)return;d.transitioning=!0,new bd(function(re){g>0?c.delayAnimation(g).play().promise().then(re):re()}).then(function(){return c.animation({style:y,duration:p,easing:c.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){l.removeBypasses(c,f),c.emitAndNotify("style"),d.transitioning=!1})}else d.transitioning&&(this.removeBypasses(c,f),c.emitAndNotify("style"),d.transitioning=!1)},checkTrigger:function(c,o,l,d,f,p){var g=this.properties[o],y=f(g);null!=y&&y(l,d)&&p(g)},checkZOrderTrigger:function(c,o,l,d){var f=this;this.checkTrigger(c,o,l,d,function(p){return p.triggersZOrder},function(){f._private.cy.notify("zorder",c)})},checkBoundsTrigger:function(c,o,l,d){this.checkTrigger(c,o,l,d,function(f){return f.triggersBounds},function(f){c.dirtyCompoundBoundsCache(),c.dirtyBoundingBoxCache(),f.triggersBoundsOfParallelBeziers&&("curve-style"===o&&("bezier"===l||"bezier"===d)||"display"===o&&("none"===l||"none"===d))&&c.parallelEdges().forEach(function(p){p.isBundledBezier()&&p.dirtyBoundingBoxCache()})})},checkTriggers:function(c,o,l,d){c.dirtyStyleCache(),this.checkZOrderTrigger(c,o,l,d),this.checkBoundsTrigger(c,o,l,d)}},rf={applyBypass:function(c,o,l,d){var p=[];if("*"===o||"**"===o){if(void 0!==l)for(var y=0;y<this.properties.length;y++){var w=this.parse(this.properties[y].name,l,!0);w&&p.push(w)}}else if(ye(o)){var E=this.parse(o,l,!0);E&&p.push(E)}else{if(!Ie(o))return!1;var M=o;d=l;for(var R=Object.keys(M),P=0;P<R.length;P++){var $=R[P],K=M[$];if(void 0===K&&(K=M[tn($)]),void 0!==K){var J=this.parse($,K,!0);J&&p.push(J)}}}if(0===p.length)return!1;for(var ne=!1,re=0;re<c.length;re++){for(var ue=c[re],Ce={},Se=void 0,de=0;de<p.length;de++){var Ee=p[de];if(d){var he=ue.pstyle(Ee.name);Se=Ce[Ee.name]={prev:he}}ne=this.applyParsedProperty(ue,Is(Ee))||ne,d&&(Se.next=ue.pstyle(Ee.name))}ne&&this.updateStyleHints(ue),d&&this.updateTransitions(ue,Ce,!0)}return ne},overrideBypass:function(c,o,l){o=Nt(o);for(var d=0;d<c.length;d++){var f=c[d],p=f._private.style[o],g=this.properties[o].type,y=g.color,_=g.mutiple,b=p?null!=p.pfValue?p.pfValue:p.value:null;p&&p.bypass?(p.value=l,null!=p.pfValue&&(p.pfValue=l),p.strValue=y?"rgb("+l.join(",")+")":_?l.join(" "):""+l,this.updateStyleHints(f)):this.applyBypass(f,o,l),this.checkTriggers(f,o,b,l)}},removeAllBypasses:function(c,o){return this.removeBypasses(c,this.propertyNames,o)},removeBypasses:function(c,o,l){for(var f=0;f<c.length;f++){for(var p=c[f],g={},y=0;y<o.length;y++){var _=o[y],b=this.properties[_],w=p.pstyle(b.name);if(w&&w.bypass){var M=this.parse(_,"",!0),R=g[b.name]={prev:w};this.applyParsedProperty(p,M),R.next=p.pstyle(b.name)}}this.updateStyleHints(p),l&&this.updateTransitions(p,g,!0)}}},hy={getEmSizeInPixels:function(){var c=this.containerCss("font-size");return null!=c?parseFloat(c):1},containerCss:function(c){var l=this._private.cy.container();if(H&&l&&H.getComputedStyle)return H.getComputedStyle(l).getPropertyValue(c)}},ja={getRenderedStyle:function(c,o){return o?this.getStylePropertyValue(c,o,!0):this.getRawStyle(c,!0)},getRawStyle:function(c,o){var l=this;if(c=c[0]){for(var d={},f=0;f<l.properties.length;f++){var p=l.properties[f],g=l.getStylePropertyValue(c,p.name,o);null!=g&&(d[p.name]=g,d[tn(p.name)]=g)}return d}},getIndexedStyle:function(c,o,l,d){return c.pstyle(o)[l][d]??c.cy().style().getDefaultProperty(o)[l][0]},getStylePropertyValue:function(c,o,l){if(c=c[0]){var f=this.properties[o];f.alias&&(f=f.pointsTo);var p=f.type,g=c.pstyle(f.name);if(g){var y=g.value,_=g.units,b=g.strValue;if(l&&p.number&&null!=y&&pe(y)){var w=c.cy().zoom(),E=function(K){return K*w},M=function(K,J){return E(K)+J},R=He(y);return(R?_.every(function($){return null!=$}):null!=_)?R?y.map(function($,K){return M($,_[K])}).join(" "):M(y,_):R?y.map(function($){return ye($)?$:""+E($)}).join(" "):""+E(y)}if(null!=b)return b}return null}},getAnimationStartStyle:function(c,o){for(var l={},d=0;d<o.length;d++){var p=o[d].name,g=c.pstyle(p);void 0!==g&&(g=Ie(g)?this.parse(p,g.strValue):this.parse(p,g)),g&&(l[p]=g)}return l},getPropsList:function(c){var l=[],d=c,f=this.properties;if(d)for(var p=Object.keys(d),g=0;g<p.length;g++){var y=p[g],_=d[y],b=f[y]||f[Nt(y)],w=this.parse(b.name,_);w&&l.push(w)}return l},getNonDefaultPropertiesHash:function(c,o,l){var p,g,y,_,b,d=l.slice();for(_=0;_<o.length;_++)if(null!=(p=c.pstyle(o[_],!1)))if(null!=p.pfValue)d[0]=cl(y,d[0]),d[1]=ul(y,d[1]);else for(g=p.strValue,b=0;b<g.length;b++)y=g.charCodeAt(b),d[0]=cl(y,d[0]),d[1]=ul(y,d[1]);return d}};ja.getPropertiesHash=ja.getNonDefaultPropertiesHash;var lg={appendFromJson:function(c){for(var o=this,l=0;l<c.length;l++){var d=c[l],f=d.selector,p=d.style||d.css,g=Object.keys(p);o.selector(f);for(var y=0;y<g.length;y++){var _=g[y];o.css(_,p[_])}}return o},fromJson:function(c){var o=this;return o.resetToDefault(),o.appendFromJson(c),o},json:function(){for(var c=[],o=this.defaultLength;o<this.length;o++){for(var l=this[o],d=l.selector,f=l.properties,p={},g=0;g<f.length;g++){var y=f[g];p[y.name]=y.strValue}c.push({selector:d?d.toString():"core",style:p})}return c}},pc={appendFromString:function(c){var f,p,g,l=this,d=""+c;function y(){d=d.length>f.length?d.substr(f.length):""}function _(){p=p.length>g.length?p.substr(g.length):""}for(d=d.replace(/[/][*](\s|.)+?[*][/]/g,"");!d.match(/^\s*$/);){var w=d.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!w){ur("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+d);break}f=w[0];var E=w[1];if("core"!==E&&new Fa(E).invalid)ur("Skipping parsing of block: Invalid selector found in string stylesheet: "+E),y();else{var R=w[2],P=!1;p=R;for(var $=[];!p.match(/^\s*$/);){var J=p.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!J){ur("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+R),P=!0;break}g=J[0];var ne=J[1],re=J[2];this.properties[ne]?l.parse(ne,re)?($.push({name:ne,val:re}),_()):(ur("Skipping property: Invalid property definition in: "+g),_()):(ur("Skipping property: Invalid property name in: "+g),_())}if(P){y();break}l.selector(E);for(var Se=0;Se<$.length;Se++){var de=$[Se];l.css(de.name,de.val)}y()}}return l},fromString:function(c){var o=this;return o.resetToDefault(),o.appendFromString(c),o}},ts={};(function(){var c=hn,o=wr,l=ai,p=function(xt){return"^"+xt+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},g=function(xt){var Mt=c+"|\\w+|"+o+"|"+l+"|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6}";return"^"+xt+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+c+")\\s*\\,\\s*("+c+")\\s*,\\s*("+Mt+")\\s*\\,\\s*("+Mt+")\\)$"},y=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];ts.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:p("data")},layoutData:{mapping:!0,regex:p("layoutData")},scratch:{mapping:!0,regex:p("scratch")},mapData:{mapping:!0,regex:g("mapData")},mapLayoutData:{mapping:!0,regex:g("mapLayoutData")},mapScratch:{mapping:!0,regex:g("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:y,singleRegexMatchValue:!0},urls:{regexes:y,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(xt,Mt){switch(xt.length){case 2:return"deg"!==Mt[0]&&"rad"!==Mt[0]&&"deg"!==Mt[1]&&"rad"!==Mt[1];case 1:return ye(xt[0])||"deg"===Mt[0]||"rad"===Mt[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+c+")\\s*,\\s*("+c+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+c+")\\s*,\\s*("+c+")\\s*,\\s*("+c+")\\s*,\\s*("+c+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(xt){var Mt=xt.length;return 1===Mt||2===Mt||4===Mt}}};var _={zeroNonZero:function(xt,Mt){return(null==xt||null==Mt)&&xt!==Mt||0==xt&&0!=Mt||0!=xt&&0==Mt},any:function(xt,Mt){return xt!=Mt},emptyNonEmpty:function(xt,Mt){var Lt=We(xt),Vt=We(Mt);return Lt&&!Vt||!Lt&&Vt}},b=ts.types,w=[{name:"label",type:b.text,triggersBounds:_.any,triggersZOrder:_.emptyNonEmpty},{name:"text-rotation",type:b.textRotation,triggersBounds:_.any},{name:"text-margin-x",type:b.bidirectionalSize,triggersBounds:_.any},{name:"text-margin-y",type:b.bidirectionalSize,triggersBounds:_.any}],E=[{name:"source-label",type:b.text,triggersBounds:_.any},{name:"source-text-rotation",type:b.textRotation,triggersBounds:_.any},{name:"source-text-margin-x",type:b.bidirectionalSize,triggersBounds:_.any},{name:"source-text-margin-y",type:b.bidirectionalSize,triggersBounds:_.any},{name:"source-text-offset",type:b.size,triggersBounds:_.any}],M=[{name:"target-label",type:b.text,triggersBounds:_.any},{name:"target-text-rotation",type:b.textRotation,triggersBounds:_.any},{name:"target-text-margin-x",type:b.bidirectionalSize,triggersBounds:_.any},{name:"target-text-margin-y",type:b.bidirectionalSize,triggersBounds:_.any},{name:"target-text-offset",type:b.size,triggersBounds:_.any}],R=[{name:"font-family",type:b.fontFamily,triggersBounds:_.any},{name:"font-style",type:b.fontStyle,triggersBounds:_.any},{name:"font-weight",type:b.fontWeight,triggersBounds:_.any},{name:"font-size",type:b.size,triggersBounds:_.any},{name:"text-transform",type:b.textTransform,triggersBounds:_.any},{name:"text-wrap",type:b.textWrap,triggersBounds:_.any},{name:"text-overflow-wrap",type:b.textOverflowWrap,triggersBounds:_.any},{name:"text-max-width",type:b.size,triggersBounds:_.any},{name:"text-outline-width",type:b.size,triggersBounds:_.any},{name:"line-height",type:b.positiveNumber,triggersBounds:_.any}],P=[{name:"text-valign",type:b.valign,triggersBounds:_.any},{name:"text-halign",type:b.halign,triggersBounds:_.any},{name:"color",type:b.color},{name:"text-outline-color",type:b.color},{name:"text-outline-opacity",type:b.zeroOneNumber},{name:"text-background-color",type:b.color},{name:"text-background-opacity",type:b.zeroOneNumber},{name:"text-background-padding",type:b.size,triggersBounds:_.any},{name:"text-border-opacity",type:b.zeroOneNumber},{name:"text-border-color",type:b.color},{name:"text-border-width",type:b.size,triggersBounds:_.any},{name:"text-border-style",type:b.borderStyle,triggersBounds:_.any},{name:"text-background-shape",type:b.textBackgroundShape,triggersBounds:_.any},{name:"text-justification",type:b.justification}],$=[{name:"events",type:b.bool},{name:"text-events",type:b.bool}],K=[{name:"display",type:b.display,triggersZOrder:_.any,triggersBounds:_.any,triggersBoundsOfParallelBeziers:!0},{name:"visibility",type:b.visibility,triggersZOrder:_.any},{name:"opacity",type:b.zeroOneNumber,triggersZOrder:_.zeroNonZero},{name:"text-opacity",type:b.zeroOneNumber},{name:"min-zoomed-font-size",type:b.size},{name:"z-compound-depth",type:b.zCompoundDepth,triggersZOrder:_.any},{name:"z-index-compare",type:b.zIndexCompare,triggersZOrder:_.any},{name:"z-index",type:b.nonNegativeInt,triggersZOrder:_.any}],J=[{name:"overlay-padding",type:b.size,triggersBounds:_.any},{name:"overlay-color",type:b.color},{name:"overlay-opacity",type:b.zeroOneNumber,triggersBounds:_.zeroNonZero},{name:"overlay-shape",type:b.overlayShape,triggersBounds:_.any}],ne=[{name:"underlay-padding",type:b.size,triggersBounds:_.any},{name:"underlay-color",type:b.color},{name:"underlay-opacity",type:b.zeroOneNumber,triggersBounds:_.zeroNonZero},{name:"underlay-shape",type:b.overlayShape,triggersBounds:_.any}],re=[{name:"transition-property",type:b.propList},{name:"transition-duration",type:b.time},{name:"transition-delay",type:b.time},{name:"transition-timing-function",type:b.easing}],ue=function(xt,Mt){return"label"===Mt.value?-xt.poolIndex():Mt.pfValue},Ce=[{name:"height",type:b.nodeSize,triggersBounds:_.any,hashOverride:ue},{name:"width",type:b.nodeSize,triggersBounds:_.any,hashOverride:ue},{name:"shape",type:b.nodeShape,triggersBounds:_.any},{name:"shape-polygon-points",type:b.polygonPointList,triggersBounds:_.any},{name:"background-color",type:b.color},{name:"background-fill",type:b.fill},{name:"background-opacity",type:b.zeroOneNumber},{name:"background-blacken",type:b.nOneOneNumber},{name:"background-gradient-stop-colors",type:b.colors},{name:"background-gradient-stop-positions",type:b.percentages},{name:"background-gradient-direction",type:b.gradientDirection},{name:"padding",type:b.sizeMaybePercent,triggersBounds:_.any},{name:"padding-relative-to",type:b.paddingRelativeTo,triggersBounds:_.any},{name:"bounds-expansion",type:b.boundsExpansion,triggersBounds:_.any}],Se=[{name:"border-color",type:b.color},{name:"border-opacity",type:b.zeroOneNumber},{name:"border-width",type:b.size,triggersBounds:_.any},{name:"border-style",type:b.borderStyle}],de=[{name:"background-image",type:b.urls},{name:"background-image-crossorigin",type:b.bgCrossOrigin},{name:"background-image-opacity",type:b.zeroOneNumbers},{name:"background-image-containment",type:b.bgContainment},{name:"background-image-smoothing",type:b.bools},{name:"background-position-x",type:b.bgPos},{name:"background-position-y",type:b.bgPos},{name:"background-width-relative-to",type:b.bgRelativeTo},{name:"background-height-relative-to",type:b.bgRelativeTo},{name:"background-repeat",type:b.bgRepeat},{name:"background-fit",type:b.bgFit},{name:"background-clip",type:b.bgClip},{name:"background-width",type:b.bgWH},{name:"background-height",type:b.bgWH},{name:"background-offset-x",type:b.bgPos},{name:"background-offset-y",type:b.bgPos}],Ee=[{name:"position",type:b.position,triggersBounds:_.any},{name:"compound-sizing-wrt-labels",type:b.compoundIncludeLabels,triggersBounds:_.any},{name:"min-width",type:b.size,triggersBounds:_.any},{name:"min-width-bias-left",type:b.sizeMaybePercent,triggersBounds:_.any},{name:"min-width-bias-right",type:b.sizeMaybePercent,triggersBounds:_.any},{name:"min-height",type:b.size,triggersBounds:_.any},{name:"min-height-bias-top",type:b.sizeMaybePercent,triggersBounds:_.any},{name:"min-height-bias-bottom",type:b.sizeMaybePercent,triggersBounds:_.any}],he=[{name:"line-style",type:b.lineStyle},{name:"line-color",type:b.color},{name:"line-fill",type:b.fill},{name:"line-cap",type:b.lineCap},{name:"line-opacity",type:b.zeroOneNumber},{name:"line-dash-pattern",type:b.numbers},{name:"line-dash-offset",type:b.number},{name:"line-gradient-stop-colors",type:b.colors},{name:"line-gradient-stop-positions",type:b.percentages},{name:"curve-style",type:b.curveStyle,triggersBounds:_.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:b.zeroOneNumber,triggersBounds:_.any},{name:"source-endpoint",type:b.edgeEndpoint,triggersBounds:_.any},{name:"target-endpoint",type:b.edgeEndpoint,triggersBounds:_.any},{name:"control-point-step-size",type:b.size,triggersBounds:_.any},{name:"control-point-distances",type:b.bidirectionalSizes,triggersBounds:_.any},{name:"control-point-weights",type:b.numbers,triggersBounds:_.any},{name:"segment-distances",type:b.bidirectionalSizes,triggersBounds:_.any},{name:"segment-weights",type:b.numbers,triggersBounds:_.any},{name:"taxi-turn",type:b.bidirectionalSizeMaybePercent,triggersBounds:_.any},{name:"taxi-turn-min-distance",type:b.size,triggersBounds:_.any},{name:"taxi-direction",type:b.axisDirection,triggersBounds:_.any},{name:"edge-distances",type:b.edgeDistances,triggersBounds:_.any},{name:"arrow-scale",type:b.positiveNumber,triggersBounds:_.any},{name:"loop-direction",type:b.angle,triggersBounds:_.any},{name:"loop-sweep",type:b.angle,triggersBounds:_.any},{name:"source-distance-from-node",type:b.size,triggersBounds:_.any},{name:"target-distance-from-node",type:b.size,triggersBounds:_.any}],ke=[{name:"ghost",type:b.bool,triggersBounds:_.any},{name:"ghost-offset-x",type:b.bidirectionalSize,triggersBounds:_.any},{name:"ghost-offset-y",type:b.bidirectionalSize,triggersBounds:_.any},{name:"ghost-opacity",type:b.zeroOneNumber}],Te=[{name:"selection-box-color",type:b.color},{name:"selection-box-opacity",type:b.zeroOneNumber},{name:"selection-box-border-color",type:b.color},{name:"selection-box-border-width",type:b.size},{name:"active-bg-color",type:b.color},{name:"active-bg-opacity",type:b.zeroOneNumber},{name:"active-bg-size",type:b.size},{name:"outside-texture-bg-color",type:b.color},{name:"outside-texture-bg-opacity",type:b.zeroOneNumber}],ge=[];ts.pieBackgroundN=16,ge.push({name:"pie-size",type:b.sizeMaybePercent});for(var Fe=1;Fe<=ts.pieBackgroundN;Fe++)ge.push({name:"pie-"+Fe+"-background-color",type:b.color}),ge.push({name:"pie-"+Fe+"-background-size",type:b.percent}),ge.push({name:"pie-"+Fe+"-background-opacity",type:b.zeroOneNumber});var Me=[],Xe=ts.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:b.arrowShape,triggersBounds:_.any},{name:"arrow-color",type:b.color},{name:"arrow-fill",type:b.arrowFill}].forEach(function(Ze){Xe.forEach(function(xt){Me.push({name:xt+"-"+Ze.name,type:Ze.type,triggersBounds:Ze.triggersBounds})})},{});var Ve=ts.properties=[].concat($,re,K,J,ne,ke,P,R,w,E,M,Ce,Se,de,ge,Ee,he,Me,Te),je=ts.propertyGroups={behavior:$,transition:re,visibility:K,overlay:J,underlay:ne,ghost:ke,commonLabel:P,labelDimensions:R,mainLabel:w,sourceLabel:E,targetLabel:M,nodeBody:Ce,nodeBorder:Se,backgroundImage:de,pie:ge,compound:Ee,edgeLine:he,edgeArrow:Me,core:Te},Qe=ts.propertyGroupNames={};(ts.propertyGroupKeys=Object.keys(je)).forEach(function(Ze){Qe[Ze]=je[Ze].map(function(xt){return xt.name}),je[Ze].forEach(function(xt){return xt.groupKey=Ze})});var ct=ts.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];ts.propertyNames=Ve.map(function(Ze){return Ze.name});for(var rt=0;rt<Ve.length;rt++){var tt=Ve[rt];Ve[tt.name]=tt}for(var wt=0;wt<ct.length;wt++){var Dt=ct[wt],mt={name:Dt.name,alias:!0,pointsTo:Ve[Dt.pointsTo]};Ve.push(mt),Ve[Dt.name]=mt}})(),ts.getDefaultProperty=function(c){return this.getDefaultProperties()[c]},ts.getDefaultProperties=function(){var c=this._private;if(null!=c.defaultProperties)return c.defaultProperties;for(var o=Zt({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(_,b){for(var w=1;w<=ts.pieBackgroundN;w++)_[b.name.replace("{{i}}",w)]=b.value;return _},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce(function(_,b){return ts.arrowPrefixes.forEach(function(w){_[w+"-"+b.name]=b.value}),_},{})),l={},d=0;d<this.properties.length;d++){var f=this.properties[d];if(!f.pointsTo){var p=f.name,y=this.parse(p,o[p]);l[p]=y}}return c.defaultProperties=l,c.defaultProperties},ts.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var cg={parse:function(c,o,l,d){var f=this;if($e(o))return f.parseImplWarn(c,o,l,d);var w,_=Ph(c,""+o,l?"t":"f","mapping"===d||!0===d||!1===d||null==d?"dontcare":d),b=f.propCache=f.propCache||[];return(w=b[_])||(w=b[_]=f.parseImplWarn(c,o,l,d)),(l||"mapping"===d)&&(w=Is(w))&&(w.value=Is(w.value)),w},parseImplWarn:function(c,o,l,d){var f=this.parseImpl(c,o,l,d);return!f&&null!=o&&ur("The style property `".concat(c,": ").concat(o,"` is invalid")),f&&("width"===f.name||"height"===f.name)&&"label"===o&&ur("The style value of `label` is deprecated for `"+f.name+"`"),f}};cg.parseImpl=function(c,o,l,d){var f=this;c=Nt(c);var p=f.properties[c],g=o,y=f.types;if(!p||void 0===o)return null;p.alias&&(c=(p=p.pointsTo).name);var _=ye(o);_&&(o=o.trim());var w,E,b=p.type;if(!b)return null;if(l&&(""===o||null===o))return{name:c,value:o,bypass:!0,deleteBypass:!0};if($e(o))return{name:c,value:o,strValue:"fn",mapped:y.fn,bypass:l};if(!(!_||d||o.length<7||"a"!==o[1])){if(o.length>=7&&"d"===o[0]&&(w=new RegExp(y.data.regex).exec(o)))return!l&&{name:c,value:w,strValue:""+o,mapped:y.data,field:w[1],bypass:l};if(o.length>=10&&"m"===o[0]&&(E=new RegExp(y.mapData.regex).exec(o))){if(l||b.multiple)return!1;var R=y.mapData;if(!b.color&&!b.number)return!1;var P=this.parse(c,E[4]);if(!P||P.mapped)return!1;var $=this.parse(c,E[5]);if(!$||$.mapped)return!1;if(P.pfValue===$.pfValue||P.strValue===$.strValue)return ur("`"+c+": "+o+"` is not a valid mapper because the output range is zero; converting to `"+c+": "+P.strValue+"`"),this.parse(c,P.strValue);if(b.color){var K=P.value,J=$.value;if(!(K[0]!==J[0]||K[1]!==J[1]||K[2]!==J[2]||K[3]!==J[3]&&(null!=K[3]&&1!==K[3]||null!=J[3]&&1!==J[3])))return!1}return{name:c,value:E,strValue:""+o,mapped:R,field:E[1],fieldMin:parseFloat(E[2]),fieldMax:parseFloat(E[3]),valueMin:P.value,valueMax:$.value,bypass:l}}}if(b.multiple&&"multiple"!==d){var re;if(re=_?o.split(/\s+/):He(o)?o:[o],b.evenMultiple&&re.length%2!=0)return null;for(var ue=[],Ce=[],Se=[],de="",Ee=!1,he=0;he<re.length;he++){var ke=f.parse(c,re[he],l,"multiple");Ee=Ee||ye(ke.value),ue.push(ke.value),Se.push(null!=ke.pfValue?ke.pfValue:ke.value),Ce.push(ke.units),de+=(he>0?" ":"")+ke.strValue}return b.validate&&!b.validate(ue,Ce)?null:b.singleEnum&&Ee?1===ue.length&&ye(ue[0])?{name:c,value:ue[0],strValue:ue[0],bypass:l}:null:{name:c,value:ue,pfValue:Se,strValue:de,bypass:l,units:Ce}}var Te=function(){for(var Mt=0;Mt<b.enums.length;Mt++)if(b.enums[Mt]===o)return{name:c,value:o,strValue:""+o,bypass:l};return null};if(b.number){var ge,Fe="px";if(b.units&&(ge=b.units),b.implicitUnits&&(Fe=b.implicitUnits),!b.unitless)if(_){var Me="px|em"+(b.allowPercent?"|\\%":"");ge&&(Me=ge);var Xe=o.match("^("+hn+")("+Me+")?$");Xe&&(o=Xe[1],ge=Xe[2]||Fe)}else(!ge||b.implicitUnits)&&(ge=Fe);if(o=parseFloat(o),isNaN(o)&&void 0===b.enums)return null;if(isNaN(o)&&void 0!==b.enums)return o=g,Te();if(b.integer&&!function(o){return pe(o)&&Math.floor(o)===o}(o)||void 0!==b.min&&(o<b.min||b.strictMin&&o===b.min)||void 0!==b.max&&(o>b.max||b.strictMax&&o===b.max))return null;var Ve={name:c,value:o,strValue:""+o+(ge||""),units:ge,bypass:l};return Ve.pfValue=b.unitless||"px"!==ge&&"em"!==ge?o:"px"!==ge&&ge?this.getEmSizeInPixels()*o:o,("ms"===ge||"s"===ge)&&(Ve.pfValue="ms"===ge?o:1e3*o),("deg"===ge||"rad"===ge)&&(Ve.pfValue="rad"===ge?o:function(o){return Math.PI*o/180}(o)),"%"===ge&&(Ve.pfValue=o/100),Ve}if(b.propList){var je=[],Qe=""+o;if("none"!==Qe){for(var it=Qe.split(/\s*,\s*|\s+/),ct=0;ct<it.length;ct++){var rt=it[ct].trim();f.properties[rt]?je.push(rt):ur("`"+rt+"` is not a valid property name")}if(0===je.length)return null}return{name:c,value:je,strValue:0===je.length?"none":je.join(" "),bypass:l}}if(b.color){var tt=function(o){return(He(o)?o:null)||function(o){return nc[o.toLowerCase()]}(o)||function(o){if((4===o.length||7===o.length)&&"#"===o[0]){var d,f,p,g=16;return 4===o.length?(d=parseInt(o[1]+o[1],g),f=parseInt(o[2]+o[2],g),p=parseInt(o[3]+o[3],g)):(d=parseInt(o[1]+o[2],g),f=parseInt(o[3]+o[4],g),p=parseInt(o[5]+o[6],g)),[d,f,p]}}(o)||function(o){var l,d=new RegExp("^"+$n+"$").exec(o);if(d){l=[];for(var f=[],p=1;p<=3;p++){var g=d[p];if("%"===g[g.length-1]&&(f[p]=!0),g=parseFloat(g),f[p]&&(g=g/100*255),g<0||g>255)return;l.push(Math.floor(g))}if((f[1]||f[2]||f[3])&&!(f[1]&&f[2]&&f[3]))return;var b=d[4];if(void 0!==b){if((b=parseFloat(b))<0||b>1)return;l.push(b)}}return l}(o)||function(o){var l,d,f,p,g,y,_,b;function w(P,$,K){return K<0&&(K+=1),K>1&&(K-=1),K<1/6?P+6*($-P)*K:K<.5?$:K<2/3?P+($-P)*(2/3-K)*6:P}var E=new RegExp("^"+vr+"$").exec(o);if(E){if((d=parseInt(E[1]))<0?d=(360- -1*d%360)%360:d>360&&(d%=360),d/=360,(f=parseFloat(E[2]))<0||f>100||(f/=100,(p=parseFloat(E[3]))<0||p>100)||(p/=100,void 0!==(g=E[4])&&((g=parseFloat(g))<0||g>1)))return;if(0===f)y=_=b=Math.round(255*p);else{var M=p<.5?p*(1+f):p+f-p*f,R=2*p-M;y=Math.round(255*w(R,M,d+1/3)),_=Math.round(255*w(R,M,d)),b=Math.round(255*w(R,M,d-1/3))}l=[y,_,b,g]}return l}(o)}(o);return tt?{name:c,value:tt,pfValue:tt,strValue:"rgb("+tt[0]+","+tt[1]+","+tt[2]+")",bypass:l}:null}if(b.regex||b.regexes){if(b.enums){var wt=Te();if(wt)return wt}for(var Dt=b.regexes?b.regexes:[b.regex],yt=0;yt<Dt.length;yt++){var Ze=new RegExp(Dt[yt]).exec(o);if(Ze)return{name:c,value:b.singleRegexMatchValue?Ze[1]:Ze,strValue:""+o,bypass:l}}return null}return b.string?{name:c,value:""+o,strValue:""+o,bypass:l}:b.enums?Te():null};var ir=function c(o){if(!(this instanceof c))return new c(o);pt(o)?(this._private={cy:o,coreStyle:{}},this.length=0,this.resetToDefault()):Sr("A style must have a core reference")},ki=ir.prototype;ki.instanceString=function(){return"style"},ki.clear=function(){for(var c=this._private,l=c.cy.elements(),d=0;d<this.length;d++)this[d]=void 0;return this.length=0,c.contextStyles={},c.propDiffs={},this.cleanElements(l,!0),l.forEach(function(f){var p=f[0]._private;p.styleDirty=!0,p.appliedInitStyle=!1}),this},ki.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},ki.core=function(c){return this._private.coreStyle[c]||this.getDefaultProperty(c)},ki.selector=function(c){var o="core"===c?null:new Fa(c),l=this.length++;return this[l]={selector:o,properties:[],mappedProperties:[],index:l},this},ki.css=function(){var c=this,o=arguments;if(1===o.length)for(var l=o[0],d=0;d<c.properties.length;d++){var f=c.properties[d],p=l[f.name];void 0===p&&(p=l[tn(f.name)]),void 0!==p&&this.cssRule(f.name,p)}else 2===o.length&&this.cssRule(o[0],o[1]);return this},ki.style=ki.css,ki.cssRule=function(c,o){var l=this.parse(c,o);if(l){var d=this.length-1;this[d].properties.push(l),this[d].properties[l.name]=l,l.name.match(/pie-(\d+)-background-size/)&&l.value&&(this._private.hasPie=!0),l.mapped&&this[d].mappedProperties.push(l),!this[d].selector&&(this._private.coreStyle[l.name]=l)}return this},ki.append=function(c){return at(c)?c.appendToStyle(this):He(c)?this.appendFromJson(c):ye(c)&&this.appendFromString(c),this},ir.fromJson=function(c,o){var l=new ir(c);return l.fromJson(o),l},ir.fromString=function(c,o){return new ir(c).fromString(o)},[fs,rf,hy,ja,lg,pc,ts,cg].forEach(function(c){Zt(ki,c)}),ir.types=ki.types,ir.properties=ki.properties,ir.propertyGroups=ki.propertyGroups,ir.propertyGroupNames=ki.propertyGroupNames,ir.propertyGroupKeys=ki.propertyGroupKeys;var Pd={style:function(o){return o&&this.setStyle(o).update(),this._private.style},setStyle:function(o){var l=this._private;return l.style=at(o)?o.generateStyle(this):He(o)?ir.fromJson(this,o):ye(o)?ir.fromString(this,o):ir(this),l.style},updateStyle:function(){this.mutableElements().updateStyle()}},Ii={autolock:function(o){return void 0===o?this._private.autolock:(this._private.autolock=!!o,this)},autoungrabify:function(o){return void 0===o?this._private.autoungrabify:(this._private.autoungrabify=!!o,this)},autounselectify:function(o){return void 0===o?this._private.autounselectify:(this._private.autounselectify=!!o,this)},selectionType:function(o){var l=this._private;return null==l.selectionType&&(l.selectionType="single"),void 0===o?l.selectionType:(("additive"===o||"single"===o)&&(l.selectionType=o),this)},panningEnabled:function(o){return void 0===o?this._private.panningEnabled:(this._private.panningEnabled=!!o,this)},userPanningEnabled:function(o){return void 0===o?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!o,this)},zoomingEnabled:function(o){return void 0===o?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!o,this)},userZoomingEnabled:function(o){return void 0===o?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!o,this)},boxSelectionEnabled:function(o){return void 0===o?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!o,this)},pan:function(){var d,f,p,g,y,o=arguments,l=this._private.pan;switch(o.length){case 0:return l;case 1:if(ye(o[0]))return l[d=o[0]];if(Ie(o[0])){if(!this._private.panningEnabled)return this;y=(p=o[0]).y,pe(g=p.x)&&(l.x=g),pe(y)&&(l.y=y),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;f=o[1],("x"===(d=o[0])||"y"===d)&&pe(f)&&(l[d]=f),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function(o,l){var p,g,y,_,b,d=arguments,f=this._private.pan;if(!this._private.panningEnabled)return this;switch(d.length){case 1:Ie(o)&&(b=(y=d[0]).y,pe(_=y.x)&&(f.x+=_),pe(b)&&(f.y+=b),this.emit("pan viewport"));break;case 2:g=l,("x"===(p=o)||"y"===p)&&pe(g)&&(f[p]+=g),this.emit("pan viewport")}return this.notify("viewport"),this},fit:function(o,l){var d=this.getFitViewport(o,l);if(d){var f=this._private;f.zoom=d.zoom,f.pan=d.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(o,l){var d;if((pe(o)&&void 0===l&&(l=o,o=void 0),this._private.panningEnabled&&this._private.zoomingEnabled)&&(ye(o)?o=this.$(o):!function(o){return Ie(o)&&pe(o.x1)&&pe(o.x2)&&pe(o.y1)&&pe(o.y2)}(o)?Oe(o)||(o=this.mutableElements()):((d={x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2}).w=d.x2-d.x1,d.h=d.y2-d.y1),!Oe(o)||!o.empty())){d=d||o.boundingBox();var _,g=this.width(),y=this.height();if(l=pe(l)?l:0,!isNaN(g)&&!isNaN(y)&&g>0&&y>0&&!isNaN(d.w)&&!isNaN(d.h)&&d.w>0&&d.h>0)return{zoom:_=(_=(_=Math.min((g-2*l)/d.w,(y-2*l)/d.h))>this._private.maxZoom?this._private.maxZoom:_)<this._private.minZoom?this._private.minZoom:_,pan:{x:(g-_*(d.x1+d.x2))/2,y:(y-_*(d.y1+d.y2))/2}}}},zoomRange:function(o,l){var d=this._private;if(null==l){var f=o;o=f.min,l=f.max}return pe(o)&&pe(l)&&o<=l?(d.minZoom=o,d.maxZoom=l):pe(o)&&void 0===l&&o<=d.maxZoom?d.minZoom=o:pe(l)&&void 0===o&&l>=d.minZoom&&(d.maxZoom=l),this},minZoom:function(o){return void 0===o?this._private.minZoom:this.zoomRange({min:o})},maxZoom:function(o){return void 0===o?this._private.maxZoom:this.zoomRange({max:o})},getZoomedViewport:function(o){var p,g,l=this._private,d=l.pan,f=l.zoom,y=!1;return l.zoomingEnabled||(y=!0),pe(o)?g=o:Ie(o)&&(g=o.level,null!=o.position?p=Wn(o.position,f,d):null!=o.renderedPosition&&(p=o.renderedPosition),null!=p&&!l.panningEnabled&&(y=!0)),g=(g=g>l.maxZoom?l.maxZoom:g)<l.minZoom?l.minZoom:g,!y&&pe(g)&&g!==f&&(null==p||pe(p.x)&&pe(p.y))?null!=p?{zoomed:!0,panned:!0,zoom:g,pan:{x:-g/f*(p.x-d.x)+p.x,y:-g/f*(p.y-d.y)+p.y}}:{zoomed:!0,panned:!1,zoom:g,pan:d}:null},zoom:function(o){if(void 0===o)return this._private.zoom;var l=this.getZoomedViewport(o),d=this._private;return null!=l&&l.zoomed?(d.zoom=l.zoom,l.panned&&(d.pan.x=l.pan.x,d.pan.y=l.pan.y),this.emit("zoom"+(l.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this},viewport:function(o){var l=this._private,d=!0,f=!0,p=[],g=!1,y=!1;if(!o)return this;if(pe(o.zoom)||(d=!1),Ie(o.pan)||(f=!1),!d&&!f)return this;if(d){var _=o.zoom;_<l.minZoom||_>l.maxZoom||!l.zoomingEnabled?g=!0:(l.zoom=_,p.push("zoom"))}if(f&&(!g||!o.cancelOnFailedZoom)&&l.panningEnabled){var b=o.pan;pe(b.x)&&(l.pan.x=b.x,y=!1),pe(b.y)&&(l.pan.y=b.y,y=!1),y||p.push("pan")}return p.length>0&&(p.push("viewport"),this.emit(p.join(" ")),this.notify("viewport")),this},center:function(o){var l=this.getCenterPan(o);return l&&(this._private.pan=l,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(o,l){if(this._private.panningEnabled){if(ye(o)){var d=o;o=this.mutableElements().filter(d)}else Oe(o)||(o=this.mutableElements());if(0!==o.length){var f=o.boundingBox(),p=this.width(),g=this.height();return{x:(p-(l=void 0===l?this._private.zoom:l)*(f.x1+f.x2))/2,y:(g-l*(f.y1+f.y2))/2}}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var d,f,o=this._private,l=o.container;return o.sizeCache=o.sizeCache||(l?(d=H.getComputedStyle(l),{width:l.clientWidth-(f=function(g){return parseFloat(d.getPropertyValue(g))})("padding-left")-f("padding-right"),height:l.clientHeight-f("padding-top")-f("padding-bottom")}):{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var o=this._private.pan,l=this._private.zoom,d=this.renderedExtent(),f={x1:(d.x1-o.x)/l,x2:(d.x2-o.x)/l,y1:(d.y1-o.y)/l,y2:(d.y2-o.y)/l};return f.w=f.x2-f.x1,f.h=f.y2-f.y1,f},renderedExtent:function(){var o=this.width(),l=this.height();return{x1:0,y1:0,x2:o,y2:l,w:o,h:l}},multiClickDebounceTime:function(o){return o?(this._private.multiClickDebounceTime=o,this):this._private.multiClickDebounceTime}};Ii.centre=Ii.center,Ii.autolockNodes=Ii.autolock,Ii.autoungrabifyNodes=Ii.autoungrabify;var zo={data:Dr.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:Dr.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:Dr.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Dr.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};zo.attr=zo.data,zo.removeAttr=zo.removeData;var hu=function(o){var l=this,d=(o=Zt({},o)).container;d&&!qe(d)&&qe(d[0])&&(d=d[0]);var f=d?d._cyreg:null;(f=f||{})&&f.cy&&(f.cy.destroy(),f={});var p=f.readies=f.readies||[];d&&(d._cyreg=f),f.cy=l;var g=void 0!==H&&void 0!==d&&!o.headless,y=o;y.layout=Zt({name:g?"grid":"null"},y.layout),y.renderer=Zt({name:g?"canvas":"null"},y.renderer);var _=function(P,$,K){return void 0!==$?$:void 0!==K?K:P},b=this._private={container:d,ready:!1,options:y,elements:new Ti(this),listeners:[],aniEles:new Ti(this),data:y.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:_(!0,y.zoomingEnabled),userZoomingEnabled:_(!0,y.userZoomingEnabled),panningEnabled:_(!0,y.panningEnabled),userPanningEnabled:_(!0,y.userPanningEnabled),boxSelectionEnabled:_(!0,y.boxSelectionEnabled),autolock:_(!1,y.autolock,y.autolockNodes),autoungrabify:_(!1,y.autoungrabify,y.autoungrabifyNodes),autounselectify:_(!1,y.autounselectify),styleEnabled:void 0===y.styleEnabled?g:y.styleEnabled,zoom:pe(y.zoom)?y.zoom:1,pan:{x:Ie(y.pan)&&pe(y.pan.x)?y.pan.x:0,y:Ie(y.pan)&&pe(y.pan.y)?y.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:_(250,y.multiClickDebounceTime)};this.createEmitter(),this.selectionType(y.selectionType),this.zoomRange({min:y.minZoom,max:y.maxZoom}),b.styleEnabled&&l.setStyle([]);var E=Zt({},y,y.renderer);l.initRenderer(E),function(P,$){if(P.some(ht))return bd.all(P).then($);$(P)}([y.style,y.elements],function(R){var P=R[0],$=R[1];b.styleEnabled&&l.style().append(P),function(P,$,K){l.notifications(!1);var J=l.mutableElements();J.length>0&&J.remove(),null!=P&&(Ie(P)||He(P))&&l.add(P),l.one("layoutready",function(re){l.notifications(!0),l.emit(re),l.one("load",$),l.emitAndNotify("load")}).one("layoutstop",function(){l.one("done",K),l.emit("done")});var ne=Zt({},l._private.options.layout);ne.eles=l.elements(),l.layout(ne).run()}($,function(){l.startAnimationLoop(),b.ready=!0,$e(y.ready)&&l.on("ready",y.ready);for(var K=0;K<p.length;K++)l.on("ready",p[K]);f&&(f.readies=[]),l.emit("ready")},y.done)})},gc=hu.prototype;Zt(gc,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(o){return this.isReady()?this.emitter().emit("ready",[],o):this.on("ready",o),this},destroy:function(){var o=this;if(!o.destroyed())return o.stopAnimationLoop(),o.destroyRenderer(),this.emit("destroy"),o._private.destroyed=!0,o},hasElementWithId:function(o){return this._private.elements.hasElementWithId(o)},getElementById:function(o){return this._private.elements.getElementById(o)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(o){return this._private.elements.merge(o),this},removeFromPool:function(o){return this._private.elements.unmerge(o),this},container:function(){return this._private.container||null},mount:function(o){if(null!=o){var l=this,d=l._private,f=d.options;return!qe(o)&&qe(o[0])&&(o=o[0]),l.stopAnimationLoop(),l.destroyRenderer(),d.container=o,d.styleEnabled=!0,l.invalidateSize(),l.initRenderer(Zt({},f,f.renderer,{name:"null"===f.renderer.name?"canvas":f.renderer.name})),l.startAnimationLoop(),l.style(f.style),l.emit("mount"),l}},unmount:function(){var o=this;return o.stopAnimationLoop(),o.destroyRenderer(),o.initRenderer({name:"null"}),o.emit("unmount"),o},options:function(){return Is(this._private.options)},json:function(o){var l=this,d=l._private,f=l.mutableElements();if(Ie(o)){if(l.startBatch(),o.elements){var g={},y=function(ue,Ce){for(var Se=[],de=[],Ee=0;Ee<ue.length;Ee++){var he=ue[Ee];if(he.data.id){var ke=""+he.data.id,Te=l.getElementById(ke);g[ke]=!0,0!==Te.length?de.push({ele:Te,json:he}):(Ce&&(he.group=Ce),Se.push(he))}else ur("cy.json() cannot handle elements without an ID attribute")}l.add(Se);for(var ge=0;ge<de.length;ge++){var Fe=de[ge];Fe.ele.json(Fe.json)}};if(He(o.elements))y(o.elements);else for(var _=["nodes","edges"],b=0;b<_.length;b++){var w=_[b],E=o.elements[w];He(E)&&y(E,w)}var M=l.collection();f.filter(function(re){return!g[re.id()]}).forEach(function(re){re.isParent()?M.merge(re):re.remove()}),M.forEach(function(re){return re.children().move({parent:null})}),M.forEach(function(re){return(ue=re,l.getElementById(ue.id())).remove();var ue})}o.style&&l.style(o.style),null!=o.zoom&&o.zoom!==d.zoom&&l.zoom(o.zoom),o.pan&&(o.pan.x!==d.pan.x||o.pan.y!==d.pan.y)&&l.pan(o.pan),o.data&&l.data(o.data);for(var R=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],P=0;P<R.length;P++){var $=R[P];null!=o[$]&&l[$](o[$])}return l.endBatch(),this}var J={};o?J.elements=this.elements().map(function(re){return re.json()}):(J.elements={},f.forEach(function(re){var ue=re.group();J.elements[ue]||(J.elements[ue]=[]),J.elements[ue].push(re.json())})),this._private.styleEnabled&&(J.style=l.style().json()),J.data=Is(l.data());var ne=d.options;return J.zoomingEnabled=d.zoomingEnabled,J.userZoomingEnabled=d.userZoomingEnabled,J.zoom=d.zoom,J.minZoom=d.minZoom,J.maxZoom=d.maxZoom,J.panningEnabled=d.panningEnabled,J.userPanningEnabled=d.userPanningEnabled,J.pan=Is(d.pan),J.boxSelectionEnabled=d.boxSelectionEnabled,J.renderer=Is(ne.renderer),J.hideEdgesOnViewport=ne.hideEdgesOnViewport,J.textureOnViewport=ne.textureOnViewport,J.wheelSensitivity=ne.wheelSensitivity,J.motionBlur=ne.motionBlur,J.multiClickDebounceTime=ne.multiClickDebounceTime,J}}),gc.$id=gc.getElementById,[Lw,Rd,fc,tf,uu,du,ag,Gt,Pd,Ii,zo].forEach(function(c){Zt(gc,c)});var Nd={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,maximal:!1,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(o,l){return!0},ready:void 0,stop:void 0,transform:function(o,l){return l}},fu=function(o){return o.scratch("breadthfirst")},Vw=function(o,l){return o.scratch("breadthfirst",l)};function fy(c){this.options=Zt({},Nd,c)}fy.prototype.run=function(){var b,c=this.options,o=c,l=c.cy,d=o.eles,f=d.nodes().filter(function(Ht){return!Ht.isParent()}),p=d,g=o.directed,y=o.maximal||o.maximalAdjustments>0,_=Lr(o.boundingBox?o.boundingBox:{x1:0,y1:0,w:l.width(),h:l.height()});if(Oe(o.roots))b=o.roots;else if(He(o.roots)){for(var w=[],E=0;E<o.roots.length;E++){var R=l.getElementById(o.roots[E]);w.push(R)}b=l.collection(w)}else if(ye(o.roots))b=l.$(o.roots);else if(g)b=f.roots();else{var P=d.components();b=l.collection();for(var $=function(Ft){var pn=P[Ft],en=pn.maxDegree(!1),jt=pn.filter(function(cn){return cn.degree(!1)===en});b=b.add(jt)},K=0;K<P.length;K++)$(K)}var J=[],ne={},re=function(Ft,pn){null==J[pn]&&(J[pn]=[]);var en=J[pn].length;J[pn].push(Ft),Vw(Ft,{index:en,depth:pn})};p.bfs({roots:b,directed:o.directed,visit:function(Ft,pn,en,jt,cn){var Hn=Ft[0],An=Hn.id();re(Hn,cn),ne[An]=!0}});for(var Ce=[],Se=0;Se<f.length;Se++){var de=f[Se];ne[de.id()]||Ce.push(de)}var Ee=function(Ft){for(var pn=J[Ft],en=0;en<pn.length;en++){var jt=pn[en];null!=jt?Vw(jt,{depth:Ft,index:en}):(pn.splice(en,1),en--)}},he=function(){for(var Ft=0;Ft<J.length;Ft++)Ee(Ft)},ke=function(Ft,pn){for(var en=fu(Ft),jt=Ft.incomers().filter(function(fe){return fe.isNode()&&d.has(fe)}),cn=-1,Hn=Ft.id(),An=0;An<jt.length;An++){var Rt=fu(jt[An]);cn=Math.max(cn,Rt.depth)}return en.depth<=cn&&(pn[Hn]?null:(function(Ft,pn){var en=fu(Ft);J[en.depth][en.index]=null,re(Ft,pn)}(Ft,cn+1),pn[Hn]=!0,!0))};if(g&&y){var Te=[],ge={},Fe=function(Ft){return Te.push(Ft)};for(f.forEach(function(Ht){return Te.push(Ht)});Te.length>0;){var Xe=Te.shift(),Ve=ke(Xe,ge);if(Ve)Xe.outgoers().filter(function(Ht){return Ht.isNode()&&d.has(Ht)}).forEach(Fe);else if(null===Ve){ur("Detected double maximal shift for node `"+Xe.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}he();var je=0;if(o.avoidOverlap)for(var Qe=0;Qe<f.length;Qe++){var ct=f[Qe].layoutDimensions(o);je=Math.max(je,ct.w,ct.h)}var wt={},Dt=function(Ft){if(wt[Ft.id()])return wt[Ft.id()];for(var pn=fu(Ft).depth,en=Ft.neighborhood(),jt=0,cn=0,Hn=0;Hn<en.length;Hn++){var An=en[Hn];if(!An.isEdge()&&!An.isParent()&&f.has(An)){var mn=fu(An);if(null!=mn){var Rt=mn.index,fe=mn.depth;null!=Rt&&null!=fe&&fe<pn&&(jt+=Rt/J[fe].length,cn++)}}}return jt/=cn=Math.max(1,cn),0===cn&&(jt=0),wt[Ft.id()]=jt,jt},yt=function(Ft,pn){var cn=Dt(Ft)-Dt(pn);return 0===cn?As(Ft.id(),pn.id()):cn};void 0!==o.depthSort&&(yt=o.depthSort);for(var mt=0;mt<J.length;mt++)J[mt].sort(yt),Ee(mt);for(var Ze=[],xt=0;xt<Ce.length;xt++)Ze.push(Ce[xt]);J.unshift(Ze),he();for(var Mt=0,Lt=0;Lt<J.length;Lt++)Mt=Math.max(J[Lt].length,Mt);var Vt_x=_.x1+_.w/2,Vt_y=_.x1+_.h/2,xn=J.reduce(function(Ht,Ft){return Math.max(Ht,Ft.length)},0);return d.nodes().layoutPositions(this,o,function(Ft){var pn=fu(Ft),en=pn.depth,jt=pn.index,cn=J[en].length,Hn=Math.max(_.w/((o.grid?xn:cn)+1),je),An=Math.max(_.h/(J.length+1),je),mn=Math.min(_.w/2/J.length,_.h/2/J.length);if(mn=Math.max(mn,je),o.circle){var fe=mn*en+mn-(J.length>0&&J[0].length<=3?mn/2:0),ot=2*Math.PI/J[en].length*jt;return 0===en&&1===J[0].length&&(fe=1),{x:Vt_x+fe*Math.cos(ot),y:Vt_y+fe*Math.sin(ot)}}return{x:Vt_x+(jt+1-(cn+1)/2)*Hn,y:(en+1)*An}}),this};var nM={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(o,l){return!0},ready:void 0,stop:void 0,transform:function(o,l){return l}};function Ls(c){this.options=Zt({},nM,c)}Ls.prototype.run=function(){var c=this.options,o=c,l=c.cy,d=o.eles,f=void 0!==o.counterclockwise?!o.counterclockwise:o.clockwise,p=d.nodes().not(":parent");o.sort&&(p=p.sort(o.sort));for(var w,g=Lr(o.boundingBox?o.boundingBox:{x1:0,y1:0,w:l.width(),h:l.height()}),y={x:g.x1+g.w/2,y:g.y1+g.h/2},b=(void 0===o.sweep?2*Math.PI-2*Math.PI/p.length:o.sweep)/Math.max(1,p.length-1),E=0,M=0;M<p.length;M++){var P=p[M].layoutDimensions(o);E=Math.max(E,P.w,P.h)}if(w=pe(o.radius)?o.radius:p.length<=1?0:Math.min(g.h,g.w)/2-E,p.length>1&&o.avoidOverlap){E*=1.75;var J=Math.cos(b)-Math.cos(0),ne=Math.sin(b)-Math.sin(0),re=Math.sqrt(E*E/(J*J+ne*ne));w=Math.max(re,w)}return d.nodes().layoutPositions(this,o,function(Se,de){var Ee=o.startAngle+de*b*(f?1:-1),he=w*Math.cos(Ee),ke=w*Math.sin(Ee);return{x:y.x+he,y:y.y+ke}}),this};var ug={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(o){return o.degree()},levelWidth:function(o){return o.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(o,l){return!0},ready:void 0,stop:void 0,transform:function(o,l){return l}};function mc(c){this.options=Zt({},ug,c)}mc.prototype.run=function(){for(var c=this.options,o=c,l=void 0!==o.counterclockwise?!o.counterclockwise:o.clockwise,d=c.cy,f=o.eles,p=f.nodes().not(":parent"),g=Lr(o.boundingBox?o.boundingBox:{x1:0,y1:0,w:d.width(),h:d.height()}),y={x:g.x1+g.w/2,y:g.y1+g.h/2},_=[],b=0,w=0;w<p.length;w++){var M,E=p[w];M=o.concentric(E),_.push({value:M,node:E}),E._private.scratch.concentric=M}p.updateStyle();for(var R=0;R<p.length;R++){var $=p[R].layoutDimensions(o);b=Math.max(b,$.w,$.h)}_.sort(function(Ht,Ft){return Ft.value-Ht.value});for(var K=o.levelWidth(p),J=[[]],ne=J[0],re=0;re<_.length;re++){var ue=_[re];ne.length>0&&Math.abs(ne[0].value-ue.value)>=K&&J.push(ne=[]),ne.push(ue)}var Se=b+o.minNodeSpacing;if(!o.avoidOverlap){var de=J.length>0&&J[0].length>1,Ee=Math.min(g.w,g.h)/2-Se;Se=Math.min(Se,Ee/(J.length+de?1:0))}for(var ke=0,Te=0;Te<J.length;Te++){var ge=J[Te],Fe=void 0===o.sweep?2*Math.PI-2*Math.PI/ge.length:o.sweep,Me=ge.dTheta=Fe/Math.max(1,ge.length-1);if(ge.length>1&&o.avoidOverlap){var Xe=Math.cos(Me)-Math.cos(0),Ve=Math.sin(Me)-Math.sin(0),je=Math.sqrt(Se*Se/(Xe*Xe+Ve*Ve));ke=Math.max(je,ke)}ge.r=ke,ke+=Se}if(o.equidistant){for(var Qe=0,it=0,ct=0;ct<J.length;ct++)Qe=Math.max(Qe,J[ct].r-it);it=0;for(var wt=0;wt<J.length;wt++){var Dt=J[wt];0===wt&&(it=Dt.r),Dt.r=it,it+=Qe}}for(var yt={},mt=0;mt<J.length;mt++)for(var Ze=J[mt],xt=Ze.dTheta,Mt=Ze.r,Lt=0;Lt<Ze.length;Lt++){var Vt=Ze[Lt],xn=o.startAngle+(l?1:-1)*xt*Lt,kn={x:y.x+Mt*Math.cos(xn),y:y.y+Mt*Math.sin(xn)};yt[Vt.node.id()]=kn}return f.nodes().layoutPositions(this,o,function(Ht){var Ft=Ht.id();return yt[Ft]}),this};var py,gy={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(o,l){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(o){return 2048},nodeOverlap:4,idealEdgeLength:function(o){return 32},edgeElasticity:function(o){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function sf(c){this.options=Zt({},gy,c),this.options.layout=this}sf.prototype.run=function(){var c=this.options,o=c.cy,l=this;l.stopped=!1,(!0===c.animate||!1===c.animate)&&l.emit({type:"layoutstart",layout:l}),py=!0===c.debug;var d=Hw(o,l,c);py&&(void 0)(d),c.randomize&&Gw(d);var f=Si(),p=function(){lf(d,o,c),!0===c.fit&&o.fit(c.padding)},g=function(M){return!(l.stopped||M>=c.numIter||(cf(d,c),d.temperature=d.temperature*c.coolingFactor,d.temperature<c.minTemp))},y=function(){if(!0===c.animate||!1===c.animate)p(),l.one("layoutstop",c.stop),l.emit({type:"layoutstop",layout:l});else{var M=c.eles.nodes(),R=af(d,c,M);M.layoutPositions(l,c,R)}},_=0,b=!0;if(!0===c.animate)!function E(){for(var M=0;b&&M<c.refresh;)b=g(_),_++,M++;b?(Si()-f>=c.animationThreshold&&p(),ll(E)):(gu(d,c),y())}();else{for(;b;)b=g(_),_++;gu(d,c),y()}return this},sf.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},sf.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var Hw=function(o,l,d){for(var f=d.eles.edges(),p=d.eles.nodes(),g={isCompound:o.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:p.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:f.size(),temperature:d.initialTemp,clientWidth:o.width(),clientHeight:o.width(),boundingBox:Lr(d.boundingBox?d.boundingBox:{x1:0,y1:0,w:o.width(),h:o.height()})},y=d.eles.components(),_={},b=0;b<y.length;b++)for(var w=y[b],E=0;E<w.length;E++)_[w[E].id()]=b;for(b=0;b<g.nodeSize;b++){var P=(R=p[b]).layoutDimensions(d);($={}).isLocked=R.locked(),$.id=R.data("id"),$.parentId=R.data("parent"),$.cmptId=_[R.id()],$.children=[],$.positionX=R.position("x"),$.positionY=R.position("y"),$.offsetX=0,$.offsetY=0,$.height=P.w,$.width=P.h,$.maxX=$.positionX+$.width/2,$.minX=$.positionX-$.width/2,$.maxY=$.positionY+$.height/2,$.minY=$.positionY-$.height/2,$.padLeft=parseFloat(R.style("padding")),$.padRight=parseFloat(R.style("padding")),$.padTop=parseFloat(R.style("padding")),$.padBottom=parseFloat(R.style("padding")),$.nodeRepulsion=$e(d.nodeRepulsion)?d.nodeRepulsion(R):d.nodeRepulsion,g.layoutNodes.push($),g.idToIndex[$.id]=b}var K=[],J=0,ne=-1,re=[];for(b=0;b<g.nodeSize;b++){var R,ue=(R=g.layoutNodes[b]).parentId;null!=ue?g.layoutNodes[g.idToIndex[ue]].children.push(R.id):(K[++ne]=R.id,re.push(R.id))}for(g.graphSet.push(re);J<=ne;){var Ce=K[J++],de=g.layoutNodes[g.idToIndex[Ce]].children;if(de.length>0)for(g.graphSet.push(de),b=0;b<de.length;b++)K[++ne]=de[b]}for(b=0;b<g.graphSet.length;b++){var Ee=g.graphSet[b];for(E=0;E<Ee.length;E++)g.indexToGraph[g.idToIndex[Ee[E]]]=b}for(b=0;b<g.edgeSize;b++){var ke=f[b],Te={};Te.id=ke.data("id"),Te.sourceId=ke.data("source"),Te.targetId=ke.data("target");var ge=$e(d.idealEdgeLength)?d.idealEdgeLength(ke):d.idealEdgeLength,Fe=$e(d.edgeElasticity)?d.edgeElasticity(ke):d.edgeElasticity,Me=g.idToIndex[Te.sourceId],Xe=g.idToIndex[Te.targetId];if(g.indexToGraph[Me]!=g.indexToGraph[Xe]){for(var Qe=zw(Te.sourceId,Te.targetId,g),it=g.graphSet[Qe],ct=0,$=g.layoutNodes[Me];-1===it.indexOf($.id);)$=g.layoutNodes[g.idToIndex[$.parentId]],ct++;for($=g.layoutNodes[Xe];-1===it.indexOf($.id);)$=g.layoutNodes[g.idToIndex[$.parentId]],ct++;ge*=ct*d.nestingFactor}Te.idealLength=ge,Te.elasticity=Fe,g.layoutEdges.push(Te)}return g},zw=function(o,l,d){var f=jw(o,l,0,d);return 2>f.count?0:f.graph},jw=function c(o,l,d,f){var p=f.graphSet[d];if(-1<p.indexOf(o)&&-1<p.indexOf(l))return{count:2,graph:d};for(var g=0,y=0;y<p.length;y++){var w=f.layoutNodes[f.idToIndex[p[y]]].children;if(0!==w.length){var M=c(o,l,f.indexToGraph[f.idToIndex[w[0]]],f);if(0!==M.count){if(1!==M.count)return M;if(2==++g)break}}}return{count:g,graph:d}},Gw=function(o,l){for(var d=o.clientWidth,f=o.clientHeight,p=0;p<o.nodeSize;p++){var g=o.layoutNodes[p];0===g.children.length&&!g.isLocked&&(g.positionX=Math.random()*d,g.positionY=Math.random()*f)}},af=function(o,l,d){var f=o.boundingBox,p={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return l.boundingBox&&(d.forEach(function(g){var y=o.layoutNodes[o.idToIndex[g.data("id")]];p.x1=Math.min(p.x1,y.positionX),p.x2=Math.max(p.x2,y.positionX),p.y1=Math.min(p.y1,y.positionY),p.y2=Math.max(p.y2,y.positionY)}),p.w=p.x2-p.x1,p.h=p.y2-p.y1),function(g,y){var _=o.layoutNodes[o.idToIndex[g.data("id")]];return l.boundingBox?{x:f.x1+(_.positionX-p.x1)/p.w*f.w,y:f.y1+(_.positionY-p.y1)/p.h*f.h}:{x:_.positionX,y:_.positionY}}},lf=function(o,l,d){var f=d.layout,p=d.eles.nodes(),g=af(o,d,p);p.positions(g),!0!==o.ready&&(o.ready=!0,f.one("layoutready",d.ready),f.emit({type:"layoutready",layout:this}))},cf=function(o,l,d){Ml(o,l),Bd(o),uf(o,l),my(o),Ww(o)},Ml=function(o,l){for(var d=0;d<o.graphSet.length;d++)for(var f=o.graphSet[d],p=f.length,g=0;g<p;g++)for(var y=o.layoutNodes[o.idToIndex[f[g]]],_=g+1;_<p;_++)Ld(y,o.layoutNodes[o.idToIndex[f[_]]],o,l)},dg=function(o){return-o+2*o*Math.random()},Ld=function(o,l,d,f){if(o.cmptId===l.cmptId||d.isCompound){var y=l.positionX-o.positionX,_=l.positionY-o.positionY;0===y&&0===_&&(y=dg(1),_=dg(1));var w=$w(o,l,y,_);if(w>0)var R=(E=f.nodeOverlap*w)*y/(M=Math.sqrt(y*y+_*_)),P=E*_/M;else{var E,$=Fd(o,y,_),K=Fd(l,-1*y,-1*_),J=K.x-$.x,ne=K.y-$.y,re=J*J+ne*ne,M=Math.sqrt(re);R=(E=(o.nodeRepulsion+l.nodeRepulsion)/re)*J/M,P=E*ne/M}o.isLocked||(o.offsetX-=R,o.offsetY-=P),l.isLocked||(l.offsetX+=R,l.offsetY+=P)}},$w=function(o,l,d,f){if(d>0)var p=o.maxX-l.minX;else p=l.maxX-o.minX;if(f>0)var g=o.maxY-l.minY;else g=l.maxY-o.minY;return p>=0&&g>=0?Math.sqrt(p*p+g*g):0},Fd=function(o,l,d){var f=o.positionX,p=o.positionY,g=o.height||1,y=o.width||1,_=d/l,b=g/y,w={};return 0===l&&0<d||0===l&&0>d?(w.x=f,w.y=p+g/2,w):0<l&&-1*b<=_&&_<=b?(w.x=f+y/2,w.y=p+y*d/2/l,w):0>l&&-1*b<=_&&_<=b?(w.x=f-y/2,w.y=p-y*d/2/l,w):0<d&&(_<=-1*b||_>=b)?(w.x=f+g*l/2/d,w.y=p+g/2,w):(0>d&&(_<=-1*b||_>=b)&&(w.x=f-g*l/2/d,w.y=p-g/2),w)},Bd=function(o,l){for(var d=0;d<o.edgeSize;d++){var f=o.layoutEdges[d],g=o.layoutNodes[o.idToIndex[f.sourceId]],_=o.layoutNodes[o.idToIndex[f.targetId]],b=_.positionX-g.positionX,w=_.positionY-g.positionY;if(0!==b||0!==w){var E=Fd(g,b,w),M=Fd(_,-1*b,-1*w),R=M.x-E.x,P=M.y-E.y,$=Math.sqrt(R*R+P*P),K=Math.pow(f.idealLength-$,2)/f.elasticity;if(0!==$)var J=K*R/$,ne=K*P/$;else J=0,ne=0;g.isLocked||(g.offsetX+=J,g.offsetY+=ne),_.isLocked||(_.offsetX-=J,_.offsetY-=ne)}}},uf=function(o,l){if(0!==l.gravity)for(var f=0;f<o.graphSet.length;f++){var p=o.graphSet[f],g=p.length;if(0===f)var y=o.clientHeight/2,_=o.clientWidth/2;else{var w=o.layoutNodes[o.idToIndex[o.layoutNodes[o.idToIndex[p[0]]].parentId]];y=w.positionX,_=w.positionY}for(var E=0;E<g;E++){var M=o.layoutNodes[o.idToIndex[p[E]]];if(!M.isLocked){var R=y-M.positionX,P=_-M.positionY,$=Math.sqrt(R*R+P*P);if($>1){var J=l.gravity*P/$;M.offsetX+=l.gravity*R/$,M.offsetY+=J}}}}},my=function(o,l){var d=[],f=0,p=-1;for(d.push.apply(d,o.graphSet[0]),p+=o.graphSet[0].length;f<=p;){var g=d[f++],_=o.layoutNodes[o.idToIndex[g]],b=_.children;if(0<b.length&&!_.isLocked){for(var w=_.offsetX,E=_.offsetY,M=0;M<b.length;M++){var R=o.layoutNodes[o.idToIndex[b[M]]];R.offsetX+=w,R.offsetY+=E,d[++p]=b[M]}_.offsetX=0,_.offsetY=0}}},Ww=function(o,l){for(var d=0;d<o.nodeSize;d++)0<(f=o.layoutNodes[d]).children.length&&(f.maxX=void 0,f.minX=void 0,f.maxY=void 0,f.minY=void 0);for(d=0;d<o.nodeSize;d++)if(!(0<(f=o.layoutNodes[d]).children.length||f.isLocked)){var p=qw(f.offsetX,f.offsetY,o.temperature);f.positionX+=p.x,f.positionY+=p.y,f.offsetX=0,f.offsetY=0,f.minX=f.positionX-f.width,f.maxX=f.positionX+f.width,f.minY=f.positionY-f.height,f.maxY=f.positionY+f.height,pu(f,o)}for(d=0;d<o.nodeSize;d++){var f;0<(f=o.layoutNodes[d]).children.length&&!f.isLocked&&(f.positionX=(f.maxX+f.minX)/2,f.positionY=(f.maxY+f.minY)/2,f.width=f.maxX-f.minX,f.height=f.maxY-f.minY)}},qw=function(o,l,d){var f=Math.sqrt(o*o+l*l);if(f>d)var p={x:d*o/f,y:d*l/f};else p={x:o,y:l};return p},pu=function c(o,l){var d=o.parentId;if(null!=d){var f=l.layoutNodes[l.idToIndex[d]],p=!1;if((null==f.maxX||o.maxX+f.padRight>f.maxX)&&(f.maxX=o.maxX+f.padRight,p=!0),(null==f.minX||o.minX-f.padLeft<f.minX)&&(f.minX=o.minX-f.padLeft,p=!0),(null==f.maxY||o.maxY+f.padBottom>f.maxY)&&(f.maxY=o.maxY+f.padBottom,p=!0),(null==f.minY||o.minY-f.padTop<f.minY)&&(f.minY=o.minY-f.padTop,p=!0),p)return c(f,l)}},gu=function(o,l){for(var d=o.layoutNodes,f=[],p=0;p<d.length;p++){var g=d[p],y=g.cmptId;(f[y]=f[y]||[]).push(g)}var b=0;for(p=0;p<f.length;p++)if(w=f[p]){w.x1=1/0,w.x2=-1/0,w.y1=1/0,w.y2=-1/0;for(var E=0;E<w.length;E++){var M=w[E];w.x1=Math.min(w.x1,M.positionX-M.width/2),w.x2=Math.max(w.x2,M.positionX+M.width/2),w.y1=Math.min(w.y1,M.positionY-M.height/2),w.y2=Math.max(w.y2,M.positionY+M.height/2)}w.w=w.x2-w.x1,w.h=w.y2-w.y1,b+=w.w*w.h}f.sort(function(ne,re){return re.w*re.h-ne.w*ne.h});var R=0,P=0,$=0,K=0,J=Math.sqrt(b)*o.clientWidth/o.clientHeight;for(p=0;p<f.length;p++){var w;if(w=f[p]){for(E=0;E<w.length;E++)(M=w[E]).isLocked||(M.positionX+=R-w.x1,M.positionY+=P-w.y1);R+=w.w+l.componentSpacing,$+=w.w+l.componentSpacing,K=Math.max(K,w.h),$>J&&(P+=K+l.componentSpacing,R=0,$=0,K=0)}}},Yw={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(o){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(o,l){return!0},ready:void 0,stop:void 0,transform:function(o,l){return l}};function Xw(c){this.options=Zt({},Yw,c)}Xw.prototype.run=function(){var c=this.options,o=c,l=c.cy,d=o.eles,f=d.nodes().not(":parent");o.sort&&(f=f.sort(o.sort));var p=Lr(o.boundingBox?o.boundingBox:{x1:0,y1:0,w:l.width(),h:l.height()});if(0===p.h||0===p.w)d.nodes().layoutPositions(this,o,function(wt){return{x:p.x1,y:p.y1}});else{var g=f.size(),y=Math.sqrt(g*p.h/p.w),_=Math.round(y),b=Math.round(p.w/p.h*y),w=function(Dt){if(null==Dt)return Math.min(_,b);Math.min(_,b)==_?_=Dt:b=Dt},E=function(Dt){if(null==Dt)return Math.max(_,b);Math.max(_,b)==_?_=Dt:b=Dt},M=o.rows,R=null!=o.cols?o.cols:o.columns;if(null!=M&&null!=R)_=M,b=R;else if(null!=M&&null==R)_=M,b=Math.ceil(g/_);else if(null==M&&null!=R)b=R,_=Math.ceil(g/b);else if(b*_>g){var P=w(),$=E();(P-1)*$>=g?w(P-1):($-1)*P>=g&&E($-1)}else for(;b*_<g;){var K=w(),J=E();(J+1)*K>=g?E(J+1):w(K+1)}var ne=p.w/b,re=p.h/_;if(o.condense&&(ne=0,re=0),o.avoidOverlap)for(var ue=0;ue<f.length;ue++){var Ce=f[ue],Se=Ce._private.position;(null==Se.x||null==Se.y)&&(Se.x=0,Se.y=0);var de=Ce.layoutDimensions(o),Ee=o.avoidOverlapPadding,ke=de.h+Ee;ne=Math.max(ne,de.w+Ee),re=Math.max(re,ke)}for(var Te={},ge=function(Dt,yt){return!!Te["c-"+Dt+"-"+yt]},Fe=function(Dt,yt){Te["c-"+Dt+"-"+yt]=!0},Me=0,Xe=0,Ve=function(){++Xe>=b&&(Xe=0,Me++)},je={},Qe=0;Qe<f.length;Qe++){var it=f[Qe],ct=o.position(it);if(ct&&(void 0!==ct.row||void 0!==ct.col)){var rt={row:ct.row,col:ct.col};if(void 0===rt.col)for(rt.col=0;ge(rt.row,rt.col);)rt.col++;else if(void 0===rt.row)for(rt.row=0;ge(rt.row,rt.col);)rt.row++;je[it.id()]=rt,Fe(rt.row,rt.col)}}f.layoutPositions(this,o,function(Dt,yt){var mt,Ze;if(Dt.locked()||Dt.isParent())return!1;var xt=je[Dt.id()];if(xt)mt=xt.col*ne+ne/2+p.x1,Ze=xt.row*re+re/2+p.y1;else{for(;ge(Me,Xe);)Ve();mt=Xe*ne+ne/2+p.x1,Ze=Me*re+re/2+p.y1,Fe(Me,Xe),Ve()}return{x:mt,y:Ze}})}return this};var vy={ready:function(){},stop:function(){}};function hg(c){this.options=Zt({},vy,c)}hg.prototype.run=function(){var c=this.options,o=c.eles,l=this;return l.emit("layoutstart"),o.nodes().positions(function(){return{x:0,y:0}}),l.one("layoutready",c.ready),l.emit("layoutready"),l.one("layoutstop",c.stop),l.emit("layoutstop"),this},hg.prototype.stop=function(){return this};var rM={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(o,l){return!0},ready:void 0,stop:void 0,transform:function(o,l){return l}};function yy(c){this.options=Zt({},rM,c)}yy.prototype.run=function(){var c=this.options,l=c.eles.nodes(),d=$e(c.positions);return l.layoutPositions(this,c,function(p,g){var y=function f(p){return null==c.positions?function(o){return{x:o.x,y:o.y}}(p.position()):d?c.positions(p):c.positions[p._private.data.id]??null}(p);return!p.locked()&&null!=y&&y}),this};var Kw={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(o,l){return!0},ready:void 0,stop:void 0,transform:function(o,l){return l}};function by(c){this.options=Zt({},Kw,c)}by.prototype.run=function(){var c=this.options,o=c.cy,l=c.eles,d=Lr(c.boundingBox?c.boundingBox:{x1:0,y1:0,w:o.width(),h:o.height()});return l.nodes().layoutPositions(this,c,function(g,y){return{x:d.x1+Math.round(Math.random()*d.w),y:d.y1+Math.round(Math.random()*d.h)}}),this};var df=[{name:"breadthfirst",impl:fy},{name:"circle",impl:Ls},{name:"concentric",impl:mc},{name:"cose",impl:sf},{name:"grid",impl:Xw},{name:"null",impl:hg},{name:"preset",impl:yy},{name:"random",impl:by}];function fg(c){this.options=c,this.notifications=0}var _y=function(){},pg=function(){throw new Error("A headless instance can not render images")};fg.prototype={recalculateRenderedStyle:_y,notify:function(){this.notifications++},init:_y,isHeadless:function(){return!0},png:pg,jpg:pg};var wy={arrowShapeWidth:.3,registerArrowShapes:function(){var c=this.arrowShapes={},o=this,l=function(b,w,E,M,R,P,$){return R.x-E/2-$<=b&&b<=R.x+E/2+$&&R.y-E/2-$<=w&&w<=R.y+E/2+$},d=function(b,w,E,M,R){var P=b*Math.cos(M)-w*Math.sin(M),$=b*Math.sin(M)+w*Math.cos(M);return{x:P*E+R.x,y:$*E+R.y}},f=function(b,w,E,M){for(var R=[],P=0;P<b.length;P+=2)R.push(d(b[P],b[P+1],w,E,M));return R},p=function(b){for(var w=[],E=0;E<b.length;E++){var M=b[E];w.push(M.x,M.y)}return w},g=function(b){return b.pstyle("width").pfValue*b.pstyle("arrow-scale").pfValue*2},y=function(b,w){ye(w)&&(w=c[w]),c[b]=Zt({name:b,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(M,R,P,$,K,J){var ne=p(f(this.points,P+2*J,$,K));return Mr(M,R,ne)},roughCollide:l,draw:function(M,R,P,$){var K=f(this.points,R,P,$);o.arrowShapeImpl("polygon")(M,K)},spacing:function(M){return 0},gap:g},w)};y("none",{collide:Gc,roughCollide:Gc,draw:$c,spacing:Ta,gap:Ta}),y("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),y("arrow","triangle"),y("triangle-backcurve",{points:c.triangle.points,controlPoint:[0,-.15],roughCollide:l,draw:function(b,w,E,M,R){var P=f(this.points,w,E,M),$=this.controlPoint,K=d($[0],$[1],w,E,M);o.arrowShapeImpl(this.name)(b,P,K)},gap:function(b){return.8*g(b)}}),y("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(b,w,E,M,R,P,$){var K=p(f(this.points,E+2*$,M,R)),J=p(f(this.pointsTee,E+2*$,M,R));return Mr(b,w,K)||Mr(b,w,J)},draw:function(b,w,E,M,R){var P=f(this.points,w,E,M),$=f(this.pointsTee,w,E,M);o.arrowShapeImpl(this.name)(b,P,$)}}),y("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(b,w,E,M,R,P,$){var K=R,J=Math.pow(K.x-b,2)+Math.pow(K.y-w,2)<=Math.pow((E+2*$)*this.radius,2),ne=p(f(this.points,E+2*$,M,R));return Mr(b,w,ne)||J},draw:function(b,w,E,M,R){var P=f(this.pointsTr,w,E,M);o.arrowShapeImpl(this.name)(b,P,M.x,M.y,this.radius*w)},spacing:function(b){return o.getArrowWidth(b.pstyle("width").pfValue,b.pstyle("arrow-scale").value)*this.radius}}),y("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(b,w){var E=this.baseCrossLinePts.slice(),M=w/b;return E[3]=E[3]-M,E[5]=E[5]-M,E},collide:function(b,w,E,M,R,P,$){var K=p(f(this.points,E+2*$,M,R)),J=p(f(this.crossLinePts(E,P),E+2*$,M,R));return Mr(b,w,K)||Mr(b,w,J)},draw:function(b,w,E,M,R){var P=f(this.points,w,E,M),$=f(this.crossLinePts(w,R),w,E,M);o.arrowShapeImpl(this.name)(b,P,$)}}),y("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(b){return.525*g(b)}}),y("circle",{radius:.15,collide:function(b,w,E,M,R,P,$){var K=R;return Math.pow(K.x-b,2)+Math.pow(K.y-w,2)<=Math.pow((E+2*$)*this.radius,2)},draw:function(b,w,E,M,R){o.arrowShapeImpl(this.name)(b,M.x,M.y,this.radius*w)},spacing:function(b){return o.getArrowWidth(b.pstyle("width").pfValue,b.pstyle("arrow-scale").value)*this.radius}}),y("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(b){return 1},gap:function(b){return 1}}),y("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),y("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(b){return b.pstyle("width").pfValue*b.pstyle("arrow-scale").value}}),y("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(b){return.95*b.pstyle("width").pfValue*b.pstyle("arrow-scale").value}})}},Al={projectIntoViewport:function(c,o){var l=this.cy,d=this.findContainerClientCoords(),f=d[0],p=d[1],g=d[4],y=l.pan(),_=l.zoom();return[((c-f)/g-y.x)/_,((o-p)/g-y.y)/_]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var c=this.container,o=c.getBoundingClientRect(),l=H.getComputedStyle(c),d=function(J){return parseFloat(l.getPropertyValue(J))},f_left=d("padding-left"),f_right=d("padding-right"),f_top=d("padding-top"),f_bottom=d("padding-bottom"),p_left=d("border-left-width"),p_right=d("border-right-width"),p_top=d("border-top-width"),g=(d("border-bottom-width"),c.clientWidth);return this.containerBB=[o.left+f_left+p_left,o.top+f_top+p_top,g-(f_left+f_right),c.clientHeight-(f_top+f_bottom),o.width/(g+(p_left+p_right))]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(c,o,l,d){return this.findNearestElements(c,o,l,d)[0]},findNearestElements:function(c,o,l,d){var P,$,f=this,p=this,g=p.getCachedZSortedEles(),y=[],_=p.cy.zoom(),b=p.cy.hasCompoundNodes(),w=(d?24:8)/_,E=(d?8:2)/_,M=(d?8:2)/_,R=1/0;function K(de,Ee){if(de.isNode()){if($)return;$=de,y.push(de)}if(de.isEdge()&&(null==Ee||Ee<R))if(P){if(P.pstyle("z-compound-depth").value===de.pstyle("z-compound-depth").value&&P.pstyle("z-compound-depth").value===de.pstyle("z-compound-depth").value)for(var he=0;he<y.length;he++)if(y[he].isEdge()){y[he]=de,P=de,R=Ee??R;break}}else y.push(de),P=de,R=Ee??R}function J(de){var Ee=de.outerWidth()+2*E,he=de.outerHeight()+2*E,ke=Ee/2,Te=he/2,ge=de.position();if(ge.x-ke<=c&&c<=ge.x+ke&&ge.y-Te<=o&&o<=ge.y+Te&&p.nodeShapes[f.getNodeShape(de)].checkPoint(c,o,0,Ee,he,ge.x,ge.y))return K(de,0),!0}function ne(de){var Xe,Ee=de._private,he=Ee.rscratch,ke=de.pstyle("width").pfValue,Te=de.pstyle("arrow-scale").value,ge=ke/2+w,Fe=ge*ge,Me=2*ge,Qe=Ee.source,it=Ee.target;if("segments"===he.edgeType||"straight"===he.edgeType||"haystack"===he.edgeType){for(var Ve=he.allpts,je=0;je+3<Ve.length;je+=2)if(ld(c,o,Ve[je],Ve[je+1],Ve[je+2],Ve[je+3],Me)&&Fe>(Xe=Rp(c,o,Ve[je],Ve[je+1],Ve[je+2],Ve[je+3])))return K(de,Xe),!0}else if("bezier"===he.edgeType||"multibezier"===he.edgeType||"self"===he.edgeType||"compound"===he.edgeType)for(Ve=he.allpts,je=0;je+5<he.allpts.length;je+=4)if(qc(c,o,Ve[je],Ve[je+1],Ve[je+2],Ve[je+3],Ve[je+4],Ve[je+5],Me)&&Fe>(Xe=cd(c,o,Ve[je],Ve[je+1],Ve[je+2],Ve[je+3],Ve[je+4],Ve[je+5])))return K(de,Xe),!0;Qe=Qe||Ee.source,it=it||Ee.target;var ct=f.getArrowWidth(ke,Te),rt=[{name:"source",x:he.arrowStartX,y:he.arrowStartY,angle:he.srcArrowAngle},{name:"target",x:he.arrowEndX,y:he.arrowEndY,angle:he.tgtArrowAngle},{name:"mid-source",x:he.midX,y:he.midY,angle:he.midsrcArrowAngle},{name:"mid-target",x:he.midX,y:he.midY,angle:he.midtgtArrowAngle}];for(je=0;je<rt.length;je++){var tt=rt[je],wt=p.arrowShapes[de.pstyle(tt.name+"-arrow-shape").value],Dt=de.pstyle("width").pfValue;if(wt.roughCollide(c,o,ct,tt.angle,{x:tt.x,y:tt.y},Dt,w)&&wt.collide(c,o,ct,tt.angle,{x:tt.x,y:tt.y},Dt,w))return K(de),!0}b&&y.length>0&&(J(Qe),J(it))}function re(de,Ee,he){return vo(de,Ee,he)}function ue(de,Ee){var Te,he=de._private,ke=M;Te=Ee?Ee+"-":"",de.boundingBox();var ge=he.labelBounds[Ee||"main"],Fe=de.pstyle(Te+"label").value;if("yes"===de.pstyle("text-events").strValue&&Fe){var Xe=re(he.rscratch,"labelX",Ee),Ve=re(he.rscratch,"labelY",Ee),je=re(he.rscratch,"labelAngle",Ee),Qe=de.pstyle(Te+"text-margin-x").pfValue,it=de.pstyle(Te+"text-margin-y").pfValue,ct=ge.x1-ke-Qe,rt=ge.x2+ke-Qe,tt=ge.y1-ke-it,wt=ge.y2+ke-it;if(je){var Dt=Math.cos(je),yt=Math.sin(je),mt=function(kn,Ht){return{x:(kn-=Xe)*Dt-(Ht-=Ve)*yt+Xe,y:kn*yt+Ht*Dt+Ve}},Ze=mt(ct,tt),xt=mt(ct,wt),Mt=mt(rt,tt),Lt=mt(rt,wt);if(Mr(c,o,[Ze.x+Qe,Ze.y+it,Mt.x+Qe,Mt.y+it,Lt.x+Qe,Lt.y+it,xt.x+Qe,xt.y+it]))return K(de),!0}else if(_o(ge,c,o))return K(de),!0}}l&&(g=g.interactive);for(var Ce=g.length-1;Ce>=0;Ce--){var Se=g[Ce];Se.isNode()?J(Se)||ue(Se):ne(Se)||ue(Se)||ue(Se,"source")||ue(Se,"target")}return y},getAllInBox:function(c,o,l,d){for(var f=this.getCachedZSortedEles().interactive,p=[],g=Math.min(c,l),y=Math.max(c,l),_=Math.min(o,d),b=Math.max(o,d),w=Lr({x1:c=g,y1:o=_,x2:l=y,y2:d=b}),E=0;E<f.length;E++){var M=f[E];if(M.isNode()){var R=M,P=R.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});Ys(w,P)&&!Oo(P,w)&&p.push(R)}else{var $=M,K=$._private,J=K.rscratch;if(null!=J.startX&&null!=J.startY&&!_o(w,J.startX,J.startY)||null!=J.endX&&null!=J.endY&&!_o(w,J.endX,J.endY))continue;if("bezier"===J.edgeType||"multibezier"===J.edgeType||"self"===J.edgeType||"compound"===J.edgeType||"segments"===J.edgeType||"haystack"===J.edgeType){for(var ne=K.rstyle.bezierPts||K.rstyle.linePts||K.rstyle.haystackPts,re=!0,ue=0;ue<ne.length;ue++)if(!Wc(w,ne[ue])){re=!1;break}re&&p.push($)}else("haystack"===J.edgeType||"straight"===J.edgeType)&&p.push($)}}return p}},gg={calculateArrowAngles:function(c){var _,b,w,E,M,R,o=c._private.rscratch,l="haystack"===o.edgeType,d="bezier"===o.edgeType,f="multibezier"===o.edgeType,p="segments"===o.edgeType,g="compound"===o.edgeType,y="self"===o.edgeType;l?(w=o.haystackPts[0],E=o.haystackPts[1],M=o.haystackPts[2],R=o.haystackPts[3]):(w=o.arrowStartX,E=o.arrowStartY,M=o.arrowEndX,R=o.arrowEndY),J=o.midX,ne=o.midY,p?(_=w-o.segpts[0],b=E-o.segpts[1]):f||g||y||d?(_=w-tr((P=o.allpts)[0],P[2],P[4],.1),b=E-tr(P[1],P[3],P[5],.1)):(_=w-J,b=E-ne),o.srcArrowAngle=Ar(_,b);var J=o.midX,ne=o.midY;if(l&&(J=(w+M)/2,ne=(E+R)/2),_=M-w,b=R-E,p)if((P=o.allpts).length/2%2==0)_=P[re=P.length/2]-P[ue=re-2],b=P[re+1]-P[ue+1];else{var re,ue,Ce=2+(re=P.length/2-1);_=P[re]-P[ue=re-2],b=P[re+1]-P[ue+1]}else if(f||g||y){var de,Ee,he,ke,ge,Te,Fe,P=o.allpts;o.ctrlpts.length/2%2==0?(de=tr(P[Te=P.length/2-1],P[ge=Te+2],P[Fe=ge+2],0),Ee=tr(P[Te+1],P[ge+1],P[Fe+1],0),he=tr(P[Te],P[ge],P[Fe],1e-4),ke=tr(P[Te+1],P[ge+1],P[Fe+1],1e-4)):(de=tr(P[Te=(ge=P.length/2-1)-2],P[ge],P[Fe=ge+2],.4999),Ee=tr(P[Te+1],P[ge+1],P[Fe+1],.4999),he=tr(P[Te],P[ge],P[Fe],.5),ke=tr(P[Te+1],P[ge+1],P[Fe+1],.5)),_=he-de,b=ke-Ee}if(o.midtgtArrowAngle=Ar(_,b),o.midDispX=_,o.midDispY=b,_*=-1,b*=-1,p&&(P=o.allpts).length/2%2!=0&&(_=-(P[Ce=2+(re=P.length/2-1)]-P[re]),b=-(P[Ce+1]-P[re+1])),o.midsrcArrowAngle=Ar(_,b),p)_=M-o.segpts[o.segpts.length-2],b=R-o.segpts[o.segpts.length-1];else if(f||g||y||d){var Me=(P=o.allpts).length;_=M-tr(P[Me-6],P[Me-4],P[Me-2],.9),b=R-tr(P[Me-5],P[Me-3],P[Me-1],.9)}else _=M-J,b=R-ne;o.tgtArrowAngle=Ar(_,b)}};gg.getArrowWidth=gg.getArrowHeight=function(c,o){var l=this.arrowWidthCache=this.arrowWidthCache||{},d=l[c+", "+o];return d||(d=Math.max(Math.pow(13.37*c,.9),29)*o,l[c+", "+o]=d,d)};var ps={};function xy(c){var o=[];if(null!=c){for(var l=0;l<c.length;l+=2)o.push({x:c[l],y:c[l+1]});return o}}ps.findHaystackPoints=function(c){for(var o=0;o<c.length;o++){var l=c[o],d=l._private,f=d.rscratch;if(!f.haystack){var p=2*Math.random()*Math.PI;f.source={x:Math.cos(p),y:Math.sin(p)},p=2*Math.random()*Math.PI,f.target={x:Math.cos(p),y:Math.sin(p)}}var g=d.source,y=d.target,_=g.position(),b=y.position(),w=g.width(),E=y.width(),M=g.height(),R=y.height(),$=l.pstyle("haystack-radius").value/2;f.haystackPts=f.allpts=[f.source.x*w*$+_.x,f.source.y*M*$+_.y,f.target.x*E*$+b.x,f.target.y*R*$+b.y],f.midX=(f.allpts[0]+f.allpts[2])/2,f.midY=(f.allpts[1]+f.allpts[3])/2,f.edgeType="haystack",f.haystack=!0,this.storeEdgeProjections(l),this.calculateArrowAngles(l),this.recalculateEdgeLabelProjections(l),this.calculateLabelAngles(l)}},ps.findSegmentsPoints=function(c,o){var l=c._private.rscratch,d=o.posPts,f=o.intersectionPts,p=o.vectorNormInverse,g=c.pstyle("edge-distances").value,y=c.pstyle("segment-weights"),_=c.pstyle("segment-distances"),b=Math.min(y.pfValue.length,_.pfValue.length);l.edgeType="segments",l.segpts=[];for(var w=0;w<b;w++){var E=y.pfValue[w],M=_.pfValue[w],R=1-E,$="node-position"===g?d:f,K={x:$.x1*R+$.x2*E,y:$.y1*R+$.y2*E};l.segpts.push(K.x+p.x*M,K.y+p.y*M)}},ps.findLoopPoints=function(c,o,l,d){var f=c._private.rscratch,p=o.dirCounts,g=o.srcPos,y=c.pstyle("control-point-distances"),_=y?y.pfValue[0]:void 0,b=c.pstyle("loop-direction").pfValue,w=c.pstyle("loop-sweep").pfValue,E=c.pstyle("control-point-step-size").pfValue;f.edgeType="self";var M=l,R=E;d&&(M=0,R=_);var P=b-Math.PI/2,$=P-w/2,K=P+w/2,J=String(b+"_"+w);M=void 0===p[J]?p[J]=0:++p[J],f.ctrlpts=[g.x+1.4*Math.cos($)*R*(M/3+1),g.y+1.4*Math.sin($)*R*(M/3+1),g.x+1.4*Math.cos(K)*R*(M/3+1),g.y+1.4*Math.sin(K)*R*(M/3+1)]},ps.findCompoundLoopPoints=function(c,o,l,d){var f=c._private.rscratch;f.edgeType="compound";var p=o.srcPos,g=o.tgtPos,y=o.srcW,_=o.srcH,b=o.tgtW,w=o.tgtH,E=c.pstyle("control-point-step-size").pfValue,M=c.pstyle("control-point-distances"),P=l,$=E;d&&(P=0,$=M?M.pfValue[0]:void 0);var J={x:p.x-y/2,y:p.y-_/2},ne={x:g.x-b/2,y:g.y-w/2},re={x:Math.min(J.x,ne.x),y:Math.min(J.y,ne.y)},Ce=Math.max(.5,Math.log(.01*y)),Se=Math.max(.5,Math.log(.01*b));f.ctrlpts=[re.x,re.y-(1+Math.pow(50,1.12)/100)*$*(P/3+1)*Ce,re.x-(1+Math.pow(50,1.12)/100)*$*(P/3+1)*Se,re.y]},ps.findStraightEdgePoints=function(c){c._private.rscratch.edgeType="straight"},ps.findBezierPoints=function(c,o,l,d,f){var p=c._private.rscratch,g=o.vectorNormInverse,y=o.posPts,_=o.intersectionPts,b=c.pstyle("edge-distances").value,w=c.pstyle("control-point-step-size").pfValue,E=c.pstyle("control-point-distances"),M=c.pstyle("control-point-weights"),R=E&&M?Math.min(E.value.length,M.value.length):1,P=E?E.pfValue[0]:void 0,$=M.value[0],K=d;p.edgeType=K?"multibezier":"bezier",p.ctrlpts=[];for(var J=0;J<R;J++){var re,ne=(.5-o.eles.length/2+l)*w*(f?-1:1),ue=li(ne);K&&(P=E?E.pfValue[J]:w,$=M.value[J]);var Ce=void 0!==(re=d?P:void 0!==P?ue*P:void 0)?re:ne,Se=1-$,Ee="node-position"===b?y:_,he={x:Ee.x1*Se+Ee.x2*$,y:Ee.y1*Se+Ee.y2*$};p.ctrlpts.push(he.x+g.x*Ce,he.y+g.y*Ce)}},ps.findTaxiPoints=function(c,o){var l=c._private.rscratch;l.edgeType="segments";var d="vertical",f="horizontal",p="leftward",g="rightward",y="downward",_="upward",w=o.posPts,E=o.srcW,M=o.srcH,R=o.tgtW,P=o.tgtH,K="node-position"!==c.pstyle("edge-distances").value,J=c.pstyle("taxi-direction").value,ne=J,re=c.pstyle("taxi-turn"),ue="%"===re.units,Ce=re.pfValue,Se=Ce<0,de=c.pstyle("taxi-turn-min-distance").pfValue,he=K?(M+P)/2:0,ke=w.x2-w.x1,Te=w.y2-w.y1,ge=function(rn,Gn){return rn>0?Math.max(rn-Gn,0):Math.min(rn+Gn,0)},Fe=ge(ke,K?(E+R)/2:0),Me=ge(Te,he),Xe=!1;"auto"===ne?J=Math.abs(Fe)>Math.abs(Me)?f:d:ne===_||ne===y?(J=d,Xe=!0):(ne===p||ne===g)&&(J=f,Xe=!0);var rt,Ve=J===d,je=Ve?Me:Fe,Qe=Ve?Te:ke,it=li(Qe),ct=!1;(!Xe||!ue&&!Se)&&(ne===y&&Qe<0||ne===_&&Qe>0||ne===p&&Qe>0||ne===g&&Qe<0)&&(je=(it*=-1)*Math.abs(je),ct=!0);var Dt=function(rn){return Math.abs(rn)<de||Math.abs(rn)>=Math.abs(je)},yt=Dt(rt=ue?(Ce<0?1+Ce:Ce)*je:(Ce<0?je:0)+Ce*it),mt=Dt(Math.abs(je)-Math.abs(rt));if(!yt&&!mt||ct)if(Ve){var fe=w.y1+rt+(K?M/2*it:0);l.segpts=[w.x1,fe,w.x2,fe]}else{var gt=w.x1+rt+(K?E/2*it:0);l.segpts=[gt,w.y1,gt,w.y2]}else if(Ve){var xt=Math.abs(Qe)<=M/2,Mt=Math.abs(ke)<=R/2;if(xt){var Lt=(w.x1+w.x2)/2;l.segpts=[Lt,w.y1,Lt,w.y2]}else if(Mt){var kn=(w.y1+w.y2)/2;l.segpts=[w.x1,kn,w.x2,kn]}else l.segpts=[w.x1,w.y2]}else{var pn=Math.abs(Qe)<=E/2,en=Math.abs(Te)<=P/2;if(pn){var jt=(w.y1+w.y2)/2;l.segpts=[w.x1,jt,w.x2,jt]}else if(en){var An=(w.x1+w.x2)/2;l.segpts=[An,w.y1,An,w.y2]}else l.segpts=[w.x2,w.y1]}},ps.tryToCorrectInvalidPoints=function(c,o){var l=c._private.rscratch;if("bezier"===l.edgeType){var d=o.srcPos,f=o.tgtPos,p=o.srcW,g=o.srcH,y=o.tgtW,_=o.tgtH,b=o.srcShape,w=o.tgtShape,E=!pe(l.startX)||!pe(l.startY),M=!pe(l.arrowStartX)||!pe(l.arrowStartY),R=!pe(l.endX)||!pe(l.endY),P=!pe(l.arrowEndX)||!pe(l.arrowEndY),J=this.getArrowWidth(c.pstyle("width").pfValue,c.pstyle("arrow-scale").value)*this.arrowShapeWidth*3,ne=Or({x:l.ctrlpts[0],y:l.ctrlpts[1]},{x:l.startX,y:l.startY}),re=ne<J,ue=Or({x:l.ctrlpts[0],y:l.ctrlpts[1]},{x:l.endX,y:l.endY}),Ce=ue<J,Se=!1;if(E||M||re){Se=!0;var de={x:l.ctrlpts[0]-d.x,y:l.ctrlpts[1]-d.y},Ee=Math.sqrt(de.x*de.x+de.y*de.y),he={x:de.x/Ee,y:de.y/Ee},ke=Math.max(p,g),Te={x:l.ctrlpts[0]+2*he.x*ke,y:l.ctrlpts[1]+2*he.y*ke},ge=b.intersectLine(d.x,d.y,p,g,Te.x,Te.y,0);re?(l.ctrlpts[0]=l.ctrlpts[0]+he.x*(J-ne),l.ctrlpts[1]=l.ctrlpts[1]+he.y*(J-ne)):(l.ctrlpts[0]=ge[0]+he.x*J,l.ctrlpts[1]=ge[1]+he.y*J)}if(R||P||Ce){Se=!0;var Fe={x:l.ctrlpts[0]-f.x,y:l.ctrlpts[1]-f.y},Me=Math.sqrt(Fe.x*Fe.x+Fe.y*Fe.y),Xe={x:Fe.x/Me,y:Fe.y/Me},Ve=Math.max(p,g),je={x:l.ctrlpts[0]+2*Xe.x*Ve,y:l.ctrlpts[1]+2*Xe.y*Ve},Qe=w.intersectLine(f.x,f.y,y,_,je.x,je.y,0);Ce?(l.ctrlpts[0]=l.ctrlpts[0]+Xe.x*(J-ue),l.ctrlpts[1]=l.ctrlpts[1]+Xe.y*(J-ue)):(l.ctrlpts[0]=Qe[0]+Xe.x*J,l.ctrlpts[1]=Qe[1]+Xe.y*J)}Se&&this.findEndpoints(c)}},ps.storeAllpts=function(c){var o=c._private.rscratch;if("multibezier"===o.edgeType||"bezier"===o.edgeType||"self"===o.edgeType||"compound"===o.edgeType){o.allpts=[],o.allpts.push(o.startX,o.startY);for(var l=0;l+1<o.ctrlpts.length;l+=2)o.allpts.push(o.ctrlpts[l],o.ctrlpts[l+1]),l+3<o.ctrlpts.length&&o.allpts.push((o.ctrlpts[l]+o.ctrlpts[l+2])/2,(o.ctrlpts[l+1]+o.ctrlpts[l+3])/2);var d;o.allpts.push(o.endX,o.endY),o.ctrlpts.length/2%2==0?(o.midX=o.allpts[d=o.allpts.length/2-1],o.midY=o.allpts[d+1]):(o.midX=tr(o.allpts[d=o.allpts.length/2-3],o.allpts[d+2],o.allpts[d+4],.5),o.midY=tr(o.allpts[d+1],o.allpts[d+3],o.allpts[d+5],.5))}else if("straight"===o.edgeType)o.allpts=[o.startX,o.startY,o.endX,o.endY],o.midX=(o.startX+o.endX+o.arrowStartX+o.arrowEndX)/4,o.midY=(o.startY+o.endY+o.arrowStartY+o.arrowEndY)/4;else if("segments"===o.edgeType)if(o.allpts=[],o.allpts.push(o.startX,o.startY),o.allpts.push.apply(o.allpts,o.segpts),o.allpts.push(o.endX,o.endY),o.segpts.length%4==0){var p=o.segpts.length/2,g=p-2;o.midX=(o.segpts[g]+o.segpts[p])/2,o.midY=(o.segpts[g+1]+o.segpts[p+1])/2}else{var y=o.segpts.length/2-1;o.midX=o.segpts[y],o.midY=o.segpts[y+1]}},ps.checkForInvalidEdgeWarning=function(c){var o=c[0]._private.rscratch;o.nodesOverlap||pe(o.startX)&&pe(o.startY)&&pe(o.endX)&&pe(o.endY)?o.loggedErr=!1:o.loggedErr||(o.loggedErr=!0,ur("Edge `"+c.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},ps.findEdgeControlPoints=function(c){var o=this;if(c&&0!==c.length){for(var l=this,f=l.cy.hasCompoundNodes(),p={map:new cs,get:function(de){var Ee=this.map.get(de[0]);return null!=Ee?Ee.get(de[1]):null},set:function(de,Ee){var he=this.map.get(de[0]);null==he&&(he=new cs,this.map.set(de[0],he)),he.set(de[1],Ee)}},g=[],y=[],_=0;_<c.length;_++){var b=c[_],w=b._private,E=b.pstyle("curve-style").value;if(!b.removed()&&b.takesUpSpace()){if("haystack"===E){y.push(b);continue}var M="unbundled-bezier"===E||"segments"===E||"straight"===E||"straight-triangle"===E||"taxi"===E,R="unbundled-bezier"===E||"bezier"===E,$=w.target,ne=[w.source.poolIndex(),$.poolIndex()].sort(),re=p.get(ne);null==re&&(p.set(ne,re={eles:[]}),g.push(ne)),re.eles.push(b),M&&(re.hasUnbundled=!0),R&&(re.hasBezier=!0)}}for(var ue=function(de){var he=p.get(g[de]),ke=void 0;if(!he.hasUnbundled){var Te=he.eles[0].parallelEdges().filter(function(Rt){return Rt.isBundledBezier()});od(he.eles),Te.forEach(function(Rt){return he.eles.push(Rt)}),he.eles.sort(function(Rt,fe){return Rt.poolIndex()-fe.poolIndex()})}var ge=he.eles[0],Fe=ge.source(),Me=ge.target();if(Fe.poolIndex()>Me.poolIndex()){var Xe=Fe;Fe=Me,Me=Xe}var Ve=he.srcPos=Fe.position(),je=he.tgtPos=Me.position(),Qe=he.srcW=Fe.outerWidth(),it=he.srcH=Fe.outerHeight(),ct=he.tgtW=Me.outerWidth(),rt=he.tgtH=Me.outerHeight(),tt=he.srcShape=l.nodeShapes[o.getNodeShape(Fe)],wt=he.tgtShape=l.nodeShapes[o.getNodeShape(Me)];he.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var Dt=0;Dt<he.eles.length;Dt++){var yt=he.eles[Dt],mt=yt[0]._private.rscratch,Ze=yt.pstyle("curve-style").value,xt="unbundled-bezier"===Ze||"segments"===Ze||"taxi"===Ze,Mt=!Fe.same(yt.source());if(!he.calculatedIntersection&&Fe!==Me&&(he.hasBezier||he.hasUnbundled)){he.calculatedIntersection=!0;var Lt=tt.intersectLine(Ve.x,Ve.y,Qe,it,je.x,je.y,0),Vt=he.srcIntn=Lt,xn=wt.intersectLine(je.x,je.y,ct,rt,Ve.x,Ve.y,0),kn=he.tgtIntn=xn,Ht=he.intersectionPts={x1:Lt[0],x2:xn[0],y1:Lt[1],y2:xn[1]},Ft=he.posPts={x1:Ve.x,x2:je.x,y1:Ve.y,y2:je.y},pn=xn[1]-Lt[1],en=xn[0]-Lt[0],jt=Math.sqrt(en*en+pn*pn),cn=he.vector={x:en,y:pn},Hn=he.vectorNorm={x:cn.x/jt,y:cn.y/jt},An={x:-Hn.y,y:Hn.x};he.nodesOverlap=!pe(jt)||wt.checkPoint(Lt[0],Lt[1],0,ct,rt,je.x,je.y)||tt.checkPoint(xn[0],xn[1],0,Qe,it,Ve.x,Ve.y),he.vectorNormInverse=An,ke={nodesOverlap:he.nodesOverlap,dirCounts:he.dirCounts,calculatedIntersection:!0,hasBezier:he.hasBezier,hasUnbundled:he.hasUnbundled,eles:he.eles,srcPos:je,tgtPos:Ve,srcW:ct,srcH:rt,tgtW:Qe,tgtH:it,srcIntn:kn,tgtIntn:Vt,srcShape:wt,tgtShape:tt,posPts:{x1:Ft.x2,y1:Ft.y2,x2:Ft.x1,y2:Ft.y1},intersectionPts:{x1:Ht.x2,y1:Ht.y2,x2:Ht.x1,y2:Ht.y1},vector:{x:-cn.x,y:-cn.y},vectorNorm:{x:-Hn.x,y:-Hn.y},vectorNormInverse:{x:-An.x,y:-An.y}}}var mn=Mt?ke:he;mt.nodesOverlap=mn.nodesOverlap,mt.srcIntn=mn.srcIntn,mt.tgtIntn=mn.tgtIntn,f&&(Fe.isParent()||Fe.isChild()||Me.isParent()||Me.isChild())&&(Fe.parents().anySame(Me)||Me.parents().anySame(Fe)||Fe.same(Me)&&Fe.isParent())?o.findCompoundLoopPoints(yt,mn,Dt,xt):Fe===Me?o.findLoopPoints(yt,mn,Dt,xt):"segments"===Ze?o.findSegmentsPoints(yt,mn):"taxi"===Ze?o.findTaxiPoints(yt,mn):"straight"===Ze||!xt&&he.eles.length%2==1&&Dt===Math.floor(he.eles.length/2)?o.findStraightEdgePoints(yt):o.findBezierPoints(yt,mn,Dt,xt,Mt),o.findEndpoints(yt),o.tryToCorrectInvalidPoints(yt,mn),o.checkForInvalidEdgeWarning(yt),o.storeAllpts(yt),o.storeEdgeProjections(yt),o.calculateArrowAngles(yt),o.recalculateEdgeLabelProjections(yt),o.calculateLabelAngles(yt)}},Ce=0;Ce<g.length;Ce++)ue(Ce);this.findHaystackPoints(y)}},ps.getSegmentPoints=function(c){var o=c[0]._private.rscratch;if("segments"===o.edgeType)return this.recalculateRenderedStyle(c),xy(o.segpts)},ps.getControlPoints=function(c){var o=c[0]._private.rscratch,l=o.edgeType;if("bezier"===l||"multibezier"===l||"self"===l||"compound"===l)return this.recalculateRenderedStyle(c),xy(o.ctrlpts)},ps.getEdgeMidpoint=function(c){var o=c[0]._private.rscratch;return this.recalculateRenderedStyle(c),{x:o.midX,y:o.midY}};var vc={manualEndptToPx:function(c,o){var d=c.position(),f=c.outerWidth(),p=c.outerHeight();if(2===o.value.length){var g=[o.pfValue[0],o.pfValue[1]];return"%"===o.units[0]&&(g[0]=g[0]*f),"%"===o.units[1]&&(g[1]=g[1]*p),g[0]+=d.x,g[1]+=d.y,g}var y=o.pfValue[0];y=-Math.PI/2+y;var _=2*Math.max(f,p),b=[d.x+Math.cos(y)*_,d.y+Math.sin(y)*_];return this.nodeShapes[this.getNodeShape(c)].intersectLine(d.x,d.y,f,p,b[0],b[1],0)},findEndpoints:function(c){var l,ke,Te,ge,Fe,o=this,d=c.source()[0],f=c.target()[0],p=d.position(),g=f.position(),y=c.pstyle("target-arrow-shape").value,_=c.pstyle("source-arrow-shape").value,b=c.pstyle("target-distance-from-node").pfValue,w=c.pstyle("source-distance-from-node").pfValue,E=c.pstyle("curve-style").value,M=c._private.rscratch,R=M.edgeType,$="self"===R||"compound"===R,K="bezier"===R||"multibezier"===R||$,J="bezier"!==R,ne="straight"===R||"segments"===R,re="segments"===R,ue=K||J||ne,Ce=$||"taxi"===E,Se=c.pstyle("source-endpoint"),de=Ce?"outside-to-node":Se.value,Ee=c.pstyle("target-endpoint"),he=Ce?"outside-to-node":Ee.value;if(M.srcManEndpt=Se,M.tgtManEndpt=Ee,K){var Me=[M.ctrlpts[0],M.ctrlpts[1]];ke=J?[M.ctrlpts[M.ctrlpts.length-2],M.ctrlpts[M.ctrlpts.length-1]]:Me,Te=Me}else if(ne){var Ve=re?M.segpts.slice(0,2):[g.x,g.y];ke=re?M.segpts.slice(M.segpts.length-2):[p.x,p.y],Te=Ve}if("inside-to-node"===he)l=[g.x,g.y];else if(Ee.units)l=this.manualEndptToPx(f,Ee);else if("outside-to-line"===he)l=M.tgtIntn;else if("outside-to-node"===he||"outside-to-node-or-label"===he?ge=ke:("outside-to-line"===he||"outside-to-line-or-label"===he)&&(ge=[p.x,p.y]),l=o.nodeShapes[this.getNodeShape(f)].intersectLine(g.x,g.y,f.outerWidth(),f.outerHeight(),ge[0],ge[1],0),"outside-to-node-or-label"===he||"outside-to-line-or-label"===he){var Qe=f._private.rscratch,rt=Qe.labelX,tt=Qe.labelY,wt=Qe.labelWidth/2,Dt=Qe.labelHeight/2,yt=f.pstyle("text-valign").value;"top"===yt?tt-=Dt:"bottom"===yt&&(tt+=Dt);var mt=f.pstyle("text-halign").value;"left"===mt?rt-=wt:"right"===mt&&(rt+=wt);var Ze=ml(ge[0],ge[1],[rt-wt,tt-Dt,rt+wt,tt-Dt,rt+wt,tt+Dt,rt-wt,tt+Dt],g.x,g.y);if(Ze.length>0){var xt=p,Mt=xr(xt,Yn(l)),Lt=xr(xt,Yn(Ze)),Vt=Mt;Lt<Mt&&(l=Ze,Vt=Lt),Ze.length>2&&xr(xt,{x:Ze[2],y:Ze[3]})<Vt&&(l=[Ze[2],Ze[3]])}}var kn=ic(l,ke,o.arrowShapes[y].spacing(c)+b),Ht=ic(l,ke,o.arrowShapes[y].gap(c)+b);if(M.endX=Ht[0],M.endY=Ht[1],M.arrowEndX=kn[0],M.arrowEndY=kn[1],"inside-to-node"===de)l=[p.x,p.y];else if(Se.units)l=this.manualEndptToPx(d,Se);else if("outside-to-line"===de)l=M.srcIntn;else if("outside-to-node"===de||"outside-to-node-or-label"===de?Fe=Te:("outside-to-line"===de||"outside-to-line-or-label"===de)&&(Fe=[g.x,g.y]),l=o.nodeShapes[this.getNodeShape(d)].intersectLine(p.x,p.y,d.outerWidth(),d.outerHeight(),Fe[0],Fe[1],0),"outside-to-node-or-label"===de||"outside-to-line-or-label"===de){var Ft=d._private.rscratch,jt=Ft.labelX,cn=Ft.labelY,Hn=Ft.labelWidth/2,An=Ft.labelHeight/2,mn=d.pstyle("text-valign").value;"top"===mn?cn-=An:"bottom"===mn&&(cn+=An);var Rt=d.pstyle("text-halign").value;"left"===Rt?jt-=Hn:"right"===Rt&&(jt+=Hn);var fe=ml(Fe[0],Fe[1],[jt-Hn,cn-An,jt+Hn,cn-An,jt+Hn,cn+An,jt-Hn,cn+An],p.x,p.y);if(fe.length>0){var ot=g,It=xr(ot,Yn(l)),gt=xr(ot,Yn(fe)),vt=It;gt<It&&(l=[fe[0],fe[1]],vt=gt),fe.length>2&&xr(ot,{x:fe[2],y:fe[3]})<vt&&(l=[fe[2],fe[3]])}}var Tt=ic(l,Te,o.arrowShapes[_].spacing(c)+w),rn=ic(l,Te,o.arrowShapes[_].gap(c)+w);M.startX=rn[0],M.startY=rn[1],M.arrowStartX=Tt[0],M.arrowStartY=Tt[1],ue&&(M.badLine=!(pe(M.startX)&&pe(M.startY)&&pe(M.endX)&&pe(M.endY)))},getSourceEndpoint:function(c){var o=c[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(c),o.edgeType)?{x:o.haystackPts[0],y:o.haystackPts[1]}:{x:o.arrowStartX,y:o.arrowStartY}},getTargetEndpoint:function(c){var o=c[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(c),o.edgeType)?{x:o.haystackPts[2],y:o.haystackPts[3]}:{x:o.arrowEndX,y:o.arrowEndY}}},Ey={};function iM(c,o,l){for(var d=function(b,w,E,M){return tr(b,w,E,M)},p=o._private.rstyle.bezierPts,g=0;g<c.bezierProjPcts.length;g++){var y=c.bezierProjPcts[g];p.push({x:d(l[0],l[2],l[4],y),y:d(l[1],l[3],l[5],y)})}}Ey.storeEdgeProjections=function(c){var o=c._private,l=o.rscratch,d=l.edgeType;if(o.rstyle.bezierPts=null,o.rstyle.linePts=null,o.rstyle.haystackPts=null,"multibezier"===d||"bezier"===d||"self"===d||"compound"===d){o.rstyle.bezierPts=[];for(var f=0;f+5<l.allpts.length;f+=4)iM(this,c,l.allpts.slice(f,f+6))}else if("segments"===d){var p=o.rstyle.linePts=[];for(f=0;f+1<l.allpts.length;f+=2)p.push({x:l.allpts[f],y:l.allpts[f+1]})}else if("haystack"===d){var g=l.haystackPts;o.rstyle.haystackPts=[{x:g[0],y:g[1]},{x:g[2],y:g[3]}]}o.rstyle.arrowWidth=this.getArrowWidth(c.pstyle("width").pfValue,c.pstyle("arrow-scale").value)*this.arrowShapeWidth},Ey.recalculateEdgeProjections=function(c){this.findEdgeControlPoints(c)};var So={recalculateNodeLabelProjection:function(c){var o=c.pstyle("label").strValue;if(!We(o)){var l,d,f=c._private,p=c.width(),g=c.height(),y=c.padding(),_=c.position(),b=c.pstyle("text-halign").strValue,w=c.pstyle("text-valign").strValue,E=f.rscratch,M=f.rstyle;switch(b){case"left":l=_.x-p/2-y;break;case"right":l=_.x+p/2+y;break;default:l=_.x}switch(w){case"top":d=_.y-g/2-y;break;case"bottom":d=_.y+g/2+y;break;default:d=_.y}E.labelX=l,E.labelY=d,M.labelX=l,M.labelY=d,this.calculateLabelAngles(c),this.applyLabelDimensions(c)}}},Zw=function(o,l){var d=Math.atan(l/o);return 0===o&&d<0&&(d*=-1),d},Qw=function(o,l){return Zw(l.x-o.x,l.y-o.y)};So.recalculateEdgeLabelProjections=function(c){var o,l=c._private,d=l.rscratch,f=this,p={mid:c.pstyle("label").strValue,source:c.pstyle("source-label").strValue,target:c.pstyle("target-label").strValue};if(p.mid||p.source||p.target){var g=function(E,M,R){yo(l.rscratch,E,M,R),yo(l.rstyle,E,M,R)};g("labelX",null,(o={x:d.midX,y:d.midY}).x),g("labelY",null,o.y);var y=Zw(d.midDispX,d.midDispY);g("labelAutoAngle",null,y);var _=function w(){if(w.cache)return w.cache;for(var E=[],M=0;M+5<d.allpts.length;M+=4)E.push({p0:{x:d.allpts[M],y:d.allpts[M+1]},p1:{x:d.allpts[M+2],y:d.allpts[M+3]},p2:{x:d.allpts[M+4],y:d.allpts[M+5]},startDist:0,length:0,segments:[]});var K=l.rstyle.bezierPts,J=f.bezierProjPcts.length;function ne(de,Ee,he,ke,Te){var ge=Or(Ee,he),Fe=de.segments[de.segments.length-1];de.segments.push({p0:Ee,p1:he,t0:ke,t1:Te,startDist:Fe?Fe.startDist+Fe.length:0,length:ge}),de.length+=ge}for(var re=0;re<E.length;re++){var ue=E[re],Ce=E[re-1];Ce&&(ue.startDist=Ce.startDist+Ce.length),ne(ue,ue.p0,K[re*J],0,f.bezierProjPcts[0]);for(var Se=0;Se<J-1;Se++)ne(ue,K[re*J+Se],K[re*J+Se+1],f.bezierProjPcts[Se],f.bezierProjPcts[Se+1]);ne(ue,K[re*J+J-1],ue.p2,f.bezierProjPcts[J-1],1)}return w.cache=E},b=function(E){var M,R="source"===E;if(p[E]){var P=c.pstyle(E+"-text-offset").pfValue;switch(d.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var K,$=_(),J=0,ne=0,re=0;re<$.length;re++){for(var ue=$[R?re:$.length-1-re],Ce=0;Ce<ue.segments.length;Ce++){var Se=ue.segments[R?Ce:ue.segments.length-1-Ce];if(J=ne,(ne+=Se.length)>=P||re===$.length-1&&Ce===ue.segments.length-1){K={cp:ue,segment:Se};break}}if(K)break}var Ee=K.cp,he=K.segment,ke=(P-J)/he.length,Te=he.t1-he.t0,ge=R?he.t0+Te*ke:he.t1-Te*ke;ge=wn(0,ge,1),o=qs(Ee.p0,Ee.p1,Ee.p2,ge),M=function(o,l,d,f){var p=wn(0,f-.001,1),g=wn(0,f+.001,1),y=qs(o,l,d,p),_=qs(o,l,d,g);return Qw(y,_)}(Ee.p0,Ee.p1,Ee.p2,ge);break;case"straight":case"segments":case"haystack":for(var Me,Xe,Ve,je,Fe=0,Qe=d.allpts.length,it=0;it+3<Qe&&(R?(Ve={x:d.allpts[it],y:d.allpts[it+1]},je={x:d.allpts[it+2],y:d.allpts[it+3]}):(Ve={x:d.allpts[Qe-2-it],y:d.allpts[Qe-1-it]},je={x:d.allpts[Qe-4-it],y:d.allpts[Qe-3-it]}),Xe=Fe,!((Fe+=Me=Or(Ve,je))>=P));it+=2);var rt=(P-Xe)/Me;rt=wn(0,rt,1),o=function(o,l,d,f){var p_x=l.x-o.x,p_y=l.y-o.y,g=Or(o,l);return d=d??0,{x:o.x+p_x/g*(f=f??d*g),y:o.y+p_y/g*f}}(Ve,je,rt),M=Qw(Ve,je)}g("labelX",E,o.x),g("labelY",E,o.y),g("labelAutoAngle",E,M)}};b("source"),b("target"),this.applyLabelDimensions(c)}},So.applyLabelDimensions=function(c){this.applyPrefixedLabelDimensions(c),c.isEdge()&&(this.applyPrefixedLabelDimensions(c,"source"),this.applyPrefixedLabelDimensions(c,"target"))},So.applyPrefixedLabelDimensions=function(c,o){var l=c._private,d=this.getLabelText(c,o),f=this.calculateLabelDimensions(c,d),p=c.pstyle("line-height").pfValue,g=c.pstyle("text-wrap").strValue,y=vo(l.rscratch,"labelWrapCachedLines",o)||[],_="wrap"!==g?1:Math.max(y.length,1),b=f.height/_,w=b*p,E=f.width,M=f.height+(_-1)*(p-1)*b;yo(l.rstyle,"labelWidth",o,E),yo(l.rscratch,"labelWidth",o,E),yo(l.rstyle,"labelHeight",o,M),yo(l.rscratch,"labelHeight",o,M),yo(l.rscratch,"labelLineHeight",o,w)},So.getLabelText=function(c,o){var l=c._private,f=c.pstyle((o?o+"-":"")+"label").strValue,p=c.pstyle("text-transform").value,g=function(ct,rt){return rt?(yo(l.rscratch,ct,o,rt),rt):vo(l.rscratch,ct,o)};if(!f)return"";"none"==p||("uppercase"==p?f=f.toUpperCase():"lowercase"==p&&(f=f.toLowerCase()));var y=c.pstyle("text-wrap").value;if("wrap"===y){var _=g("labelKey");if(null!=_&&g("labelWrapKey")===_)return g("labelWrapCachedText");for(var w=f.split("\n"),E=c.pstyle("text-max-width").pfValue,R="anywhere"===c.pstyle("text-overflow-wrap").value,P=[],$=/[\s\u200b]+/,K=R?"":" ",J=0;J<w.length;J++){var ne=w[J],ue=this.calculateLabelDimensions(c,ne).width;if(R){var Ce=ne.split("").join("\u200b");ne=Ce}if(ue>E){for(var Se=ne.split($),de="",Ee=0;Ee<Se.length;Ee++){var he=Se[Ee];this.calculateLabelDimensions(c,0===de.length?he:de+K+he).width<=E?de+=he+K:(de&&P.push(de),de=he+K)}de.match(/^[\s\u200b]+$/)||P.push(de)}else P.push(ne)}g("labelWrapCachedLines",P),f=g("labelWrapCachedText",P.join("\n")),g("labelWrapKey",_)}else if("ellipsis"===y){var Fe=c.pstyle("text-max-width").pfValue,Me="",Ve=!1;if(this.calculateLabelDimensions(c,f).width<Fe)return f;for(var je=0;je<f.length&&!(this.calculateLabelDimensions(c,Me+f[je]+"\u2026").width>Fe);je++)Me+=f[je],je===f.length-1&&(Ve=!0);return Ve||(Me+="\u2026"),Me}return f},So.getLabelJustification=function(c){var o=c.pstyle("text-justification").strValue,l=c.pstyle("text-halign").strValue;if("auto"!==o)return o;if(!c.isNode())return"center";switch(l){case"left":return"right";case"right":return"left";default:return"center"}},So.calculateLabelDimensions=function(c,o){var d=Aa(o,c._private.labelDimsKey),f=this.labelDimCache||(this.labelDimCache=[]),p=f[d];if(null!=p)return p;var y=c.pstyle("font-style").strValue,_=c.pstyle("font-size").pfValue,b=c.pstyle("font-family").strValue,w=c.pstyle("font-weight").strValue,E=this.labelCalcCanvas,M=this.labelCalcCanvasContext;if(!E){E=this.labelCalcCanvas=document.createElement("canvas"),M=this.labelCalcCanvasContext=E.getContext("2d");var R=E.style;R.position="absolute",R.left="-9999px",R.top="-9999px",R.zIndex="-1",R.visibility="hidden",R.pointerEvents="none"}M.font="".concat(y," ").concat(w," ").concat(_,"px ").concat(b);for(var P=0,$=0,K=o.split("\n"),J=0;J<K.length;J++){var re=M.measureText(K[J]),ue=Math.ceil(re.width),Ce=_;P=Math.max(ue,P),$+=Ce}return f[d]={width:P+=0,height:$+=0}},So.calculateLabelAngle=function(c,o){var d=c._private.rscratch,f=c.isEdge(),g=c.pstyle((o?o+"-":"")+"text-rotation"),y=g.strValue;return"none"===y?0:f&&"autorotate"===y?d.labelAutoAngle:"autorotate"===y?0:g.pfValue},So.calculateLabelAngles=function(c){var o=this,l=c.isEdge(),f=c._private.rscratch;f.labelAngle=o.calculateLabelAngle(c),l&&(f.sourceLabelAngle=o.calculateLabelAngle(c,"source"),f.targetLabelAngle=o.calculateLabelAngle(c,"target"))};var Jw={},Dy=!1;Jw.getNodeShape=function(c){var l=c.pstyle("shape").value;if("cutrectangle"===l&&(c.width()<28||c.height()<28))return Dy||(ur("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),Dy=!0),"rectangle";if(c.isParent())return"rectangle"===l||"roundrectangle"===l||"round-rectangle"===l||"cutrectangle"===l||"cut-rectangle"===l||"barrel"===l?l:"rectangle";if("polygon"===l){var d=c.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(d).name}return l};var mu={updateCachedGrabbedEles:function(){var c=this.cachedZSortedEles;if(c){c.drag=[],c.nondrag=[];for(var o=[],l=0;l<c.length;l++){var f=(d=c[l])._private.rscratch;d.grabbed()&&!d.isParent()?o.push(d):f.inDragLayer?c.drag.push(d):c.nondrag.push(d)}for(l=0;l<o.length;l++){var d;c.drag.push(d=o[l])}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(c){if(c||!this.cachedZSortedEles){var o=this.cy.mutableElements().toArray();o.sort(Pw),o.interactive=o.filter(function(l){return l.interactive()}),this.cachedZSortedEles=o,this.updateCachedGrabbedEles()}else o=this.cachedZSortedEles;return o}},mg={};[Al,gg,ps,vc,Ey,So,Jw,{registerCalculationListeners:function(){var c=this.cy,o=c.collection(),l=this,d=function(g){var y=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(o.merge(g),y)for(var _=0;_<g.length;_++){var b=g[_],w=b._private,E=w.rstyle;E.clean=!1,E.cleanConnected=!1}};l.binder(c).on("bounds.* dirty.*",function(g){d(g.target)}).on("style.* background.*",function(g){d(g.target,!1)});var f=function(g){if(g){var y=l.onUpdateEleCalcsFns;o.cleanStyle();for(var _=0;_<o.length;_++){var b=o[_],w=b._private.rstyle;b.isNode()&&!w.cleanConnected&&(d(b.connectedEdges()),w.cleanConnected=!0)}if(y)for(var E=0;E<y.length;E++)(0,y[E])(g,o);l.recalculateRenderedStyle(o),o=c.collection()}};l.flushRenderedStyleQueue=function(){f(!0)},l.beforeRender(f,l.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(c){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(c)},recalculateRenderedStyle:function(c,o){var l=function(ue){return ue._private.rstyle.cleanConnected},d=[],f=[];if(!this.destroyed){void 0===o&&(o=!0);for(var p=0;p<c.length;p++){var g=c[p],y=g._private,_=y.rstyle;g.isEdge()&&(!l(g.source())||!l(g.target()))&&(_.clean=!1),!(o&&_.clean||g.removed())&&"none"!==g.pstyle("display").value&&("nodes"===y.group?f.push(g):d.push(g),_.clean=!0)}for(var b=0;b<f.length;b++){var w=f[b],M=w._private.rstyle,R=w.position();this.recalculateNodeLabelProjection(w),M.nodeX=R.x,M.nodeY=R.y,M.nodeW=w.pstyle("width").pfValue,M.nodeH=w.pstyle("height").pfValue}this.recalculateEdgeProjections(d);for(var P=0;P<d.length;P++){var K=d[P]._private,J=K.rstyle,ne=K.rscratch;J.srcX=ne.arrowStartX,J.srcY=ne.arrowStartY,J.tgtX=ne.arrowEndX,J.tgtY=ne.arrowEndY,J.midX=ne.midX,J.midY=ne.midY,J.labelAngle=ne.labelAngle,J.sourceLabelAngle=ne.sourceLabelAngle,J.targetLabelAngle=ne.targetLabelAngle}}}},mu].forEach(function(c){Zt(mg,c)});var vg={getCachedImage:function(c,o,l){var f=this.imageCache=this.imageCache||{},p=f[c];if(p)return p.image.complete||p.image.addEventListener("load",l),p.image;var g=(p=f[c]=f[c]||{}).image=new Image;g.addEventListener("load",l),g.addEventListener("error",function(){g.error=!0});var y="data:";return c.substring(0,y.length).toLowerCase()===y||(g.crossOrigin=o),g.src=c,g}},yc={registerBinding:function(c,o,l,d){var f=Array.prototype.slice.apply(arguments,[1]),p=this.binder(c);return p.on.apply(p,f)},binder:function(c){var o=this,l=c===window||c===document||c===document.body||function(o){return!(typeof HTMLElement>"u")&&o instanceof HTMLElement}(c);if(null==o.supportsPassiveEvents){var d=!1;try{var f=Object.defineProperty({},"passive",{get:function(){return d=!0,!0}});window.addEventListener("test",null,f)}catch{}o.supportsPassiveEvents=d}var p=function(y,_,b){var w=Array.prototype.slice.call(arguments);return l&&o.supportsPassiveEvents&&(w[2]={capture:b??!1,passive:!1,once:!1}),o.bindings.push({target:c,args:w}),(c.addEventListener||c.on).apply(c,w),this};return{on:p,addEventListener:p,addListener:p,bind:p}},nodeIsDraggable:function(c){return c&&c.isNode()&&!c.locked()&&c.grabbable()},nodeIsGrabbable:function(c){return this.nodeIsDraggable(c)&&c.interactive()}};yc.load=function(){var c=this,o=function(fe){return fe.selected()},l=function(fe,ot,It,gt){null==fe&&(fe=c.cy);for(var vt=0;vt<ot.length;vt++)fe.emit({originalEvent:It,type:ot[vt],position:gt})},d=function(fe){return fe.shiftKey||fe.metaKey||fe.ctrlKey},f=function(fe,ot){var It=!0;if(c.cy.hasCompoundNodes()&&fe&&fe.pannable()){for(var gt=0;ot&&gt<ot.length;gt++)if((fe=ot[gt]).isNode()&&fe.isParent()&&!fe.pannable()){It=!1;break}}else It=!0;return It},y=function(fe){fe[0]._private.rscratch.inDragLayer=!0},b=function(fe){fe[0]._private.rscratch.isGrabTarget=!0},E=function(fe,ot){var It=ot.addToList;!It.has(fe)&&fe.grabbable()&&!fe.locked()&&(It.merge(fe),function(fe){fe[0]._private.grabbed=!0}(fe))},R=function(fe,ot){ot=ot||{};var It=fe.cy().hasCompoundNodes();ot.inDragLayer&&(fe.forEach(y),fe.neighborhood().stdFilter(function(gt){return!It||gt.isEdge()}).forEach(y)),ot.addToList&&fe.forEach(function(gt){E(gt,ot)}),function(fe,ot){if(fe.cy().hasCompoundNodes()&&(null!=ot.inDragLayer||null!=ot.addToList)){var It=fe.descendants();ot.inDragLayer&&(It.forEach(y),It.connectedEdges().forEach(y)),ot.addToList&&E(It,ot)}}(fe,ot),K(fe,{inDragLayer:ot.inDragLayer}),c.updateCachedGrabbedEles()},P=R,$=function(fe){fe&&(c.getCachedZSortedEles().forEach(function(ot){(function(fe){fe[0]._private.grabbed=!1})(ot),function(fe){fe[0]._private.rscratch.inDragLayer=!1}(ot),function(fe){fe[0]._private.rscratch.isGrabTarget=!1}(ot)}),c.updateCachedGrabbedEles())},K=function(fe,ot){if((null!=ot.inDragLayer||null!=ot.addToList)&&fe.cy().hasCompoundNodes()){var It=fe.ancestors().orphans();if(!It.same(fe)){var gt=It.descendants().spawnSelf().merge(It).unmerge(fe).unmerge(fe.descendants()),vt=gt.connectedEdges();ot.inDragLayer&&(vt.forEach(y),gt.forEach(y)),ot.addToList&&gt.forEach(function(Tn){E(Tn,ot)})}}},J=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},ne=typeof MutationObserver<"u",re=typeof ResizeObserver<"u";ne?(c.removeObserver=new MutationObserver(function(Rt){for(var fe=0;fe<Rt.length;fe++){var It=Rt[fe].removedNodes;if(It)for(var gt=0;gt<It.length;gt++)if(It[gt]===c.container){c.destroy();break}}}),c.container.parentNode&&c.removeObserver.observe(c.container.parentNode,{childList:!0})):c.registerBinding(c.container,"DOMNodeRemoved",function(Rt){c.destroy()});var ue=T.default(function(){c.cy.resize()},100);ne&&(c.styleObserver=new MutationObserver(ue),c.styleObserver.observe(c.container,{attributes:!0})),c.registerBinding(window,"resize",ue),re&&(c.resizeObserver=new ResizeObserver(ue),c.resizeObserver.observe(c.container));var Se=function(){c.invalidateContainerClientCoordsCache()};(function(fe,ot){for(;null!=fe;)c.registerBinding(Rt=fe,"transitionend",Se),c.registerBinding(Rt,"animationend",Se),c.registerBinding(Rt,"scroll",Se),fe=fe.parentNode;var Rt})(c.container),c.registerBinding(c.container,"contextmenu",function(Rt){Rt.preventDefault()});var he,ke,Te,Ee=function(fe){for(var ot=c.findContainerClientCoords(),It=ot[0],gt=ot[1],vt=ot[2],Tn=ot[3],Tt=fe.touches?fe.touches:[fe],rn=!1,Gn=0;Gn<Tt.length;Gn++){var fr=Tt[Gn];if(It<=fr.clientX&&fr.clientX<=It+vt&&gt<=fr.clientY&&fr.clientY<=gt+Tn){rn=!0;break}}if(!rn)return!1;for(var Nn=c.container,Dn=fe.target.parentNode,Sn=!1;Dn;){if(Dn===Nn){Sn=!0;break}Dn=Dn.parentNode}return!!Sn};c.registerBinding(c.container,"mousedown",function(fe){if(Ee(fe)){fe.preventDefault(),J(),c.hoverData.capture=!0,c.hoverData.which=fe.which;var ot=c.cy,It=[fe.clientX,fe.clientY],gt=c.projectIntoViewport(It[0],It[1]),vt=c.selection,Tn=c.findNearestElements(gt[0],gt[1],!0,!1),Tt=Tn[0],rn=c.dragData.possibleDragElements;if(c.hoverData.mdownPos=gt,c.hoverData.mdownGPos=It,3==fe.which){c.hoverData.cxtStarted=!0;var fr={originalEvent:fe,type:"cxttapstart",position:{x:gt[0],y:gt[1]}};Tt?(Tt.activate(),Tt.emit(fr),c.hoverData.down=Tt):ot.emit(fr),c.hoverData.downTime=(new Date).getTime(),c.hoverData.cxtDragged=!1}else if(1==fe.which){if(Tt&&Tt.activate(),null!=Tt&&c.nodeIsGrabbable(Tt)){var Nn=function(Xr){return{originalEvent:fe,type:Xr,position:{x:gt[0],y:gt[1]}}};if(b(Tt),Tt.selected()){rn=c.dragData.possibleDragElements=ot.collection();var Dn=ot.$(function(Sn){return Sn.isNode()&&Sn.selected()&&c.nodeIsGrabbable(Sn)});R(Dn,{addToList:rn}),Tt.emit(Nn("grabon")),Dn.forEach(function(Xr){Xr.emit(Nn("grab"))})}else rn=c.dragData.possibleDragElements=ot.collection(),P(Tt,{addToList:rn}),Tt.emit(Nn("grabon")).emit(Nn("grab"));c.redrawHint("eles",!0),c.redrawHint("drag",!0)}c.hoverData.down=Tt,c.hoverData.downs=Tn,c.hoverData.downTime=(new Date).getTime(),l(Tt,["mousedown","tapstart","vmousedown"],fe,{x:gt[0],y:gt[1]}),null==Tt?(vt[4]=1,c.data.bgActivePosistion={x:gt[0],y:gt[1]},c.redrawHint("select",!0),c.redraw()):Tt.pannable()&&(vt[4]=1),c.hoverData.tapholdCancelled=!1,clearTimeout(c.hoverData.tapholdTimeout),c.hoverData.tapholdTimeout=setTimeout(function(){if(!c.hoverData.tapholdCancelled){var Xr=c.hoverData.down;Xr?Xr.emit({originalEvent:fe,type:"taphold",position:{x:gt[0],y:gt[1]}}):ot.emit({originalEvent:fe,type:"taphold",position:{x:gt[0],y:gt[1]}})}},c.tapholdDuration)}vt[0]=vt[2]=gt[0],vt[1]=vt[3]=gt[1]}},!1),c.registerBinding(window,"mousemove",function(fe){var ms;if(c.hoverData.capture||Ee(fe)){var It=!1,gt=c.cy,vt=gt.zoom(),Tn=[fe.clientX,fe.clientY],Tt=c.projectIntoViewport(Tn[0],Tn[1]),rn=c.hoverData.mdownPos,Gn=c.hoverData.mdownGPos,fr=c.selection,Nn=null;!c.hoverData.draggingEles&&!c.hoverData.dragging&&!c.hoverData.selecting&&(Nn=c.findNearestElement(Tt[0],Tt[1],!0,!1));var Ei,cr=c.hoverData.last,Dn=c.hoverData.down,Sn=[Tt[0]-fr[2],Tt[1]-fr[3]],Xr=c.dragData.possibleDragElements;if(Gn){var jo=Tn[0]-Gn[0],Oi=Tn[1]-Gn[1];c.hoverData.isOverThresholdDrag=Ei=jo*jo+Oi*Oi>=c.desktopTapThreshold2}var $a=d(fe);Ei&&(c.hoverData.tapholdCancelled=!0),It=!0,l(Nn,["mousemove","vmousemove","tapdrag"],fe,{x:Tt[0],y:Tt[1]});var Ol=function(){c.data.bgActivePosistion=void 0,c.hoverData.selecting||gt.emit({originalEvent:fe,type:"boxstart",position:{x:Tt[0],y:Tt[1]}}),fr[4]=1,c.hoverData.selecting=!0,c.redrawHint("select",!0),c.redraw()};if(3===c.hoverData.which){if(Ei){var Ec={originalEvent:fe,type:"cxtdrag",position:{x:Tt[0],y:Tt[1]}};Dn?Dn.emit(Ec):gt.emit(Ec),c.hoverData.cxtDragged=!0,(!c.hoverData.cxtOver||Nn!==c.hoverData.cxtOver)&&(c.hoverData.cxtOver&&c.hoverData.cxtOver.emit({originalEvent:fe,type:"cxtdragout",position:{x:Tt[0],y:Tt[1]}}),c.hoverData.cxtOver=Nn,Nn&&Nn.emit({originalEvent:fe,type:"cxtdragover",position:{x:Tt[0],y:Tt[1]}}))}}else if(c.hoverData.dragging){if(It=!0,gt.panningEnabled()&&gt.userPanningEnabled()){var Dc;if(c.hoverData.justStartedPan){var Ef=c.hoverData.mdownPos;Dc={x:(Tt[0]-Ef[0])*vt,y:(Tt[1]-Ef[1])*vt},c.hoverData.justStartedPan=!1}else Dc={x:Sn[0]*vt,y:Sn[1]*vt};gt.panBy(Dc),gt.emit("dragpan"),c.hoverData.dragged=!0}Tt=c.projectIntoViewport(fe.clientX,fe.clientY)}else if(1!=fr[4]||null!=Dn&&!Dn.pannable()){if(Dn&&Dn.pannable()&&Dn.active()&&Dn.unactivate(),(!Dn||!Dn.grabbed())&&Nn!=cr&&(cr&&l(cr,["mouseout","tapdragout"],fe,{x:Tt[0],y:Tt[1]}),Nn&&l(Nn,["mouseover","tapdragover"],fe,{x:Tt[0],y:Tt[1]}),c.hoverData.last=Nn),Dn)if(Ei){if(gt.boxSelectionEnabled()&&$a)Dn&&Dn.grabbed()&&($(Xr),Dn.emit("freeon"),Xr.emit("free"),c.dragData.didDrag&&(Dn.emit("dragfreeon"),Xr.emit("dragfree"))),Ol();else if(Dn&&Dn.grabbed()&&c.nodeIsDraggable(Dn)){var to=!c.dragData.didDrag;to&&c.redrawHint("eles",!0),c.dragData.didDrag=!0,c.hoverData.draggingEles||R(Xr,{inDragLayer:!0});var ss={x:0,y:0};if(pe(Sn[0])&&pe(Sn[1])&&(ss.x+=Sn[0],ss.y+=Sn[1],to)){var Ri=c.hoverData.dragDelta;Ri&&pe(Ri[0])&&pe(Ri[1])&&(ss.x+=Ri[0],ss.y+=Ri[1])}c.hoverData.draggingEles=!0,Xr.silentShift(ss).emit("position drag"),c.redrawHint("drag",!0),c.redraw()}}else 0===(ms=c.hoverData.dragDelta=c.hoverData.dragDelta||[]).length?(ms.push(Sn[0]),ms.push(Sn[1])):(ms[0]+=Sn[0],ms[1]+=Sn[1]);It=!0}else Ei&&(c.hoverData.dragging||!gt.boxSelectionEnabled()||!$a&&gt.panningEnabled()&&gt.userPanningEnabled()?!c.hoverData.selecting&&gt.panningEnabled()&&gt.userPanningEnabled()&&f(Dn,c.hoverData.downs)&&(c.hoverData.dragging=!0,c.hoverData.justStartedPan=!0,fr[4]=0,c.data.bgActivePosistion=Yn(rn),c.redrawHint("select",!0),c.redraw()):Ol(),Dn&&Dn.pannable()&&Dn.active()&&Dn.unactivate());if(fr[2]=Tt[0],fr[3]=Tt[1],It)return fe.stopPropagation&&fe.stopPropagation(),fe.preventDefault&&fe.preventDefault(),!1}},!1),c.registerBinding(window,"mouseup",function(fe){if(c.hoverData.capture){c.hoverData.capture=!1;var It=c.cy,gt=c.projectIntoViewport(fe.clientX,fe.clientY),vt=c.selection,Tn=c.findNearestElement(gt[0],gt[1],!0,!1),Tt=c.dragData.possibleDragElements,rn=c.hoverData.down,Gn=d(fe);if(c.data.bgActivePosistion&&(c.redrawHint("select",!0),c.redraw()),c.hoverData.tapholdCancelled=!0,c.data.bgActivePosistion=void 0,rn&&rn.unactivate(),3===c.hoverData.which){var fr={originalEvent:fe,type:"cxttapend",position:{x:gt[0],y:gt[1]}};if(rn?rn.emit(fr):It.emit(fr),!c.hoverData.cxtDragged){var Nn={originalEvent:fe,type:"cxttap",position:{x:gt[0],y:gt[1]}};rn?rn.emit(Nn):It.emit(Nn)}c.hoverData.cxtDragged=!1,c.hoverData.which=null}else if(1===c.hoverData.which){if(l(Tn,["mouseup","tapend","vmouseup"],fe,{x:gt[0],y:gt[1]}),!c.dragData.didDrag&&!c.hoverData.dragged&&!c.hoverData.selecting&&!c.hoverData.isOverThresholdDrag&&(l(rn,["click","tap","vclick"],fe,{x:gt[0],y:gt[1]}),ke=!1,fe.timeStamp-Te<=It.multiClickDebounceTime()?(he&&clearTimeout(he),ke=!0,Te=null,l(rn,["dblclick","dbltap","vdblclick"],fe,{x:gt[0],y:gt[1]})):(he=setTimeout(function(){ke||l(rn,["oneclick","onetap","voneclick"],fe,{x:gt[0],y:gt[1]})},It.multiClickDebounceTime()),Te=fe.timeStamp)),null==rn&&!c.dragData.didDrag&&!c.hoverData.selecting&&!c.hoverData.dragged&&!d(fe)&&(It.$(o).unselect(["tapunselect"]),Tt.length>0&&c.redrawHint("eles",!0),c.dragData.possibleDragElements=Tt=It.collection()),Tn==rn&&!c.dragData.didDrag&&!c.hoverData.selecting&&null!=Tn&&Tn._private.selectable&&(c.hoverData.dragging||("additive"===It.selectionType()||Gn?Tn.selected()?Tn.unselect(["tapunselect"]):Tn.select(["tapselect"]):Gn||(It.$(o).unmerge(Tn).unselect(["tapunselect"]),Tn.select(["tapselect"]))),c.redrawHint("eles",!0)),c.hoverData.selecting){var cr=It.collection(c.getAllInBox(vt[0],vt[1],vt[2],vt[3]));c.redrawHint("select",!0),cr.length>0&&c.redrawHint("eles",!0),It.emit({type:"boxend",originalEvent:fe,position:{x:gt[0],y:gt[1]}}),"additive"===It.selectionType()||Gn||It.$(o).unmerge(cr).unselect(),cr.emit("box").stdFilter(function(Ei){return Ei.selectable()&&!Ei.selected()}).select().emit("boxselect"),c.redraw()}if(c.hoverData.dragging&&(c.hoverData.dragging=!1,c.redrawHint("select",!0),c.redrawHint("eles",!0),c.redraw()),!vt[4]){c.redrawHint("drag",!0),c.redrawHint("eles",!0);var Sn=rn&&rn.grabbed();$(Tt),Sn&&(rn.emit("freeon"),Tt.emit("free"),c.dragData.didDrag&&(rn.emit("dragfreeon"),Tt.emit("dragfree")))}}vt[4]=0,c.hoverData.down=null,c.hoverData.cxtStarted=!1,c.hoverData.draggingEles=!1,c.hoverData.selecting=!1,c.hoverData.isOverThresholdDrag=!1,c.dragData.didDrag=!1,c.hoverData.dragged=!1,c.hoverData.dragDelta=[],c.hoverData.mdownPos=null,c.hoverData.mdownGPos=null}},!1);var ge=function(fe){if(!c.scrollingPage){var ot=c.cy,It=ot.zoom(),gt=ot.pan(),vt=c.projectIntoViewport(fe.clientX,fe.clientY),Tn=[vt[0]*It+gt.x,vt[1]*It+gt.y];if(c.hoverData.draggingEles||c.hoverData.dragging||c.hoverData.cxtStarted||0!==c.selection[4])return void fe.preventDefault();if(ot.panningEnabled()&&ot.userPanningEnabled()&&ot.zoomingEnabled()&&ot.userZoomingEnabled()){var Tt;fe.preventDefault(),c.data.wheelZooming=!0,clearTimeout(c.data.wheelTimeout),c.data.wheelTimeout=setTimeout(function(){c.data.wheelZooming=!1,c.redrawHint("eles",!0),c.redraw()},150),Tt=null!=fe.deltaY?fe.deltaY/-250:null!=fe.wheelDeltaY?fe.wheelDeltaY/1e3:fe.wheelDelta/1e3,Tt*=c.wheelSensitivity,1===fe.deltaMode&&(Tt*=33);var Gn=ot.zoom()*Math.pow(10,Tt);"gesturechange"===fe.type&&(Gn=c.gestureStartZoom*fe.scale),ot.zoom({level:Gn,renderedPosition:{x:Tn[0],y:Tn[1]}}),ot.emit("gesturechange"===fe.type?"pinchzoom":"scrollzoom")}}};c.registerBinding(c.container,"wheel",ge,!0),c.registerBinding(window,"scroll",function(fe){c.scrollingPage=!0,clearTimeout(c.scrollingPageTimeout),c.scrollingPageTimeout=setTimeout(function(){c.scrollingPage=!1},250)},!0),c.registerBinding(c.container,"gesturestart",function(fe){c.gestureStartZoom=c.cy.zoom(),c.hasTouchStarted||fe.preventDefault()},!0),c.registerBinding(c.container,"gesturechange",function(Rt){c.hasTouchStarted||ge(Rt)},!0),c.registerBinding(c.container,"mouseout",function(fe){var ot=c.projectIntoViewport(fe.clientX,fe.clientY);c.cy.emit({originalEvent:fe,type:"mouseout",position:{x:ot[0],y:ot[1]}})},!1),c.registerBinding(c.container,"mouseover",function(fe){var ot=c.projectIntoViewport(fe.clientX,fe.clientY);c.cy.emit({originalEvent:fe,type:"mouseover",position:{x:ot[0],y:ot[1]}})},!1);var Fe,Me,Xe,Ve,je,Qe,it,ct,rt,tt,wt,Dt,yt,xt,Mt,Lt,Vt,xn,kn,Ht,mt=function(fe,ot,It,gt){return Math.sqrt((It-fe)*(It-fe)+(gt-ot)*(gt-ot))},Ze=function(fe,ot,It,gt){return(It-fe)*(It-fe)+(gt-ot)*(gt-ot)};if(c.registerBinding(c.container,"touchstart",xt=function(fe){if(c.hasTouchStarted=!0,Ee(fe)){J(),c.touchData.capture=!0,c.data.bgActivePosistion=void 0;var ot=c.cy,It=c.touchData.now,gt=c.touchData.earlier;if(fe.touches[0]){var vt=c.projectIntoViewport(fe.touches[0].clientX,fe.touches[0].clientY);It[0]=vt[0],It[1]=vt[1]}if(fe.touches[1]&&(vt=c.projectIntoViewport(fe.touches[1].clientX,fe.touches[1].clientY),It[2]=vt[0],It[3]=vt[1]),fe.touches[2]&&(vt=c.projectIntoViewport(fe.touches[2].clientX,fe.touches[2].clientY),It[4]=vt[0],It[5]=vt[1]),fe.touches[1]){c.touchData.singleTouchMoved=!0,$(c.dragData.touchDragEles);var Tn=c.findContainerClientCoords();wt=Tn[2],Dt=Tn[3],Me=fe.touches[0].clientY-(tt=Tn[1]),Xe=fe.touches[1].clientX-(rt=Tn[0]),Ve=fe.touches[1].clientY-tt,yt=0<=(Fe=fe.touches[0].clientX-rt)&&Fe<=wt&&0<=Xe&&Xe<=wt&&0<=Me&&Me<=Dt&&0<=Ve&&Ve<=Dt;var Tt=ot.pan(),rn=ot.zoom();if(je=mt(Fe,Me,Xe,Ve),Qe=Ze(Fe,Me,Xe,Ve),ct=[((it=[(Fe+Xe)/2,(Me+Ve)/2])[0]-Tt.x)/rn,(it[1]-Tt.y)/rn],Qe<4e4&&!fe.touches[2]){var Nn=c.findNearestElement(It[0],It[1],!0,!0),cr=c.findNearestElement(It[2],It[3],!0,!0);return Nn&&Nn.isNode()?(Nn.activate().emit({originalEvent:fe,type:"cxttapstart",position:{x:It[0],y:It[1]}}),c.touchData.start=Nn):cr&&cr.isNode()?(cr.activate().emit({originalEvent:fe,type:"cxttapstart",position:{x:It[0],y:It[1]}}),c.touchData.start=cr):ot.emit({originalEvent:fe,type:"cxttapstart",position:{x:It[0],y:It[1]}}),c.touchData.start&&(c.touchData.start._private.grabbed=!1),c.touchData.cxt=!0,c.touchData.cxtDragged=!1,c.data.bgActivePosistion=void 0,void c.redraw()}}if(fe.touches[2])ot.boxSelectionEnabled()&&fe.preventDefault();else if(!fe.touches[1]&&fe.touches[0]){var Dn=c.findNearestElements(It[0],It[1],!0,!0),Sn=Dn[0];if(null!=Sn&&(Sn.activate(),c.touchData.start=Sn,c.touchData.starts=Dn,c.nodeIsGrabbable(Sn))){var Xr=c.dragData.touchDragEles=ot.collection(),Ei=null;c.redrawHint("eles",!0),c.redrawHint("drag",!0),Sn.selected()?(Ei=ot.$(function(gs){return gs.selected()&&c.nodeIsGrabbable(gs)}),R(Ei,{addToList:Xr})):P(Sn,{addToList:Xr}),b(Sn);var jo=function($a){return{originalEvent:fe,type:$a,position:{x:It[0],y:It[1]}}};Sn.emit(jo("grabon")),Ei?Ei.forEach(function(gs){gs.emit(jo("grab"))}):Sn.emit(jo("grab"))}l(Sn,["touchstart","tapstart","vmousedown"],fe,{x:It[0],y:It[1]}),null==Sn&&(c.data.bgActivePosistion={x:vt[0],y:vt[1]},c.redrawHint("select",!0),c.redraw()),c.touchData.singleTouchMoved=!1,c.touchData.singleTouchStartTime=+new Date,clearTimeout(c.touchData.tapholdTimeout),c.touchData.tapholdTimeout=setTimeout(function(){!1===c.touchData.singleTouchMoved&&!c.pinching&&!c.touchData.selecting&&l(c.touchData.start,["taphold"],fe,{x:It[0],y:It[1]})},c.tapholdDuration)}if(fe.touches.length>=1){for(var Uo=c.touchData.startPosition=[],Oi=0;Oi<It.length;Oi++)Uo[Oi]=gt[Oi]=It[Oi];var Wi=fe.touches[0];c.touchData.startGPosition=[Wi.clientX,Wi.clientY]}}},!1),c.registerBinding(window,"touchmove",Mt=function(fe){var ot=c.touchData.capture;if(ot||Ee(fe)){var It=c.selection,gt=c.cy,vt=c.touchData.now,Tn=c.touchData.earlier,Tt=gt.zoom();if(fe.touches[0]){var rn=c.projectIntoViewport(fe.touches[0].clientX,fe.touches[0].clientY);vt[0]=rn[0],vt[1]=rn[1]}fe.touches[1]&&(rn=c.projectIntoViewport(fe.touches[1].clientX,fe.touches[1].clientY),vt[2]=rn[0],vt[3]=rn[1]),fe.touches[2]&&(rn=c.projectIntoViewport(fe.touches[2].clientX,fe.touches[2].clientY),vt[4]=rn[0],vt[5]=rn[1]);var fr,Gn=c.touchData.startGPosition;if(ot&&fe.touches[0]&&Gn){for(var Nn=[],cr=0;cr<vt.length;cr++)Nn[cr]=vt[cr]-Tn[cr];var Dn=fe.touches[0].clientX-Gn[0],Xr=fe.touches[0].clientY-Gn[1];fr=Dn*Dn+Xr*Xr>=c.touchTapThreshold2}if(ot&&c.touchData.cxt){fe.preventDefault();var $a=Ze(Uo=fe.touches[0].clientX-rt,Oi=fe.touches[0].clientY-tt,Wi=fe.touches[1].clientX-rt,gs=fe.touches[1].clientY-tt);if($a/Qe>=2.25||$a>=22500){c.touchData.cxt=!1,c.data.bgActivePosistion=void 0,c.redrawHint("select",!0);var Rl={originalEvent:fe,type:"cxttapend",position:{x:vt[0],y:vt[1]}};c.touchData.start?(c.touchData.start.unactivate().emit(Rl),c.touchData.start=null):gt.emit(Rl)}}if(ot&&c.touchData.cxt){Rl={originalEvent:fe,type:"cxtdrag",position:{x:vt[0],y:vt[1]}},c.data.bgActivePosistion=void 0,c.redrawHint("select",!0),c.touchData.start?c.touchData.start.emit(Rl):gt.emit(Rl),c.touchData.start&&(c.touchData.start._private.grabbed=!1),c.touchData.cxtDragged=!0;var to=c.findNearestElement(vt[0],vt[1],!0,!0);(!c.touchData.cxtOver||to!==c.touchData.cxtOver)&&(c.touchData.cxtOver&&c.touchData.cxtOver.emit({originalEvent:fe,type:"cxtdragout",position:{x:vt[0],y:vt[1]}}),c.touchData.cxtOver=to,to&&to.emit({originalEvent:fe,type:"cxtdragover",position:{x:vt[0],y:vt[1]}}))}else if(ot&&fe.touches[2]&&gt.boxSelectionEnabled())fe.preventDefault(),c.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,c.touchData.selecting||gt.emit({originalEvent:fe,type:"boxstart",position:{x:vt[0],y:vt[1]}}),c.touchData.selecting=!0,c.touchData.didSelect=!0,It[4]=1,It&&0!==It.length&&void 0!==It[0]?(It[2]=(vt[0]+vt[2]+vt[4])/3,It[3]=(vt[1]+vt[3]+vt[5])/3):(It[0]=(vt[0]+vt[2]+vt[4])/3,It[1]=(vt[1]+vt[3]+vt[5])/3,It[2]=(vt[0]+vt[2]+vt[4])/3+1,It[3]=(vt[1]+vt[3]+vt[5])/3+1),c.redrawHint("select",!0),c.redraw();else if(ot&&fe.touches[1]&&!c.touchData.didSelect&&gt.zoomingEnabled()&&gt.panningEnabled()&&gt.userZoomingEnabled()&&gt.userPanningEnabled()){if(fe.preventDefault(),c.data.bgActivePosistion=void 0,c.redrawHint("select",!0),ss=c.dragData.touchDragEles){c.redrawHint("drag",!0);for(var Ri=0;Ri<ss.length;Ri++){var Df=ss[Ri]._private;Df.grabbed=!1,Df.rscratch.inDragLayer=!1}}var Uo,Oi,Wi,gs,ms=c.touchData.start,br=mt(Uo=fe.touches[0].clientX-rt,Oi=fe.touches[0].clientY-tt,Wi=fe.touches[1].clientX-rt,gs=fe.touches[1].clientY-tt),px=br/je;if(yt){var wu=(Uo-Fe+(Wi-Xe))/2,vx=(Oi-Me+(gs-Ve))/2,Cc=gt.zoom(),Xd=Cc*px,Cf=gt.pan(),Sf=ct[0]*Cc+Cf.x,ua=ct[1]*Cc+Cf.y,yx={x:-Xd/Cc*(Sf-Cf.x-wu)+Sf,y:-Xd/Cc*(ua-Cf.y-vx)+ua};ms&&ms.active()&&($(ss=c.dragData.touchDragEles),c.redrawHint("drag",!0),c.redrawHint("eles",!0),ms.unactivate().emit("freeon"),ss.emit("free"),c.dragData.didDrag&&(ms.emit("dragfreeon"),ss.emit("dragfree"))),gt.viewport({zoom:Xd,pan:yx,cancelOnFailedZoom:!0}),gt.emit("pinchzoom"),je=br,Fe=Uo,Me=Oi,Xe=Wi,Ve=gs,c.pinching=!0}fe.touches[0]&&(rn=c.projectIntoViewport(fe.touches[0].clientX,fe.touches[0].clientY),vt[0]=rn[0],vt[1]=rn[1]),fe.touches[1]&&(rn=c.projectIntoViewport(fe.touches[1].clientX,fe.touches[1].clientY),vt[2]=rn[0],vt[3]=rn[1]),fe.touches[2]&&(rn=c.projectIntoViewport(fe.touches[2].clientX,fe.touches[2].clientY),vt[4]=rn[0],vt[5]=rn[1])}else if(fe.touches[0]&&!c.touchData.didSelect){var Go=c.touchData.start,Fg=c.touchData.last;if(!c.hoverData.draggingEles&&!c.swipePanning&&(to=c.findNearestElement(vt[0],vt[1],!0,!0)),ot&&null!=Go&&fe.preventDefault(),ot&&null!=Go&&c.nodeIsDraggable(Go))if(fr){var ss=c.dragData.touchDragEles,Zy=!c.dragData.didDrag;Zy&&R(ss,{inDragLayer:!0}),c.dragData.didDrag=!0;var xu={x:0,y:0};pe(Nn[0])&&pe(Nn[1])&&(xu.x+=Nn[0],xu.y+=Nn[1],Zy)&&(c.redrawHint("eles",!0),(no=c.touchData.dragDelta)&&pe(no[0])&&pe(no[1])&&(xu.x+=no[0],xu.y+=no[1])),c.hoverData.draggingEles=!0,ss.silentShift(xu).emit("position drag"),c.redrawHint("drag",!0),c.touchData.startPosition[0]==Tn[0]&&c.touchData.startPosition[1]==Tn[1]&&c.redrawHint("eles",!0),c.redraw()}else{var no;0===(no=c.touchData.dragDelta=c.touchData.dragDelta||[]).length?(no.push(Nn[0]),no.push(Nn[1])):(no[0]+=Nn[0],no[1]+=Nn[1])}if(l(Go||to,["touchmove","tapdrag","vmousemove"],fe,{x:vt[0],y:vt[1]}),(!Go||!Go.grabbed())&&to!=Fg&&(Fg&&Fg.emit({originalEvent:fe,type:"tapdragout",position:{x:vt[0],y:vt[1]}}),to&&to.emit({originalEvent:fe,type:"tapdragover",position:{x:vt[0],y:vt[1]}})),c.touchData.last=to,ot)for(Ri=0;Ri<vt.length;Ri++)vt[Ri]&&c.touchData.startPosition[Ri]&&fr&&(c.touchData.singleTouchMoved=!0);ot&&(null==Go||Go.pannable())&&gt.panningEnabled()&&gt.userPanningEnabled()&&(f(Go,c.touchData.starts)&&(fe.preventDefault(),c.data.bgActivePosistion||(c.data.bgActivePosistion=Yn(c.touchData.startPosition)),c.swipePanning?(gt.panBy({x:Nn[0]*Tt,y:Nn[1]*Tt}),gt.emit("dragpan")):fr&&(c.swipePanning=!0,gt.panBy({x:Dn*Tt,y:Xr*Tt}),gt.emit("dragpan"),Go&&(Go.unactivate(),c.redrawHint("select",!0),c.touchData.start=null))),rn=c.projectIntoViewport(fe.touches[0].clientX,fe.touches[0].clientY),vt[0]=rn[0],vt[1]=rn[1])}for(cr=0;cr<vt.length;cr++)Tn[cr]=vt[cr];ot&&fe.touches.length>0&&!c.hoverData.draggingEles&&!c.swipePanning&&null!=c.data.bgActivePosistion&&(c.data.bgActivePosistion=void 0,c.redrawHint("select",!0),c.redraw())}},!1),c.registerBinding(window,"touchcancel",Lt=function(fe){var ot=c.touchData.start;c.touchData.capture=!1,ot&&ot.unactivate()}),c.registerBinding(window,"touchend",Vt=function(fe){var ot=c.touchData.start;if(c.touchData.capture){0===fe.touches.length&&(c.touchData.capture=!1),fe.preventDefault();var gt=c.selection;c.swipePanning=!1,c.hoverData.draggingEles=!1;var fr,vt=c.cy,Tn=vt.zoom(),Tt=c.touchData.now,rn=c.touchData.earlier;if(fe.touches[0]){var Gn=c.projectIntoViewport(fe.touches[0].clientX,fe.touches[0].clientY);Tt[0]=Gn[0],Tt[1]=Gn[1]}if(fe.touches[1]&&(Gn=c.projectIntoViewport(fe.touches[1].clientX,fe.touches[1].clientY),Tt[2]=Gn[0],Tt[3]=Gn[1]),fe.touches[2]&&(Gn=c.projectIntoViewport(fe.touches[2].clientX,fe.touches[2].clientY),Tt[4]=Gn[0],Tt[5]=Gn[1]),ot&&ot.unactivate(),c.touchData.cxt){if(fr={originalEvent:fe,type:"cxttapend",position:{x:Tt[0],y:Tt[1]}},ot?ot.emit(fr):vt.emit(fr),!c.touchData.cxtDragged){var Nn={originalEvent:fe,type:"cxttap",position:{x:Tt[0],y:Tt[1]}};ot?ot.emit(Nn):vt.emit(Nn)}return c.touchData.start&&(c.touchData.start._private.grabbed=!1),c.touchData.cxt=!1,c.touchData.start=null,void c.redraw()}if(!fe.touches[2]&&vt.boxSelectionEnabled()&&c.touchData.selecting){c.touchData.selecting=!1;var cr=vt.collection(c.getAllInBox(gt[0],gt[1],gt[2],gt[3]));gt[0]=void 0,gt[1]=void 0,gt[2]=void 0,gt[3]=void 0,gt[4]=0,c.redrawHint("select",!0),vt.emit({type:"boxend",originalEvent:fe,position:{x:Tt[0],y:Tt[1]}}),cr.emit("box").stdFilter(function(Ec){return Ec.selectable()&&!Ec.selected()}).select().emit("boxselect"),cr.nonempty()&&c.redrawHint("eles",!0),c.redraw()}if(ot?.unactivate(),fe.touches[2])c.data.bgActivePosistion=void 0,c.redrawHint("select",!0);else if(!fe.touches[1]&&!fe.touches[0]&&!fe.touches[0]){c.data.bgActivePosistion=void 0,c.redrawHint("select",!0);var Sn=c.dragData.touchDragEles;if(null!=ot){var Xr=ot._private.grabbed;$(Sn),c.redrawHint("drag",!0),c.redrawHint("eles",!0),Xr&&(ot.emit("freeon"),Sn.emit("free"),c.dragData.didDrag&&(ot.emit("dragfreeon"),Sn.emit("dragfree"))),l(ot,["touchend","tapend","vmouseup","tapdragout"],fe,{x:Tt[0],y:Tt[1]}),ot.unactivate(),c.touchData.start=null}else{var Ei=c.findNearestElement(Tt[0],Tt[1],!0,!0);l(Ei,["touchend","tapend","vmouseup","tapdragout"],fe,{x:Tt[0],y:Tt[1]})}var jo=c.touchData.startPosition[0]-Tt[0],Oi=c.touchData.startPosition[1]-Tt[1],$a=(jo*jo+Oi*Oi)*Tn*Tn;c.touchData.singleTouchMoved||(ot||vt.$(":selected").unselect(["tapunselect"]),l(ot,["tap","vclick"],fe,{x:Tt[0],y:Tt[1]}),xn=!1,fe.timeStamp-Ht<=vt.multiClickDebounceTime()?(kn&&clearTimeout(kn),xn=!0,Ht=null,l(ot,["dbltap","vdblclick"],fe,{x:Tt[0],y:Tt[1]})):(kn=setTimeout(function(){xn||l(ot,["onetap","voneclick"],fe,{x:Tt[0],y:Tt[1]})},vt.multiClickDebounceTime()),Ht=fe.timeStamp)),null!=ot&&!c.dragData.didDrag&&ot._private.selectable&&$a<c.touchTapThreshold2&&!c.pinching&&("single"===vt.selectionType()?(vt.$(o).unmerge(ot).unselect(["tapunselect"]),ot.select(["tapselect"])):ot.selected()?ot.unselect(["tapunselect"]):ot.select(["tapselect"]),c.redrawHint("eles",!0)),c.touchData.singleTouchMoved=!0}for(var Il=0;Il<Tt.length;Il++)rn[Il]=Tt[Il];c.dragData.didDrag=!1,0===fe.touches.length&&(c.touchData.dragDelta=[],c.touchData.startPosition=null,c.touchData.startGPosition=null,c.touchData.didSelect=!1),fe.touches.length<2&&(1===fe.touches.length&&(c.touchData.startGPosition=[fe.touches[0].clientX,fe.touches[0].clientY]),c.pinching=!1,c.redrawHint("eles",!0),c.redraw())}},!1),typeof TouchEvent>"u"){var Ft=[],pn=function(fe){return{clientX:fe.clientX,clientY:fe.clientY,force:1,identifier:fe.pointerId,pageX:fe.pageX,pageY:fe.pageY,radiusX:fe.width/2,radiusY:fe.height/2,screenX:fe.screenX,screenY:fe.screenY,target:fe.target}},cn=function(fe){for(var ot=0;ot<Ft.length;ot++)if(Ft[ot].event.pointerId===fe.pointerId)return void Ft.splice(ot,1)},An=function(fe){fe.touches=Ft.map(function(ot){return ot.touch})},mn=function(fe){return"mouse"===fe.pointerType||4===fe.pointerType};c.registerBinding(c.container,"pointerdown",function(Rt){mn(Rt)||(Rt.preventDefault(),Ft.push(function(fe){return{event:fe,touch:pn(fe)}}(Rt)),An(Rt),xt(Rt))}),c.registerBinding(c.container,"pointerup",function(Rt){mn(Rt)||(cn(Rt),An(Rt),Vt(Rt))}),c.registerBinding(c.container,"pointercancel",function(Rt){mn(Rt)||(cn(Rt),An(Rt),Lt())}),c.registerBinding(c.container,"pointermove",function(Rt){var fe,ot;mn(Rt)||(Rt.preventDefault(),fe=Rt,(ot=Ft.filter(function(It){return It.event.pointerId===fe.pointerId})[0]).event=fe,ot.touch=pn(fe),An(Rt),Mt(Rt))})}};var ni={generatePolygon:function(c,o){return this.nodeShapes[c]={renderer:this,name:c,points:o,draw:function(d,f,p,g,y){this.renderer.nodeShapeImpl("polygon",d,f,p,g,y,this.points)},intersectLine:function(d,f,p,g,y,_,b){return ml(y,_,this.points,d,f,p/2,g/2,b)},checkPoint:function(d,f,p,g,y,_,b){return Xs(d,f,this.points,_,b,g,y,[0,-1],p)}}},generateEllipse:function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(o,l,d,f,p){this.renderer.nodeShapeImpl(this.name,o,l,d,f,p)},intersectLine:function(o,l,d,f,p,g,y){return function(o,l,d,f,p,g){var y=d-o,_=f-l;y/=p,_/=g;var b=Math.sqrt(y*y+_*_),w=b-1;if(w<0)return[];var E=w/b;return[(d-o)*E+o,(f-l)*E+l]}(p,g,o,l,d/2+y,f/2+y)},checkPoint:function(o,l,d,f,p,g,y){return Ra(o,l,f,p,g,y,d)}}},generateRoundPolygon:function(c,o){for(var l=new Array(2*o.length),d=0;d<o.length/2;d++){var p,f=2*d;p=d<o.length/2-1?2*(d+1):0,l[4*d]=o[f],l[4*d+1]=o[f+1];var g=o[p]-o[f],y=o[p+1]-o[f+1],_=Math.sqrt(g*g+y*y);l[4*d+2]=g/_,l[4*d+3]=y/_}return this.nodeShapes[c]={renderer:this,name:c,points:l,draw:function(w,E,M,R,P){this.renderer.nodeShapeImpl("round-polygon",w,E,M,R,P,this.points)},intersectLine:function(w,E,M,R,P,$,K){return function(o,l,d,f,p,g,y,_){for(var w,b=[],E=new Array(d.length),M=g/2,R=y/2,P=St(g,y),$=0;$<d.length/4;$++){var J,K;K=0===$?d.length-2:4*$-2,J=4*$+2;var ne=f+M*d[4*$],re=p+R*d[4*$+1],Ce=P/Math.tan(Math.acos(-d[K]*d[J]-d[K+1]*d[J+1])/2),Se=ne-Ce*d[K],de=re-Ce*d[K+1],Ee=ne+Ce*d[J],he=re+Ce*d[J+1];0===$?(E[d.length-2]=Se,E[d.length-1]=de):(E[4*$-2]=Se,E[4*$-1]=de),E[4*$]=Ee,E[4*$+1]=he;var ke=d[K+1],Te=-d[K];ke*d[J]+Te*d[J+1]<0&&(ke*=-1,Te*=-1),0!==(w=wo(o,l,f,p,Se+ke*P,de+Te*P,P)).length&&b.push(w[0],w[1])}for(var Xe=0;Xe<E.length/4;Xe++)0!==(w=Os(o,l,f,p,E[4*Xe],E[4*Xe+1],E[4*Xe+2],E[4*Xe+3],!1)).length&&b.push(w[0],w[1]);if(b.length>2){for(var Ve=[b[0],b[1]],je=Math.pow(Ve[0]-o,2)+Math.pow(Ve[1]-l,2),Qe=1;Qe<b.length/2;Qe++){var it=Math.pow(b[2*Qe]-o,2)+Math.pow(b[2*Qe+1]-l,2);it<=je&&(Ve[0]=b[2*Qe],Ve[1]=b[2*Qe+1],je=it)}return Ve}return b}(P,$,this.points,w,E,M,R)},checkPoint:function(w,E,M,R,P,$,K){return function(o,l,d,f,p,g,y){for(var _=new Array(d.length),b=g/2,w=y/2,E=St(g,y),M=E*E,R=0;R<d.length/4;R++){var $,P;P=0===R?d.length-2:4*R-2,$=4*R+2;var K=f+b*d[4*R],J=p+w*d[4*R+1],re=E/Math.tan(Math.acos(-d[P]*d[$]-d[P+1]*d[$+1])/2),ue=K-re*d[P],Ce=J-re*d[P+1],Se=K+re*d[$],de=J+re*d[$+1];_[4*R]=ue,_[4*R+1]=Ce,_[4*R+2]=Se,_[4*R+3]=de;var Ee=d[P+1],he=-d[P];Ee*d[$]+he*d[$+1]<0&&(Ee*=-1,he*=-1);var ge=Ce+he*E;if(Math.pow(ue+Ee*E-o,2)+Math.pow(ge-l,2)<=M)return!0}return Mr(o,l,_)}(w,E,this.points,$,K,R,P)}}},generateRoundRectangle:function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Zi(4,0),draw:function(o,l,d,f,p){this.renderer.nodeShapeImpl(this.name,o,l,d,f,p)},intersectLine:function(o,l,d,f,p,g,y){return Ia(p,g,o,l,d,f,y)},checkPoint:function(o,l,d,f,p,g,y){var _=dd(f,p),b=2*_;return!!(Xs(o,l,this.points,g,y,f,p-b,[0,-1],d)||Xs(o,l,this.points,g,y,f-b,p,[0,-1],d)||Ra(o,l,b,b,g-f/2+_,y-p/2+_,d)||Ra(o,l,b,b,g+f/2-_,y-p/2+_,d)||Ra(o,l,b,b,g+f/2-_,y+p/2-_,d)||Ra(o,l,b,b,g-f/2+_,y+p/2-_,d))}}},generateCutRectangle:function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:8,points:Zi(4,0),draw:function(o,l,d,f,p){this.renderer.nodeShapeImpl(this.name,o,l,d,f,p)},generateCutTrianglePts:function(o,l,d,f){var p=this.cornerLength,g=l/2,y=o/2,_=d-y,b=d+y,w=f-g,E=f+g;return{topLeft:[_,w+p,_+p,w,_+p,w+p],topRight:[b-p,w,b,w+p,b-p,w+p],bottomRight:[b,E-p,b-p,E,b-p,E-p],bottomLeft:[_+p,E,_,E-p,_+p,E-p]}},intersectLine:function(o,l,d,f,p,g,y){var _=this.generateCutTrianglePts(d+2*y,f+2*y,o,l),b=[].concat.apply([],[_.topLeft.splice(0,4),_.topRight.splice(0,4),_.bottomRight.splice(0,4),_.bottomLeft.splice(0,4)]);return ml(p,g,b,o,l)},checkPoint:function(o,l,d,f,p,g,y){if(Xs(o,l,this.points,g,y,f,p-2*this.cornerLength,[0,-1],d)||Xs(o,l,this.points,g,y,f-2*this.cornerLength,p,[0,-1],d))return!0;var _=this.generateCutTrianglePts(f,p,g,y);return Mr(o,l,_.topLeft)||Mr(o,l,_.topRight)||Mr(o,l,_.bottomRight)||Mr(o,l,_.bottomLeft)}}},generateBarrel:function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Zi(4,0),draw:function(o,l,d,f,p){this.renderer.nodeShapeImpl(this.name,o,l,d,f,p)},intersectLine:function(o,l,d,f,p,g,y){var E=this.generateBarrelBezierPts(d+2*y,f+2*y,o,l),M=function($){var K=qs({x:$[0],y:$[1]},{x:$[2],y:$[3]},{x:$[4],y:$[5]},.15),J=qs({x:$[0],y:$[1]},{x:$[2],y:$[3]},{x:$[4],y:$[5]},.5),ne=qs({x:$[0],y:$[1]},{x:$[2],y:$[3]},{x:$[4],y:$[5]},.85);return[$[0],$[1],K.x,K.y,J.x,J.y,ne.x,ne.y,$[4],$[5]]},R=[].concat(M(E.topLeft),M(E.topRight),M(E.bottomRight),M(E.bottomLeft));return ml(p,g,R,o,l)},generateBarrelBezierPts:function(o,l,d,f){var p=l/2,g=o/2,y=d-g,_=d+g,b=f-p,w=f+p,E=Xc(o,l),M=E.heightOffset,R=E.widthOffset,P=E.ctrlPtOffsetPct*o,$={topLeft:[y,b+M,y+P,b,y+R,b],topRight:[_-R,b,_-P,b,_,b+M],bottomRight:[_,w-M,_-P,w,_-R,w],bottomLeft:[y+R,w,y+P,w,y,w-M]};return $.topLeft.isTop=!0,$.topRight.isTop=!0,$.bottomLeft.isBottom=!0,$.bottomRight.isBottom=!0,$},checkPoint:function(o,l,d,f,p,g,y){var _=Xc(f,p),w=_.widthOffset;if(Xs(o,l,this.points,g,y,f,p-2*_.heightOffset,[0,-1],d)||Xs(o,l,this.points,g,y,f-2*w,p,[0,-1],d))return!0;for(var E=this.generateBarrelBezierPts(f,p,g,y),M=function(de,Ee,he){var ke=he[4],Te=he[2],ge=he[0],Fe=he[5],Me=he[1],Xe=Math.min(ke,ge),Ve=Math.max(ke,ge),je=Math.min(Fe,Me),Qe=Math.max(Fe,Me);if(Xe<=de&&de<=Ve&&je<=Ee&&Ee<=Qe){var it=function(o,l,d){return[o-2*l+d,2*(l-o),o]}(ke,Te,ge),ct=function(o,l,d,f){var p=l*l-4*o*(d-=f);if(p<0)return[];var g=Math.sqrt(p),y=2*o;return[(-l+g)/y,(-l-g)/y]}(it[0],it[1],it[2],de),rt=ct.filter(function(tt){return 0<=tt&&tt<=1});if(rt.length>0)return rt[0]}return null},R=Object.keys(E),P=0;P<R.length;P++){var K=E[R[P]],J=M(o,l,K);if(null!=J){var Ce=tr(K[5],K[3],K[1],J);if(K.isTop&&Ce<=l||K.isBottom&&l<=Ce)return!0}}return!1}}},generateBottomRoundrectangle:function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Zi(4,0),draw:function(o,l,d,f,p){this.renderer.nodeShapeImpl(this.name,o,l,d,f,p)},intersectLine:function(o,l,d,f,p,g,y){var b=l-(f/2+y),M=Os(p,g,o,l,o-(d/2+y),b,o+(d/2+y),b,!1);return M.length>0?M:Ia(p,g,o,l,d,f,y)},checkPoint:function(o,l,d,f,p,g,y){var _=dd(f,p),b=2*_;if(Xs(o,l,this.points,g,y,f,p-b,[0,-1],d)||Xs(o,l,this.points,g,y,f-b,p,[0,-1],d))return!0;var w=f/2+2*d,E=p/2+2*d;return!!(Mr(o,l,[g-w,y-E,g-w,y,g+w,y,g+w,y-E])||Ra(o,l,b,b,g+f/2-_,y+p/2-_,d)||Ra(o,l,b,b,g-f/2+_,y+p/2-_,d))}}},registerNodeShapes:function(){var c=this.nodeShapes={},o=this;this.generateEllipse(),this.generatePolygon("triangle",Zi(3,0)),this.generateRoundPolygon("round-triangle",Zi(3,0)),this.generatePolygon("rectangle",Zi(4,0)),c.square=c.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var l=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",l),this.generateRoundPolygon("round-diamond",l),this.generatePolygon("pentagon",Zi(5,0)),this.generateRoundPolygon("round-pentagon",Zi(5,0)),this.generatePolygon("hexagon",Zi(6,0)),this.generateRoundPolygon("round-hexagon",Zi(6,0)),this.generatePolygon("heptagon",Zi(7,0)),this.generateRoundPolygon("round-heptagon",Zi(7,0)),this.generatePolygon("octagon",Zi(8,0)),this.generateRoundPolygon("round-octagon",Zi(8,0));var d=new Array(20),f=vl(5,0),p=vl(5,Math.PI/5),g=.5*(3-Math.sqrt(5));g*=1.57;for(var y=0;y<p.length/2;y++)p[2*y]*=g,p[2*y+1]*=g;for(y=0;y<5;y++)d[4*y]=f[2*y],d[4*y+1]=f[2*y+1],d[4*y+2]=p[2*y],d[4*y+3]=p[2*y+1];d=Yc(d),this.generatePolygon("star",d),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var _=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",_),this.generateRoundPolygon("round-tag",_),c.makePolygon=function(b){var M,E="polygon-"+b.join("$");return(M=this[E])?M:o.generatePolygon(E,b)}}},Hd={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(c){c=c||sd();var o=this;void 0===o.averageRedrawTime&&(o.averageRedrawTime=0),void 0===o.lastRedrawTime&&(o.lastRedrawTime=0),void 0===o.lastDrawTime&&(o.lastDrawTime=0),o.requestedFrame=!0,o.renderOptions=c},beforeRender:function(c,o){if(!this.destroyed){null==o&&Sr("Priority is not optional for beforeRender");var l=this.beforeRenderCallbacks;l.push({fn:c,priority:o}),l.sort(function(d,f){return f.priority-d.priority})}}},Cy=function(o,l,d){for(var f=o.beforeRenderCallbacks,p=0;p<f.length;p++)f[p].fn(l,d)};Hd.startRenderLoop=function(){var c=this,o=c.cy;c.renderLoopStarted||(c.renderLoopStarted=!0,ll(function d(f){if(!c.destroyed){if(!o.batching())if(c.requestedFrame&&!c.skipFrame){Cy(c,!0,f);var p=Si();c.render(c.renderOptions);var g=c.lastDrawTime=Si();void 0===c.averageRedrawTime&&(c.averageRedrawTime=g-p),void 0===c.redrawCount&&(c.redrawCount=0),c.redrawCount++,void 0===c.redrawTotalTime&&(c.redrawTotalTime=0);var y=g-p;c.redrawTotalTime+=y,c.lastRedrawTime=y,c.averageRedrawTime=c.averageRedrawTime/2+y/2,c.requestedFrame=!1}else Cy(c,!1,f);c.skipFrame=!1,ll(d)}}))};var yg=function(o){this.init(o)},Tl=yg.prototype;Tl.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],Tl.init=function(c){var o=this;o.options=c,o.cy=c.cy;var l=o.container=c.cy.container();if(H){var d=H.document,f=d.head,p="__________cytoscape_stylesheet",g="__________cytoscape_container",y=null!=d.getElementById(p);if(l.className.indexOf(g)<0&&(l.className=(l.className||"")+" "+g),!y){var _=d.createElement("style");_.id=p,_.innerHTML="."+g+" { position: relative; }",f.insertBefore(_,f.children[0])}"static"===H.getComputedStyle(l).getPropertyValue("position")&&ur("A Cytoscape container has style position:static and so can not use UI extensions properly")}o.selection=[void 0,void 0,void 0,void 0,0],o.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],o.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},o.dragData={possibleDragElements:[]},o.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},o.redraws=0,o.showFps=c.showFps,o.debug=c.debug,o.hideEdgesOnViewport=c.hideEdgesOnViewport,o.textureOnViewport=c.textureOnViewport,o.wheelSensitivity=c.wheelSensitivity,o.motionBlurEnabled=c.motionBlur,o.forcedPixelRatio=pe(c.pixelRatio)?c.pixelRatio:null,o.motionBlur=c.motionBlur,o.motionBlurOpacity=c.motionBlurOpacity,o.motionBlurTransparency=1-o.motionBlurOpacity,o.motionBlurPxRatio=1,o.mbPxRBlurry=1,o.minMbLowQualFrames=4,o.fullQualityMb=!1,o.clearedForMotionBlur=[],o.desktopTapThreshold=c.desktopTapThreshold,o.desktopTapThreshold2=c.desktopTapThreshold*c.desktopTapThreshold,o.touchTapThreshold=c.touchTapThreshold,o.touchTapThreshold2=c.touchTapThreshold*c.touchTapThreshold,o.tapholdDuration=500,o.bindings=[],o.beforeRenderCallbacks=[],o.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},o.registerNodeShapes(),o.registerArrowShapes(),o.registerCalculationListeners()},Tl.notify=function(c,o){var l=this,d=l.cy;if(!this.destroyed){if("init"===c)return void l.load();if("destroy"===c)return void l.destroy();("add"===c||"remove"===c||"move"===c&&d.hasCompoundNodes()||"load"===c||"zorder"===c||"mount"===c)&&l.invalidateCachedZSortedEles(),"viewport"===c&&l.redrawHint("select",!0),("load"===c||"resize"===c||"mount"===c)&&(l.invalidateContainerClientCoordsCache(),l.matchCanvasSize(l.container)),l.redrawHint("eles",!0),l.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}},Tl.destroy=function(){var c=this;c.destroyed=!0,c.cy.stopAnimationLoop();for(var o=0;o<c.bindings.length;o++){var l=c.bindings[o],f=l.target;(f.off||f.removeEventListener).apply(f,l.args)}if(c.bindings=[],c.beforeRenderCallbacks=[],c.onUpdateEleCalcsFns=[],c.removeObserver&&c.removeObserver.disconnect(),c.styleObserver&&c.styleObserver.disconnect(),c.resizeObserver&&c.resizeObserver.disconnect(),c.labelCalcDiv)try{document.body.removeChild(c.labelCalcDiv)}catch{}},Tl.isHeadless=function(){return!1},[wy,mg,vg,yc,ni,Hd].forEach(function(c){Zt(Tl,c)});var bg=1e3/60,Sy_setupDequeueing=function(o){return function(){var d=this,f=this.renderer;if(!d.dequeueingSetup){d.dequeueingSetup=!0;var p=T.default(function(){f.redrawHint("eles",!0),f.redrawHint("drag",!0),f.redraw()},o.deqRedrawThreshold);f.beforeRender(function(b,w){var E=Si(),M=f.averageRedrawTime,R=f.lastRedrawTime,P=[],$=f.cy.extent(),K=f.getPixelRatio();for(b||f.flushRenderedStyleQueue();;){var J=Si(),ne=J-E,re=J-w;if(R<bg){if(re>=o.deqFastCost*(bg-(b?M:0)))break}else if(b){if(ne>=o.deqCost*R||ne>=o.deqAvgCost*M)break}else if(re>=o.deqNoDrawCost*bg)break;var Ce=o.deq(d,K,$);if(!(Ce.length>0))break;for(var Se=0;Se<Ce.length;Se++)P.push(Ce[Se])}P.length>0&&(o.onDeqd(d,P),!b&&o.shouldRedraw(d,P,K,$)&&p())},(o.priority||$c)(d))}}},nx=function(){function c(o){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gc;O(this,c),this.idsByKey=new cs,this.keyForId=new cs,this.cachesByLvl=new cs,this.lvls=[],this.getKey=o,this.doesEleInvalidateKey=l}return ie(c,[{key:"getIdsFor",value:function(l){null==l&&Sr("Can not get id list for null key");var d=this.idsByKey,f=this.idsByKey.get(l);return f||(f=new ka,d.set(l,f)),f}},{key:"addIdForKey",value:function(l,d){null!=l&&this.getIdsFor(l).add(d)}},{key:"deleteIdForKey",value:function(l,d){null!=l&&this.getIdsFor(l).delete(d)}},{key:"getNumberOfIdsForKey",value:function(l){return null==l?0:this.getIdsFor(l).size}},{key:"updateKeyMappingFor",value:function(l){var d=l.id(),f=this.keyForId.get(d),p=this.getKey(l);this.deleteIdForKey(f,d),this.addIdForKey(p,d),this.keyForId.set(d,p)}},{key:"deleteKeyMappingFor",value:function(l){var d=l.id(),f=this.keyForId.get(d);this.deleteIdForKey(f,d),this.keyForId.delete(d)}},{key:"keyHasChangedFor",value:function(l){var d=l.id();return this.keyForId.get(d)!==this.getKey(l)}},{key:"isInvalid",value:function(l){return this.keyHasChangedFor(l)||this.doesEleInvalidateKey(l)}},{key:"getCachesAt",value:function(l){var d=this.cachesByLvl,f=this.lvls,p=d.get(l);return p||(p=new cs,d.set(l,p),f.push(l)),p}},{key:"getCache",value:function(l,d){return this.getCachesAt(d).get(l)}},{key:"get",value:function(l,d){var f=this.getKey(l),p=this.getCache(f,d);return null!=p&&this.updateKeyMappingFor(l),p}},{key:"getForCachedKey",value:function(l,d){var f=this.keyForId.get(l.id());return this.getCache(f,d)}},{key:"hasCache",value:function(l,d){return this.getCachesAt(d).has(l)}},{key:"has",value:function(l,d){var f=this.getKey(l);return this.hasCache(f,d)}},{key:"setCache",value:function(l,d,f){f.key=l,this.getCachesAt(d).set(l,f)}},{key:"set",value:function(l,d,f){var p=this.getKey(l);this.setCache(p,d,f),this.updateKeyMappingFor(l)}},{key:"deleteCache",value:function(l,d){this.getCachesAt(d).delete(l)}},{key:"delete",value:function(l,d){var f=this.getKey(l);this.deleteCache(f,d)}},{key:"invalidateKey",value:function(l){var d=this;this.lvls.forEach(function(f){return d.deleteCache(l,f)})}},{key:"invalidate",value:function(l){var d=l.id(),f=this.keyForId.get(d);this.deleteKeyMappingFor(l);var p=this.doesEleInvalidateKey(l);return p&&this.invalidateKey(f),p||0===this.getNumberOfIdsForKey(f)}}]),c}(),vu={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},Eg=yi({getKey:null,doesEleInvalidateKey:Gc,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:mo,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),bc=function(o,l){var d=this;d.renderer=o,d.onDequeues=[];var f=Eg(l);Zt(d,f),d.lookup=new nx(f.getKey,f.doesEleInvalidateKey),d.setupDequeueing()},xi=bc.prototype;xi.reasons=vu,xi.getTextureQueue=function(c){var o=this;return o.eleImgCaches=o.eleImgCaches||{},o.eleImgCaches[c]=o.eleImgCaches[c]||[]},xi.getRetiredTextureQueue=function(c){var l=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return l[c]=l[c]||[]},xi.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new k.default(function(l,d){return d.reqs-l.reqs})},xi.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},xi.getElement=function(c,o,l,d,f){var p=this,g=this.renderer,y=g.cy.zoom(),_=this.lookup;if(!o||0===o.w||0===o.h||isNaN(o.w)||isNaN(o.h)||!c.visible()||c.removed()||!p.allowEdgeTxrCaching&&c.isEdge()||!p.allowParentTxrCaching&&c.isParent())return null;if(null==d&&(d=Math.ceil(Jr(y*l))),d<-4)d=-4;else if(y>=7.99||d>3)return null;var b=Math.pow(2,d),w=o.h*b,E=o.w*b,M=g.eleTextBiggerThanMin(c,b);if(!this.isVisible(c,M))return null;var P,R=_.get(c,d);if(R&&R.invalidated&&(R.invalidated=!1,R.texture.invalidatedWidth-=R.width),R)return R;if(P=w<=25?25:w<=50?50:50*Math.ceil(w/50),w>1024||E>1024)return null;var $=p.getTextureQueue(P),K=$[$.length-2],J=function(){return p.recycleTexture(P,E)||p.addTexture(P,E)};K||(K=$[$.length-1]),K||(K=J()),K.width-K.usedWidth<E&&(K=J());for(var Se,ne=function(Ve){return Ve&&Ve.scaledLabelShown===M},re=f&&f===vu.dequeue,ue=f&&f===vu.highQuality,Ce=f&&f===vu.downscale,de=d+1;de<=3;de++){var Ee=_.get(c,de);if(Ee){Se=Ee;break}}var he=Se&&Se.level===d+1?Se:null,ke=function(){K.context.drawImage(he.texture.canvas,he.x,0,he.width,he.height,K.usedWidth,0,E,w)};if(K.context.setTransform(1,0,0,1,0,0),K.context.clearRect(K.usedWidth,0,E,P),ne(he))ke();else if(ne(Se)){if(!ue)return p.queueElement(c,Se.level-1),Se;for(var Te=Se.level;Te>d;Te--)he=p.getElement(c,o,l,Te,vu.downscale);ke()}else{var ge;if(!re&&!ue&&!Ce)for(var Fe=d-1;Fe>=-4;Fe--){var Me=_.get(c,Fe);if(Me){ge=Me;break}}if(ne(ge))return p.queueElement(c,d),ge;K.context.translate(K.usedWidth,0),K.context.scale(b,b),this.drawElement(K.context,c,o,M,!1),K.context.scale(1/b,1/b),K.context.translate(-K.usedWidth,0)}return R={x:K.usedWidth,texture:K,level:d,scale:b,width:E,height:w,scaledLabelShown:M},K.usedWidth+=Math.ceil(E+8),K.eleCaches.push(R),_.set(c,d,R),p.checkTextureFullness(K),R},xi.invalidateElements=function(c){for(var o=0;o<c.length;o++)this.invalidateElement(c[o])},xi.invalidateElement=function(c){var o=this,l=o.lookup,d=[];if(l.isInvalid(c)){for(var p=-4;p<=3;p++){var g=l.getForCachedKey(c,p);g&&d.push(g)}if(l.invalidate(c))for(var _=0;_<d.length;_++){var b=d[_],w=b.texture;w.invalidatedWidth+=b.width,b.invalidated=!0,o.checkTextureUtility(w)}o.removeFromQueue(c)}},xi.checkTextureUtility=function(c){c.invalidatedWidth>=.2*c.width&&this.retireTexture(c)},xi.checkTextureFullness=function(c){var l=this.getTextureQueue(c.height);c.usedWidth/c.width>.8&&c.fullnessChecks>=10?ia(l,c):c.fullnessChecks++},xi.retireTexture=function(c){var l=c.height,d=this.getTextureQueue(l),f=this.lookup;ia(d,c),c.retired=!0;for(var p=c.eleCaches,g=0;g<p.length;g++){var y=p[g];f.deleteCache(y.key,y.level)}od(p),this.getRetiredTextureQueue(l).push(c)},xi.addTexture=function(c,o){var f={};return this.getTextureQueue(c).push(f),f.eleCaches=[],f.height=c,f.width=Math.max(1024,o),f.usedWidth=0,f.invalidatedWidth=0,f.fullnessChecks=0,f.canvas=this.renderer.makeOffscreenCanvas(f.width,f.height),f.context=f.canvas.getContext("2d"),f},xi.recycleTexture=function(c,o){for(var d=this.getTextureQueue(c),f=this.getRetiredTextureQueue(c),p=0;p<f.length;p++){var g=f[p];if(g.width>=o)return g.retired=!1,g.usedWidth=0,g.invalidatedWidth=0,g.fullnessChecks=0,od(g.eleCaches),g.context.setTransform(1,0,0,1,0,0),g.context.clearRect(0,0,g.width,g.height),ia(f,g),d.push(g),g}},xi.queueElement=function(c,o){var d=this.getElementQueue(),f=this.getElementKeyToQueue(),p=this.getKey(c),g=f[p];if(g)g.level=Math.max(g.level,o),g.eles.merge(c),g.reqs++,d.updateItem(g);else{var y={eles:c.spawn().merge(c),level:o,reqs:1,key:p};d.push(y),f[p]=y}},xi.dequeue=function(c){for(var o=this,l=o.getElementQueue(),d=o.getElementKeyToQueue(),f=[],p=o.lookup,g=0;g<1&&l.size()>0;g++){var y=l.pop(),_=y.key,b=y.eles[0],w=p.hasCache(b,y.level);if(d[_]=null,!w){f.push(y);var E=o.getBoundingBox(b);o.getElement(b,E,c,y.level,vu.dequeue)}}return f},xi.removeFromQueue=function(c){var l=this.getElementQueue(),d=this.getElementKeyToQueue(),f=this.getKey(c),p=d[f];null!=p&&(1===p.eles.length?(p.reqs=Uc,l.updateItem(p),l.pop(),d[f]=null):p.eles.unmerge(c))},xi.onDequeue=function(c){this.onDequeues.push(c)},xi.offDequeue=function(c){ia(this.onDequeues,c)},xi.setupDequeueing=Sy_setupDequeueing({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(o,l,d){return o.dequeue(l,d)},onDeqd:function(o,l){for(var d=0;d<o.onDequeues.length;d++)(0,o.onDequeues[d])(l)},shouldRedraw:function(o,l,d,f){for(var p=0;p<l.length;p++)for(var g=l[p].eles,y=0;y<g.length;y++){var _=g[y].boundingBox();if(Ys(_,f))return!0}return!1},priority:function(o){return o.renderer.beforeRenderPriorities.eleTxrDeq}});var Ly=function(o){var l=this,d=l.renderer=o,f=d.cy;l.layersByLevel={},l.firstGet=!0,l.lastInvalidationTime=Si()-500,l.skipping=!1,l.eleTxrDeqs=f.collection(),l.scheduleElementRefinement=T.default(function(){l.refineElementTextures(l.eleTxrDeqs),l.eleTxrDeqs.unmerge(l.eleTxrDeqs)},50),d.beforeRender(function(g,y){l.skipping=y-l.lastInvalidationTime<=250},d.beforeRenderPriorities.lyrTxrSkip),l.layersQueue=new k.default(function(y,_){return _.reqs-y.reqs}),l.setupDequeueing()},$i=Ly.prototype,Fy=0,By=Math.pow(2,53)-1;$i.makeLayer=function(c,o){var l=Math.pow(2,o),d=Math.ceil(c.w*l),f=Math.ceil(c.h*l),p=this.renderer.makeOffscreenCanvas(d,f),g={id:Fy=++Fy%By,bb:c,level:o,width:d,height:f,canvas:p,context:p.getContext("2d"),eles:[],elesQueue:[],reqs:0},y=g.context,_=-g.bb.x1,b=-g.bb.y1;return y.scale(l,l),y.translate(_,b),g},$i.getLayers=function(c,o,l){var d=this,g=d.renderer.cy.zoom(),y=d.firstGet;if(d.firstGet=!1,null==l)if((l=Math.ceil(Jr(g*o)))<-4)l=-4;else if(g>=3.99||l>2)return null;d.validateLayersElesOrdering(l,c);var E,R,_=d.layersByLevel,b=Math.pow(2,l),w=_[l]=_[l]||[];if(d.levelIsComplete(l,c))return w;!function(){var ke=function(Xe){if(d.validateLayersElesOrdering(Xe,c),d.levelIsComplete(Xe,c))return R=_[Xe],!0},Te=function(Xe){if(!R)for(var Ve=l+Xe;-4<=Ve&&Ve<=2&&!ke(Ve);Ve+=Xe);};Te(1),Te(-1);for(var ge=w.length-1;ge>=0;ge--){var Fe=w[ge];Fe.invalid&&ia(w,Fe)}}();var K=function(ke){var Te=(ke=ke||{}).after;if(function(){if(!E){E=Lr();for(var ke=0;ke<c.length;ke++)nn(E,c[ke].boundingBox())}}(),E.w*b*(E.h*b)>16e6)return null;var Fe=d.makeLayer(E,l);if(null!=Te){var Me=w.indexOf(Te)+1;w.splice(Me,0,Fe)}else(void 0===ke.insert||ke.insert)&&w.unshift(Fe);return Fe};if(d.skipping&&!y)return null;for(var J=null,ne=c.length/1,re=!y,ue=0;ue<c.length;ue++){var Ce=c[ue],Se=Ce._private.rscratch,de=Se.imgLayerCaches=Se.imgLayerCaches||{},Ee=de[l];if(Ee)J=Ee;else{if((!J||J.eles.length>=ne||!Oo(J.bb,Ce.boundingBox()))&&!(J=K({insert:!0,after:J})))return null;R||re?d.queueLayer(J,Ce):d.drawEleInLayer(J,Ce,l,o),J.eles.push(Ce),de[l]=J}}return R||(re?null:w)},$i.getEleLevelForLayerLevel=function(c,o){return c},$i.drawEleInLayer=function(c,o,l,d){var p=this.renderer,g=c.context,y=o.boundingBox();0===y.w||0===y.h||!o.visible()||(l=this.getEleLevelForLayerLevel(l,d),p.setImgSmoothing(g,!1),p.drawCachedElement(g,o,null,null,l,!0),p.setImgSmoothing(g,!0))},$i.levelIsComplete=function(c,o){var d=this.layersByLevel[c];if(!d||0===d.length)return!1;for(var f=0,p=0;p<d.length;p++){var g=d[p];if(g.reqs>0||g.invalid)return!1;f+=g.eles.length}return f===o.length},$i.validateLayersElesOrdering=function(c,o){var l=this.layersByLevel[c];if(l)for(var d=0;d<l.length;d++){for(var f=l[d],p=-1,g=0;g<o.length;g++)if(f.eles[0]===o[g]){p=g;break}if(p<0)this.invalidateLayer(f);else{var y=p;for(g=0;g<f.eles.length;g++)if(f.eles[g]!==o[y+g]){this.invalidateLayer(f);break}}}},$i.updateElementsInLayers=function(c,o){for(var d=Je(c[0]),f=0;f<c.length;f++)for(var p=d?null:c[f],g=d?c[f]:c[f].ele,y=g._private.rscratch,_=y.imgLayerCaches=y.imgLayerCaches||{},b=-4;b<=2;b++){var w=_[b];w&&(p&&this.getEleLevelForLayerLevel(w.level)!==p.level||o(w,g,p))}},$i.haveLayers=function(){for(var o=!1,l=-4;l<=2;l++){var d=this.layersByLevel[l];if(d&&d.length>0){o=!0;break}}return o},$i.invalidateElements=function(c){var o=this;0!==c.length&&(o.lastInvalidationTime=Si(),0!==c.length&&o.haveLayers()&&o.updateElementsInLayers(c,function(d,f,p){o.invalidateLayer(d)}))},$i.invalidateLayer=function(c){if(this.lastInvalidationTime=Si(),!c.invalid){var o=c.level,l=c.eles;ia(this.layersByLevel[o],c),c.elesQueue=[],c.invalid=!0,c.replacement&&(c.replacement.invalid=!0);for(var f=0;f<l.length;f++){var p=l[f]._private.rscratch.imgLayerCaches;p&&(p[o]=null)}}},$i.refineElementTextures=function(c){var o=this;o.updateElementsInLayers(c,function(d,f,p){var g=d.replacement;if(g||((g=d.replacement=o.makeLayer(d.bb,d.level)).replaces=d,g.eles=d.eles),!g.reqs)for(var y=0;y<g.eles.length;y++)o.queueLayer(g,g.eles[y])})},$i.enqueueElementRefinement=function(c){this.eleTxrDeqs.merge(c),this.scheduleElementRefinement()},$i.queueLayer=function(c,o){var d=this.layersQueue,f=c.elesQueue,p=f.hasId=f.hasId||{};if(!c.replacement){if(o){if(p[o.id()])return;f.push(o),p[o.id()]=!0}c.reqs?(c.reqs++,d.updateItem(c)):(c.reqs=1,d.push(c))}},$i.dequeue=function(c){for(var o=this,l=o.layersQueue,d=[],f=0;f<1&&0!==l.size();){var p=l.peek();if(p.replacement)l.pop();else if(p.replaces&&p!==p.replaces.replacement)l.pop();else if(p.invalid)l.pop();else{var g=p.elesQueue.shift();g&&(o.drawEleInLayer(p,g,p.level,c),f++),0===d.length&&d.push(!0),0===p.elesQueue.length&&(l.pop(),p.reqs=0,p.replaces&&o.applyLayerReplacement(p),o.requestRedraw())}}return d},$i.applyLayerReplacement=function(c){var l=this.layersByLevel[c.level],d=c.replaces,f=l.indexOf(d);if(!(f<0||d.invalid)){l[f]=c;for(var p=0;p<c.eles.length;p++){var g=c.eles[p]._private,y=g.imgLayerCaches=g.imgLayerCaches||{};y&&(y[c.level]=c)}this.requestRedraw()}},$i.requestRedraw=T.default(function(){var c=this.renderer;c.redrawHint("eles",!0),c.redrawHint("drag",!0),c.redraw()},100),$i.setupDequeueing=Sy_setupDequeueing({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(o,l){return o.dequeue(l)},onDeqd:$c,shouldRedraw:mo,priority:function(o){return o.renderer.beforeRenderPriorities.lyrTxrDeq}});var Ag,gf={};function Tg(c,o){for(var l=0;l<o.length;l++){var d=o[l];c.lineTo(d.x,d.y)}}function ux(c,o,l){for(var d,f=0;f<o.length;f++){var p=o[f];0===f&&(d=p),c.lineTo(p.x,p.y)}c.quadraticCurveTo(l.x,l.y,d.x,d.y)}function Vy(c,o,l){c.beginPath&&c.beginPath();for(var d=o,f=0;f<d.length;f++)c.lineTo((p=d[f]).x,p.y);var g=l,y=l[0];for(c.moveTo(y.x,y.y),f=1;f<g.length;f++){var p;c.lineTo((p=g[f]).x,p.y)}c.closePath&&c.closePath()}function Hy(c,o,l,d,f){c.beginPath&&c.beginPath(),c.arc(l,d,f,0,2*Math.PI,!1);var p=o,g=p[0];c.moveTo(g.x,g.y);for(var y=0;y<p.length;y++){var _=p[y];c.lineTo(_.x,_.y)}c.closePath&&c.closePath()}function zy(c,o,l,d){c.arc(o,l,d,0,2*Math.PI,!1)}gf.arrowShapeImpl=function(c){return(Ag||(Ag={polygon:Tg,"triangle-backcurve":ux,"triangle-tee":Vy,"circle-triangle":Hy,"triangle-cross":Vy,circle:zy}))[c]};var is={drawElement:function(c,o,l,d,f,p){o.isNode()?this.drawNode(c,o,l,d,f,p):this.drawEdge(c,o,l,d,f,p)},drawElementOverlay:function(c,o){o.isNode()?this.drawNodeOverlay(c,o):this.drawEdgeOverlay(c,o)},drawElementUnderlay:function(c,o){o.isNode()?this.drawNodeUnderlay(c,o):this.drawEdgeUnderlay(c,o)},drawCachedElementPortion:function(c,o,l,d,f,p,g,y){var _=this,b=l.getBoundingBox(o);if(0!==b.w&&0!==b.h){var w=l.getElement(o,b,d,f,p);if(null!=w){var E=y(_,o);if(0===E)return;var J,ne,re,ue,Ce,Ee,M=g(_,o),R=b.x1,P=b.y1,$=b.w,K=b.h;if(0!==M){var Se=l.getRotationPoint(o);c.translate(re=Se.x,ue=Se.y),c.rotate(M),(Ce=_.getImgSmoothing(c))||_.setImgSmoothing(c,!0);var de=l.getRotationOffset(o);J=de.x,ne=de.y}else J=R,ne=P;1!==E&&(c.globalAlpha=(Ee=c.globalAlpha)*E),c.drawImage(w.texture.canvas,w.x,0,w.width,w.height,J,ne,$,K),1!==E&&(c.globalAlpha=Ee),0!==M&&(c.rotate(-M),c.translate(-re,-ue),Ce||_.setImgSmoothing(c,!1))}else l.drawElement(c,o)}}},jy=function(){return 0},Uy=function(o,l){return o.getTextAngle(l,null)},dx=function(o,l){return o.getTextAngle(l,"source")},oM=function(o,l){return o.getTextAngle(l,"target")},mf=function(o,l){return l.effectiveOpacity()},kg=function(o,l){return l.pstyle("text-opacity").pfValue*l.effectiveOpacity()};is.drawCachedElement=function(c,o,l,d,f,p){var g=this,y=g.data,_=y.eleTxrCache,b=y.lblTxrCache,w=y.slbTxrCache,E=y.tlbTxrCache,M=o.boundingBox(),R=!0===p?_.reasons.highQuality:null;if(0!==M.w&&0!==M.h&&o.visible()&&(!d||Ys(M,d))){var P=o.isEdge(),$=o.element()._private.rscratch.badLine;g.drawElementUnderlay(c,o),g.drawCachedElementPortion(c,o,_,l,f,R,jy,mf),(!P||!$)&&g.drawCachedElementPortion(c,o,b,l,f,R,Uy,kg),P&&!$&&(g.drawCachedElementPortion(c,o,w,l,f,R,dx,kg),g.drawCachedElementPortion(c,o,E,l,f,R,oM,kg)),g.drawElementOverlay(c,o)}},is.drawElements=function(c,o){for(var d=0;d<o.length;d++)this.drawElement(c,o[d])},is.drawCachedElements=function(c,o,l,d){for(var p=0;p<o.length;p++)this.drawCachedElement(c,o[p],l,d)},is.drawCachedNodes=function(c,o,l,d){for(var p=0;p<o.length;p++){var g=o[p];g.isNode()&&this.drawCachedElement(c,g,l,d)}},is.drawLayeredElements=function(c,o,l,d){var p=this.data.lyrTxrCache.getLayers(o,l);if(p)for(var g=0;g<p.length;g++){var y=p[g],_=y.bb;0===_.w||0===_.h||c.drawImage(y.canvas,_.x1,_.y1,_.w,_.h)}else this.drawCachedElements(c,o,l,d)};var la={drawEdge:function(c,o,l){var d=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],f=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],p=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],g=this,y=o._private.rscratch;if((!p||o.visible())&&!y.badLine&&null!=y.allpts&&!isNaN(y.allpts[0])){var _;l&&c.translate(-(_=l).x1,-_.y1);var b=p?o.pstyle("opacity").value:1,w=p?o.pstyle("line-opacity").value:1,E=o.pstyle("curve-style").value,M=o.pstyle("line-style").value,R=o.pstyle("width").pfValue,P=o.pstyle("line-cap").value,$=b*w,K=b*w,J=function(){var ge=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$;"straight-triangle"===E?(g.eleStrokeStyle(c,o,ge),g.drawEdgeTrianglePath(o,c,y.allpts)):(c.lineWidth=R,c.lineCap=P,g.eleStrokeStyle(c,o,ge),g.drawEdgePath(o,c,y.allpts,M),c.lineCap="butt")},ne=function(){f&&g.drawEdgeOverlay(c,o)},re=function(){f&&g.drawEdgeUnderlay(c,o)},ue=function(){var ge=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K;g.drawArrowheads(c,o,ge)},Ce=function(){g.drawElementText(c,o,null,d)};c.lineJoin="round";var Se="yes"===o.pstyle("ghost").value;if(Se){var de=o.pstyle("ghost-offset-x").pfValue,Ee=o.pstyle("ghost-offset-y").pfValue,he=o.pstyle("ghost-opacity").value,ke=$*he;c.translate(de,Ee),J(ke),ue(ke),c.translate(-de,-Ee)}re(),J(),ue(),ne(),Ce(),l&&c.translate(_.x1,_.y1)}}},Ig=function(o){if(!["overlay","underlay"].includes(o))throw new Error("Invalid state");return function(l,d){if(d.visible()){var f=d.pstyle("".concat(o,"-opacity")).value;if(0!==f){var p=this,g=p.usePaths(),y=d._private.rscratch,b=2*d.pstyle("".concat(o,"-padding")).pfValue,w=d.pstyle("".concat(o,"-color")).value;l.lineWidth=b,l.lineCap="self"!==y.edgeType||g?"round":"butt",p.colorStrokeStyle(l,w[0],w[1],w[2],f),p.drawEdgePath(d,l,y.allpts,"solid")}}}};la.drawEdgeOverlay=Ig("overlay"),la.drawEdgeUnderlay=Ig("underlay"),la.drawEdgePath=function(c,o,l,d){var g,f=c._private.rscratch,p=o,y=!1,_=this.usePaths(),b=c.pstyle("line-dash-pattern").pfValue,w=c.pstyle("line-dash-offset").pfValue;if(_){var E=l.join("$");f.pathCacheKey&&f.pathCacheKey===E?(g=o=f.pathCache,y=!0):(g=o=new Path2D,f.pathCacheKey=E,f.pathCache=g)}if(p.setLineDash)switch(d){case"dotted":p.setLineDash([1,1]);break;case"dashed":p.setLineDash(b),p.lineDashOffset=w;break;case"solid":p.setLineDash([])}if(!y&&!f.badLine)switch(o.beginPath&&o.beginPath(),o.moveTo(l[0],l[1]),f.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var R=2;R+3<l.length;R+=4)o.quadraticCurveTo(l[R],l[R+1],l[R+2],l[R+3]);break;case"straight":case"segments":case"haystack":for(var P=2;P+1<l.length;P+=2)o.lineTo(l[P],l[P+1])}o=p,_?o.stroke(g):o.stroke(),o.setLineDash&&o.setLineDash([])},la.drawEdgeTrianglePath=function(c,o,l){o.fillStyle=o.strokeStyle;for(var d=c.pstyle("width").pfValue,f=0;f+1<l.length;f+=2){var p=[l[f+2]-l[f],l[f+3]-l[f+1]],g=Math.sqrt(p[0]*p[0]+p[1]*p[1]),y=[p[1]/g,-p[0]/g],_=[y[0]*d/2,y[1]*d/2];o.beginPath(),o.moveTo(l[f]-_[0],l[f+1]-_[1]),o.lineTo(l[f]+_[0],l[f+1]+_[1]),o.lineTo(l[f+2],l[f+3]),o.closePath(),o.fill()}},la.drawArrowheads=function(c,o,l){var d=o._private.rscratch,f="haystack"===d.edgeType;f||this.drawArrowhead(c,o,"source",d.arrowStartX,d.arrowStartY,d.srcArrowAngle,l),this.drawArrowhead(c,o,"mid-target",d.midX,d.midY,d.midtgtArrowAngle,l),this.drawArrowhead(c,o,"mid-source",d.midX,d.midY,d.midsrcArrowAngle,l),f||this.drawArrowhead(c,o,"target",d.arrowEndX,d.arrowEndY,d.tgtArrowAngle,l)},la.drawArrowhead=function(c,o,l,d,f,p,g){if(!(isNaN(d)||null==d||isNaN(f)||null==f||isNaN(p)||null==p)){var y=this,_=o.pstyle(l+"-arrow-shape").value;if("none"!==_){var b="hollow"===o.pstyle(l+"-arrow-fill").value?"both":"filled",w=o.pstyle(l+"-arrow-fill").value,E=o.pstyle("width").pfValue,M=o.pstyle("opacity").value;void 0===g&&(g=M);var R=c.globalCompositeOperation;(1!==g||"hollow"===w)&&(c.globalCompositeOperation="destination-out",y.colorFillStyle(c,255,255,255,1),y.colorStrokeStyle(c,255,255,255,1),y.drawArrowShape(o,c,b,E,_,d,f,p),c.globalCompositeOperation=R);var P=o.pstyle(l+"-arrow-color").value;y.colorFillStyle(c,P[0],P[1],P[2],g),y.colorStrokeStyle(c,P[0],P[1],P[2],g),y.drawArrowShape(o,c,w,E,_,d,f,p)}}},la.drawArrowShape=function(c,o,l,d,f,p,g,y){var E,_=this,b=this.usePaths()&&"triangle-cross"!==f,w=!1,M=o,R={x:p,y:g},P=c.pstyle("arrow-scale").value,$=this.getArrowWidth(d,P),K=_.arrowShapes[f];if(b){var J=_.arrowPathCache=_.arrowPathCache||[],ne=Aa(f),re=J[ne];null!=re?(E=o=re,w=!0):(E=o=new Path2D,J[ne]=E)}w||(o.beginPath&&o.beginPath(),b?K.draw(o,1,0,{x:0,y:0},1):K.draw(o,$,y,R,d),o.closePath&&o.closePath()),o=M,b&&(o.translate(p,g),o.rotate(y),o.scale($,$)),("filled"===l||"both"===l)&&(b?o.fill(E):o.fill()),("hollow"===l||"both"===l)&&(o.lineWidth=(K.matchEdgeWidth?d:1)/(b?$:1),o.lineJoin="miter",b?o.stroke(E):o.stroke()),b&&(o.scale(1/$,1/$),o.rotate(-y),o.translate(-p,-g))};var vf={safeDrawImage:function(c,o,l,d,f,p,g,y,_,b){if(!(f<=0||p<=0||_<=0||b<=0))try{c.drawImage(o,l,d,f,p,g,y,_,b)}catch(w){ur(w)}},drawInscribedImage:function(c,o,l,d,f){var p=this,g=l.position(),y=g.x,_=g.y,b=l.cy().style(),w=b.getIndexedStyle.bind(b),E=w(l,"background-fit","value",d),M=w(l,"background-repeat","value",d),R=l.width(),P=l.height(),$=2*l.padding(),K=R+("inner"===w(l,"background-width-relative-to","value",d)?0:$),J=P+("inner"===w(l,"background-height-relative-to","value",d)?0:$),ne=l._private.rscratch,ue="node"===w(l,"background-clip","value",d),Ce=w(l,"background-image-opacity","value",d)*f,Se=w(l,"background-image-smoothing","value",d),de=o.width||o.cachedW,Ee=o.height||o.cachedH;(null==de||null==Ee)&&(document.body.appendChild(o),de=o.cachedW=o.width||o.offsetWidth,Ee=o.cachedH=o.height||o.offsetHeight,document.body.removeChild(o));var he=de,ke=Ee;if("auto"!==w(l,"background-width","value",d)&&(he="%"===w(l,"background-width","units",d)?w(l,"background-width","pfValue",d)*K:w(l,"background-width","pfValue",d)),"auto"!==w(l,"background-height","value",d)&&(ke="%"===w(l,"background-height","units",d)?w(l,"background-height","pfValue",d)*J:w(l,"background-height","pfValue",d)),0!==he&&0!==ke){if("contain"===E)he*=Te=Math.min(K/he,J/ke),ke*=Te;else if("cover"===E){var Te;he*=Te=Math.max(K/he,J/ke),ke*=Te}var ge=y-K/2,Fe=w(l,"background-position-x","units",d),Me=w(l,"background-position-x","pfValue",d);ge+="%"===Fe?(K-he)*Me:Me;var Xe=w(l,"background-offset-x","units",d),Ve=w(l,"background-offset-x","pfValue",d);ge+="%"===Xe?(K-he)*Ve:Ve;var je=_-J/2,Qe=w(l,"background-position-y","units",d),it=w(l,"background-position-y","pfValue",d);je+="%"===Qe?(J-ke)*it:it;var ct=w(l,"background-offset-y","units",d),rt=w(l,"background-offset-y","pfValue",d);je+="%"===ct?(J-ke)*rt:rt,ne.pathCache&&(ge-=y,je-=_,y=0,_=0);var tt=c.globalAlpha;c.globalAlpha=Ce;var wt=p.getImgSmoothing(c),Dt=!1;if("no"===Se&&wt?(p.setImgSmoothing(c,!1),Dt=!0):"yes"===Se&&!wt&&(p.setImgSmoothing(c,!0),Dt=!0),"no-repeat"===M)ue&&(c.save(),ne.pathCache?c.clip(ne.pathCache):(p.nodeShapes[p.getNodeShape(l)].draw(c,y,_,K,J),c.clip())),p.safeDrawImage(c,o,0,0,de,Ee,ge,je,he,ke),ue&&c.restore();else{var yt=c.createPattern(o,M);c.fillStyle=yt,p.nodeShapes[p.getNodeShape(l)].draw(c,y,_,K,J),c.translate(ge,je),c.fill(),c.translate(-ge,-je)}c.globalAlpha=tt,Dt&&p.setImgSmoothing(c,wt)}}},Ua={};function Gy(c,o,l,d,f){var p=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5;c.beginPath(),c.moveTo(o+p,l),c.lineTo(o+d-p,l),c.quadraticCurveTo(o+d,l,o+d,l+p),c.lineTo(o+d,l+f-p),c.quadraticCurveTo(o+d,l+f,o+d-p,l+f),c.lineTo(o+p,l+f),c.quadraticCurveTo(o,l+f,o,l+f-p),c.lineTo(o,l+p),c.quadraticCurveTo(o,l,o+p,l),c.closePath(),c.fill()}Ua.eleTextBiggerThanMin=function(c,o){if(!o){var l=c.cy().zoom(),d=this.getPixelRatio(),f=Math.ceil(Jr(l*d));o=Math.pow(2,f)}return!(c.pstyle("font-size").pfValue*o<c.pstyle("min-zoomed-font-size").pfValue)},Ua.drawElementText=function(c,o,l,d,f){var p=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],g=this;if(null==d){if(p&&!g.eleTextBiggerThanMin(o))return}else if(!1===d)return;if(o.isNode()){var y=o.pstyle("label");if(!y||!y.value)return;var _=g.getLabelJustification(o);c.textAlign=_,c.textBaseline="bottom"}else{var b=o.element()._private.rscratch.badLine,w=o.pstyle("label"),E=o.pstyle("source-label"),M=o.pstyle("target-label");if(b||(!w||!w.value)&&(!E||!E.value)&&(!M||!M.value))return;c.textAlign="center",c.textBaseline="bottom"}var P,R=!l;l&&c.translate(-(P=l).x1,-P.y1),null==f?(g.drawText(c,o,null,R,p),o.isEdge()&&(g.drawText(c,o,"source",R,p),g.drawText(c,o,"target",R,p))):g.drawText(c,o,f,R,p),l&&c.translate(P.x1,P.y1)},Ua.getFontCache=function(c){var o;this.fontCaches=this.fontCaches||[];for(var l=0;l<this.fontCaches.length;l++)if((o=this.fontCaches[l]).context===c)return o;return this.fontCaches.push(o={context:c}),o},Ua.setupTextStyle=function(c,o){var l=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],d=o.pstyle("font-style").strValue,f=o.pstyle("font-size").pfValue+"px",p=o.pstyle("font-family").strValue,g=o.pstyle("font-weight").strValue,y=l?o.effectiveOpacity()*o.pstyle("text-opacity").value:1,_=o.pstyle("text-outline-opacity").value*y,b=o.pstyle("color").value,w=o.pstyle("text-outline-color").value;c.font=d+" "+g+" "+f+" "+p,c.lineJoin="round",this.colorFillStyle(c,b[0],b[1],b[2],y),this.colorStrokeStyle(c,w[0],w[1],w[2],_)},Ua.getTextAngle=function(c,o){var f=c._private.rscratch,g=c.pstyle((o?o+"-":"")+"text-rotation"),y=vo(f,"labelAngle",o);return"autorotate"===g.strValue?c.isEdge()?y:0:"none"===g.strValue?0:g.pfValue},Ua.drawText=function(c,o,l){var d=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],f=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],p=o._private,g=p.rscratch,y=f?o.effectiveOpacity():1;if(!f||0!==y&&0!==o.pstyle("text-opacity").value){"main"===l&&(l=null);var w,E,_=vo(g,"labelX",l),b=vo(g,"labelY",l),M=this.getLabelText(o,l);if(null!=M&&""!==M&&!isNaN(_)&&!isNaN(b)){this.setupTextStyle(c,o,f);var Ce,R=l?l+"-":"",P=vo(g,"labelWidth",l),$=vo(g,"labelHeight",l),K=o.pstyle(R+"text-margin-x").pfValue,J=o.pstyle(R+"text-margin-y").pfValue,ne=o.isEdge(),re=o.pstyle("text-halign").value,ue=o.pstyle("text-valign").value;switch(ne&&(re="center",ue="center"),_+=K,b+=J,0!==(Ce=d?this.getTextAngle(o,l):0)&&(c.translate(w=_,E=b),c.rotate(Ce),_=0,b=0),ue){case"top":break;case"center":b+=$/2;break;case"bottom":b+=$}var Se=o.pstyle("text-background-opacity").value,de=o.pstyle("text-border-opacity").value,Ee=o.pstyle("text-border-width").pfValue,he=o.pstyle("text-background-padding").pfValue;if(Se>0||Ee>0&&de>0){var ke=_-he;switch(re){case"left":ke-=P;break;case"center":ke-=P/2}var Te=b-$-he,ge=P+2*he,Fe=$+2*he;if(Se>0){var Me=c.fillStyle,Xe=o.pstyle("text-background-color").value;c.fillStyle="rgba("+Xe[0]+","+Xe[1]+","+Xe[2]+","+Se*y+")";var Ve=o.pstyle("text-background-shape").strValue;0===Ve.indexOf("round")?Gy(c,ke,Te,ge,Fe,2):c.fillRect(ke,Te,ge,Fe),c.fillStyle=Me}if(Ee>0&&de>0){var je=c.strokeStyle,Qe=c.lineWidth,it=o.pstyle("text-border-color").value,ct=o.pstyle("text-border-style").value;if(c.strokeStyle="rgba("+it[0]+","+it[1]+","+it[2]+","+de*y+")",c.lineWidth=Ee,c.setLineDash)switch(ct){case"dotted":c.setLineDash([1,1]);break;case"dashed":c.setLineDash([4,2]);break;case"double":c.lineWidth=Ee/4,c.setLineDash([]);break;case"solid":c.setLineDash([])}if(c.strokeRect(ke,Te,ge,Fe),"double"===ct){var rt=Ee/2;c.strokeRect(ke+rt,Te+rt,ge-2*rt,Fe-2*rt)}c.setLineDash&&c.setLineDash([]),c.lineWidth=Qe,c.strokeStyle=je}}var tt=2*o.pstyle("text-outline-width").pfValue;if(tt>0&&(c.lineWidth=tt),"wrap"===o.pstyle("text-wrap").value){var wt=vo(g,"labelWrapCachedLines",l),Dt=vo(g,"labelLineHeight",l),yt=P/2,mt=this.getLabelJustification(o);switch("auto"===mt||("left"===re?"left"===mt?_+=-P:"center"===mt&&(_+=-yt):"center"===re?"left"===mt?_+=-yt:"right"===mt&&(_+=yt):"right"===re&&("center"===mt?_+=yt:"right"===mt&&(_+=P))),ue){case"top":case"center":case"bottom":b-=(wt.length-1)*Dt}for(var Ze=0;Ze<wt.length;Ze++)tt>0&&c.strokeText(wt[Ze],_,b),c.fillText(wt[Ze],_,b),b+=Dt}else tt>0&&c.strokeText(M,_,b),c.fillText(M,_,b);0!==Ce&&(c.rotate(-Ce),c.translate(-w,-E))}}};var Ga={drawNode:function(c,o,l){var y,_,d=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],f=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],p=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],g=this,b=o._private,w=b.rscratch,E=o.position();if(pe(E.x)&&pe(E.y)&&(!p||o.visible())){var P,J,M=p?o.effectiveOpacity():1,R=g.usePaths(),$=!1,K=o.padding();y=o.width()+2*K,_=o.height()+2*K,l&&c.translate(-(J=l).x1,-J.y1);for(var ne=o.pstyle("background-image"),re=ne.value,ue=new Array(re.length),Ce=new Array(re.length),Se=0,de=0;de<re.length;de++){var Ee=re[de],he=ue[de]=null!=Ee&&"none"!==Ee;if(he){var ke=o.cy().style().getIndexedStyle(o,"background-image-crossorigin","value",de);Se++,Ce[de]=g.getCachedImage(Ee,ke,function(){b.backgroundTimestamp=Date.now(),o.emitAndNotify("background")})}}var Te=o.pstyle("background-blacken").value,ge=o.pstyle("border-width").pfValue,Fe=o.pstyle("background-opacity").value*M,Me=o.pstyle("border-color").value,Xe=o.pstyle("border-style").value,Ve=o.pstyle("border-opacity").value*M;c.lineJoin="miter";var je=function(){var jt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe;g.eleFillStyle(c,o,jt)},Qe=function(){var jt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve;g.colorStrokeStyle(c,Me[0],Me[1],Me[2],jt)},it=o.pstyle("shape").strValue,ct=o.pstyle("shape-polygon-points").pfValue;if(R){c.translate(E.x,E.y);var rt=g.nodePathCache=g.nodePathCache||[],tt=Ph("polygon"===it?it+","+ct.join(","):it,""+_,""+y),wt=rt[tt];null!=wt?($=!0,w.pathCache=P=wt):(P=new Path2D,rt[tt]=w.pathCache=P)}var Dt=function(){if(!$){var jt=E;R&&(jt={x:0,y:0}),g.nodeShapes[g.getNodeShape(o)].draw(P||c,jt.x,jt.y,y,_)}R?c.fill(P):c.fill()},yt=function(){for(var jt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,cn=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Hn=b.backgrounding,An=0,mn=0;mn<Ce.length;mn++){var Rt=o.cy().style().getIndexedStyle(o,"background-image-containment","value",mn);cn&&"over"===Rt||!cn&&"inside"===Rt?An++:ue[mn]&&Ce[mn].complete&&!Ce[mn].error&&(An++,g.drawInscribedImage(c,Ce[mn],o,mn,jt))}b.backgrounding=An!==Se,Hn!==b.backgrounding&&o.updateStyle(!1)},mt=function(){var jt=arguments.length>0&&void 0!==arguments[0]&&arguments[0],cn=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M;g.hasPie(o)&&(g.drawPie(c,o,cn),jt&&(R||g.nodeShapes[g.getNodeShape(o)].draw(c,E.x,E.y,y,_)))},Ze=function(){var jt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,cn=(Te>0?Te:-Te)*jt,Hn=Te>0?0:255;0!==Te&&(g.colorFillStyle(c,Hn,Hn,Hn,cn),R?c.fill(P):c.fill())},xt=function(){if(ge>0){if(c.lineWidth=ge,c.lineCap="butt",c.setLineDash)switch(Xe){case"dotted":c.setLineDash([1,1]);break;case"dashed":c.setLineDash([4,2]);break;case"solid":case"double":c.setLineDash([])}if(R?c.stroke(P):c.stroke(),"double"===Xe){c.lineWidth=ge/3;var jt=c.globalCompositeOperation;c.globalCompositeOperation="destination-out",R?c.stroke(P):c.stroke(),c.globalCompositeOperation=jt}c.setLineDash&&c.setLineDash([])}},Mt=function(){f&&g.drawNodeOverlay(c,o,E,y,_)},Lt=function(){f&&g.drawNodeUnderlay(c,o,E,y,_)},Vt=function(){g.drawElementText(c,o,null,d)},xn="yes"===o.pstyle("ghost").value;if(xn){var kn=o.pstyle("ghost-offset-x").pfValue,Ht=o.pstyle("ghost-offset-y").pfValue,Ft=o.pstyle("ghost-opacity").value,pn=Ft*M;c.translate(kn,Ht),je(Ft*Fe),Dt(),yt(pn,!0),Qe(Ft*Ve),xt(),mt(0!==Te||0!==ge),yt(pn,!1),Ze(pn),c.translate(-kn,-Ht)}R&&c.translate(-E.x,-E.y),Lt(),R&&c.translate(E.x,E.y),je(),Dt(),yt(M,!0),Qe(),xt(),mt(0!==Te||0!==ge),yt(M,!1),Ze(),R&&c.translate(-E.x,-E.y),Vt(),Mt(),l&&c.translate(J.x1,J.y1)}}},Gd=function(o){if(!["overlay","underlay"].includes(o))throw new Error("Invalid state");return function(l,d,f,p,g){if(d.visible()){var _=d.pstyle("".concat(o,"-padding")).pfValue,b=d.pstyle("".concat(o,"-opacity")).value,w=d.pstyle("".concat(o,"-color")).value,E=d.pstyle("".concat(o,"-shape")).value;if(b>0){if(f=f||d.position(),null==p||null==g){var M=d.padding();p=d.width()+2*M,g=d.height()+2*M}this.colorFillStyle(l,w[0],w[1],w[2],b),this.nodeShapes[E].draw(l,f.x,f.y,p+2*_,g+2*_),l.fill()}}}};Ga.drawNodeOverlay=Gd("overlay"),Ga.drawNodeUnderlay=Gd("underlay"),Ga.hasPie=function(c){return(c=c[0])._private.hasPie},Ga.drawPie=function(c,o,l,d){o=o[0],d=d||o.position();var f=o.cy().style(),p=o.pstyle("pie-size"),g=d.x,y=d.y,_=o.width(),b=o.height(),w=Math.min(_,b)/2,E=0;this.usePaths()&&(g=0,y=0),"%"===p.units?w*=p.pfValue:void 0!==p.pfValue&&(w=p.pfValue/2);for(var R=1;R<=f.pieBackgroundN;R++){var P=o.pstyle("pie-"+R+"-background-size").value,$=o.pstyle("pie-"+R+"-background-color").value,K=o.pstyle("pie-"+R+"-background-opacity").value*l,J=P/100;J+E>1&&(J=1-E);var ne=1.5*Math.PI+2*Math.PI*E,ue=ne+2*Math.PI*J;0===P||E>=1||E+J>1||(c.beginPath(),c.moveTo(g,y),c.arc(g,y,w,ne,ue),c.closePath(),this.colorFillStyle(c,$[0],$[1],$[2],K),c.fill(),E+=J)}};for(var Fs={getPixelRatio:function(){var c=this.data.contexts[0];return null!=this.forcedPixelRatio?this.forcedPixelRatio:(window.devicePixelRatio||1)/(c.backingStorePixelRatio||c.webkitBackingStorePixelRatio||c.mozBackingStorePixelRatio||c.msBackingStorePixelRatio||c.oBackingStorePixelRatio||c.backingStorePixelRatio||1)},paintCache:function(c){for(var d,o=this.paintCaches=this.paintCaches||[],l=!0,f=0;f<o.length;f++)if((d=o[f]).context===c){l=!1;break}return l&&o.push(d={context:c}),d},createGradientStyleFor:function(c,o,l,d,f){var p,g=this.usePaths(),y=l.pstyle(o+"-gradient-stop-colors").value,_=l.pstyle(o+"-gradient-stop-positions").pfValue;if("radial-gradient"===d)if(l.isEdge()){var b=l.sourceEndpoint(),w=l.targetEndpoint(),E=l.midpoint(),M=Or(b,E),R=Or(w,E);p=c.createRadialGradient(E.x,E.y,0,E.x,E.y,Math.max(M,R))}else{var P=g?{x:0,y:0}:l.position(),$=l.paddedWidth(),K=l.paddedHeight();p=c.createRadialGradient(P.x,P.y,0,P.x,P.y,Math.max($,K))}else if(l.isEdge()){var J=l.sourceEndpoint(),ne=l.targetEndpoint();p=c.createLinearGradient(J.x,J.y,ne.x,ne.y)}else{var re=g?{x:0,y:0}:l.position(),Se=l.paddedWidth()/2,de=l.paddedHeight()/2;switch(l.pstyle("background-gradient-direction").value){case"to-bottom":p=c.createLinearGradient(re.x,re.y-de,re.x,re.y+de);break;case"to-top":p=c.createLinearGradient(re.x,re.y+de,re.x,re.y-de);break;case"to-left":p=c.createLinearGradient(re.x+Se,re.y,re.x-Se,re.y);break;case"to-right":p=c.createLinearGradient(re.x-Se,re.y,re.x+Se,re.y);break;case"to-bottom-right":case"to-right-bottom":p=c.createLinearGradient(re.x-Se,re.y-de,re.x+Se,re.y+de);break;case"to-top-right":case"to-right-top":p=c.createLinearGradient(re.x-Se,re.y+de,re.x+Se,re.y-de);break;case"to-bottom-left":case"to-left-bottom":p=c.createLinearGradient(re.x+Se,re.y-de,re.x-Se,re.y+de);break;case"to-top-left":case"to-left-top":p=c.createLinearGradient(re.x+Se,re.y+de,re.x-Se,re.y-de)}}if(!p)return null;for(var he=_.length===y.length,ke=y.length,Te=0;Te<ke;Te++)p.addColorStop(he?_[Te]:Te/(ke-1),"rgba("+y[Te][0]+","+y[Te][1]+","+y[Te][2]+","+f+")");return p},gradientFillStyle:function(c,o,l,d){var f=this.createGradientStyleFor(c,"background",o,l,d);if(!f)return null;c.fillStyle=f},colorFillStyle:function(c,o,l,d,f){c.fillStyle="rgba("+o+","+l+","+d+","+f+")"},eleFillStyle:function(c,o,l){var d=o.pstyle("background-fill").value;if("linear-gradient"===d||"radial-gradient"===d)this.gradientFillStyle(c,o,d,l);else{var f=o.pstyle("background-color").value;this.colorFillStyle(c,f[0],f[1],f[2],l)}},gradientStrokeStyle:function(c,o,l,d){var f=this.createGradientStyleFor(c,"line",o,l,d);if(!f)return null;c.strokeStyle=f},colorStrokeStyle:function(c,o,l,d,f){c.strokeStyle="rgba("+o+","+l+","+d+","+f+")"},eleStrokeStyle:function(c,o,l){var d=o.pstyle("line-fill").value;if("linear-gradient"===d||"radial-gradient"===d)this.gradientStrokeStyle(c,o,d,l);else{var f=o.pstyle("line-color").value;this.colorStrokeStyle(c,f[0],f[1],f[2],l)}},matchCanvasSize:function(c){var o=this,l=o.data,d=o.findContainerClientCoords(),f=d[2],p=d[3],g=o.getPixelRatio();(c===o.data.bufferCanvases[o.MOTIONBLUR_BUFFER_NODE]||c===o.data.bufferCanvases[o.MOTIONBLUR_BUFFER_DRAG])&&(g=o.motionBlurPxRatio);var w,_=f*g,b=p*g;if(_!==o.canvasWidth||b!==o.canvasHeight){o.fontCaches=null;var E=l.canvasContainer;E.style.width=f+"px",E.style.height=p+"px";for(var M=0;M<o.CANVAS_LAYERS;M++)(w=l.canvases[M]).width=_,w.height=b,w.style.width=f+"px",w.style.height=p+"px";for(M=0;M<o.BUFFER_COUNT;M++)(w=l.bufferCanvases[M]).width=_,w.height=b,w.style.width=f+"px",w.style.height=p+"px";o.textureMult=1,g<=1&&(w=l.bufferCanvases[o.TEXTURE_BUFFER],o.textureMult=2,w.width=_*o.textureMult,w.height=b*o.textureMult),o.canvasWidth=_,o.canvasHeight=b}},renderTo:function(c,o,l,d){this.render({forcedContext:c,forcedZoom:o,forcedPan:l,drawAllLayers:!0,forcedPxRatio:d})},render:function(c){var o=(c=c||sd()).forcedContext,l=c.drawAllLayers,d=c.drawOnlyNodeLayer,f=c.forcedZoom,p=c.forcedPan,g=this,y=void 0===c.forcedPxRatio?this.getPixelRatio():c.forcedPxRatio,_=g.cy,b=g.data,w=b.canvasNeedsRedraw,E=g.textureOnViewport&&!o&&(g.pinching||g.hoverData.dragging||g.swipePanning||g.data.wheelZooming),M=void 0!==c.motionBlur?c.motionBlur:g.motionBlur,R=g.motionBlurPxRatio,P=_.hasCompoundNodes(),$=g.hoverData.draggingEles,J=M=M&&!o&&g.motionBlurEnabled&&!(g.hoverData.selecting||g.touchData.selecting);o||(g.prevPxRatio!==y&&(g.invalidateContainerClientCoordsCache(),g.matchCanvasSize(g.container),g.redrawHint("eles",!0),g.redrawHint("drag",!0)),g.prevPxRatio=y),!o&&g.motionBlurTimeout&&clearTimeout(g.motionBlurTimeout),M&&(null==g.mbFrames&&(g.mbFrames=0),g.mbFrames++,g.mbFrames<3&&(J=!1),g.mbFrames>g.minMbLowQualFrames&&(g.motionBlurPxRatio=g.mbPxRBlurry)),g.clearingMotionBlur&&(g.motionBlurPxRatio=1),g.textureDrawLastFrame&&!E&&(w[g.NODE]=!0,w[g.SELECT_BOX]=!0);var ne=_.style(),re=_.zoom(),ue=void 0!==f?f:re,Ce=_.pan(),Se={x:Ce.x,y:Ce.y},de={zoom:re,pan:{x:Ce.x,y:Ce.y}},Ee=g.prevViewport;!(void 0===Ee||de.zoom!==Ee.zoom||de.pan.x!==Ee.pan.x||de.pan.y!==Ee.pan.y)&&!($&&!P)&&(g.motionBlurPxRatio=1),p&&(Se=p),ue*=y,Se.x*=y,Se.y*=y;var ke=g.getCachedZSortedEles();function Te(Ht,Ft,pn,en,jt){var cn=Ht.globalCompositeOperation;Ht.globalCompositeOperation="destination-out",g.colorFillStyle(Ht,255,255,255,g.motionBlurTransparency),Ht.fillRect(Ft,pn,en,jt),Ht.globalCompositeOperation=cn}function ge(Ht,Ft){var pn,en,jt,cn;g.clearingMotionBlur||Ht!==b.bufferContexts[g.MOTIONBLUR_BUFFER_NODE]&&Ht!==b.bufferContexts[g.MOTIONBLUR_BUFFER_DRAG]?(pn=Se,en=ue,jt=g.canvasWidth,cn=g.canvasHeight):(pn={x:Ce.x*R,y:Ce.y*R},en=re*R,jt=g.canvasWidth*R,cn=g.canvasHeight*R),Ht.setTransform(1,0,0,1,0,0),"motionBlur"===Ft?Te(Ht,0,0,jt,cn):!o&&(void 0===Ft||Ft)&&Ht.clearRect(0,0,jt,cn),l||(Ht.translate(pn.x,pn.y),Ht.scale(en,en)),p&&Ht.translate(p.x,p.y),f&&Ht.scale(f,f)}if(E||(g.textureDrawLastFrame=!1),E){if(g.textureDrawLastFrame=!0,!g.textureCache){g.textureCache={},g.textureCache.bb=_.mutableElements().boundingBox(),g.textureCache.texture=g.data.bufferCanvases[g.TEXTURE_BUFFER];var Fe=g.data.bufferContexts[g.TEXTURE_BUFFER];Fe.setTransform(1,0,0,1,0,0),Fe.clearRect(0,0,g.canvasWidth*g.textureMult,g.canvasHeight*g.textureMult),g.render({forcedContext:Fe,drawOnlyNodeLayer:!0,forcedPxRatio:y*g.textureMult}),(de=g.textureCache.viewport={zoom:_.zoom(),pan:_.pan(),width:g.canvasWidth,height:g.canvasHeight}).mpan={x:(0-de.pan.x)/de.zoom,y:(0-de.pan.y)/de.zoom}}w[g.DRAG]=!1,w[g.NODE]=!1;var Xe=g.textureCache.texture;de=g.textureCache.viewport,(Me=b.contexts[g.NODE]).setTransform(1,0,0,1,0,0),M?Te(Me,0,0,de.width,de.height):Me.clearRect(0,0,de.width,de.height);var Ve=ne.core("outside-texture-bg-color").value,je=ne.core("outside-texture-bg-opacity").value;g.colorFillStyle(Me,Ve[0],Ve[1],Ve[2],je),Me.fillRect(0,0,de.width,de.height),re=_.zoom(),ge(Me,!1),Me.clearRect(de.mpan.x,de.mpan.y,de.width/de.zoom/y,de.height/de.zoom/y),Me.drawImage(Xe,de.mpan.x,de.mpan.y,de.width/de.zoom/y,de.height/de.zoom/y)}else g.textureOnViewport&&!o&&(g.textureCache=null);var Qe=_.extent(),it=g.pinching||g.hoverData.dragging||g.swipePanning||g.data.wheelZooming||g.hoverData.draggingEles||g.cy.animated(),ct=g.hideEdgesOnViewport&&it,rt=[];if(rt[g.NODE]=!w[g.NODE]&&M&&!g.clearedForMotionBlur[g.NODE]||g.clearingMotionBlur,rt[g.NODE]&&(g.clearedForMotionBlur[g.NODE]=!0),rt[g.DRAG]=!w[g.DRAG]&&M&&!g.clearedForMotionBlur[g.DRAG]||g.clearingMotionBlur,rt[g.DRAG]&&(g.clearedForMotionBlur[g.DRAG]=!0),w[g.NODE]||l||d||rt[g.NODE]){var tt=M&&!rt[g.NODE]&&1!==R;ge(Me=o||(tt?g.data.bufferContexts[g.MOTIONBLUR_BUFFER_NODE]:b.contexts[g.NODE]),M&&!tt?"motionBlur":void 0),ct?g.drawCachedNodes(Me,ke.nondrag,y,Qe):g.drawLayeredElements(Me,ke.nondrag,y,Qe),g.debug&&g.drawDebugPoints(Me,ke.nondrag),!l&&!M&&(w[g.NODE]=!1)}if(!d&&(w[g.DRAG]||l||rt[g.DRAG])&&(tt=M&&!rt[g.DRAG]&&1!==R,ge(Me=o||(tt?g.data.bufferContexts[g.MOTIONBLUR_BUFFER_DRAG]:b.contexts[g.DRAG]),M&&!tt?"motionBlur":void 0),ct?g.drawCachedNodes(Me,ke.drag,y,Qe):g.drawCachedElements(Me,ke.drag,y,Qe),g.debug&&g.drawDebugPoints(Me,ke.drag),!l&&!M&&(w[g.DRAG]=!1)),g.showFps||!d&&w[g.SELECT_BOX]&&!l){var Me;if(ge(Me=o||b.contexts[g.SELECT_BOX]),1==g.selection[4]&&(g.hoverData.selecting||g.touchData.selecting)){re=g.cy.zoom();var Dt=ne.core("selection-box-border-width").value/re;Me.lineWidth=Dt,Me.fillStyle="rgba("+ne.core("selection-box-color").value[0]+","+ne.core("selection-box-color").value[1]+","+ne.core("selection-box-color").value[2]+","+ne.core("selection-box-opacity").value+")",Me.fillRect(g.selection[0],g.selection[1],g.selection[2]-g.selection[0],g.selection[3]-g.selection[1]),Dt>0&&(Me.strokeStyle="rgba("+ne.core("selection-box-border-color").value[0]+","+ne.core("selection-box-border-color").value[1]+","+ne.core("selection-box-border-color").value[2]+","+ne.core("selection-box-opacity").value+")",Me.strokeRect(g.selection[0],g.selection[1],g.selection[2]-g.selection[0],g.selection[3]-g.selection[1]))}if(b.bgActivePosistion&&!g.hoverData.selecting){re=g.cy.zoom();var yt=b.bgActivePosistion;Me.fillStyle="rgba("+ne.core("active-bg-color").value[0]+","+ne.core("active-bg-color").value[1]+","+ne.core("active-bg-color").value[2]+","+ne.core("active-bg-opacity").value+")",Me.beginPath(),Me.arc(yt.x,yt.y,ne.core("active-bg-size").pfValue/re,0,2*Math.PI),Me.fill()}var mt=g.lastRedrawTime;if(g.showFps&&mt){mt=Math.round(mt);var Ze=Math.round(1e3/mt);Me.setTransform(1,0,0,1,0,0),Me.fillStyle="rgba(255, 0, 0, 0.75)",Me.strokeStyle="rgba(255, 0, 0, 0.75)",Me.lineWidth=1,Me.fillText("1 frame = "+mt+" ms = "+Ze+" fps",0,20),Me.strokeRect(0,30,250,20),Me.fillRect(0,30,250*Math.min(Ze/60,1),20)}l||(w[g.SELECT_BOX]=!1)}if(M&&1!==R){var Vt=b.contexts[g.DRAG],xn=g.data.bufferCanvases[g.MOTIONBLUR_BUFFER_DRAG],kn=function(Ft,pn,en){Ft.setTransform(1,0,0,1,0,0),en||!J?Ft.clearRect(0,0,g.canvasWidth,g.canvasHeight):Te(Ft,0,0,g.canvasWidth,g.canvasHeight),Ft.drawImage(pn,0,0,g.canvasWidth*R,g.canvasHeight*R,0,0,g.canvasWidth,g.canvasHeight)};(w[g.NODE]||rt[g.NODE])&&(kn(b.contexts[g.NODE],g.data.bufferCanvases[g.MOTIONBLUR_BUFFER_NODE],rt[g.NODE]),w[g.NODE]=!1),(w[g.DRAG]||rt[g.DRAG])&&(kn(Vt,xn,rt[g.DRAG]),w[g.DRAG]=!1)}g.prevViewport=de,g.clearingMotionBlur&&(g.clearingMotionBlur=!1,g.motionBlurCleared=!0,g.motionBlur=!0),M&&(g.motionBlurTimeout=setTimeout(function(){g.motionBlurTimeout=null,g.clearedForMotionBlur[g.NODE]=!1,g.clearedForMotionBlur[g.DRAG]=!1,g.motionBlur=!1,g.clearingMotionBlur=!E,g.mbFrames=0,w[g.NODE]=!0,w[g.DRAG]=!0,g.redraw()},100)),o||_.emit("render")}},ca={drawPolygonPath:function(c,o,l,d,f,p){var g=d/2,y=f/2;c.beginPath&&c.beginPath(),c.moveTo(o+g*p[0],l+y*p[1]);for(var _=1;_<p.length/2;_++)c.lineTo(o+g*p[2*_],l+y*p[2*_+1]);c.closePath()},drawRoundPolygonPath:function(c,o,l,d,f,p){var g=d/2,y=f/2,_=St(d,f);c.beginPath&&c.beginPath();for(var b=0;b<p.length/4;b++){var E,w;w=0===b?p.length-2:4*b-2,E=4*b+2;var M=o+g*p[4*b],R=l+y*p[4*b+1],$=_/Math.tan(Math.acos(-p[w]*p[E]-p[w+1]*p[E+1])/2),K=M-$*p[w],J=R-$*p[w+1],ne=M+$*p[E],re=R+$*p[E+1];0===b?c.moveTo(K,J):c.lineTo(K,J),c.arcTo(M,R,ne,re,_)}c.closePath()},drawRoundRectanglePath:function(c,o,l,d,f){var p=d/2,g=f/2,y=dd(d,f);c.beginPath&&c.beginPath(),c.moveTo(o,l-g),c.arcTo(o+p,l-g,o+p,l,y),c.arcTo(o+p,l+g,o,l+g,y),c.arcTo(o-p,l+g,o-p,l,y),c.arcTo(o-p,l-g,o,l-g,y),c.lineTo(o,l-g),c.closePath()},drawBottomRoundRectanglePath:function(c,o,l,d,f){var p=d/2,g=f/2,y=dd(d,f);c.beginPath&&c.beginPath(),c.moveTo(o,l-g),c.lineTo(o+p,l-g),c.lineTo(o+p,l),c.arcTo(o+p,l+g,o,l+g,y),c.arcTo(o-p,l+g,o-p,l,y),c.lineTo(o-p,l-g),c.lineTo(o,l-g),c.closePath()},drawCutRectanglePath:function(c,o,l,d,f){var p=d/2,g=f/2;c.beginPath&&c.beginPath(),c.moveTo(o-p+8,l-g),c.lineTo(o+p-8,l-g),c.lineTo(o+p,l-g+8),c.lineTo(o+p,l+g-8),c.lineTo(o+p-8,l+g),c.lineTo(o-p+8,l+g),c.lineTo(o-p,l+g-8),c.lineTo(o-p,l-g+8),c.closePath()},drawBarrelPath:function(c,o,l,d,f){var p=d/2,g=f/2,y=o-p,_=o+p,b=l-g,w=l+g,E=Xc(d,f),M=E.widthOffset,R=E.heightOffset,P=E.ctrlPtOffsetPct*M;c.beginPath&&c.beginPath(),c.moveTo(y,b+R),c.lineTo(y,w-R),c.quadraticCurveTo(y+P,w,y+M,w),c.lineTo(_-M,w),c.quadraticCurveTo(_-P,w,_,w-R),c.lineTo(_,b+R),c.quadraticCurveTo(_-P,b,_-M,b),c.lineTo(y+M,b),c.quadraticCurveTo(y+P,b,y,b+R),c.closePath()}},yf=Math.sin(0),bu=Math.cos(0),Rg={},bf={},$y=Math.PI/40,_u=0*Math.PI;_u<2*Math.PI;_u+=$y)Rg[_u]=Math.sin(_u),bf[_u]=Math.cos(_u);ca.drawEllipsePath=function(c,o,l,d,f){if(c.beginPath&&c.beginPath(),c.ellipse)c.ellipse(o,l,d/2,f/2,0,0,2*Math.PI);else for(var p,g,y=d/2,_=f/2,b=0*Math.PI;b<2*Math.PI;b+=$y)p=o-y*Rg[b]*yf+y*bf[b]*bu,g=l+_*bf[b]*yf+_*Rg[b]*bu,0===b?c.moveTo(p,g):c.lineTo(p,g);c.closePath()};var $d={};function Pg(c){var o=c.indexOf(",");return c.substr(o+1)}function Wd(c,o,l){var d=function(){return o.toDataURL(l,c.quality)};switch(c.output){case"blob-promise":return new bd(function(f,p){try{o.toBlob(function(g){null!=g?f(g):p(new Error("`canvas.toBlob()` sent a null value in its callback"))},l,c.quality)}catch(g){p(g)}});case"blob":return function Wy(c,o){for(var l=atob(c),d=new ArrayBuffer(l.length),f=new Uint8Array(d),p=0;p<l.length;p++)f[p]=l.charCodeAt(p);return new Blob([d],{type:o})}(Pg(d()),l);case"base64":return Pg(d());default:return d()}}$d.createBuffer=function(c,o){var l=document.createElement("canvas");return l.width=c,l.height=o,[l,l.getContext("2d")]},$d.bufferCanvasImage=function(c){var o=this.cy,d=o.mutableElements().boundingBox(),f=this.findContainerClientCoords(),p=c.full?Math.ceil(d.w):f[2],g=c.full?Math.ceil(d.h):f[3],y=pe(c.maxWidth)||pe(c.maxHeight),_=this.getPixelRatio(),b=1;if(void 0!==c.scale)p*=c.scale,g*=c.scale,b=c.scale;else if(y){var w=1/0,E=1/0;pe(c.maxWidth)&&(w=b*c.maxWidth/p),pe(c.maxHeight)&&(E=b*c.maxHeight/g),p*=b=Math.min(w,E),g*=b}y||(p*=_,g*=_,b*=_);var M=document.createElement("canvas");M.width=p,M.height=g,M.style.width=p+"px",M.style.height=g+"px";var R=M.getContext("2d");if(p>0&&g>0){R.clearRect(0,0,p,g),R.globalCompositeOperation="source-over";var P=this.getCachedZSortedEles();if(c.full)R.translate(-d.x1*b,-d.y1*b),R.scale(b,b),this.drawElements(R,P),R.scale(1/b,1/b),R.translate(d.x1*b,d.y1*b);else{var $=o.pan(),K={x:$.x*b,y:$.y*b};b*=o.zoom(),R.translate(K.x,K.y),R.scale(b,b),this.drawElements(R,P),R.scale(1/b,1/b),R.translate(-K.x,-K.y)}c.bg&&(R.globalCompositeOperation="destination-over",R.fillStyle=c.bg,R.rect(0,0,p,g),R.fill())}return M},$d.png=function(c){return Wd(c,this.bufferCanvasImage(c),"image/png")},$d.jpg=function(c){return Wd(c,this.bufferCanvasImage(c),"image/jpeg")};var _c=qy,hr=qy.prototype;function qy(c){var o=this;o.data={canvases:new Array(hr.CANVAS_LAYERS),contexts:new Array(hr.CANVAS_LAYERS),canvasNeedsRedraw:new Array(hr.CANVAS_LAYERS),bufferCanvases:new Array(hr.BUFFER_COUNT),bufferContexts:new Array(hr.CANVAS_LAYERS)};var l="-webkit-tap-highlight-color",d="rgba(0,0,0,0)";o.data.canvasContainer=document.createElement("div");var f=o.data.canvasContainer.style;o.data.canvasContainer.style[l]=d,f.position="relative",f.zIndex="0",f.overflow="hidden";var p=c.cy.container();p.appendChild(o.data.canvasContainer),p.style[l]=d;var g={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};ee&&ee.userAgent.match(/msie|trident|edge/i)&&(g["-ms-touch-action"]="none",g["touch-action"]="none");for(var y=0;y<hr.CANVAS_LAYERS;y++){var _=o.data.canvases[y]=document.createElement("canvas");o.data.contexts[y]=_.getContext("2d"),Object.keys(g).forEach(function(mt){_.style[mt]=g[mt]}),_.style.position="absolute",_.setAttribute("data-id","layer"+y),_.style.zIndex=String(hr.CANVAS_LAYERS-y),o.data.canvasContainer.appendChild(_),o.data.canvasNeedsRedraw[y]=!1}for(o.data.topCanvas=o.data.canvases[0],o.data.canvases[hr.NODE].setAttribute("data-id","layer"+hr.NODE+"-node"),o.data.canvases[hr.SELECT_BOX].setAttribute("data-id","layer"+hr.SELECT_BOX+"-selectbox"),o.data.canvases[hr.DRAG].setAttribute("data-id","layer"+hr.DRAG+"-drag"),y=0;y<hr.BUFFER_COUNT;y++)o.data.bufferCanvases[y]=document.createElement("canvas"),o.data.bufferContexts[y]=o.data.bufferCanvases[y].getContext("2d"),o.data.bufferCanvases[y].style.position="absolute",o.data.bufferCanvases[y].setAttribute("data-id","buffer"+y),o.data.bufferCanvases[y].style.zIndex=String(-y-1),o.data.bufferCanvases[y].style.visibility="hidden";o.pathsEnabled=!0;var b=Lr(),E=function(Ze){return{x:-Ze.w/2,y:-Ze.h/2}},Ce=function(Ze){return Ze.boundingBox(),Ze[0]._private.bodyBounds},Se=function(Ze){return Ze.boundingBox(),Ze[0]._private.labelBounds.main||b},de=function(Ze){return Ze.boundingBox(),Ze[0]._private.labelBounds.source||b},Ee=function(Ze){return Ze.boundingBox(),Ze[0]._private.labelBounds.target||b},he=function(Ze,xt){return xt},Te=function(Ze,xt,Mt){var Lt=Ze?Ze+"-":"";return{x:xt.x+Mt.pstyle(Lt+"text-margin-x").pfValue,y:xt.y+Mt.pstyle(Lt+"text-margin-y").pfValue}},ge=function(Ze,xt,Mt){var Lt=Ze[0]._private.rscratch;return{x:Lt[xt],y:Lt[Mt]}},ct=o.data.eleTxrCache=new bc(o,{getKey:function(Ze){return Ze[0]._private.nodeKey},doesEleInvalidateKey:function(Ze){var xt=Ze[0]._private;return!(xt.oldBackgroundTimestamp===xt.backgroundTimestamp)},drawElement:function(Ze,xt,Mt,Lt,Vt){return o.drawElement(Ze,xt,Mt,!1,!1,Vt)},getBoundingBox:Ce,getRotationPoint:function(Ze){return function(Ze){return{x:(Ze.x1+Ze.x2)/2,y:(Ze.y1+Ze.y2)/2}}(Ce(Ze))},getRotationOffset:function(Ze){return E(Ce(Ze))},allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),rt=o.data.lblTxrCache=new bc(o,{getKey:function(Ze){return Ze[0]._private.labelStyleKey},drawElement:function(Ze,xt,Mt,Lt,Vt){return o.drawElementText(Ze,xt,Mt,Lt,"main",Vt)},getBoundingBox:Se,getRotationPoint:function(Ze){return Te("",ge(Ze,"labelX","labelY"),Ze)},getRotationOffset:function(Ze){var xt=Se(Ze),Mt=E(Se(Ze));if(Ze.isNode()){switch(Ze.pstyle("text-halign").value){case"left":Mt.x=-xt.w;break;case"right":Mt.x=0}switch(Ze.pstyle("text-valign").value){case"top":Mt.y=-xt.h;break;case"bottom":Mt.y=0}}return Mt},isVisible:he}),tt=o.data.slbTxrCache=new bc(o,{getKey:function(Ze){return Ze[0]._private.sourceLabelStyleKey},drawElement:function(Ze,xt,Mt,Lt,Vt){return o.drawElementText(Ze,xt,Mt,Lt,"source",Vt)},getBoundingBox:de,getRotationPoint:function(Ze){return Te("source",ge(Ze,"sourceLabelX","sourceLabelY"),Ze)},getRotationOffset:function(Ze){return E(de(Ze))},isVisible:he}),wt=o.data.tlbTxrCache=new bc(o,{getKey:function(Ze){return Ze[0]._private.targetLabelStyleKey},drawElement:function(Ze,xt,Mt,Lt,Vt){return o.drawElementText(Ze,xt,Mt,Lt,"target",Vt)},getBoundingBox:Ee,getRotationPoint:function(Ze){return Te("target",ge(Ze,"targetLabelX","targetLabelY"),Ze)},getRotationOffset:function(Ze){return E(Ee(Ze))},isVisible:he}),Dt=o.data.lyrTxrCache=new Ly(o);o.onUpdateEleCalcs(function(Ze,xt){ct.invalidateElements(xt),rt.invalidateElements(xt),tt.invalidateElements(xt),wt.invalidateElements(xt),Dt.invalidateElements(xt);for(var Mt=0;Mt<xt.length;Mt++){var Lt=xt[Mt]._private;Lt.oldBackgroundTimestamp=Lt.backgroundTimestamp}});var yt=function(Ze){for(var xt=0;xt<Ze.length;xt++)Dt.enqueueElementRefinement(Ze[xt].ele)};ct.onDequeue(yt),rt.onDequeue(yt),tt.onDequeue(yt),wt.onDequeue(yt)}hr.CANVAS_LAYERS=3,hr.SELECT_BOX=0,hr.DRAG=1,hr.NODE=2,hr.BUFFER_COUNT=3,hr.TEXTURE_BUFFER=0,hr.MOTIONBLUR_BUFFER_NODE=1,hr.MOTIONBLUR_BUFFER_DRAG=2,hr.redrawHint=function(c,o){var l=this;switch(c){case"eles":l.data.canvasNeedsRedraw[hr.NODE]=o;break;case"drag":l.data.canvasNeedsRedraw[hr.DRAG]=o;break;case"select":l.data.canvasNeedsRedraw[hr.SELECT_BOX]=o}};var aM=typeof Path2D<"u";hr.path2dEnabled=function(c){if(void 0===c)return this.pathsEnabled;this.pathsEnabled=!!c},hr.usePaths=function(){return aM&&this.pathsEnabled},hr.setImgSmoothing=function(c,o){null!=c.imageSmoothingEnabled?c.imageSmoothingEnabled=o:(c.webkitImageSmoothingEnabled=o,c.mozImageSmoothingEnabled=o,c.msImageSmoothingEnabled=o)},hr.getImgSmoothing=function(c){return null!=c.imageSmoothingEnabled?c.imageSmoothingEnabled:c.webkitImageSmoothingEnabled||c.mozImageSmoothingEnabled||c.msImageSmoothingEnabled},hr.makeOffscreenCanvas=function(c,o){var l;return"undefined"!==(typeof OffscreenCanvas>"u"?"undefined":U(OffscreenCanvas))?l=new OffscreenCanvas(c,o):((l=document.createElement("canvas")).width=c,l.height=o),l},[gf,is,la,vf,Ua,Ga,Fs,ca,$d,{nodeShapeImpl:function(c,o,l,d,f,p,g){switch(c){case"ellipse":return this.drawEllipsePath(o,l,d,f,p);case"polygon":return this.drawPolygonPath(o,l,d,f,p,g);case"round-polygon":return this.drawRoundPolygonPath(o,l,d,f,p,g);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(o,l,d,f,p);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(o,l,d,f,p);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(o,l,d,f,p);case"barrel":return this.drawBarrelPath(o,l,d,f,p)}}}].forEach(function(c){Zt(hr,c)});var Ng=[{type:"layout",extensions:df},{type:"renderer",extensions:[{name:"null",impl:fg},{name:"base",impl:yg},{name:"canvas",impl:_c}]}],Yy={},Lg={};function qd(c,o,l){var d=l,f=function(Ee){ur("Can not register `"+o+"` for `"+c+"` since `"+Ee+"` already exists in the prototype and can not be overridden")};if("core"===c){if(hu.prototype[o])return f(o);hu.prototype[o]=l}else if("collection"===c){if(Ti.prototype[o])return f(o);Ti.prototype[o]=l}else if("layout"===c){for(var p=function(Ee){this.options=Ee,l.call(this,Ee),Ie(this._private)||(this._private={}),this._private.cy=Ee.cy,this._private.listeners=[],this.createEmitter()},g=p.prototype=Object.create(l.prototype),y=[],_=0;_<y.length;_++){var b=y[_];g[b]=g[b]||function(){return this}}g.start&&!g.run?g.run=function(){return this.start(),this}:!g.start&&g.run&&(g.start=function(){return this.run(),this});var w=l.prototype.stop;g.stop=function(){var de=this.options;if(de&&de.animate){var Ee=this.animations;if(Ee)for(var he=0;he<Ee.length;he++)Ee[he].stop()}return w?w.call(this):this.emit("layoutstop"),this},g.destroy||(g.destroy=function(){return this}),g.cy=function(){return this._private.cy};var E=function(Ee){return Ee._private.cy},M={addEventFields:function(Ee,he){he.layout=Ee,he.cy=E(Ee),he.target=Ee},bubble:function(){return!0},parent:function(Ee){return E(Ee)}};Zt(g,{createEmitter:function(){return this._private.emitter=new Td(M,this),this},emitter:function(){return this._private.emitter},on:function(Ee,he){return this.emitter().on(Ee,he),this},one:function(Ee,he){return this.emitter().one(Ee,he),this},once:function(Ee,he){return this.emitter().one(Ee,he),this},removeListener:function(Ee,he){return this.emitter().removeListener(Ee,he),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(Ee,he){return this.emitter().emit(Ee,he),this}}),Dr.eventAliasesOn(g),d=p}else if("renderer"===c&&"null"!==o&&"base"!==o){var R=wf("renderer","base"),P=R.prototype,$=l,K=l.prototype,J=function(){R.apply(this,arguments),$.apply(this,arguments)},ne=J.prototype;for(var re in P){var ue=P[re];if(null!=K[re])return f(re);ne[re]=ue}for(var Se in K)ne[Se]=K[Se];P.clientFunctions.forEach(function(de){ne[de]=ne[de]||function(){Sr("Renderer does not implement `renderer."+de+"()` on its prototype")}}),d=J}else if("__proto__"===c||"constructor"===c||"prototype"===c)return Sr(c+" is an illegal type to be registered, possibly lead to prototype pollutions");return jc({map:Yy,keys:[c,o],value:d})}function wf(c,o){return al({map:Yy,keys:[c,o]})}function Xy(c,o,l,d,f){return jc({map:Lg,keys:[c,o,l,d],value:f})}function Ky(c,o,l,d){return al({map:Lg,keys:[c,o,l,d]})}var xf=function(){return 2===arguments.length?wf.apply(null,arguments):3===arguments.length?qd.apply(null,arguments):4===arguments.length?Ky.apply(null,arguments):5===arguments.length?Xy.apply(null,arguments):void Sr("Invalid extension access syntax")};hu.prototype.extension=xf,Ng.forEach(function(c){c.extensions.forEach(function(o){qd(c.type,o.name,o.impl)})});var kl=function c(){if(!(this instanceof c))return new c;this.length=0},wc=kl.prototype;wc.instanceString=function(){return"stylesheet"},wc.selector=function(c){return this[this.length++]={selector:c,properties:[]},this},wc.css=function(c,o){var l=this.length-1;if(ye(c))this[l].properties.push({name:c,value:o});else if(Ie(c))for(var d=c,f=Object.keys(d),p=0;p<f.length;p++){var g=f[p],y=d[g];if(null!=y){var _=ir.properties[g]||ir.properties[tn(g)];null!=_&&this[l].properties.push({name:_.name,value:y})}}return this},wc.style=wc.css,wc.generateStyle=function(c){var o=new ir(c);return this.appendToStyle(o)},wc.appendToStyle=function(c){for(var o=0;o<this.length;o++){var l=this[o],f=l.properties;c.selector(l.selector);for(var p=0;p<f.length;p++){var g=f[p];c.css(g.name,g.value)}}return c};var xc=function(o){return void 0===o&&(o={}),Ie(o)?new hu(o):ye(o)?xf.apply(xf,arguments):void 0};xc.use=function(c){var o=Array.prototype.slice.call(arguments,1);return o.unshift(xc),c.apply(null,o),this},xc.warnings=function(c){return kp(c)},xc.version="3.23.0",xc.stylesheet=xc.Stylesheet=kl,Ne.exports=xc},5203:(Ne,Re,X)=>{Ne.exports=X(8732)},8732:function(Ne,Re){var X,q,N;(function(){var C,S,F,D,T,k,G,z,L,U,O,V,ie,Y,se;F=Math.floor,U=Math.min,S=function(te,be){return te<be?-1:te>be?1:0},L=function(te,be,ce,W,B){var H;if(null==ce&&(ce=0),null==B&&(B=S),ce<0)throw new Error("lo must be non-negative");for(null==W&&(W=te.length);ce<W;)B(be,te[H=F((ce+W)/2)])<0?W=H:ce=H+1;return[].splice.apply(te,[ce,ce-ce].concat(be)),be},k=function(te,be,ce){return null==ce&&(ce=S),te.push(be),Y(te,0,te.length-1,ce)},T=function(te,be){var ce,W;return null==be&&(be=S),ce=te.pop(),te.length?(W=te[0],te[0]=ce,se(te,0,be)):W=ce,W},z=function(te,be,ce){var W;return null==ce&&(ce=S),W=te[0],te[0]=be,se(te,0,ce),W},G=function(te,be,ce){var W;return null==ce&&(ce=S),te.length&&ce(te[0],be)<0&&(be=(W=[te[0],be])[0],te[0]=W[1],se(te,0,ce)),be},D=function(te,be){var W,H,le,me,ae;for(null==be&&(be=S),me=[],W=0,H=(le=function(){ae=[];for(var _e=0,Le=F(te.length/2);0<=Le?_e<Le:_e>Le;0<=Le?_e++:_e--)ae.push(_e);return ae}.apply(this).reverse()).length;W<H;W++)me.push(se(te,le[W],be));return me},ie=function(te,be,ce){var W;if(null==ce&&(ce=S),-1!==(W=te.indexOf(be)))return Y(te,0,W,ce),se(te,W,ce)},O=function(te,be,ce){var B,H,ee,le;if(null==ce&&(ce=S),!(B=te.slice(0,be)).length)return B;for(D(B,ce),H=0,ee=(le=te.slice(be)).length;H<ee;H++)G(B,le[H],ce);return B.sort(ce).reverse()},V=function(te,be,ce){var W,H,ee,le,me,ae,_e,Le,ye;if(null==ce&&(ce=S),10*be<=te.length){if(!(ee=te.slice(0,be).sort(ce)).length)return ee;for(H=ee[ee.length-1],le=0,ae=(_e=te.slice(be)).length;le<ae;le++)ce(W=_e[le],H)<0&&(L(ee,W,0,null,ce),ee.pop(),H=ee[ee.length-1]);return ee}for(D(te,ce),ye=[],me=0,Le=U(be,te.length);0<=Le?me<Le:me>Le;0<=Le?++me:--me)ye.push(T(te,ce));return ye},Y=function(te,be,ce,W){var B,H,ee;for(null==W&&(W=S),B=te[ce];ce>be&&W(B,H=te[ee=ce-1>>1])<0;)te[ce]=H,ce=ee;return te[ce]=B},se=function(te,be,ce){var W,B,H,ee,le;for(null==ce&&(ce=S),B=te.length,le=be,H=te[be],W=2*be+1;W<B;)(ee=W+1)<B&&!(ce(te[W],te[ee])<0)&&(W=ee),te[be]=te[W],W=2*(be=W)+1;return te[be]=H,Y(te,le,be,ce)},C=function(){function te(be){this.cmp=be??S,this.nodes=[]}return te.push=k,te.pop=T,te.replace=z,te.pushpop=G,te.heapify=D,te.updateItem=ie,te.nlargest=O,te.nsmallest=V,te.prototype.push=function(be){return k(this.nodes,be,this.cmp)},te.prototype.pop=function(){return T(this.nodes,this.cmp)},te.prototype.peek=function(){return this.nodes[0]},te.prototype.contains=function(be){return-1!==this.nodes.indexOf(be)},te.prototype.replace=function(be){return z(this.nodes,be,this.cmp)},te.prototype.pushpop=function(be){return G(this.nodes,be,this.cmp)},te.prototype.heapify=function(){return D(this.nodes,this.cmp)},te.prototype.updateItem=function(be){return ie(this.nodes,be,this.cmp)},te.prototype.clear=function(){return this.nodes=[]},te.prototype.empty=function(){return 0===this.nodes.length},te.prototype.size=function(){return this.nodes.length},te.prototype.clone=function(){var be;return(be=new te).nodes=this.nodes.slice(0),be},te.prototype.toArray=function(){return this.nodes.slice(0)},te.prototype.insert=te.prototype.push,te.prototype.top=te.prototype.peek,te.prototype.front=te.prototype.peek,te.prototype.has=te.prototype.contains,te.prototype.copy=te.prototype.clone,te}(),q=[],void 0===(N="function"==typeof(X=function(){return C})?X.apply(Re,q):X)||(Ne.exports=N)}).call(this)},4918:(Ne,Re,X)=>{"use strict";var q=X(9344).default;const{isArray:N,isObject:C,isString:S}=X(2353),{asArray:F}=X(4249),{prependBase:D}=X(4920),T=X(3327),k=X(9522);function z(U){throw new T("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:U})}function L({context:U,base:O}){if(!U)return;const V=U["@context"];if(S(V))U["@context"]=D(O,V);else if(N(V))for(let ie=0;ie<V.length;++ie){const Y=V[ie];S(Y)?V[ie]=D(O,Y):C(Y)&&L({context:{"@context":Y},base:O})}else if(C(V))for(const ie in V)L({context:V[ie],base:O})}Ne.exports=class{constructor({sharedCache:O}){this.perOpCache=new Map,this.sharedCache=O}resolve({activeCtx:O,context:V,documentLoader:ie,base:Y,cycles:se=new Set}){var te=this;return q(function*(){V&&C(V)&&V["@context"]&&(V=V["@context"]),V=F(V);const be=[];for(const ce of V){if(S(ce)){let H=te._get(ce);H||(H=yield te._resolveRemoteContext({activeCtx:O,url:ce,documentLoader:ie,base:Y,cycles:se})),N(H)?be.push(...H):be.push(H);continue}if(null===ce){be.push(new k({document:null}));continue}C(ce)||z(V);const W=JSON.stringify(ce);let B=te._get(W);B||(B=new k({document:ce}),te._cacheResolvedContext({key:W,resolved:B,tag:"static"})),be.push(B)}return be})()}_get(O){let V=this.perOpCache.get(O);if(!V){const ie=this.sharedCache.get(O);ie&&(V=ie.get("static"),V&&this.perOpCache.set(O,V))}return V}_cacheResolvedContext({key:O,resolved:V,tag:ie}){if(this.perOpCache.set(O,V),void 0!==ie){let Y=this.sharedCache.get(O);Y||(Y=new Map,this.sharedCache.set(O,Y)),Y.set(ie,V)}return V}_resolveRemoteContext({activeCtx:O,url:V,documentLoader:ie,base:Y,cycles:se}){var te=this;return q(function*(){V=D(Y,V);const{context:be,remoteDoc:ce}=yield te._fetchContext({activeCtx:O,url:V,documentLoader:ie,cycles:se});L({context:be,base:Y=ce.documentUrl||V});const W=yield te.resolve({activeCtx:O,context:be,documentLoader:ie,base:Y,cycles:se});return te._cacheResolvedContext({key:V,resolved:W,tag:ce.tag}),W})()}_fetchContext({activeCtx:O,url:V,documentLoader:ie,cycles:Y}){return q(function*(){if(Y.size>10)throw new T("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===O.processingMode?"loading remote context failed":"context overflow",max:10});if(Y.has(V))throw new T("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===O.processingMode?"recursive context inclusion":"context overflow",url:V});let se,te;Y.add(V);try{te=yield ie(V),se=te.document||null,S(se)&&(se=JSON.parse(se))}catch(be){throw new T("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:V,cause:be})}if(!C(se))throw new T("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:V});return se="@context"in se?{"@context":se["@context"]}:{"@context":{}},te.contextUrl&&(N(se["@context"])||(se["@context"]=[se["@context"]]),se["@context"].push(te.contextUrl)),{context:se,remoteDoc:te}})()}}},3327:Ne=>{"use strict";Ne.exports=class extends Error{constructor(X="An unspecified JSON-LD error occurred.",q="jsonld.Error",N={}){super(X),this.name=q,this.message=X,this.details=N}}},779:Ne=>{"use strict";Ne.exports=Re=>{class X{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(X,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(X.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:X}),X.compact=function(q,N){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):Re.compact(q,N)},X.expand=function(q){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):Re.expand(q)},X.flatten=function(q){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):Re.flatten(q)},X}},3865:(Ne,Re,X)=>{"use strict";Ne.exports=X(4308).NQuads},2210:(Ne,Re,X)=>{"use strict";var q=X(9344).default;Ne.exports=class{constructor(){this._requests={}}wrapLoader(C){const S=this;return S._loader=C,function(){return S.add.apply(S,arguments)}}add(C){var S=this;return q(function*(){let F=S._requests[C];if(F)return Promise.resolve(F);F=S._requests[C]=S._loader(C);try{return yield F}finally{delete S._requests[C]}})()}}},9522:(Ne,Re,X)=>{"use strict";const q=X(5943);Ne.exports=class{constructor({document:S}){this.document=S,this.cache=new q({max:10})}getProcessed(S){return this.cache.get(S)}setProcessed(S,F){this.cache.set(S,F)}}},9857:(Ne,Re,X)=>{"use strict";var q=X(9344).default;const N=X(3327),{isArray:C,isObject:S,isString:F,isUndefined:D}=X(2353),{isList:T,isValue:k,isGraph:G,isSimpleGraph:z,isSubjectReference:L}=X(9094),{expandIri:U,getContextValue:O,isKeyword:V,process:ie,processingMode:Y}=X(2134),{removeBase:se,prependBase:te}=X(4920),{REGEX_KEYWORD:be,addValue:ce,asArray:W,compareShortestLeast:B}=X(4249),H={};function le(me,ae,_e){if("@nest"!==U(me,ae,{vocab:!0},_e))throw new N("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}Ne.exports=H,H.compact=function(){var me=q(function*({activeCtx:ae,activeProperty:_e=null,element:Le,options:ye={}}){if(C(Le)){let He=[];for(let Ie=0;Ie<Le.length;++Ie){const we=yield H.compact({activeCtx:ae,activeProperty:_e,element:Le[Ie],options:ye});null!==we&&He.push(we)}return ye.compactArrays&&1===He.length&&0===(O(ae,_e,"@container")||[]).length&&(He=He[0]),He}const $e=O(ae,_e,"@context");if(D($e)||(ae=yield ie({activeCtx:ae,localCtx:$e,propagate:!0,overrideProtected:!0,options:ye})),S(Le)){if(ye.link&&"@id"in Le&&ye.link.hasOwnProperty(Le["@id"])){const Je=ye.link[Le["@id"]];for(let Pt=0;Pt<Je.length;++Pt)if(Je[Pt].expanded===Le)return Je[Pt].compacted}if(k(Le)||L(Le)){const Je=H.compactValue({activeCtx:ae,activeProperty:_e,value:Le,options:ye});return ye.link&&L(Le)&&(ye.link.hasOwnProperty(Le["@id"])||(ye.link[Le["@id"]]=[]),ye.link[Le["@id"]].push({expanded:Le,compacted:Je})),Je}if(T(Le)&&(O(ae,_e,"@container")||[]).includes("@list"))return H.compact({activeCtx:ae,activeProperty:_e,element:Le["@list"],options:ye});const He="@reverse"===_e,Ie={},we=ae;!k(Le)&&!L(Le)&&(ae=ae.revertToPreviousContext());const pe=O(we,_e,"@context");D(pe)||(ae=yield ie({activeCtx:ae,localCtx:pe,propagate:!0,overrideProtected:!0,options:ye})),ye.link&&"@id"in Le&&(ye.link.hasOwnProperty(Le["@id"])||(ye.link[Le["@id"]]=[]),ye.link[Le["@id"]].push({expanded:Le,compacted:Ie}));let nt=Le["@type"]||[];nt.length>1&&(nt=Array.from(nt).sort());const qe=ae;for(const Je of nt){const Pt=H.compactIri({activeCtx:qe,iri:Je,relativeTo:{vocab:!0}}),pt=O(we,Pt,"@context");D(pt)||(ae=yield ie({activeCtx:ae,localCtx:pt,options:ye,propagate:!1}))}const Oe=Object.keys(Le).sort();for(const Je of Oe){const Pt=Le[Je];if("@id"!==Je)if("@type"!==Je)if("@reverse"!==Je)if("@preserve"!==Je)if("@index"!==Je)if("@graph"!==Je&&"@list"!==Je&&"@included"!==Je&&V(Je)){const pt=H.compactIri({activeCtx:ae,iri:Je,relativeTo:{vocab:!0}});ce(Ie,pt,Pt)}else{if(!C(Pt))throw new N("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===Pt.length){const pt=H.compactIri({activeCtx:ae,iri:Je,value:Pt,relativeTo:{vocab:!0},reverse:He}),at=ae.mappings.has(pt)?ae.mappings.get(pt)["@nest"]:null;let ut=Ie;at&&(le(ae,at,ye),S(Ie[at])||(Ie[at]={}),ut=Ie[at]),ce(ut,pt,Pt,{propertyIsArray:!0})}for(const pt of Pt){const at=H.compactIri({activeCtx:ae,iri:Je,value:pt,relativeTo:{vocab:!0},reverse:He}),ut=ae.mappings.has(at)?ae.mappings.get(at)["@nest"]:null;let We=Ie;ut&&(le(ae,ut,ye),S(Ie[ut])||(Ie[ut]={}),We=Ie[ut]);const De=O(ae,at,"@container")||[],Be=G(pt),ht=T(pt);let kt;ht?kt=pt["@list"]:Be&&(kt=pt["@graph"]);let ft=yield H.compact({activeCtx:ae,activeProperty:at,element:ht||Be?kt:pt,options:ye});if(ht){if(C(ft)||(ft=[ft]),De.includes("@list")){ce(We,at,ft,{valueIsArray:!0,allowDuplicate:!0});continue}ft={[H.compactIri({activeCtx:ae,iri:"@list",relativeTo:{vocab:!0}})]:ft},"@index"in pt&&(ft[H.compactIri({activeCtx:ae,iri:"@index",relativeTo:{vocab:!0}})]=pt["@index"])}if(Be)if(De.includes("@graph")&&(De.includes("@id")||De.includes("@index")&&z(pt))){let Nt;We.hasOwnProperty(at)?Nt=We[at]:We[at]=Nt={};const tn=(De.includes("@id")?pt["@id"]:pt["@index"])||H.compactIri({activeCtx:ae,iri:"@none",relativeTo:{vocab:!0}});ce(Nt,tn,ft,{propertyIsArray:!ye.compactArrays||De.includes("@set")})}else De.includes("@graph")&&z(pt)?(C(ft)&&ft.length>1&&(ft={"@included":ft}),ce(We,at,ft,{propertyIsArray:!ye.compactArrays||De.includes("@set")})):(C(ft)&&1===ft.length&&ye.compactArrays&&(ft=ft[0]),ft={[H.compactIri({activeCtx:ae,iri:"@graph",relativeTo:{vocab:!0}})]:ft},"@id"in pt&&(ft[H.compactIri({activeCtx:ae,iri:"@id",relativeTo:{vocab:!0}})]=pt["@id"]),"@index"in pt&&(ft[H.compactIri({activeCtx:ae,iri:"@index",relativeTo:{vocab:!0}})]=pt["@index"]),ce(We,at,ft,{propertyIsArray:!ye.compactArrays||De.includes("@set")}));else if(De.includes("@language")||De.includes("@index")||De.includes("@id")||De.includes("@type")){let Nt,tn;if(We.hasOwnProperty(at)?Nt=We[at]:We[at]=Nt={},De.includes("@language"))k(ft)&&(ft=ft["@value"]),tn=pt["@language"];else if(De.includes("@index")){const Ot=O(ae,at,"@index")||"@index",sn=H.compactIri({activeCtx:ae,iri:Ot,relativeTo:{vocab:!0}});if("@index"===Ot)tn=pt["@index"],delete ft[sn];else{let hn;if([tn,...hn]=W(ft[Ot]||[]),F(tn))switch(hn.length){case 0:delete ft[Ot];break;case 1:ft[Ot]=hn[0];break;default:ft[Ot]=hn}else tn=null}}else if(De.includes("@id")){const Ot=H.compactIri({activeCtx:ae,iri:"@id",relativeTo:{vocab:!0}});tn=ft[Ot],delete ft[Ot]}else if(De.includes("@type")){const Ot=H.compactIri({activeCtx:ae,iri:"@type",relativeTo:{vocab:!0}});let sn;switch([tn,...sn]=W(ft[Ot]||[]),sn.length){case 0:delete ft[Ot];break;case 1:ft[Ot]=sn[0];break;default:ft[Ot]=sn}1===Object.keys(ft).length&&"@id"in pt&&(ft=yield H.compact({activeCtx:ae,activeProperty:at,element:{"@id":pt["@id"]},options:ye}))}tn||(tn=H.compactIri({activeCtx:ae,iri:"@none",relativeTo:{vocab:!0}})),ce(Nt,tn,ft,{propertyIsArray:De.includes("@set")})}else{const Nt=!ye.compactArrays||De.includes("@set")||De.includes("@list")||C(ft)&&0===ft.length||"@list"===Je||"@graph"===Je;ce(We,at,ft,{propertyIsArray:Nt})}}}else{if((O(ae,_e,"@container")||[]).includes("@index"))continue;const at=H.compactIri({activeCtx:ae,iri:Je,relativeTo:{vocab:!0}});ce(Ie,at,Pt)}else{const pt=yield H.compact({activeCtx:ae,activeProperty:_e,element:Pt,options:ye});C(pt)&&0===pt.length||ce(Ie,Je,pt)}else{const pt=yield H.compact({activeCtx:ae,activeProperty:"@reverse",element:Pt,options:ye});for(const at in pt)if(ae.mappings.has(at)&&ae.mappings.get(at).reverse){const ut=pt[at],De=(O(ae,at,"@container")||[]).includes("@set")||!ye.compactArrays;ce(Ie,at,ut,{propertyIsArray:De}),delete pt[at]}if(Object.keys(pt).length>0){const at=H.compactIri({activeCtx:ae,iri:Je,relativeTo:{vocab:!0}});ce(Ie,at,pt)}}else{let pt=W(Pt).map(Be=>H.compactIri({activeCtx:we,iri:Be,relativeTo:{vocab:!0}}));1===pt.length&&(pt=pt[0]);const at=H.compactIri({activeCtx:ae,iri:"@type",relativeTo:{vocab:!0}}),De=(O(ae,at,"@container")||[]).includes("@set")&&Y(ae,1.1)||C(pt)&&0===Pt.length;ce(Ie,at,pt,{propertyIsArray:De})}else{let pt=W(Pt).map(ut=>H.compactIri({activeCtx:ae,iri:ut,relativeTo:{vocab:!1},base:ye.base}));1===pt.length&&(pt=pt[0]),Ie[H.compactIri({activeCtx:ae,iri:"@id",relativeTo:{vocab:!0}})]=pt}}return Ie}return Le});return function(ae){return me.apply(this,arguments)}}(),H.compactIri=({activeCtx:me,iri:ae,value:_e=null,relativeTo:Le={vocab:!1},reverse:ye=!1,base:$e=null})=>{if(null===ae)return ae;me.isPropertyTermScoped&&me.previousContext&&(me=me.previousContext);const He=me.getInverse();if(V(ae)&&ae in He&&"@none"in He[ae]&&"@type"in He[ae]["@none"]&&"@none"in He[ae]["@none"]["@type"])return He[ae]["@none"]["@type"]["@none"];if(Le.vocab&&ae in He){const qe=me["@language"]||"@none",Oe=[];S(_e)&&"@index"in _e&&!("@graph"in _e)&&Oe.push("@index","@index@set"),S(_e)&&"@preserve"in _e&&(_e=_e["@preserve"][0]),G(_e)?("@index"in _e&&Oe.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in _e&&Oe.push("@graph@id","@graph@id@set"),Oe.push("@graph","@graph@set","@set"),"@index"in _e||Oe.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in _e||Oe.push("@graph@id","@graph@id@set")):S(_e)&&!k(_e)&&Oe.push("@id","@id@set","@type","@set@type");let Je="@language",Pt="@null";if(ye)Je="@type",Pt="@reverse",Oe.push("@set");else if(T(_e)){"@index"in _e||Oe.push("@list");const at=_e["@list"];if(0===at.length)Je="@any",Pt="@none";else{let ut=0===at.length?qe:null,We=null;for(let De=0;De<at.length;++De){const Be=at[De];let ht="@none",kt="@none";if(k(Be)?"@direction"in Be?ht=`${(Be["@language"]||"").toLowerCase()}_${Be["@direction"]}`:"@language"in Be?ht=Be["@language"].toLowerCase():"@type"in Be?kt=Be["@type"]:ht="@null":kt="@id",null===ut?ut=ht:ht!==ut&&k(Be)&&(ut="@none"),null===We?We=kt:kt!==We&&(We="@none"),"@none"===ut&&"@none"===We)break}ut=ut||"@none",We=We||"@none","@none"!==We?(Je="@type",Pt=We):Pt=ut}}else{if(k(_e))if("@language"in _e&&!("@index"in _e)){Oe.push("@language","@language@set"),Pt=_e["@language"];const at=_e["@direction"];at&&(Pt=`${Pt}_${at}`)}else"@direction"in _e&&!("@index"in _e)?Pt=`_${_e["@direction"]}`:"@type"in _e&&(Je="@type",Pt=_e["@type"]);else Je="@type",Pt="@id";Oe.push("@set")}Oe.push("@none"),S(_e)&&!("@index"in _e)&&Oe.push("@index","@index@set"),k(_e)&&1===Object.keys(_e).length&&Oe.push("@language","@language@set");const pt=function ee(me,ae,_e,Le,ye,$e){null===$e&&($e="@null");const He=[];if(("@id"===$e||"@reverse"===$e)&&S(_e)&&"@id"in _e){"@reverse"===$e&&He.push("@reverse");const we=H.compactIri({activeCtx:me,iri:_e["@id"],relativeTo:{vocab:!0}});me.mappings.has(we)&&me.mappings.get(we)&&me.mappings.get(we)["@id"]===_e["@id"]?He.push.apply(He,["@vocab","@id"]):He.push.apply(He,["@id","@vocab"])}else{He.push($e);const we=He.find(pe=>pe.includes("_"));we&&He.push(we.replace(/^[^_]+_/,"_"))}He.push("@none");const Ie=me.inverse[ae];for(const we of Le){if(!(we in Ie))continue;const pe=Ie[we][ye];for(const nt of He)if(nt in pe)return pe[nt]}return null}(me,ae,_e,Oe,Je,Pt);if(null!==pt)return pt}if(Le.vocab&&"@vocab"in me){const qe=me["@vocab"];if(0===ae.indexOf(qe)&&ae!==qe){const Oe=ae.substr(qe.length);if(!me.mappings.has(Oe))return Oe}}let Ie=null;const we=[];let pe=me.fastCurieMap;const nt=ae.length-1;for(let qe=0;qe<nt&&ae[qe]in pe;++qe)pe=pe[ae[qe]],""in pe&&we.push(pe[""][0]);for(let qe=we.length-1;qe>=0;--qe){const Oe=we[qe],Je=Oe.terms;for(const Pt of Je){const pt=Pt+":"+ae.substr(Oe.iri.length);me.mappings.get(Pt)._prefix&&(!me.mappings.has(pt)||null===_e&&me.mappings.get(pt)["@id"]===ae)&&(null===Ie||B(pt,Ie)<0)&&(Ie=pt)}}if(null!==Ie)return Ie;for(const[qe,Oe]of me.mappings)if(Oe&&Oe._prefix&&ae.startsWith(qe+":"))throw new N(`Absolute IRI "${ae}" confused with prefix "${qe}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:me});if(!Le.vocab){if("@base"in me){if(me["@base"]){const qe=se(te($e,me["@base"]),ae);return be.test(qe)?`./${qe}`:qe}return ae}return se($e,ae)}return ae},H.compactValue=({activeCtx:me,activeProperty:ae,value:_e,options:Le})=>{if(k(_e)){const Ie=O(me,ae,"@type"),we=O(me,ae,"@language"),pe=O(me,ae,"@direction"),nt=O(me,ae,"@container")||[],qe="@index"in _e&&!nt.includes("@index");if(!qe&&"@none"!==Ie&&(_e["@type"]===Ie||"@language"in _e&&_e["@language"]===we&&"@direction"in _e&&_e["@direction"]===pe||"@language"in _e&&_e["@language"]===we||"@direction"in _e&&_e["@direction"]===pe))return _e["@value"];const Oe=Object.keys(_e).length,Je=1===Oe||2===Oe&&"@index"in _e&&!qe,Pt="@language"in me,pt=F(_e["@value"]),at=me.mappings.has(ae)&&null===me.mappings.get(ae)["@language"];if(Je&&"@none"!==Ie&&(!Pt||!pt||at))return _e["@value"];const ut={};return qe&&(ut[H.compactIri({activeCtx:me,iri:"@index",relativeTo:{vocab:!0}})]=_e["@index"]),"@type"in _e?ut[H.compactIri({activeCtx:me,iri:"@type",relativeTo:{vocab:!0}})]=H.compactIri({activeCtx:me,iri:_e["@type"],relativeTo:{vocab:!0}}):"@language"in _e&&(ut[H.compactIri({activeCtx:me,iri:"@language",relativeTo:{vocab:!0}})]=_e["@language"]),"@direction"in _e&&(ut[H.compactIri({activeCtx:me,iri:"@direction",relativeTo:{vocab:!0}})]=_e["@direction"]),ut[H.compactIri({activeCtx:me,iri:"@value",relativeTo:{vocab:!0}})]=_e["@value"],ut}const ye=U(me,ae,{vocab:!0},Le),$e=O(me,ae,"@type"),He=H.compactIri({activeCtx:me,iri:_e["@id"],relativeTo:{vocab:"@vocab"===$e},base:Le.base});return"@id"===$e||"@vocab"===$e||"@graph"===ye?He:{[H.compactIri({activeCtx:me,iri:"@id",relativeTo:{vocab:!0}})]:He}}},313:Ne=>{"use strict";const Re="http://www.w3.org/1999/02/22-rdf-syntax-ns#",X="http://www.w3.org/2001/XMLSchema#";Ne.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:Re,RDF_LIST:Re+"List",RDF_FIRST:Re+"first",RDF_REST:Re+"rest",RDF_NIL:Re+"nil",RDF_TYPE:Re+"type",RDF_PLAIN_LITERAL:Re+"PlainLiteral",RDF_XML_LITERAL:Re+"XMLLiteral",RDF_JSON_LITERAL:Re+"JSON",RDF_OBJECT:Re+"object",RDF_LANGSTRING:Re+"langString",XSD:X,XSD_BOOLEAN:X+"boolean",XSD_DOUBLE:X+"double",XSD_INTEGER:X+"integer",XSD_STRING:X+"string"}},2134:(Ne,Re,X)=>{"use strict";var q=X(9344).default;const N=X(4249),C=X(3327),{isArray:S,isObject:F,isString:D,isUndefined:T}=X(2353),{isAbsolute:k,isRelative:G,prependBase:z}=X(4920),{handleEvent:L}=X(5775),{REGEX_BCP47:U,REGEX_KEYWORD:O,asArray:V,compareShortestLeast:ie}=X(4249),Y=new Map,te={};function be(W,B,H,ee,le,me){if(null===B||!D(B)||te.isKeyword(B))return B;if(B.match(O))return null;if(ee&&ee.hasOwnProperty(B)&&!0!==le.get(B)&&te.createTermDefinition({activeCtx:W,localCtx:ee,term:B,defined:le,options:me}),(H=H||{}).vocab){const _e=W.mappings.get(B);if(null===_e)return null;if(F(_e)&&"@id"in _e)return _e["@id"]}const ae=B.indexOf(":");if(ae>0){const _e=B.substr(0,ae),Le=B.substr(ae+1);if("_"===_e||0===Le.indexOf("//"))return B;ee&&ee.hasOwnProperty(_e)&&te.createTermDefinition({activeCtx:W,localCtx:ee,term:_e,defined:le,options:me});const ye=W.mappings.get(_e);if(ye&&ye._prefix)return ye["@id"]+Le;if(k(B))return B}if(H.vocab&&"@vocab"in W)B=W["@vocab"]+B;else if(H.base){let _e,Le;"@base"in W?W["@base"]?(Le=z(me.base,W["@base"]),_e=z(Le,B)):(Le=W["@base"],_e=B):(Le=me.base,_e=z(me.base,B)),B=_e}return B}function ce(W,B){if(!W||"object"!=typeof W||!B||"object"!=typeof B)return W===B;const H=Array.isArray(W);if(H!==Array.isArray(B))return!1;if(H){if(W.length!==B.length)return!1;for(let me=0;me<W.length;++me)if(!ce(W[me],B[me]))return!1;return!0}const ee=Object.keys(W),le=Object.keys(B);if(ee.length!==le.length)return!1;for(const me in W){let ae=W[me],_e=B[me];if("@container"===me&&Array.isArray(ae)&&Array.isArray(_e)&&(ae=ae.slice().sort(),_e=_e.slice().sort()),!ce(ae,_e))return!1}return!0}Ne.exports=te,te.process=function(){var W=q(function*({activeCtx:B,localCtx:H,options:ee,propagate:le=!0,overrideProtected:me=!1,cycles:ae=new Set}){if(F(H)&&"@context"in H&&S(H["@context"])&&(H=H["@context"]),0===V(H).length)return B;const Le=[],ye=[({event:we,next:pe})=>{Le.push(we),pe()}];ee.eventHandler&&ye.push(ee.eventHandler);const $e=ee;ee={...ee,eventHandler:ye};const He=yield ee.contextResolver.resolve({activeCtx:B,context:H,documentLoader:ee.documentLoader,base:ee.base});F(He[0].document)&&"boolean"==typeof He[0].document["@propagate"]&&(le=He[0].document["@propagate"]);let Ie=B;!le&&!Ie.previousContext&&(Ie=Ie.clone(),Ie.previousContext=B);for(const we of He){let{document:pe}=we;if(B=Ie,null===pe){if(!me&&0!==Object.keys(B.protected).length)throw new C("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});Ie=B=te.getInitialContext(ee).clone();continue}const nt=we.getProcessed(B);if(nt){if($e.eventHandler)for(const Oe of nt.events)L({event:Oe,options:$e});Ie=B=nt.context;continue}if(F(pe)&&"@context"in pe&&(pe=pe["@context"]),!F(pe))throw new C("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:pe});Ie=Ie.clone();const qe=new Map;if("@version"in pe){if(1.1!==pe["@version"])throw new C("Unsupported JSON-LD version: "+pe["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:pe});if(B.processingMode&&"json-ld-1.0"===B.processingMode)throw new C("@version: "+pe["@version"]+" not compatible with "+B.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:pe});Ie.processingMode="json-ld-1.1",Ie["@version"]=pe["@version"],qe.set("@version",!0)}if(Ie.processingMode=Ie.processingMode||B.processingMode,"@base"in pe){let Oe=pe["@base"];if(null!==Oe&&!k(Oe)){if(!G(Oe))throw new C('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:pe});Oe=z(Ie["@base"],Oe)}Ie["@base"]=Oe,qe.set("@base",!0)}if("@vocab"in pe){const Oe=pe["@vocab"];if(null===Oe)delete Ie["@vocab"];else{if(!D(Oe))throw new C('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:pe});if(!k(Oe)&&te.processingMode(Ie,1))throw new C('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:pe});{const Je=be(Ie,Oe,{vocab:!0,base:!0},void 0,void 0,ee);k(Je)||ee.eventHandler&&L({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab:Je}},options:ee}),Ie["@vocab"]=Je}}qe.set("@vocab",!0)}if("@language"in pe){const Oe=pe["@language"];if(null===Oe)delete Ie["@language"];else{if(!D(Oe))throw new C('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:pe});Oe.match(U)||ee.eventHandler&&L({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Oe}},options:ee}),Ie["@language"]=Oe.toLowerCase()}qe.set("@language",!0)}if("@direction"in pe){const Oe=pe["@direction"];if("json-ld-1.0"===B.processingMode)throw new C("Invalid JSON-LD syntax; @direction not compatible with "+B.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:pe});if(null===Oe)delete Ie["@direction"];else{if("ltr"!==Oe&&"rtl"!==Oe)throw new C('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:pe});Ie["@direction"]=Oe}qe.set("@direction",!0)}if("@propagate"in pe){const Oe=pe["@propagate"];if("json-ld-1.0"===B.processingMode)throw new C("Invalid JSON-LD syntax; @propagate not compatible with "+B.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:pe});if("boolean"!=typeof Oe)throw new C("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:H});qe.set("@propagate",!0)}if("@import"in pe){const Oe=pe["@import"];if("json-ld-1.0"===B.processingMode)throw new C("Invalid JSON-LD syntax; @import not compatible with "+B.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:pe});if(!D(Oe))throw new C("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:H});const Je=yield ee.contextResolver.resolve({activeCtx:B,context:Oe,documentLoader:ee.documentLoader,base:ee.base});if(1!==Je.length)throw new C("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:H});const Pt=Je[0].getProcessed(B);if(Pt)pe=Pt;else{const pt=Je[0].document;if("@import"in pt)throw new C("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:H});for(const at in pt)pe.hasOwnProperty(at)||(pe[at]=pt[at]);Je[0].setProcessed(B,pe)}qe.set("@import",!0)}qe.set("@protected",pe["@protected"]||!1);for(const Oe in pe)if(te.createTermDefinition({activeCtx:Ie,localCtx:pe,term:Oe,defined:qe,options:ee,overrideProtected:me}),F(pe[Oe])&&"@context"in pe[Oe]){const Je=pe[Oe]["@context"];let Pt=!0;if(D(Je)){const pt=z(ee.base,Je);ae.has(pt)?Pt=!1:ae.add(pt)}if(Pt)try{yield te.process({activeCtx:Ie.clone(),localCtx:pe[Oe]["@context"],overrideProtected:!0,options:ee,cycles:ae})}catch{throw new C("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:pe[Oe]["@context"],term:Oe})}}we.setProcessed(B,{context:Ie,events:Le})}return Ie});return function(B){return W.apply(this,arguments)}}(),te.createTermDefinition=({activeCtx:W,localCtx:B,term:H,defined:ee,options:le,overrideProtected:me=!1})=>{if(ee.has(H)){if(ee.get(H))return;throw new C("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:B,term:H})}let ae;if(ee.set(H,!1),B.hasOwnProperty(H)&&(ae=B[H]),"@type"===H&&F(ae)&&"@set"===(ae["@container"]||"@set")&&te.processingMode(W,1.1)){const we=["@container","@id","@protected"],pe=Object.keys(ae);if(0===pe.length||pe.some(nt=>!we.includes(nt)))throw new C("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:B,term:H})}else{if(te.isKeyword(H))throw new C("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:B,term:H});if(H.match(O))return void(le.eventHandler&&L({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term:H}},options:le}));if(""===H)throw new C("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:B})}const _e=W.mappings.get(H);W.mappings.has(H)&&W.mappings.delete(H);let Le=!1;if((D(ae)||null===ae)&&(Le=!0,ae={"@id":ae}),!F(ae))throw new C("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:B});const ye={};W.mappings.set(H,ye),ye.reverse=!1;const $e=["@container","@id","@language","@reverse","@type"];te.processingMode(W,1.1)&&$e.push("@context","@direction","@index","@nest","@prefix","@protected");for(const we in ae)if(!$e.includes(we))throw new C("Invalid JSON-LD syntax; a term definition must not contain "+we,"jsonld.SyntaxError",{code:"invalid term definition",context:B});const He=H.indexOf(":");if(ye._termHasColon=He>0,"@reverse"in ae){if("@id"in ae)throw new C("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:B});if("@nest"in ae)throw new C("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:B});const we=ae["@reverse"];if(!D(we))throw new C("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:B});if(we.match(O))return le.eventHandler&&L({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse:we}},options:le}),void(_e?W.mappings.set(H,_e):W.mappings.delete(H));const pe=be(W,we,{vocab:!0,base:!1},B,ee,le);if(!k(pe))throw new C("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:B});ye["@id"]=pe,ye.reverse=!0}else if("@id"in ae){let we=ae["@id"];if(we&&!D(we))throw new C("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:B});if(null===we)ye["@id"]=null;else{if(!te.isKeyword(we)&&we.match(O))return le.eventHandler&&L({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:we}},options:le}),void(_e?W.mappings.set(H,_e):W.mappings.delete(H));if(we!==H){if(we=be(W,we,{vocab:!0,base:!1},B,ee,le),!k(we)&&!te.isKeyword(we))throw new C("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:B});if(H.match(/(?::[^:])|\//)&&be(W,H,{vocab:!0,base:!1},B,new Map(ee).set(H,!0),le)!==we)throw new C("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:B});ye["@id"]=we,ye._prefix=Le&&!ye._termHasColon&&we.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in ye))if(ye._termHasColon){const we=H.substr(0,He);if(B.hasOwnProperty(we)&&te.createTermDefinition({activeCtx:W,localCtx:B,term:we,defined:ee,options:le}),W.mappings.has(we)){const pe=H.substr(He+1);ye["@id"]=W.mappings.get(we)["@id"]+pe}else ye["@id"]=H}else if("@type"===H)ye["@id"]=H;else{if(!("@vocab"in W))throw new C("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:B,term:H});ye["@id"]=W["@vocab"]+H}if((!0===ae["@protected"]||!0===ee.get("@protected")&&!1!==ae["@protected"])&&(W.protected[H]=!0,ye.protected=!0),ee.set(H,!0),"@type"in ae){let we=ae["@type"];if(!D(we))throw new C("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:B});if("@json"===we||"@none"===we){if(te.processingMode(W,1))throw new C(`Invalid JSON-LD syntax; an @context @type value must not be "${we}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:B})}else if("@id"!==we&&"@vocab"!==we){if(we=be(W,we,{vocab:!0,base:!1},B,ee,le),!k(we))throw new C("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:B});if(0===we.indexOf("_:"))throw new C("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:B})}ye["@type"]=we}if("@container"in ae){const we=D(ae["@container"])?[ae["@container"]]:ae["@container"]||[],pe=["@list","@set","@index","@language"];let nt=!0;const qe=we.includes("@set");if(te.processingMode(W,1.1)){if(pe.push("@graph","@id","@type"),we.includes("@list")){if(1!==we.length)throw new C("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:B})}else if(we.includes("@graph")){if(we.some(Oe=>"@graph"!==Oe&&"@id"!==Oe&&"@index"!==Oe&&"@set"!==Oe))throw new C("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:B})}else nt&=we.length<=(qe?2:1);if(we.includes("@type")&&(ye["@type"]=ye["@type"]||"@id",!["@id","@vocab"].includes(ye["@type"])))throw new C("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:B})}else nt&=!S(ae["@container"]),nt&=we.length<=1;if(nt&=we.every(Oe=>pe.includes(Oe)),nt&=!(qe&&we.includes("@list")),!nt)throw new C("Invalid JSON-LD syntax; @context @container value must be one of the following: "+pe.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:B});if(ye.reverse&&!we.every(Oe=>["@index","@set"].includes(Oe)))throw new C("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:B});ye["@container"]=we}if("@index"in ae){if(!("@container"in ae)||!ye["@container"].includes("@index"))throw new C(`Invalid JSON-LD syntax; @index without @index in @container: "${ae["@index"]}" on term "${H}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:B});if(!D(ae["@index"])||0===ae["@index"].indexOf("@"))throw new C(`Invalid JSON-LD syntax; @index must expand to an IRI: "${ae["@index"]}" on term "${H}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:B});ye["@index"]=ae["@index"]}if("@context"in ae&&(ye["@context"]=ae["@context"]),"@language"in ae&&!("@type"in ae)){let we=ae["@language"];if(null!==we&&!D(we))throw new C("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:B});null!==we&&(we=we.toLowerCase()),ye["@language"]=we}if("@prefix"in ae){if(H.match(/:|\//))throw new C("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:B});if(te.isKeyword(ye["@id"]))throw new C("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:B});if("boolean"!=typeof ae["@prefix"])throw new C("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:B});ye._prefix=!0===ae["@prefix"]}if("@direction"in ae){const we=ae["@direction"];if(null!==we&&"ltr"!==we&&"rtl"!==we)throw new C('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:B});ye["@direction"]=we}if("@nest"in ae){const we=ae["@nest"];if(!D(we)||"@nest"!==we&&0===we.indexOf("@"))throw new C("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:B});ye["@nest"]=we}const Ie=ye["@id"];if("@context"===Ie||"@preserve"===Ie)throw new C("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:B});if(_e&&_e.protected&&!me&&(W.protected[H]=!0,ye.protected=!0,!ce(_e,ye)))throw new C("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:B,term:H})},te.expandIri=(W,B,H,ee)=>be(W,B,H,void 0,void 0,ee),te.getInitialContext=W=>{const B=JSON.stringify({processingMode:W.processingMode}),H=Y.get(B);if(H)return H;const ee={processingMode:W.processingMode,mappings:new Map,inverse:null,getInverse:function le(){const ye=this;if(ye.inverse)return ye.inverse;const $e=ye.inverse={},He=ye.fastCurieMap={},Ie={},we=(ye["@language"]||"@none").toLowerCase(),pe=ye["@direction"],nt=ye.mappings,qe=[...nt.keys()].sort(ie);for(const Oe of qe){const Je=nt.get(Oe);if(null===Je)continue;let Pt=Je["@container"]||"@none";if(Pt=[].concat(Pt).sort().join(""),null===Je["@id"])continue;const pt=V(Je["@id"]);for(const at of pt){let ut=$e[at];const We=te.isKeyword(at);if(ut)!We&&!Je._termHasColon&&Ie[at].push(Oe);else if($e[at]=ut={},!We&&!Je._termHasColon){Ie[at]=[Oe];const De={iri:at,terms:Ie[at]};at[0]in He?He[at[0]].push(De):He[at[0]]=[De]}if(ut[Pt]||(ut[Pt]={"@language":{},"@type":{},"@any":{}}),ut=ut[Pt],ae(Oe,ut["@any"],"@none"),Je.reverse)ae(Oe,ut["@type"],"@reverse");else if("@none"===Je["@type"])ae(Oe,ut["@any"],"@none"),ae(Oe,ut["@language"],"@none"),ae(Oe,ut["@type"],"@none");else if("@type"in Je)ae(Oe,ut["@type"],Je["@type"]);else if("@language"in Je&&"@direction"in Je){const De=Je["@language"],Be=Je["@direction"];ae(Oe,ut["@language"],De&&Be?`${De}_${Be}`.toLowerCase():De?De.toLowerCase():Be?`_${Be}`:"@null")}else"@language"in Je?ae(Oe,ut["@language"],(Je["@language"]||"@null").toLowerCase()):"@direction"in Je?ae(Oe,ut["@language"],Je["@direction"]?`_${Je["@direction"]}`:"@none"):pe?(ae(Oe,ut["@language"],`_${pe}`),ae(Oe,ut["@language"],"@none"),ae(Oe,ut["@type"],"@none")):(ae(Oe,ut["@language"],we),ae(Oe,ut["@language"],"@none"),ae(Oe,ut["@type"],"@none"))}}for(const Oe in He)me(He,Oe,1);return $e},clone:function _e(){const ye={};return ye.mappings=N.clone(this.mappings),ye.clone=this.clone,ye.inverse=null,ye.getInverse=this.getInverse,ye.protected=N.clone(this.protected),this.previousContext&&(ye.previousContext=this.previousContext.clone()),ye.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(ye["@base"]=this["@base"]),"@language"in this&&(ye["@language"]=this["@language"]),"@vocab"in this&&(ye["@vocab"]=this["@vocab"]),ye},revertToPreviousContext:function Le(){return this.previousContext?this.previousContext.clone():this},protected:{}};return 1e4===Y.size&&Y.clear(),Y.set(B,ee),ee;function me(ye,$e,He){const Ie=ye[$e],we=ye[$e]={};let pe,nt;for(const qe of Ie)pe=qe.iri,nt=He>=pe.length?"":pe[He],nt in we?we[nt].push(qe):we[nt]=[qe];for(const qe in we)""!==qe&&me(we,qe,He+1)}function ae(ye,$e,He){$e.hasOwnProperty(He)||($e[He]=ye)}},te.getContextValue=(W,B,H)=>{if(null===B)return"@context"===H?void 0:null;if(W.mappings.has(B)){const ee=W.mappings.get(B);if(T(H))return ee;if(ee.hasOwnProperty(H))return ee[H]}return"@language"===H&&H in W||"@direction"===H&&H in W?W[H]:"@context"!==H?null:void 0},te.processingMode=(W,B)=>B.toString()>="1.1"?!W.processingMode||W.processingMode>="json-ld-"+B.toString():"json-ld-1.0"===W.processingMode,te.isKeyword=W=>{if(!D(W)||"@"!==W[0])return!1;switch(W){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1}},8719:(Ne,Re,X)=>{"use strict";var q=X(9344).default;const{parseLinkHeader:N,buildHeaders:C}=X(4249),{LINK_HEADER_CONTEXT:S}=X(313),F=X(3327),D=X(2210),{prependBase:T}=X(4920),k=/(^|(\r\n))link:/i;function G(z,L,U){const O=new(z=z||XMLHttpRequest);return new Promise((V,ie)=>{O.onload=()=>V(O),O.onerror=Y=>ie(Y),O.open("GET",L,!0);for(const Y in U)O.setRequestHeader(Y,U[Y]);O.send()})}Ne.exports=({secure:z,headers:L={},xhr:U}={headers:{}})=>{return L=C(L),(new D).wrapLoader(V);function V(Y){return ie.apply(this,arguments)}function ie(){return(ie=q(function*(Y){if(0!==Y.indexOf("http:")&&0!==Y.indexOf("https:"))throw new F('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:Y});if(z&&0!==Y.indexOf("https"))throw new F('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:Y});let se;try{se=yield G(U,Y,L)}catch(B){throw new F("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:Y,cause:B})}if(se.status>=400)throw new F("URL could not be dereferenced: "+se.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:Y,httpStatusCode:se.status});let te={contextUrl:null,documentUrl:Y,document:se.response},be=null;const ce=se.getResponseHeader("Content-Type");let W;if(k.test(se.getAllResponseHeaders())&&(W=se.getResponseHeader("Link")),W&&"application/ld+json"!==ce){const B=N(W),H=B[S];if(Array.isArray(H))throw new F("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:Y});H&&(te.contextUrl=H.target),be=B.alternate,be&&"application/ld+json"==be.type&&!(ce||"").match(/^application\/(\w*\+)?json$/)&&(te=yield V(T(Y,be.target)))}return te})).apply(this,arguments)}}},5775:(Ne,Re,X)=>{"use strict";const q=X(3327),{isArray:N}=X(2353),{asArray:C}=X(4249),S={};function F({event:T,handlers:k}){let G=!0;for(let z=0;G&&z<k.length;++z){G=!1;const L=k[z];if(N(L))G=F({event:T,handlers:L});else if("function"==typeof L)L({event:T,next:()=>{G=!0}});else{if("object"!=typeof L)throw new q("Invalid event handler.","jsonld.InvalidEventHandler",{event:T});T.code in L?L[T.code]({event:T,next:()=>{G=!0}}):G=!0}}return G}Ne.exports=S,S.defaultEventHandler=null,S.setupEventHandler=({options:T={}})=>{const k=[].concat(T.safe?S.safeEventHandler:[],T.eventHandler?C(T.eventHandler):[],S.defaultEventHandler?S.defaultEventHandler:[]);return 0===k.length?null:k},S.handleEvent=({event:T,options:k})=>{F({event:T,handlers:k.eventHandler})};const D=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference"]);S.safeEventHandler=function({event:k,next:G}){if("warning"===k.level&&D.has(k.code))throw new q("Safe mode validation error.","jsonld.ValidationError",{event:k});G()},S.logEventHandler=function({event:k,next:G}){console.log(`EVENT: ${k.message}`,{event:k}),G()},S.logWarningEventHandler=function({event:k,next:G}){"warning"===k.level&&console.warn(`WARNING: ${k.message}`,{event:k}),G()},S.unhandledEventHandler=function({event:k}){throw new q("No handler for event.","jsonld.UnhandledEvent",{event:k})},S.setDefaultEventHandler=function({eventHandler:T}={}){S.defaultEventHandler=T?C(T):null}},554:(Ne,Re,X)=>{"use strict";var q=X(9344).default;const N=X(3327),{isArray:C,isObject:S,isEmptyObject:F,isString:D,isUndefined:T}=X(2353),{isList:k,isValue:G,isGraph:z,isSubject:L}=X(9094),{expandIri:U,getContextValue:O,isKeyword:V,process:ie,processingMode:Y}=X(2134),{isAbsolute:se}=X(4920),{REGEX_BCP47:te,REGEX_KEYWORD:be,addValue:ce,asArray:W,getValues:B,validateTypeValue:H}=X(4249),{handleEvent:ee}=X(5775),le={};function me(He){return ae.apply(this,arguments)}function ae(){return(ae=q(function*({activeCtx:He,activeProperty:Ie,expandedActiveProperty:we,element:pe,expandedParent:nt,options:qe={},insideList:Oe,typeKey:Je,typeScopedContext:Pt}){const pt=Object.keys(pe).sort(),at=[];let ut;const We=pe[Je]&&"@json"===U(He,C(pe[Je])?pe[Je][0]:pe[Je],{vocab:!0},{...qe,typeExpansion:!0});for(const De of pt){let ht,Be=pe[De];if("@context"===De)continue;const kt=U(He,De,{vocab:!0},qe);if(null===kt||!se(kt)&&!V(kt)){qe.eventHandler&&ee({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:De,expandedProperty:kt}},options:qe});continue}if(V(kt)){if("@reverse"===we)throw new N("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:Be});if(kt in nt&&"@included"!==kt&&"@type"!==kt)throw new N("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:kt})}if("@id"===kt){if(!D(Be)){if(!qe.isFrame)throw new N('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:Be});if(S(Be)){if(!F(Be))throw new N('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Be})}else{if(!C(Be))throw new N('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Be});if(!Be.every(Ot=>D(Ot)))throw new N('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Be})}}ce(nt,"@id",W(Be).map(Ot=>{if(D(Ot)){const sn=U(He,Ot,{base:!0},qe);return qe.eventHandler&&(null===sn?ee(null===Ot?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:Ot}},options:qe}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:Ot}},options:qe}):se(sn)||ee({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:Ot,expandedId:sn}},options:qe})),sn}return Ot}),{propertyIsArray:qe.isFrame});continue}if("@type"===kt){S(Be)&&(Be=Object.fromEntries(Object.entries(Be).map(([Ot,sn])=>[U(Pt,Ot,{vocab:!0}),W(sn).map(hn=>U(Pt,hn,{base:!0,vocab:!0},{...qe,typeExpansion:!0}))]))),H(Be,qe.isFrame),ce(nt,"@type",W(Be).map(Ot=>{if(D(Ot)){const sn=U(Pt,Ot,{base:!0,vocab:!0},{...qe,typeExpansion:!0});return"@json"!==sn&&!se(sn)&&qe.eventHandler&&ee({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:Ot}},options:qe}),sn}return Ot}),{propertyIsArray:qe.isFrame});continue}if("@included"===kt&&Y(He,1.1)){const Ot=W(yield le.expand({activeCtx:He,activeProperty:Ie,element:Be,options:qe}));if(!Ot.every(sn=>L(sn)))throw new N("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:Be});ce(nt,"@included",Ot,{propertyIsArray:!0});continue}if("@graph"===kt&&!S(Be)&&!C(Be))throw new N('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:Be});if("@value"===kt){ut=Be,We&&Y(He,1.1)?nt["@value"]=Be:ce(nt,"@value",Be,{propertyIsArray:qe.isFrame});continue}if("@language"===kt){if(null===Be)continue;if(!D(Be)&&!qe.isFrame)throw new N('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:Be});Be=W(Be).map(Ot=>D(Ot)?Ot.toLowerCase():Ot);for(const Ot of Be)D(Ot)&&!Ot.match(te)&&qe.eventHandler&&ee({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Ot}},options:qe});ce(nt,"@language",Be,{propertyIsArray:qe.isFrame});continue}if("@direction"===kt){if(!D(Be)&&!qe.isFrame)throw new N('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:Be});Be=W(Be);for(const Ot of Be)if(D(Ot)&&"ltr"!==Ot&&"rtl"!==Ot)throw new N('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:Be});ce(nt,"@direction",Be,{propertyIsArray:qe.isFrame});continue}if("@index"===kt){if(!D(Be))throw new N('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:Be});ce(nt,"@index",Be);continue}if("@reverse"===kt){if(!S(Be))throw new N('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:Be});if(ht=yield le.expand({activeCtx:He,activeProperty:"@reverse",element:Be,options:qe}),"@reverse"in ht)for(const sn in ht["@reverse"])ce(nt,sn,ht["@reverse"][sn],{propertyIsArray:!0});let Ot=nt["@reverse"]||null;for(const sn in ht){if("@reverse"===sn)continue;null===Ot&&(Ot=nt["@reverse"]={}),ce(Ot,sn,[],{propertyIsArray:!0});const hn=ht[sn];for(let $n=0;$n<hn.length;++$n){const wr=hn[$n];if(G(wr)||k(wr))throw new N('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:ht});ce(Ot,sn,wr,{propertyIsArray:!0})}}continue}if("@nest"===kt){at.push(De);continue}let ft=He;const Nt=O(He,De,"@context");T(Nt)||(ft=yield ie({activeCtx:He,localCtx:Nt,propagate:!0,overrideProtected:!0,options:qe}));const tn=O(ft,De,"@container")||[];if(tn.includes("@language")&&S(Be))ht=Le(ft,Be,O(ft,De,"@direction"),qe);else if(tn.includes("@index")&&S(Be)){const Ot=tn.includes("@graph"),sn=O(ft,De,"@index")||"@index",hn="@index"!==sn&&U(He,sn,{vocab:!0},qe);ht=yield ye({activeCtx:ft,options:qe,activeProperty:De,value:Be,asGraph:Ot,indexKey:sn,propertyIndex:hn})}else if(tn.includes("@id")&&S(Be)){const Ot=tn.includes("@graph");ht=yield ye({activeCtx:ft,options:qe,activeProperty:De,value:Be,asGraph:Ot,indexKey:"@id"})}else if(tn.includes("@type")&&S(Be))ht=yield ye({activeCtx:ft.revertToPreviousContext(),options:qe,activeProperty:De,value:Be,asGraph:!1,indexKey:"@type"});else{const Ot="@list"===kt;if(Ot||"@set"===kt){let sn=Ie;Ot&&"@graph"===we&&(sn=null),ht=yield le.expand({activeCtx:ft,activeProperty:sn,element:Be,options:qe,insideList:Ot})}else ht="@json"===O(He,De,"@type")?{"@type":"@json","@value":Be}:yield le.expand({activeCtx:ft,activeProperty:De,element:Be,options:qe,insideList:!1})}if(null!==ht||"@value"===kt){if("@list"!==kt&&!k(ht)&&tn.includes("@list")&&(ht={"@list":W(ht)}),tn.includes("@graph")&&!tn.some(Ot=>"@id"===Ot||"@index"===Ot)&&(ht=W(ht).map(Ot=>({"@graph":W(Ot)}))),ft.mappings.has(De)&&ft.mappings.get(De).reverse){const Ot=nt["@reverse"]=nt["@reverse"]||{};ht=W(ht);for(let sn=0;sn<ht.length;++sn){const hn=ht[sn];if(G(hn)||k(hn))throw new N('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:ht});ce(Ot,kt,hn,{propertyIsArray:!0})}continue}ce(nt,kt,ht,{propertyIsArray:!0})}}if("@value"in nt&&("@json"!==nt["@type"]||!Y(He,1.1))&&(S(ut)||C(ut))&&!qe.isFrame)throw new N('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:ut});for(const De of at){const Be=C(pe[De])?pe[De]:[pe[De]];for(const ht of Be){if(!S(ht)||Object.keys(ht).some(kt=>"@value"===U(He,kt,{vocab:!0},qe)))throw new N("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:ht});yield me({activeCtx:He,activeProperty:Ie,expandedActiveProperty:we,element:ht,expandedParent:nt,options:qe,insideList:Oe,typeScopedContext:Pt,typeKey:Je})}}})).apply(this,arguments)}function _e({activeCtx:He,activeProperty:Ie,value:we,options:pe}){if(null==we)return null;const nt=U(He,Ie,{vocab:!0},pe);if("@id"===nt)return U(He,we,{base:!0},pe);if("@type"===nt)return U(He,we,{vocab:!0,base:!0},{...pe,typeExpansion:!0});const qe=O(He,Ie,"@type");if(("@id"===qe||"@graph"===nt)&&D(we)){const Je=U(He,we,{base:!0},pe);return null===Je&&we.match(be)&&pe.eventHandler&&ee({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:Ie}},options:pe}),{"@id":Je}}if("@vocab"===qe&&D(we))return{"@id":U(He,we,{vocab:!0,base:!0},pe)};if(V(nt))return we;const Oe={};if(qe&&!["@id","@vocab","@none"].includes(qe))Oe["@type"]=qe;else if(D(we)){const Je=O(He,Ie,"@language");null!==Je&&(Oe["@language"]=Je);const Pt=O(He,Ie,"@direction");null!==Pt&&(Oe["@direction"]=Pt)}return["boolean","number","string"].includes(typeof we)||(we=we.toString()),Oe["@value"]=we,Oe}function Le(He,Ie,we,pe){const nt=[],qe=Object.keys(Ie).sort();for(const Oe of qe){const Je=U(He,Oe,{vocab:!0},pe);let Pt=Ie[Oe];C(Pt)||(Pt=[Pt]);for(const pt of Pt){if(null===pt)continue;if(!D(pt))throw new N("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:Ie});const at={"@value":pt};"@none"!==Je&&(Oe.match(te)||pe.eventHandler&&ee({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Oe}},options:pe}),at["@language"]=Oe.toLowerCase()),we&&(at["@direction"]=we),nt.push(at)}}return nt}function ye(He){return $e.apply(this,arguments)}function $e(){return($e=q(function*({activeCtx:He,options:Ie,activeProperty:we,value:pe,asGraph:nt,indexKey:qe,propertyIndex:Oe}){const Je=[],Pt=Object.keys(pe).sort(),pt="@type"===qe;for(let at of Pt){if(pt){const De=O(He,at,"@context");T(De)||(He=yield ie({activeCtx:He,localCtx:De,propagate:!1,options:Ie}))}let We,ut=pe[at];C(ut)||(ut=[ut]),ut=yield le.expand({activeCtx:He,activeProperty:we,element:ut,options:Ie,insideList:!1,insideIndex:!0}),We=Oe?"@none"===at?"@none":_e({activeCtx:He,activeProperty:qe,value:at,options:Ie}):U(He,at,{vocab:!0},Ie),"@id"===qe?at=U(He,at,{base:!0},Ie):pt&&(at=We);for(let De of ut){if(nt&&!z(De)&&(De={"@graph":[De]}),"@type"===qe)"@none"===We||(De["@type"]=De["@type"]?[at].concat(De["@type"]):[at]);else{if(G(De)&&!["@language","@type","@index"].includes(qe))throw new N(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${qe}".`,"jsonld.SyntaxError",{code:"invalid value object",value:De});Oe?"@none"!==We&&ce(De,Oe,We,{propertyIsArray:!0,prependValue:!0}):"@none"!==We&&!(qe in De)&&(De[qe]=at)}Je.push(De)}}return Je})).apply(this,arguments)}Ne.exports=le,le.expand=function(){var He=q(function*({activeCtx:Ie,activeProperty:we=null,element:pe,options:nt={},insideList:qe=!1,insideIndex:Oe=!1,typeScopedContext:Je=null}){if(null==pe)return null;if("@default"===we&&(nt=Object.assign({},nt,{isFrame:!1})),!C(pe)&&!S(pe))return qe||null!==we&&"@graph"!==U(Ie,we,{vocab:!0},nt)?_e({activeCtx:Ie,activeProperty:we,value:pe,options:nt}):(nt.eventHandler&&ee({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:pe}},options:nt}),null);if(C(pe)){let ht=[];const kt=O(Ie,we,"@container")||[];qe=qe||kt.includes("@list");for(let ft=0;ft<pe.length;++ft){let Nt=yield le.expand({activeCtx:Ie,activeProperty:we,element:pe[ft],options:nt,insideIndex:Oe,typeScopedContext:Je});qe&&C(Nt)&&(Nt={"@list":Nt}),null!==Nt&&(C(Nt)?ht=ht.concat(Nt):ht.push(Nt))}return ht}const Pt=U(Ie,we,{vocab:!0},nt),pt=O(Ie,we,"@context");Je=Je||(Ie.previousContext?Ie:null);let at=Object.keys(pe).sort(),ut=!Oe;if(ut&&Je&&at.length<=2&&!at.includes("@context"))for(const ht of at){const kt=U(Je,ht,{vocab:!0},nt);if("@value"===kt){ut=!1,Ie=Je;break}if("@id"===kt&&1===at.length){ut=!1;break}}ut&&(Ie=Ie.revertToPreviousContext()),T(pt)||(Ie=yield ie({activeCtx:Ie,localCtx:pt,propagate:!0,overrideProtected:!0,options:nt})),"@context"in pe&&(Ie=yield ie({activeCtx:Ie,localCtx:pe["@context"],options:nt})),Je=Ie;let We=null;for(const ht of at)if("@type"===U(Ie,ht,{vocab:!0},nt)){We=We||ht;const ft=pe[ht],Nt=Array.isArray(ft)?ft.length>1?ft.slice().sort():ft:[ft];for(const tn of Nt){const Ot=O(Je,tn,"@context");T(Ot)||(Ie=yield ie({activeCtx:Ie,localCtx:Ot,options:nt,propagate:!1}))}}let De={};yield me({activeCtx:Ie,activeProperty:we,expandedActiveProperty:Pt,element:pe,expandedParent:De,options:nt,insideList:qe,typeKey:We,typeScopedContext:Je}),at=Object.keys(De);let Be=at.length;if("@value"in De){if("@type"in De&&("@language"in De||"@direction"in De))throw new N('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:De});let ht=Be-1;if("@type"in De&&(ht-=1),"@index"in De&&(ht-=1),"@language"in De&&(ht-=1),"@direction"in De&&(ht-=1),0!==ht)throw new N('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:De});const kt=null===De["@value"]?[]:W(De["@value"]),ft=B(De,"@type");if(!Y(Ie,1.1)||!ft.includes("@json")||1!==ft.length)if(0===kt.length)nt.eventHandler&&ee({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:De}},options:nt}),De=null;else{if(!kt.every(Nt=>D(Nt)||F(Nt))&&"@language"in De)throw new N("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:De});if(!ft.every(Nt=>se(Nt)&&!(D(Nt)&&0===Nt.indexOf("_:"))||F(Nt)))throw new N('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:De})}}else if("@type"in De&&!C(De["@type"]))De["@type"]=[De["@type"]];else if("@set"in De||"@list"in De){if(Be>1&&(2!==Be||!("@index"in De)))throw new N('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:De});"@set"in De&&(De=De["@set"],at=Object.keys(De),Be=at.length)}else 1===Be&&"@language"in De&&(nt.eventHandler&&ee({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:De}},options:nt}),De=null);if(S(De)&&!nt.keepFreeFloatingNodes&&!qe&&(null===we||"@graph"===Pt)&&(0===Be||"@value"in De||"@list"in De||1===Be&&"@id"in De)){if(nt.eventHandler){let ht,kt;0===Be?(ht="empty object",kt="Dropping empty object."):"@value"in De?(ht="object with only @value",kt="Dropping object with only @value."):"@list"in De?(ht="object with only @list",kt="Dropping object with only @list."):1===Be&&"@id"in De&&(ht="object with only @id",kt="Dropping object with only @id."),ee({event:{type:["JsonLdEvent"],code:ht,level:"warning",message:kt,details:{value:De}},options:nt})}De=null}return De});return function(Ie){return He.apply(this,arguments)}}()},7613:(Ne,Re,X)=>{"use strict";const{isSubjectReference:q}=X(9094),{createMergedNodeMap:N}=X(5057),C={};Ne.exports=C,C.flatten=S=>{const F=N(S),D=[],T=Object.keys(F).sort();for(let k=0;k<T.length;++k){const G=F[T[k]];q(G)||D.push(G)}return D}},1938:(Ne,Re,X)=>{"use strict";const{isKeyword:q}=X(2134),N=X(9094),C=X(2353),S=X(4249),F=X(4920),D=X(3327),{createNodeMap:T,mergeNodeMapGraphs:k}=X(5057),G={};function z(W){const B={};for(const H in W)void 0!==W[H]&&(B["@"+H]=[W[H]]);return[B]}function L(W,B,H){for(let ee=H.length-1;ee>=0;--ee){const le=H[ee];if(le.graph===B&&le.subject["@id"]===W["@id"])return!0}return!1}function U(W,B,H){const ee="@"+H;let le=ee in W?W[ee][0]:B[H];if("embed"===H)if(!0===le)le="@once";else if(!1===le)le="@never";else if("@always"!==le&&"@never"!==le&&"@link"!==le&&"@first"!==le&&"@last"!==le&&"@once"!==le)throw new D("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:W});return le}function O(W){if(!C.isArray(W)||1!==W.length||!C.isObject(W[0]))throw new D("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:W});if("@id"in W[0])for(const B of S.asArray(W[0]["@id"]))if(!C.isObject(B)&&!F.isAbsolute(B)||C.isString(B)&&0===B.indexOf("_:"))throw new D("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:W});if("@type"in W[0])for(const B of S.asArray(W[0]["@type"]))if(!C.isObject(B)&&!F.isAbsolute(B)||C.isString(B)&&0===B.indexOf("_:"))throw new D("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:W})}function ie(W,B,H,ee){let le=!0,me=!1;for(const ae in H){let _e=!1;const Le=S.getValues(B,ae),ye=0===S.getValues(H,ae).length;if("@id"===ae){if(C.isEmptyObject(H["@id"][0]||{})?_e=!0:H["@id"].length>=0&&(_e=H["@id"].includes(Le[0])),!ee.requireAll)return _e}else if("@type"===ae){if(le=!1,ye){if(Le.length>0)return!1;_e=!0}else if(1===H["@type"].length&&C.isEmptyObject(H["@type"][0]))_e=Le.length>0;else for(const $e of H["@type"])_e=!(!C.isObject($e)||!("@default"in $e))||_e||Le.some(He=>He===$e);if(!ee.requireAll)return _e}else{if(q(ae))continue;{const $e=S.getValues(H,ae)[0];let He=!1;if($e&&(O([$e]),He="@default"in $e),le=!1,0===Le.length&&He)continue;if(Le.length>0&&ye)return!1;if(void 0===$e){if(Le.length>0)return!1;_e=!0}else if(N.isList($e)){const Ie=$e["@list"][0];if(N.isList(Le[0])){const we=Le[0]["@list"];N.isValue(Ie)?_e=we.some(pe=>ce(Ie,pe)):(N.isSubject(Ie)||N.isSubjectReference(Ie))&&(_e=we.some(pe=>be(W,Ie,pe,ee)))}}else _e=N.isValue($e)?Le.some(Ie=>ce($e,Ie)):N.isSubjectReference($e)?Le.some(Ie=>be(W,$e,Ie,ee)):!!C.isObject($e)&&Le.length>0}}if(!_e&&ee.requireAll)return!1;me=me||_e}return le||me}function Y(W,B){const H=W.uniqueEmbeds[W.graph],ee=H[B],le=ee.parent,me=ee.property,ae={"@id":B};if(C.isArray(le)){for(let Le=0;Le<le.length;++Le)if(S.compareValues(le[Le],ae)){le[Le]=ae;break}}else{const Le=C.isArray(le[me]);S.removeValue(le,me,ae,{propertyIsArray:Le}),S.addValue(le,me,ae,{propertyIsArray:Le})}const _e=Le=>{const ye=Object.keys(H);for(const $e of ye)$e in H&&C.isObject(H[$e].parent)&&H[$e].parent["@id"]===Le&&(delete H[$e],_e($e))};_e(B)}function se(W,B){if(C.isArray(W))return W.map(H=>se(H,B));if(C.isObject(W)){if("@preserve"in W)return W["@preserve"][0];if(N.isValue(W))return W;if(N.isList(W))return W["@list"]=se(W["@list"],B),W;if("@id"in W){const H=W["@id"];if(B.link.hasOwnProperty(H)){const ee=B.link[H].indexOf(W);if(-1!==ee)return B.link[H][ee];B.link[H].push(W)}else B.link[H]=[W]}for(const H in W)"@id"===H&&B.bnodesToClear.includes(W[H])?delete W["@id"]:W[H]=se(W[H],B)}return W}function te(W,B,H){C.isObject(W)?S.addValue(W,B,H,{propertyIsArray:!0}):W.push(H)}function be(W,B,H,ee){if(!("@id"in H))return!1;const le=W.subjects[H["@id"]];return le&&ie(W,le,B,ee)}function ce(W,B){const H=B["@value"],ee=B["@type"],le=B["@language"],me=W["@value"]?C.isArray(W["@value"])?W["@value"]:[W["@value"]]:[],ae=W["@type"]?C.isArray(W["@type"])?W["@type"]:[W["@type"]]:[],_e=W["@language"]?C.isArray(W["@language"])?W["@language"]:[W["@language"]]:[];return 0===me.length&&0===ae.length&&0===_e.length||!(!me.includes(H)&&!C.isEmptyObject(me[0])||!(!ee&&0===ae.length||ae.includes(ee)||ee&&C.isEmptyObject(ae[0]))||!(!le&&0===_e.length||_e.includes(le)||le&&C.isEmptyObject(_e[0])))}Ne.exports=G,G.frameMergedOrDefault=(W,B,H)=>{const ee={options:H,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},le=new S.IdentifierIssuer("_:b");T(W,ee.graphMap,"@default",le),H.merged&&(ee.graphMap["@merged"]=k(ee.graphMap),ee.graph="@merged"),ee.subjects=ee.graphMap[ee.graph];const me=[];return G.frame(ee,Object.keys(ee.subjects).sort(),B,me),H.pruneBlankNodeIdentifiers&&(H.bnodesToClear=Object.keys(ee.bnodeMap).filter(ae=>1===ee.bnodeMap[ae].length)),H.link={},se(me,H)},G.frame=(W,B,H,ee,le=null)=>{O(H);const me=W.options,ae={embed:U(H=H[0],me,"embed"),explicit:U(H,me,"explicit"),requireAll:U(H,me,"requireAll")};W.link.hasOwnProperty(W.graph)||(W.link[W.graph]={});const _e=W.link[W.graph],Le=function V(W,B,H,ee){const le={};for(const me of B){const ae=W.graphMap[W.graph][me];ie(W,ae,H,ee)&&(le[me]=ae)}return le}(W,B,H,ae),ye=Object.keys(Le).sort();for(const $e of ye){const He=Le[$e];if(null===le?W.uniqueEmbeds={[W.graph]:{}}:W.uniqueEmbeds[W.graph]=W.uniqueEmbeds[W.graph]||{},"@link"===ae.embed&&$e in _e){te(ee,le,_e[$e]);continue}const Ie={"@id":$e};if(0===$e.indexOf("_:")&&S.addValue(W.bnodeMap,$e,Ie,{propertyIsArray:!0}),_e[$e]=Ie,("@first"===ae.embed||"@last"===ae.embed)&&W.is11)throw new D("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:H});if(W.embedded||!W.uniqueEmbeds[W.graph].hasOwnProperty($e)){if(W.embedded&&("@never"===ae.embed||L(He,W.graph,W.subjectStack))){te(ee,le,Ie);continue}if(W.embedded&&("@first"==ae.embed||"@once"==ae.embed)&&W.uniqueEmbeds[W.graph].hasOwnProperty($e)){te(ee,le,Ie);continue}if("@last"===ae.embed&&$e in W.uniqueEmbeds[W.graph]&&Y(W,$e),W.uniqueEmbeds[W.graph][$e]={parent:ee,property:le},W.subjectStack.push({subject:He,graph:W.graph}),$e in W.graphMap){let we=!1,pe=null;"@graph"in H?(pe=H["@graph"][0],we=!("@merged"===$e||"@default"===$e),C.isObject(pe)||(pe={})):(we="@merged"!==W.graph,pe={}),we&&G.frame({...W,graph:$e,embedded:!1},Object.keys(W.graphMap[$e]).sort(),[pe],Ie,"@graph")}"@included"in H&&G.frame({...W,embedded:!1},B,H["@included"],Ie,"@included");for(const we of Object.keys(He).sort())if(q(we)){if(Ie[we]=S.clone(He[we]),"@type"===we)for(const pe of He["@type"])0===pe.indexOf("_:")&&S.addValue(W.bnodeMap,pe,Ie,{propertyIsArray:!0})}else if(!ae.explicit||we in H)for(const pe of He[we]){const nt=we in H?H[we]:z(ae);if(N.isList(pe)){const qe=H[we]&&H[we][0]&&H[we][0]["@list"]?H[we][0]["@list"]:z(ae),Oe={"@list":[]};te(Ie,we,Oe);const Je=pe["@list"];for(const Pt of Je)N.isSubjectReference(Pt)?G.frame({...W,embedded:!0},[Pt["@id"]],qe,Oe,"@list"):te(Oe,"@list",S.clone(Pt))}else N.isSubjectReference(pe)?G.frame({...W,embedded:!0},[pe["@id"]],nt,Ie,we):ce(nt[0],pe)&&te(Ie,we,S.clone(pe))}for(const we of Object.keys(H).sort()){if("@type"===we){if(!C.isObject(H[we][0])||!("@default"in H[we][0]))continue}else if(q(we))continue;const pe=H[we][0]||{};if(!U(pe,me,"omitDefault")&&!(we in Ie)){let qe="@null";"@default"in pe&&(qe=S.clone(pe["@default"])),C.isArray(qe)||(qe=[qe]),Ie[we]=[{"@preserve":qe}]}}for(const we of Object.keys(H["@reverse"]||{}).sort()){const pe=H["@reverse"][we];for(const nt of Object.keys(W.subjects))S.getValues(W.subjects[nt],we).some(Oe=>Oe["@id"]===$e)&&(Ie["@reverse"]=Ie["@reverse"]||{},S.addValue(Ie["@reverse"],we,[],{propertyIsArray:!0}),G.frame({...W,embedded:!0},[nt],pe,Ie["@reverse"][we],le))}te(ee,le,Ie),W.subjectStack.pop()}}},G.cleanupNull=(W,B)=>{if(C.isArray(W))return W.map(ee=>G.cleanupNull(ee,B)).filter(ee=>ee);if("@null"===W)return null;if(C.isObject(W)){if("@id"in W){const H=W["@id"];if(B.link.hasOwnProperty(H)){const ee=B.link[H].indexOf(W);if(-1!==ee)return B.link[H][ee];B.link[H].push(W)}else B.link[H]=[W]}for(const H in W)W[H]=G.cleanupNull(W[H],B)}return W}},2216:(Ne,Re,X)=>{"use strict";var q=X(9344).default;const N=X(3327),C=X(9094),S=X(2353),{REGEX_BCP47:F,addValue:D}=X(4249),{handleEvent:T}=X(5775),{RDF_LIST:k,RDF_FIRST:G,RDF_REST:z,RDF_NIL:L,RDF_TYPE:U,RDF_JSON_LITERAL:O,XSD_BOOLEAN:V,XSD_DOUBLE:ie,XSD_INTEGER:Y,XSD_STRING:se}=X(313),te={};function be(ce,W,B,H){if(ce.termType.endsWith("Node"))return{"@id":ce.value};const ee={"@value":ce.value};if(ce.language)ce.language.match(F)||H.eventHandler&&T({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:ce.language}},options:H}),ee["@language"]=ce.language;else{let le=ce.datatype.value;if(le||(le=se),le===O){le="@json";try{ee["@value"]=JSON.parse(ee["@value"])}catch(me){throw new N("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:ee["@value"],cause:me})}}if(W){if(le===V)"true"===ee["@value"]?ee["@value"]=!0:"false"===ee["@value"]&&(ee["@value"]=!1);else if(S.isNumeric(ee["@value"]))if(le===Y){const me=parseInt(ee["@value"],10);me.toFixed(0)===ee["@value"]&&(ee["@value"]=me)}else le===ie&&(ee["@value"]=parseFloat(ee["@value"]));[V,Y,ie,se].includes(le)||(ee["@type"]=le)}else if("i18n-datatype"===B&&le.startsWith("https://www.w3.org/ns/i18n#")){const[,me,ae]=le.split(/[#_]/);me.length>0&&(ee["@language"]=me,me.match(F)||H.eventHandler&&T({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:me}},options:H})),ee["@direction"]=ae}else le!==se&&(ee["@type"]=le)}return ee}Ne.exports=te,te.fromRDF=function(){var ce=q(function*(W,B){const H={},ee={"@default":H},le={},{useRdfType:me=!1,useNativeTypes:ae=!1,rdfDirection:_e=null}=B;for(const $e of W){const He="DefaultGraph"===$e.graph.termType?"@default":$e.graph.value;He in ee||(ee[He]={}),"@default"!==He&&!(He in H)&&(H[He]={"@id":He});const Ie=ee[He],we=$e.subject.value,pe=$e.predicate.value,nt=$e.object;we in Ie||(Ie[we]={"@id":we});const qe=Ie[we],Oe=nt.termType.endsWith("Node");if(Oe&&!(nt.value in Ie)&&(Ie[nt.value]={"@id":nt.value}),pe===U&&!me&&Oe){D(qe,"@type",nt.value,{propertyIsArray:!0});continue}const Je=be(nt,ae,_e,B);if(D(qe,pe,Je,{propertyIsArray:!0}),Oe)if(nt.value===L){const Pt=Ie[nt.value];"usages"in Pt||(Pt.usages=[]),Pt.usages.push({node:qe,property:pe,value:Je})}else le[nt.value]=!(nt.value in le)&&{node:qe,property:pe,value:Je}}for(const $e in ee){const He=ee[$e];if(!(L in He))continue;const Ie=He[L];if(Ie.usages){for(let we of Ie.usages){let pe=we.node,nt=we.property,qe=we.value;const Oe=[],Je=[];let Pt=Object.keys(pe).length;for(;nt===z&&S.isObject(le[pe["@id"]])&&S.isArray(pe[G])&&1===pe[G].length&&S.isArray(pe[z])&&1===pe[z].length&&(3===Pt||4===Pt&&S.isArray(pe["@type"])&&1===pe["@type"].length&&pe["@type"][0]===k)&&(Oe.push(pe[G][0]),Je.push(pe["@id"]),we=le[pe["@id"]],pe=we.node,nt=we.property,qe=we.value,Pt=Object.keys(pe).length,C.isBlankNode(pe)););delete qe["@id"],qe["@list"]=Oe.reverse();for(const pt of Je)delete He[pt]}delete Ie.usages}}const Le=[],ye=Object.keys(H).sort();for(const $e of ye){const He=H[$e];if($e in ee){const Ie=He["@graph"]=[],we=ee[$e],pe=Object.keys(we).sort();for(const nt of pe){const qe=we[nt];C.isSubjectReference(qe)||Ie.push(qe)}}C.isSubjectReference(He)||Le.push(He)}return Le});return function(W,B){return ce.apply(this,arguments)}}()},9094:(Ne,Re,X)=>{"use strict";const q=X(2353),N={};Ne.exports=N,N.isSubject=C=>!(!q.isObject(C)||"@value"in C||"@set"in C||"@list"in C)&&(Object.keys(C).length>1||!("@id"in C)),N.isSubjectReference=C=>q.isObject(C)&&1===Object.keys(C).length&&"@id"in C,N.isValue=C=>q.isObject(C)&&"@value"in C,N.isList=C=>q.isObject(C)&&"@list"in C,N.isGraph=C=>q.isObject(C)&&"@graph"in C&&1===Object.keys(C).filter(S=>"@id"!==S&&"@index"!==S).length,N.isSimpleGraph=C=>N.isGraph(C)&&!("@id"in C),N.isBlankNode=C=>{if(q.isObject(C)){if("@id"in C){const S=C["@id"];return!q.isString(S)||0===S.indexOf("_:")}return 0===Object.keys(C).length||!("@value"in C||"@set"in C||"@list"in C)}return!1}},5049:(Ne,Re,X)=>{var q=X(9344).default;const N=X(4308),C=X(2363),S=X(4249),F=X(4918),D=S.IdentifierIssuer,T=X(3327),k=X(5943),G=X(3865),{expand:z}=X(554),{flatten:L}=X(7613),{fromRDF:U}=X(2216),{toRDF:O}=X(5671),{frameMergedOrDefault:V,cleanupNull:ie}=X(1938),{isArray:Y,isObject:se,isString:te}=X(2353),{isSubjectReference:be}=X(9094),{expandIri:ce,getInitialContext:W,process:B,processingMode:H}=X(2134),{compact:ee,compactIri:le}=X(9857),{createNodeMap:me,createMergedNodeMap:ae,mergeNodeMaps:_e}=X(5057),{logEventHandler:Le,logWarningEventHandler:ye,safeEventHandler:$e,setDefaultEventHandler:He,setupEventHandler:Ie,strictEventHandler:we,unhandledEventHandler:pe}=X(5775),nt=function(Oe){const Je={},pt=new k({max:100});function at(ut,{documentLoader:We=Oe.documentLoader,...De}){if(ut&&"compactionMap"in ut)throw new T('"compactionMap" not supported.',"jsonld.OptionsError");if(ut&&"expansionMap"in ut)throw new T('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader:We},De,ut,{eventHandler:Ie({options:ut})})}return Oe.compact=function(){var ut=q(function*(We,De,Be){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===De)throw new T("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===We)return null;let ht;(Be=at(Be,{base:te(We)?We:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new D("_:b"),contextResolver:new F({sharedCache:pt})})).link&&(Be.skipExpansion=!0),Be.compactToRelative||delete Be.base,ht=Be.skipExpansion?We:yield Oe.expand(We,Be);const kt=yield Oe.processContext(W(Be),De,Be);let ft=yield ee({activeCtx:kt,element:ht,options:Be});Be.compactArrays&&!Be.graph&&Y(ft)?1===ft.length?ft=ft[0]:0===ft.length&&(ft={}):Be.graph&&se(ft)&&(ft=[ft]),se(De)&&"@context"in De&&(De=De["@context"]),De=S.clone(De),Y(De)||(De=[De]);const Nt=De;De=[];for(let Ot=0;Ot<Nt.length;++Ot)(!se(Nt[Ot])||Object.keys(Nt[Ot]).length>0)&&De.push(Nt[Ot]);const tn=De.length>0;if(1===De.length&&(De=De[0]),Y(ft)){const Ot=le({activeCtx:kt,iri:"@graph",relativeTo:{vocab:!0}}),sn=ft;ft={},tn&&(ft["@context"]=De),ft[Ot]=sn}else if(se(ft)&&tn){const Ot=ft;ft={"@context":De};for(const sn in Ot)ft[sn]=Ot[sn]}return ft});return function(We,De,Be){return ut.apply(this,arguments)}}(),Oe.expand=function(){var ut=q(function*(We,De){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");const Be={},ht=[];if("expandContext"in(De=at(De,{keepFreeFloatingNodes:!1,contextResolver:new F({sharedCache:pt})}))){const tn=S.clone(De.expandContext);Be.expandContext=se(tn)&&"@context"in tn?tn:{"@context":tn},ht.push(Be.expandContext)}let kt;if(te(We)){const tn=yield Oe.get(We,De);kt=tn.documentUrl,Be.input=tn.document,tn.contextUrl&&(Be.remoteContext={"@context":tn.contextUrl},ht.push(Be.remoteContext))}else Be.input=S.clone(We);"base"in De||(De.base=kt||"");let ft=W(De);for(const tn of ht)ft=yield B({activeCtx:ft,localCtx:tn,options:De});let Nt=yield z({activeCtx:ft,element:Be.input,options:De});return se(Nt)&&"@graph"in Nt&&1===Object.keys(Nt).length?Nt=Nt["@graph"]:null===Nt&&(Nt=[]),Y(Nt)||(Nt=[Nt]),Nt});return function(We,De){return ut.apply(this,arguments)}}(),Oe.flatten=function(){var ut=q(function*(We,De,Be){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");De="function"==typeof De?null:De||null,Be=at(Be,{base:te(We)?We:"",contextResolver:new F({sharedCache:pt})});const ht=yield Oe.expand(We,Be),kt=L(ht);return null===De?kt:(Be.graph=!0,Be.skipExpansion=!0,yield Oe.compact(kt,De,Be))});return function(We,De,Be){return ut.apply(this,arguments)}}(),Oe.frame=function(){var ut=q(function*(We,De,Be){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(Be=at(Be,{base:te(We)?We:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new F({sharedCache:pt})}),te(De)){const $n=yield Oe.get(De,Be);if(De=$n.document,$n.contextUrl){let wr=De["@context"];wr?Y(wr)?wr.push($n.contextUrl):wr=[wr,$n.contextUrl]:wr=$n.contextUrl,De["@context"]=wr}}const ht=De&&De["@context"]||{},kt=yield Oe.processContext(W(Be),ht,Be);Be.hasOwnProperty("omitGraph")||(Be.omitGraph=H(kt,1.1)),Be.hasOwnProperty("pruneBlankNodeIdentifiers")||(Be.pruneBlankNodeIdentifiers=H(kt,1.1));const ft=yield Oe.expand(We,Be),Nt={...Be};Nt.isFrame=!0,Nt.keepFreeFloatingNodes=!0;const tn=yield Oe.expand(De,Nt),Ot=Object.keys(De).map($n=>ce(kt,$n,{vocab:!0}));Nt.merged=!Ot.includes("@graph"),Nt.is11=H(kt,1.1);const sn=V(ft,tn,Nt);Nt.graph=!Be.omitGraph,Nt.skipExpansion=!0,Nt.link={},Nt.framing=!0;let hn=yield Oe.compact(sn,ht,Nt);return Nt.link={},hn=ie(hn,Nt),hn});return function(We,De,Be){return ut.apply(this,arguments)}}(),Oe.link=function(){var ut=q(function*(We,De,Be){const ht={};return De&&(ht["@context"]=De),ht["@embed"]="@link",Oe.frame(We,ht,Be)});return function(We,De,Be){return ut.apply(this,arguments)}}(),Oe.normalize=Oe.canonize=function(){var ut=q(function*(We,De){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(De=at(De,{base:te(We)?We:null,algorithm:"URDNA2015",skipExpansion:!1,safe:!0,contextResolver:new F({sharedCache:pt})}))){if("application/n-quads"!==De.inputFormat&&"application/nquads"!==De.inputFormat)throw new T("Unknown canonicalization input format.","jsonld.CanonizeError");const kt=G.parse(We);return N.canonize(kt,De)}const Be={...De};delete Be.format,Be.produceGeneralizedRdf=!1;const ht=yield Oe.toRDF(We,Be);return N.canonize(ht,De)});return function(We,De){return ut.apply(this,arguments)}}(),Oe.fromRDF=function(){var ut=q(function*(We,De){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");De=at(De,{format:te(We)?"application/n-quads":void 0});const{format:Be}=De;let{rdfParser:ht}=De;if(Be){if(ht=ht||Je[Be],!ht)throw new T("Unknown input format.","jsonld.UnknownFormat",{format:Be})}else ht=()=>We;const kt=yield ht(We);return U(kt,De)});return function(We,De){return ut.apply(this,arguments)}}(),Oe.toRDF=function(){var ut=q(function*(We,De){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let Be;Be=(De=at(De,{base:te(We)?We:"",skipExpansion:!1,contextResolver:new F({sharedCache:pt})})).skipExpansion?We:yield Oe.expand(We,De);const ht=O(Be,De);if(De.format){if("application/n-quads"===De.format||"application/nquads"===De.format)return G.serialize(ht);throw new T("Unknown output format.","jsonld.UnknownFormat",{format:De.format})}return ht});return function(We,De){return ut.apply(this,arguments)}}(),Oe.createNodeMap=function(){var ut=q(function*(We,De){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");De=at(De,{base:te(We)?We:"",contextResolver:new F({sharedCache:pt})});const Be=yield Oe.expand(We,De);return ae(Be,De)});return function(We,De){return ut.apply(this,arguments)}}(),Oe.merge=function(){var ut=q(function*(We,De,Be){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!Y(We))throw new TypeError('Could not merge, "docs" must be an array.');De="function"==typeof De?null:De||null,Be=at(Be,{contextResolver:new F({sharedCache:pt})});const ht=yield Promise.all(We.map($n=>{const wr={...Be};return Oe.expand($n,wr)}));let kt=!0;"mergeNodes"in Be&&(kt=Be.mergeNodes);const ft=Be.issuer||new D("_:b"),Nt={"@default":{}};for(let $n=0;$n<ht.length;++$n){const wr=S.relabelBlankNodes(ht[$n],{issuer:new D("_:b"+$n+"-")}),vr=kt||0===$n?Nt:{"@default":{}};if(me(wr,vr,"@default",ft),vr!==Nt)for(const ai in vr){const vi=vr[ai];if(!(ai in Nt)){Nt[ai]=vi;continue}const Ms=Nt[ai];for(const As in vi)As in Ms||(Ms[As]=vi[As])}}const tn=_e(Nt),Ot=[],sn=Object.keys(tn).sort();for(let $n=0;$n<sn.length;++$n){const wr=tn[sn[$n]];be(wr)||Ot.push(wr)}return null===De?Ot:(Be.graph=!0,Be.skipExpansion=!0,yield Oe.compact(Ot,De,Be))});return function(We,De,Be){return ut.apply(this,arguments)}}(),Object.defineProperty(Oe,"documentLoader",{get:()=>Oe._documentLoader,set:ut=>Oe._documentLoader=ut}),Oe.documentLoader=function(){var ut=q(function*(We){throw new T("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:We})});return function(We){return ut.apply(this,arguments)}}(),Oe.get=function(){var ut=q(function*(We,De){let Be;Be="function"==typeof De.documentLoader?De.documentLoader:Oe.documentLoader;const ht=yield Be(We);try{if(!ht.document)throw new T("No remote document found at the given URL.","jsonld.NullRemoteDocument");te(ht.document)&&(ht.document=JSON.parse(ht.document))}catch(kt){throw new T("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:kt,remoteDoc:ht})}return ht});return function(We,De){return ut.apply(this,arguments)}}(),Oe.processContext=function(){var ut=q(function*(We,De,Be){return Be=at(Be,{base:"",contextResolver:new F({sharedCache:pt})}),null===De?W(Be):(De=S.clone(De),se(De)&&"@context"in De||(De={"@context":De}),B({activeCtx:We,localCtx:De,options:Be}))});return function(We,De,Be){return ut.apply(this,arguments)}}(),Oe.getContextValue=X(2134).getContextValue,Oe.documentLoaders={},Oe.useDocumentLoader=function(ut){if(!(ut in Oe.documentLoaders))throw new T('Unknown document loader type: "'+ut+'"',"jsonld.UnknownDocumentLoader",{type:ut});Oe.documentLoader=Oe.documentLoaders[ut].apply(Oe,Array.prototype.slice.call(arguments,1))},Oe.registerRDFParser=function(ut,We){Je[ut]=We},Oe.unregisterRDFParser=function(ut){delete Je[ut]},Oe.registerRDFParser("application/n-quads",G.parse),Oe.registerRDFParser("application/nquads",G.parse),Oe.url=X(4920),Oe.logEventHandler=Le,Oe.logWarningEventHandler=ye,Oe.safeEventHandler=$e,Oe.setDefaultEventHandler=He,Oe.strictEventHandler=we,Oe.unhandledEventHandler=pe,Oe.util=S,Object.assign(Oe,S),Oe.promises=Oe,Oe.RequestQueue=X(2210),Oe.JsonLdProcessor=X(779)(Oe),C.setupGlobals(Oe),C.setupDocumentLoaders(Oe),Oe},qe=function(){return nt(function(){return qe()})};nt(qe),Ne.exports=qe},5057:(Ne,Re,X)=>{"use strict";const{isKeyword:q}=X(2134),N=X(9094),C=X(2353),S=X(4249),F=X(3327),D={};Ne.exports=D,D.createMergedNodeMap=(T,k)=>{const G=(k=k||{}).issuer||new S.IdentifierIssuer("_:b"),z={"@default":{}};return D.createNodeMap(T,z,"@default",G),D.mergeNodeMaps(z)},D.createNodeMap=(T,k,G,z,L,U)=>{if(C.isArray(T)){for(const Y of T)D.createNodeMap(Y,k,G,z,void 0,U);return}if(!C.isObject(T))return void(U&&U.push(T));if(N.isValue(T)){if("@type"in T){let Y=T["@type"];0===Y.indexOf("_:")&&(T["@type"]=Y=z.getId(Y))}return void(U&&U.push(T))}if(U&&N.isList(T)){const Y=[];return D.createNodeMap(T["@list"],k,G,z,L,Y),void U.push({"@list":Y})}if("@type"in T){const Y=T["@type"];for(const se of Y)0===se.indexOf("_:")&&z.getId(se)}C.isUndefined(L)&&(L=N.isBlankNode(T)?z.getId(T["@id"]):T["@id"]),U&&U.push({"@id":L});const O=k[G],V=O[L]=O[L]||{};V["@id"]=L;const ie=Object.keys(T).sort();for(let Y of ie){if("@id"===Y)continue;if("@reverse"===Y){const te={"@id":L},be=T["@reverse"];for(const ce in be){const W=be[ce];for(const B of W){let H=B["@id"];N.isBlankNode(B)&&(H=z.getId(H)),D.createNodeMap(B,k,G,z,H),S.addValue(O[H],ce,te,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===Y){L in k||(k[L]={}),D.createNodeMap(T[Y],k,L,z);continue}if("@included"===Y){D.createNodeMap(T[Y],k,G,z);continue}if("@type"!==Y&&q(Y)){if("@index"===Y&&Y in V&&(T[Y]!==V[Y]||T[Y]["@id"]!==V[Y]["@id"]))throw new F("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:V});V[Y]=T[Y];continue}const se=T[Y];if(0===Y.indexOf("_:")&&(Y=z.getId(Y)),0!==se.length)for(let te of se)if("@type"===Y&&(te=0===te.indexOf("_:")?z.getId(te):te),N.isSubject(te)||N.isSubjectReference(te)){if("@id"in te&&!te["@id"])continue;const be=N.isBlankNode(te)?z.getId(te["@id"]):te["@id"];S.addValue(V,Y,{"@id":be},{propertyIsArray:!0,allowDuplicate:!1}),D.createNodeMap(te,k,G,z,be)}else if(N.isValue(te))S.addValue(V,Y,te,{propertyIsArray:!0,allowDuplicate:!1});else if(N.isList(te)){const be=[];D.createNodeMap(te["@list"],k,G,z,L,be),te={"@list":be},S.addValue(V,Y,te,{propertyIsArray:!0,allowDuplicate:!1})}else D.createNodeMap(te,k,G,z,L),S.addValue(V,Y,te,{propertyIsArray:!0,allowDuplicate:!1});else S.addValue(V,Y,[],{propertyIsArray:!0})}},D.mergeNodeMapGraphs=T=>{const k={};for(const G of Object.keys(T).sort())for(const z of Object.keys(T[G]).sort()){const L=T[G][z];z in k||(k[z]={"@id":z});const U=k[z];for(const O of Object.keys(L).sort())if(q(O)&&"@type"!==O)U[O]=S.clone(L[O]);else for(const V of L[O])S.addValue(U,O,S.clone(V),{propertyIsArray:!0,allowDuplicate:!1})}return k},D.mergeNodeMaps=T=>{const k=T["@default"],G=Object.keys(T).sort();for(const z of G){if("@default"===z)continue;const L=T[z];let U=k[z];U?"@graph"in U||(U["@graph"]=[]):k[z]=U={"@id":z,"@graph":[]};const O=U["@graph"];for(const V of Object.keys(L).sort()){const ie=L[V];N.isSubjectReference(ie)||O.push(ie)}}return k}},2363:(Ne,Re,X)=>{"use strict";const q=X(8719),N={};Ne.exports=N,N.setupDocumentLoaders=function(C){typeof XMLHttpRequest<"u"&&(C.documentLoaders.xhr=q,C.useDocumentLoader("xhr"))},N.setupGlobals=function(C){typeof globalThis.JsonLdProcessor>"u"&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:C.JsonLdProcessor})}},5671:(Ne,Re,X)=>{"use strict";const{createNodeMap:q}=X(5057),{isKeyword:N}=X(2134),C=X(9094),S=X(5423),F=X(2353),D=X(4249),{handleEvent:T}=X(5775),{RDF_FIRST:k,RDF_REST:G,RDF_NIL:z,RDF_TYPE:L,RDF_JSON_LITERAL:U,RDF_LANGSTRING:O,XSD_BOOLEAN:V,XSD_DOUBLE:ie,XSD_INTEGER:Y,XSD_STRING:se}=X(313),{isAbsolute:te}=X(4920),be={};function ce(H,ee,le,me,ae){const _e=Object.keys(ee).sort();for(const Le of _e){const ye=ee[Le],$e=Object.keys(ye).sort();for(let He of $e){const Ie=ye[He];if("@type"===He)He=L;else if(N(He))continue;for(const we of Ie){const pe={termType:Le.startsWith("_:")?"BlankNode":"NamedNode",value:Le};if(!te(Le)){ae.eventHandler&&T({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:Le}},options:ae});continue}const nt={termType:He.startsWith("_:")?"BlankNode":"NamedNode",value:He};if(!te(He)){ae.eventHandler&&T({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:He}},options:ae});continue}if("BlankNode"===nt.termType&&!ae.produceGeneralizedRdf){ae.eventHandler&&T({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:me.getOldIds().find(Oe=>me.getId(Oe)===He)}},options:ae});continue}const qe=B(we,me,H,le,ae.rdfDirection,ae);qe&&H.push({subject:pe,predicate:nt,object:qe,graph:le})}}}}function B(H,ee,le,me,ae,_e){const Le={};if(C.isValue(H)){Le.termType="Literal",Le.value=void 0,Le.datatype={termType:"NamedNode"};let ye=H["@value"];const $e=H["@type"]||null;"@json"===$e?(Le.value=S(ye),Le.datatype.value=U):F.isBoolean(ye)?(Le.value=ye.toString(),Le.datatype.value=$e||V):F.isDouble(ye)||$e===ie?(F.isDouble(ye)||(ye=parseFloat(ye)),Le.value=ye.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),Le.datatype.value=$e||ie):F.isNumber(ye)?(Le.value=ye.toFixed(0),Le.datatype.value=$e||Y):"i18n-datatype"===ae&&"@direction"in H?(Le.datatype.value="https://www.w3.org/ns/i18n#"+(H["@language"]||"")+`_${H["@direction"]}`,Le.value=ye):"@language"in H?(Le.value=ye,Le.datatype.value=$e||O,Le.language=H["@language"]):(Le.value=ye,Le.datatype.value=$e||se)}else if(C.isList(H)){const ye=function W(H,ee,le,me,ae,_e){const Le={termType:"NamedNode",value:k},ye={termType:"NamedNode",value:G},$e={termType:"NamedNode",value:z},He=H.pop(),Ie=He?{termType:"BlankNode",value:ee.getId()}:$e;let we=Ie;for(const pe of H){const nt=B(pe,ee,le,me,ae,_e),qe={termType:"BlankNode",value:ee.getId()};le.push({subject:we,predicate:Le,object:nt,graph:me}),le.push({subject:we,predicate:ye,object:qe,graph:me}),we=qe}if(He){const pe=B(He,ee,le,me,ae,_e);le.push({subject:we,predicate:Le,object:pe,graph:me}),le.push({subject:we,predicate:ye,object:$e,graph:me})}return Ie}(H["@list"],ee,le,me,ae,_e);Le.termType=ye.termType,Le.value=ye.value}else{const ye=F.isObject(H)?H["@id"]:H;Le.termType=ye.startsWith("_:")?"BlankNode":"NamedNode",Le.value=ye}return"NamedNode"!==Le.termType||te(Le.value)?Le:(_e.eventHandler&&T({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:Le.value}},options:_e}),null)}Ne.exports=be,be.toRDF=(H,ee)=>{const le=new D.IdentifierIssuer("_:b"),me={"@default":{}};q(H,me,"@default",le);const ae=[],_e=Object.keys(me).sort();for(const Le of _e){let ye;if("@default"===Le)ye={termType:"DefaultGraph",value:""};else{if(!te(Le)){ee.eventHandler&&T({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:Le}},options:ee});continue}ye=Le.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"},ye.value=Le}ce(ae,me[Le],ye,le,ee)}return ae}},2353:Ne=>{"use strict";const Re={};Ne.exports=Re,Re.isArray=Array.isArray,Re.isBoolean=X=>"boolean"==typeof X||"[object Boolean]"===Object.prototype.toString.call(X),Re.isDouble=X=>Re.isNumber(X)&&(-1!==String(X).indexOf(".")||Math.abs(X)>=1e21),Re.isEmptyObject=X=>Re.isObject(X)&&0===Object.keys(X).length,Re.isNumber=X=>"number"==typeof X||"[object Number]"===Object.prototype.toString.call(X),Re.isNumeric=X=>!isNaN(parseFloat(X))&&isFinite(X),Re.isObject=X=>"[object Object]"===Object.prototype.toString.call(X),Re.isString=X=>"string"==typeof X||"[object String]"===Object.prototype.toString.call(X),Re.isUndefined=X=>typeof X>"u"},4920:(Ne,Re,X)=>{"use strict";const q=X(2353),N={};Ne.exports=N,N.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},N.parse=(S,F)=>{const D={},T=N.parsers[F||"full"],k=T.regex.exec(S);let G=T.keys.length;for(;G--;)D[T.keys[G]]=void 0===k[G]?null:k[G];return("https"===D.scheme&&"443"===D.port||"http"===D.scheme&&"80"===D.port)&&(D.href=D.href.replace(":"+D.port,""),D.authority=D.authority.replace(":"+D.port,""),D.port=null),D.normalizedPath=N.removeDotSegments(D.path),D},N.prependBase=(S,F)=>{if(null===S||N.isAbsolute(F))return F;(!S||q.isString(S))&&(S=N.parse(S||""));const D=N.parse(F),T={protocol:S.protocol||""};if(null!==D.authority)T.authority=D.authority,T.path=D.path,T.query=D.query;else if(T.authority=S.authority,""===D.path)T.path=S.path,T.query=null!==D.query?D.query:S.query;else{if(0===D.path.indexOf("/"))T.path=D.path;else{let G=S.path;G=G.substr(0,G.lastIndexOf("/")+1),(G.length>0||S.authority)&&"/"!==G.substr(-1)&&(G+="/"),G+=D.path,T.path=G}T.query=D.query}""!==D.path&&(T.path=N.removeDotSegments(T.path));let k=T.protocol;return null!==T.authority&&(k+="//"+T.authority),k+=T.path,null!==T.query&&(k+="?"+T.query),null!==D.fragment&&(k+="#"+D.fragment),""===k&&(k="./"),k},N.removeBase=(S,F)=>{if(null===S)return F;(!S||q.isString(S))&&(S=N.parse(S||""));let D="";if(""!==S.href?D+=(S.protocol||"")+"//"+(S.authority||""):F.indexOf("//")&&(D+="//"),0!==F.indexOf(D))return F;const T=N.parse(F.substr(D.length)),k=S.normalizedPath.split("/"),G=T.normalizedPath.split("/"),z=T.fragment||T.query?0:1;for(;k.length>0&&G.length>z&&k[0]===G[0];)k.shift(),G.shift();let L="";if(k.length>0){k.pop();for(let U=0;U<k.length;++U)L+="../"}return L+=G.join("/"),null!==T.query&&(L+="?"+T.query),null!==T.fragment&&(L+="#"+T.fragment),""===L&&(L="./"),L},N.removeDotSegments=S=>{if(0===S.length)return"";const F=S.split("/"),D=[];for(;F.length>0;){const T=F.shift(),k=0===F.length;"."!==T?".."!==T?D.push(T):(D.pop(),k&&D.push("")):k&&D.push("")}return"/"===S[0]&&D.length>0&&""!==D[0]&&D.unshift(""),1===D.length&&""===D[0]?"/":D.join("/")};const C=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;N.isAbsolute=S=>q.isString(S)&&C.test(S),N.isRelative=S=>q.isString(S)},4249:(Ne,Re,X)=>{"use strict";const q=X(9094),N=X(2353),C=X(4308).IdentifierIssuer,S=X(3327),D=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,T=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,k=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,z_headers_accept="application/ld+json, application/json",L={};function U(O,V){if(N.isArray(V))for(let ie=0;ie<V.length;++ie)V[ie]=U(O,V[ie]);else if(q.isList(V))V["@list"]=U(O,V["@list"]);else if(N.isObject(V)){q.isBlankNode(V)&&(V["@id"]=O.getId(V["@id"]));const ie=Object.keys(V).sort();for(let Y=0;Y<ie.length;++Y){const se=ie[Y];"@id"!==se&&(V[se]=U(O,V[se]))}}return V}Ne.exports=L,L.IdentifierIssuer=C,L.REGEX_BCP47=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,L.REGEX_KEYWORD=/^@[a-zA-Z]+$/,L.clone=function(O){if(O&&"object"==typeof O){let V;if(N.isArray(O)){V=[];for(let ie=0;ie<O.length;++ie)V[ie]=L.clone(O[ie])}else if(O instanceof Map){V=new Map;for(const[ie,Y]of O)V.set(ie,L.clone(Y))}else if(O instanceof Set){V=new Set;for(const ie of O)V.add(L.clone(ie))}else if(N.isObject(O)){V={};for(const ie in O)V[ie]=L.clone(O[ie])}else V=O.toString();return V}return O},L.asArray=function(O){return Array.isArray(O)?O:[O]},L.buildHeaders=(O={})=>{if(Object.keys(O).some(ie=>"accept"===ie.toLowerCase()))throw new RangeError('Accept header may not be specified; only "'+z_headers_accept+'" is supported.');return Object.assign({Accept:z_headers_accept},O)},L.parseLinkHeader=O=>{const V={},ie=O.match(D);for(let Y=0;Y<ie.length;++Y){let se=ie[Y].match(T);if(!se)continue;const te={target:se[1]},be=se[2];for(;se=k.exec(be);)te[se[1]]=void 0===se[2]?se[3]:se[2];const ce=te.rel||"";Array.isArray(V[ce])?V[ce].push(te):V[ce]=V.hasOwnProperty(ce)?[V[ce],te]:te}return V},L.validateTypeValue=(O,V)=>{if(!(N.isString(O)||N.isArray(O)&&O.every(ie=>N.isString(ie)))){if(V&&N.isObject(O))switch(Object.keys(O).length){case 0:return;case 1:if("@default"in O&&L.asArray(O["@default"]).every(ie=>N.isString(ie)))return}throw new S('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:O})}},L.hasProperty=(O,V)=>{if(O.hasOwnProperty(V)){const ie=O[V];return!N.isArray(ie)||ie.length>0}return!1},L.hasValue=(O,V,ie)=>{if(L.hasProperty(O,V)){let Y=O[V];const se=q.isList(Y);if(N.isArray(Y)||se){se&&(Y=Y["@list"]);for(let te=0;te<Y.length;++te)if(L.compareValues(ie,Y[te]))return!0}else if(!N.isArray(ie))return L.compareValues(ie,Y)}return!1},L.addValue=(O,V,ie,Y)=>{if("propertyIsArray"in(Y=Y||{})||(Y.propertyIsArray=!1),"valueIsArray"in Y||(Y.valueIsArray=!1),"allowDuplicate"in Y||(Y.allowDuplicate=!0),"prependValue"in Y||(Y.prependValue=!1),Y.valueIsArray)O[V]=ie;else if(N.isArray(ie)){0===ie.length&&Y.propertyIsArray&&!O.hasOwnProperty(V)&&(O[V]=[]),Y.prependValue&&(ie=ie.concat(O[V]),O[V]=[]);for(let se=0;se<ie.length;++se)L.addValue(O,V,ie[se],Y)}else if(O.hasOwnProperty(V)){const se=!Y.allowDuplicate&&L.hasValue(O,V,ie);!N.isArray(O[V])&&(!se||Y.propertyIsArray)&&(O[V]=[O[V]]),se||(Y.prependValue?O[V].unshift(ie):O[V].push(ie))}else O[V]=Y.propertyIsArray?[ie]:ie},L.getValues=(O,V)=>[].concat(O[V]||[]),L.removeProperty=(O,V)=>{delete O[V]},L.removeValue=(O,V,ie,Y)=>{"propertyIsArray"in(Y=Y||{})||(Y.propertyIsArray=!1);const se=L.getValues(O,V).filter(te=>!L.compareValues(te,ie));0===se.length?L.removeProperty(O,V):O[V]=1!==se.length||Y.propertyIsArray?se:se[0]},L.relabelBlankNodes=(O,V)=>U((V=V||{}).issuer||new C("_:b"),O),L.compareValues=(O,V)=>!!(O===V||q.isValue(O)&&q.isValue(V)&&O["@value"]===V["@value"]&&O["@type"]===V["@type"]&&O["@language"]===V["@language"]&&O["@index"]===V["@index"])||!!(N.isObject(O)&&"@id"in O&&N.isObject(V)&&"@id"in V)&&O["@id"]===V["@id"],L.compareShortestLeast=(O,V)=>O.length<V.length?-1:V.length<O.length?1:O===V?0:O<V?-1:1},5943:(Ne,Re,X)=>{"use strict";const q=X(1245),N=Symbol("max"),C=Symbol("length"),S=Symbol("lengthCalculator"),F=Symbol("allowStale"),D=Symbol("maxAge"),T=Symbol("dispose"),k=Symbol("noDisposeOnSet"),G=Symbol("lruList"),z=Symbol("cache"),L=Symbol("updateAgeOnGet"),U=()=>1,V=(ce,W,B)=>{const H=ce[z].get(W);if(H){const ee=H.value;if(ie(ce,ee)){if(se(ce,H),!ce[F])return}else B&&(ce[L]&&(H.value.now=Date.now()),ce[G].unshiftNode(H));return ee.value}},ie=(ce,W)=>{if(!W||!W.maxAge&&!ce[D])return!1;const B=Date.now()-W.now;return W.maxAge?B>W.maxAge:ce[D]&&B>ce[D]},Y=ce=>{if(ce[C]>ce[N])for(let W=ce[G].tail;ce[C]>ce[N]&&null!==W;){const B=W.prev;se(ce,W),W=B}},se=(ce,W)=>{if(W){const B=W.value;ce[T]&&ce[T](B.key,B.value),ce[C]-=B.length,ce[z].delete(B.key),ce[G].removeNode(W)}};class te{constructor(W,B,H,ee,le){this.key=W,this.value=B,this.length=H,this.now=ee,this.maxAge=le||0}}const be=(ce,W,B,H)=>{let ee=B.value;ie(ce,ee)&&(se(ce,B),ce[F]||(ee=void 0)),ee&&W.call(H,ee.value,ee.key,ce)};Ne.exports=class O{constructor(W){if("number"==typeof W&&(W={max:W}),W||(W={}),W.max&&("number"!=typeof W.max||W.max<0))throw new TypeError("max must be a non-negative number");this[N]=W.max||1/0;const H=W.length||U;if(this[S]="function"!=typeof H?U:H,this[F]=W.stale||!1,W.maxAge&&"number"!=typeof W.maxAge)throw new TypeError("maxAge must be a number");this[D]=W.maxAge||0,this[T]=W.dispose,this[k]=W.noDisposeOnSet||!1,this[L]=W.updateAgeOnGet||!1,this.reset()}set max(W){if("number"!=typeof W||W<0)throw new TypeError("max must be a non-negative number");this[N]=W||1/0,Y(this)}get max(){return this[N]}set allowStale(W){this[F]=!!W}get allowStale(){return this[F]}set maxAge(W){if("number"!=typeof W)throw new TypeError("maxAge must be a non-negative number");this[D]=W,Y(this)}get maxAge(){return this[D]}set lengthCalculator(W){"function"!=typeof W&&(W=U),W!==this[S]&&(this[S]=W,this[C]=0,this[G].forEach(B=>{B.length=this[S](B.value,B.key),this[C]+=B.length})),Y(this)}get lengthCalculator(){return this[S]}get length(){return this[C]}get itemCount(){return this[G].length}rforEach(W,B){B=B||this;for(let H=this[G].tail;null!==H;){const ee=H.prev;be(this,W,H,B),H=ee}}forEach(W,B){B=B||this;for(let H=this[G].head;null!==H;){const ee=H.next;be(this,W,H,B),H=ee}}keys(){return this[G].toArray().map(W=>W.key)}values(){return this[G].toArray().map(W=>W.value)}reset(){this[T]&&this[G]&&this[G].length&&this[G].forEach(W=>this[T](W.key,W.value)),this[z]=new Map,this[G]=new q,this[C]=0}dump(){return this[G].map(W=>!ie(this,W)&&{k:W.key,v:W.value,e:W.now+(W.maxAge||0)}).toArray().filter(W=>W)}dumpLru(){return this[G]}set(W,B,H){if((H=H||this[D])&&"number"!=typeof H)throw new TypeError("maxAge must be a number");const ee=H?Date.now():0,le=this[S](B,W);if(this[z].has(W)){if(le>this[N])return se(this,this[z].get(W)),!1;const _e=this[z].get(W).value;return this[T]&&(this[k]||this[T](W,_e.value)),_e.now=ee,_e.maxAge=H,_e.value=B,this[C]+=le-_e.length,_e.length=le,this.get(W),Y(this),!0}const me=new te(W,B,le,ee,H);return me.length>this[N]?(this[T]&&this[T](W,B),!1):(this[C]+=me.length,this[G].unshift(me),this[z].set(W,this[G].head),Y(this),!0)}has(W){if(!this[z].has(W))return!1;const B=this[z].get(W).value;return!ie(this,B)}get(W){return V(this,W,!0)}peek(W){return V(this,W,!1)}pop(){const W=this[G].tail;return W?(se(this,W),W.value):null}del(W){se(this,this[z].get(W))}load(W){this.reset();const B=Date.now();for(let H=W.length-1;H>=0;H--){const ee=W[H],le=ee.e||0;if(0===le)this.set(ee.k,ee.v);else{const me=le-B;me>0&&this.set(ee.k,ee.v,me)}}}prune(){this[z].forEach((W,B)=>V(this,B,!1))}}},6023:Ne=>{"use strict";Ne.exports=function(Re){Re.prototype[Symbol.iterator]=function*(){for(let X=this.head;X;X=X.next)yield X.value}}},1245:(Ne,Re,X)=>{"use strict";function q(D){var T=this;if(T instanceof q||(T=new q),T.tail=null,T.head=null,T.length=0,D&&"function"==typeof D.forEach)D.forEach(function(z){T.push(z)});else if(arguments.length>0)for(var k=0,G=arguments.length;k<G;k++)T.push(arguments[k]);return T}function N(D,T,k){var G=T===D.head?new F(k,null,T,D):new F(k,T,T.next,D);return null===G.next&&(D.tail=G),null===G.prev&&(D.head=G),D.length++,G}function C(D,T){D.tail=new F(T,D.tail,null,D),D.head||(D.head=D.tail),D.length++}function S(D,T){D.head=new F(T,null,D.head,D),D.tail||(D.tail=D.head),D.length++}function F(D,T,k,G){if(!(this instanceof F))return new F(D,T,k,G);this.list=G,this.value=D,T?(T.next=this,this.prev=T):this.prev=null,k?(k.prev=this,this.next=k):this.next=null}Ne.exports=q,q.Node=F,q.create=q,q.prototype.removeNode=function(D){if(D.list!==this)throw new Error("removing node which does not belong to this list");var T=D.next,k=D.prev;return T&&(T.prev=k),k&&(k.next=T),D===this.head&&(this.head=T),D===this.tail&&(this.tail=k),D.list.length--,D.next=null,D.prev=null,D.list=null,T},q.prototype.unshiftNode=function(D){if(D!==this.head){D.list&&D.list.removeNode(D);var T=this.head;D.list=this,D.next=T,T&&(T.prev=D),this.head=D,this.tail||(this.tail=D),this.length++}},q.prototype.pushNode=function(D){if(D!==this.tail){D.list&&D.list.removeNode(D);var T=this.tail;D.list=this,D.prev=T,T&&(T.next=D),this.tail=D,this.head||(this.head=D),this.length++}},q.prototype.push=function(){for(var D=0,T=arguments.length;D<T;D++)C(this,arguments[D]);return this.length},q.prototype.unshift=function(){for(var D=0,T=arguments.length;D<T;D++)S(this,arguments[D]);return this.length},q.prototype.pop=function(){if(this.tail){var D=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,D}},q.prototype.shift=function(){if(this.head){var D=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,D}},q.prototype.forEach=function(D,T){T=T||this;for(var k=this.head,G=0;null!==k;G++)D.call(T,k.value,G,this),k=k.next},q.prototype.forEachReverse=function(D,T){T=T||this;for(var k=this.tail,G=this.length-1;null!==k;G--)D.call(T,k.value,G,this),k=k.prev},q.prototype.get=function(D){for(var T=0,k=this.head;null!==k&&T<D;T++)k=k.next;if(T===D&&null!==k)return k.value},q.prototype.getReverse=function(D){for(var T=0,k=this.tail;null!==k&&T<D;T++)k=k.prev;if(T===D&&null!==k)return k.value},q.prototype.map=function(D,T){T=T||this;for(var k=new q,G=this.head;null!==G;)k.push(D.call(T,G.value,this)),G=G.next;return k},q.prototype.mapReverse=function(D,T){T=T||this;for(var k=new q,G=this.tail;null!==G;)k.push(D.call(T,G.value,this)),G=G.prev;return k},q.prototype.reduce=function(D,T){var k,G=this.head;if(arguments.length>1)k=T;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");G=this.head.next,k=this.head.value}for(var z=0;null!==G;z++)k=D(k,G.value,z),G=G.next;return k},q.prototype.reduceReverse=function(D,T){var k,G=this.tail;if(arguments.length>1)k=T;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");G=this.tail.prev,k=this.tail.value}for(var z=this.length-1;null!==G;z--)k=D(k,G.value,z),G=G.prev;return k},q.prototype.toArray=function(){for(var D=new Array(this.length),T=0,k=this.head;null!==k;T++)D[T]=k.value,k=k.next;return D},q.prototype.toArrayReverse=function(){for(var D=new Array(this.length),T=0,k=this.tail;null!==k;T++)D[T]=k.value,k=k.prev;return D},q.prototype.slice=function(D,T){(T=T||this.length)<0&&(T+=this.length),(D=D||0)<0&&(D+=this.length);var k=new q;if(T<D||T<0)return k;D<0&&(D=0),T>this.length&&(T=this.length);for(var G=0,z=this.head;null!==z&&G<D;G++)z=z.next;for(;null!==z&&G<T;G++,z=z.next)k.push(z.value);return k},q.prototype.sliceReverse=function(D,T){(T=T||this.length)<0&&(T+=this.length),(D=D||0)<0&&(D+=this.length);var k=new q;if(T<D||T<0)return k;D<0&&(D=0),T>this.length&&(T=this.length);for(var G=this.length,z=this.tail;null!==z&&G>T;G--)z=z.prev;for(;null!==z&&G>D;G--,z=z.prev)k.push(z.value);return k},q.prototype.splice=function(D,T,...k){D>this.length&&(D=this.length-1),D<0&&(D=this.length+D);for(var G=0,z=this.head;null!==z&&G<D;G++)z=z.next;var L=[];for(G=0;z&&G<T;G++)L.push(z.value),z=this.removeNode(z);for(null===z&&(z=this.tail),z!==this.head&&z!==this.tail&&(z=z.prev),G=0;G<k.length;G++)z=N(this,z,k[G]);return L},q.prototype.reverse=function(){for(var D=this.head,T=this.tail,k=D;null!==k;k=k.prev){var G=k.prev;k.prev=k.next,k.next=G}return this.head=T,this.tail=D,this};try{X(6023)(q)}catch{}},5982:function(Ne){Ne.exports=function(Re){var X={};function q(N){if(X[N])return X[N].exports;var C=X[N]={i:N,l:!1,exports:{}};return Re[N].call(C.exports,C,C.exports,q),C.l=!0,C.exports}return q.m=Re,q.c=X,q.i=function(N){return N},q.d=function(N,C,S){q.o(N,C)||Object.defineProperty(N,C,{configurable:!1,enumerable:!0,get:S})},q.n=function(N){var C=N&&N.__esModule?function(){return N.default}:function(){return N};return q.d(C,"a",C),C},q.o=function(N,C){return Object.prototype.hasOwnProperty.call(N,C)},q.p="",q(q.s=26)}([function(Re,X,q){"use strict";function N(){}N.QUALITY=1,N.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,N.DEFAULT_INCREMENTAL=!1,N.DEFAULT_ANIMATION_ON_LAYOUT=!0,N.DEFAULT_ANIMATION_DURING_LAYOUT=!1,N.DEFAULT_ANIMATION_PERIOD=50,N.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,N.DEFAULT_GRAPH_MARGIN=15,N.NODE_DIMENSIONS_INCLUDE_LABELS=!1,N.SIMPLE_NODE_HALF_SIZE=(N.SIMPLE_NODE_SIZE=40)/2,N.EMPTY_COMPOUND_NODE_SIZE=40,N.MIN_EDGE_LENGTH=1,N.INITIAL_WORLD_BOUNDARY=(N.WORLD_BOUNDARY=1e6)/1e3,N.WORLD_CENTER_X=1200,N.WORLD_CENTER_Y=900,Re.exports=N},function(Re,X,q){"use strict";var N=q(2),C=q(8),S=q(9);function F(T,k,G){N.call(this,G),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=G,this.bendpoints=[],this.source=T,this.target=k}for(var D in F.prototype=Object.create(N.prototype),N)F[D]=N[D];F.prototype.getSource=function(){return this.source},F.prototype.getTarget=function(){return this.target},F.prototype.isInterGraph=function(){return this.isInterGraph},F.prototype.getLength=function(){return this.length},F.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},F.prototype.getBendpoints=function(){return this.bendpoints},F.prototype.getLca=function(){return this.lca},F.prototype.getSourceInLca=function(){return this.sourceInLca},F.prototype.getTargetInLca=function(){return this.targetInLca},F.prototype.getOtherEnd=function(T){if(this.source===T)return this.target;if(this.target===T)return this.source;throw"Node is not incident with this edge"},F.prototype.getOtherEndInGraph=function(T,k){for(var G=this.getOtherEnd(T),z=k.getGraphManager().getRoot();;){if(G.getOwner()==k)return G;if(G.getOwner()==z)break;G=G.getOwner().getParent()}return null},F.prototype.updateLength=function(){var T=new Array(4);this.isOverlapingSourceAndTarget=C.getIntersection(this.target.getRect(),this.source.getRect(),T),this.isOverlapingSourceAndTarget||(this.lengthX=T[0]-T[2],this.lengthY=T[1]-T[3],Math.abs(this.lengthX)<1&&(this.lengthX=S.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=S.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},F.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=S.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=S.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},Re.exports=F},function(Re,X,q){"use strict";Re.exports=function N(C){this.vGraphObject=C}},function(Re,X,q){"use strict";var N=q(2),C=q(10),S=q(13),F=q(0),D=q(16),T=q(4);function k(z,L,U,O){null==U&&null==O&&(O=L),N.call(this,O),null!=z.graphManager&&(z=z.graphManager),this.estimatedSize=C.MIN_VALUE,this.inclusionTreeDepth=C.MAX_VALUE,this.vGraphObject=O,this.edges=[],this.graphManager=z,this.rect=null!=U&&null!=L?new S(L.x,L.y,U.width,U.height):new S}for(var G in k.prototype=Object.create(N.prototype),N)k[G]=N[G];k.prototype.getEdges=function(){return this.edges},k.prototype.getChild=function(){return this.child},k.prototype.getOwner=function(){return this.owner},k.prototype.getWidth=function(){return this.rect.width},k.prototype.setWidth=function(z){this.rect.width=z},k.prototype.getHeight=function(){return this.rect.height},k.prototype.setHeight=function(z){this.rect.height=z},k.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},k.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},k.prototype.getCenter=function(){return new T(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},k.prototype.getLocation=function(){return new T(this.rect.x,this.rect.y)},k.prototype.getRect=function(){return this.rect},k.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},k.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},k.prototype.setRect=function(z,L){this.rect.x=z.x,this.rect.y=z.y,this.rect.width=L.width,this.rect.height=L.height},k.prototype.setCenter=function(z,L){this.rect.x=z-this.rect.width/2,this.rect.y=L-this.rect.height/2},k.prototype.setLocation=function(z,L){this.rect.x=z,this.rect.y=L},k.prototype.moveBy=function(z,L){this.rect.x+=z,this.rect.y+=L},k.prototype.getEdgeListToNode=function(z){var L=[],O=this;return O.edges.forEach(function(V){if(V.target==z){if(V.source!=O)throw"Incorrect edge source!";L.push(V)}}),L},k.prototype.getEdgesBetween=function(z){var L=[],O=this;return O.edges.forEach(function(V){if(V.source!=O&&V.target!=O)throw"Incorrect edge source and/or target";(V.target==z||V.source==z)&&L.push(V)}),L},k.prototype.getNeighborsList=function(){var z=new Set,L=this;return L.edges.forEach(function(U){if(U.source==L)z.add(U.target);else{if(U.target!=L)throw"Incorrect incidency!";z.add(U.source)}}),z},k.prototype.withChildren=function(){var z=new Set;if(z.add(this),null!=this.child)for(var O=this.child.getNodes(),V=0;V<O.length;V++)O[V].withChildren().forEach(function(ie){z.add(ie)});return z},k.prototype.getNoOfChildren=function(){var z=0;if(null==this.child)z=1;else for(var U=this.child.getNodes(),O=0;O<U.length;O++)z+=U[O].getNoOfChildren();return 0==z&&(z=1),z},k.prototype.getEstimatedSize=function(){if(this.estimatedSize==C.MIN_VALUE)throw"assert failed";return this.estimatedSize},k.prototype.calcEstimatedSize=function(){return null==this.child?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},k.prototype.scatter=function(){var z,L,U=-F.INITIAL_WORLD_BOUNDARY,O=F.INITIAL_WORLD_BOUNDARY;z=F.WORLD_CENTER_X+D.nextDouble()*(O-U)+U;var V=-F.INITIAL_WORLD_BOUNDARY,ie=F.INITIAL_WORLD_BOUNDARY;L=F.WORLD_CENTER_Y+D.nextDouble()*(ie-V)+V,this.rect.x=z,this.rect.y=L},k.prototype.updateBounds=function(){if(null==this.getChild())throw"assert failed";if(0!=this.getChild().getNodes().length){var z=this.getChild();if(z.updateBounds(!0),this.rect.x=z.getLeft(),this.rect.y=z.getTop(),this.setWidth(z.getRight()-z.getLeft()),this.setHeight(z.getBottom()-z.getTop()),F.NODE_DIMENSIONS_INCLUDE_LABELS){var L=z.getRight()-z.getLeft(),U=z.getBottom()-z.getTop();this.labelWidth>L&&(this.rect.x-=(this.labelWidth-L)/2,this.setWidth(this.labelWidth)),this.labelHeight>U&&("center"==this.labelPos?this.rect.y-=(this.labelHeight-U)/2:"top"==this.labelPos&&(this.rect.y-=this.labelHeight-U),this.setHeight(this.labelHeight))}}},k.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==C.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},k.prototype.transform=function(z){var L=this.rect.x;L>F.WORLD_BOUNDARY?L=F.WORLD_BOUNDARY:L<-F.WORLD_BOUNDARY&&(L=-F.WORLD_BOUNDARY);var U=this.rect.y;U>F.WORLD_BOUNDARY?U=F.WORLD_BOUNDARY:U<-F.WORLD_BOUNDARY&&(U=-F.WORLD_BOUNDARY);var O=new T(L,U),V=z.inverseTransformPoint(O);this.setLocation(V.x,V.y)},k.prototype.getLeft=function(){return this.rect.x},k.prototype.getRight=function(){return this.rect.x+this.rect.width},k.prototype.getTop=function(){return this.rect.y},k.prototype.getBottom=function(){return this.rect.y+this.rect.height},k.prototype.getParent=function(){return null==this.owner?null:this.owner.getParent()},Re.exports=k},function(Re,X,q){"use strict";function N(C,S){null==C&&null==S?(this.x=0,this.y=0):(this.x=C,this.y=S)}N.prototype.getX=function(){return this.x},N.prototype.getY=function(){return this.y},N.prototype.setX=function(C){this.x=C},N.prototype.setY=function(C){this.y=C},N.prototype.getDifference=function(C){return new DimensionD(this.x-C.x,this.y-C.y)},N.prototype.getCopy=function(){return new N(this.x,this.y)},N.prototype.translate=function(C){return this.x+=C.width,this.y+=C.height,this},Re.exports=N},function(Re,X,q){"use strict";var N=q(2),C=q(10),S=q(0),F=q(6),D=q(3),T=q(1),k=q(13),G=q(12),z=q(11);function L(O,V,ie){N.call(this,ie),this.estimatedSize=C.MIN_VALUE,this.margin=S.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=O,null!=V&&V instanceof F?this.graphManager=V:null!=V&&V instanceof Layout&&(this.graphManager=V.graphManager)}for(var U in L.prototype=Object.create(N.prototype),N)L[U]=N[U];L.prototype.getNodes=function(){return this.nodes},L.prototype.getEdges=function(){return this.edges},L.prototype.getGraphManager=function(){return this.graphManager},L.prototype.getParent=function(){return this.parent},L.prototype.getLeft=function(){return this.left},L.prototype.getRight=function(){return this.right},L.prototype.getTop=function(){return this.top},L.prototype.getBottom=function(){return this.bottom},L.prototype.isConnected=function(){return this.isConnected},L.prototype.add=function(O,V,ie){if(null==V&&null==ie){var Y=O;if(null==this.graphManager)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(Y)>-1)throw"Node already in graph!";return Y.owner=this,this.getNodes().push(Y),Y}var se=O;if(!(this.getNodes().indexOf(V)>-1&&this.getNodes().indexOf(ie)>-1))throw"Source or target not in graph!";if(V.owner!=ie.owner||V.owner!=this)throw"Both owners must be this graph!";return V.owner!=ie.owner?null:(se.source=V,se.target=ie,se.isInterGraph=!1,this.getEdges().push(se),V.edges.push(se),ie!=V&&ie.edges.push(se),se)},L.prototype.remove=function(O){var V=O;if(O instanceof D){if(null==V)throw"Node is null!";if(null==V.owner||V.owner!=this)throw"Owner graph is invalid!";if(null==this.graphManager)throw"Owner graph manager is invalid!";for(var ie=V.edges.slice(),se=ie.length,te=0;te<se;te++)(Y=ie[te]).isInterGraph?this.graphManager.remove(Y):Y.source.owner.remove(Y);if(-1==(be=this.nodes.indexOf(V)))throw"Node not in owner node list!";this.nodes.splice(be,1)}else if(O instanceof T){var Y;if(null==(Y=O))throw"Edge is null!";if(null==Y.source||null==Y.target)throw"Source and/or target is null!";if(null==Y.source.owner||null==Y.target.owner||Y.source.owner!=this||Y.target.owner!=this)throw"Source and/or target owner is invalid!";var be,ce=Y.source.edges.indexOf(Y),W=Y.target.edges.indexOf(Y);if(!(ce>-1&&W>-1))throw"Source and/or target doesn't know this edge!";if(Y.source.edges.splice(ce,1),Y.target!=Y.source&&Y.target.edges.splice(W,1),-1==(be=Y.source.owner.getEdges().indexOf(Y)))throw"Not in owner's edge list!";Y.source.owner.getEdges().splice(be,1)}},L.prototype.updateLeftTop=function(){for(var ie,Y,se,O=C.MAX_VALUE,V=C.MAX_VALUE,te=this.getNodes(),be=te.length,ce=0;ce<be;ce++){var W=te[ce];O>(ie=W.getTop())&&(O=ie),V>(Y=W.getLeft())&&(V=Y)}return O==C.MAX_VALUE?null:(se=null!=te[0].getParent().paddingLeft?te[0].getParent().paddingLeft:this.margin,this.left=V-se,this.top=O-se,new G(this.left,this.top))},L.prototype.updateBounds=function(O){for(var te,be,ce,W,B,V=C.MAX_VALUE,ie=-C.MAX_VALUE,Y=C.MAX_VALUE,se=-C.MAX_VALUE,H=this.nodes,ee=H.length,le=0;le<ee;le++){var me=H[le];O&&null!=me.child&&me.updateBounds(),V>(te=me.getLeft())&&(V=te),ie<(be=me.getRight())&&(ie=be),Y>(ce=me.getTop())&&(Y=ce),se<(W=me.getBottom())&&(se=W)}var ae=new k(V,Y,ie-V,se-Y);V==C.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),B=null!=H[0].getParent().paddingLeft?H[0].getParent().paddingLeft:this.margin,this.left=ae.x-B,this.right=ae.x+ae.width+B,this.top=ae.y-B,this.bottom=ae.y+ae.height+B},L.calculateBounds=function(O){for(var te,be,ce,W,V=C.MAX_VALUE,ie=-C.MAX_VALUE,Y=C.MAX_VALUE,se=-C.MAX_VALUE,B=O.length,H=0;H<B;H++){var ee=O[H];V>(te=ee.getLeft())&&(V=te),ie<(be=ee.getRight())&&(ie=be),Y>(ce=ee.getTop())&&(Y=ce),se<(W=ee.getBottom())&&(se=W)}return new k(V,Y,ie-V,se-Y)},L.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},L.prototype.getEstimatedSize=function(){if(this.estimatedSize==C.MIN_VALUE)throw"assert failed";return this.estimatedSize},L.prototype.calcEstimatedSize=function(){for(var O=0,V=this.nodes,ie=V.length,Y=0;Y<ie;Y++)O+=V[Y].calcEstimatedSize();return this.estimatedSize=0==O?S.EMPTY_COMPOUND_NODE_SIZE:O/Math.sqrt(this.nodes.length),this.estimatedSize},L.prototype.updateConnected=function(){var O=this;if(0!=this.nodes.length){var se,te,V=new z,ie=new Set,Y=this.nodes[0];for(Y.withChildren().forEach(function(le){V.push(le),ie.add(le)});0!==V.length;)for(var ce=(se=(Y=V.shift()).getEdges()).length,W=0;W<ce;W++)null==(te=se[W].getOtherEndInGraph(Y,this))||ie.has(te)||te.withChildren().forEach(function(le){V.push(le),ie.add(le)});if(this.isConnected=!1,ie.size>=this.nodes.length){var ee=0;ie.forEach(function(le){le.owner==O&&ee++}),ee==this.nodes.length&&(this.isConnected=!0)}}else this.isConnected=!0},Re.exports=L},function(Re,X,q){"use strict";var N,C=q(1);function S(F){N=q(5),this.layout=F,this.graphs=[],this.edges=[]}S.prototype.addRoot=function(){var F=this.layout.newGraph(),D=this.layout.newNode(null),T=this.add(F,D);return this.setRootGraph(T),this.rootGraph},S.prototype.add=function(F,D,T,k,G){if(null==T&&null==k&&null==G){if(null==F)throw"Graph is null!";if(null==D)throw"Parent node is null!";if(this.graphs.indexOf(F)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(F),null!=F.parent)throw"Already has a parent!";if(null!=D.child)throw"Already has a child!";return F.parent=D,D.child=F,F}G=T,T=F;var z=(k=D).getOwner(),L=G.getOwner();if(null==z||z.getGraphManager()!=this)throw"Source not in this graph mgr!";if(null==L||L.getGraphManager()!=this)throw"Target not in this graph mgr!";if(z==L)return T.isInterGraph=!1,z.add(T,k,G);if(T.isInterGraph=!0,T.source=k,T.target=G,this.edges.indexOf(T)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(T),null==T.source||null==T.target)throw"Edge source and/or target is null!";if(-1!=T.source.edges.indexOf(T)||-1!=T.target.edges.indexOf(T))throw"Edge already in source and/or target incidency list!";return T.source.edges.push(T),T.target.edges.push(T),T},S.prototype.remove=function(F){if(F instanceof N){var D=F;if(D.getGraphManager()!=this)throw"Graph not in this graph mgr";if(D!=this.rootGraph&&(null==D.parent||D.parent.graphManager!=this))throw"Invalid parent node!";for(var k,T=[],G=(T=T.concat(D.getEdges())).length,z=0;z<G;z++)D.remove(k=T[z]);var L=[];for(G=(L=L.concat(D.getNodes())).length,z=0;z<G;z++)D.remove(L[z]);D==this.rootGraph&&this.setRootGraph(null);var O=this.graphs.indexOf(D);this.graphs.splice(O,1),D.parent=null}else if(F instanceof C){if(null==(k=F))throw"Edge is null!";if(!k.isInterGraph)throw"Not an inter-graph edge!";if(null==k.source||null==k.target)throw"Source and/or target is null!";if(-1==k.source.edges.indexOf(k)||-1==k.target.edges.indexOf(k))throw"Source and/or target doesn't know this edge!";if(O=k.source.edges.indexOf(k),k.source.edges.splice(O,1),O=k.target.edges.indexOf(k),k.target.edges.splice(O,1),null==k.source.owner||null==k.source.owner.getGraphManager())throw"Edge owner graph or owner graph manager is null!";if(-1==k.source.owner.getGraphManager().edges.indexOf(k))throw"Not in owner graph manager's edge list!";O=k.source.owner.getGraphManager().edges.indexOf(k),k.source.owner.getGraphManager().edges.splice(O,1)}},S.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},S.prototype.getGraphs=function(){return this.graphs},S.prototype.getAllNodes=function(){if(null==this.allNodes){for(var F=[],D=this.getGraphs(),T=D.length,k=0;k<T;k++)F=F.concat(D[k].getNodes());this.allNodes=F}return this.allNodes},S.prototype.resetAllNodes=function(){this.allNodes=null},S.prototype.resetAllEdges=function(){this.allEdges=null},S.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},S.prototype.getAllEdges=function(){if(null==this.allEdges){for(var F=[],D=this.getGraphs(),k=0;k<D.length;k++)F=F.concat(D[k].getEdges());F=F.concat(this.edges),this.allEdges=F}return this.allEdges},S.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},S.prototype.setAllNodesToApplyGravitation=function(F){if(null!=this.allNodesToApplyGravitation)throw"assert failed";this.allNodesToApplyGravitation=F},S.prototype.getRoot=function(){return this.rootGraph},S.prototype.setRootGraph=function(F){if(F.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=F,null==F.parent&&(F.parent=this.layout.newNode("Root node"))},S.prototype.getLayout=function(){return this.layout},S.prototype.isOneAncestorOfOther=function(F,D){if(null==F||null==D)throw"assert failed";if(F==D)return!0;for(var k,T=F.getOwner();null!=(k=T.getParent());){if(k==D)return!0;if(null==(T=k.getOwner()))break}for(T=D.getOwner();null!=(k=T.getParent());){if(k==F)return!0;if(null==(T=k.getOwner()))break}return!1},S.prototype.calcLowestCommonAncestors=function(){for(var F,D,T,k,G,z=this.getAllEdges(),L=z.length,U=0;U<L;U++)if(D=(F=z[U]).source,T=F.target,F.lca=null,F.sourceInLca=D,F.targetInLca=T,D!=T){for(k=D.getOwner();null==F.lca;){for(F.targetInLca=T,G=T.getOwner();null==F.lca;){if(G==k){F.lca=G;break}if(G==this.rootGraph)break;if(null!=F.lca)throw"assert failed";F.targetInLca=G.getParent(),G=F.targetInLca.getOwner()}if(k==this.rootGraph)break;null==F.lca&&(F.sourceInLca=k.getParent(),k=F.sourceInLca.getOwner())}if(null==F.lca)throw"assert failed"}else F.lca=D.getOwner()},S.prototype.calcLowestCommonAncestor=function(F,D){if(F==D)return F.getOwner();for(var T=F.getOwner();null!=T;){for(var k=D.getOwner();null!=k;){if(k==T)return k;k=k.getParent().getOwner()}T=T.getParent().getOwner()}return T},S.prototype.calcInclusionTreeDepths=function(F,D){null==F&&null==D&&(F=this.rootGraph,D=1);for(var T,k=F.getNodes(),G=k.length,z=0;z<G;z++)(T=k[z]).inclusionTreeDepth=D,null!=T.child&&this.calcInclusionTreeDepths(T.child,D+1)},S.prototype.includesInvalidEdge=function(){for(var F,D=this.edges.length,T=0;T<D;T++)if(this.isOneAncestorOfOther((F=this.edges[T]).source,F.target))return!0;return!1},Re.exports=S},function(Re,X,q){"use strict";var N=q(0);function C(){}for(var S in N)C[S]=N[S];C.MAX_ITERATIONS=2500,C.DEFAULT_EDGE_LENGTH=50,C.DEFAULT_SPRING_STRENGTH=.45,C.DEFAULT_REPULSION_STRENGTH=4500,C.DEFAULT_GRAVITY_STRENGTH=.4,C.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,C.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,C.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,C.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,C.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,C.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,C.COOLING_ADAPTATION_FACTOR=.33,C.ADAPTATION_LOWER_NODE_LIMIT=1e3,C.ADAPTATION_UPPER_NODE_LIMIT=5e3,C.MAX_NODE_DISPLACEMENT=3*(C.MAX_NODE_DISPLACEMENT_INCREMENTAL=100),C.MIN_REPULSION_DIST=C.DEFAULT_EDGE_LENGTH/10,C.CONVERGENCE_CHECK_PERIOD=100,C.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,C.MIN_EDGE_LENGTH=1,C.GRID_CALCULATION_CHECK_PERIOD=10,Re.exports=C},function(Re,X,q){"use strict";var N=q(12);function C(){}C.calcSeparationAmount=function(S,F,D,T){if(!S.intersects(F))throw"assert failed";var k=new Array(2);this.decideDirectionsForOverlappingNodes(S,F,k),D[0]=Math.min(S.getRight(),F.getRight())-Math.max(S.x,F.x),D[1]=Math.min(S.getBottom(),F.getBottom())-Math.max(S.y,F.y),S.getX()<=F.getX()&&S.getRight()>=F.getRight()?D[0]+=Math.min(F.getX()-S.getX(),S.getRight()-F.getRight()):F.getX()<=S.getX()&&F.getRight()>=S.getRight()&&(D[0]+=Math.min(S.getX()-F.getX(),F.getRight()-S.getRight())),S.getY()<=F.getY()&&S.getBottom()>=F.getBottom()?D[1]+=Math.min(F.getY()-S.getY(),S.getBottom()-F.getBottom()):F.getY()<=S.getY()&&F.getBottom()>=S.getBottom()&&(D[1]+=Math.min(S.getY()-F.getY(),F.getBottom()-S.getBottom()));var G=Math.abs((F.getCenterY()-S.getCenterY())/(F.getCenterX()-S.getCenterX()));F.getCenterY()===S.getCenterY()&&F.getCenterX()===S.getCenterX()&&(G=1);var z=G*D[0],L=D[1]/G;D[0]<L?L=D[0]:z=D[1],D[0]=-1*k[0]*(L/2+T),D[1]=-1*k[1]*(z/2+T)},C.decideDirectionsForOverlappingNodes=function(S,F,D){D[0]=S.getCenterX()<F.getCenterX()?-1:1,D[1]=S.getCenterY()<F.getCenterY()?-1:1},C.getIntersection2=function(S,F,D){var T=S.getCenterX(),k=S.getCenterY(),G=F.getCenterX(),z=F.getCenterY();if(S.intersects(F))return D[0]=T,D[1]=k,D[2]=G,D[3]=z,!0;var L=S.getX(),U=S.getY(),O=S.getRight(),V=S.getX(),ie=S.getBottom(),Y=S.getRight(),se=S.getWidthHalf(),te=S.getHeightHalf(),be=F.getX(),ce=F.getY(),W=F.getRight(),B=F.getX(),H=F.getBottom(),ee=F.getRight(),le=F.getWidthHalf(),me=F.getHeightHalf(),ae=!1,_e=!1;if(T===G){if(k>z)return D[0]=T,D[1]=U,D[2]=G,D[3]=H,!1;if(k<z)return D[0]=T,D[1]=ie,D[2]=G,D[3]=ce,!1}else if(k===z){if(T>G)return D[0]=L,D[1]=k,D[2]=W,D[3]=z,!1;if(T<G)return D[0]=O,D[1]=k,D[2]=be,D[3]=z,!1}else{var Le=S.height/S.width,ye=F.height/F.width,$e=(z-k)/(G-T),He=void 0,Ie=void 0,pe=void 0,qe=void 0;if(-Le===$e?T>G?(D[0]=V,D[1]=ie,ae=!0):(D[0]=O,D[1]=U,ae=!0):Le===$e&&(T>G?(D[0]=L,D[1]=U,ae=!0):(D[0]=Y,D[1]=ie,ae=!0)),-ye===$e?G>T?(D[2]=B,D[3]=H,_e=!0):(D[2]=W,D[3]=ce,_e=!0):ye===$e&&(G>T?(D[2]=be,D[3]=ce,_e=!0):(D[2]=ee,D[3]=H,_e=!0)),ae&&_e)return!1;if(T>G?k>z?(He=this.getCardinalDirection(Le,$e,4),Ie=this.getCardinalDirection(ye,$e,2)):(He=this.getCardinalDirection(-Le,$e,3),Ie=this.getCardinalDirection(-ye,$e,1)):k>z?(He=this.getCardinalDirection(-Le,$e,1),Ie=this.getCardinalDirection(-ye,$e,3)):(He=this.getCardinalDirection(Le,$e,2),Ie=this.getCardinalDirection(ye,$e,4)),!ae)switch(He){case 1:pe=U,D[0]=T+-te/$e,D[1]=pe;break;case 2:pe=k+se*$e,D[0]=Y,D[1]=pe;break;case 3:pe=ie,D[0]=T+te/$e,D[1]=pe;break;case 4:pe=k+-se*$e,D[0]=V,D[1]=pe}if(!_e)switch(Ie){case 1:qe=ce,D[2]=G+-me/$e,D[3]=qe;break;case 2:qe=z+le*$e,D[2]=ee,D[3]=qe;break;case 3:qe=H,D[2]=G+me/$e,D[3]=qe;break;case 4:qe=z+-le*$e,D[2]=B,D[3]=qe}}return!1},C.getCardinalDirection=function(S,F,D){return S>F?D:1+D%4},C.getIntersection=function(S,F,D,T){if(null==T)return this.getIntersection2(S,F,D);var te,be,ce,W,B,H,ee,k=S.x,G=S.y,z=F.x,L=F.y,U=D.x,O=D.y,V=T.x,ie=T.y;return B=z*G-k*L,H=V*O-U*ie,0==(ee=(te=L-G)*(W=U-V)-(be=ie-O)*(ce=k-z))?null:new N((ce*H-W*B)/ee,(be*B-te*H)/ee)},C.angleOfVector=function(S,F,D,T){var k=void 0;return S!==D?(k=Math.atan((T-F)/(D-S)),D<S?k+=Math.PI:T<F&&(k+=this.TWO_PI)):k=T<F?this.ONE_AND_HALF_PI:this.HALF_PI,k},C.doIntersect=function(S,F,D,T){var k=S.x,G=S.y,z=F.x,L=F.y,U=D.x,O=D.y,V=T.x,ie=T.y,Y=(z-k)*(ie-O)-(V-U)*(L-G);if(0===Y)return!1;var se=((ie-O)*(V-k)+(U-V)*(ie-G))/Y,te=((G-L)*(V-k)+(z-k)*(ie-G))/Y;return 0<se&&se<1&&0<te&&te<1},C.HALF_PI=.5*Math.PI,C.ONE_AND_HALF_PI=1.5*Math.PI,C.TWO_PI=2*Math.PI,C.THREE_PI=3*Math.PI,Re.exports=C},function(Re,X,q){"use strict";function N(){}N.sign=function(C){return C>0?1:C<0?-1:0},N.floor=function(C){return C<0?Math.ceil(C):Math.floor(C)},N.ceil=function(C){return C<0?Math.floor(C):Math.ceil(C)},Re.exports=N},function(Re,X,q){"use strict";function N(){}N.MAX_VALUE=2147483647,N.MIN_VALUE=-2147483648,Re.exports=N},function(Re,X,q){"use strict";var N=function(){function k(G,z){for(var L=0;L<z.length;L++){var U=z[L];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(G,U.key,U)}}return function(G,z,L){return z&&k(G.prototype,z),L&&k(G,L),G}}();var S=function(G){return{value:G,next:null,prev:null}},F=function(G,z,L,U){return null!==G?G.next=z:U.head=z,null!==L?L.prev=z:U.tail=z,z.prev=G,z.next=L,U.length++,z},D=function(G,z){var L=G.prev,U=G.next;return null!==L?L.next=U:z.head=U,null!==U?U.prev=L:z.tail=L,G.prev=G.next=null,z.length--,G},T=function(){function k(G){var z=this;(function C(k,G){if(!(k instanceof G))throw new TypeError("Cannot call a class as a function")})(this,k),this.length=0,this.head=null,this.tail=null,G?.forEach(function(L){return z.push(L)})}return N(k,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(z,L){return F(L.prev,S(z),L,this)}},{key:"insertAfter",value:function(z,L){return F(L,S(z),L.next,this)}},{key:"insertNodeBefore",value:function(z,L){return F(L.prev,z,L,this)}},{key:"insertNodeAfter",value:function(z,L){return F(L,z,L.next,this)}},{key:"push",value:function(z){return F(this.tail,S(z),null,this)}},{key:"unshift",value:function(z){return F(null,S(z),this.head,this)}},{key:"remove",value:function(z){return D(z,this)}},{key:"pop",value:function(){return D(this.tail,this).value}},{key:"popNode",value:function(){return D(this.tail,this)}},{key:"shift",value:function(){return D(this.head,this).value}},{key:"shiftNode",value:function(){return D(this.head,this)}},{key:"get_object_at",value:function(z){if(z<=this.length()){for(var L=1,U=this.head;L<z;)U=U.next,L++;return U.value}}},{key:"set_object_at",value:function(z,L){if(z<=this.length()){for(var U=1,O=this.head;U<z;)O=O.next,U++;O.value=L}}}]),k}();Re.exports=T},function(Re,X,q){"use strict";function N(C,S,F){this.x=null,this.y=null,null==C&&null==S&&null==F?(this.x=0,this.y=0):"number"==typeof C&&"number"==typeof S&&null==F?(this.x=C,this.y=S):"Point"==C.constructor.name&&null==S&&null==F&&(this.x=(F=C).x,this.y=F.y)}N.prototype.getX=function(){return this.x},N.prototype.getY=function(){return this.y},N.prototype.getLocation=function(){return new N(this.x,this.y)},N.prototype.setLocation=function(C,S,F){"Point"==C.constructor.name&&null==S&&null==F?this.setLocation((F=C).x,F.y):"number"==typeof C&&"number"==typeof S&&null==F&&(parseInt(C)==C&&parseInt(S)==S?this.move(C,S):(this.x=Math.floor(C+.5),this.y=Math.floor(S+.5)))},N.prototype.move=function(C,S){this.x=C,this.y=S},N.prototype.translate=function(C,S){this.x+=C,this.y+=S},N.prototype.equals=function(C){return"Point"==C.constructor.name?this.x==C.x&&this.y==C.y:this==C},N.prototype.toString=function(){return(new N).constructor.name+"[x="+this.x+",y="+this.y+"]"},Re.exports=N},function(Re,X,q){"use strict";function N(C,S,F,D){this.x=0,this.y=0,this.width=0,this.height=0,null!=C&&null!=S&&null!=F&&null!=D&&(this.x=C,this.y=S,this.width=F,this.height=D)}N.prototype.getX=function(){return this.x},N.prototype.setX=function(C){this.x=C},N.prototype.getY=function(){return this.y},N.prototype.setY=function(C){this.y=C},N.prototype.getWidth=function(){return this.width},N.prototype.setWidth=function(C){this.width=C},N.prototype.getHeight=function(){return this.height},N.prototype.setHeight=function(C){this.height=C},N.prototype.getRight=function(){return this.x+this.width},N.prototype.getBottom=function(){return this.y+this.height},N.prototype.intersects=function(C){return!(this.getRight()<C.x||this.getBottom()<C.y||C.getRight()<this.x||C.getBottom()<this.y)},N.prototype.getCenterX=function(){return this.x+this.width/2},N.prototype.getMinX=function(){return this.getX()},N.prototype.getMaxX=function(){return this.getX()+this.width},N.prototype.getCenterY=function(){return this.y+this.height/2},N.prototype.getMinY=function(){return this.getY()},N.prototype.getMaxY=function(){return this.getY()+this.height},N.prototype.getWidthHalf=function(){return this.width/2},N.prototype.getHeightHalf=function(){return this.height/2},Re.exports=N},function(Re,X,q){"use strict";var N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S};function C(){}C.lastID=0,C.createID=function(S){return C.isPrimitive(S)?S:(null!=S.uniqueID||(S.uniqueID=C.getString(),C.lastID++),S.uniqueID)},C.getString=function(S){return null==S&&(S=C.lastID),"Object#"+S},C.isPrimitive=function(S){var F=typeof S>"u"?"undefined":N(S);return null==S||"object"!=F&&"function"!=F},Re.exports=C},function(Re,X,q){"use strict";function N(U){if(Array.isArray(U)){for(var O=0,V=Array(U.length);O<U.length;O++)V[O]=U[O];return V}return Array.from(U)}var C=q(0),S=q(6),F=q(3),D=q(1),T=q(5),k=q(4),G=q(17),z=q(27);function L(U){z.call(this),this.layoutQuality=C.QUALITY,this.createBendsAsNeeded=C.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=C.DEFAULT_INCREMENTAL,this.animationOnLayout=C.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=C.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=C.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=C.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new S(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,null!=U&&(this.isRemoteUse=U)}L.RANDOM_SEED=1,(L.prototype=Object.create(z.prototype)).getGraphManager=function(){return this.graphManager},L.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},L.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},L.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},L.prototype.newGraphManager=function(){var U=new S(this);return this.graphManager=U,U},L.prototype.newGraph=function(U){return new T(null,this.graphManager,U)},L.prototype.newNode=function(U){return new F(this.graphManager,U)},L.prototype.newEdge=function(U){return new D(null,null,U)},L.prototype.checkLayoutSuccess=function(){return null==this.graphManager.getRoot()||0==this.graphManager.getRoot().getNodes().length||this.graphManager.includesInvalidEdge()},L.prototype.runLayout=function(){var U;return this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters(),U=!this.checkLayoutSuccess()&&this.layout(),"during"!==C.ANIMATE&&(U&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,U)},L.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},L.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var O=this.graphManager.getAllEdges(),V=0;V<O.length;V++);var Y=this.graphManager.getRoot().getNodes();for(V=0;V<Y.length;V++);this.update(this.graphManager.getRoot())}},L.prototype.update=function(U){if(null==U)this.update2();else if(U instanceof F){var O=U;if(null!=O.getChild())for(var V=O.getChild().getNodes(),ie=0;ie<V.length;ie++)update(V[ie]);null!=O.vGraphObject&&O.vGraphObject.update(O)}else U instanceof D?null!=U.vGraphObject&&U.vGraphObject.update(U):U instanceof T&&null!=U.vGraphObject&&U.vGraphObject.update(U)},L.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=C.QUALITY,this.animationDuringLayout=C.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=C.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=C.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=C.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=C.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=C.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},L.prototype.transform=function(U){if(null==U)this.transform(new k(0,0));else{var O=new G,V=this.graphManager.getRoot().updateLeftTop();if(null!=V){O.setWorldOrgX(U.x),O.setWorldOrgY(U.y),O.setDeviceOrgX(V.x),O.setDeviceOrgY(V.y);for(var ie=this.getAllNodes(),se=0;se<ie.length;se++)ie[se].transform(O)}}},L.prototype.positionNodesRandomly=function(U){if(null==U)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var O,V,ie=U.getNodes(),Y=0;Y<ie.length;Y++)null==(V=(O=ie[Y]).getChild())||0==V.getNodes().length?O.scatter():(this.positionNodesRandomly(V),O.updateBounds())},L.prototype.getFlatForest=function(){for(var U=[],O=!0,V=this.graphManager.getRoot().getNodes(),ie=!0,Y=0;Y<V.length;Y++)null!=V[Y].getChild()&&(ie=!1);if(!ie)return U;var se=new Set,te=[],be=new Map,ce=[];for(ce=ce.concat(V);ce.length>0&&O;){for(te.push(ce[0]);te.length>0&&O;){var W=te[0];te.splice(0,1),se.add(W);var B=W.getEdges();for(Y=0;Y<B.length;Y++){var H=B[Y].getOtherEnd(W);if(be.get(W)!=H){if(se.has(H)){O=!1;break}te.push(H),be.set(H,W)}}}if(O){var ee=[].concat(N(se));for(U.push(ee),Y=0;Y<ee.length;Y++){var me=ce.indexOf(ee[Y]);me>-1&&ce.splice(me,1)}se=new Set,be=new Map}else U=[]}return U},L.prototype.createDummyNodesForBendpoints=function(U){for(var O=[],V=U.source,ie=this.graphManager.calcLowestCommonAncestor(U.source,U.target),Y=0;Y<U.bendpoints.length;Y++){var se=this.newNode(null);se.setRect(new Point(0,0),new Dimension(1,1)),ie.add(se);var te=this.newEdge(null);this.graphManager.add(te,V,se),O.add(se),V=se}return te=this.newEdge(null),this.graphManager.add(te,V,U.target),this.edgeToDummyNodes.set(U,O),U.isInterGraph()?this.graphManager.remove(U):ie.remove(U),O},L.prototype.createBendpointsFromDummyNodes=function(){var U=[];U=U.concat(this.graphManager.getAllEdges()),U=[].concat(N(this.edgeToDummyNodes.keys())).concat(U);for(var O=0;O<U.length;O++){var V=U[O];if(V.bendpoints.length>0){for(var ie=this.edgeToDummyNodes.get(V),Y=0;Y<ie.length;Y++){var se=ie[Y],te=new k(se.getCenterX(),se.getCenterY()),be=V.bendpoints.get(Y);be.x=te.x,be.y=te.y,se.getOwner().remove(se)}this.graphManager.add(V,V.source,V.target)}}},L.transform=function(U,O,V,ie){if(null!=V&&null!=ie){var Y=O;return U<=50?Y-=(O-O/V)/50*(50-U):Y+=(O*ie-O)/50*(U-50),Y}var be,ce;return U<=50?(be=9*O/500,ce=O/10):(be=9*O/50,ce=-8*O),be*U+ce},L.findCenterOfTree=function(U){var O=[];O=O.concat(U);var V=[],ie=new Map,Y=!1,se=null;(1==O.length||2==O.length)&&(Y=!0,se=O[0]);for(var te=0;te<O.length;te++){var ce=(be=O[te]).getNeighborsList().size;ie.set(be,be.getNeighborsList().size),1==ce&&V.push(be)}var W=[];for(W=W.concat(V);!Y;){var B=[];for(B=B.concat(W),W=[],te=0;te<O.length;te++){var be,H=O.indexOf(be=O[te]);H>=0&&O.splice(H,1),be.getNeighborsList().forEach(function(ae){if(V.indexOf(ae)<0){var Le=ie.get(ae)-1;1==Le&&W.push(ae),ie.set(ae,Le)}})}V=V.concat(W),(1==O.length||2==O.length)&&(Y=!0,se=O[0])}return se},L.prototype.setGraphManager=function(U){this.graphManager=U},Re.exports=L},function(Re,X,q){"use strict";function N(){}N.seed=1,N.x=0,N.nextDouble=function(){return(N.x=1e4*Math.sin(N.seed++))-Math.floor(N.x)},Re.exports=N},function(Re,X,q){"use strict";var N=q(4);function C(S,F){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}C.prototype.getWorldOrgX=function(){return this.lworldOrgX},C.prototype.setWorldOrgX=function(S){this.lworldOrgX=S},C.prototype.getWorldOrgY=function(){return this.lworldOrgY},C.prototype.setWorldOrgY=function(S){this.lworldOrgY=S},C.prototype.getWorldExtX=function(){return this.lworldExtX},C.prototype.setWorldExtX=function(S){this.lworldExtX=S},C.prototype.getWorldExtY=function(){return this.lworldExtY},C.prototype.setWorldExtY=function(S){this.lworldExtY=S},C.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},C.prototype.setDeviceOrgX=function(S){this.ldeviceOrgX=S},C.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},C.prototype.setDeviceOrgY=function(S){this.ldeviceOrgY=S},C.prototype.getDeviceExtX=function(){return this.ldeviceExtX},C.prototype.setDeviceExtX=function(S){this.ldeviceExtX=S},C.prototype.getDeviceExtY=function(){return this.ldeviceExtY},C.prototype.setDeviceExtY=function(S){this.ldeviceExtY=S},C.prototype.transformX=function(S){var F=0,D=this.lworldExtX;return 0!=D&&(F=this.ldeviceOrgX+(S-this.lworldOrgX)*this.ldeviceExtX/D),F},C.prototype.transformY=function(S){var F=0,D=this.lworldExtY;return 0!=D&&(F=this.ldeviceOrgY+(S-this.lworldOrgY)*this.ldeviceExtY/D),F},C.prototype.inverseTransformX=function(S){var F=0,D=this.ldeviceExtX;return 0!=D&&(F=this.lworldOrgX+(S-this.ldeviceOrgX)*this.lworldExtX/D),F},C.prototype.inverseTransformY=function(S){var F=0,D=this.ldeviceExtY;return 0!=D&&(F=this.lworldOrgY+(S-this.ldeviceOrgY)*this.lworldExtY/D),F},C.prototype.inverseTransformPoint=function(S){return new N(this.inverseTransformX(S.x),this.inverseTransformY(S.y))},Re.exports=C},function(Re,X,q){"use strict";var C=q(15),S=q(7),F=q(0),D=q(8),T=q(9);function k(){C.call(this),this.useSmartIdealEdgeLengthCalculation=S.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.idealEdgeLength=S.DEFAULT_EDGE_LENGTH,this.springConstant=S.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=S.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=S.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=S.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=S.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=S.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*S.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=S.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=S.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=S.MAX_ITERATIONS}for(var G in k.prototype=Object.create(C.prototype),C)k[G]=C[G];k.prototype.initParameters=function(){C.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=S.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},k.prototype.calcIdealEdgeLengths=function(){for(var z,L,U,O,V,ie,Y=this.getGraphManager().getAllEdges(),se=0;se<Y.length;se++)(z=Y[se]).idealLength=this.idealEdgeLength,z.isInterGraph&&(U=z.getSource(),O=z.getTarget(),V=z.getSourceInLca().getEstimatedSize(),ie=z.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(z.idealLength+=V+ie-2*F.SIMPLE_NODE_SIZE),L=z.getLca().getInclusionTreeDepth(),z.idealLength+=S.DEFAULT_EDGE_LENGTH*S.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(U.getInclusionTreeDepth()+O.getInclusionTreeDepth()-2*L))},k.prototype.initSpringEmbedder=function(){var z=this.getAllNodes().length;this.incremental?(z>S.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*S.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(z-S.ADAPTATION_LOWER_NODE_LIMIT)/(S.ADAPTATION_UPPER_NODE_LIMIT-S.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-S.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=S.MAX_NODE_DISPLACEMENT_INCREMENTAL):(this.coolingFactor=z>S.ADAPTATION_LOWER_NODE_LIMIT?Math.max(S.COOLING_ADAPTATION_FACTOR,1-(z-S.ADAPTATION_LOWER_NODE_LIMIT)/(S.ADAPTATION_UPPER_NODE_LIMIT-S.ADAPTATION_LOWER_NODE_LIMIT)*(1-S.COOLING_ADAPTATION_FACTOR)):1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=S.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(5*this.getAllNodes().length,this.maxIterations),this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},k.prototype.calcSpringForces=function(){for(var L,z=this.getAllEdges(),U=0;U<z.length;U++)this.calcSpringForce(L=z[U],L.idealLength)},k.prototype.calcRepulsionForces=function(){var U,O,V,ie,se,z=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],L=arguments.length>1&&void 0!==arguments[1]&&arguments[1],Y=this.getAllNodes();if(this.useFRGridVariant)for(this.totalIterations%S.GRID_CALCULATION_CHECK_PERIOD==1&&z&&this.updateGrid(),se=new Set,U=0;U<Y.length;U++)this.calculateRepulsionForceOfANode(V=Y[U],se,z,L),se.add(V);else for(U=0;U<Y.length;U++)for(V=Y[U],O=U+1;O<Y.length;O++)ie=Y[O],V.getOwner()==ie.getOwner()&&this.calcRepulsionForce(V,ie)},k.prototype.calcGravitationalForces=function(){for(var L=this.getAllNodesToApplyGravitation(),U=0;U<L.length;U++)this.calcGravitationalForce(L[U])},k.prototype.moveNodes=function(){for(var z=this.getAllNodes(),U=0;U<z.length;U++)z[U].move()},k.prototype.calcSpringForce=function(z,L){var V,ie,Y,se,U=z.getSource(),O=z.getTarget();if(this.uniformLeafNodeSizes&&null==U.getChild()&&null==O.getChild())z.updateLengthSimple();else if(z.updateLength(),z.isOverlapingSourceAndTarget)return;0!=(V=z.getLength())&&(se=(ie=this.springConstant*(V-L))*(z.lengthY/V),U.springForceX+=Y=ie*(z.lengthX/V),U.springForceY+=se,O.springForceX-=Y,O.springForceY-=se)},k.prototype.calcRepulsionForce=function(z,L){var Y,se,te,be,ce,W,B,U=z.getRect(),O=L.getRect(),V=new Array(2),ie=new Array(4);if(U.intersects(O)){D.calcSeparationAmount(U,O,V,S.DEFAULT_EDGE_LENGTH/2),B=2*V[1];var H=z.noOfChildren*L.noOfChildren/(z.noOfChildren+L.noOfChildren);z.repulsionForceX-=H*(W=2*V[0]),z.repulsionForceY-=H*B,L.repulsionForceX+=H*W,L.repulsionForceY+=H*B}else this.uniformLeafNodeSizes&&null==z.getChild()&&null==L.getChild()?(Y=O.getCenterX()-U.getCenterX(),se=O.getCenterY()-U.getCenterY()):(D.getIntersection(U,O,ie),Y=ie[2]-ie[0],se=ie[3]-ie[1]),Math.abs(Y)<S.MIN_REPULSION_DIST&&(Y=T.sign(Y)*S.MIN_REPULSION_DIST),Math.abs(se)<S.MIN_REPULSION_DIST&&(se=T.sign(se)*S.MIN_REPULSION_DIST),te=Y*Y+se*se,be=Math.sqrt(te),B=(ce=this.repulsionConstant*z.noOfChildren*L.noOfChildren/te)*se/be,z.repulsionForceX-=W=ce*Y/be,z.repulsionForceY-=B,L.repulsionForceX+=W,L.repulsionForceY+=B},k.prototype.calcGravitationalForce=function(z){var L,U,O,V,ie,Y,se,te;U=((L=z.getOwner()).getRight()+L.getLeft())/2,O=(L.getTop()+L.getBottom())/2,V=z.getCenterX()-U,ie=z.getCenterY()-O,Y=Math.abs(V)+z.getWidth()/2,se=Math.abs(ie)+z.getHeight()/2,z.getOwner()==this.graphManager.getRoot()?(Y>(te=L.getEstimatedSize()*this.gravityRangeFactor)||se>te)&&(z.gravitationForceX=-this.gravityConstant*V,z.gravitationForceY=-this.gravityConstant*ie):(Y>(te=L.getEstimatedSize()*this.compoundGravityRangeFactor)||se>te)&&(z.gravitationForceX=-this.gravityConstant*V*this.compoundGravityConstant,z.gravitationForceY=-this.gravityConstant*ie*this.compoundGravityConstant)},k.prototype.isConverged=function(){var z,L=!1;return this.totalIterations>this.maxIterations/3&&(L=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),z=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,z||L},k.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},k.prototype.calcNoOfChildrenForAllNodes=function(){for(var z,L=this.graphManager.getAllNodes(),U=0;U<L.length;U++)(z=L[U]).noOfChildren=z.getNoOfChildren()},k.prototype.calcGrid=function(z){var L,U;L=parseInt(Math.ceil((z.getRight()-z.getLeft())/this.repulsionRange)),U=parseInt(Math.ceil((z.getBottom()-z.getTop())/this.repulsionRange));for(var O=new Array(L),V=0;V<L;V++)O[V]=new Array(U);for(V=0;V<L;V++)for(var ie=0;ie<U;ie++)O[V][ie]=new Array;return O},k.prototype.addNodeToGrid=function(z,L,U){var O,V,ie,Y;O=parseInt(Math.floor((z.getRect().x-L)/this.repulsionRange)),V=parseInt(Math.floor((z.getRect().width+z.getRect().x-L)/this.repulsionRange)),ie=parseInt(Math.floor((z.getRect().y-U)/this.repulsionRange)),Y=parseInt(Math.floor((z.getRect().height+z.getRect().y-U)/this.repulsionRange));for(var se=O;se<=V;se++)for(var te=ie;te<=Y;te++)this.grid[se][te].push(z),z.setGridCoordinates(O,V,ie,Y)},k.prototype.updateGrid=function(){var z,U=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),z=0;z<U.length;z++)this.addNodeToGrid(U[z],this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},k.prototype.calculateRepulsionForceOfANode=function(z,L,U,O){if(this.totalIterations%S.GRID_CALCULATION_CHECK_PERIOD==1&&U||O){var V=new Set;z.surrounding=new Array;for(var ie,Y=this.grid,se=z.startX-1;se<z.finishX+2;se++)for(var te=z.startY-1;te<z.finishY+2;te++)if(!(se<0||te<0||se>=Y.length||te>=Y[0].length))for(var be=0;be<Y[se][te].length;be++)if(ie=Y[se][te][be],z.getOwner()==ie.getOwner()&&z!=ie&&!L.has(ie)&&!V.has(ie)){var ce=Math.abs(z.getCenterX()-ie.getCenterX())-(z.getWidth()/2+ie.getWidth()/2),W=Math.abs(z.getCenterY()-ie.getCenterY())-(z.getHeight()/2+ie.getHeight()/2);ce<=this.repulsionRange&&W<=this.repulsionRange&&V.add(ie)}z.surrounding=[].concat(function N(z){if(Array.isArray(z)){for(var L=0,U=Array(z.length);L<z.length;L++)U[L]=z[L];return U}return Array.from(z)}(V))}for(se=0;se<z.surrounding.length;se++)this.calcRepulsionForce(z,z.surrounding[se])},k.prototype.calcRepulsionRange=function(){return 0},Re.exports=k},function(Re,X,q){"use strict";var N=q(1),C=q(7);function S(D,T,k){N.call(this,D,T,k),this.idealLength=C.DEFAULT_EDGE_LENGTH}for(var F in S.prototype=Object.create(N.prototype),N)S[F]=N[F];Re.exports=S},function(Re,X,q){"use strict";var N=q(3);function C(F,D,T,k){N.call(this,F,D,T,k),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}for(var S in C.prototype=Object.create(N.prototype),N)C[S]=N[S];C.prototype.setGridCoordinates=function(F,D,T,k){this.startX=F,this.finishX=D,this.startY=T,this.finishY=k},Re.exports=C},function(Re,X,q){"use strict";function N(C,S){this.width=0,this.height=0,null!==C&&null!==S&&(this.height=S,this.width=C)}N.prototype.getWidth=function(){return this.width},N.prototype.setWidth=function(C){this.width=C},N.prototype.getHeight=function(){return this.height},N.prototype.setHeight=function(C){this.height=C},Re.exports=N},function(Re,X,q){"use strict";var N=q(14);function C(){this.map={},this.keys=[]}C.prototype.put=function(S,F){var D=N.createID(S);this.contains(D)||(this.map[D]=F,this.keys.push(S))},C.prototype.contains=function(S){return N.createID(S),null!=this.map[S]},C.prototype.get=function(S){var F=N.createID(S);return this.map[F]},C.prototype.keySet=function(){return this.keys},Re.exports=C},function(Re,X,q){"use strict";var N=q(14);function C(){this.set={}}C.prototype.add=function(S){var F=N.createID(S);this.contains(F)||(this.set[F]=S)},C.prototype.remove=function(S){delete this.set[N.createID(S)]},C.prototype.clear=function(){this.set={}},C.prototype.contains=function(S){return this.set[N.createID(S)]==S},C.prototype.isEmpty=function(){return 0===this.size()},C.prototype.size=function(){return Object.keys(this.set).length},C.prototype.addAllTo=function(S){for(var F=Object.keys(this.set),D=F.length,T=0;T<D;T++)S.push(this.set[F[T]])},C.prototype.size=function(){return Object.keys(this.set).length},C.prototype.addAll=function(S){for(var F=S.length,D=0;D<F;D++)this.add(S[D])},Re.exports=C},function(Re,X,q){"use strict";var N=function(){function D(T,k){for(var G=0;G<k.length;G++){var z=k[G];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(T,z.key,z)}}return function(T,k,G){return k&&D(T.prototype,k),G&&D(T,G),T}}();var S=q(11),F=function(){function D(T,k){(function C(D,T){if(!(D instanceof T))throw new TypeError("Cannot call a class as a function")})(this,D),(null!==k||void 0!==k)&&(this.compareFunction=this._defaultCompareFunction);var G;G=T instanceof S?T.size():T.length,this._quicksort(T,0,G-1)}return N(D,[{key:"_quicksort",value:function(k,G,z){if(G<z){var L=this._partition(k,G,z);this._quicksort(k,G,L),this._quicksort(k,L+1,z)}}},{key:"_partition",value:function(k,G,z){for(var L=this._get(k,G),U=G,O=z;;){for(;this.compareFunction(L,this._get(k,O));)O--;for(;this.compareFunction(this._get(k,U),L);)U++;if(!(U<O))return O;this._swap(k,U,O),U++,O--}}},{key:"_get",value:function(k,G){return k instanceof S?k.get_object_at(G):k[G]}},{key:"_set",value:function(k,G,z){k instanceof S?k.set_object_at(G,z):k[G]=z}},{key:"_swap",value:function(k,G,z){var L=this._get(k,G);this._set(k,G,this._get(k,z)),this._set(k,z,L)}},{key:"_defaultCompareFunction",value:function(k,G){return G>k}}]),D}();Re.exports=F},function(Re,X,q){"use strict";var N=function(){function F(D,T){for(var k=0;k<T.length;k++){var G=T[k];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(D,G.key,G)}}return function(D,T,k){return T&&F(D.prototype,T),k&&F(D,k),D}}();function C(F,D){if(!(F instanceof D))throw new TypeError("Cannot call a class as a function")}var S=function(){function F(D,T){var k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,G=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,z=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;C(this,F),this.sequence1=D,this.sequence2=T,this.match_score=k,this.mismatch_penalty=G,this.gap_penalty=z,this.iMax=D.length+1,this.jMax=T.length+1,this.grid=new Array(this.iMax);for(var L=0;L<this.iMax;L++){this.grid[L]=new Array(this.jMax);for(var U=0;U<this.jMax;U++)this.grid[L][U]=0}this.tracebackGrid=new Array(this.iMax);for(var O=0;O<this.iMax;O++){this.tracebackGrid[O]=new Array(this.jMax);for(var V=0;V<this.jMax;V++)this.tracebackGrid[O][V]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return N(F,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var T=1;T<this.jMax;T++)this.grid[0][T]=this.grid[0][T-1]+this.gap_penalty,this.tracebackGrid[0][T]=[!1,!1,!0];for(var k=1;k<this.iMax;k++)this.grid[k][0]=this.grid[k-1][0]+this.gap_penalty,this.tracebackGrid[k][0]=[!1,!0,!1];for(var G=1;G<this.iMax;G++)for(var z=1;z<this.jMax;z++){var V=[this.sequence1[G-1]===this.sequence2[z-1]?this.grid[G-1][z-1]+this.match_score:this.grid[G-1][z-1]+this.mismatch_penalty,this.grid[G-1][z]+this.gap_penalty,this.grid[G][z-1]+this.gap_penalty],ie=this.arrayAllMaxIndexes(V);this.grid[G][z]=V[ie[0]],this.tracebackGrid[G][z]=[ie.includes(0),ie.includes(1),ie.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var T=[];for(T.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});T[0];){var k=T[0],G=this.tracebackGrid[k.pos[0]][k.pos[1]];G[0]&&T.push({pos:[k.pos[0]-1,k.pos[1]-1],seq1:this.sequence1[k.pos[0]-1]+k.seq1,seq2:this.sequence2[k.pos[1]-1]+k.seq2}),G[1]&&T.push({pos:[k.pos[0]-1,k.pos[1]],seq1:this.sequence1[k.pos[0]-1]+k.seq1,seq2:"-"+k.seq2}),G[2]&&T.push({pos:[k.pos[0],k.pos[1]-1],seq1:"-"+k.seq1,seq2:this.sequence2[k.pos[1]-1]+k.seq2}),0===k.pos[0]&&0===k.pos[1]&&this.alignments.push({sequence1:k.seq1,sequence2:k.seq2}),T.shift()}return this.alignments}},{key:"getAllIndexes",value:function(T,k){for(var G=[],z=-1;-1!==(z=T.indexOf(k,z+1));)G.push(z);return G}},{key:"arrayAllMaxIndexes",value:function(T){return this.getAllIndexes(T,Math.max.apply(null,T))}}]),F}();Re.exports=S},function(Re,X,q){"use strict";var N=function(){};N.FDLayout=q(18),N.FDLayoutConstants=q(7),N.FDLayoutEdge=q(19),N.FDLayoutNode=q(20),N.DimensionD=q(21),N.HashMap=q(22),N.HashSet=q(23),N.IGeometry=q(8),N.IMath=q(9),N.Integer=q(10),N.Point=q(12),N.PointD=q(4),N.RandomSeed=q(16),N.RectangleD=q(13),N.Transform=q(17),N.UniqueIDGeneretor=q(14),N.Quicksort=q(24),N.LinkedList=q(11),N.LGraphObject=q(2),N.LGraph=q(5),N.LEdge=q(1),N.LGraphManager=q(6),N.LNode=q(3),N.Layout=q(15),N.LayoutConstants=q(0),N.NeedlemanWunsch=q(25),Re.exports=N},function(Re,X,q){"use strict";function N(){this.listeners=[]}var C=N.prototype;C.addListener=function(S,F){this.listeners.push({event:S,callback:F})},C.removeListener=function(S,F){for(var D=this.listeners.length;D>=0;D--){var T=this.listeners[D];T.event===S&&T.callback===F&&this.listeners.splice(D,1)}},C.emit=function(S,F){for(var D=0;D<this.listeners.length;D++){var T=this.listeners[D];S===T.event&&T.callback(F)}},Re.exports=N}])},4994:(Ne,Re,X)=>{var q=X(4312),N=X(6421),C=X(5764),S=X(8685),F=X(6676);function D(T){var k=-1,G=null==T?0:T.length;for(this.clear();++k<G;){var z=T[k];this.set(z[0],z[1])}}D.prototype.clear=q,D.prototype.delete=N,D.prototype.get=C,D.prototype.has=S,D.prototype.set=F,Ne.exports=D},9215:(Ne,Re,X)=>{var q=X(1840),N=X(4378),C=X(4981),S=X(7343),F=X(8895);function D(T){var k=-1,G=null==T?0:T.length;for(this.clear();++k<G;){var z=T[k];this.set(z[0],z[1])}}D.prototype.clear=q,D.prototype.delete=N,D.prototype.get=C,D.prototype.has=S,D.prototype.set=F,Ne.exports=D},1501:(Ne,Re,X)=>{var C=X(3436)(X(2119),"Map");Ne.exports=C},9850:(Ne,Re,X)=>{var q=X(638),N=X(1184),C=X(866),S=X(3771),F=X(1772);function D(T){var k=-1,G=null==T?0:T.length;for(this.clear();++k<G;){var z=T[k];this.set(z[0],z[1])}}D.prototype.clear=q,D.prototype.delete=N,D.prototype.get=C,D.prototype.has=S,D.prototype.set=F,Ne.exports=D},443:(Ne,Re,X)=>{var q=X(2119);Ne.exports=q.Symbol},4633:Ne=>{Ne.exports=function Re(X,q){for(var N=-1,C=null==X?0:X.length,S=Array(C);++N<C;)S[N]=q(X[N],N,X);return S}},9719:(Ne,Re,X)=>{var q=X(5683),N=X(217),S=Object.prototype.hasOwnProperty;Ne.exports=function F(D,T,k){var G=D[T];(!S.call(D,T)||!N(G,k)||void 0===k&&!(T in D))&&q(D,T,k)}},3503:(Ne,Re,X)=>{var q=X(217);Ne.exports=function N(C,S){for(var F=C.length;F--;)if(q(C[F][0],S))return F;return-1}},5683:(Ne,Re,X)=>{var q=X(6713);Ne.exports=function N(C,S,F){"__proto__"==S&&q?q(C,S,{configurable:!0,enumerable:!0,value:F,writable:!0}):C[S]=F}},5456:(Ne,Re,X)=>{var q=X(6884),N=X(8533);Ne.exports=function C(S,F){for(var D=0,T=(F=q(F,S)).length;null!=S&&D<T;)S=S[N(F[D++])];return D&&D==T?S:void 0}},3337:(Ne,Re,X)=>{var q=X(443),N=X(1318),C=X(2902),D=q?q.toStringTag:void 0;Ne.exports=function T(k){return null==k?void 0===k?"[object Undefined]":"[object Null]":D&&D in Object(k)?N(k):C(k)}},7304:(Ne,Re,X)=>{var q=X(5946),N=X(1943),C=X(5940),S=X(2827),D=/^\[object .+?Constructor\]$/,L=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");Ne.exports=function U(O){return!(!C(O)||N(O))&&(q(O)?L:D).test(S(O))}},5963:(Ne,Re,X)=>{var q=X(9719),N=X(6884),C=X(8442),S=X(5940),F=X(8533);Ne.exports=function D(T,k,G,z){if(!S(T))return T;for(var L=-1,U=(k=N(k,T)).length,O=U-1,V=T;null!=V&&++L<U;){var ie=F(k[L]),Y=G;if("__proto__"===ie||"constructor"===ie||"prototype"===ie)return T;if(L!=O){var se=V[ie];void 0===(Y=z?z(se,ie,V):void 0)&&(Y=S(se)?se:C(k[L+1])?[]:{})}q(V,ie,Y),V=V[ie]}return T}},3935:(Ne,Re,X)=>{var q=X(443),N=X(4633),C=X(1503),S=X(4129),D=q?q.prototype:void 0,T=D?D.toString:void 0;Ne.exports=function k(G){if("string"==typeof G)return G;if(C(G))return N(G,k)+"";if(S(G))return T?T.call(G):"";var z=G+"";return"0"==z&&1/G==-1/0?"-0":z}},3348:(Ne,Re,X)=>{var q=X(2760),N=/^\s+/;Ne.exports=function C(S){return S&&S.slice(0,q(S)+1).replace(N,"")}},6884:(Ne,Re,X)=>{var q=X(1503),N=X(5352),C=X(2855),S=X(3943);Ne.exports=function F(D,T){return q(D)?D:N(D,T)?[D]:C(S(D))}},9454:Ne=>{Ne.exports=function Re(X,q){var N=-1,C=X.length;for(q||(q=Array(C));++N<C;)q[N]=X[N];return q}},4610:(Ne,Re,X)=>{var q=X(2119);Ne.exports=q["__core-js_shared__"]},6713:(Ne,Re,X)=>{var q=X(3436),N=function(){try{var C=q(Object,"defineProperty");return C({},"",{}),C}catch{}}();Ne.exports=N},9122:Ne=>{var Re="object"==typeof global&&global&&global.Object===Object&&global;Ne.exports=Re},4537:(Ne,Re,X)=>{var q=X(3819);Ne.exports=function N(C,S){var F=C.__data__;return q(S)?F["string"==typeof S?"string":"hash"]:F.map}},3436:(Ne,Re,X)=>{var q=X(7304),N=X(1990);Ne.exports=function C(S,F){var D=N(S,F);return q(D)?D:void 0}},1318:(Ne,Re,X)=>{var q=X(443),N=Object.prototype,C=N.hasOwnProperty,S=N.toString,F=q?q.toStringTag:void 0;Ne.exports=function D(T){var k=C.call(T,F),G=T[F];try{T[F]=void 0;var z=!0}catch{}var L=S.call(T);return z&&(k?T[F]=G:delete T[F]),L}},1990:Ne=>{Ne.exports=function Re(X,q){return X?.[q]}},4312:(Ne,Re,X)=>{var q=X(862);Ne.exports=function N(){this.__data__=q?q(null):{},this.size=0}},6421:Ne=>{Ne.exports=function Re(X){var q=this.has(X)&&delete this.__data__[X];return this.size-=q?1:0,q}},5764:(Ne,Re,X)=>{var q=X(862),S=Object.prototype.hasOwnProperty;Ne.exports=function F(D){var T=this.__data__;if(q){var k=T[D];return"__lodash_hash_undefined__"===k?void 0:k}return S.call(T,D)?T[D]:void 0}},8685:(Ne,Re,X)=>{var q=X(862),C=Object.prototype.hasOwnProperty;Ne.exports=function S(F){var D=this.__data__;return q?void 0!==D[F]:C.call(D,F)}},6676:(Ne,Re,X)=>{var q=X(862);Ne.exports=function C(S,F){var D=this.__data__;return this.size+=this.has(S)?0:1,D[S]=q&&void 0===F?"__lodash_hash_undefined__":F,this}},8442:Ne=>{var X=/^(?:0|[1-9]\d*)$/;Ne.exports=function q(N,C){var S=typeof N;return!!(C=C??9007199254740991)&&("number"==S||"symbol"!=S&&X.test(N))&&N>-1&&N%1==0&&N<C}},5352:(Ne,Re,X)=>{var q=X(1503),N=X(4129),C=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,S=/^\w*$/;Ne.exports=function F(D,T){if(q(D))return!1;var k=typeof D;return!("number"!=k&&"symbol"!=k&&"boolean"!=k&&null!=D&&!N(D))||S.test(D)||!C.test(D)||null!=T&&D in Object(T)}},3819:Ne=>{Ne.exports=function Re(X){var q=typeof X;return"string"==q||"number"==q||"symbol"==q||"boolean"==q?"__proto__"!==X:null===X}},1943:(Ne,Re,X)=>{var S,q=X(4610),N=(S=/[^.]+$/.exec(q&&q.keys&&q.keys.IE_PROTO||""))?"Symbol(src)_1."+S:"";Ne.exports=function C(S){return!!N&&N in S}},1840:Ne=>{Ne.exports=function Re(){this.__data__=[],this.size=0}},4378:(Ne,Re,X)=>{var q=X(3503),C=Array.prototype.splice;Ne.exports=function S(F){var D=this.__data__,T=q(D,F);return!(T<0||(T==D.length-1?D.pop():C.call(D,T,1),--this.size,0))}},4981:(Ne,Re,X)=>{var q=X(3503);Ne.exports=function N(C){var S=this.__data__,F=q(S,C);return F<0?void 0:S[F][1]}},7343:(Ne,Re,X)=>{var q=X(3503);Ne.exports=function N(C){return q(this.__data__,C)>-1}},8895:(Ne,Re,X)=>{var q=X(3503);Ne.exports=function N(C,S){var F=this.__data__,D=q(F,C);return D<0?(++this.size,F.push([C,S])):F[D][1]=S,this}},638:(Ne,Re,X)=>{var q=X(4994),N=X(9215),C=X(1501);Ne.exports=function S(){this.size=0,this.__data__={hash:new q,map:new(C||N),string:new q}}},1184:(Ne,Re,X)=>{var q=X(4537);Ne.exports=function N(C){var S=q(this,C).delete(C);return this.size-=S?1:0,S}},866:(Ne,Re,X)=>{var q=X(4537);Ne.exports=function N(C){return q(this,C).get(C)}},3771:(Ne,Re,X)=>{var q=X(4537);Ne.exports=function N(C){return q(this,C).has(C)}},1772:(Ne,Re,X)=>{var q=X(4537);Ne.exports=function N(C,S){var F=q(this,C),D=F.size;return F.set(C,S),this.size+=F.size==D?0:1,this}},719:(Ne,Re,X)=>{var q=X(535);Ne.exports=function C(S){var F=q(S,function(T){return 500===D.size&&D.clear(),T}),D=F.cache;return F}},862:(Ne,Re,X)=>{var N=X(3436)(Object,"create");Ne.exports=N},2902:Ne=>{var X=Object.prototype.toString;Ne.exports=function q(N){return X.call(N)}},2119:(Ne,Re,X)=>{var q=X(9122),N="object"==typeof self&&self&&self.Object===Object&&self,C=q||N||Function("return this")();Ne.exports=C},2855:(Ne,Re,X)=>{var q=X(719),N=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,C=/\\(\\)?/g,S=q(function(F){var D=[];return 46===F.charCodeAt(0)&&D.push(""),F.replace(N,function(T,k,G,z){D.push(G?z.replace(C,"$1"):k||T)}),D});Ne.exports=S},8533:(Ne,Re,X)=>{var q=X(4129);Ne.exports=function C(S){if("string"==typeof S||q(S))return S;var F=S+"";return"0"==F&&1/S==-1/0?"-0":F}},2827:Ne=>{var X=Function.prototype.toString;Ne.exports=function q(N){if(null!=N){try{return X.call(N)}catch{}try{return N+""}catch{}}return""}},2760:Ne=>{var Re=/\s/;Ne.exports=function X(q){for(var N=q.length;N--&&Re.test(q.charAt(N)););return N}},406:(Ne,Re,X)=>{var q=X(5940),N=X(1710),C=X(1467),F=Math.max,D=Math.min;Ne.exports=function T(k,G,z){var L,U,O,V,ie,Y,se=0,te=!1,be=!1,ce=!0;if("function"!=typeof k)throw new TypeError("Expected a function");function W(ye){var $e=L,He=U;return L=U=void 0,se=ye,V=k.apply(He,$e)}function B(ye){return se=ye,ie=setTimeout(le,G),te?W(ye):V}function ee(ye){var $e=ye-Y;return void 0===Y||$e>=G||$e<0||be&&ye-se>=O}function le(){var ye=N();if(ee(ye))return me(ye);ie=setTimeout(le,function H(ye){var Ie=G-(ye-Y);return be?D(Ie,O-(ye-se)):Ie}(ye))}function me(ye){return ie=void 0,ce&&L?W(ye):(L=U=void 0,V)}function Le(){var ye=N(),$e=ee(ye);if(L=arguments,U=this,Y=ye,$e){if(void 0===ie)return B(Y);if(be)return clearTimeout(ie),ie=setTimeout(le,G),W(Y)}return void 0===ie&&(ie=setTimeout(le,G)),V}return G=C(G)||0,q(z)&&(te=!!z.leading,O=(be="maxWait"in z)?F(C(z.maxWait)||0,G):O,ce="trailing"in z?!!z.trailing:ce),Le.cancel=function ae(){void 0!==ie&&clearTimeout(ie),se=0,L=Y=U=ie=void 0},Le.flush=function _e(){return void 0===ie?V:me(N())},Le}},217:Ne=>{Ne.exports=function Re(X,q){return X===q||X!=X&&q!=q}},8817:(Ne,Re,X)=>{var q=X(5456);Ne.exports=function N(C,S,F){var D=null==C?void 0:q(C,S);return void 0===D?F:D}},1503:Ne=>{Ne.exports=Array.isArray},5946:(Ne,Re,X)=>{var q=X(3337),N=X(5940);Ne.exports=function T(k){if(!N(k))return!1;var G=q(k);return"[object Function]"==G||"[object GeneratorFunction]"==G||"[object AsyncFunction]"==G||"[object Proxy]"==G}},5940:Ne=>{Ne.exports=function Re(X){var q=typeof X;return null!=X&&("object"==q||"function"==q)}},2671:Ne=>{Ne.exports=function Re(X){return null!=X&&"object"==typeof X}},4129:(Ne,Re,X)=>{var q=X(3337),N=X(2671);Ne.exports=function S(F){return"symbol"==typeof F||N(F)&&"[object Symbol]"==q(F)}},535:(Ne,Re,X)=>{var q=X(9850);function C(S,F){if("function"!=typeof S||null!=F&&"function"!=typeof F)throw new TypeError("Expected a function");var D=function(){var T=arguments,k=F?F.apply(this,T):T[0],G=D.cache;if(G.has(k))return G.get(k);var z=S.apply(this,T);return D.cache=G.set(k,z)||G,z};return D.cache=new(C.Cache||q),D}C.Cache=q,Ne.exports=C},1710:(Ne,Re,X)=>{var q=X(2119);Ne.exports=function(){return q.Date.now()}},4793:(Ne,Re,X)=>{var q=X(5963);Ne.exports=function N(C,S,F){return null==C?C:q(C,S,F)}},1467:(Ne,Re,X)=>{var q=X(3348),N=X(5940),C=X(4129),F=/^[-+]0x[0-9a-f]+$/i,D=/^0b[01]+$/i,T=/^0o[0-7]+$/i,k=parseInt;Ne.exports=function G(z){if("number"==typeof z)return z;if(C(z))return NaN;if(N(z)){var L="function"==typeof z.valueOf?z.valueOf():z;z=N(L)?L+"":L}if("string"!=typeof z)return 0===z?z:+z;z=q(z);var U=D.test(z);return U||T.test(z)?k(z.slice(2),U?2:8):F.test(z)?NaN:+z}},4152:(Ne,Re,X)=>{var q=X(4633),N=X(9454),C=X(1503),S=X(4129),F=X(2855),D=X(8533),T=X(3943);Ne.exports=function k(G){return C(G)?q(G,D):S(G)?[G]:N(F(T(G)))}},3943:(Ne,Re,X)=>{var q=X(3935);Ne.exports=function N(C){return null==C?"":q(C)}},4308:(Ne,Re,X)=>{Ne.exports=X(1358)},4512:Ne=>{"use strict";Ne.exports=class wV{constructor(X,q=new Map,N=0){this.prefix=X,this._existing=q,this.counter=N}clone(){const{prefix:X,_existing:q,counter:N}=this;return new wV(X,new Map(q),N)}getId(X){const q=X&&this._existing.get(X);if(q)return q;const N=this.prefix+this.counter;return this.counter++,X&&this._existing.set(X,N),N}hasId(X){return this._existing.has(X)}getOldIds(){return[...this._existing.keys()]}}},7510:(Ne,Re,X)=>{"use strict";var q=X(9344).default;X(6563);const N=self.crypto||self.msCrypto;Ne.exports=class{constructor(S){if(!N||!N.subtle)throw new Error("crypto.subtle not found.");if("sha256"===S)this.algorithm={name:"SHA-256"};else{if("sha1"!==S)throw new Error(`Unsupported algorithm "${S}".`);this.algorithm={name:"SHA-1"}}this._content=""}update(S){this._content+=S}digest(){var S=this;return q(function*(){const F=(new TextEncoder).encode(S._content),D=new Uint8Array(yield N.subtle.digest(S.algorithm,F));let T="";for(let k=0;k<D.length;++k)T+=D[k].toString(16).padStart(2,"0");return T})()}}},5090:Ne=>{"use strict";const q="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",N="http://www.w3.org/2001/XMLSchema#string",C="NamedNode",S="BlankNode",F="Literal",D="DefaultGraph",T={};function k(O,V){return O.subject.termType===V.subject.termType&&O.object.termType===V.object.termType&&O.subject.value===V.subject.value&&O.predicate.value===V.predicate.value&&O.object.value===V.object.value&&(O.object.termType!==F||O.object.datatype.termType===V.object.datatype.termType&&O.object.language===V.object.language&&O.object.datatype.value===V.object.datatype.value)}(()=>{const O="(?:<([^:]+:[^>]*)>)",ie="A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_",Y=ie+"0-9-\xb7\u0300-\u036f\u203f-\u2040",te="(_:(?:["+ie+"0-9])(?:(?:["+Y+".])*(?:["+Y+"]))?)",H="[ \\t]+",ee="[ \\t]*",le="(?:"+O+"|"+te+")"+H,me=O+H,ae="(?:"+O+"|"+te+'|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^'+O+")|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))"+ee,_e="(?:\\.|(?:(?:"+O+"|"+te+")"+ee+"\\.))";T.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,T.empty=new RegExp("^[ \\t]*$"),T.quad=new RegExp("^"+ee+le+me+ae+_e+ee+"$")})(),Ne.exports=class hw{static parse(V){const ie=[],Y={},se=V.split(T.eoln);let te=0;for(const be of se){if(te++,T.empty.test(be))continue;const ce=be.match(T.quad);if(null===ce)throw new Error("N-Quads parse error on line "+te+".");const W={subject:null,predicate:null,object:null,graph:null};if(W.subject=void 0!==ce[1]?{termType:C,value:ce[1]}:{termType:S,value:ce[2]},W.predicate={termType:C,value:ce[3]},void 0!==ce[4]?W.object={termType:C,value:ce[4]}:void 0!==ce[5]?W.object={termType:S,value:ce[5]}:(W.object={termType:F,value:void 0,datatype:{termType:C}},void 0!==ce[7]?W.object.datatype.value=ce[7]:void 0!==ce[8]?(W.object.datatype.value=q,W.object.language=ce[8]):W.object.datatype.value=N,W.object.value=ce[6].replace(L,function(V,ie,Y,se){if(ie)switch(ie){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(Y)return String.fromCharCode(parseInt(Y,16));if(se)throw new Error("Unsupported U escape")})),W.graph=void 0!==ce[9]?{termType:C,value:ce[9]}:void 0!==ce[10]?{termType:S,value:ce[10]}:{termType:D,value:""},W.graph.value in Y){let B=!0;const H=Y[W.graph.value];for(const ee of H)if(k(ee,W)){B=!1;break}B&&(H.push(W),ie.push(W))}else Y[W.graph.value]=[W],ie.push(W)}return ie}static serialize(V){Array.isArray(V)||(V=hw.legacyDatasetToQuads(V));const ie=[];for(const Y of V)ie.push(hw.serializeQuad(Y));return ie.sort().join("")}static serializeQuadComponents(V,ie,Y,se){let te="";return te+=V.termType===C?`<${V.value}>`:`${V.value}`,te+=` <${ie.value}> `,Y.termType===C?te+=`<${Y.value}>`:Y.termType===S?te+=Y.value:(te+=`"${function z(O){return O.replace(G,function(V){switch(V){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}})}(Y.value)}"`,Y.datatype.value===q?Y.language&&(te+=`@${Y.language}`):Y.datatype.value!==N&&(te+=`^^<${Y.datatype.value}>`)),se.termType===C?te+=` <${se.value}>`:se.termType===S&&(te+=` ${se.value}`),te+=" .\n",te}static serializeQuad(V){return hw.serializeQuadComponents(V.subject,V.predicate,V.object,V.graph)}static legacyDatasetToQuads(V){const ie=[],Y={"blank node":S,IRI:C,literal:F};for(const se in V)V[se].forEach(be=>{const ce={};for(const W in be){const B=be[W],H={termType:Y[B.type],value:B.value};H.termType===F&&(H.datatype={termType:C},"datatype"in B&&(H.datatype.value=B.datatype),"language"in B?("datatype"in B||(H.datatype.value=q),H.language=B.language):"datatype"in B||(H.datatype.value=N)),ce[W]=H}ce.graph="@default"===se?{termType:D,value:""}:{termType:se.startsWith("_:")?S:C,value:se},ie.push(ce)});return ie}};const G=/["\\\n\r]/g,L=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g},5067:Ne=>{"use strict";Ne.exports=class{constructor(X){this.current=X.sort(),this.done=!1,this.dir=new Map;for(let q=0;q<X.length;++q)this.dir.set(X[q],!0)}hasNext(){return!this.done}next(){const{current:X,dir:q}=this,N=X.slice();let C=null,S=0;const F=X.length;for(let D=0;D<F;++D){const T=X[D],k=q.get(T);(null===C||T>C)&&(k&&D>0&&T>X[D-1]||!k&&D<F-1&&T>X[D+1])&&(C=T,S=D)}if(null===C)this.done=!0;else{const D=q.get(C)?S-1:S+1;X[S]=X[D],X[D]=C;for(const T of X)T>C&&q.set(T,!q.get(T))}return N}}},4103:(Ne,Re,X)=>{"use strict";var q=X(9344).default;const N=X(4512),C=X(7510),S=X(5067),F=X(5090);function D(T,k){return T.hash<k.hash?-1:T.hash>k.hash?1:0}Ne.exports=class{constructor({createMessageDigest:k=(()=>new C("sha256")),maxDeepIterations:G=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new N("_:c14n"),this.createMessageDigest=k,this.maxDeepIterations=G,this.quads=null,this.deepIterations=null}main(k){var G=this;return q(function*(){G.deepIterations=new Map,G.quads=k;for(const Y of k)G._addBlankNodeQuadInfo({quad:Y,component:Y.subject}),G._addBlankNodeQuadInfo({quad:Y,component:Y.object}),G._addBlankNodeQuadInfo({quad:Y,component:Y.graph});const z=new Map,L=[...G.blankNodeInfo.keys()];let U=0;for(const Y of L)++U%100==0&&(yield G._yield()),yield G._hashAndTrackBlankNode({id:Y,hashToBlankNodes:z});const O=[...z.keys()].sort(),V=[];for(const Y of O){const se=z.get(Y);se.length>1?V.push(se):G.canonicalIssuer.getId(se[0])}for(const Y of V){const se=[];for(const te of Y){if(G.canonicalIssuer.hasId(te))continue;const be=new N("_:b");be.getId(te);const ce=yield G.hashNDegreeQuads(te,be);se.push(ce)}se.sort(D);for(const te of se){const be=te.issuer.getOldIds();for(const ce of be)G.canonicalIssuer.getId(ce)}}const ie=[];for(const Y of G.quads){const se=F.serializeQuadComponents(G._componentWithCanonicalId(Y.subject),Y.predicate,G._componentWithCanonicalId(Y.object),G._componentWithCanonicalId(Y.graph));ie.push(se)}return ie.sort(),ie.join("")})()}hashFirstDegreeQuads(k){var G=this;return q(function*(){const z=[],L=G.blankNodeInfo.get(k),U=L.quads;for(const V of U){const ie={subject:null,predicate:V.predicate,object:null,graph:null};ie.subject=G.modifyFirstDegreeComponent(k,V.subject,"subject"),ie.object=G.modifyFirstDegreeComponent(k,V.object,"object"),ie.graph=G.modifyFirstDegreeComponent(k,V.graph,"graph"),z.push(F.serializeQuad(ie))}z.sort();const O=G.createMessageDigest();for(const V of z)O.update(V);return L.hash=yield O.digest(),L.hash})()}hashRelatedBlankNode(k,G,z,L){var U=this;return q(function*(){let O;O=U.canonicalIssuer.hasId(k)?U.canonicalIssuer.getId(k):z.hasId(k)?z.getId(k):U.blankNodeInfo.get(k).hash;const V=U.createMessageDigest();return V.update(L),"g"!==L&&V.update(U.getRelatedPredicate(G)),V.update(O),V.digest()})()}hashNDegreeQuads(k,G){var z=this;return q(function*(){const L=z.deepIterations.get(k)||0;if(L>z.maxDeepIterations)throw new Error(`Maximum deep iterations (${z.maxDeepIterations}) exceeded.`);z.deepIterations.set(k,L+1);const U=z.createMessageDigest(),O=yield z.createHashToRelated(k,G),V=[...O.keys()].sort();for(const ie of V){U.update(ie);let se,Y="";const te=new S(O.get(ie));let be=0;for(;te.hasNext();){const ce=te.next();++be%3==0&&(yield z._yield());let W=G.clone(),B="";const H=[];let ee=!1;for(const le of ce)if(z.canonicalIssuer.hasId(le)?B+=z.canonicalIssuer.getId(le):(W.hasId(le)||H.push(le),B+=W.getId(le)),0!==Y.length&&B>Y){ee=!0;break}if(!ee){for(const le of H){const me=yield z.hashNDegreeQuads(le,W);if(B+=W.getId(le),B+=`<${me.hash}>`,W=me.issuer,0!==Y.length&&B>Y){ee=!0;break}}ee||(0===Y.length||B<Y)&&(Y=B,se=W)}}U.update(Y),G=se}return{hash:yield U.digest(),issuer:G}})()}modifyFirstDegreeComponent(k,G){return"BlankNode"!==G.termType?G:{termType:"BlankNode",value:G.value===k?"_:a":"_:z"}}getRelatedPredicate(k){return`<${k.predicate.value}>`}createHashToRelated(k,G){var z=this;return q(function*(){const L=new Map,U=z.blankNodeInfo.get(k).quads;let O=0;for(const V of U)++O%100==0&&(yield z._yield()),yield Promise.all([z._addRelatedBlankNodeHash({quad:V,component:V.subject,position:"s",id:k,issuer:G,hashToRelated:L}),z._addRelatedBlankNodeHash({quad:V,component:V.object,position:"o",id:k,issuer:G,hashToRelated:L}),z._addRelatedBlankNodeHash({quad:V,component:V.graph,position:"g",id:k,issuer:G,hashToRelated:L})]);return L})()}_hashAndTrackBlankNode({id:k,hashToBlankNodes:G}){var z=this;return q(function*(){const L=yield z.hashFirstDegreeQuads(k),U=G.get(L);U?U.push(k):G.set(L,[k])})()}_addBlankNodeQuadInfo({quad:k,component:G}){if("BlankNode"!==G.termType)return;const z=G.value,L=this.blankNodeInfo.get(z);L?L.quads.add(k):this.blankNodeInfo.set(z,{quads:new Set([k]),hash:null})}_addRelatedBlankNodeHash({quad:k,component:G,position:z,id:L,issuer:U,hashToRelated:O}){var V=this;return q(function*(){if("BlankNode"!==G.termType||G.value===L)return;const ie=G.value,Y=yield V.hashRelatedBlankNode(ie,k,U,z),se=O.get(Y);se?se.push(ie):O.set(Y,[ie])})()}_componentWithCanonicalId(k){return"BlankNode"!==k.termType||k.value.startsWith(this.canonicalIssuer.prefix)?k:{termType:"BlankNode",value:this.canonicalIssuer.getId(k.value)}}_yield(){return q(function*(){return new Promise(k=>setImmediate(k))})()}}},526:(Ne,Re,X)=>{"use strict";const q=X(4512),N=X(7510),C=X(5067),S=X(5090);function F(D,T){return D.hash<T.hash?-1:D.hash>T.hash?1:0}Ne.exports=class{constructor({createMessageDigest:T=(()=>new N("sha256")),maxDeepIterations:k=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new q("_:c14n"),this.createMessageDigest=T,this.maxDeepIterations=k,this.quads=null,this.deepIterations=null}main(T){this.deepIterations=new Map,this.quads=T;for(const O of T)this._addBlankNodeQuadInfo({quad:O,component:O.subject}),this._addBlankNodeQuadInfo({quad:O,component:O.object}),this._addBlankNodeQuadInfo({quad:O,component:O.graph});const k=new Map,G=[...this.blankNodeInfo.keys()];for(const O of G)this._hashAndTrackBlankNode({id:O,hashToBlankNodes:k});const z=[...k.keys()].sort(),L=[];for(const O of z){const V=k.get(O);V.length>1?L.push(V):this.canonicalIssuer.getId(V[0])}for(const O of L){const V=[];for(const ie of O){if(this.canonicalIssuer.hasId(ie))continue;const Y=new q("_:b");Y.getId(ie);const se=this.hashNDegreeQuads(ie,Y);V.push(se)}V.sort(F);for(const ie of V){const Y=ie.issuer.getOldIds();for(const se of Y)this.canonicalIssuer.getId(se)}}const U=[];for(const O of this.quads){const V=S.serializeQuadComponents(this._componentWithCanonicalId({component:O.subject}),O.predicate,this._componentWithCanonicalId({component:O.object}),this._componentWithCanonicalId({component:O.graph}));U.push(V)}return U.sort(),U.join("")}hashFirstDegreeQuads(T){const k=[],G=this.blankNodeInfo.get(T),z=G.quads;for(const U of z){const O={subject:null,predicate:U.predicate,object:null,graph:null};O.subject=this.modifyFirstDegreeComponent(T,U.subject,"subject"),O.object=this.modifyFirstDegreeComponent(T,U.object,"object"),O.graph=this.modifyFirstDegreeComponent(T,U.graph,"graph"),k.push(S.serializeQuad(O))}k.sort();const L=this.createMessageDigest();for(const U of k)L.update(U);return G.hash=L.digest(),G.hash}hashRelatedBlankNode(T,k,G,z){let L;L=this.canonicalIssuer.hasId(T)?this.canonicalIssuer.getId(T):G.hasId(T)?G.getId(T):this.blankNodeInfo.get(T).hash;const U=this.createMessageDigest();return U.update(z),"g"!==z&&U.update(this.getRelatedPredicate(k)),U.update(L),U.digest()}hashNDegreeQuads(T,k){const G=this.deepIterations.get(T)||0;if(G>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(T,G+1);const z=this.createMessageDigest(),L=this.createHashToRelated(T,k),U=[...L.keys()].sort();for(const O of U){z.update(O);let ie,V="";const Y=new C(L.get(O));for(;Y.hasNext();){const se=Y.next();let te=k.clone(),be="";const ce=[];let W=!1;for(const B of se)if(this.canonicalIssuer.hasId(B)?be+=this.canonicalIssuer.getId(B):(te.hasId(B)||ce.push(B),be+=te.getId(B)),0!==V.length&&be>V){W=!0;break}if(!W){for(const B of ce){const H=this.hashNDegreeQuads(B,te);if(be+=te.getId(B),be+=`<${H.hash}>`,te=H.issuer,0!==V.length&&be>V){W=!0;break}}W||(0===V.length||be<V)&&(V=be,ie=te)}}z.update(V),k=ie}return{hash:z.digest(),issuer:k}}modifyFirstDegreeComponent(T,k){return"BlankNode"!==k.termType?k:{termType:"BlankNode",value:k.value===T?"_:a":"_:z"}}getRelatedPredicate(T){return`<${T.predicate.value}>`}createHashToRelated(T,k){const G=new Map,z=this.blankNodeInfo.get(T).quads;for(const L of z)this._addRelatedBlankNodeHash({quad:L,component:L.subject,position:"s",id:T,issuer:k,hashToRelated:G}),this._addRelatedBlankNodeHash({quad:L,component:L.object,position:"o",id:T,issuer:k,hashToRelated:G}),this._addRelatedBlankNodeHash({quad:L,component:L.graph,position:"g",id:T,issuer:k,hashToRelated:G});return G}_hashAndTrackBlankNode({id:T,hashToBlankNodes:k}){const G=this.hashFirstDegreeQuads(T),z=k.get(G);z?z.push(T):k.set(G,[T])}_addBlankNodeQuadInfo({quad:T,component:k}){if("BlankNode"!==k.termType)return;const G=k.value,z=this.blankNodeInfo.get(G);z?z.quads.add(T):this.blankNodeInfo.set(G,{quads:new Set([T]),hash:null})}_addRelatedBlankNodeHash({quad:T,component:k,position:G,id:z,issuer:L,hashToRelated:U}){if("BlankNode"!==k.termType||k.value===z)return;const O=k.value,V=this.hashRelatedBlankNode(O,T,L,G),ie=U.get(V);ie?ie.push(O):U.set(V,[O])}_componentWithCanonicalId({component:T}){return"BlankNode"!==T.termType||T.value.startsWith(this.canonicalIssuer.prefix)?T:{termType:"BlankNode",value:this.canonicalIssuer.getId(T.value)}}}},1359:(Ne,Re,X)=>{"use strict";var q=X(9344).default;const N=X(7510),C=X(4103);Ne.exports=class extends C{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new N("sha1")}modifyFirstDegreeComponent(F,D,T){return"BlankNode"!==D.termType?D:"graph"===T?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:D.value===F?"_:a":"_:z"}}getRelatedPredicate(F){return F.predicate.value}createHashToRelated(F,D){var T=this;return q(function*(){const k=new Map,G=T.blankNodeInfo.get(F).quads;let z=0;for(const L of G){let U,O;if("BlankNode"===L.subject.termType&&L.subject.value!==F)O=L.subject.value,U="p";else{if("BlankNode"!==L.object.termType||L.object.value===F)continue;O=L.object.value,U="r"}++z%100==0&&(yield T._yield());const V=yield T.hashRelatedBlankNode(O,L,D,U),ie=k.get(V);ie?ie.push(O):k.set(V,[O])}return k})()}}},7492:(Ne,Re,X)=>{"use strict";const q=X(7510),N=X(526);Ne.exports=class extends N{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new q("sha1")}modifyFirstDegreeComponent(S,F,D){return"BlankNode"!==F.termType?F:"graph"===D?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:F.value===S?"_:a":"_:z"}}getRelatedPredicate(S){return S.predicate.value}createHashToRelated(S,F){const D=new Map,T=this.blankNodeInfo.get(S).quads;for(const k of T){let G,z;if("BlankNode"===k.subject.termType&&k.subject.value!==S)z=k.subject.value,G="p";else{if("BlankNode"!==k.object.termType||k.object.value===S)continue;z=k.object.value,G="r"}const L=this.hashRelatedBlankNode(z,k,F,G),U=D.get(L);U?U.push(z):D.set(L,[z])}return D}}},1358:(Ne,Re,X)=>{"use strict";var q=X(9344).default;const N=X(4103),C=X(1359),S=X(526),F=X(7492);let D;try{D=X(7670)}catch{}Re.NQuads=X(5090),Re.IdentifierIssuer=X(4512),Re._rdfCanonizeNative=function(T){return T&&(D=T),D},Re.canonize=function(){var T=q(function*(k,G){if(Array.isArray(k)||(k=Re.NQuads.legacyDatasetToQuads(k)),G.useNative){if(!D)throw new Error("rdf-canonize-native not available");if(G.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return new Promise((z,L)=>D.canonize(k,G,(U,O)=>U?L(U):z(O)))}if("URDNA2015"===G.algorithm)return new N(G).main(k);if("URGNA2012"===G.algorithm){if(G.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new C(G).main(k)}throw"algorithm"in G?new Error("Invalid RDF Dataset Canonicalization algorithm: "+G.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")});return function(k,G){return T.apply(this,arguments)}}(),Re._canonizeSync=function(T,k){if(Array.isArray(T)||(T=Re.NQuads.legacyDatasetToQuads(T)),k.useNative){if(!D)throw new Error("rdf-canonize-native not available");if(k.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return D.canonizeSync(T,k)}if("URDNA2015"===k.algorithm)return new S(k).main(T);if("URGNA2012"===k.algorithm){if(k.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new F(k).main(T)}throw"algorithm"in k?new Error("Invalid RDF Dataset Canonicalization algorithm: "+k.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}},6563:function(){!function(Ne,Re){"use strict";if(!Ne.setImmediate){var S,X=1,q={},N=!1,C=Ne.document,ie=Object.getPrototypeOf&&Object.getPrototypeOf(Ne);ie=ie&&ie.setTimeout?ie:Ne,"[object process]"==={}.toString.call(Ne.process)?function G(){S=function(Y){process.nextTick(function(){k(Y)})}}():function z(){if(Ne.postMessage&&!Ne.importScripts){var Y=!0,se=Ne.onmessage;return Ne.onmessage=function(){Y=!1},Ne.postMessage("","*"),Ne.onmessage=se,Y}}()?function L(){var Y="setImmediate$"+Math.random()+"$",se=function(te){te.source===Ne&&"string"==typeof te.data&&0===te.data.indexOf(Y)&&k(+te.data.slice(Y.length))};Ne.addEventListener?Ne.addEventListener("message",se,!1):Ne.attachEvent("onmessage",se),S=function(te){Ne.postMessage(Y+te,"*")}}():Ne.MessageChannel?function U(){var Y=new MessageChannel;Y.port1.onmessage=function(se){k(se.data)},S=function(se){Y.port2.postMessage(se)}}():C&&"onreadystatechange"in C.createElement("script")?function O(){var Y=C.documentElement;S=function(se){var te=C.createElement("script");te.onreadystatechange=function(){k(se),te.onreadystatechange=null,Y.removeChild(te),te=null},Y.appendChild(te)}}():function V(){S=function(Y){setTimeout(k,0,Y)}}(),ie.setImmediate=function F(Y){"function"!=typeof Y&&(Y=new Function(""+Y));for(var se=new Array(arguments.length-1),te=0;te<se.length;te++)se[te]=arguments[te+1];var be={callback:Y,args:se};return q[X]=be,S(X),X++},ie.clearImmediate=D}function D(Y){delete q[Y]}function k(Y){if(N)setTimeout(k,0,Y);else{var se=q[Y];if(se){N=!0;try{!function T(Y){var se=Y.callback,te=Y.args;switch(te.length){case 0:se();break;case 1:se(te[0]);break;case 2:se(te[0],te[1]);break;case 3:se(te[0],te[1],te[2]);break;default:se.apply(void 0,te)}}(se)}finally{D(Y),N=!1}}}}}(typeof self>"u"?typeof global>"u"?this:global:self)},7670:()=>{},9344:Ne=>{function Re(q,N,C,S,F,D,T){try{var k=q[D](T),G=k.value}catch(z){return void C(z)}k.done?N(G):Promise.resolve(G).then(S,F)}Ne.exports=function X(q){return function(){var N=this,C=arguments;return new Promise(function(S,F){var D=q.apply(N,C);function T(G){Re(D,S,F,T,k,"next",G)}function k(G){Re(D,S,F,T,k,"throw",G)}T(void 0)})}},Ne.exports.__esModule=!0,Ne.exports.default=Ne.exports}},Ne=>{Ne(Ne.s=4856)}]);
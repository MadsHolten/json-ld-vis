(self.webpackChunkjson_ld_vis=self.webpackChunkjson_ld_vis||[]).push([[179],{8884:(Oe,Re,G)=>{"use strict";function $(n){return"function"==typeof n}function P(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const I=P(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function S(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class N{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if($(r))try{r()}catch(s){e=s instanceof I?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{M(s)}catch(a){e=e??[],a instanceof I?e=[...e,...a.errors]:e.push(a)}}if(e)throw new I(e)}}add(e){var t;if(e&&e!==this)if(this.closed)M(e);else{if(e instanceof N){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&S(t,e)}remove(e){const{_finalizers:t}=this;t&&S(t,e),e instanceof N&&e._removeParent(this)}}N.EMPTY=(()=>{const n=new N;return n.closed=!0,n})();const C=N.EMPTY;function T(n){return n instanceof N||n&&"closed"in n&&$(n.remove)&&$(n.add)&&$(n.unsubscribe)}function M(n){$(n)?n():n.unsubscribe()}const H={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},F={setTimeout(n,e,...t){const{delegate:r}=F;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=F;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function X(n){F.setTimeout(()=>{const{onUnhandledError:e}=H;if(!e)throw n;e(n)})}function ee(){}const z=K("C",void 0,void 0);function K(n,e,t){return{kind:n,value:e,error:t}}let le=null;function J(n){if(H.useDeprecatedSynchronousErrorHandling){const e=!le;if(e&&(le={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=le;if(le=null,t)throw r}}else n()}class ce extends N{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,T(e)&&e.add(this)):this.destination=we}static create(e,t,r){return new Q(e,t,r)}next(e){this.isStopped?ie(function oe(n){return K("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?ie(function q(n){return K("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ie(z,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const U=Function.prototype.bind;function L(n,e){return U.call(n,e)}class B{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){ue(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){ue(r)}else ue(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ue(t)}}}class Q extends ce{constructor(e,t,r){let i;if(super(),$(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&H.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&L(e.next,s),error:e.error&&L(e.error,s),complete:e.complete&&L(e.complete,s)}):i=e}this.destination=new B(i)}}function ue(n){H.useDeprecatedSynchronousErrorHandling?function Ie(n){H.useDeprecatedSynchronousErrorHandling&&le&&(le.errorThrown=!0,le.error=n)}(n):X(n)}function ie(n,e){const{onStoppedNotification:t}=H;t&&F.setTimeout(()=>t(n,e))}const we={closed:!0,next:ee,error:function ge(n){throw n},complete:ee},Pe="function"==typeof Symbol&&Symbol.observable||"@@observable";function me(n){return n}let Te=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function Ze(n){return n&&n instanceof ce||function fe(n){return n&&$(n.next)&&$(n.error)&&$(n.complete)}(n)&&T(n)}(t)?t:new Q(t,r,i);return J(()=>{const{operator:a,source:c}=this;s.add(a?a.call(s,c):c?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=ve(r))((i,s)=>{const a=new Q({next:c=>{try{t(c)}catch(f){s(f),a.unsubscribe()}},error:s,complete:i});this.subscribe(a)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Pe](){return this}pipe(...t){return function ze(n){return 0===n.length?me:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}(t)(this)}toPromise(t){return new(t=ve(t))((r,i)=>{let s;this.subscribe(a=>s=a,a=>i(a),()=>r(s))})}}return n.create=e=>new n(e),n})();function ve(n){var e;return null!==(e=n??H.Promise)&&void 0!==e?e:Promise}const $e=P(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Ne=(()=>{class n extends Te{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new Qe(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new $e}next(t){J(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){J(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){J(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?C:(this.currentObservers=null,s.push(t),new N(()=>{this.currentObservers=null,S(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new Te;return t.source=this,t}}return n.create=(e,t)=>new Qe(e,t),n})();class Qe extends Ne{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:C}}function ft(n){return e=>{if(function kt(n){return $(n?.lift)}(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ot(n,e,t,r,i){return new lt(n,e,t,r,i)}class lt extends ce{constructor(e,t,r,i,s,a){super(e),this.onFinalize=s,this.shouldUnsubscribe=a,this._next=t?function(c){try{t(c)}catch(f){e.error(f)}}:super._next,this._error=i?function(c){try{i(c)}catch(f){e.error(f)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Ge(n,e){return ft((t,r)=>{let i=0;t.subscribe(ot(r,s=>{r.next(n.call(e,s,i++))}))})}function Pn(n){return this instanceof Pn?(this.v=n,this):new Pn(n)}function Cc(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(n,e||[]),s=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(R){r[R]&&(i[R]=function(j){return new Promise(function(re,xe){s.push([R,j,re,xe])>1||c(R,j)})})}function c(R,j){try{!function f(R){R.value instanceof Pn?Promise.resolve(R.value.v).then(m,w):E(s[0][2],R)}(r[R](j))}catch(re){E(s[0][3],re)}}function m(R){c("next",R)}function w(R){c("throw",R)}function E(R,j){R(j),s.shift(),s.length&&c(s[0][0],s[0][1])}}function sa(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function ds(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(a){return new Promise(function(c,f){!function i(s,a,c,f){Promise.resolve(f).then(function(m){s({value:m,done:c})},a)}(c,f,(a=n[s](a)).done,a.value)})}}}const Si=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Bo(n){return $(n?.then)}function aa(n){return $(n[Pe])}function Vo(n){return Symbol.asyncIterator&&$(n?.[Symbol.asyncIterator])}function Sc(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const ja=function za(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Wd(n){return $(n?.[ja])}function Ks(n){return Cc(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield Pn(t.read());if(i)return yield Pn(void 0);yield yield Pn(r)}}finally{t.releaseLock()}})}function Qs(n){return $(n?.getReader)}function Ts(n){if(n instanceof Te)return n;if(null!=n){if(aa(n))return function la(n){return new Te(e=>{const t=n[Pe]();if($(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Si(n))return function qd(n){return new Te(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Bo(n))return function Yd(n){return new Te(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,X)})}(n);if(Vo(n))return Mc(n);if(Wd(n))return function _c(n){return new Te(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Qs(n))return function Wf(n){return Mc(Ks(n))}(n)}throw Sc(n)}function Mc(n){return new Te(e=>{(function yu(n,e){var t,r,i,s;return function cr(n,e,t,r){return new(t||(t=Promise))(function(s,a){function c(w){try{m(r.next(w))}catch(E){a(E)}}function f(w){try{m(r.throw(w))}catch(E){a(E)}}function m(w){w.done?s(w.value):function i(s){return s instanceof t?s:new t(function(a){a(s)})}(w.value).then(c,f)}m((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=sa(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(a){i={error:a}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Js(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Ua(n,e,t=1/0){return $(e)?Ua((r,i)=>Ge((s,a)=>e(r,s,i,a))(Ts(n(r,i))),t):("number"==typeof e&&(t=e),ft((r,i)=>function bu(n,e,t,r,i,s,a,c){const f=[];let m=0,w=0,E=!1;const R=()=>{E&&!f.length&&!m&&e.complete()},j=xe=>m<r?re(xe):f.push(xe),re=xe=>{s&&e.next(xe),m++;let ke=!1;Ts(t(xe,w++)).subscribe(ot(e,Ve=>{i?.(Ve),s?j(Ve):e.next(Ve)},()=>{ke=!0},void 0,()=>{if(ke)try{for(m--;f.length&&m<r;){const Ve=f.shift();a?Js(e,a,()=>re(Ve)):re(Ve)}R()}catch(Ve){e.error(Ve)}}))};return n.subscribe(ot(e,j,()=>{E=!0,R()})),()=>{c?.()}}(r,i,n,t)))}function wu(n=1/0){return Ua(me,n)}const gr=new Te(n=>n.complete());function gs(n){return n[n.length-1]}function Kd(n){return $(gs(n))?n.pop():void 0}function Ga(n){return function Xd(n){return n&&$(n.schedule)}(gs(n))?n.pop():void 0}function Ac(n,e=0){return ft((t,r)=>{t.subscribe(ot(r,i=>Js(r,n,()=>r.next(i),e),()=>Js(r,n,()=>r.complete(),e),i=>Js(r,n,()=>r.error(i),e)))})}function ni(n,e=0){return ft((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function eo(n,e){if(!n)throw new Error("Iterable cannot be null");return new Te(t=>{Js(t,e,()=>{const r=n[Symbol.asyncIterator]();Js(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function $a(n,e){return e?function Xi(n,e){if(null!=n){if(aa(n))return function Ho(n,e){return Ts(n).pipe(ni(e),Ac(e))}(n,e);if(Si(n))return function Nm(n,e){return new Te(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(Bo(n))return function Tc(n,e){return Ts(n).pipe(ni(e),Ac(e))}(n,e);if(Vo(n))return eo(n,e);if(Wd(n))return function Zs(n,e){return new Te(t=>{let r;return Js(t,e,()=>{r=n[ja](),Js(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(a){return void t.error(a)}s?t.complete():t.next(i)},0,!0)}),()=>$(r?.return)&&r.return()})}(n,e);if(Qs(n))return function Qd(n,e){return eo(Ks(n),e)}(n,e)}throw Sc(n)}(n,e):Ts(n)}function ua(n={}){const{connector:e=(()=>new Ne),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let a,c,f,m=0,w=!1,E=!1;const R=()=>{c?.unsubscribe(),c=void 0},j=()=>{R(),a=f=void 0,w=E=!1},re=()=>{const xe=a;j(),xe?.unsubscribe()};return ft((xe,ke)=>{m++,!E&&!w&&R();const Ve=f=f??e();ke.add(()=>{m--,0===m&&!E&&!w&&(c=Wa(re,i))}),Ve.subscribe(ke),!a&&m>0&&(a=new Q({next:nt=>Ve.next(nt),error:nt=>{E=!0,R(),c=Wa(j,t,nt),Ve.error(nt)},complete:()=>{w=!0,R(),c=Wa(j,r),Ve.complete()}}),Ts(xe).subscribe(a))})(s)}}function Wa(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new Q({next:()=>{r.unsubscribe(),n()}});return Ts(e(...t)).subscribe(r)}function ur(n){for(let e in n)if(n[e]===ur)return e;throw Error("Could not find renamed property on target object.")}function _e(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function ye(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(ye).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Ue(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const bt=ur({__forward_ref__:ur});function st(n){return n.__forward_ref__=st,n.toString=function(){return ye(this())},n}function ut(n){return function Kt(n){return"function"==typeof n&&n.hasOwnProperty(bt)&&n.__forward_ref__===st}(n)?n():n}function Ft(n){return n&&!!n.\u0275providers}const un="https://g.co/ng/security#xss";class it extends Error{constructor(e,t){super(function qn(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}(e,t)),this.code=e}}function Ut(n){return"string"==typeof n?n:null==n?"":String(n)}function jn(n,e){throw new it(-201,!1)}function ri(n,e){null==n&&function mn(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function En(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Or(n){return{providers:n.providers||[],imports:n.imports||[]}}function yo(n){return ks(n,ca)||ks(n,xu)}function ks(n,e){return n.hasOwnProperty(e)?n[e]:null}function bo(n){return n&&(n.hasOwnProperty(kc)||n.hasOwnProperty(Kf))?n[kc]:null}const ca=ur({\u0275prov:ur}),kc=ur({\u0275inj:ur}),xu=ur({ngInjectableDef:ur}),Kf=ur({ngInjectorDef:ur});var fn=(()=>((fn=fn||{})[fn.Default=0]="Default",fn[fn.Host=1]="Host",fn[fn.Self=2]="Self",fn[fn.SkipSelf=4]="SkipSelf",fn[fn.Optional=8]="Optional",fn))();let Oc;function mr(n){const e=Oc;return Oc=n,e}function Os(n,e,t){const r=yo(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&fn.Optional?null:void 0!==e?e:void jn(ye(n))}const hr=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ro={},fa="__NG_DI_FLAG__",ms="ngTempTokenPath",Zd=/\n/gm,Bi="__source";let Eu;function Ka(n){const e=Eu;return Eu=n,e}function Nc(n,e=fn.Default){if(void 0===Eu)throw new it(-203,!1);return null===Eu?Os(n,void 0,e):Eu.get(n,e&fn.Optional?null:void 0,e)}function an(n,e=fn.Default){return(function Qf(){return Oc}()||Nc)(ut(n),e)}function Cu(n,e=fn.Default){return an(n,Su(e))}function Su(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Zf(n){const e=[];for(let t=0;t<n.length;t++){const r=ut(n[t]);if(Array.isArray(r)){if(0===r.length)throw new it(900,!1);let i,s=fn.Default;for(let a=0;a<r.length;a++){const c=r[a],f=Lm(c);"number"==typeof f?-1===f?i=c.token:s|=f:i=c}e.push(an(i,s))}else e.push(an(r))}return e}function Pc(n,e){return n[fa]=e,n.prototype[fa]=e,n}function Lm(n){return n[fa]}function Rs(n){return{toString:n}.toString()}var wo=(()=>((wo=wo||{})[wo.OnPush=0]="OnPush",wo[wo.Default=1]="Default",wo))(),zo=(()=>{return(n=zo||(zo={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",zo;var n})();const pa={},ar=[],Lc=ur({\u0275cmp:ur}),ep=ur({\u0275dir:ur}),tp=ur({\u0275pipe:ur}),ga=ur({\u0275fac:ur}),Fc=ur({__NG_ELEMENT_ID__:ur});let Yb=0;function Do(n){return Rs(()=>{const t=!0===n.standalone,r={},i={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===wo.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||ar,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||zo.Emulated,id:"c"+Yb++,styles:n.styles||ar,_:null,setInput:null,schemas:n.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},s=n.dependencies,a=n.features;return i.inputs=np(n.inputs,r),i.outputs=np(n.outputs),a&&a.forEach(c=>c(i)),i.directiveDefs=s?()=>("function"==typeof s?s():s).map(zm).filter(jm):null,i.pipeDefs=s?()=>("function"==typeof s?s():s).map(hi).filter(jm):null,i})}function zm(n){return Xn(n)||qr(n)}function jm(n){return null!==n}function vs(n){return Rs(()=>({type:n.type,bootstrap:n.bootstrap||ar,declarations:n.declarations||ar,imports:n.imports||ar,exports:n.exports||ar,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function np(n,e){if(null==n)return pa;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}const hn=Do;function Xn(n){return n[Lc]||null}function qr(n){return n[ep]||null}function hi(n){return n[tp]||null}function Ns(n){return Array.isArray(n)&&"object"==typeof n[1]}function so(n){return Array.isArray(n)&&!0===n[1]}function op(n){return 0!=(4&n.flags)}function zc(n){return n.componentOffset>-1}function ih(n){return 1==(1&n.flags)}function bs(n){return null!==n.template}function Qb(n){return 0!=(256&n[2])}function jo(n,e){return n.hasOwnProperty(ga)?n[ga]:null}class Zn{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function On(){return Xt}function Xt(n){return n.type.prototype.ngOnChanges&&(n.setInput=ow),lp}function lp(){const n=Qm(this),e=n?.current;if(e){const t=n.previous;if(t===pa)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function ow(n,e,t,r){const i=this.declaredInputs[t],s=Qm(n)||function ku(n,e){return n[Km]=e}(n,{previous:pa,current:null}),a=s.current||(s.current={}),c=s.previous,f=c[i];a[i]=new Zn(f&&f.currentValue,e,c===pa),n[r]=e}On.ngInherit=!0;const Km="__ngSimpleChanges__";function Qm(n){return n[Km]||null}function _i(n){for(;Array.isArray(n);)n=n[0];return n}function Ps(n,e){return _i(e[n.index])}function sh(n,e){return n.data[e]}function Kn(n,e){const t=e[n];return Ns(t)?t:t[0]}function oh(n){return 64==(64&n[2])}function Za(n,e){return null==e?null:n[e]}function ma(n){n[18]=0}function Go(n,e){n[5]+=e;let t=n,r=n[3];for(;null!==r&&(1===e&&1===t[5]||-1===e&&0===t[5]);)r[5]+=e,t=r,r=r[3]}const dn={lFrame:lv(null),bindingsEnabled:!0};function nv(){return dn.bindingsEnabled}function St(){return dn.lFrame.lView}function Ln(){return dn.lFrame.tView}function el(n){return dn.lFrame.contextLView=n,n[8]}function Co(n){return dn.lFrame.contextLView=null,n}function yr(){let n=dp();for(;null!==n&&64===n.type;)n=n.parent;return n}function dp(){return dn.lFrame.currentTNode}function So(n,e){const t=dn.lFrame;t.currentTNode=n,t.isParent=e}function hp(){return dn.lFrame.isParent}function tl(){dn.lFrame.isParent=!1}function rl(){return dn.lFrame.bindingIndex++}function sv(n,e){const t=dn.lFrame;t.bindingIndex=t.bindingRootIndex=n,ah(e)}function ah(n){dn.lFrame.currentDirectiveIndex=n}function ov(){return dn.lFrame.currentQueryIndex}function Hl(n){dn.lFrame.currentQueryIndex=n}function Yc(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function pp(n,e,t){if(t&fn.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&fn.Host||(i=Yc(s),null===i||(s=s[15],10&i.type))););if(null===i)return!1;e=i,n=s}const r=dn.lFrame=av();return r.currentTNode=e,r.lView=n,!0}function gp(n){const e=av(),t=n[1];dn.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function av(){const n=dn.lFrame,e=null===n?null:n.child;return null===e?lv(n):e}function lv(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function uv(){const n=dn.lFrame;return dn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const cv=uv;function mp(){const n=uv();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Ji(){return dn.lFrame.selectedIndex}function il(n){dn.lFrame.selectedIndex=n}function Nr(){const n=dn.lFrame;return sh(n.tView,n.selectedIndex)}function ch(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:c,ngAfterViewInit:f,ngAfterViewChecked:m,ngOnDestroy:w}=s;a&&(n.contentHooks||(n.contentHooks=[])).push(-t,a),c&&((n.contentHooks||(n.contentHooks=[])).push(t,c),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,c)),f&&(n.viewHooks||(n.viewHooks=[])).push(-t,f),m&&((n.viewHooks||(n.viewHooks=[])).push(t,m),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,m)),null!=w&&(n.destroyHooks||(n.destroyHooks=[])).push(t,w)}}function Kc(n,e,t){Jc(n,e,3,t)}function Qc(n,e,t,r){(3&n[2])===t&&Jc(n,e,t,r)}function yp(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function Jc(n,e,t,r){const s=r??-1,a=e.length-1;let c=0;for(let f=void 0!==r?65535&n[18]:0;f<a;f++)if("number"==typeof e[f+1]){if(c=e[f],null!=r&&c>=r)break}else e[f]<0&&(n[18]+=65536),(c<s||-1==s)&&(sl(n,t,e,f),n[18]=(4294901760&n[18])+f+2),f++}function sl(n,e,t,r){const i=t[r]<0,s=t[r+1],c=n[i?-t[r]:t[r]];if(i){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(c)}finally{}}}else try{s.call(c)}finally{}}class Nu{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function Lu(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],a=t[r++],c=t[r++];n.setAttribute(e,a,c,s)}else{const s=i,a=t[++r];gv(s)?n.setProperty(e,s,a):n.setAttribute(e,s,a),r++}}return r}function pv(n){return 3===n||4===n||6===n}function gv(n){return 64===n.charCodeAt(0)}function ol(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||bp(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function bp(n,e,t,r,i){let s=0,a=n.length;if(-1===e)a=-1;else for(;s<n.length;){const c=n[s++];if("number"==typeof c){if(c===e){a=-1;break}if(c>e){a=s-1;break}}}for(;s<n.length;){const c=n[s];if("number"==typeof c)break;if(c===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==a&&(n.splice(a,0,e),s=a+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}function Zc(n){return-1!==n}function jl(n){return 32767&n}function Fu(n,e){let t=function Mi(n){return n>>16}(n),r=e;for(;t>0;)r=r[15],t--;return r}let ed=!0;function ya(n){const e=ed;return ed=n,e}let mw=0;const Ai={};function ba(n,e){const t=wp(n,e);if(-1!==t)return t;const r=e[1];r.firstCreatePass&&(n.injectorIndex=e.length,fi(r.data,n),fi(e,null),fi(r.blueprint,null));const i=dh(n,e),s=n.injectorIndex;if(Zc(i)){const a=jl(i),c=Fu(i,e),f=c[1].data;for(let m=0;m<8;m++)e[s+m]=c[a+m]|f[a+m]}return e[s+8]=i,s}function fi(n,e){n.push(0,0,0,0,0,0,0,0,e)}function wp(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function dh(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=Cp(i),null===r)return-1;if(t++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function hh(n,e,t){!function yv(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Fc)&&(r=t[Fc]),null==r&&(r=t[Fc]=mw++);const i=255&r;e.data[n+(i>>5)]|=1<<i}(n,e,t)}function Dp(n,e,t){if(t&fn.Optional||void 0!==n)return n;jn()}function xp(n,e,t,r){if(t&fn.Optional&&void 0===r&&(r=null),!(t&(fn.Self|fn.Host))){const i=n[9],s=mr(void 0);try{return i?i.get(e,r,t&fn.Optional):Os(e,r,t&fn.Optional)}finally{mr(s)}}return Dp(r,0,t)}function pi(n,e,t,r=fn.Default,i){if(null!==n){if(1024&e[2]){const a=function yw(n,e,t,r,i){let s=n,a=e;for(;null!==s&&null!==a&&1024&a[2]&&!(256&a[2]);){const c=br(s,a,t,r|fn.Self,Ai);if(c!==Ai)return c;let f=s.parent;if(!f){const m=a[21];if(m){const w=m.get(t,Ai,r);if(w!==Ai)return w}f=Cp(a),a=a[15]}s=f}return i}(n,e,t,r,Ai);if(a!==Ai)return a}const s=br(n,e,t,r,Ai);if(s!==Ai)return s}return xp(e,t,r,i)}function br(n,e,t,r,i){const s=function xr(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Fc)?n[Fc]:void 0;return"number"==typeof e?e>=0?255&e:Bu:e}(t);if("function"==typeof s){if(!pp(e,n,r))return r&fn.Host?Dp(i,0,r):xp(e,t,r,i);try{const a=s(r);if(null!=a||r&fn.Optional)return a;jn()}finally{cv()}}else if("number"==typeof s){let a=null,c=wp(n,e),f=-1,m=r&fn.Host?e[16][6]:null;for((-1===c||r&fn.SkipSelf)&&(f=-1===c?dh(n,e):e[c+8],-1!==f&&Ep(r,!1)?(a=e[1],c=jl(f),e=Fu(f,e)):c=-1);-1!==c;){const w=e[1];if(td(s,c,w.data)){const E=vw(c,e,t,a,r,m);if(E!==Ai)return E}f=e[c+8],-1!==f&&Ep(r,e[1].data[c+8]===m)&&td(s,c,e)?(a=w,c=jl(f),e=Fu(f,e)):c=-1}}return i}function vw(n,e,t,r,i,s){const a=e[1],c=a.data[n+8],w=fh(c,a,t,null==r?zc(c)&&ed:r!=a&&0!=(3&c.type),i&fn.Host&&s===c);return null!==w?Ul(e,a,w,c):Ai}function fh(n,e,t,r,i){const s=n.providerIndexes,a=e.data,c=1048575&s,f=n.directiveStart,w=s>>20,R=i?c+w:n.directiveEnd;for(let j=r?c:c+w;j<R;j++){const re=a[j];if(j<f&&t===re||j>=f&&re.type===t)return j}if(i){const j=a[f];if(j&&bs(j)&&j.type===t)return f}return null}function Ul(n,e,t,r){let i=n[t];const s=e.data;if(function fw(n){return n instanceof Nu}(i)){const a=i;a.resolving&&function wr(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new it(-200,`Circular dependency in DI detected for ${n}${t}`)}(function Gt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ut(n)}(s[t]));const c=ya(a.canSeeViewProviders);a.resolving=!0;const f=a.injectImpl?mr(a.injectImpl):null;pp(n,r,fn.Default);try{i=n[t]=a.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function hv(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const a=Xt(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,a),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,a)}i&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,i),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==f&&mr(f),ya(c),a.resolving=!1,cv()}}return i}function td(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function Ep(n,e){return!(n&fn.Self||n&fn.Host&&e)}class Gl{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return pi(this._tNode,this._lView,e,Su(r),t)}}function Bu(){return new Gl(yr(),St())}function Cp(n){const e=n[1],t=e.type;return 2===t?e.declTNode:1===t?n[6]:null}function nd(n){return function bv(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(pv(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(yr(),n)}const wa="__parameters__";function zu(n,e,t){return Rs(()=>{const r=function Hu(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const a=new i(...s);return c.annotation=a,c;function c(f,m,w){const E=f.hasOwnProperty(wa)?f[wa]:Object.defineProperty(f,wa,{value:[]})[wa];for(;E.length<=w;)E.push(null);return(E[w]=E[w]||[]).push(a),f}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}class Wt{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=En({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Mo(n,e){n.forEach(t=>Array.isArray(t)?Mo(t,e):e(t))}function ju(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Yl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function id(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}function ws(n,e,t){let r=Xl(n,e);return r>=0?n[1|r]=t:(r=~r,function Dv(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function Ap(n,e){const t=Xl(n,e);if(t>=0)return n[1|t]}function Xl(n,e){return function Ev(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),a=n[s<<t];if(e===a)return s<<t;a>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const Kl=Pc(zu("Optional"),8),sd=Pc(zu("SkipSelf"),4);var jr=(()=>((jr=jr||{})[jr.Important=1]="Important",jr[jr.DashCase=2]="DashCase",jr))();const ll=new Map;let Bp=0;const zp="__ngContext__";function Ui(n,e){Ns(e)?(n[zp]=e[20],function Fw(n){ll.set(n[20],n)}(e)):n[zp]=e}function Zl(n,e){return undefined(n,e)}function dd(n){const e=n[3];return so(e)?e[3]:e}function Up(n){return zv(n[13])}function Gp(n){return zv(n[4])}function zv(n){for(;null!==n&&!so(n);)n=n[4];return n}function Yu(n,e,t,r,i){if(null!=r){let s,a=!1;so(r)?s=r:Ns(r)&&(a=!0,r=r[0]);const c=_i(r);0===n&&null!==t?null==i?Kv(e,t,c):Gi(e,t,c,i||null,!0):1===n&&null!==t?Gi(e,t,c,i||null,!0):2===n?function Wo(n,e,t){const r=_h(n,e);r&&function Ww(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,c,a):3===n&&e.destroyNode(c),null!=s&&function Zv(n,e,t,r,i){const s=t[7];s!==_i(t)&&Yu(e,n,r,s,i);for(let c=10;c<t.length;c++){const f=t[c];Xu(f[1],f,n,e,r,s)}}(e,n,s,t,i)}}function Wp(n,e,t){return n.createElement(e,t)}function Wv(n,e){const t=n[9],r=t.indexOf(e),i=e[3];512&e[2]&&(e[2]&=-513,Go(i,-1)),t.splice(r,1)}function Sh(n,e){if(n.length<=10)return;const t=10+e,r=n[t];if(r){const i=r[17];null!==i&&i!==n&&Wv(i,r),e>0&&(n[t-1][4]=r[4]);const s=Yl(n,10+e);!function Uv(n,e){Xu(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function qp(n,e){if(!(128&e[2])){const t=e[11];t.destroyNode&&Xu(n,e,t,3,null,null),function Gv(n){let e=n[13];if(!e)return Yp(n[1],n);for(;e;){let t=null;if(Ns(e))t=e[13];else{const r=e[10];r&&(t=r)}if(!t){for(;e&&!e[4]&&e!==n;)Ns(e)&&Yp(e[1],e),e=e[3];null===e&&(e=n),Ns(e)&&Yp(e[1],e),t=e&&e[4]}e=t}}(e)}}function Yp(n,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function qv(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof Nu)){const s=t[r+1];if(Array.isArray(s))for(let a=0;a<s.length;a+=2){const c=i[s[a]],f=s[a+1];try{f.call(c)}finally{}}else try{s.call(i)}finally{}}}}(n,e),function $w(n,e){const t=n.cleanup,r=e[7];let i=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const a=t[s+3];a>=0?r[i=a]():r[i=-a].unsubscribe(),s+=2}else{const a=r[i=t[s+1]];t[s].call(a)}if(null!==r){for(let s=i+1;s<r.length;s++)(0,r[s])();e[7]=null}}(n,e),1===e[1].type&&e[11].destroy();const t=e[17];if(null!==t&&so(e[3])){t!==e[3]&&Wv(t,e);const r=e[19];null!==r&&r.detachView(n)}!function xh(n){ll.delete(n[20])}(e)}}function Yv(n,e,t){return function Xv(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[0];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===zo.None||s===zo.Emulated)return null}return Ps(r,t)}}(n,e.parent,t)}function Gi(n,e,t,r,i){n.insertBefore(e,t,r,i)}function Kv(n,e,t){n.appendChild(e,t)}function Qv(n,e,t,r,i){null!==r?Gi(n,e,t,r,i):Kv(n,e,t)}function _h(n,e){return n.parentNode(e)}function $o(n,e,t){return Mh(n,e,t)}let gd,eg,Mh=function Kp(n,e,t){return 40&n.type?Ps(n,t):null};function Ea(n,e,t,r){const i=Yv(n,r,e),s=e[11],c=$o(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(t))for(let f=0;f<t.length;f++)Qv(s,i,t[f],c,!1);else Qv(s,i,t,c,!1)}function fd(n,e){if(null!==e){const t=e.type;if(3&t)return Ps(e,n);if(4&t)return Qp(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return fd(n,r);{const i=n[e.index];return so(i)?Qp(-1,i):_i(i)}}if(32&t)return Zl(e,n)()||_i(n[e.index]);{const r=Ds(n,e);return null!==r?Array.isArray(r)?r[0]:fd(dd(n[16]),r):fd(n,e.next)}}return null}function Ds(n,e){return null!==e?n[16][6].projection[e.projection]:null}function Qp(n,e){const t=10+n+1;if(t<e.length){const r=e[t],i=r[1].firstChild;if(null!==i)return fd(r,i)}return e[7]}function Ah(n,e,t,r,i,s,a){for(;null!=t;){const c=r[t.index],f=t.type;if(a&&0===e&&(c&&Ui(_i(c),r),t.flags|=2),32!=(32&t.flags))if(8&f)Ah(n,e,t.child,r,i,s,!1),Yu(e,n,i,c,s);else if(32&f){const m=Zl(t,r);let w;for(;w=m();)Yu(e,n,i,w,s);Yu(e,n,i,c,s)}else 16&f?Th(n,e,r,t,i,s):Yu(e,n,i,c,s);t=a?t.projectionNext:t.next}}function Xu(n,e,t,r,i,s){Ah(t,r,n.firstChild,e,i,s,!1)}function Th(n,e,t,r,i,s){const a=t[16],f=a[6].projection[r.projection];if(Array.isArray(f))for(let m=0;m<f.length;m++)Yu(e,n,i,f[m],s);else Ah(n,e,f,a[3],i,s,!0)}function ey(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Zp(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&Lu(n,e,r),null!==i&&ey(n,e,i),null!==s&&function pd(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function eu(n){return function Ih(){if(void 0===gd&&(gd=null,hr.trustedTypes))try{gd=hr.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return gd}()?.createHTML(n)||n}class ul{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${un})`}}class tu extends ul{getTypeName(){return"HTML"}}class Yw extends ul{getTypeName(){return"Style"}}class nu extends ul{getTypeName(){return"Script"}}class u extends ul{getTypeName(){return"URL"}}class o extends ul{getTypeName(){return"ResourceURL"}}function l(n){return n instanceof ul?n.changingThisBreaksApplicationSecurity:n}function d(n,e){const t=function h(n){return n instanceof ul&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${un})`)}return t===e}class x{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(eu(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class _{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const r=this.inertDocument.createElement("body");t.appendChild(r)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=eu(e),t;const r=this.inertDocument.createElement("body");return r.innerHTML=eu(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(r),r}stripCustomNsAttrs(e){const t=e.attributes;for(let i=t.length-1;0<i;i--){const a=t.item(i).name;("xmlns:ns1"===a||0===a.indexOf("ns1:"))&&e.removeAttribute(a)}let r=e.firstChild;for(;r;)r.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(r),r=r.nextSibling}}const O=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function V(n){return(n=String(n)).match(O)?n:"unsafe:"+n}function W(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function Y(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const te=W("area,br,col,hr,img,wbr"),ne=W("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),se=W("rp,rt"),be=Y(te,Y(ne,W("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Y(se,W("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Y(se,ne)),de=W("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),pe=Y(de,W("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),W("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Le=W("script,style,template");class Se{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let i=this.checkClobberedElement(t,t.nextSibling);if(i){t=i;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!be.hasOwnProperty(t))return this.sanitizedSomething=!0,!Le.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let i=0;i<r.length;i++){const s=r.item(i),a=s.name,c=a.toLowerCase();if(!pe.hasOwnProperty(c)){this.sanitizedSomething=!0;continue}let f=s.value;de[c]&&(f=V(f)),this.buf.push(" ",a,'="',je(f),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();be.hasOwnProperty(t)&&!te.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(je(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const qe=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Be=/([^\#-~ |!])/g;function je(n){return n.replace(/&/g,"&amp;").replace(qe,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(Be,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ke;function tt(n,e){let t=null;try{Ke=Ke||function D(n){const e=new _(n);return function k(){try{return!!(new window.DOMParser).parseFromString(eu(""),"text/html")}catch{return!1}}()?new x(e):e}(n);let r=e?String(e):"";t=Ke.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=Ke.getInertBodyElement(r)}while(r!==s);return eu((new Se).sanitizeChildren(at(t)||t))}finally{if(t){const r=at(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function at(n){return"content"in n&&function et(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Je=(()=>((Je=Je||{})[Je.NONE=0]="NONE",Je[Je.HTML=1]="HTML",Je[Je.STYLE=2]="STYLE",Je[Je.SCRIPT=3]="SCRIPT",Je[Je.URL=4]="URL",Je[Je.RESOURCE_URL=5]="RESOURCE_URL",Je))();const Lt=new Wt("ENVIRONMENT_INITIALIZER"),ln=new Wt("INJECTOR",-1),Qt=new Wt("INJECTOR_DEF_TYPES");class zt{get(e,t=ro){if(t===ro){const r=new Error(`NullInjectorError: No provider for ${ye(e)}!`);throw r.name="NullInjectorError",r}return t}}function Rn(...n){return{\u0275providers:Dn(0,n),\u0275fromNgModule:!0}}function Dn(n,...e){const t=[],r=new Set;let i;return Mo(e,s=>{const a=s;It(a,t,[],r)&&(i||(i=[]),i.push(a))}),void 0!==i&&cn(i,t),t}function cn(n,e){for(let t=0;t<n.length;t++){const{providers:i}=n[t];rt(i,s=>{e.push(s)})}}function It(n,e,t,r){if(!(n=ut(n)))return!1;let i=null,s=bo(n);const a=!s&&Xn(n);if(s||a){if(a&&!a.standalone)return!1;i=n}else{const f=n.ngModule;if(s=bo(f),!s)return!1;i=f}const c=r.has(i);if(a){if(c)return!1;if(r.add(i),a.dependencies){const f="function"==typeof a.dependencies?a.dependencies():a.dependencies;for(const m of f)It(m,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!c){let m;r.add(i);try{Mo(s.imports,w=>{It(w,e,t,r)&&(m||(m=[]),m.push(w))})}finally{}void 0!==m&&cn(m,e)}if(!c){const m=jo(i)||(()=>new i);e.push({provide:i,useFactory:m,deps:ar},{provide:Qt,useValue:i,multi:!0},{provide:Lt,useValue:()=>an(i),multi:!0})}const f=s.providers;null==f||c||rt(f,w=>{e.push(w)})}}return i!==n&&void 0!==n.providers}function rt(n,e){for(let t of n)Ft(t)&&(t=t.\u0275providers),Array.isArray(t)?rt(t,e):e(t)}const At=ur({provide:String,useValue:ur});function pt(n){return null!==n&&"object"==typeof n&&At in n}function _t(n){return"function"==typeof n}const Fn=new Wt("Set Injector scope."),ir={},Tn={};let er;function bn(){return void 0===er&&(er=new zt),er}class wn{}class Pr extends wn{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,dl(e,a=>this.processProvider(a)),this.records.set(ln,ki(void 0,this)),i.has("environment")&&this.records.set(wn,ki(void 0,this));const s=this.records.get(Fn);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Qt.multi,ar,fn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=Ka(this),r=mr(void 0);try{return e()}finally{Ka(t),mr(r)}}get(e,t=ro,r=fn.Default){this.assertNotDestroyed(),r=Su(r);const i=Ka(this),s=mr(void 0);try{if(!(r&fn.SkipSelf)){let c=this.records.get(e);if(void 0===c){const f=function cl(n){return"function"==typeof n||"object"==typeof n&&n instanceof Wt}(e)&&yo(e);c=f&&this.injectableDefInScope(f)?ki(li(e),ir):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(r&fn.Self?bn():this.parent).get(e,t=r&fn.Optional&&t===ro?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[ms]=a[ms]||[]).unshift(ye(e)),i)throw a;return function _u(n,e,t,r){const i=n[ms];throw e[Bi]&&i.unshift(e[Bi]),n.message=function Fm(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=ye(e);if(Array.isArray(e))i=e.map(ye).join(" -> ");else if("object"==typeof e){let s=[];for(let a in e)if(e.hasOwnProperty(a)){let c=e[a];s.push(a+":"+("string"==typeof c?JSON.stringify(c):ye(c)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(Zd,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[ms]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{mr(s),Ka(i)}}resolveInjectorInitializers(){const e=Ka(this),t=mr(void 0);try{const r=this.get(Lt.multi,ar,fn.Self);for(const i of r)i()}finally{Ka(e),mr(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(ye(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new it(205,!1)}processProvider(e){let t=_t(e=ut(e))?e:ut(e&&e.provide);const r=function To(n){return pt(n)?ki(void 0,n.useValue):ki(vi(n),ir)}(e);if(_t(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=ki(void 0,ir,!0),i.factory=()=>Zf(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===ir&&(t.value=Tn,t.value=t.factory()),"object"==typeof t.value&&t.value&&function Ca(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=ut(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function li(n){const e=yo(n),t=null!==e?e.factory:jo(n);if(null!==t)return t;if(n instanceof Wt)throw new it(204,!1);if(n instanceof Function)return function Ao(n){const e=n.length;if(e>0)throw id(e,"?"),new it(204,!1);const t=function no(n){const e=n&&(n[ca]||n[xu]);if(e){const t=function Du(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new it(204,!1)}function vi(n,e,t){let r;if(_t(n)){const i=ut(n);return jo(i)||li(i)}if(pt(n))r=()=>ut(n.useValue);else if(function xn(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Zf(n.deps||[]));else if(function vt(n){return!(!n||!n.useExisting)}(n))r=()=>an(ut(n.useExisting));else{const i=ut(n&&(n.useClass||n.provide));if(!function ts(n){return!!n.deps}(n))return jo(i)||li(i);r=()=>new i(...Zf(n.deps))}return r}function ki(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function dl(n,e){for(const t of n)Array.isArray(t)?dl(t,e):t&&Ft(t)?dl(t.\u0275providers,e):e(t)}class ru{}class iu{}class $i{resolveComponentFactory(e){throw function Rh(n){const e=Error(`No component factory found for ${ye(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let Oi=(()=>{class n{}return n.NULL=new $i,n})();function Nh(){return ns(yr(),St())}function ns(n,e){return new ii(Ps(n,e))}let ii=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=Nh,n})();function Xw(n){return n instanceof ii?n.nativeElement:n}class sy{}let Sa=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Kw(){const n=St(),t=Kn(yr().index,n);return(Ns(t)?t:n)[11]}(),n})(),Qw=(()=>{class n{}return n.\u0275prov=En({token:n,providedIn:"root",factory:()=>null}),n})();class Qu{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Jw=new Qu("15.1.5"),su={};function Lh(n){return n.ngOriginalError}class qo{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Lh(e);for(;t&&Lh(t);)t=Lh(t);return t||null}}function Ju(n){return n.ownerDocument.defaultView}function Vs(n){return n.ownerDocument}function tS(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}const nS="ng-template";function eF(n,e,t){let r=0;for(;r<n.length;){let i=n[r++];if(t&&"class"===i){if(i=n[r],-1!==tS(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function rS(n){return 4===n.type&&n.value!==nS}function tF(n,e,t){return e===(4!==n.type||t?n.value:nS)}function nF(n,e,t){let r=4;const i=n.attrs||[],s=function sF(n){for(let e=0;e<n.length;e++)if(pv(n[e]))return e;return n.length}(i);let a=!1;for(let c=0;c<e.length;c++){const f=e[c];if("number"!=typeof f){if(!a)if(4&r){if(r=2|1&r,""!==f&&!tF(n,f,t)||""===f&&1===e.length){if(_a(r))return!1;a=!0}}else{const m=8&r?f:e[++c];if(8&r&&null!==n.attrs){if(!eF(n.attrs,m,t)){if(_a(r))return!1;a=!0}continue}const E=rF(8&r?"class":f,i,rS(n),t);if(-1===E){if(_a(r))return!1;a=!0;continue}if(""!==m){let R;R=E>s?"":i[E+1].toLowerCase();const j=8&r?R:null;if(j&&-1!==tS(j,m,0)||2&r&&m!==R){if(_a(r))return!1;a=!0}}}}else{if(!a&&!_a(r)&&!_a(f))return!1;if(a&&_a(f))continue;a=!1,r=f|1&r}}return _a(r)||a}function _a(n){return 0==(1&n)}function rF(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const a=e[i];if(a===n)return i;if(3===a||6===a)s=!0;else{if(1===a||2===a){let c=e[++i];for(;"string"==typeof c;)c=e[++i];continue}if(4===a)break;if(0===a){i+=4;continue}}i+=s?1:2}return-1}return function oF(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function iS(n,e,t=!1){for(let r=0;r<e.length;r++)if(nF(n,e[r],t))return!0;return!1}function aF(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function sS(n,e){return n?":not("+e.trim()+")":e}function lF(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let a=n[t];if("string"==typeof a)if(2&r){const c=n[++t];i+="["+a+(c.length>0?'="'+c+'"':"")+"]"}else 8&r?i+="."+a:4&r&&(i+=" "+a);else""!==i&&!_a(a)&&(e+=sS(s,i),i=""),r=a,s=s||!_a(r);t++}return""!==i&&(e+=sS(s,i)),e}const _n={};function Yo(n){oS(Ln(),St(),Ji()+n,!1)}function oS(n,e,t,r){if(!r)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&Kc(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Qc(e,s,0,t)}il(t)}function cS(n,e=null,t=null,r){const i=function dS(n,e=null,t=null,r,i=new Set){const s=[t||ar,Rn(n)];return r=r||("object"==typeof n?void 0:ye(n)),new Pr(s,e||bn(),r||null,i)}(n,e,t,r);return i.resolveInjectorInitializers(),i}let au=(()=>{class n{static create(t,r){if(Array.isArray(t))return cS({name:""},r,t,"");{const i=t.name??"";return cS({name:i},t.parent,t.providers,i)}}}return n.THROW_IF_NOT_FOUND=ro,n.NULL=new zt,n.\u0275prov=En({token:n,providedIn:"any",factory:()=>an(ln)}),n.__NG_ELEMENT_ID__=-1,n})();function gt(n,e=fn.Default){const t=St();return null===t?an(n,e):pi(yr(),t,ut(n),e)}function bS(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const a=n.data[s];Hl(t[r]),a.contentQueries(2,e[s],s)}}}function ly(n,e,t,r,i,s,a,c,f,m,w){const E=e.blueprint.slice();return E[0]=i,E[2]=76|r,(null!==w||n&&1024&n[2])&&(E[2]|=1024),ma(E),E[3]=E[15]=n,E[8]=t,E[10]=a||n&&n[10],E[11]=c||n&&n[11],E[12]=f||n&&n[12]||null,E[9]=m||n&&n[9]||null,E[6]=s,E[20]=function Nv(){return Bp++}(),E[21]=w,E[16]=2==e.type?n[16]:E,E}function Vh(n,e,t,r,i){let s=n.data[e];if(null===s)s=function sD(n,e,t,r,i){const s=dp(),a=hp(),f=n.data[e]=function NF(n,e,t,r,i,s){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,a?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=f),null!==s&&(a?null==s.child&&null!==f.parent&&(s.child=f):null===s.next&&(s.next=f)),f}(n,e,t,r,i),function iv(){return dn.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const a=function Ru(){const n=dn.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===a?-1:a.injectorIndex}return So(s,!0),s}function rg(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function oD(n,e,t){gp(e);try{const r=n.viewQuery;null!==r&&mD(1,r,t);const i=n.template;null!==i&&wS(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&bS(n,e),n.staticViewQueries&&mD(2,n.viewQuery,t);const s=n.components;null!==s&&function kF(n,e){for(let t=0;t<e.length;t++)ZF(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[2]&=-5,mp()}}function uy(n,e,t,r){const i=e[2];if(128!=(128&i)){gp(e);try{ma(e),function Wc(n){return dn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&wS(n,e,t,2,r);const a=3==(3&i);if(a){const m=n.preOrderCheckHooks;null!==m&&Kc(e,m,null)}else{const m=n.preOrderHooks;null!==m&&Qc(e,m,0,null),yp(e,0)}if(function QF(n){for(let e=Up(n);null!==e;e=Gp(e)){if(!e[2])continue;const t=e[9];for(let r=0;r<t.length;r++){const i=t[r];512&i[2]||Go(i[3],1),i[2]|=512}}}(e),function KF(n){for(let e=Up(n);null!==e;e=Gp(e))for(let t=10;t<e.length;t++){const r=e[t],i=r[1];oh(r)&&uy(i,r,i.template,r[8])}}(e),null!==n.contentQueries&&bS(n,e),a){const m=n.contentCheckHooks;null!==m&&Kc(e,m)}else{const m=n.contentHooks;null!==m&&Qc(e,m,1),yp(e,1)}!function TF(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)il(~i);else{const s=i,a=t[++r],c=t[++r];sv(a,s),c(2,e[s])}}}finally{il(-1)}}(n,e);const c=n.components;null!==c&&function IF(n,e){for(let t=0;t<e.length;t++)JF(n,e[t])}(e,c);const f=n.viewQuery;if(null!==f&&mD(2,f,r),a){const m=n.viewCheckHooks;null!==m&&Kc(e,m)}else{const m=n.viewHooks;null!==m&&Qc(e,m,2),yp(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,Go(e[3],-1))}finally{mp()}}}function wS(n,e,t,r,i){const s=Ji(),a=2&r;try{il(-1),a&&e.length>22&&oS(n,e,22,!1),t(r,i)}finally{il(s)}}function aD(n,e,t){if(op(e)){const i=e.directiveEnd;for(let s=e.directiveStart;s<i;s++){const a=n.data[s];a.contentQueries&&a.contentQueries(1,t[s],s)}}}function lD(n,e,t){nv()&&(function HF(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;zc(t)&&function qF(n,e,t){const r=Ps(e,n),i=DS(t),s=n[10],a=cy(n,ly(n,i,null,t.onPush?32:16,r,e,s,s.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||ba(t,e),Ui(r,e);const a=t.initialInputs;for(let c=i;c<s;c++){const f=n.data[c],m=Ul(e,n,c,t);Ui(m,e),null!==a&&YF(0,c-i,m,f,0,a),bs(f)&&(Kn(t.index,e)[8]=Ul(e,n,c,t))}}(n,e,t,Ps(t,e)),64==(64&t.flags)&&MS(n,e,t))}function uD(n,e,t=Ps){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const a=r[s+1],c=-1===a?t(e,n):n[a];n[i++]=c}}}function DS(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=cD(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function cD(n,e,t,r,i,s,a,c,f,m){const w=22+r,E=w+i,R=function OF(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:_n);return t}(w,E),j="function"==typeof m?m():m;return R[1]={type:n,blueprint:R,template:t,queries:null,viewQuery:c,declTNode:e,data:R.slice().fill(null,w),bindingStartIndex:w,expandoStartIndex:E,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:f,consts:j,incompleteFirstPass:!1}}function xS(n,e,t,r){const i=TS(e);null===t?i.push(r):(i.push(t),n.firstCreatePass&&IS(n).push(r,i.length-1))}function ES(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const s=n[i];null===r?CS(t,e,i,s):r.hasOwnProperty(i)&&CS(t,e,r[i],s)}return t}function CS(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function ko(n,e,t,r,i,s,a,c){const f=Ps(e,t);let w,m=e.inputs;!c&&null!=m&&(w=m[r])?(vD(n,t,w,r,i),zc(e)&&SS(t,e.index)):3&e.type&&(r=function LF(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=a?a(i,e.value||"",r):i,s.setProperty(f,r,i))}function SS(n,e){const t=Kn(e,n);16&t[2]||(t[2]|=32)}function dD(n,e,t,r){let i=!1;if(nv()){const s=null===r?null:{"":-1},a=function jF(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const a=t[s];if(iS(e,a.selectors,!1))if(r||(r=[]),bs(a))if(null!==a.findHostDirectiveDefs){const c=[];i=i||new Map,a.findHostDirectiveDefs(a,c,i),r.unshift(...c,a),hD(n,e,c.length)}else r.unshift(a),hD(n,e,0);else i=i||new Map,a.findHostDirectiveDefs?.(a,r,i),r.push(a)}return null===r?null:[r,i]}(n,t);let c,f;null===a?c=f=null:[c,f]=a,null!==c&&(i=!0,_S(n,e,t,c,s,f)),s&&function UF(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new it(-301,!1);r.push(e[i],s)}}}(t,r,s)}return t.mergedAttrs=ol(t.mergedAttrs,t.attrs),i}function _S(n,e,t,r,i,s){for(let m=0;m<r.length;m++)hh(ba(t,e),n,r[m].type);!function $F(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let m=0;m<r.length;m++){const w=r[m];w.providersResolver&&w.providersResolver(w)}let a=!1,c=!1,f=rg(n,e,r.length,null);for(let m=0;m<r.length;m++){const w=r[m];t.mergedAttrs=ol(t.mergedAttrs,w.hostAttrs),WF(n,t,e,f,w),GF(f,w,i),null!==w.contentQueries&&(t.flags|=4),(null!==w.hostBindings||null!==w.hostAttrs||0!==w.hostVars)&&(t.flags|=64);const E=w.type.prototype;!a&&(E.ngOnChanges||E.ngOnInit||E.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!c&&(E.ngOnChanges||E.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),c=!0),f++}!function PF(n,e,t){const i=e.directiveEnd,s=n.data,a=e.attrs,c=[];let f=null,m=null;for(let w=e.directiveStart;w<i;w++){const E=s[w],R=t?t.get(E):null,re=R?R.outputs:null;f=ES(E.inputs,w,f,R?R.inputs:null),m=ES(E.outputs,w,m,re);const xe=null===f||null===a||rS(e)?null:XF(f,w,a);c.push(xe)}null!==f&&(f.hasOwnProperty("class")&&(e.flags|=8),f.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=c,e.inputs=f,e.outputs=m}(n,t,s)}function MS(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,a=function qc(){return dn.lFrame.currentDirectiveIndex}();try{il(s);for(let c=r;c<i;c++){const f=n.data[c],m=e[c];ah(c),(null!==f.hostBindings||0!==f.hostVars||null!==f.hostAttrs)&&zF(f,m)}}finally{il(-1),ah(a)}}function zF(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function hD(n,e,t){e.componentOffset=t,(n.components||(n.components=[])).push(e.index)}function GF(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;bs(e)&&(t[""]=n)}}function WF(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=jo(i.type)),a=new Nu(s,bs(i),gt);n.blueprint[r]=a,t[r]=a,function BF(n,e,t,r,i){const s=i.hostBindings;if(s){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const c=~e.index;(function VF(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=c&&a.push(c),a.push(t,r,s)}}(n,e,r,rg(n,t,i.hostVars,_n),i)}function fl(n,e,t,r,i,s){const a=Ps(n,e);!function fD(n,e,t,r,i,s,a){if(null==s)n.removeAttribute(e,i,t);else{const c=null==a?Ut(s):a(s,r||"",i);n.setAttribute(e,i,c,t)}}(e[11],a,s,n.value,t,r,i)}function YF(n,e,t,r,i,s){const a=s[e];if(null!==a){const c=r.setInput;for(let f=0;f<a.length;){const m=a[f++],w=a[f++],E=a[f++];null!==c?r.setInput(t,E,m,w):t[w]=E}}}function XF(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const a=n[s];for(let c=0;c<a.length;c+=2)if(a[c]===e){r.push(s,a[c+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function AS(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null]}function JF(n,e){const t=Kn(e,n);if(oh(t)){const r=t[1];48&t[2]?uy(r,t,r.template,t[8]):t[5]>0&&pD(t)}}function pD(n){for(let r=Up(n);null!==r;r=Gp(r))for(let i=10;i<r.length;i++){const s=r[i];if(oh(s))if(512&s[2]){const a=s[1];uy(a,s,a.template,s[8])}else s[5]>0&&pD(s)}const t=n[1].components;if(null!==t)for(let r=0;r<t.length;r++){const i=Kn(t[r],n);oh(i)&&i[5]>0&&pD(i)}}function ZF(n,e){const t=Kn(e,n),r=t[1];(function e2(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(r,t),oD(r,t,t[8])}function cy(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function gD(n){for(;n;){n[2]|=32;const e=dd(n);if(Qb(n)&&!e)return n;n=e}return null}function dy(n,e,t,r=!0){const i=e[10];i.begin&&i.begin();try{uy(n,e,n.template,t)}catch(a){throw r&&OS(e,a),a}finally{i.end&&i.end()}}function mD(n,e,t){Hl(0),e(n,t)}function TS(n){return n[7]||(n[7]=[])}function IS(n){return n.cleanup||(n.cleanup=[])}function OS(n,e){const t=n[9],r=t?t.get(qo,null):null;r&&r.handleError(e)}function vD(n,e,t,r,i){for(let s=0;s<t.length;){const a=t[s++],c=t[s++],f=e[a],m=n.data[a];null!==m.setInput?m.setInput(f,i,r,c):f[c]=i}}function hy(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let a=0;a<e.length;a++){const c=e[a];"number"==typeof c?s=c:1==s?i=Ue(i,c):2==s&&(r=Ue(r,c+": "+e[++a]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function fy(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&r.push(_i(s)),so(s))for(let c=10;c<s.length;c++){const f=s[c],m=f[1].firstChild;null!==m&&fy(f[1],f,m,r)}const a=t.type;if(8&a)fy(n,e,t.child,r);else if(32&a){const c=Zl(t,e);let f;for(;f=c();)r.push(f)}else if(16&a){const c=Ds(e,t);if(Array.isArray(c))r.push(...c);else{const f=dd(e[16]);fy(f[1],f,c,r,!0)}}t=i?t.projectionNext:t.next}return r}class ig{get rootNodes(){const e=this._lView,t=e[1];return fy(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(so(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(Sh(e,r),Yl(t,r))}this._attachedToViewContainer=!1}qp(this._lView[1],this._lView)}onDestroy(e){xS(this._lView[1],this._lView,null,e)}markForCheck(){gD(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){dy(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new it(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Gw(n,e){Xu(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new it(902,!1);this._appRef=e}}class t2 extends ig{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;dy(e[1],e,e[8],!1)}checkNoChanges(){}get context(){return null}}class RS extends Oi{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Xn(e);return new sg(t,this.ngModule)}}function NS(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class r2{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Su(r);const i=this.injector.get(e,su,r);return i!==su||t===su?i:this.parentInjector.get(e,t,r)}}class sg extends iu{get inputs(){return NS(this.componentDef.inputs)}get outputs(){return NS(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function uF(n){return n.map(lF).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof wn?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const a=s?new r2(e,s):e,c=a.get(sy,null);if(null===c)throw new it(407,!1);const f=a.get(Qw,null),m=c.createRenderer(null,this.componentDef),w=this.componentDef.selectors[0][0]||"div",E=r?function RF(n,e,t){return n.selectRootElement(e,t===zo.ShadowDom)}(m,r,this.componentDef.encapsulation):Wp(m,w,function n2(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(w)),R=this.componentDef.onPush?288:272,j=cD(0,null,null,1,0,null,null,null,null,null),re=ly(null,j,null,R,null,null,c,m,f,a,null);let xe,ke;gp(re);try{const Ve=this.componentDef;let nt,Ye=null;Ve.findHostDirectiveDefs?(nt=[],Ye=new Map,Ve.findHostDirectiveDefs(Ve,nt,Ye),nt.push(Ve)):nt=[Ve];const ht=function s2(n,e){const t=n[1];return n[22]=e,Vh(t,22,2,"#host",null)}(re,E),Rt=function o2(n,e,t,r,i,s,a,c){const f=i[1];!function a2(n,e,t,r){for(const i of n)e.mergedAttrs=ol(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(hy(e,e.mergedAttrs,!0),null!==t&&Zp(r,t,e))}(r,n,e,a);const m=s.createRenderer(e,t),w=ly(i,DS(t),null,t.onPush?32:16,i[n.index],n,s,m,c||null,null,null);return f.firstCreatePass&&hD(f,n,r.length-1),cy(i,w),i[n.index]=w}(ht,E,Ve,nt,re,c,m);ke=sh(j,22),E&&function u2(n,e,t,r){if(r)Lu(n,t,["ng-version",Jw.full]);else{const{attrs:i,classes:s}=function cF(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!_a(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&Lu(n,t,i),s&&s.length>0&&ey(n,t,s.join(" "))}}(m,Ve,E,r),void 0!==t&&function c2(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(ke,this.ngContentSelectors,t),xe=function l2(n,e,t,r,i,s){const a=yr(),c=i[1],f=Ps(a,i);_S(c,i,a,t,null,r);for(let w=0;w<t.length;w++)Ui(Ul(i,c,a.directiveStart+w,a),i);MS(c,i,a),f&&Ui(f,i);const m=Ul(i,c,a.directiveStart+a.componentOffset,a);if(n[8]=i[8]=m,null!==s)for(const w of s)w(m,e);return aD(c,a,n),m}(Rt,Ve,nt,Ye,re,[d2]),oD(j,re,null)}finally{mp()}return new i2(this.componentType,xe,ns(ke,re),re,ke)}}class i2 extends ru{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new t2(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){const s=this._rootLView;vD(s[1],s,i,e,t),SS(s,this._tNode.index)}}get injector(){return new Gl(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function d2(){const n=yr();ch(St()[1],n)}function sr(n){let e=function PS(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(bs(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new it(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const a=n;a.inputs=yD(n.inputs),a.declaredInputs=yD(n.declaredInputs),a.outputs=yD(n.outputs);const c=i.hostBindings;c&&g2(n,c);const f=i.viewQuery,m=i.contentQueries;if(f&&f2(n,f),m&&p2(n,m),_e(n.inputs,i.inputs),_e(n.declaredInputs,i.declaredInputs),_e(n.outputs,i.outputs),bs(i)&&i.data.animation){const w=n.data;w.animation=(w.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let a=0;a<s.length;a++){const c=s[a];c&&c.ngInherit&&c(n),c===sr&&(t=!1)}}e=Object.getPrototypeOf(e)}!function h2(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ol(i.hostAttrs,t=ol(t,i.hostAttrs))}}(r)}function yD(n){return n===pa?{}:n===ar?[]:n}function f2(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function p2(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function g2(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}let py=null;function yd(){if(!py){const n=hr.Symbol;if(n&&n.iterator)py=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const r=e[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(py=r)}}}return py}function gy(n){return!!function bD(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&yd()in n)}function xs(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function uo(n,e,t,r){const i=St();return xs(i,rl(),e)&&(Ln(),fl(Nr(),i,n,e,t,r)),uo}function wD(n,e,t,r,i,s,a,c){const f=St(),m=Ln(),w=n+22,E=m.firstCreatePass?function S2(n,e,t,r,i,s,a,c,f){const m=e.consts,w=Vh(e,n,4,a||null,Za(m,c));dD(e,t,w,Za(m,f)),ch(e,w);const E=w.tViews=cD(2,w,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,m);return null!==e.queries&&(e.queries.template(e,w),E.queries=e.queries.embeddedTView(w)),w}(w,m,f,e,t,r,i,s,a):m.data[w];So(E,!1);const R=f[11].createComment("");Ea(m,f,R,E),Ui(R,f),cy(f,f[w]=AS(R,f,R,E)),ih(E)&&lD(m,f,E),null!=a&&uD(f,E,c)}function co(n,e,t){const r=St();return xs(r,rl(),e)&&ko(Ln(),Nr(),r,n,e,r[11],t,!1),co}function DD(n,e,t,r,i){const a=i?"class":"style";vD(n,t,e.inputs[a],a,r)}function yi(n,e,t,r){const i=St(),s=Ln(),a=22+n,c=i[11],f=i[a]=Wp(c,e,function uh(){return dn.lFrame.currentNamespace}()),m=s.firstCreatePass?function M2(n,e,t,r,i,s,a){const c=e.consts,m=Vh(e,n,2,i,Za(c,s));return dD(e,t,m,Za(c,a)),null!==m.attrs&&hy(m,m.attrs,!1),null!==m.mergedAttrs&&hy(m,m.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,m),m}(a,s,i,0,e,t,r):s.data[a];return So(m,!0),Zp(c,f,m),32!=(32&m.flags)&&Ea(s,i,f,m),0===function cp(){return dn.lFrame.elementDepthCount}()&&Ui(f,i),function ev(){dn.lFrame.elementDepthCount++}(),ih(m)&&(lD(s,i,m),aD(s,m,i)),null!==r&&uD(i,m),yi}function Wi(){let n=yr();hp()?tl():(n=n.parent,So(n,!1));const e=n;!function tv(){dn.lFrame.elementDepthCount--}();const t=Ln();return t.firstCreatePass&&(ch(t,n),op(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function fv(n){return 0!=(8&n.flags)}(e)&&DD(t,e,St(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function nr(n){return 0!=(16&n.flags)}(e)&&DD(t,e,St(),e.stylesWithoutHost,!1),Wi}function Ma(n,e,t,r){return yi(n,e,t,r),Wi(),Ma}function vy(n){return!!n&&"function"==typeof n.then}const JS=function QS(n){return!!n&&"function"==typeof n.subscribe};function bi(n,e,t,r){const i=St(),s=Ln(),a=yr();return function e_(n,e,t,r,i,s,a){const c=ih(r),m=n.firstCreatePass&&IS(n),w=e[8],E=TS(e);let R=!0;if(3&r.type||a){const xe=Ps(r,e),ke=a?a(xe):xe,Ve=E.length,nt=a?ht=>a(_i(ht[r.index])):r.index;let Ye=null;if(!a&&c&&(Ye=function T2(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const a=i[s];if(a===t&&i[s+1]===r){const c=e[7],f=i[s+2];return c.length>f?c[f]:null}"string"==typeof a&&(s+=2)}return null}(n,e,i,r.index)),null!==Ye)(Ye.__ngLastListenerFn__||Ye).__ngNextListenerFn__=s,Ye.__ngLastListenerFn__=s,R=!1;else{s=n_(r,e,w,s,!1);const ht=t.listen(ke,i,s);E.push(s,ht),m&&m.push(i,nt,Ve,Ve+1)}}else s=n_(r,e,w,s,!1);const j=r.outputs;let re;if(R&&null!==j&&(re=j[i])){const xe=re.length;if(xe)for(let ke=0;ke<xe;ke+=2){const Rt=e[re[ke]][re[ke+1]].subscribe(s),Nt=E.length;E.push(s,Rt),m&&m.push(i,r.index,Nt,-(Nt+1))}}}(s,i,i[11],a,n,e,r),bi}function t_(n,e,t,r){try{return!1!==t(r)}catch(i){return OS(n,i),!1}}function n_(n,e,t,r,i){return function s(a){if(a===Function)return r;gD(n.componentOffset>-1?Kn(n.index,e):e);let f=t_(e,0,r,a),m=s.__ngNextListenerFn__;for(;m;)f=t_(e,0,m,a)&&f,m=m.__ngNextListenerFn__;return i&&!1===f&&(a.preventDefault(),a.returnValue=!1),f}}function Oo(n=1){return function cw(n){return(dn.lFrame.contextLView=function dw(n,e){for(;n>0;)e=e[15],n--;return e}(n,dn.lFrame.contextLView))[8]}(n)}function I2(n,e){let t=null;const r=function iF(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?iS(n,s,!0):aF(r,s))return i}else t=i}return t}function ag(n){const e=St()[16][6];if(!e.projection){const r=e.projection=id(n?n.length:1,null),i=r.slice();let s=e.child;for(;null!==s;){const a=n?I2(s,n):0;null!==a&&(i[a]?i[a].projectionNext=s:r[a]=s,i[a]=s),s=s.next}}}function Xh(n,e=0,t){const r=St(),i=Ln(),s=Vh(i,22+n,16,null,t||null);null===s.projection&&(s.projection=e),tl(),32!=(32&s.flags)&&function Jp(n,e,t){Th(e[11],0,e,t,Yv(n,t,e),$o(t.parent||e[6],t,e))}(i,r,s)}function yy(n,e){return n<<17|e<<2}function Zu(n){return n>>17&32767}function SD(n){return 2|n}function wd(n){return(131068&n)>>2}function _D(n,e){return-131069&n|e<<2}function MD(n){return 1|n}function h_(n,e,t,r,i){const s=n[t+1],a=null===e;let c=r?Zu(s):wd(s),f=!1;for(;0!==c&&(!1===f||a);){const w=n[c+1];L2(n[c],e)&&(f=!0,n[c+1]=r?MD(w):SD(w)),c=r?Zu(w):wd(w)}f&&(n[t+1]=r?SD(s):MD(s))}function L2(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Xl(n,e)>=0}function lg(n,e,t){return Ta(n,e,t,!1),lg}function Aa(n,e){return Ta(n,e,null,!0),Aa}function Ta(n,e,t,r){const i=St(),s=Ln(),a=function va(n){const e=dn.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);s.firstUpdatePass&&function w_(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[Ji()],a=function b_(n,e){return e>=n.expandoStartIndex}(n,t);(function C_(n,e){return 0!=(n.flags&(e?8:16))})(s,r)&&null===e&&!a&&(e=!1),e=function $2(n,e,t,r){const i=function lh(n){const e=dn.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=ug(t=AD(null,n,e,t,r),e.attrs,r),s=null);else{const a=e.directiveStylingLast;if(-1===a||n[a]!==i)if(t=AD(i,n,e,t,r),null===s){let f=function W2(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==wd(r))return n[Zu(r)]}(n,e,r);void 0!==f&&Array.isArray(f)&&(f=AD(null,n,e,f[1],r),f=ug(f,e.attrs,r),function q2(n,e,t,r){n[Zu(t?e.classBindings:e.styleBindings)]=r}(n,e,r,f))}else s=function Y2(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=ug(r,n[s].hostAttrs,t);return ug(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function N2(n,e,t,r,i,s){let a=s?e.classBindings:e.styleBindings,c=Zu(a),f=wd(a);n[r]=t;let w,m=!1;if(Array.isArray(t)?(w=t[1],(null===w||Xl(t,w)>0)&&(m=!0)):w=t,i)if(0!==f){const R=Zu(n[c+1]);n[r+1]=yy(R,c),0!==R&&(n[R+1]=_D(n[R+1],r)),n[c+1]=function O2(n,e){return 131071&n|e<<17}(n[c+1],r)}else n[r+1]=yy(c,0),0!==c&&(n[c+1]=_D(n[c+1],r)),c=r;else n[r+1]=yy(f,0),0===c?c=r:n[f+1]=_D(n[f+1],r),f=r;m&&(n[r+1]=SD(n[r+1])),h_(n,w,r,!0),h_(n,w,r,!1),function P2(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&Xl(s,e)>=0&&(t[r+1]=MD(t[r+1]))}(e,w,n,r,s),a=yy(c,f),s?e.classBindings=a:e.styleBindings=a}(i,s,e,t,a,r)}}(s,n,a,r),e!==_n&&xs(i,a,e)&&function x_(n,e,t,r,i,s,a,c){if(!(3&e.type))return;const f=n.data,m=f[c+1],w=function R2(n){return 1==(1&n)}(m)?E_(f,e,t,i,wd(m),a):void 0;by(w)||(by(s)||function k2(n){return 2==(2&n)}(m)&&(s=E_(f,null,t,i,c,a)),function Ku(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:jr.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=jr.Important),n.setStyle(t,r,i,s))}}(r,a,function Uc(n,e){return _i(e[n])}(Ji(),t),i,s))}(s,s.data[Ji()],i,i[11],n,i[a+1]=function Q2(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=ye(l(n)))),n}(e,t),r,a)}function AD(n,e,t,r,i){let s=null;const a=t.directiveEnd;let c=t.directiveStylingLast;for(-1===c?c=t.directiveStart:c++;c<a&&(s=e[c],r=ug(r,s.hostAttrs,i),s!==n);)c++;return null!==n&&(t.directiveStylingLast=c),r}function ug(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?i=a:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),ws(n,a,!!t||e[++s]))}return void 0===n?null:n}function E_(n,e,t,r,i,s){const a=null===e;let c;for(;i>0;){const f=n[i],m=Array.isArray(f),w=m?f[1]:f,E=null===w;let R=t[i+1];R===_n&&(R=E?ar:void 0);let j=E?Ap(R,r):w===r?R:void 0;if(m&&!by(j)&&(j=Ap(f,r)),by(j)&&(c=j,a))return c;const re=n[i+1];i=a?Zu(re):wd(re)}if(null!==e){let f=s?e.residualClasses:e.residualStyles;null!=f&&(c=Ap(f,r))}return c}function by(n){return void 0!==n}function wy(n,e=""){const t=St(),r=Ln(),i=n+22,s=r.firstCreatePass?Vh(r,i,1,e,null):r.data[i],a=t[i]=function $p(n,e){return n.createText(e)}(t[11],e);Ea(r,t,a,s),So(s,!1)}function ID(n,e,t){const r=St();return xs(r,rl(),e)&&ko(Ln(),Nr(),r,n,e,r[11],t,!0),ID}const Jh="en-US";let W_=Jh;function RD(n,e,t,r,i){if(n=ut(n),Array.isArray(n))for(let s=0;s<n.length;s++)RD(n[s],e,t,r,i);else{const s=Ln(),a=St();let c=_t(n)?n:ut(n.provide),f=vi(n);const m=yr(),w=1048575&m.providerIndexes,E=m.directiveStart,R=m.providerIndexes>>20;if(_t(n)||!n.multi){const j=new Nu(f,i,gt),re=PD(c,e,i?w:w+R,E);-1===re?(hh(ba(m,a),s,c),ND(s,n,e.length),e.push(c),m.directiveStart++,m.directiveEnd++,i&&(m.providerIndexes+=1048576),t.push(j),a.push(j)):(t[re]=j,a[re]=j)}else{const j=PD(c,e,w+R,E),re=PD(c,e,w,w+R),ke=re>=0&&t[re];if(i&&!ke||!i&&!(j>=0&&t[j])){hh(ba(m,a),s,c);const Ve=function gV(n,e,t,r,i){const s=new Nu(n,t,gt);return s.multi=[],s.index=e,s.componentProviders=0,vM(s,i,r&&!t),s}(i?pV:fV,t.length,i,r,f);!i&&ke&&(t[re].providerFactory=Ve),ND(s,n,e.length,0),e.push(c),m.directiveStart++,m.directiveEnd++,i&&(m.providerIndexes+=1048576),t.push(Ve),a.push(Ve)}else ND(s,n,j>-1?j:re,vM(t[i?re:j],f,!i&&r));!i&&r&&ke&&t[re].componentProviders++}}}function ND(n,e,t,r){const i=_t(e),s=function Zt(n){return!!n.useClass}(e);if(i||s){const f=(s?ut(e.useClass):e).prototype.ngOnDestroy;if(f){const m=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const w=m.indexOf(t);-1===w?m.push(t,[r,f]):m[w+1].push(r,f)}else m.push(t,f)}}}function vM(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function PD(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function fV(n,e,t,r){return LD(this.multi,[])}function pV(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const a=this.providerFactory.componentProviders,c=Ul(t,t[1],this.providerFactory.index,r);s=c.slice(0,a),LD(i,s);for(let f=a;f<c.length;f++)s.push(c[f])}else s=[],LD(i,s);return s}function LD(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Mr(n,e=[]){return t=>{t.providersResolver=(r,i)=>function hV(n,e,t){const r=Ln();if(r.firstCreatePass){const i=bs(n);RD(t,r.data,r.blueprint,i,!0),RD(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class Zh{}class yV extends Zh{constructor(e,t,r){super(),this.componentFactoryResolver=new RS(this),this.instance=null;const i=new Pr([...e,{provide:Zh,useValue:this},{provide:Oi,useValue:this.componentFactoryResolver}],t||bn(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function bM(n,e,t=null){return new yV(n,e,t).injector}let bV=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const r=Dn(0,t.type),i=r.length>0?bM([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,i)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=En({token:n,providedIn:"environment",factory:()=>new n(an(wn))}),n})();function gg(n){n.getStandaloneInjector=e=>e.get(bV).getOrCreateStandaloneInjector(n)}function VD(n){return e=>{setTimeout(n,void 0,e)}}const Lr=class $V extends Ne{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),a=r;if(e&&"object"==typeof e){const f=e;i=f.next?.bind(f),s=f.error?.bind(f),a=f.complete?.bind(f)}this.__isAsync&&(s=VD(s),i&&(i=VD(i)),a&&(a=VD(a)));const c=super.subscribe({next:i,error:s,complete:a});return e instanceof N&&e.add(c),c}};function WV(){return this._results[yd()]()}class HD{get changes(){return this._changes||(this._changes=new Lr)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=yd(),r=HD.prototype;r[t]||(r[t]=WV)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const i=function mi(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function bw(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let uu=(()=>{class n{}return n.__NG_ELEMENT_ID__=XV,n})();const qV=uu,YV=class extends qV{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(e,t){const r=this._declarationTContainer.tViews,i=ly(this._declarationLView,r,e,16,null,r.declTNode,null,null,null,null,t||null);i[17]=this._declarationLView[this._declarationTContainer.index];const a=this._declarationLView[19];return null!==a&&(i[19]=a.createEmbeddedView(r)),oD(r,i,e),new ig(i)}};function XV(){return Sy(yr(),St())}function Sy(n,e){return 4&n.type?new YV(e,n,ns(n,e)):null}let vl=(()=>{class n{}return n.__NG_ELEMENT_ID__=KV,n})();function KV(){return RM(yr(),St())}const QV=vl,kM=class extends QV{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return ns(this._hostTNode,this._hostLView)}get injector(){return new Gl(this._hostTNode,this._hostLView)}get parentInjector(){const e=dh(this._hostTNode,this._hostLView);if(Zc(e)){const t=Fu(e,this._hostLView),r=jl(e);return new Gl(t[1].data[r+8],t)}return new Gl(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=OM(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedView(t||{},s);return this.insert(a,i),a}createComponent(e,t,r,i,s){const a=e&&!function rd(n){return"function"==typeof n}(e);let c;if(a)c=t;else{const E=t||{};c=E.index,r=E.injector,i=E.projectableNodes,s=E.environmentInjector||E.ngModuleRef}const f=a?e:new sg(Xn(e)),m=r||this.parentInjector;if(!s&&null==f.ngModule){const R=(a?m:this.parentInjector).get(wn,null);R&&(s=R)}const w=f.create(m,i,void 0,s);return this.insert(w.hostView,c),w}insert(e,t){const r=e._lView,i=r[1];if(function uw(n){return so(n[3])}(r)){const w=this.indexOf(e);if(-1!==w)this.detach(w);else{const E=r[3],R=new kM(E,E[6],E[3]);R.detach(R.indexOf(e))}}const s=this._adjustIndex(t),a=this._lContainer;!function Ii(n,e,t,r){const i=10+r,s=t.length;r>0&&(t[i-1][4]=e),r<s-10?(e[4]=t[i],ju(t,10+r,e)):(t.push(e),e[4]=null),e[3]=t;const a=e[17];null!==a&&t!==a&&function $v(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(a,e);const c=e[19];null!==c&&c.insertView(n),e[2]|=64}(i,r,a,s);const c=Qp(s,a),f=r[11],m=_h(f,a[7]);return null!==m&&function Uw(n,e,t,r,i,s){r[0]=i,r[6]=e,Xu(n,r,t,1,i,s)}(i,a[6],f,r,m,c),e.attachToViewContainerRef(),ju(zD(a),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=OM(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=Sh(this._lContainer,t);r&&(Yl(zD(this._lContainer),t),qp(r[1],r))}detach(e){const t=this._adjustIndex(e,-1),r=Sh(this._lContainer,t);return r&&null!=Yl(zD(this._lContainer),t)?new ig(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function OM(n){return n[8]}function zD(n){return n[8]||(n[8]=[])}function RM(n,e){let t;const r=e[n.index];if(so(r))t=r;else{let i;if(8&n.type)i=_i(r);else{const s=e[11];i=s.createComment("");const a=Ps(n,e);Gi(s,_h(s,a),i,function Xp(n,e){return n.nextSibling(e)}(s,a),!1)}e[n.index]=t=AS(r,e,i,n),cy(e,t)}return new kM(t,n,e)}class jD{constructor(e){this.queryList=e,this.matches=null}clone(){return new jD(this.queryList)}setDirty(){this.queryList.setDirty()}}class UD{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){const a=t.getByIndex(s);i.push(this.queries[a.indexInDeclarationView].clone())}return new UD(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==VM(e,t).matches&&this.queries[t].setDirty()}}class NM{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class GD{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==t?t.push(s):t=[s])}return null!==t?new GD(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class $D{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new $D(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,t,JV(t,s)),this.matchTNodeWithReadOption(e,t,fh(t,e,s,!1,!1))}else r===uu?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,fh(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===ii||i===vl||i===uu&&4&t.type)this.addMatch(t.index,-2);else{const s=fh(t,e,i,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function JV(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function eH(n,e,t,r){return-1===t?function ZV(n,e){return 11&n.type?ns(n,e):4&n.type?Sy(n,e):null}(e,n):-2===t?function tH(n,e,t){return t===ii?ns(e,n):t===uu?Sy(e,n):t===vl?RM(e,n):void 0}(n,e,r):Ul(n,n[1],t,e)}function PM(n,e,t,r){const i=e[19].queries[r];if(null===i.matches){const s=n.data,a=t.matches,c=[];for(let f=0;f<a.length;f+=2){const m=a[f];c.push(m<0?null:eH(e,s[m],a[f+1],t.metadata.read))}i.matches=c}return i.matches}function WD(n,e,t,r){const i=n.queries.getByIndex(t),s=i.matches;if(null!==s){const a=PM(n,e,i,t);for(let c=0;c<s.length;c+=2){const f=s[c];if(f>0)r.push(a[c/2]);else{const m=s[c+1],w=e[-f];for(let E=10;E<w.length;E++){const R=w[E];R[17]===R[3]&&WD(R[1],R,m,r)}if(null!==w[9]){const E=w[9];for(let R=0;R<E.length;R++){const j=E[R];WD(j[1],j,m,r)}}}}}return r}function ef(n){const e=St(),t=Ln(),r=ov();Hl(r+1);const i=VM(t,r);if(n.dirty&&function Sr(n){return 4==(4&n[2])}(e)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const s=i.crossesNgTemplate?WD(t,e,r,[]):PM(t,e,i,r);n.reset(s,Xw),n.notifyOnChanges()}return!0}return!1}function yg(n,e,t){const r=Ln();r.firstCreatePass&&(BM(r,new NM(n,e,t),-1),2==(2&e)&&(r.staticViewQueries=!0)),FM(r,St(),e)}function tf(){return function nH(n,e){return n[19].queries[e].queryList}(St(),ov())}function FM(n,e,t){const r=new HD(4==(4&t));xS(n,e,r,r.destroy),null===e[19]&&(e[19]=new UD),e[19].queries.push(new jD(r))}function BM(n,e,t){null===n.queries&&(n.queries=new GD),n.queries.track(new $D(e,t))}function VM(n,e){return n.queries.getByIndex(e)}function My(...n){}const iA=new Wt("Application Initializer");let Ay=(()=>{class n{constructor(t){this.appInits=t,this.resolve=My,this.reject=My,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(vy(s))t.push(s);else if(JS(s)){const a=new Promise((c,f)=>{s.subscribe({complete:c,error:f})});t.push(a)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(an(iA,8))},n.\u0275prov=En({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const QD=new Wt("AppId",{providedIn:"root",factory:function sA(){return`${JD()}${JD()}${JD()}`}});function JD(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const oA=new Wt("Platform Initializer"),ZD=new Wt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),CH=new Wt("appBootstrapListener"),aA=new Wt("AnimationModuleType"),yl=new Wt("LocaleId",{providedIn:"root",factory:()=>Cu(yl,fn.Optional|fn.SkipSelf)||function SH(){return typeof $localize<"u"&&$localize.locale||Jh}()}),IH=(()=>Promise.resolve(0))();class Xr{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Lr(!1),this.onMicrotaskEmpty=new Lr(!1),this.onStable=new Lr(!1),this.onError=new Lr(!1),typeof Zone>"u")throw new it(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function kH(){let n=hr.requestAnimationFrame,e=hr.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function NH(n){const e=()=>{!function RH(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(hr,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,nx(n),n.isCheckStableRunning=!0,tx(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),nx(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,a,c)=>{try{return cA(n),t.invokeTask(i,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),dA(n)}},onInvoke:(t,r,i,s,a,c,f)=>{try{return cA(n),t.invoke(i,s,a,c,f)}finally{n.shouldCoalesceRunChangeDetection&&e(),dA(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,nx(n),tx(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Xr.isInAngularZone())throw new it(909,!1)}static assertNotInAngularZone(){if(Xr.isInAngularZone())throw new it(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,a=s.scheduleEventTask("NgZoneEvent: "+i,e,OH,My,My);try{return s.runTask(a,t,r)}finally{s.cancelTask(a)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const OH={};function tx(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function nx(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function cA(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function dA(n){n._nesting--,tx(n)}class PH{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Lr,this.onMicrotaskEmpty=new Lr,this.onStable=new Lr,this.onError=new Lr}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const hA=new Wt("");let ec=null;const ox=new Wt("PlatformDestroyListeners");function zH(n){const{rootComponent:e,appProviders:t,platformProviders:r}=n,i=function HH(n=[]){if(ec)return ec;const e=function gA(n=[],e){return au.create({name:e,providers:[{provide:Fn,useValue:"platform"},{provide:ox,useValue:new Set([()=>ec=null])},...n]})}(n);return ec=e,function pA(n){const e=n.get(oA,null);e&&e.forEach(t=>t())}(e),e}(r),s=function yA(n,e){let t;return t="noop"===n?new PH:("zone.js"===n?void 0:n)||new Xr(e),t}("zone.js",function vA(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}());return s.run(()=>{const c=bM([{provide:Xr,useValue:s},...t||[]],i,"Environment Injector"),f=c.get(qo,null);let m;s.runOutsideAngular(()=>{m=s.onError.subscribe({next:R=>{f.handleError(R)}})});const w=()=>c.destroy(),E=i.get(ox);return E.add(w),c.onDestroy(()=>{m.unsubscribe(),E.delete(w)}),function bA(n,e,t){try{const r=t();return vy(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(f,s,()=>{const R=c.get(Ay);return R.runInitializers(),R.donePromise.then(()=>{!function q_(n){ri(n,"Expected localeId to be defined"),"string"==typeof n&&(W_=n.toLowerCase().replace(/_/g,"-"))}(c.get(yl,Jh)||Jh);const re=c.get(lx);return void 0!==e&&re.bootstrap(e),re})})})}let lx=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(t,r,i){this._zone=t,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new Te(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),a=new Te(c=>{let f;this._zone.runOutsideAngular(()=>{f=this._zone.onStable.subscribe(()=>{Xr.assertNotInAngularZone(),function ex(n){typeof Zone>"u"?IH.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const m=this._zone.onUnstable.subscribe(()=>{Xr.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{f.unsubscribe(),m.unsubscribe()}});this.isStable=function Xf(...n){const e=Ga(n),t=function Yf(n,e){return"number"==typeof gs(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Ts(r[0]):wu(t)($a(r,e)):gr}(s,a.pipe(ua()))}bootstrap(t,r){const i=t instanceof iu;if(!this._injector.get(Ay).done)throw!i&&function Bc(n){const e=Xn(n)||qr(n)||hi(n);return null!==e&&e.standalone}(t),new it(405,false);let a;a=i?t:this._injector.get(Oi).resolveComponentFactory(t),this.componentTypes.push(a.componentType);const c=function BH(n){return n.isBoundToModule}(a)?void 0:this._injector.get(Zh),m=a.create(au.NULL,[],r||a.selector,c),w=m.location.nativeElement,E=m.injector.get(hA,null);return E?.registerApplication(w),m.onDestroy(()=>{this.detachView(m.hostView),Iy(this.components,m),E?.unregisterApplication(w)}),this._loadComponent(m),m}tick(){if(this._runningTick)throw new it(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;Iy(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(CH,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Iy(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new it(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(an(Xr),an(wn),an(qo))},n.\u0275prov=En({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Iy(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let ky=(()=>{class n{}return n.__NG_ELEMENT_ID__=GH,n})();function GH(n){return function $H(n,e,t){if(zc(n)&&!t){const r=Kn(n.index,e);return new ig(r,r)}return 47&n.type?new ig(e[16],e):null}(yr(),St(),16==(16&n))}class SA{constructor(){}supports(e){return gy(e)}create(e){return new QH(e)}}const KH=(n,e)=>e;class QH{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||KH}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const a=!r||t&&t.currentIndex<MA(r,i,s)?t:r,c=MA(a,i,s),f=a.currentIndex;if(a===r)i--,r=r._nextRemoved;else if(t=t._next,null==a.previousIndex)i++;else{s||(s=[]);const m=c-i,w=f-i;if(m!=w){for(let R=0;R<m;R++){const j=R<s.length?s[R]:s[R]=0,re=j+R;w<=re&&re<m&&(s[R]=j+1)}s[a.previousIndex]=w-m}}c!==f&&e(a,c,f)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!gy(e))throw new it(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,a,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let c=0;c<this.length;c++)s=e[c],a=this._trackByFn(c,s),null!==t&&Object.is(t.trackById,a)?(r&&(t=this._verifyReinsertion(t,s,a,c)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,a,c),r=!0),t=t._next}else i=0,function x2(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[yd()]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,c=>{a=this._trackByFn(i,c),null!==t&&Object.is(t.trackById,a)?(r&&(t=this._verifyReinsertion(t,c,a,i)),Object.is(t.item,c)||this._addIdentityChange(t,c)):(t=this._mismatch(t,c,a,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new JH(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new _A),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new _A),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class JH{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ZH{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class _A{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new ZH,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function MA(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function TA(){return new Ny([new SA])}let Ny=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||TA()),deps:[[n,new sd,new Kl]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new it(901,!1)}}return n.\u0275prov=En({token:n,providedIn:"root",factory:TA}),n})(),px=null;function Ed(){return px}class a3{}const ui=new Wt("DocumentToken");class X3{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let UA=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,a)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new X3(i.item,this._ngForOf,-1,-1),null===a?void 0:a);else if(null==a)r.remove(null===s?void 0:s);else if(null!==s){const c=r.get(s);r.move(c,a),GA(c,i)}});for(let i=0,s=r.length;i<s;i++){const c=r.get(i).context;c.index=i,c.count=s,c.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{GA(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(gt(vl),gt(uu),gt(Ny))},n.\u0275dir=hn({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function GA(n,e){n.context.$implicit=e.item}let $A=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Q3,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){WA("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){WA("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(gt(vl),gt(uu))},n.\u0275dir=hn({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Q3{constructor(){this.$implicit=null,this.ngIf=null}}function WA(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${ye(e)}'.`)}let sf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vs({type:n}),n.\u0275inj=Or({}),n})();const XA="browser";class ej extends a3{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ox extends ej{static makeCurrent(){!function o3(n){px||(px=n)}(new Ox)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function tj(){return Cg=Cg||document.querySelector("base"),Cg?Cg.getAttribute("href"):null}();return null==t?null:function nj(n){$y=$y||document.createElement("a"),$y.setAttribute("href",n);const e=$y.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Cg=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function W3(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let $y,Cg=null,oj=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=En({token:n,factory:n.\u0275fac}),n})();const Wy=new Wt("EventManagerPlugins");let qy=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const a=i[s];if(a.supports(t))return this._eventNameToPlugin.set(t,a),a}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(an(Wy),an(Xr))},n.\u0275prov=En({token:n,factory:n.\u0275fac}),n})();class tT{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=Ed().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let nT=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=En({token:n,factory:n.\u0275fac}),n})(),Sg=(()=>{class n extends nT{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const a=this._doc.createElement("style");a.textContent=s,i.push(r.appendChild(a))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(rT),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(rT))}}return n.\u0275fac=function(t){return new(t||n)(an(ui))},n.\u0275prov=En({token:n,factory:n.\u0275fac}),n})();function rT(n){Ed().remove(n)}const Rx={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Nx=/%COMP%/g;function Px(n,e){return e.flat(100).map(t=>t.replace(Nx,n))}function oT(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Lx=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Fx(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case zo.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new hj(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case zo.ShadowDom:return new fj(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Px(r.id,r.styles);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(an(qy),an(Sg),an(QD))},n.\u0275prov=En({token:n,factory:n.\u0275fac}),n})();class Fx{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Rx[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(lT(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(lT(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=Rx[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Rx[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(jr.DashCase|jr.Important)?e.style.setProperty(t,r,i&jr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&jr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,oT(r)):this.eventManager.addEventListener(e,t,oT(r))}}function lT(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class hj extends Fx{constructor(e,t,r,i){super(e),this.component=r;const s=Px(i+"-"+r.id,r.styles);t.addStyles(s),this.contentAttr=function uj(n){return"_ngcontent-%COMP%".replace(Nx,n)}(i+"-"+r.id),this.hostAttr=function cj(n){return"_nghost-%COMP%".replace(Nx,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class fj extends Fx{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Px(i.id,i.styles);for(let a=0;a<s.length;a++){const c=document.createElement("style");c.textContent=s[a],this.shadowRoot.appendChild(c)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}const uT=["alt","control","meta","shift"],gj={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},mj={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};function dT(n){return{appProviders:[...Sj,...n?.providers??[]],platformProviders:xj}}const xj=[{provide:ZD,useValue:XA},{provide:oA,useValue:function bj(){Ox.makeCurrent()},multi:!0},{provide:ui,useFactory:function Dj(){return function ny(n){eg=n}(document),document},deps:[]}],Sj=[{provide:Fn,useValue:"root"},{provide:qo,useFactory:function wj(){return new qo},deps:[]},{provide:Wy,useClass:(()=>{class n extends tT{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(an(ui))},n.\u0275prov=En({token:n,factory:n.\u0275fac}),n})(),multi:!0,deps:[ui,Xr,ZD]},{provide:Wy,useClass:(()=>{class n extends tT{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ed().onAndCancel(t,s.domEventName,a))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),uT.forEach(m=>{const w=r.indexOf(m);w>-1&&(r.splice(w,1),a+=m+".")}),a+=s,0!=r.length||0===s.length)return null;const f={};return f.domEventName=i,f.fullKey=a,f}static matchEventFullKeyCode(t,r){let i=gj[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),uT.forEach(a=>{a!==i&&(0,mj[a])(t)&&(s+=a+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(an(ui))},n.\u0275prov=En({token:n,factory:n.\u0275fac}),n})(),multi:!0,deps:[ui]},{provide:Lx,useClass:Lx,deps:[qy,Sg,QD]},{provide:sy,useExisting:Lx},{provide:nT,useExisting:Sg},{provide:Sg,useClass:Sg,deps:[ui]},{provide:qy,useClass:qy,deps:[Wy,Xr]},{provide:class Mz{},useClass:oj,deps:[]},[]];typeof window<"u"&&window;let Vx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=En({token:n,factory:function(t){let r=null;return r=t?new(t||n):an(pT),r},providedIn:"root"}),n})(),pT=(()=>{class n extends Vx{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case Je.NONE:return r;case Je.HTML:return d(r,"HTML")?l(r):tt(this._doc,String(r)).toString();case Je.STYLE:return d(r,"Style")?l(r):r;case Je.SCRIPT:if(d(r,"Script"))return l(r);throw new Error("unsafe value used in a script context");case Je.URL:return d(r,"URL")?l(r):V(String(r));case Je.RESOURCE_URL:if(d(r,"ResourceURL"))return l(r);throw new Error(`unsafe value used in a resource URL context (see ${un})`);default:throw new Error(`Unexpected SecurityContext ${t} (see ${un})`)}}bypassSecurityTrustHtml(t){return function p(n){return new tu(n)}(t)}bypassSecurityTrustStyle(t){return function g(n){return new Yw(n)}(t)}bypassSecurityTrustScript(t){return function v(n){return new nu(n)}(t)}bypassSecurityTrustUrl(t){return function b(n){return new u(n)}(t)}bypassSecurityTrustResourceUrl(t){return function y(n){return new o(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(an(ui))},n.\u0275prov=En({token:n,factory:function(t){let r=null;return r=t?new t:function Nj(n){return new pT(n.get(ui))}(an(au)),r},providedIn:"root"}),n})();class Pj extends N{constructor(e,t){super()}schedule(e,t=0){return this}}const Yy={setInterval(n,e,...t){const{delegate:r}=Yy;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=Yy;return(e?.clearInterval||clearInterval)(n)},delegate:void 0},gT={now:()=>(gT.delegate||Date).now(),delegate:void 0};class _g{constructor(e,t=_g.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}_g.now=gT.now;const Bj=new class Fj extends _g{constructor(e,t=_g.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}(class Lj extends Pj{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Yy.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&Yy.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,S(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}});function Hx(n,e=Bj){return ft((t,r)=>{let i=null,s=null,a=null;const c=()=>{if(i){i.unsubscribe(),i=null;const m=s;s=null,r.next(m)}};function f(){const m=a+n,w=e.now();if(w<m)return i=this.schedule(void 0,m-w),void r.add(i);c()}t.subscribe(ot(r,m=>{s=m,a=e.now(),i||(i=e.schedule(f,n),r.add(i))},()=>{c(),r.complete()},void 0,()=>{s=i=null}))})}const Vj=["gutterEls"];function Hj(n,e){if(1&n){const t=function KS(){return St()}();yi(0,"div",2,3),bi("keydown",function(i){el(t);const s=Oo().index;return Co(Oo().startKeyboardDrag(i,2*s+1,s+1))})("mousedown",function(i){el(t);const s=Oo().index;return Co(Oo().startMouseDrag(i,2*s+1,s+1))})("touchstart",function(i){el(t);const s=Oo().index;return Co(Oo().startMouseDrag(i,2*s+1,s+1))})("mouseup",function(i){el(t);const s=Oo().index;return Co(Oo().clickGutter(i,s+1))})("touchend",function(i){el(t);const s=Oo().index;return Co(Oo().clickGutter(i,s+1))}),Ma(2,"div",4),Wi()}if(2&n){const t=Oo(),r=t.index,i=t.$implicit,s=Oo();lg("flex-basis",s.gutterSize,"px")("order",2*r+1),uo("aria-label",s.gutterAriaLabel)("aria-orientation",s.direction)("aria-valuemin",i.minSize)("aria-valuemax",i.maxSize)("aria-valuenow",i.size)("aria-valuetext",s.getAriaAreaSizeText(i.size))}}function zj(n,e){1&n&&wD(0,Hj,3,10,"div",1),2&n&&co("ngIf",!1===e.last)}const jj=["*"];function Mg(n){if(void 0!==n.changedTouches&&n.changedTouches.length>0)return{x:n.changedTouches[0].clientX,y:n.changedTouches[0].clientY};if(void 0!==n.clientX&&void 0!==n.clientY)return{x:n.clientX,y:n.clientY};if(void 0!==n.currentTarget){const e=n.currentTarget;return{x:e.offsetLeft,y:e.offsetTop}}return null}function mT(n,e,t){return Math.abs(n.x-e.x)<=t&&Math.abs(n.y-e.y)<=t}function vT(n,e){const t=n.nativeElement.getBoundingClientRect();return"horizontal"===e?t.width:t.height}function Ag(n){return"boolean"==typeof n?n:"false"!==n}function nc(n,e){return null==n?e:(n=Number(n),!isNaN(n)&&n>=0?n:e)}function yT(n,e){if("percent"===n){const t=e.reduce((r,i)=>null!==i?r+i:r,0);return e.every(r=>null!==r)&&t>99.9&&t<100.1}if("pixel"===n)return 1===e.filter(t=>null===t).length}function Xy(n){return null===n.size?null:!0===n.component.lockSize?n.size:null===n.component.minSize?null:n.component.minSize>n.size?n.size:n.component.minSize}function Ky(n){return null===n.size?null:!0===n.component.lockSize?n.size:null===n.component.maxSize?null:n.component.maxSize<n.size?n.size:n.component.maxSize}function of(n,e,t,r){return e.reduce((i,s)=>{const a=function Gj(n,e,t,r){return 0===t?{areaSnapshot:e,pixelAbsorb:0,percentAfterAbsorption:e.sizePercentAtStart,pixelRemain:0}:0===e.sizePixelAtStart&&t<0?{areaSnapshot:e,pixelAbsorb:0,percentAfterAbsorption:0,pixelRemain:t}:"percent"===n?function $j(n,e,t){const i=(n.sizePixelAtStart+e)/t*100;if(e>0){if(null!==n.area.maxSize&&i>n.area.maxSize){const s=n.area.maxSize/100*t;return{areaSnapshot:n,pixelAbsorb:s,percentAfterAbsorption:n.area.maxSize,pixelRemain:n.sizePixelAtStart+e-s}}return{areaSnapshot:n,pixelAbsorb:e,percentAfterAbsorption:i>100?100:i,pixelRemain:0}}if(e<0){if(null!==n.area.minSize&&i<n.area.minSize){const s=n.area.minSize/100*t;return{areaSnapshot:n,pixelAbsorb:s,percentAfterAbsorption:n.area.minSize,pixelRemain:n.sizePixelAtStart+e-s}}return i<0?{areaSnapshot:n,pixelAbsorb:-n.sizePixelAtStart,percentAfterAbsorption:0,pixelRemain:e+n.sizePixelAtStart}:{areaSnapshot:n,pixelAbsorb:e,percentAfterAbsorption:i,pixelRemain:0}}}(e,t,r):"pixel"===n?function Wj(n,e,t){const r=n.sizePixelAtStart+e;return e>0?null!==n.area.maxSize&&r>n.area.maxSize?{areaSnapshot:n,pixelAbsorb:n.area.maxSize-n.sizePixelAtStart,percentAfterAbsorption:-1,pixelRemain:r-n.area.maxSize}:{areaSnapshot:n,pixelAbsorb:e,percentAfterAbsorption:-1,pixelRemain:0}:e<0?null!==n.area.minSize&&r<n.area.minSize?{areaSnapshot:n,pixelAbsorb:n.area.minSize+e-r,percentAfterAbsorption:-1,pixelRemain:r-n.area.minSize}:r<0?{areaSnapshot:n,pixelAbsorb:-n.sizePixelAtStart,percentAfterAbsorption:-1,pixelRemain:e+n.sizePixelAtStart}:{areaSnapshot:n,pixelAbsorb:e,percentAfterAbsorption:-1,pixelRemain:0}:void 0}(e,t):void 0}(n,s,i.remain,r);return i.list.push(a),i.remain=a.pixelRemain,i},{remain:t,list:[]})}function bT(n,e){"percent"===n?e.areaSnapshot.area.size=e.percentAfterAbsorption:"pixel"===n&&null!==e.areaSnapshot.area.size&&(e.areaSnapshot.area.size=e.areaSnapshot.sizePixelAtStart+e.pixelAbsorb)}const qj=new Wt("angular-split-global-config");let zx,wT=(()=>{class n{set direction(t){this._direction="vertical"===t?"vertical":"horizontal",this.renderer.addClass(this.elRef.nativeElement,`as-${this._direction}`),this.renderer.removeClass(this.elRef.nativeElement,"as-"+("vertical"===this._direction?"horizontal":"vertical")),this.build(!1,!1)}get direction(){return this._direction}set unit(t){this._unit="pixel"===t?"pixel":"percent",this.renderer.addClass(this.elRef.nativeElement,`as-${this._unit}`),this.renderer.removeClass(this.elRef.nativeElement,"as-"+("pixel"===this._unit?"percent":"pixel")),this.build(!1,!0)}get unit(){return this._unit}set gutterSize(t){this._gutterSize=nc(t,11),this.build(!1,!1)}get gutterSize(){return this._gutterSize}set gutterStep(t){this._gutterStep=nc(t,1)}get gutterStep(){return this._gutterStep}set restrictMove(t){this._restrictMove=Ag(t)}get restrictMove(){return this._restrictMove}set useTransition(t){this._useTransition=Ag(t),this._useTransition?this.renderer.addClass(this.elRef.nativeElement,"as-transition"):this.renderer.removeClass(this.elRef.nativeElement,"as-transition")}get useTransition(){return this._useTransition}set disabled(t){this._disabled=Ag(t),this._disabled?this.renderer.addClass(this.elRef.nativeElement,"as-disabled"):this.renderer.removeClass(this.elRef.nativeElement,"as-disabled")}get disabled(){return this._disabled}set dir(t){this._dir="rtl"===t?"rtl":"ltr",this.renderer.setAttribute(this.elRef.nativeElement,"dir",this._dir)}get dir(){return this._dir}set gutterDblClickDuration(t){this._gutterDblClickDuration=nc(t,0)}get gutterDblClickDuration(){return this._gutterDblClickDuration}get transitionEnd(){return new Te(t=>this.transitionEndSubscriber=t).pipe(Hx(20))}constructor(t,r,i,s,a){this.ngZone=t,this.elRef=r,this.cdRef=i,this.renderer=s,this.gutterClickDeltaPx=2,this._config={direction:"horizontal",unit:"percent",gutterSize:11,gutterStep:1,restrictMove:!1,useTransition:!1,disabled:!1,dir:"ltr",gutterDblClickDuration:0},this.dragStart=new Lr(!1),this.dragEnd=new Lr(!1),this.gutterClick=new Lr(!1),this.gutterDblClick=new Lr(!1),this.dragProgressSubject=new Ne,this.dragProgress$=this.dragProgressSubject.asObservable(),this.isDragging=!1,this.isWaitingClear=!1,this.isWaitingInitialMove=!1,this.dragListeners=[],this.snapshot=null,this.startPoint=null,this.endPoint=null,this.displayedAreas=[],this.hiddenAreas=[],this._clickTimeout=null,this.direction=this._direction,this._config=a?Object.assign(this._config,a):this._config,Object.keys(this._config).forEach(c=>{this[c]=this._config[c]})}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>{setTimeout(()=>this.renderer.addClass(this.elRef.nativeElement,"as-init"))})}getNbGutters(){return 0===this.displayedAreas.length?0:this.displayedAreas.length-1}addArea(t){const r={component:t,order:0,size:0,minSize:null,maxSize:null,sizeBeforeCollapse:null,gutterBeforeCollapse:0};!0===t.visible?(this.displayedAreas.push(r),this.build(!0,!0)):this.hiddenAreas.push(r)}removeArea(t){if(this.displayedAreas.some(r=>r.component===t)){const r=this.displayedAreas.find(i=>i.component===t);this.displayedAreas.splice(this.displayedAreas.indexOf(r),1),this.build(!0,!0)}else if(this.hiddenAreas.some(r=>r.component===t)){const r=this.hiddenAreas.find(i=>i.component===t);this.hiddenAreas.splice(this.hiddenAreas.indexOf(r),1)}}updateArea(t,r,i){!0===t.visible&&this.build(r,i)}showArea(t){const r=this.hiddenAreas.find(s=>s.component===t);if(void 0===r)return;const i=this.hiddenAreas.splice(this.hiddenAreas.indexOf(r),1);this.displayedAreas.push(...i),this.build(!0,!0)}hideArea(t){const r=this.displayedAreas.find(s=>s.component===t);if(void 0===r)return;const i=this.displayedAreas.splice(this.displayedAreas.indexOf(r),1);i.forEach(s=>{s.order=0,s.size=0}),this.hiddenAreas.push(...i),this.build(!0,!0)}getVisibleAreaSizes(){return this.displayedAreas.map(t=>null===t.size?"*":t.size)}setVisibleAreaSizes(t){if(t.length!==this.displayedAreas.length)return!1;const r=t.map(s=>nc(s,null));return!1!==yT(this.unit,r)&&(this.displayedAreas.forEach((s,a)=>s.component._size=r[a]),this.build(!1,!0),!0)}build(t,r){if(this.stopDragging(),!0===t&&(this.displayedAreas.every(i=>null!==i.component.order)&&this.displayedAreas.sort((i,s)=>i.component.order-s.component.order),this.displayedAreas.forEach((i,s)=>{i.order=2*s,i.component.setStyleOrder(i.order)})),!0===r){const i=yT(this.unit,this.displayedAreas.map(s=>s.component.size));switch(this.unit){case"percent":{const s=100/this.displayedAreas.length;this.displayedAreas.forEach(a=>{a.size=i?a.component.size:s,a.minSize=Xy(a),a.maxSize=Ky(a)});break}case"pixel":if(i)this.displayedAreas.forEach(s=>{s.size=s.component.size,s.minSize=Xy(s),s.maxSize=Ky(s)});else{const s=this.displayedAreas.filter(a=>null===a.component.size);if(0===s.length&&this.displayedAreas.length>0)this.displayedAreas.forEach((a,c)=>{a.size=0===c?null:a.component.size,a.minSize=0===c?null:Xy(a),a.maxSize=0===c?null:Ky(a)});else if(s.length>1){let a=!1;this.displayedAreas.forEach(c=>{null===c.component.size?!1===a?(c.size=null,c.minSize=null,c.maxSize=null,a=!0):(c.size=100,c.minSize=null,c.maxSize=null):(c.size=c.component.size,c.minSize=Xy(c),c.maxSize=Ky(c))})}}}}this.refreshStyleSizes(),this.cdRef.markForCheck()}refreshStyleSizes(){if("percent"===this.unit)if(1===this.displayedAreas.length)this.displayedAreas[0].component.setStyleFlex(0,0,"100%",!1,!1);else{const t=this.getNbGutters()*this.gutterSize;this.displayedAreas.forEach(r=>{r.component.setStyleFlex(0,0,`calc( ${r.size}% - ${r.size/100*t}px )`,null!==r.minSize&&r.minSize===r.size,null!==r.maxSize&&r.maxSize===r.size)})}else"pixel"===this.unit&&this.displayedAreas.forEach(t=>{null===t.size?t.component.setStyleFlex(1,1,1===this.displayedAreas.length?"100%":"auto",!1,!1):1===this.displayedAreas.length?t.component.setStyleFlex(0,0,"100%",!1,!1):t.component.setStyleFlex(0,0,`${t.size}px`,null!==t.minSize&&t.minSize===t.size,null!==t.maxSize&&t.maxSize===t.size)})}clickGutter(t,r){const i=Mg(t);this.startPoint&&mT(this.startPoint,i,this.gutterClickDeltaPx)&&(!this.isDragging||this.isWaitingInitialMove)&&(null!==this._clickTimeout?(window.clearTimeout(this._clickTimeout),this._clickTimeout=null,this.notify("dblclick",r),this.stopDragging()):this._clickTimeout=window.setTimeout(()=>{this._clickTimeout=null,this.notify("click",r),this.stopDragging()},this.gutterDblClickDuration))}startKeyboardDrag(t,r,i){if(!0===this.disabled||!0===this.isWaitingClear)return;const s=function Uj(n,e){if("horizontal"===e)switch(n.key){case"ArrowLeft":case"ArrowRight":case"PageUp":case"PageDown":break;default:return null}if("vertical"===e)switch(n.key){case"ArrowUp":case"ArrowDown":case"PageUp":case"PageDown":break;default:return null}const t=n.currentTarget,r="PageUp"===n.key||"PageDown"===n.key?500:50;let i=t.offsetLeft,s=t.offsetTop;switch(n.key){case"ArrowLeft":i-=r;break;case"ArrowRight":i+=r;break;case"ArrowUp":s-=r;break;case"ArrowDown":s+=r;break;case"PageUp":"vertical"===e?s-=r:i+=r;break;case"PageDown":"vertical"===e?s+=r:i-=r;break;default:return null}return{x:i,y:s}}(t,this.direction);null!==s&&(this.endPoint=s,this.startPoint=Mg(t),t.preventDefault(),t.stopPropagation(),this.setupForDragEvent(r,i),this.startDragging(),this.drag(),this.stopDragging())}startMouseDrag(t,r,i){t.preventDefault(),t.stopPropagation(),this.startPoint=Mg(t),null!==this.startPoint&&!0!==this.disabled&&!0!==this.isWaitingClear&&(this.setupForDragEvent(r,i),this.dragListeners.push(this.renderer.listen("document","mouseup",this.stopDragging.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchend",this.stopDragging.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchcancel",this.stopDragging.bind(this))),this.ngZone.runOutsideAngular(()=>{this.dragListeners.push(this.renderer.listen("document","mousemove",this.mouseDragEvent.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchmove",this.mouseDragEvent.bind(this)))}),this.startDragging())}setupForDragEvent(t,r){this.snapshot={gutterNum:r,lastSteppedOffset:0,allAreasSizePixel:vT(this.elRef,this.direction)-this.getNbGutters()*this.gutterSize,allInvolvedAreasSizePercent:100,areasBeforeGutter:[],areasAfterGutter:[]},this.displayedAreas.forEach(i=>{const s={area:i,sizePixelAtStart:vT(i.component.elRef,this.direction),sizePercentAtStart:"percent"===this.unit?i.size:-1};i.order<t?!0===this.restrictMove?this.snapshot.areasBeforeGutter=[s]:this.snapshot.areasBeforeGutter.unshift(s):i.order>t&&(!0===this.restrictMove?0===this.snapshot.areasAfterGutter.length&&(this.snapshot.areasAfterGutter=[s]):this.snapshot.areasAfterGutter.push(s))}),this.snapshot.allInvolvedAreasSizePercent=[...this.snapshot.areasBeforeGutter,...this.snapshot.areasAfterGutter].reduce((i,s)=>i+s.sizePercentAtStart,0)}startDragging(){this.displayedAreas.forEach(t=>t.component.lockEvents()),this.isDragging=!0,this.isWaitingInitialMove=!0}mouseDragEvent(t){t.preventDefault(),t.stopPropagation();const r=Mg(t);null!==this._clickTimeout&&!mT(this.startPoint,r,this.gutterClickDeltaPx)&&(window.clearTimeout(this._clickTimeout),this._clickTimeout=null),!1!==this.isDragging&&(this.endPoint=Mg(t),null!==this.endPoint&&this.drag())}drag(){if(this.isWaitingInitialMove){if(this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y)return;this.ngZone.run(()=>{this.isWaitingInitialMove=!1,this.renderer.addClass(this.elRef.nativeElement,"as-dragging"),this.renderer.addClass(this.gutterEls.toArray()[this.snapshot.gutterNum-1].nativeElement,"as-dragged"),this.notify("start",this.snapshot.gutterNum)})}let t="horizontal"===this.direction?this.startPoint.x-this.endPoint.x:this.startPoint.y-this.endPoint.y;"rtl"===this.dir&&"horizontal"===this.direction&&(t=-t);const r=Math.round(t/this.gutterStep)*this.gutterStep;if(r===this.snapshot.lastSteppedOffset)return;this.snapshot.lastSteppedOffset=r;let i=of(this.unit,this.snapshot.areasBeforeGutter,-r,this.snapshot.allAreasSizePixel),s=of(this.unit,this.snapshot.areasAfterGutter,r,this.snapshot.allAreasSizePixel);if(0!==i.remain&&0!==s.remain?Math.abs(i.remain)===Math.abs(s.remain)||(Math.abs(i.remain)>Math.abs(s.remain)?s=of(this.unit,this.snapshot.areasAfterGutter,r+i.remain,this.snapshot.allAreasSizePixel):i=of(this.unit,this.snapshot.areasBeforeGutter,-(r-s.remain),this.snapshot.allAreasSizePixel)):0!==i.remain?s=of(this.unit,this.snapshot.areasAfterGutter,r+i.remain,this.snapshot.allAreasSizePixel):0!==s.remain&&(i=of(this.unit,this.snapshot.areasBeforeGutter,-(r-s.remain),this.snapshot.allAreasSizePixel)),"percent"===this.unit){const a=[...i.list,...s.list],c=a.find(f=>0!==f.percentAfterAbsorption&&f.percentAfterAbsorption!==f.areaSnapshot.area.minSize&&f.percentAfterAbsorption!==f.areaSnapshot.area.maxSize);c&&(c.percentAfterAbsorption=this.snapshot.allInvolvedAreasSizePercent-a.filter(f=>f!==c).reduce((f,m)=>f+m.percentAfterAbsorption,0))}i.list.forEach(a=>bT(this.unit,a)),s.list.forEach(a=>bT(this.unit,a)),this.refreshStyleSizes(),this.notify("progress",this.snapshot.gutterNum)}stopDragging(t){if(t&&(t.preventDefault(),t.stopPropagation()),!1!==this.isDragging){for(this.displayedAreas.forEach(r=>r.component.unlockEvents());this.dragListeners.length>0;){const r=this.dragListeners.pop();r&&r()}this.isDragging=!1,!1===this.isWaitingInitialMove&&this.notify("end",this.snapshot.gutterNum),this.renderer.removeClass(this.elRef.nativeElement,"as-dragging"),this.renderer.removeClass(this.gutterEls.toArray()[this.snapshot.gutterNum-1].nativeElement,"as-dragged"),this.snapshot=null,this.isWaitingClear=!0,this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.startPoint=null,this.endPoint=null,this.isWaitingClear=!1})})}}notify(t,r){const i=this.getVisibleAreaSizes();"start"===t?this.dragStart.emit({gutterNum:r,sizes:i}):"end"===t?this.dragEnd.emit({gutterNum:r,sizes:i}):"click"===t?this.gutterClick.emit({gutterNum:r,sizes:i}):"dblclick"===t?this.gutterDblClick.emit({gutterNum:r,sizes:i}):"transitionEnd"===t?this.transitionEndSubscriber&&this.ngZone.run(()=>this.transitionEndSubscriber.next(i)):"progress"===t&&this.dragProgressSubject.next({gutterNum:r,sizes:i})}ngOnDestroy(){this.stopDragging()}collapseArea(t,r,i){const s=this.displayedAreas.find(f=>f.component===t);if(void 0===s)return;const a="right"===i?1:-1;s.sizeBeforeCollapse||(s.sizeBeforeCollapse=s.size,s.gutterBeforeCollapse=a),s.size=r;const c=this.gutterEls.find(f=>f.nativeElement.style.order===`${s.order+a}`);c&&this.renderer.addClass(c.nativeElement,"as-split-gutter-collapsed"),this.updateArea(t,!1,!1)}expandArea(t){const r=this.displayedAreas.find(s=>s.component===t);if(void 0===r||!r.sizeBeforeCollapse)return;r.size=r.sizeBeforeCollapse,r.sizeBeforeCollapse=null;const i=this.gutterEls.find(s=>s.nativeElement.style.order===`${r.order+r.gutterBeforeCollapse}`);i&&this.renderer.removeClass(i.nativeElement,"as-split-gutter-collapsed"),this.updateArea(t,!1,!1)}getAriaAreaSizeText(t){return null===t?null:t.toFixed(0)+" "+this.unit}}return n.\u0275fac=function(t){return new(t||n)(gt(Xr),gt(ii),gt(ky),gt(Sa),gt(qj,8))},n.\u0275cmp=Do({type:n,selectors:[["as-split"]],viewQuery:function(t,r){if(1&t&&yg(Vj,5),2&t){let i;ef(i=tf())&&(r.gutterEls=i)}},inputs:{direction:"direction",unit:"unit",gutterSize:"gutterSize",gutterStep:"gutterStep",restrictMove:"restrictMove",useTransition:"useTransition",disabled:"disabled",dir:"dir",gutterDblClickDuration:"gutterDblClickDuration",gutterClickDeltaPx:"gutterClickDeltaPx",gutterAriaLabel:"gutterAriaLabel"},outputs:{transitionEnd:"transitionEnd",dragStart:"dragStart",dragEnd:"dragEnd",gutterClick:"gutterClick",gutterDblClick:"gutterDblClick"},exportAs:["asSplit"],ngContentSelectors:jj,decls:2,vars:1,consts:[["ngFor","",3,"ngForOf"],["role","slider","tabindex","0","class","as-split-gutter",3,"flex-basis","order","keydown","mousedown","touchstart","mouseup","touchend",4,"ngIf"],["role","slider","tabindex","0",1,"as-split-gutter",3,"keydown","mousedown","touchstart","mouseup","touchend"],["gutterEls",""],[1,"as-split-gutter-icon"]],template:function(t,r){1&t&&(ag(),Xh(0),wD(1,zj,1,1,"ng-template",0)),2&t&&(Yo(1),co("ngForOf",r.displayedAreas))},dependencies:[UA,$A],styles:["[_nghost-%COMP%]{display:flex;flex-wrap:nowrap;justify-content:flex-start;align-items:stretch;overflow:hidden;width:100%;height:100%}[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{border:none;flex-grow:0;flex-shrink:0;background-color:#eee;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%] > .as-split-gutter.as-split-gutter-collapsed[_ngcontent-%COMP%]{flex-basis:1px!important;pointer-events:none}[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%] > .as-split-gutter-icon[_ngcontent-%COMP%]{width:100%;height:100%;background-position:center center;background-repeat:no-repeat}[_nghost-%COMP%]    >.as-split-area{flex-grow:0;flex-shrink:0;overflow-x:hidden;overflow-y:auto}[_nghost-%COMP%]    >.as-split-area.as-hidden{flex:0 1 0px!important;overflow-x:hidden;overflow-y:hidden}.as-horizontal[_nghost-%COMP%]{flex-direction:row}.as-horizontal[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{flex-direction:row;cursor:col-resize;height:100%}.as-horizontal[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%] > .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==)}.as-horizontal[_nghost-%COMP%]    >.as-split-area{height:100%}.as-vertical[_nghost-%COMP%]{flex-direction:column}.as-vertical[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{flex-direction:column;cursor:row-resize;width:100%}.as-vertical[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]   .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAFCAMAAABl/6zIAAAABlBMVEUAAADMzMzIT8AyAAAAAXRSTlMAQObYZgAAABRJREFUeAFjYGRkwIMJSeMHlBkOABP7AEGzSuPKAAAAAElFTkSuQmCC)}.as-vertical[_nghost-%COMP%]    >.as-split-area{width:100%}.as-vertical[_nghost-%COMP%]    >.as-split-area.as-hidden{max-width:0}.as-disabled[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{cursor:default}.as-disabled[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]   .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==)}.as-transition.as-init[_nghost-%COMP%]:not(.as-dragging) > .as-split-gutter[_ngcontent-%COMP%], .as-transition.as-init[_nghost-%COMP%]:not(.as-dragging)    >.as-split-area{transition:flex-basis .3s}"],changeDetection:0}),n})(),Yj=(()=>{class n{set order(t){this._order=nc(t,null),this.split.updateArea(this,!0,!1)}get order(){return this._order}set size(t){this._size=nc(t,null),this.split.updateArea(this,!1,!0)}get size(){return this._size}set minSize(t){this._minSize=nc(t,null),this.split.updateArea(this,!1,!0)}get minSize(){return this._minSize}set maxSize(t){this._maxSize=nc(t,null),this.split.updateArea(this,!1,!0)}get maxSize(){return this._maxSize}set lockSize(t){this._lockSize=Ag(t),this.split.updateArea(this,!1,!0)}get lockSize(){return this._lockSize}set visible(t){this._visible=Ag(t),this._visible?(this.split.showArea(this),this.renderer.removeClass(this.elRef.nativeElement,"as-hidden")):(this.split.hideArea(this),this.renderer.addClass(this.elRef.nativeElement,"as-hidden"))}get visible(){return this._visible}constructor(t,r,i,s){this.ngZone=t,this.elRef=r,this.renderer=i,this.split=s,this._order=null,this._size=null,this._minSize=null,this._maxSize=null,this._lockSize=!1,this._visible=!0,this.lockListeners=[],this.renderer.addClass(this.elRef.nativeElement,"as-split-area")}ngOnInit(){this.split.addArea(this),this.ngZone.runOutsideAngular(()=>{this.transitionListener=this.renderer.listen(this.elRef.nativeElement,"transitionend",t=>{"flex-basis"===t.propertyName&&this.split.notify("transitionEnd",-1)})})}setStyleOrder(t){this.renderer.setStyle(this.elRef.nativeElement,"order",t)}setStyleFlex(t,r,i,s,a){this.renderer.setStyle(this.elRef.nativeElement,"flex-grow",t),this.renderer.setStyle(this.elRef.nativeElement,"flex-shrink",r),this.renderer.setStyle(this.elRef.nativeElement,"flex-basis",i),!0===s?this.renderer.addClass(this.elRef.nativeElement,"as-min"):this.renderer.removeClass(this.elRef.nativeElement,"as-min"),!0===a?this.renderer.addClass(this.elRef.nativeElement,"as-max"):this.renderer.removeClass(this.elRef.nativeElement,"as-max")}lockEvents(){this.ngZone.runOutsideAngular(()=>{this.lockListeners.push(this.renderer.listen(this.elRef.nativeElement,"selectstart",()=>!1)),this.lockListeners.push(this.renderer.listen(this.elRef.nativeElement,"dragstart",()=>!1))})}unlockEvents(){for(;this.lockListeners.length>0;){const t=this.lockListeners.pop();t&&t()}}ngOnDestroy(){this.unlockEvents(),this.transitionListener&&this.transitionListener(),this.split.removeArea(this)}collapse(t=0,r="right"){this.split.collapseArea(this,t,r)}expand(){this.split.expandArea(this)}}return n.\u0275fac=function(t){return new(t||n)(gt(Xr),gt(ii),gt(Sa),gt(wT))},n.\u0275dir=hn({type:n,selectors:[["as-split-area"],["","as-split-area",""]],inputs:{order:"order",size:"size",minSize:"minSize",maxSize:"maxSize",lockSize:"lockSize",visible:"visible"},exportAs:["asSplitArea"]}),n})(),Xj=(()=>{class n{static forRoot(){return console.warn("AngularSplitModule.forRoot() is deprecated and will be removed in v6"),{ngModule:n,providers:[]}}static forChild(){return console.warn("AngularSplitModule.forChild() is deprecated and will be removed in v6"),{ngModule:n,providers:[]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vs({type:n}),n.\u0275inj=Or({imports:[sf]}),n})();try{zx=typeof Intl<"u"&&Intl.v8BreakIterator}catch{zx=!1}let Tg,jx,af=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function Sz(n){return n===XA}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!zx)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(an(ZD))},n.\u0275prov=En({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Qy(n){return function Kj(){if(null==Tg&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Tg=!0}))}finally{Tg=Tg||!1}return Tg}()?n:!!n.capture}function uf(n){return n.composedPath?n.composedPath()[0]:n.target}class xT extends Ne{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function Sd(...n){return $a(n,Ga(n))}function ET(n,e){return ft((t,r)=>{let i=0;t.subscribe(ot(r,s=>n.call(e,s,i++)&&r.next(s)))})}function CT(n){return ET((e,t)=>n<=t)}function o5(n,e){return n===e}function ST(n){return ft((e,t)=>{Ts(n).subscribe(ot(t,()=>t.complete(),ee)),!t.closed&&e.subscribe(t)})}function Ig(n){return null!=n&&"false"!=`${n}`}function _T(n){return Array.isArray(n)?n:[n]}function kg(n){return n instanceof ii?n.nativeElement:n}const{isArray:u5}=Array,{getPrototypeOf:c5,prototype:d5,keys:h5}=Object;function MT(n){if(1===n.length){const e=n[0];if(u5(e))return{args:e,keys:null};if(function f5(n){return n&&"object"==typeof n&&c5(n)===d5}(e)){const t=h5(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:p5}=Array;function AT(n){return Ge(e=>function g5(n,e){return p5(e)?n(...e):n(e)}(n,e))}function TT(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function IT(n,e,t){n?Js(t,n,e):e()}function Ux(...n){return function y5(){return wu(1)}()($a(n,Ga(n)))}function kT(n){return n<=0?()=>gr:ft((e,t)=>{let r=0;e.subscribe(ot(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function b5(...n){const e=Ga(n);return ft((t,r)=>{(e?Ux(n,t,e):Ux(n,t)).subscribe(r)})}const OT=new Set;let cf,w5=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):x5}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function D5(n){if(!OT.has(n))try{cf||(cf=document.createElement("style"),cf.setAttribute("type","text/css"),document.head.appendChild(cf)),cf.sheet&&(cf.sheet.insertRule(`@media ${n} {body{ }}`,0),OT.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(an(af))},n.\u0275prov=En({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function x5(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let E5=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new Ne}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return RT(_T(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let s=function m5(...n){const e=Ga(n),t=Kd(n),{args:r,keys:i}=MT(n);if(0===r.length)return $a([],e);const s=new Te(function v5(n,e,t=me){return r=>{IT(e,()=>{const{length:i}=n,s=new Array(i);let a=i,c=i;for(let f=0;f<i;f++)IT(e,()=>{const m=$a(n[f],e);let w=!1;m.subscribe(ot(r,E=>{s[f]=E,w||(w=!0,c--),c||r.next(t(s.slice()))},()=>{--a||r.complete()}))},r)},r)}}(r,e,i?a=>TT(i,a):me));return t?s.pipe(AT(t)):s}(RT(_T(t)).map(a=>this._registerQuery(a).observable));return s=Ux(s.pipe(kT(1)),s.pipe(CT(1),Hx(0))),s.pipe(Ge(a=>{const c={matches:!1,breakpoints:{}};return a.forEach(({matches:f,query:m})=>{c.matches=c.matches||f,c.breakpoints[m]=f}),c}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),s={observable:new Te(a=>{const c=f=>this._zone.run(()=>a.next(f));return r.addListener(c),()=>{r.removeListener(c)}}).pipe(b5(r),Ge(({matches:a})=>({query:t,matches:a})),ST(this._destroySubject)),mql:r};return this._queries.set(t,s),s}}return n.\u0275fac=function(t){return new(t||n)(an(w5),an(Xr))},n.\u0275prov=En({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function RT(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function FT(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function BT(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const k5=new Wt("cdk-input-modality-detector-options"),O5={ignoreKeys:[18,17,224,91,16]},df=Qy({passive:!0,capture:!0});let R5=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,r,i,s){this._platform=t,this._mostRecentTarget=null,this._modality=new xT(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(c=>c===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=uf(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<650||(this._modality.next(FT(a)?"keyboard":"mouse"),this._mostRecentTarget=uf(a))},this._onTouchstart=a=>{BT(a)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=uf(a))},this._options={...O5,...s},this.modalityDetected=this._modality.pipe(CT(1)),this.modalityChanged=this.modalityDetected.pipe(function s5(n,e=me){return n=n??o5,ft((t,r)=>{let i,s=!0;t.subscribe(ot(r,a=>{const c=e(a);(s||!n(i,c))&&(s=!1,i=c,r.next(a))}))})}()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,df),i.addEventListener("mousedown",this._onMousedown,df),i.addEventListener("touchstart",this._onTouchstart,df)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,df),document.removeEventListener("mousedown",this._onMousedown,df),document.removeEventListener("touchstart",this._onTouchstart,df))}}return n.\u0275fac=function(t){return new(t||n)(an(af),an(Xr),an(ui),an(k5,8))},n.\u0275prov=En({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const P5=new Wt("cdk-focus-monitor-default-options"),Zy=Qy({passive:!0,capture:!0});let L5=(()=>{class n{constructor(t,r,i,s,a){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Ne,this._rootNodeFocusAndBlurListener=c=>{for(let m=uf(c);m;m=m.parentElement)"focus"===c.type?this._onFocus(c,m):this._onBlur(c,m)},this._document=s,this._detectionMode=a?.detectionMode||0}monitor(t,r=!1){const i=kg(t);if(!this._platform.isBrowser||1!==i.nodeType)return Sd(null);const s=function Jj(n){if(function Qj(){if(null==jx){const n=typeof document<"u"?document.head:null;jx=!(!n||!n.createShadowRoot&&!n.attachShadow)}return jx}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(i)||this._getDocument(),a=this._elementInfo.get(i);if(a)return r&&(a.checkChildren=!0),a.subject;const c={checkChildren:r,subject:new Ne,rootNode:s};return this._elementInfo.set(i,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(t){const r=kg(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const s=kg(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([c,f])=>this._originChanged(c,r,f)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),s=uf(t);!i||!i.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,Zy),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,Zy)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(ST(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Zy),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Zy),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,s)=>{(s===t||i.checkChildren&&s.contains(t))&&r.push([s,i])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if("mouse"!==i||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let a=0;a<s.length;a++)if(s[a].contains(r))return!0;return!1}}return n.\u0275fac=function(t){return new(t||n)(an(Xr),an(af),an(R5),an(ui,8),an(P5,8))},n.\u0275prov=En({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const HT="cdk-high-contrast-black-on-white",zT="cdk-high-contrast-white-on-black",Gx="cdk-high-contrast-active";let F5=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=Cu(E5).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(Gx,HT,zT),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(Gx,HT):2===r&&t.add(Gx,zT)}}}return n.\u0275fac=function(t){return new(t||n)(an(af),an(ui))},n.\u0275prov=En({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),jT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vs({type:n}),n.\u0275inj=Or({}),n})();const z5=new Wt("mat-sanity-checks",{providedIn:"root",factory:function H5(){return!0}});let rc=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function Zj(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(an(F5),an(z5,8),an(ui))},n.\u0275mod=vs({type:n}),n.\u0275inj=Or({imports:[jT,jT]}),n})();function j5(n){return class extends n{get disabled(){return this._disabled}set disabled(e){this._disabled=Ig(e)}constructor(...e){super(...e),this._disabled=!1}}}function $x(n,e){return class extends n{get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}constructor(...t){super(...t),this.defaultColor=e,this.color=e}}}function U5(n){return class extends n{get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Ig(e)}constructor(...e){super(...e),this._disableRipple=!1}}}function G5(n,e=0){return class extends n{get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?function a5(n,e=0){return function l5(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}(t):this.defaultTabIndex}constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}}}class W5{constructor(e,t,r,i=!1){this._renderer=e,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const $T=Qy({passive:!0,capture:!0});class q5{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=uf(e);t&&this._events.get(e.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,r,i){const s=this._events.get(t);if(s){const a=s.get(r);a?a.add(i):s.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,$T)})}removeHandler(e,t,r){const i=this._events.get(e);if(!i)return;const s=i.get(t);s&&(s.delete(r),0===s.size&&i.delete(t),0===i.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,$T)))}}const WT={enterDuration:225,exitDuration:150},qT=Qy({passive:!0,capture:!0}),YT=["mousedown","touchstart"],XT=["mouseup","mouseleave","touchend","touchcancel"];class Rg{constructor(e,t,r,i){this._target=e,this._ngZone=t,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=kg(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...WT,...r.animation};r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const a=r.radius||function X5(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),c=e-i.left,f=t-i.top,m=s.enterDuration,w=document.createElement("div");w.classList.add("mat-ripple-element"),w.style.left=c-a+"px",w.style.top=f-a+"px",w.style.height=2*a+"px",w.style.width=2*a+"px",null!=r.color&&(w.style.backgroundColor=r.color),w.style.transitionDuration=`${m}ms`,this._containerElement.appendChild(w);const E=window.getComputedStyle(w),j=E.transitionDuration,re="none"===E.transitionProperty||"0s"===j||"0s, 0s"===j||0===i.width&&0===i.height,xe=new W5(this,w,r,re);w.style.transform="scale3d(1, 1, 1)",xe.state=0,r.persistent||(this._mostRecentTransientRipple=xe);let ke=null;return!re&&(m||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Ve=()=>this._finishRippleTransition(xe),nt=()=>this._destroyRipple(xe);w.addEventListener("transitionend",Ve),w.addEventListener("transitioncancel",nt),ke={onTransitionEnd:Ve,onTransitionCancel:nt}}),this._activeRipples.set(xe,ke),(re||!m)&&this._finishRippleTransition(xe),xe}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,r={...WT,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=kg(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,YT.forEach(r=>{Rg._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{XT.forEach(t=>{this._triggerElement.addEventListener(t,this,qT)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=FT(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!BT(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(YT.forEach(t=>Rg._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&XT.forEach(t=>e.removeEventListener(t,this,qT)))}}Rg._eventManager=new q5;const K5=new Wt("mat-ripple-global-options");let Q5=(()=>{class n{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,r,i,s,a){this._elementRef=t,this._animationMode=a,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new Rg(this,r,t,i)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,{...this.rippleConfig,...i}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return n.\u0275fac=function(t){return new(t||n)(gt(ii),gt(Xr),gt(af),gt(K5,8),gt(aA,8))},n.\u0275dir=hn({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&Aa("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),J5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vs({type:n}),n.\u0275inj=Or({imports:[rc,rc]}),n})();function Wx(n,e,t){const r=$(n)||e||t?{next:n,error:e,complete:t}:n;return r?ft((i,s)=>{var a;null===(a=r.subscribe)||void 0===a||a.call(r);let c=!0;i.subscribe(ot(s,f=>{var m;null===(m=r.next)||void 0===m||m.call(r,f),s.next(f)},()=>{var f;c=!1,null===(f=r.complete)||void 0===f||f.call(r),s.complete()},f=>{var m;c=!1,null===(m=r.error)||void 0===m||m.call(r,f),s.error(f)},()=>{var f,m;c&&(null===(f=r.unsubscribe)||void 0===f||f.call(r)),null===(m=r.finalize)||void 0===m||m.call(r)}))}):me}function QT(n){return ft((e,t)=>{let s,r=null,i=!1;r=e.subscribe(ot(t,void 0,void 0,a=>{s=Ts(n(a,QT(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}class qx{}class ic{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),a=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(a):this.headers.set(s,[a])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof ic?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new ic;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof ic?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let a=this.headers.get(t);if(!a)return;a=a.filter(c=>-1===s.indexOf(c)),0===a.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,a)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class nU{encodeKey(e){return ZT(e)}encodeValue(e){return ZT(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const iU=/%(\d[a-f0-9])/gi,sU={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function ZT(n){return encodeURIComponent(n).replace(iU,(e,t)=>sU[t]??e)}function e0(n){return`${n}`}class sc{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new nU,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function rU(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[a,c]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],f=t.get(a)||[];f.push(c),t.set(a,f)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(e0):[e0(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new sc({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(e0(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(e0(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class oU{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function eI(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function tI(n){return typeof Blob<"u"&&n instanceof Blob}function nI(n){return typeof FormData<"u"&&n instanceof FormData}class Ng{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function aU(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new ic),this.context||(this.context=new oU),this.params){const a=this.params.toString();if(0===a.length)this.urlWithParams=t;else{const c=t.indexOf("?");this.urlWithParams=t+(-1===c?"?":c<t.length-1?"&":"")+a}}else this.params=new sc,this.urlWithParams=t}serializeBody(){return null===this.body?null:eI(this.body)||tI(this.body)||nI(this.body)||function lU(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof sc?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||nI(this.body)?null:tI(this.body)?this.body.type||null:eI(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof sc?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,c=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let f=e.headers||this.headers,m=e.params||this.params;const w=e.context??this.context;return void 0!==e.setHeaders&&(f=Object.keys(e.setHeaders).reduce((E,R)=>E.set(R,e.setHeaders[R]),f)),e.setParams&&(m=Object.keys(e.setParams).reduce((E,R)=>E.set(R,e.setParams[R]),m)),new Ng(t,r,s,{params:m,headers:f,context:w,reportProgress:c,responseType:i,withCredentials:a})}}var rs=(()=>((rs=rs||{})[rs.Sent=0]="Sent",rs[rs.UploadProgress=1]="UploadProgress",rs[rs.ResponseHeader=2]="ResponseHeader",rs[rs.DownloadProgress=3]="DownloadProgress",rs[rs.Response=4]="Response",rs[rs.User=5]="User",rs))();class uU{constructor(e,t=200,r="OK"){this.headers=e.headers||new ic,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Yx extends uU{constructor(e={}){super(e),this.type=rs.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Yx({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function Xx(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Kx=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof Ng)s=t;else{let f,m;f=i.headers instanceof ic?i.headers:new ic(i.headers),i.params&&(m=i.params instanceof sc?i.params:new sc({fromObject:i.params})),s=new Ng(t,r,void 0!==i.body?i.body:null,{headers:f,context:i.context,params:m,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const a=Sd(s).pipe(function tU(n,e){return $(e)?Ua(n,e,1):Ua(n,1)}(f=>this.handler.handle(f)));if(t instanceof Ng||"events"===i.observe)return a;const c=a.pipe(ET(f=>f instanceof Yx));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(Ge(f=>{if(null!==f.body&&!(f.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return f.body}));case"blob":return c.pipe(Ge(f=>{if(null!==f.body&&!(f.body instanceof Blob))throw new Error("Response is not a Blob.");return f.body}));case"text":return c.pipe(Ge(f=>{if(null!==f.body&&"string"!=typeof f.body)throw new Error("Response is not a string.");return f.body}));default:return c.pipe(Ge(f=>f.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new sc).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Xx(i,r))}post(t,r,i={}){return this.request("POST",t,Xx(i,r))}put(t,r,i={}){return this.request("PUT",t,Xx(i,r))}}return n.\u0275fac=function(t){return new(t||n)(an(qx))},n.\u0275prov=En({token:n,factory:n.\u0275fac}),n})();const xU=["*"];let n0;function Pg(n){return function EU(){if(void 0===n0&&(n0=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(n0=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return n0}()?.createHTML(n)||n}function cI(n){return Error(`Unable to find icon with the name "${n}"`)}function dI(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function hI(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class _d{constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let r0=(()=>{class n{constructor(t,r,i,s){this._httpClient=t,this._sanitizer=r,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,s){return this._addSvgIconConfig(t,r,new _d(i,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,s){const a=this._sanitizer.sanitize(Je.HTML,i);if(!a)throw hI(i);const c=Pg(a);return this._addSvgIconConfig(t,r,new _d("",c,s))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new _d(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const s=this._sanitizer.sanitize(Je.HTML,r);if(!s)throw hI(r);const a=Pg(s);return this._addSvgIconSetConfig(t,new _d("",a,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(Je.RESOURCE_URL,t);if(!r)throw dI(t);const i=this._cachedIconsByUrl.get(r);return i?Sd(s0(i)):this._loadSvgIconFromConfig(new _d(t,null)).pipe(Wx(s=>this._cachedIconsByUrl.set(r,s)),Ge(s=>s0(s)))}getNamedSvgIcon(t,r=""){const i=fI(r,t);let s=this._svgIconConfigs.get(i);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,t),s)return this._svgIconConfigs.set(i,s),this._getSvgFromConfig(s);const a=this._iconSetConfigs.get(r);return a?this._getSvgFromIconSetConfigs(t,a):function Z5(n,e){const t=$(n)?n:()=>n,r=i=>i.error(t());return new Te(e?i=>e.schedule(r,0,i):r)}(cI(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Sd(s0(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(Ge(r=>s0(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?Sd(i):function KT(...n){const e=Kd(n),{args:t,keys:r}=MT(n),i=new Te(s=>{const{length:a}=t;if(!a)return void s.complete();const c=new Array(a);let f=a,m=a;for(let w=0;w<a;w++){let E=!1;Ts(t[w]).subscribe(ot(s,R=>{E||(E=!0,m--),c[w]=R},()=>f--,void 0,()=>{(!f||!E)&&(m||s.next(r?TT(r,c):c),s.complete())}))}});return e?i.pipe(AT(e)):i}(r.filter(a=>!a.svgText).map(a=>this._loadSvgIconSetFromConfig(a).pipe(QT(c=>{const m=`Loading icon set URL: ${this._sanitizer.sanitize(Je.RESOURCE_URL,a.url)} failed: ${c.message}`;return this._errorHandler.handleError(new Error(m)),Sd(null)})))).pipe(Ge(()=>{const a=this._extractIconWithNameFromAnySet(t,r);if(!a)throw cI(t);return a}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const s=r[i];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const a=this._svgElementFromConfig(s),c=this._extractSvgIconFromSet(a,t,s.options);if(c)return c}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Wx(r=>t.svgText=r),Ge(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Sd(null):this._fetchIcon(t).pipe(Wx(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const s=t.querySelector(`[id="${r}"]`);if(!s)return null;const a=s.cloneNode(!0);if(a.removeAttribute("id"),"svg"===a.nodeName.toLowerCase())return this._setSvgAttributes(a,i);if("symbol"===a.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(a),i);const c=this._svgElementFromString(Pg("<svg></svg>"));return c.appendChild(a),this._setSvgAttributes(c,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString(Pg("<svg></svg>")),i=t.attributes;for(let s=0;s<i.length;s++){const{name:a,value:c}=i[s];"id"!==a&&r.setAttribute(a,c)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){const{url:r,options:i}=t,s=i?.withCredentials??!1;if(!this._httpClient)throw function CU(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const a=this._sanitizer.sanitize(Je.RESOURCE_URL,r);if(!a)throw dI(r);const c=this._inProgressUrlFetches.get(a);if(c)return c;const f=this._httpClient.get(a,{responseType:"text",withCredentials:s}).pipe(Ge(m=>Pg(m)),function eU(n){return ft((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>this._inProgressUrlFetches.delete(a)),ua());return this._inProgressUrlFetches.set(a,f),f}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(fI(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const s=this._resolvers[i](r,t);if(s)return _U(s)?new _d(s.url,null,s.options):new _d(s,null)}}}return n.\u0275fac=function(t){return new(t||n)(an(Kx,8),an(Vx),an(ui,8),an(qo))},n.\u0275prov=En({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function s0(n){return n.cloneNode(!0)}function fI(n,e){return n+":"+e}function _U(n){return!(!n.url||!n.options)}const MU=$x(class{constructor(n){this._elementRef=n}}),AU=new Wt("MAT_ICON_DEFAULT_OPTIONS"),TU=new Wt("mat-icon-location",{providedIn:"root",factory:function IU(){const n=Cu(ui),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),pI=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],kU=pI.map(n=>`[${n}]`).join(", "),OU=/^url\(['"]?#(.*?)['"]?\)$/;let RU=(()=>{class n extends MU{get inline(){return this._inline}set inline(t){this._inline=Ig(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}constructor(t,r,i,s,a,c){super(t),this._iconRegistry=r,this._location=s,this._errorHandler=a,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=N.EMPTY,c&&(c.color&&(this.color=this.defaultColor=c.color),c.fontSet&&(this.fontSet=c.fontSet)),i||t.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>t.classList.remove(i)),r.forEach(i=>t.classList.add(i)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,s)=>{i.forEach(a=>{s.setAttribute(a.name,`url('${t}#${a.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(kU),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)pI.forEach(a=>{const c=r[s],f=c.getAttribute(a),m=f?f.match(OU):null;if(m){let w=i.get(c);w||(w=[],i.set(c,w)),w.push({name:a,value:m[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(kT(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${s.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(gt(ii),gt(r0),nd("aria-hidden"),gt(TU),gt(qo),gt(AU,8))},n.\u0275cmp=Do({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(t,r){2&t&&(uo("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),Aa("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[sr],ngContentSelectors:xU,decls:1,vars:0,template:function(t,r){1&t&&(ag(),Xh(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),gI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vs({type:n}),n.\u0275inj=Or({imports:[rc,rc]}),n})();class pf{}pf.\u0275fac=function(e){return new(e||pf)},pf.\u0275mod=vs({type:pf}),pf.\u0275inj=Or({imports:[sf,gI]});class Jx{constructor(){this.displayContextMenu=!0,this.contextMenuCommands=new NU,this.individualCSS={"background-color":"rgb(64,153,218)",color:"#333","border-color":"#bbb","border-width":3,"border-opacity":.5},this.classNodeCSS={"background-color":"rgb(238, 75, 43)",color:"#333"},this.literalNodeCSS={"background-color":"white",color:"#333",opacity:1,width:"data(width)",shape:"rectangle","border-color":"#bbb","border-width":3,"border-opacity":.5}}}class NU{constructor(){this.nodes=[{id:"copyURI",visible:!0,enabled:!0,label:"Copy"},{id:"search",visible:!0,enabled:!0,label:"Search"},{id:"focus",visible:!0,enabled:!0,label:"Focus"},{id:"expandInbound",visible:!0,enabled:!0,label:"+inbound"},{id:"expandOutbound",visible:!0,enabled:!0,label:"+outbound"}],this.edges=[{id:"copyURI",visible:!0,enabled:!0,label:"Copy"},{id:"search",visible:!0,enabled:!0,label:"Search"}],this.canvas=[]}}class PU{constructor(e,t,r){this.resourceURI=e,this.commandId=t,this.contextCategory=r}}var gf=(()=>{return(n=gf||(gf={})).CANVAS="CANVAS",n.EDGE="EDGE",n.NODE="NODE",gf;var n})();const Zx=new Jx;function mI(n,e,t,r,i,s,a){try{var c=n[s](a),f=c.value}catch(m){return void t(m)}c.done?e(f):Promise.resolve(f).then(r,i)}function mf(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var s=n.apply(e,t);function a(f){mI(s,r,i,a,c,"next",f)}function c(f){mI(s,r,i,a,c,"throw",f)}a(void 0)})}}Zx.contextMenuCommands.nodes=[{id:"copyURI",visible:!0,enabled:!0,label:"Copy"}],Zx.contextMenuCommands.edges=[{id:"copyURI",visible:!0,enabled:!0,label:"Copy"}];var LU=G(6864),o0=G.n(LU),FU=G(3811),BU=G.n(FU),VU=G(1212),HU=G.n(VU),zU=G(5791),jU=G.n(zU);o0().use(BU()),o0().use(HU()),o0().use(jU());class vf{constructor(){this.contextMenuClick$=new Ne,this.settings=new Jx}build(e,t,r){this.settings=r,this.initCytoscape(e,t),r.displayContextMenu&&this.setupContextMenus(),this.setupHoverEvents()}addElements(e){null!=this.cy&&(this.cy.add(e),this.updateLayout())}contextMenuClick(){return this.contextMenuClick$.asObservable()}getCytoscape(){return this.cy}initCytoscape(e,t){this.cy=o0()({container:e,wheelSensitivity:.5,elements:t,style:[{selector:"node",style:{content:"data(name)","text-valign":"center",color:"#ccc"}},{selector:"node.individual",style:{width:"data(size)",height:"data(size)",...this.settings.individualCSS}},{selector:"node.class",style:{width:"data(size)",height:"data(size)",...this.settings.classNodeCSS}},{selector:"node.literal",style:{content:"data(name)",...this.settings.literalNodeCSS}},{selector:":selected",style:{"border-width":3,"border-color":"#333"}},{selector:"edge",style:{content:"data(name)","curve-style":"bezier",opacity:.666,"target-arrow-shape":"triangle"}},{selector:".faded",style:{opacity:.25,"text-opacity":0}}]}),this.updateLayout()}updateLayout(){null!=this.cy&&this.cy.layout({name:"cose-bilkent",quality:"default",nodeDimensionsIncludeLabels:!1,refresh:30,fit:!0,padding:100,randomize:!0,nodeRepulsion:4500,idealEdgeLength:200,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",animationDuration:500,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.5}).run()}setupContextMenus(){if(null==this.cy)return;const e=[this.settings.contextMenuCommands.nodes,this.settings.contextMenuCommands.edges,this.settings.contextMenuCommands.canvas],t=[gf.NODE,gf.EDGE,gf.CANVAS],r=["node","edge","core"];for(const i in e){const s=t[i],a=r[i],c=[];e[i].forEach(f=>{f.visible&&c.push({content:f.label,enabled:f.enabled,select:m=>{const E=m.json().data?.uri;if(void 0===E)return;const R=new PU(E,f.id,s);this.contextMenuClick$.next(R)}})}),c.length&&this.cy.cxtmenu({selector:a,commands:c})}}setupHoverEvents(){if(null==this.cy)return;let e=this.cy.collection();this.cy.nodes().on("click",function(t){const r=t.target;console.log(r),e=e.union(r)}),this.cy.nodes().unbind("mouseover"),this.cy.nodes().bind("mouseover",t=>{this.dimAllButNeighbors(t.target)}),this.cy.nodes().unbind("mouseout"),this.cy.nodes().bind("mouseout",()=>{this.unDimAll()})}unDimAll(){null!=this.cy&&this.cy.elements().forEach(e=>{e.removeClass("faded")})}dimAllButNeighbors(e){if(null==this.cy)return;const t=e.neighborhood().map(r=>r.id());this.cy.elements().forEach(r=>{t.includes(r.id())||r.id()===e.id()?r.removeClass("faded"):r.addClass("faded")})}}vf.\u0275fac=function(e){return new(e||vf)},vf.\u0275prov=En({token:vf,factory:vf.\u0275fac,providedIn:"root"});var a0,vI=G(5049),UU=new Uint8Array(16);function GU(){if(!a0&&!(a0=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a0(UU)}const $U=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,qU=function WU(n){return"string"==typeof n&&$U.test(n)};for(var is=[],eE=0;eE<256;++eE)is.push((eE+256).toString(16).substr(1));const QU=function KU(n,e,t){var r=(n=n||{}).random||(n.rng||GU)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){t=t||0;for(var i=0;i<16;++i)e[t+i]=r[i];return e}return function YU(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(is[n[e+0]]+is[n[e+1]]+is[n[e+2]]+is[n[e+3]]+"-"+is[n[e+4]]+is[n[e+5]]+"-"+is[n[e+6]]+is[n[e+7]]+"-"+is[n[e+8]]+is[n[e+9]]+"-"+is[n[e+10]]+is[n[e+11]]+is[n[e+12]]+is[n[e+13]]+is[n[e+14]]+is[n[e+15]]).toLowerCase();if(!qU(t))throw TypeError("Stringified UUID is invalid");return t}(r)};class yf{constructor(){this.nodes=[],this.edges=[],this.seenNodes=[],this.resourceLabels={},this.knownPrefixes={schema:"http://schema.org/"}}buildElementData(e,t="en"){var r=this;return mf(function*(){return"http://schema.org/"==e["@context"]&&(e["@context"]="https://schema.org/"),r.context={...e["@context"],...r.knownPrefixes},r.nodes=[],r.edges=[],r.seenNodes=[],r.resourceLabels={},(yield(0,vI.toRDF)(e)).forEach(s=>r.processQuad(s)),r.nodes=r.appendNames(r.nodes,t),r.edges=r.appendNames(r.edges,t),{nodes:r.nodes,edges:r.edges}})()}appendElementData(e,t="en"){var r=this;return mf(function*(){return(yield(0,vI.toRDF)(e)).forEach(s=>r.processQuad(s)),r.nodes=r.appendNames(r.nodes,t),r.edges=r.appendNames(r.edges,t),{nodes:r.nodes,edges:r.edges}})()}processQuad(e){const t=e.subject.value;let r=e.predicate.value,i=e.object.value;if("http://www.w3.org/2004/02/skos/core#prefLabel"===r||"http://www.w3.org/2000/01/rdf-schema#label"===r)return void(Object.keys(this.resourceLabels).includes(t)?this.resourceLabels[t].push(e.object):this.resourceLabels[t]=[e.object]);"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"===r&&(r="a"),this.appendNamedNode(t);const s=e.object.termType;"Literal"===s?i=this.appendLiteralNode(i):"BlankNode"===s?this.appendNamedNode(i,"individual"):"NamedNode"===s?this.appendNamedNode(i,"a"===r?"class":"individual"):console.warn("Unknown term type "+s),this.appendEdge(t,r,i)}appendNames(e,t="en"){return e.map(r=>{const i=this.resourceLabels[r.data.id];if(Array.isArray(i))1===i.length?r.data.name=i[0].value:console.log("MORE THAN ONE LABEL NOT YET SUPPORTED");else{if("class"===r.classes){if(null==r.data.uri)return r;r.data.name=this.getIdFromURI(r.data.uri)}if("edge"===r.classes){if(null==r.data.uri)return r;r.data.name=this.getIdFromURI(r.data.uri)}}return void 0!==r.data.size&&""!=r.data.name&&(r.data.size=70),r})}appendNamedNode(e,t="individual"){if(this.seenNodes.includes(e)){if("class"===t){const r=this.nodes.find(i=>i.data.id===e);null!=r&&(r.classes=t)}}else this.nodes.push({data:{id:e,uri:e,name:"",size:40},classes:t}),this.seenNodes.push(e)}appendLiteralNode(e){""===e&&(e="-");const t=this.camelize(e);return this.seenNodes.includes(t)||(this.nodes.push({data:{id:t,name:e,width:10*e.length+"px"},classes:"literal"}),this.seenNodes.push(t)),t}appendEdge(e,t,r){this.edges.push({data:{id:QU(),source:e,target:r,name:this.appendPrefix(t),uri:t},classes:"edge"})}appendPrefix(e){const t=Object.keys(this.context),r=Object.values(this.context);for(const i in r){const s=r[i];if(e.startsWith(s)){e=e.replace(s,`${t[i]}:`);break}}return e}camelize(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,function(t,r){return 0===r?t.toLowerCase():t.toUpperCase()}).replace(/\s+/g,"")}getIdFromURI(e){return e.includes("#")?e.split("#")[1]:e.split("/").pop()??e}}yf.\u0275fac=function(e){return new(e||yf)},yf.\u0275prov=En({token:yf,factory:yf.\u0275fac,providedIn:"root"});class JU{constructor(e,t){this.newRect=e,this.oldRect=t,this.isFirst=null==t}}class Lg{constructor(e,t){this.element=e,this.zone=t,this.resized=new Lr,this.observer=new ResizeObserver(r=>this.zone.run(()=>this.observe(r)))}ngOnInit(){this.observer.observe(this.element.nativeElement)}ngOnDestroy(){this.observer.disconnect()}observe(e){const t=e[0],r=new JU(t.contentRect,this.oldRect);this.oldRect=t.contentRect,this.resized.emit(r)}}Lg.\u0275fac=function(e){return new(e||Lg)(gt(ii),gt(Xr))},Lg.\u0275dir=hn({type:Lg,selectors:[["","imPoc1Resized",""]],outputs:{resized:"resized"},standalone:!0});const ZU=["cy"];class Fg{set content(e){if(e){if(this.canvas=e.nativeElement,null==this.canvas||null==this.elementData)return;this.rdfGraphService.build(this.canvas,this.elementData,this.settings)}}constructor(e,t){this.rdfGraphService=e,this.jsonLDProcessingService=t,this.settings=new Jx,this.clickedContextMenu=new Lr}ngOnInit(){this.rdfGraphService.contextMenuClick().subscribe(e=>{e&&this.clickedContextMenu.emit(e),"copyURI"===e?.commandId&&navigator.clipboard.writeText(e.resourceURI??"")})}ngOnChanges(){var e=this;return mf(function*(){e.elementData=yield e.jsonLDProcessingService.buildElementData(e.data),null!=e.canvas&&null!=e.elementData&&e.rdfGraphService.build(e.canvas,e.elementData,e.settings)})()}ngAfterViewInit(){null!=this.canvas&&null!=this.elementData&&this.rdfGraphService.build(this.canvas,this.elementData,this.settings)}append(e){var t=this;return mf(function*(){if(null==t.canvas)return;const r=yield t.jsonLDProcessingService.buildElementData(e);t.rdfGraphService.addElements(r)})()}getCytoscape(){return this.rdfGraphService.getCytoscape()}onResized(){null==this.canvas||null==this.elementData||(this.canvas.innerHTML="",this.rdfGraphService.build(this.canvas,this.elementData,this.settings))}}Fg.\u0275fac=function(e){return new(e||Fg)(gt(vf),gt(yf))},Fg.\u0275cmp=Do({type:Fg,selectors:[["im-poc1-rdf-graph"]],viewQuery:function(e,t){if(1&e&&yg(ZU,5),2&e){let r;ef(r=tf())&&(t.content=r.first)}},inputs:{data:"data",settings:"settings"},outputs:{clickedContextMenu:"clickedContextMenu"},features:[On],decls:2,vars:0,consts:[["id","graph-canvas","imPoc1Resized","",3,"resized"],["cy",""]],template:function(e,t){1&e&&(yi(0,"div",0,1),bi("resized",function(){return t.onResized()}),Wi())},dependencies:[Lg],styles:["#graph-canvas[_ngcontent-%COMP%]{height:100%;width:100%}  .node-hover-div{font-size:.6em}"]});class Bg{constructor(){this.settings=Zx}onContextMenuClick(e){console.log(e)}}Bg.\u0275fac=function(e){return new(e||Bg)},Bg.\u0275cmp=Do({type:Bg,selectors:[["im-poc1-graph"]],inputs:{data:"data"},standalone:!0,features:[gg],decls:1,vars:2,consts:[[3,"data","settings","clickedContextMenu"]],template:function(e,t){1&e&&(yi(0,"im-poc1-rdf-graph",0),bi("clickedContextMenu",function(i){return t.onContextMenuClick(i)}),Wi()),2&e&&co("data",t.data)("settings",t.settings)},dependencies:[sf,pf,Fg],encapsulation:2});class pr{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,r){let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(t,this.length,i,1),bl.from(i,this.length-(t-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let r=[];return this.decompose(e,t,r,0),bl.from(r,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new Vg(this),s=new Vg(e);for(let a=t,c=t;;){if(i.next(a),s.next(a),a=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(c+=i.value.length,i.done||c>=r)return!0}}iter(e=1){return new Vg(this,e)}iterRange(e,t=this.length){return new bI(this,e,t)}iterLines(e,t){let r;if(null==e)r=this.iter();else{null==t&&(t=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new wI(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(0==e.length)throw new RangeError("A document must have at least one line");return 1!=e.length||e[0]?e.length<=32?new di(e):bl.from(di.split(e,[])):pr.empty}}class di extends pr{constructor(e,t=function e4(n){let e=-1;for(let t of n)e+=t.length+1;return e}(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,r,i){for(let s=0;;s++){let a=this.text[s],c=i+a.length;if((t?r:c)>=e)return new t4(i,c,r,a);i=c+1,r++}}decompose(e,t,r,i){let s=e<=0&&t>=this.length?this:new di(yI(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(1&i){let a=r.pop(),c=l0(s.text,a.text.slice(),0,s.length);if(c.length<=32)r.push(new di(c,a.length+s.length));else{let f=c.length>>1;r.push(new di(c.slice(0,f)),new di(c.slice(f)))}}else r.push(s)}replace(e,t,r){if(!(r instanceof di))return super.replace(e,t,r);let i=l0(this.text,l0(r.text,yI(this.text,0,e)),t),s=this.length+r.length-(t-e);return i.length<=32?new di(i,s):bl.from(di.split(i,[]),s)}sliceString(e,t=this.length,r="\n"){let i="";for(let s=0,a=0;s<=t&&a<this.text.length;a++){let c=this.text[a],f=s+c.length;s>e&&a&&(i+=r),e<f&&t>s&&(i+=c.slice(Math.max(0,e-s),t-s)),s=f+1}return i}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,32==r.length&&(t.push(new di(r,i)),r=[],i=-1);return i>-1&&t.push(new di(r,i)),t}}class bl extends pr{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,t,r,i){for(let s=0;;s++){let a=this.children[s],c=i+a.length,f=r+a.lines-1;if((t?f:c)>=e)return a.lineInner(e,t,r,i);i=c+1,r=f+1}}decompose(e,t,r,i){for(let s=0,a=0;a<=t&&s<this.children.length;s++){let c=this.children[s],f=a+c.length;if(e<=f&&t>=a){let m=i&((a<=e?1:0)|(f>=t?2:0));a>=e&&f<=t&&!m?r.push(c):c.decompose(e-a,t-a,r,m)}a=f+1}}replace(e,t,r){if(r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let a=this.children[i],c=s+a.length;if(e>=s&&t<=c){let f=a.replace(e-s,t-s,r),m=this.lines-a.lines+f.lines;if(f.lines<m>>4&&f.lines>m>>6){let w=this.children.slice();return w[i]=f,new bl(w,this.length-(t-e)+r.length)}return super.replace(s,c,f)}s=c+1}return super.replace(e,t,r)}sliceString(e,t=this.length,r="\n"){let i="";for(let s=0,a=0;s<this.children.length&&a<=t;s++){let c=this.children[s],f=a+c.length;a>e&&s&&(i+=r),e<f&&t>a&&(i+=c.sliceString(e-a,t-a,r)),a=f+1}return i}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof bl))return 0;let r=0,[i,s,a,c]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=t,s+=t){if(i==a||s==c)return r;let f=this.children[i],m=e.children[s];if(f!=m)return r+f.scanIdentical(m,t);r+=f.length+1}}static from(e,t=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let j of e)r+=j.lines;if(r<32){let j=[];for(let re of e)re.flatten(j);return new di(j,t)}let i=Math.max(32,r>>5),s=i<<1,a=i>>1,c=[],f=0,m=-1,w=[];function E(j){let re;if(j.lines>s&&j instanceof bl)for(let xe of j.children)E(xe);else j.lines>a&&(f>a||!f)?(R(),c.push(j)):j instanceof di&&f&&(re=w[w.length-1])instanceof di&&j.lines+re.lines<=32?(f+=j.lines,m+=j.length+1,w[w.length-1]=new di(re.text.concat(j.text),re.length+1+j.length)):(f+j.lines>i&&R(),f+=j.lines,m+=j.length+1,w.push(j))}function R(){0!=f&&(c.push(1==w.length?w[0]:bl.from(w,m)),m=-1,f=w.length=0)}for(let j of e)E(j);return R(),1==c.length?c[0]:new bl(c,t)}}function l0(n,e,t=0,r=1e9){for(let i=0,s=0,a=!0;s<n.length&&i<=r;s++){let c=n[s],f=i+c.length;f>=t&&(f>r&&(c=c.slice(0,r-i)),i<t&&(c=c.slice(t-i)),a?(e[e.length-1]+=c,a=!1):e.push(c)),i=f+1}return e}function yI(n,e,t){return l0(n,[""],e,t)}pr.empty=new di([""],0);class Vg{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof di?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],a=s>>1;if(a==(t>0?i instanceof di?i.text.length:i.children.length:0)){if(0==r)return this.done=!0,this.value="",this;t>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&s)==(t>0?0:1)){if(this.offsets[r]+=t,0==e)return this.lineBreak=!0,this.value="\n",this;e--}else if(i instanceof di){let f=i.text[a+(t<0?-1:0)];if(this.offsets[r]+=t,f.length>Math.max(0,e))return this.value=0==e?f:t>0?f.slice(e):f.slice(0,f.length-e),this;e-=f.length}else{let f=i.children[a+(t<0?-1:0)];e>f.length?(e-=f.length,this.offsets[r]+=t):(t<0&&this.offsets[r]--,this.nodes.push(f),this.offsets.push(t>0?1:(f instanceof di?f.text.length:f.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class bI{constructor(e,t,r){this.value="",this.done=!1,this.cursor=new Vg(e,t>r?-1:1),this.pos=t>r?e.length:0,this.from=Math.min(t,r),this.to=Math.max(t,r)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let r=t<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*t,this.value=i.length<=r?i:t<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class wI{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:r,value:i}=this.inner.next(e);return t?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(pr.prototype[Symbol.iterator]=function(){return this.iter()},Vg.prototype[Symbol.iterator]=bI.prototype[Symbol.iterator]=wI.prototype[Symbol.iterator]=function(){return this});class t4{constructor(e,t,r,i){this.from=e,this.to=t,this.number=r,this.text=i}get length(){return this.to-this.from}}let bf="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(n=>n?parseInt(n,36):1);for(let n=1;n<bf.length;n++)bf[n]+=bf[n-1];function n4(n){for(let e=1;e<bf.length;e+=2)if(bf[e]>n)return bf[e-1]<=n;return!1}function DI(n){return n>=127462&&n<=127487}function js(n,e,t=!0,r=!0){return(t?EI:r4)(n,e,r)}function EI(n,e,t){if(e==n.length)return e;e&&CI(n.charCodeAt(e))&&SI(n.charCodeAt(e-1))&&e--;let r=ss(n,e);for(e+=Jo(r);e<n.length;){let i=ss(n,e);if(8205==r||8205==i||t&&n4(i))e+=Jo(i),r=i;else{if(!DI(i))break;{let s=0,a=e-2;for(;a>=0&&DI(ss(n,a));)s++,a-=2;if(s%2==0)break;e+=2}}}return e}function r4(n,e,t){for(;e>0;){let r=EI(n,e-2,t);if(r<e)return r;e--}return 0}function CI(n){return n>=56320&&n<57344}function SI(n){return n>=55296&&n<56320}function ss(n,e){let t=n.charCodeAt(e);if(!SI(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return CI(r)?r-56320+(t-55296<<10)+65536:t}function tE(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n)))}function Jo(n){return n<65536?1:2}const nE=/\r\n?|\n/;var Us=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(Us||(Us={}));class wl{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t+1];e+=r<0?this.sections[t]:r}return e}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(e){for(let t=0,r=0,i=0;t<this.sections.length;){let s=this.sections[t++],a=this.sections[t++];a<0?(e(r,i,s),i+=s):i+=a,r+=s}}iterChangedRanges(e,t=!1){rE(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];i<0?e.push(r,i):e.push(i,r)}return new wl(e)}composeDesc(e){return this.empty?e:e.empty?this:_I(this,e)}mapDesc(e,t=!1){return e.empty?this:iE(this,e,t)}mapPos(e,t=-1,r=Us.Simple){let i=0,s=0;for(let a=0;a<this.sections.length;){let c=this.sections[a++],f=this.sections[a++],m=i+c;if(f<0){if(m>e)return s+(e-i);s+=c}else{if(r!=Us.Simple&&m>=e&&(r==Us.TrackDel&&i<e&&m>e||r==Us.TrackBefore&&i<e||r==Us.TrackAfter&&m>e))return null;if(m>e||m==e&&t<0&&!c)return e==i||t<0?s:s+f;s+=f}i=m}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,t=e){for(let r=0,i=0;r<this.sections.length&&i<=t;){let c=i+this.sections[r++];if(this.sections[r++]>=0&&i<=t&&c>=e)return!(i<e&&c>t)||"cover";i=c}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>"number"!=typeof t))throw new RangeError("Invalid JSON representation of ChangeDesc");return new wl(e)}static create(e){return new wl(e)}}class Pi extends wl{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return rE(this,(t,r,i,s,a)=>e=e.replace(i,i+(r-t),a),!1),e}mapDesc(e,t=!1){return iE(this,e,t,!0)}invert(e){let t=this.sections.slice(),r=[];for(let i=0,s=0;i<t.length;i+=2){let a=t[i],c=t[i+1];if(c>=0){t[i]=c,t[i+1]=a;let f=i>>1;for(;r.length<f;)r.push(pr.empty);r.push(a?e.slice(s,s+a):pr.empty)}s+=a}return new Pi(t,r)}compose(e){return this.empty?e:e.empty?this:_I(this,e,!0)}map(e,t=!1){return e.empty?this:iE(this,e,t,!0)}iterChanges(e,t=!1){rE(this,e,t)}get desc(){return wl.create(this.sections)}filter(e){let t=[],r=[],i=[],s=new Hg(this);e:for(let a=0,c=0;;){let f=a==e.length?1e9:e[a++];for(;c<f||c==f&&0==s.len;){if(s.done)break e;let w=Math.min(s.len,f-c);Es(i,w,-1);let E=-1==s.ins?-1:0==s.off?s.ins:0;Es(t,w,E),E>0&&oc(r,t,s.text),s.forward(w),c+=w}let m=e[a++];for(;c<m;){if(s.done)break e;let w=Math.min(s.len,m-c);Es(t,w,-1),Es(i,w,-1==s.ins?-1:0==s.off?s.ins:0),s.forward(w),c+=w}}return{changes:new Pi(t,r),filtered:wl.create(i)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t],i=this.sections[t+1];e.push(i<0?r:0==i?[r]:[r].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,r){let i=[],s=[],a=0,c=null;function f(w=!1){if(!w&&!i.length)return;a<t&&Es(i,t-a,-1);let E=new Pi(i,s);c=c?c.compose(E.map(c)):E,i=[],s=[],a=0}return function m(w){if(Array.isArray(w))for(let E of w)m(E);else if(w instanceof Pi){if(w.length!=t)throw new RangeError(`Mismatched change set length (got ${w.length}, expected ${t})`);f(),c=c?c.compose(w.map(c)):w}else{let{from:E,to:R=E,insert:j}=w;if(E>R||E<0||R>t)throw new RangeError(`Invalid change range ${E} to ${R} (in doc of length ${t})`);let re=j?"string"==typeof j?pr.of(j.split(r||nE)):j:pr.empty,xe=re.length;if(E==R&&0==xe)return;E<a&&f(),E>a&&Es(i,E-a,-1),Es(i,R-E,xe),oc(s,i,re),a=R}}(e),f(!c),c}static empty(e){return new Pi(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if("number"==typeof s)t.push(s,-1);else{if(!Array.isArray(s)||"number"!=typeof s[0]||s.some((a,c)=>c&&"string"!=typeof a))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==s.length)t.push(s[0],0);else{for(;r.length<i;)r.push(pr.empty);r[i]=pr.of(s.slice(1)),t.push(s[0],r[i].length)}}}return new Pi(t,r)}static createSet(e,t){return new Pi(e,t)}}function Es(n,e,t,r=!1){if(0==e&&t<=0)return;let i=n.length-2;i>=0&&t<=0&&t==n[i+1]?n[i]+=e:0==e&&0==n[i]?n[i+1]+=t:r?(n[i]+=e,n[i+1]+=t):n.push(e,t)}function oc(n,e,t){if(0==t.length)return;let r=e.length-2>>1;if(r<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<r;)n.push(pr.empty);n.push(t)}}function rE(n,e,t){let r=n.inserted;for(let i=0,s=0,a=0;a<n.sections.length;){let c=n.sections[a++],f=n.sections[a++];if(f<0)i+=c,s+=c;else{let m=i,w=s,E=pr.empty;for(;m+=c,w+=f,f&&r&&(E=E.append(r[a-2>>1])),!(t||a==n.sections.length||n.sections[a+1]<0);)c=n.sections[a++],f=n.sections[a++];e(i,m,s,w,E),i=m,s=w}}}function iE(n,e,t,r=!1){let i=[],s=r?[]:null,a=new Hg(n),c=new Hg(e);for(let f=-1;;)if(-1==a.ins&&-1==c.ins){let m=Math.min(a.len,c.len);Es(i,m,-1),a.forward(m),c.forward(m)}else if(c.ins>=0&&(a.ins<0||f==a.i||0==a.off&&(c.len<a.len||c.len==a.len&&!t))){let m=c.len;for(Es(i,c.ins,-1);m;){let w=Math.min(a.len,m);a.ins>=0&&f<a.i&&a.len<=w&&(Es(i,0,a.ins),s&&oc(s,i,a.text),f=a.i),a.forward(w),m-=w}c.next()}else{if(!(a.ins>=0)){if(a.done&&c.done)return s?Pi.createSet(i,s):wl.create(i);throw new Error("Mismatched change set lengths")}{let m=0,w=a.len;for(;w;)if(-1==c.ins){let E=Math.min(w,c.len);m+=E,w-=E,c.forward(E)}else{if(!(0==c.ins&&c.len<w))break;w-=c.len,c.next()}Es(i,m,f<a.i?a.ins:0),s&&f<a.i&&oc(s,i,a.text),f=a.i,a.forward(a.len-w)}}}function _I(n,e,t=!1){let r=[],i=t?[]:null,s=new Hg(n),a=new Hg(e);for(let c=!1;;){if(s.done&&a.done)return i?Pi.createSet(r,i):wl.create(r);if(0==s.ins)Es(r,s.len,0,c),s.next();else if(0!=a.len||a.done){if(s.done||a.done)throw new Error("Mismatched change set lengths");{let f=Math.min(s.len2,a.len),m=r.length;if(-1==s.ins){let w=-1==a.ins?-1:a.off?0:a.ins;Es(r,f,w,c),i&&w&&oc(i,r,a.text)}else-1==a.ins?(Es(r,s.off?0:s.len,f,c),i&&oc(i,r,s.textBit(f))):(Es(r,s.off?0:s.len,a.off?0:a.ins,c),i&&!a.off&&oc(i,r,a.text));c=(s.ins>f||a.ins>=0&&a.len>f)&&(c||r.length>m),s.forward2(f),a.forward(f)}}else Es(r,0,a.ins,c),i&&oc(i,r,a.text),a.next()}}class Hg{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?pr.empty:e[t]}textBit(e){let{inserted:t}=this.set,r=this.i-2>>1;return r>=t.length&&!e?pr.empty:t[r].slice(this.off,null==e?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){-1==this.ins?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Md{constructor(e,t,r){this.from=e,this.to=t,this.flags=r}get anchor(){return 16&this.flags?this.to:this.from}get head(){return 16&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 4&this.flags?-1:8&this.flags?1:0}get bidiLevel(){let e=3&this.flags;return 3==e?null:e}get goalColumn(){let e=this.flags>>5;return 33554431==e?void 0:e}map(e,t=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,t):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new Md(r,i,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return Et.range(e,t);let r=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return Et.range(this.anchor,r)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||"number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid JSON representation for SelectionRange");return Et.range(e.anchor,e.head)}static create(e,t,r){return new Md(e,t,r)}}class Et{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:Et.create(this.ranges.map(r=>r.map(e,t)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new Et([this.main],0)}addRange(e,t=!0){return Et.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let r=this.ranges.slice();return r[t]=e,Et.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||"number"!=typeof e.main||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Et(e.ranges.map(t=>Md.fromJSON(t)),e.main)}static single(e,t=e){return new Et([Et.range(e,t)],0)}static create(e,t=0){if(0==e.length)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return Et.normalized(e.slice(),t);r=s.to}return new Et(e,t)}static cursor(e,t=0,r,i){return Md.create(e,e,(0==t?0:t<0?4:8)|(null==r?3:Math.min(2,r))|(i??33554431)<<5)}static range(e,t,r,i){let s=(r??33554431)<<5|(null==i?3:Math.min(2,i));return t<e?Md.create(t,e,24|s):Md.create(e,t,(t>e?4:0)|s)}static normalized(e,t=0){let r=e[t];e.sort((i,s)=>i.from-s.from),t=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],a=e[i-1];if(s.empty?s.from<=a.to:s.from<a.to){let c=a.from,f=Math.max(s.to,a.to);i<=t&&t--,e.splice(--i,2,s.anchor>s.head?Et.range(f,c):Et.range(c,f))}}return new Et(e,t)}}function MI(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let sE=0;class tn{constructor(e,t,r,i,s){this.combine=e,this.compareInput=t,this.compare=r,this.isStatic=i,this.id=sE++,this.default=e([]),this.extensions="function"==typeof s?s(this):s}static define(e={}){return new tn(e.combine||(t=>t),e.compareInput||((t,r)=>t===r),e.compare||(e.combine?(t,r)=>t===r:oE),!!e.static,e.enables)}of(e){return new u0([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new u0(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new u0(e,this,2,t)}from(e,t){return t||(t=r=>r),this.compute([e],r=>t(r.field(e)))}}function oE(n,e){return n==e||n.length==e.length&&n.every((t,r)=>t===e[r])}class u0{constructor(e,t,r,i){this.dependencies=e,this.facet=t,this.type=r,this.value=i,this.id=sE++}dynamicSlot(e){var t;let r=this.value,i=this.facet.compareInput,s=this.id,a=e[s]>>1,c=2==this.type,f=!1,m=!1,w=[];for(let E of this.dependencies)"doc"==E?f=!0:"selection"==E?m=!0:1&(null!==(t=e[E.id])&&void 0!==t?t:1)||w.push(e[E.id]);return{create:E=>(E.values[a]=r(E),1),update(E,R){if(f&&R.docChanged||m&&(R.docChanged||R.selection)||aE(E,w)){let j=r(E);if(c?!AI(j,E.values[a],i):!i(j,E.values[a]))return E.values[a]=j,1}return 0},reconfigure:(E,R)=>{let j,re=R.config.address[s];if(null!=re){let xe=h0(R,re);if(this.dependencies.every(ke=>ke instanceof tn?R.facet(ke)===E.facet(ke):!(ke instanceof Ei)||R.field(ke,!1)==E.field(ke,!1))||(c?AI(j=r(E),xe,i):i(j=r(E),xe)))return E.values[a]=xe,0}else j=r(E);return E.values[a]=j,1}}}}function AI(n,e,t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!t(n[r],e[r]))return!1;return!0}function aE(n,e){let t=!1;for(let r of e)1&jg(n,r)&&(t=!0);return t}function i4(n,e,t){let r=t.map(f=>n[f.id]),i=t.map(f=>f.type),s=r.filter(f=>!(1&f)),a=n[e.id]>>1;function c(f){let m=[];for(let w=0;w<r.length;w++){let E=h0(f,r[w]);if(2==i[w])for(let R of E)m.push(R);else m.push(E)}return e.combine(m)}return{create(f){for(let m of r)jg(f,m);return f.values[a]=c(f),1},update(f,m){if(!aE(f,s))return 0;let w=c(f);return e.compare(w,f.values[a])?0:(f.values[a]=w,1)},reconfigure(f,m){let w=aE(f,r),E=m.config.facets[e.id],R=m.facet(e);if(E&&!w&&oE(t,E))return f.values[a]=R,0;let j=c(f);return e.compare(j,R)?(f.values[a]=R,0):(f.values[a]=j,1)}}}const TI=tn.define({static:!0});class Ei{constructor(e,t,r,i,s){this.id=e,this.createF=t,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let t=new Ei(sE++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){return(e.facet(TI).find(r=>r.field==this)?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:r=>(r.values[t]=this.create(r),1),update:(r,i)=>{let s=r.values[t],a=this.updateF(s,i);return this.compareF(s,a)?0:(r.values[t]=a,1)},reconfigure:(r,i)=>null!=i.config.address[this.id]?(r.values[t]=i.field(this),0):(r.values[t]=this.create(r),1)}}init(e){return[this,TI.of({field:this,create:e})]}get extension(){return this}}function zg(n){return e=>new II(e,n)}const Td={highest:zg(0),high:zg(1),default:zg(2),low:zg(3),lowest:zg(4)};class II{constructor(e,t){this.inner=e,this.prec=t}}class c0{of(e){return new lE(this,e)}reconfigure(e){return c0.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class lE{constructor(e,t){this.compartment=e,this.inner=t}}class d0{constructor(e,t,r,i,s,a){for(this.base=e,this.compartments=t,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=a,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return null==t?e.default:this.staticValues[t>>1]}static resolve(e,t,r){let i=[],s=Object.create(null),a=new Map;for(let R of function s4(n,e,t){let r=[[],[],[],[],[]],i=new Map;return function s(a,c){let f=i.get(a);if(null!=f){if(f<=c)return;let m=r[f].indexOf(a);m>-1&&r[f].splice(m,1),a instanceof lE&&t.delete(a.compartment)}if(i.set(a,c),Array.isArray(a))for(let m of a)s(m,c);else if(a instanceof lE){if(t.has(a.compartment))throw new RangeError("Duplicate use of compartment in extensions");let m=e.get(a.compartment)||a.inner;t.set(a.compartment,m),s(m,c)}else if(a instanceof II)s(a.inner,a.prec);else if(a instanceof Ei)r[c].push(a),a.provides&&s(a.provides,c);else if(a instanceof u0)r[c].push(a),a.facet.extensions&&s(a.facet.extensions,2);else{let m=a.extension;if(!m)throw new Error(`Unrecognized extension value in extension set (${a}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(m,c)}}(n,2),r.reduce((a,c)=>a.concat(c))}(e,t,a))R instanceof Ei?i.push(R):(s[R.facet.id]||(s[R.facet.id]=[])).push(R);let c=Object.create(null),f=[],m=[];for(let R of i)c[R.id]=m.length<<1,m.push(j=>R.slot(j));let w=r?.config.facets;for(let R in s){let j=s[R],re=j[0].facet,xe=w&&w[R]||[];if(j.every(ke=>0==ke.type))if(c[re.id]=f.length<<1|1,oE(xe,j))f.push(r.facet(re));else{let ke=re.combine(j.map(Ve=>Ve.value));f.push(r&&re.compare(ke,r.facet(re))?r.facet(re):ke)}else{for(let ke of j)0==ke.type?(c[ke.id]=f.length<<1|1,f.push(ke.value)):(c[ke.id]=m.length<<1,m.push(Ve=>ke.dynamicSlot(Ve)));c[re.id]=m.length<<1,m.push(ke=>i4(ke,re,j))}}let E=m.map(R=>R(c));return new d0(e,a,E,c,f,s)}}function jg(n,e){if(1&e)return 2;let t=e>>1,r=n.status[t];if(4==r)throw new Error("Cyclic dependency between fields and/or facets");if(2&r)return r;n.status[t]=4;let i=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|i}function h0(n,e){return 1&e?n.config.staticValues[e>>1]:n.values[e>>1]}const kI=tn.define(),OI=tn.define({combine:n=>n.some(e=>e),static:!0}),RI=tn.define({combine:n=>n.length?n[0]:void 0,static:!0}),NI=tn.define(),PI=tn.define(),LI=tn.define(),FI=tn.define({combine:n=>!!n.length&&n[0]});class hu{constructor(e,t){this.type=e,this.value=t}static define(){return new o4}}class o4{of(e){return new hu(this,e)}}class a4{constructor(e){this.map=e}of(e){return new $n(this,e)}}let $n=(()=>{class n{constructor(t,r){this.type=t,this.value=r}map(t){let r=this.type.map(this.value,t);return void 0===r?void 0:r==this.value?this:new n(this.type,r)}is(t){return this.type==t}static define(t={}){return new a4(t.map||(r=>r))}static mapEffects(t,r){if(!t.length)return t;let i=[];for(let s of t){let a=s.map(r);a&&i.push(a)}return i}}return n.reconfigure=n.define(),n.appendConfig=n.define(),n})(),Dl=(()=>{class n{constructor(t,r,i,s,a,c){this.startState=t,this.changes=r,this.selection=i,this.effects=s,this.annotations=a,this.scrollIntoView=c,this._doc=null,this._state=null,i&&MI(i,r.newLength),a.some(f=>f.type==n.time)||(this.annotations=a.concat(n.time.of(Date.now())))}static create(t,r,i,s,a,c){return new n(t,r,i,s,a,c)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(t){for(let r of this.annotations)if(r.type==t)return r.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(t){let r=this.annotation(n.userEvent);return!(!r||!(r==t||r.length>t.length&&r.slice(0,t.length)==t&&"."==r[t.length]))}}return n.time=hu.define(),n.userEvent=hu.define(),n.addToHistory=hu.define(),n.remote=hu.define(),n})();function l4(n,e){let t=[];for(let r=0,i=0;;){let s,a;if(r<n.length&&(i==e.length||e[i]>=n[r]))s=n[r++],a=n[r++];else{if(!(i<e.length))return t;s=e[i++],a=e[i++]}!t.length||t[t.length-1]<s?t.push(s,a):t[t.length-1]<a&&(t[t.length-1]=a)}}function BI(n,e,t){var r;let i,s,a;return t?(i=e.changes,s=Pi.empty(e.changes.length),a=n.changes.compose(e.changes)):(i=e.changes.map(n.changes),s=n.changes.mapDesc(e.changes,!0),a=n.changes.compose(i)),{changes:a,selection:e.selection?e.selection.map(s):null===(r=n.selection)||void 0===r?void 0:r.map(i),effects:$n.mapEffects(n.effects,i).concat($n.mapEffects(e.effects,s)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function uE(n,e,t){let r=e.selection,i=wf(e.annotations);return e.userEvent&&(i=i.concat(Dl.userEvent.of(e.userEvent))),{changes:e.changes instanceof Pi?e.changes:Pi.of(e.changes||[],t,n.facet(RI)),selection:r&&(r instanceof Et?r:Et.single(r.anchor,r.head)),effects:wf(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function VI(n,e,t){let r=uE(n,e.length?e[0]:{},n.doc.length);e.length&&!1===e[0].filter&&(t=!1);for(let s=1;s<e.length;s++){!1===e[s].filter&&(t=!1);let a=!!e[s].sequential;r=BI(r,uE(n,e[s],a?r.changes.newLength:n.doc.length),a)}let i=Dl.create(n,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return function c4(n){let e=n.startState,t=e.facet(LI),r=n;for(let i=t.length-1;i>=0;i--){let s=t[i](n);s&&Object.keys(s).length&&(r=BI(r,uE(e,s,n.changes.newLength),!0))}return r==n?n:Dl.create(e,n.changes,n.selection,r.effects,r.annotations,r.scrollIntoView)}(t?function u4(n){let e=n.startState,t=!0;for(let i of e.facet(NI)){let s=i(n);if(!1===s){t=!1;break}Array.isArray(s)&&(t=!0===t?s:l4(t,s))}if(!0!==t){let i,s;if(!1===t)s=n.changes.invertedDesc,i=Pi.empty(e.doc.length);else{let a=n.changes.filter(t);i=a.changes,s=a.filtered.mapDesc(a.changes).invertedDesc}n=Dl.create(e,i,n.selection&&n.selection.map(s),$n.mapEffects(n.effects,s),n.annotations,n.scrollIntoView)}let r=e.facet(PI);for(let i=r.length-1;i>=0;i--){let s=r[i](n);n=s instanceof Dl?s:Array.isArray(s)&&1==s.length&&s[0]instanceof Dl?s[0]:VI(e,wf(s),!1)}return n}(i):i)}const d4=[];function wf(n){return null==n?d4:Array.isArray(n)?n:[n]}var Ur=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(Ur||(Ur={}));const h4=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let cE;try{cE=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}let Gs=(()=>{class n{constructor(t,r,i,s,a,c){this.config=t,this.doc=r,this.selection=i,this.values=s,this.status=t.statusTemplate.slice(),this.computeSlot=a,c&&(c._state=this);for(let f=0;f<this.config.dynamicSlots.length;f++)jg(this,f<<1);this.computeSlot=null}field(t,r=!0){let i=this.config.address[t.id];if(null!=i)return jg(this,i),h0(this,i);if(r)throw new RangeError("Field is not present in this state")}update(...t){return VI(this,t,!0)}applyTransaction(t){let a,r=this.config,{base:i,compartments:s}=r;for(let c of t.effects)c.is(c0.reconfigure)?(r&&(s=new Map,r.compartments.forEach((f,m)=>s.set(m,f)),r=null),s.set(c.value.compartment,c.value.extension)):c.is($n.reconfigure)?(r=null,i=c.value):c.is($n.appendConfig)&&(r=null,i=wf(i).concat(c.value));r?a=t.startState.values.slice():(r=d0.resolve(i,s,this),a=new n(r,this.doc,this.selection,r.dynamicSlots.map(()=>null),(f,m)=>m.reconfigure(f,this),null).values),new n(r,t.newDoc,t.newSelection,a,(c,f)=>f.update(c,t),t)}replaceSelection(t){return"string"==typeof t&&(t=this.toText(t)),this.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:t},range:Et.cursor(r.from+t.length)}))}changeByRange(t){let r=this.selection,i=t(r.ranges[0]),s=this.changes(i.changes),a=[i.range],c=wf(i.effects);for(let f=1;f<r.ranges.length;f++){let m=t(r.ranges[f]),w=this.changes(m.changes),E=w.map(s);for(let j=0;j<f;j++)a[j]=a[j].map(E);let R=s.mapDesc(w,!0);a.push(m.range.map(R)),s=s.compose(E),c=$n.mapEffects(c,E).concat($n.mapEffects(wf(m.effects),R))}return{changes:s,selection:Et.create(a,r.mainIndex),effects:c}}changes(t=[]){return t instanceof Pi?t:Pi.of(t,this.doc.length,this.facet(n.lineSeparator))}toText(t){return pr.of(t.split(this.facet(n.lineSeparator)||nE))}sliceDoc(t=0,r=this.doc.length){return this.doc.sliceString(t,r,this.lineBreak)}facet(t){let r=this.config.address[t.id];return null==r?t.default:(jg(this,r),h0(this,r))}toJSON(t){let r={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(t)for(let i in t){let s=t[i];s instanceof Ei&&null!=this.config.address[s.id]&&(r[i]=s.spec.toJSON(this.field(t[i]),this))}return r}static fromJSON(t,r={},i){if(!t||"string"!=typeof t.doc)throw new RangeError("Invalid JSON representation for EditorState");let s=[];if(i)for(let a in i)if(Object.prototype.hasOwnProperty.call(t,a)){let c=i[a],f=t[a];s.push(c.init(m=>c.spec.fromJSON(f,m)))}return n.create({doc:t.doc,selection:Et.fromJSON(t.selection),extensions:r.extensions?s.concat([r.extensions]):s})}static create(t={}){let r=d0.resolve(t.extensions||[],new Map),i=t.doc instanceof pr?t.doc:pr.of((t.doc||"").split(r.staticFacet(n.lineSeparator)||nE)),s=t.selection?t.selection instanceof Et?t.selection:Et.single(t.selection.anchor,t.selection.head):Et.single(0);return MI(s,i.length),r.staticFacet(OI)||(s=s.asSingle()),new n(r,i,s,r.dynamicSlots.map(()=>null),(a,c)=>c.create(a),null)}get tabSize(){return this.facet(n.tabSize)}get lineBreak(){return this.facet(n.lineSeparator)||"\n"}get readOnly(){return this.facet(FI)}phrase(t,...r){for(let i of this.facet(n.phrases))if(Object.prototype.hasOwnProperty.call(i,t)){t=i[t];break}return r.length&&(t=t.replace(/\$(\$|\d*)/g,(i,s)=>{if("$"==s)return"$";let a=+(s||1);return!a||a>r.length?i:r[a-1]})),t}languageDataAt(t,r,i=-1){let s=[];for(let a of this.facet(kI))for(let c of a(this,r,i))Object.prototype.hasOwnProperty.call(c,t)&&s.push(c[t]);return s}charCategorizer(t){return function p4(n){return e=>{if(!/\S/.test(e))return Ur.Space;if(function f4(n){if(cE)return cE.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||h4.test(t)))return!0}return!1}(e))return Ur.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return Ur.Word;return Ur.Other}}(this.languageDataAt("wordChars",t).join(""))}wordAt(t){let{text:r,from:i,length:s}=this.doc.lineAt(t),a=this.charCategorizer(t),c=t-i,f=t-i;for(;c>0;){let m=js(r,c,!1);if(a(r.slice(m,c))!=Ur.Word)break;c=m}for(;f<s;){let m=js(r,f);if(a(r.slice(f,m))!=Ur.Word)break;f=m}return c==f?null:Et.range(c+i,f+i)}}return n.allowMultipleSelections=OI,n.tabSize=tn.define({combine:e=>e.length?e[0]:4}),n.lineSeparator=RI,n.readOnly=FI,n.phrases=tn.define({compare(e,t){let r=Object.keys(e),i=Object.keys(t);return r.length==i.length&&r.every(s=>e[s]==t[s])}}),n.languageData=kI,n.changeFilter=NI,n.transactionFilter=PI,n.transactionExtender=LI,n})();function Na(n,e,t={}){let r={};for(let i of n)for(let s of Object.keys(i)){let a=i[s],c=r[s];if(void 0===c)r[s]=a;else if(c!==a&&void 0!==a){if(!Object.hasOwnProperty.call(t,s))throw new Error("Config merge conflict for field "+s);r[s]=t[s](c,a)}}for(let i in e)void 0===r[i]&&(r[i]=e[i]);return r}c0.reconfigure=$n.define();class Id{eq(e){return this==e}range(e,t=e){return Ug.create(e,t,this)}}Id.prototype.startSide=Id.prototype.endSide=0,Id.prototype.point=!1,Id.prototype.mapMode=Us.TrackDel;class Ug{constructor(e,t,r){this.from=e,this.to=t,this.value=r}static create(e,t,r){return new Ug(e,t,r)}}function dE(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class hE{constructor(e,t,r,i){this.from=e,this.to=t,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,t,r,i=0){let s=r?this.to:this.from;for(let a=i,c=s.length;;){if(a==c)return a;let f=a+c>>1,m=s[f]-e||(r?this.value[f].endSide:this.value[f].startSide)-t;if(f==a)return m>=0?a:c;m>=0?c=f:a=f+1}}between(e,t,r,i){for(let s=this.findIndex(t,-1e9,!0),a=this.findIndex(r,1e9,!1,s);s<a;s++)if(!1===i(this.from[s]+e,this.to[s]+e,this.value[s]))return!1}map(e,t){let r=[],i=[],s=[],a=-1,c=-1;for(let f=0;f<this.value.length;f++){let R,j,m=this.value[f],w=this.from[f]+e,E=this.to[f]+e;if(w==E){let re=t.mapPos(w,m.startSide,m.mapMode);if(null==re||(R=j=re,m.startSide!=m.endSide&&(j=t.mapPos(w,m.endSide),j<R)))continue}else if(R=t.mapPos(w,m.startSide),j=t.mapPos(E,m.endSide),R>j||R==j&&m.startSide>0&&m.endSide<=0)continue;(j-R||m.endSide-m.startSide)<0||(a<0&&(a=R),m.point&&(c=Math.max(c,j-R)),r.push(m),i.push(R-a),s.push(j-a))}return{mapped:r.length?new hE(i,s,r,c):null,pos:a}}}let Qr=(()=>{class n{constructor(t,r,i,s){this.chunkPos=t,this.chunk=r,this.nextLayer=i,this.maxPoint=s}static create(t,r,i,s){return new n(t,r,i,s)}get length(){let t=this.chunk.length-1;return t<0?0:Math.max(this.chunkEnd(t),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let t=this.nextLayer.size;for(let r of this.chunk)t+=r.value.length;return t}chunkEnd(t){return this.chunkPos[t]+this.chunk[t].length}update(t){let{add:r=[],sort:i=!1,filterFrom:s=0,filterTo:a=this.length}=t,c=t.filter;if(0==r.length&&!c)return this;if(i&&(r=r.slice().sort(dE)),this.isEmpty)return r.length?n.of(r):this;let f=new zI(this,null,-1).goto(0),m=0,w=[],E=new ac;for(;f.value||m<r.length;)if(m<r.length&&(f.from-r[m].from||f.startSide-r[m].value.startSide)>=0){let R=r[m++];E.addInner(R.from,R.to,R.value)||w.push(R)}else 1==f.rangeIndex&&f.chunkIndex<this.chunk.length&&(m==r.length||this.chunkEnd(f.chunkIndex)<r[m].from)&&(!c||s>this.chunkEnd(f.chunkIndex)||a<this.chunkPos[f.chunkIndex])&&E.addChunk(this.chunkPos[f.chunkIndex],this.chunk[f.chunkIndex])?f.nextChunk():((!c||s>f.to||a<f.from||c(f.from,f.to,f.value))&&(E.addInner(f.from,f.to,f.value)||w.push(Ug.create(f.from,f.to,f.value))),f.next());return E.finishInner(this.nextLayer.isEmpty&&!w.length?n.empty:this.nextLayer.update({add:w,filter:c,filterFrom:s,filterTo:a}))}map(t){if(t.empty||this.isEmpty)return this;let r=[],i=[],s=-1;for(let c=0;c<this.chunk.length;c++){let f=this.chunkPos[c],m=this.chunk[c],w=t.touchesRange(f,f+m.length);if(!1===w)s=Math.max(s,m.maxPoint),r.push(m),i.push(t.mapPos(f));else if(!0===w){let{mapped:E,pos:R}=m.map(f,t);E&&(s=Math.max(s,E.maxPoint),r.push(E),i.push(R))}}let a=this.nextLayer.map(t);return 0==r.length?a:new n(i,r,a||n.empty,s)}between(t,r,i){if(!this.isEmpty){for(let s=0;s<this.chunk.length;s++){let a=this.chunkPos[s],c=this.chunk[s];if(r>=a&&t<=a+c.length&&!1===c.between(a,t-a,r-a,i))return}this.nextLayer.between(t,r,i)}}iter(t=0){return Gg.from([this]).goto(t)}get isEmpty(){return this.nextLayer==this}static iter(t,r=0){return Gg.from(t).goto(r)}static compare(t,r,i,s,a=-1){let c=t.filter(R=>R.maxPoint>0||!R.isEmpty&&R.maxPoint>=a),f=r.filter(R=>R.maxPoint>0||!R.isEmpty&&R.maxPoint>=a),m=HI(c,f,i),w=new $g(c,m,a),E=new $g(f,m,a);i.iterGaps((R,j,re)=>jI(w,R,E,j,re,s)),i.empty&&0==i.length&&jI(w,0,E,0,0,s)}static eq(t,r,i=0,s){null==s&&(s=999999999);let a=t.filter(E=>!E.isEmpty&&r.indexOf(E)<0),c=r.filter(E=>!E.isEmpty&&t.indexOf(E)<0);if(a.length!=c.length)return!1;if(!a.length)return!0;let f=HI(a,c),m=new $g(a,f,0).goto(i),w=new $g(c,f,0).goto(i);for(;;){if(m.to!=w.to||!pE(m.active,w.active)||m.point&&(!w.point||!m.point.eq(w.point)))return!1;if(m.to>s)return!0;m.next(),w.next()}}static spans(t,r,i,s,a=-1){let c=new $g(t,null,a).goto(r),f=r,m=c.openStart;for(;;){let w=Math.min(c.to,i);if(c.point){let E=c.activeForPoint(c.to),R=c.pointFrom<r?E.length+1:Math.min(E.length,m);s.point(f,w,c.point,E,R,c.pointRank),m=Math.min(c.openEnd(w),E.length)}else w>f&&(s.span(f,w,c.active,m),m=c.openEnd(w));if(c.to>i)return m+(c.point&&c.to>i?1:0);f=c.to,c.next()}}static of(t,r=!1){let i=new ac;for(let s of t instanceof Ug?[t]:r?function g4(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let r=n[t];if(dE(e,r)>0)return n.slice().sort(dE);e=r}return n}(t):t)i.add(s.from,s.to,s.value);return i.finish()}}return n.empty=new n([],[],null,-1),n})();Qr.empty.nextLayer=Qr.empty;class ac{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new hE(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,t,r){this.addInner(e,t,r)||(this.nextLayer||(this.nextLayer=new ac)).add(e,t,r)}addInner(e,t,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(i<0||(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=t,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),0))}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let r=t.value.length-1;return this.last=t.value[r],this.lastFrom=t.from[r]+e,this.lastTo=t.to[r]+e,!0}finish(){return this.finishInner(Qr.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return e;let t=Qr.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function HI(n,e,t){let r=new Map;for(let s of n)for(let a=0;a<s.chunk.length;a++)s.chunk[a].maxPoint<=0&&r.set(s.chunk[a],s.chunkPos[a]);let i=new Set;for(let s of e)for(let a=0;a<s.chunk.length;a++){let c=r.get(s.chunk[a]);null!=c&&(t?t.mapPos(c):c)==s.chunkPos[a]&&!t?.touchesRange(c,c+s.chunk[a].length)&&i.add(s.chunk[a])}return i}class zI{constructor(e,t,r,i=0){this.layer=e,this.skip=t,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex];if(this.from=e+t.from[this.rangeIndex],this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Gg{constructor(e){this.heap=e}static from(e,t=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let a=e[s];!a.isEmpty;a=a.nextLayer)a.maxPoint>=r&&i.push(new zI(a,t,r,s));return 1==i.length?i[0]:new Gg(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let r of this.heap)r.goto(e,t);for(let r=this.heap.length>>1;r>=0;r--)fE(this.heap,r);return this.next(),this}forward(e,t){for(let r of this.heap)r.forward(e,t);for(let r=this.heap.length>>1;r>=0;r--)fE(this.heap,r);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),fE(this.heap,0)}}}function fE(n,e){for(let t=n[e];;){let r=1+(e<<1);if(r>=n.length)break;let i=n[r];if(r+1<n.length&&i.compare(n[r+1])>=0&&(i=n[r+1],r++),t.compare(i)<0)break;n[r]=t,n[e]=i,e=r}}class $g{constructor(e,t,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Gg.from(e,t,r)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){f0(this.active,e),f0(this.activeTo,e),f0(this.activeRank,e),this.minActive=UI(this.active,this.activeTo)}addActive(e){let t=0,{value:r,to:i,rank:s}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=s;)t++;p0(this.active,t,r),p0(this.activeTo,t,i),p0(this.activeRank,t,s),e&&p0(e,t,this.cursor.from),this.minActive=UI(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&f0(r,i)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let s=this.cursor.value;if(s.point){if(!(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(r),this.cursor.next()}}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&t.push(this.active[r]);return t.reverse()}openEnd(e){let t=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)t++;return t}}function jI(n,e,t,r,i,s){n.goto(e),t.goto(r);let a=r+i,c=r,f=r-e;for(;;){let m=n.to+f-t.to||n.endSide-t.endSide,w=m<0?n.to+f:t.to,E=Math.min(w,a);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&pE(n.activeForPoint(n.to+f),t.activeForPoint(t.to))||s.comparePoint(c,E,n.point,t.point):E>c&&!pE(n.active,t.active)&&s.compareRange(c,E,n.active,t.active),w>a)break;c=w,m<=0&&n.next(),m>=0&&t.next()}}function pE(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function f0(n,e){for(let t=e,r=n.length-1;t<r;t++)n[t]=n[t+1];n.pop()}function p0(n,e,t){for(let r=n.length-1;r>=e;r--)n[r+1]=n[r];n[e]=t}function UI(n,e){let t=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||n[i].endSide-n[t].endSide)<0&&(t=i,r=e[i]);return t}function Wg(n,e,t=n.length){let r=0;for(let i=0;i<t;)9==n.charCodeAt(i)?(r+=e-r%e,i++):(r++,i=js(n,i));return r}function gE(n,e,t,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==n.length)break;s+=9==n.charCodeAt(i)?t-s%t:1,i=js(n,i)}return!0===r?-1:n.length}const GI=typeof Symbol>"u"?"__\u037c":Symbol.for("\u037c"),vE=typeof Symbol>"u"?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),$I=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class lc{constructor(e,t){this.rules=[];let{finish:r}=t||{};function i(a){return/^@/.test(a)?[a]:a.split(/,\s*/)}function s(a,c,f,m){let w=[],E=/^@(\w+)\b/.exec(a[0]),R=E&&"keyframes"==E[1];if(E&&null==c)return f.push(a[0]+";");for(let j in c){let re=c[j];if(/&/.test(j))s(j.split(/,\s*/).map(xe=>a.map(ke=>xe.replace(/&/,ke))).reduce((xe,ke)=>xe.concat(ke)),re,f);else if(re&&"object"==typeof re){if(!E)throw new RangeError("The value of a property ("+j+") should be a primitive value.");s(i(j),re,w,R)}else null!=re&&w.push(j.replace(/_.*/,"").replace(/[A-Z]/g,xe=>"-"+xe.toLowerCase())+": "+re+";")}(w.length||R)&&f.push((!r||E||m?a:a.map(r)).join(", ")+" {"+w.join(" ")+"}")}for(let a in e)s(i(a),e[a],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let e=$I[GI]||1;return $I[GI]=e+1,"\u037c"+e.toString(36)}static mount(e,t){(e[vE]||new m4(e)).mount(Array.isArray(t)?t:[t])}}let g0=null;class m4{constructor(e){if(!e.head&&e.adoptedStyleSheets&&typeof CSSStyleSheet<"u"){if(g0)return e.adoptedStyleSheets=[g0.sheet,...e.adoptedStyleSheets],e[vE]=g0;this.sheet=new CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],g0=this}else{this.styleTag=(e.ownerDocument||e).createElement("style");let t=e.head||e;t.insertBefore(this.styleTag,t.firstChild)}this.modules=[],e[vE]=this}mount(e){let t=this.sheet,r=0,i=0;for(let s=0;s<e.length;s++){let a=e[s],c=this.modules.indexOf(a);if(c<i&&c>-1&&(this.modules.splice(c,1),i--,c=-1),-1==c){if(this.modules.splice(i++,0,a),t)for(let f=0;f<a.rules.length;f++)t.insertRule(a.rules[f],r++)}else{for(;i<c;)r+=this.modules[i++].rules.length;r+=a.rules.length,i++}}if(!t){let s="";for(let a=0;a<this.modules.length;a++)s+=this.modules[a].getRules()+"\n";this.styleTag.textContent=s}}}for(var uc={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},qg={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},WI=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent),v4=(typeof navigator<"u"&&/Gecko\/\d+/.test(navigator.userAgent),typeof navigator<"u"&&/Mac/.test(navigator.platform)),y4=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),b4=v4||WI&&+WI[1]<57,os=0;os<10;os++)uc[48+os]=uc[96+os]=String(os);for(os=1;os<=24;os++)uc[os+111]="F"+os;for(os=65;os<=90;os++)uc[os]=String.fromCharCode(os+32),qg[os]=String.fromCharCode(os);for(var yE in uc)qg.hasOwnProperty(yE)||(qg[yE]=uc[yE]);function m0(n){let e;return e=11==n.nodeType?n.getSelection?n:n.ownerDocument:n,e.getSelection()}function Df(n,e){return!!e&&(n==e||n.contains(1!=e.nodeType?e.parentNode:e))}function v0(n,e){if(!e.anchorNode)return!1;try{return Df(n,e.anchorNode)}catch{return!1}}function Yg(n){return 3==n.nodeType?Ef(n,0,n.nodeValue.length).getClientRects():1==n.nodeType?n.getClientRects():[]}function y0(n,e,t,r){return!!t&&(qI(n,e,t,r,-1)||qI(n,e,t,r,1))}function b0(n){for(var e=0;;e++)if(!(n=n.previousSibling))return e}function qI(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:Xg(n))){if("DIV"==n.nodeName)return!1;let s=n.parentNode;if(!s||1!=s.nodeType)return!1;e=b0(n)+(i<0?0:1),n=s}else{if(1!=n.nodeType)return!1;if(1==(n=n.childNodes[e+(i<0?-1:0)]).nodeType&&"false"==n.contentEditable)return!1;e=i<0?Xg(n):0}}}function Xg(n){return 3==n.nodeType?n.nodeValue.length:n.childNodes.length}const YI={left:0,right:0,top:0,bottom:0};function bE(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function x4(n){return{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}class S4{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,t,r,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=r,this.focusOffset=i}}let KI,xf=null;function XI(n){if(n.setActive)return n.setActive();if(xf)return n.focus(xf);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(null==xf?{get preventScroll(){return xf={preventScroll:!0},!0}}:void 0),!xf){xf=!1;for(let t=0;t<e.length;){let r=e[t++],i=e[t++],s=e[t++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}function Ef(n,e,t=e){let r=KI||(KI=document.createRange());return r.setEnd(n,t),r.setStart(n,e),r}function Cf(n,e,t){let r={key:e,code:e,keyCode:t,which:t,cancelable:!0},i=new KeyboardEvent("keydown",r);i.synthetic=!0,n.dispatchEvent(i);let s=new KeyboardEvent("keyup",r);return s.synthetic=!0,n.dispatchEvent(s),i.defaultPrevented||s.defaultPrevented}function QI(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}class as{constructor(e,t,r=!0){this.node=e,this.offset=t,this.precise=r}static before(e,t){return new as(e.parentNode,b0(e),t)}static after(e,t){return new as(e.parentNode,b0(e)+1,t)}}const wE=[];class Fr{constructor(){this.parent=null,this.dom=null,this.dirty=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let r of this.children){if(r==e)return t;t+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,t){return null}sync(e,t){if(2&this.dirty){let s,r=this.dom,i=null;for(let a of this.children){if(a.dirty){if(!a.dom&&(s=i?i.nextSibling:r.firstChild)){let c=Fr.get(s);(!c||!c.parent&&c.canReuseDOM(a))&&a.reuseDOM(s)}a.sync(e,t),a.dirty=0}if(s=i?i.nextSibling:r.firstChild,t&&!t.written&&t.node==r&&s!=a.dom&&(t.written=!0),a.dom.parentNode==r)for(;s&&s!=a.dom;)s=JI(s);else r.insertBefore(a.dom,s);i=a.dom}for(s=i?i.nextSibling:r.firstChild,s&&t&&t.node==r&&(t.written=!0);s;)s=JI(s)}else if(1&this.dirty)for(let r of this.children)r.dirty&&(r.sync(e,t),r.dirty=0)}reuseDOM(e){}localPosFromDOM(e,t){let r;if(e==this.dom)r=this.dom.childNodes[t];else{let i=0==Xg(e)?0:0==t?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;0==i&&s.firstChild!=s.lastChild&&(i=e==s.firstChild?-1:1),e=s}r=i<0?e:e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!Fr.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let a=this.children[i];if(a.dom==r)return s;s+=a.length+a.breakAfter}}domBoundsAround(e,t,r=0){let i=-1,s=-1,a=-1,c=-1;for(let f=0,m=r,w=r;f<this.children.length;f++){let E=this.children[f],R=m+E.length;if(m<e&&R>t)return E.domBoundsAround(e,t,m);if(R>=e&&-1==i&&(i=f,s=m),m>t&&E.dom.parentNode==this.dom){a=f,c=w;break}w=R,m=R+E.breakAfter}return{from:s,to:c<0?r+this.length:c,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:a<this.children.length&&a>=0?this.children[a].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),1&t.dirty)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,r=wE){this.markDirty();for(let i=e;i<t;i++){let s=this.children[i];s.parent==this&&s.destroy()}this.children.splice(e,t-e,...r);for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new ZI(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,r,i,s,a){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor}getSide(){return 0}destroy(){this.parent=null}}function JI(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}Fr.prototype.breakAfter=0;class ZI{constructor(e,t,r){this.children=e,this.pos=t,this.i=r,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function ek(n,e,t,r,i,s,a,c,f){let{children:m}=n,w=m.length?m[e]:null,E=s.length?s[s.length-1]:null,R=E?E.breakAfter:a;if(!(e==r&&w&&!a&&!R&&s.length<2&&w.merge(t,i,s.length?E:null,0==t,c,f))){if(r<m.length){let j=m[r];j&&i<j.length?(e==r&&(j=j.split(i),i=0),!R&&E&&j.merge(0,i,E,!0,0,f)?s[s.length-1]=j:(i&&j.merge(0,i,null,!1,0,f),s.push(j))):j?.breakAfter&&(E?E.breakAfter=1:a=1),r++}for(w&&(w.breakAfter=a,t>0&&(!a&&s.length&&w.merge(t,w.length,s[0],!1,c,0)?w.breakAfter=s.shift().breakAfter:(t<w.length||w.children.length&&0==w.children[w.children.length-1].length)&&w.merge(t,w.length,null,!1,c,0),e++));e<r&&s.length;)if(m[r-1].become(s[s.length-1]))r--,s.pop(),f=s.length?0:c;else{if(!m[e].become(s[0]))break;e++,s.shift(),c=s.length?0:f}!s.length&&e&&r<m.length&&!m[e-1].breakAfter&&m[r].merge(0,0,m[e-1],!1,c,f)&&e--,(e<r||s.length)&&n.replaceChildren(e,r,s)}}function tk(n,e,t,r,i,s){let a=n.childCursor(),{i:c,off:f}=a.findPos(t,1),{i:m,off:w}=a.findPos(e,-1),E=e-t;for(let R of r)E+=R.length;n.length+=E,ek(n,m,w,c,f,r,0,i,s)}let Ro=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},DE=typeof document<"u"?document:{documentElement:{style:{}}};const xE=/Edge\/(\d+)/.exec(Ro.userAgent),nk=/MSIE \d/.test(Ro.userAgent),EE=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ro.userAgent),w0=!!(nk||EE||xE),rk=!w0&&/gecko\/(\d+)/i.test(Ro.userAgent),CE=!w0&&/Chrome\/(\d+)/.exec(Ro.userAgent),ik="webkitFontSmoothing"in DE.documentElement.style,sk=!w0&&/Apple Computer/.test(Ro.vendor),ok=sk&&(/Mobile\/\w+/.test(Ro.userAgent)||Ro.maxTouchPoints>2);var rn={mac:ok||/Mac/.test(Ro.platform),windows:/Win/.test(Ro.platform),linux:/Linux|X11/.test(Ro.platform),ie:w0,ie_version:nk?DE.documentMode||6:EE?+EE[1]:xE?+xE[1]:0,gecko:rk,gecko_version:rk?+(/Firefox\/(\d+)/.exec(Ro.userAgent)||[0,0])[1]:0,chrome:!!CE,chrome_version:CE?+CE[1]:0,ios:ok,android:/Android\b/.test(Ro.userAgent),webkit:ik,safari:sk,webkit_version:ik?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=DE.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class cc extends Fr{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){3==e.nodeType&&this.createDOM(e)}merge(e,t,r){return(!r||r instanceof cc&&!(this.length-(t-e)+r.length>256))&&(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new cc(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new as(this.dom,e)}domBoundsAround(e,t,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return SE(this.dom,e,t)}}class xl extends Fr{constructor(e,t=[],r=0){super(),this.mark=e,this.children=t,this.length=r;for(let i of t)i.setParent(this)}setAttrs(e){if(QI(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e,t){this.dom?4&this.dirty&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,r,i,s,a){return!(r&&(!(r instanceof xl&&r.mark.eq(this.mark))||e&&s<=0||t<this.length&&a<=0)||(tk(this,e,t,r?r.children:[],s-1,a-1),this.markDirty(),0))}split(e){let t=[],r=0,i=-1,s=0;for(let c of this.children){let f=r+c.length;f>e&&t.push(r<e?c.split(e-r):c),i<0&&r>=e&&(i=s),r=f,s++}let a=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new xl(this.mark,t,a)}domAtPos(e){return uk(this,e)}coordsAt(e,t){return dk(this,e,t)}}function SE(n,e,t){let r=n.nodeValue.length;e>r&&(e=r);let i=e,s=e,a=0;0==e&&t<0||e==r&&t>=0?rn.chrome||rn.gecko||(e?(i--,a=1):s<r&&(s++,a=-1)):t<0?i--:s<r&&s++;let c=Ef(n,i,s).getClientRects();if(!c.length)return YI;let f=c[(a?a<0:t>=0)?0:c.length-1];return rn.safari&&!a&&0==f.width&&(f=Array.prototype.find.call(c,m=>m.width)||f),a?bE(f,a<0):f||null}class dc extends Fr{constructor(e,t,r){super(),this.widget=e,this.length=t,this.side=r,this.prevWidget=null}static create(e,t,r){return new(e.customView||dc)(e,t,r)}split(e){let t=dc.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,r,i,s,a){return!(r&&(!(r instanceof dc&&this.widget.compare(r.widget))||e>0&&s<=0||t<this.length&&a<=0)||(this.length=e+(r?r.length:0)+(this.length-t),0))}become(e){return e.length==this.length&&e instanceof dc&&e.side==this.side&&this.widget.constructor==e.widget.constructor&&(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(0==this.length)return pr.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,r=t&&t.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):pr.empty}domAtPos(e){return(this.length?0==e:this.side>0)?as.before(this.dom):as.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let r=this.dom.getClientRects(),i=null;if(!r.length)return YI;for(let s=e>0?r.length-1:0;i=r[s],!(e>0?0==s:s==r.length-1||i.top<i.bottom);s+=e>0?-1:1);return this.length?i:bE(i,this.side>0)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class ak extends dc{domAtPos(e){let{topView:t,text:r}=this.widget;return t?_E(e,0,t,r,(i,s)=>i.domAtPos(s),i=>new as(r,Math.min(i,r.nodeValue.length))):new as(r,Math.min(e,r.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){let{topView:r,text:i}=this.widget;return r?lk(e,t,r,i):Math.min(t,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){let{topView:r,text:i}=this.widget;return r?_E(e,t,r,i,(s,a,c)=>s.coordsAt(a,c),(s,a)=>SE(i,s,a)):SE(i,e,t)}destroy(){var e;super.destroy(),null===(e=this.widget.topView)||void 0===e||e.destroy()}get isEditable(){return!0}canReuseDOM(){return!0}}function _E(n,e,t,r,i,s){if(t instanceof xl){for(let a=t.dom.firstChild;a;a=a.nextSibling){let c=Fr.get(a);if(!c)return s(n,e);let f=Df(a,r),m=c.length+(f?r.nodeValue.length:0);if(n<m||n==m&&c.getSide()<=0)return f?_E(n,e,c,r,i,s):i(c,n,e);n-=m}return i(t,t.length,-1)}return t.dom==r?s(n,e):i(t,n,e)}function lk(n,e,t,r){if(t instanceof xl){let i=0;for(let s of t.children){let a=Df(s.dom,r);if(Df(s.dom,n))return i+(a?lk(n,e,s,r):s.localPosFromDOM(n,e));i+=a?r.nodeValue.length:s.length}}else if(t.dom==r)return Math.min(e,r.nodeValue.length);return t.localPosFromDOM(n,e)}class kd extends Fr{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof kd&&e.side==this.side}split(){return new kd(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?as.before(this.dom):as.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){let t=this.dom.getBoundingClientRect(),r=function T4(n,e){let t=n.parent,r=t?t.children.indexOf(n):-1;for(;t&&r>=0;)if(e<0?r>0:r<t.children.length){let i=t.children[r+e];if(i instanceof cc){let s=i.coordsAt(e<0?i.length:0,e);if(s)return s}r+=e}else{if(!(t instanceof xl&&t.parent)){let i=t.dom.lastChild;if(i&&"BR"==i.nodeName)return i.getClientRects()[0];break}r=t.parent.children.indexOf(t)+(e<0?0:1),t=t.parent}}(this,this.side>0?-1:1);return r&&r.top<t.bottom&&r.bottom>t.top?{left:t.left,right:t.right,top:r.top,bottom:r.bottom}:t}get overrideDOMText(){return pr.empty}get isHidden(){return!0}}function uk(n,e){let t=n.dom,{children:r}=n,i=0;for(let s=0;i<r.length;i++){let a=r[i],c=s+a.length;if(!(c==s&&a.getSide()<=0)){if(e>s&&e<c&&a.dom.parentNode==t)return a.domAtPos(e-s);if(e<=s)break;s=c}}for(let s=i;s>0;s--){let a=r[s-1];if(a.dom.parentNode==t)return a.domAtPos(a.length)}for(let s=i;s<r.length;s++){let a=r[s];if(a.dom.parentNode==t)return a.domAtPos(0)}return new as(t,0)}function ck(n,e,t){let r,{children:i}=n;t>0&&e instanceof xl&&i.length&&(r=i[i.length-1])instanceof xl&&r.mark.eq(e.mark)?ck(r,e.children[0],t-1):(i.push(e),e.setParent(n)),n.length+=e.length}function dk(n,e,t){let r=null,i=-1,s=null,a=-1;!function c(m,w){for(let E=0,R=0;E<m.children.length&&R<=w;E++){let j=m.children[E],re=R+j.length;re>=w&&(j.children.length?c(j,w-R):(!s||s instanceof kd&&t>0)&&(re>w||R==re&&j.getSide()>0)?(s=j,a=w-R):(R<w||R==re&&j.getSide()<0)&&(r=j,i=w-R)),R=re}}(n,e);let f=(t<0?r:s)||r||s;return f?f.coordsAt(Math.max(0,f==r?i:a),t):function I4(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=Yg(e);return t[t.length-1]||null}(n)}function ME(n,e){for(let t in n)"class"==t&&e.class?e.class+=" "+n.class:"style"==t&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}function AE(n,e){if(n==e)return!0;if(!n||!e)return!1;let t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i of t)if(-1==r.indexOf(i)||n[i]!==e[i])return!1;return!0}function TE(n,e,t){let r=null;if(e)for(let i in e)t&&i in t||n.removeAttribute(r=i);if(t)for(let i in t)e&&e[i]==t[i]||n.setAttribute(r=i,t[i]);return!!r}cc.prototype.children=dc.prototype.children=kd.prototype.children=wE;class fu{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}get isHidden(){return!1}destroy(e){}}var _r=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(_r||(_r={}));class sn extends Id{constructor(e,t,r,i){super(),this.startSide=e,this.endSide=t,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new D0(e)}static widget(e){let t=e.side||0,r=!!e.block;return t+=r?t>0?3e8:-4e8:t>0?1e8:-1e8,new Od(e,t,t,r,e.widget||null,!1)}static replace(e){let r,i,t=!!e.block;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:a}=hk(e,t);r=(s?t?-3e8:-1:5e8)-1,i=1+(a?t?2e8:1:-6e8)}return new Od(e,r,i,t,e.widget||null,!0)}static line(e){return new Kg(e)}static set(e,t=!1){return Qr.of(e,t)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}sn.none=Qr.empty;class D0 extends sn{constructor(e){let{start:t,end:r}=hk(e);super(t?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof D0&&this.tagName==e.tagName&&this.class==e.class&&AE(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}D0.prototype.point=!1;class Kg extends sn{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Kg&&this.spec.class==e.spec.class&&AE(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Kg.prototype.mapMode=Us.TrackBefore,Kg.prototype.point=!0;class Od extends sn{constructor(e,t,r,i,s,a){super(t,r,s,e),this.block=i,this.isReplace=a,this.mapMode=i?t<=0?Us.TrackBefore:Us.TrackAfter:Us.TrackDel}get type(){return this.startSide<this.endSide?_r.WidgetRange:this.startSide<=0?_r.WidgetBefore:_r.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof Od&&function k4(n,e){return n==e||!!(n&&e&&n.compare(e))}(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}function hk(n,e=!1){let{inclusiveStart:t,inclusiveEnd:r}=n;return null==t&&(t=n.inclusive),null==r&&(r=n.inclusive),{start:t??e,end:r??e}}function IE(n,e,t,r=0){let i=t.length-1;i>=0&&t[i]+r>=n?t[i]=Math.max(t[i],e):t.push(n,e)}Od.prototype.point=!0;class $s extends Fr{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,r,i,s,a){if(r){if(!(r instanceof $s))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),tk(this,e,t,r?r.children:[],s,a),!0}split(e){let t=new $s;if(t.breakAfter=this.breakAfter,0==this.length)return t;let{i:r,off:i}=this.childPos(e);i&&(t.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)t.append(this.children[s],0);for(;r>0&&0==this.children[r-1].length;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){AE(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){ck(this,e,t)}addLineDeco(e){let t=e.spec.attributes,r=e.spec.class;t&&(this.attrs=ME(t,this.attrs||{})),r&&(this.attrs=ME({class:r},this.attrs||{}))}domAtPos(e){return uk(this,e)}reuseDOM(e){"DIV"==e.nodeName&&(this.setDOM(e),this.dirty|=6)}sync(e,t){var r;this.dom?4&this.dirty&&(QI(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(TE(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let i=this.dom.lastChild;for(;i&&Fr.get(i)instanceof xl;)i=i.lastChild;if(!(i&&this.length&&("BR"==i.nodeName||0!=(null===(r=Fr.get(i))||void 0===r?void 0:r.isEditable)||rn.ios&&this.children.some(s=>s instanceof cc)))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let t,e=0;for(let r of this.children){if(!(r instanceof cc)||/[^ -~]/.test(r.text))return null;let i=Yg(r.dom);if(1!=i.length)return null;e+=i[0].width,t=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let r=dk(this,e,t);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let a=(s-i.textHeight)/2;return{top:r.top+a,bottom:r.bottom-a,left:r.left,right:r.left}}}return r}become(e){return!1}get type(){return _r.Text}static find(e,t){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],a=i+s.length;if(a>=t){if(s instanceof $s)return s;if(a>t)break}i=a+s.breakAfter}return null}}class Rd extends Fr{constructor(e,t,r){super(),this.widget=e,this.length=t,this.type=r,this.breakAfter=0,this.prevWidget=null}merge(e,t,r,i,s,a){return!(r&&(!(r instanceof Rd&&this.widget.compare(r.widget))||e>0&&s<=0||t<this.length&&a<=0)||(this.length=e+(r?r.length:0)+(this.length-t),0))}domAtPos(e){return 0==e?as.before(this.dom):as.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let r=new Rd(this.widget,t,this.type);return r.breakAfter=this.breakAfter,r}get children(){return wE}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):pr.empty}domBoundsAround(){return null}become(e){return e instanceof Rd&&e.type==this.type&&e.widget.constructor==this.widget.constructor&&(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class kE{constructor(e,t,r,i){this.doc=e,this.pos=t,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Rd&&e.type==_r.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new $s),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(x0(new kd(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(e,t,r){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:a,done:c}=this.cursor.next(this.skip);if(this.skip=0,c)throw new Error("Ran out of text content when drawing inline views");if(a){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}this.text=s,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-r)),this.getLine().append(x0(new cc(this.text.slice(this.textOff,this.textOff+i)),t),r),this.atCursorPos=!0,this.textOff+=i,e-=i,r=0}}span(e,t,r,i){this.buildText(t-e,r,i),this.pos=t,this.openStart<0&&(this.openStart=i)}point(e,t,r,i,s,a){if(this.disallowBlockEffectsFor[a]&&r instanceof Od){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let c=t-e;if(r instanceof Od)if(r.block){let{type:f}=r;f==_r.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Rd(r.widget||new fk("div"),c,f))}else{let f=dc.create(r.widget||new fk("span"),c,c?0:r.startSide),m=this.atCursorPos&&!f.isEditable&&s<=i.length&&(e<t||r.startSide>0),w=!f.isEditable&&(e<t||s>i.length||r.startSide<=0),E=this.getLine();2==this.pendingBuffer&&!m&&!f.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),m&&(E.append(x0(new kd(1),i),s),s=i.length+Math.max(0,s-i.length)),E.append(x0(f,i),s),this.atCursorPos=w,this.pendingBuffer=w?e<t||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);c&&(this.textOff+c<=this.text.length?this.textOff+=c:(this.skip+=c-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=s)}static build(e,t,r,i,s){let a=new kE(e,t,r,s);return a.openEnd=Qr.spans(i,t,r,a),a.openStart<0&&(a.openStart=a.openEnd),a.finish(a.openEnd),a}}function x0(n,e){for(let t of e)n=new xl(t,[n],n.length);return n}class fk extends fu{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}const pk=tn.define(),gk=tn.define(),mk=tn.define(),vk=tn.define(),OE=tn.define(),yk=tn.define(),bk=tn.define(),wk=tn.define({combine:n=>n.some(e=>e)}),Dk=tn.define({combine:n=>n.some(e=>e)});class E0{constructor(e,t="nearest",r="nearest",i=5,s=5){this.range=e,this.y=t,this.x=r,this.yMargin=i,this.xMargin=s}map(e){return e.empty?this:new E0(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const xk=$n.define({map:(n,e)=>n.map(e)});function No(n,e,t){let r=n.facet(vk);r.length?r[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const C0=tn.define({combine:n=>!n.length||n[0]});let O4=0;const Qg=tn.define();class oi{constructor(e,t,r,i){this.id=e,this.create=t,this.domEventHandlers=r,this.extension=i(this)}static define(e,t){const{eventHandlers:r,provide:i,decorations:s}=t||{};return new oi(O4++,e,r,a=>{let c=[Qg.of(a)];return s&&c.push(Jg.of(f=>{let m=f.plugin(a);return m?s(m):sn.none})),i&&c.push(i(a)),c})}static fromClass(e,t){return oi.define(r=>new e(r),t)}}class RE{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(r){if(No(t.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){No(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(null!==(t=this.value)&&void 0!==t&&t.destroy)try{this.value.destroy()}catch(r){No(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Ek=tn.define(),S0=tn.define(),Jg=tn.define(),Ck=tn.define(),Sk=tn.define(),Zg=tn.define();class Pa{constructor(e,t,r,i){this.fromA=e,this.toA=t,this.fromB=r,this.toB=i}join(e){return new Pa(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,r=this;for(;t>0;t--){let i=e[t-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(t-1,1)}}return e.splice(t,0,r),e}static extendWithRanges(e,t){if(0==t.length)return e;let r=[];for(let i=0,s=0,a=0,c=0;;i++){let f=i==e.length?null:e[i],m=a-c,w=f?f.fromB:1e9;for(;s<t.length&&t[s]<w;){let R=t[s+1],j=Math.max(c,t[s]),re=Math.min(w,R);if(j<=re&&new Pa(j+m,re+m,j,re).addToSet(r),R>w)break;s+=2}if(!f)return r;new Pa(f.fromA,f.toA,f.fromB,f.toB).addToSet(r),a=f.toA,c=f.toB}}}class _0{constructor(e,t,r){this.view=e,this.state=t,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=Pi.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,a,c,f)=>i.push(new Pa(s,a,c,f))),this.changedRanges=i}static create(e,t,r){return new _0(e,t,r)}get viewportChanged(){return(4&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(10&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return 0==this.flags&&0==this.transactions.length}}var Jr=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(Jr||(Jr={}));const NE=Jr.LTR,R4=Jr.RTL;function _k(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const N4=_k("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),P4=_k("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),PE=Object.create(null),El=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);PE[e]=t,PE[t]=-e}function L4(n){return n<=247?N4[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?P4[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8203?256:64336<=n&&n<=65023?4:8204==n?256:1}const F4=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Sf{constructor(e,t,r){this.from=e,this.to=t,this.level=r}get dir(){return this.level%2?R4:NE}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,r,i){let s=-1;for(let a=0;a<e.length;a++){let c=e[a];if(c.from<=t&&c.to>=t){if(c.level==r)return a;(s<0||(0!=i?i<0?c.from<t:c.to>t:e[s].level>c.level))&&(s=a)}}if(s<0)throw new RangeError("Index out of range");return s}}const Zr=[];function Ak(n){return[new Sf(0,n,0)]}let Tk="";function Ik(n,e,t,r,i){var s;let a=r.head-n.from,c=-1;if(0==a){if(!i||!n.length)return null;e[0].level!=t&&(a=e[0].side(!1,t),c=0)}else if(a==n.length){if(i)return null;let R=e[e.length-1];R.level!=t&&(a=R.side(!0,t),c=e.length-1)}c<0&&(c=Sf.find(e,a,null!==(s=r.bidiLevel)&&void 0!==s?s:-1,r.assoc));let f=e[c];a==f.side(i,t)&&(f=e[c+=i?1:-1],a=f.side(!i,t));let m=i==(f.dir==t),w=js(n.text,a,m);if(Tk=n.text.slice(Math.min(a,w),Math.max(a,w)),w!=f.side(i,t))return Et.cursor(w+n.from,m?-1:1,f.level);let E=c==(i?e.length-1:0)?null:e[c+(i?1:-1)];return E||f.level==t?E&&E.level<f.level?Et.cursor(E.side(!i,t)+n.from,i?1:-1,E.level):Et.cursor(w+n.from,i?-1:1,f.level):Et.cursor(i?n.to:n.from,i?-1:1,t)}class kk{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Gs.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+="\uffff"}readRange(e,t){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i),this.readNode(i);let s=i.nextSibling;if(s==t)break;let a=Fr.get(i),c=Fr.get(s);(a&&c?a.breakAfter:(a?a.breakAfter:Ok(i))||Ok(s)&&("BR"!=i.nodeName||i.cmIgnore))&&this.lineBreak(),i=s}return this.findPointBefore(r,t),this}readTextNode(e){let t=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,t.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let c,s=-1,a=1;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,r),a=this.lineSeparator.length):(c=i.exec(t))&&(s=c.index,a=c[0].length),this.append(t.slice(r,s<0?t.length:s)),s<0)break;if(this.lineBreak(),a>1)for(let f of this.points)f.node==e&&f.pos>this.text.length&&(f.pos-=a-1);r=s+a}}readNode(e){if(e.cmIgnore)return;let t=Fr.get(e),r=t&&t.overrideDOMText;if(null!=r){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else 3==e.nodeType?this.readTextNode(e):"BR"==e.nodeName?e.nextSibling&&this.lineBreak():1==e.nodeType&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==t&&(r.pos=this.text.length)}findPointInside(e,t){for(let r of this.points)(3==e.nodeType?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+Math.min(t,r.offset))}}function Ok(n){return 1==n.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}class Rk{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class Nk extends Fr{constructor(e){super(),this.view=e,this.compositionDeco=sn.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new $s],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Pa(0,0,0,e.state.doc.length)],0)}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every(({fromA:a,toA:c})=>c<this.minWidthFrom||a>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=sn.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=function V4(n,e){let t=Lk(n);if(!t)return sn.none;let{from:r,to:i,node:s,text:a}=t,c=e.mapPos(r,1),f=Math.max(c,e.mapPos(i,-1)),{state:m}=n,w=3==s.nodeType?s.nodeValue:new kk([],m).readRange(s.firstChild,null).text;if(f-c<w.length)if(m.doc.sliceString(c,Math.min(m.doc.length,c+w.length),"\uffff")==w)f=c+w.length;else{if(m.doc.sliceString(Math.max(0,f-w.length),f,"\uffff")!=w)return sn.none;c=f-w.length}else if(m.doc.sliceString(c,f,"\uffff")!=w)return sn.none;let E=Fr.get(s);return E instanceof ak?E=E.widget.topView:E&&(E.parent=null),sn.set(sn.replace({widget:new H4(s,a,E),inclusive:!0}).range(c,f))}(this.view,e.changes)),(rn.ie||rn.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let s=function U4(n,e,t){let r=new j4;return Qr.compare(n,e,t,r),r.changes}(this.decorations,this.updateDeco(),e.changes);return t=Pa.extendWithRanges(t,s),(0!=this.dirty||0!=t.length)&&(this.updateInner(t,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let s=rn.chrome||rn.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,s),this.dirty=0,s&&(s.written||r.selectionRange.focusNode!=s.node)&&(this.forceSelection=!0),this.dom.style.height=""});let i=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.children)s instanceof Rd&&s.widget instanceof Pk&&i.push(s.dom);r.updateGaps(i)}updateChildren(e,t){let r=this.childCursor(t);for(let i=e.length-1;;i--){let s=i>=0?e[i]:null;if(!s)break;let{fromA:a,toA:c,fromB:f,toB:m}=s,{content:w,breakAtStart:E,openStart:R,openEnd:j}=kE.build(this.view.state.doc,f,m,this.decorations,this.dynamicDecorationMap),{i:re,off:xe}=r.findPos(c,1),{i:ke,off:Ve}=r.findPos(a,-1);ek(this,ke,Ve,re,xe,w,E,R,j)}}updateSelection(e=!1,t=!1){if((e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange(),!t&&!this.mayControlSelection())return;let r=this.forceSelection;this.forceSelection=!1;let i=this.view.state.selection.main,s=this.domAtPos(i.anchor),a=i.empty?s:this.domAtPos(i.head);if(rn.gecko&&i.empty&&!this.compositionDeco.size&&function B4(n){return 1==n.node.nodeType&&n.node.firstChild&&(0==n.offset||"false"==n.node.childNodes[n.offset-1].contentEditable)&&(n.offset==n.node.childNodes.length||"false"==n.node.childNodes[n.offset].contentEditable)}(s)){let f=document.createTextNode("");this.view.observer.ignore(()=>s.node.insertBefore(f,s.node.childNodes[s.offset]||null)),s=a=new as(f,0),r=!0}let c=this.view.observer.selectionRange;(r||!c.focusNode||!y0(s.node,s.offset,c.anchorNode,c.anchorOffset)||!y0(a.node,a.offset,c.focusNode,c.focusOffset))&&(this.view.observer.ignore(()=>{rn.android&&rn.chrome&&this.dom.contains(c.focusNode)&&function G4(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(1==t.nodeType&&"false"==t.contentEditable)return!0;return!1}(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let f=m0(this.view.root);if(f)if(i.empty){if(rn.gecko){let m=function z4(n,e){return 1!=n.nodeType?0:(e&&"false"==n.childNodes[e-1].contentEditable?1:0)|(e<n.childNodes.length&&"false"==n.childNodes[e].contentEditable?2:0)}(s.node,s.offset);if(m&&3!=m){let w=Fk(s.node,s.offset,1==m?1:-1);w&&(s=new as(w,1==m?0:w.nodeValue.length))}}f.collapse(s.node,s.offset),null!=i.bidiLevel&&null!=c.cursorBidiLevel&&(c.cursorBidiLevel=i.bidiLevel)}else if(f.extend){f.collapse(s.node,s.offset);try{f.extend(a.node,a.offset)}catch{}}else{let m=document.createRange();i.anchor>i.head&&([s,a]=[a,s]),m.setEnd(a.node,a.offset),m.setStart(s.node,s.offset),f.removeAllRanges(),f.addRange(m)}}),this.view.observer.setSelectionRange(s,a)),this.impreciseAnchor=s.precise?null:new as(c.anchorNode,c.anchorOffset),this.impreciseHead=a.precise?null:new as(c.focusNode,c.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let{view:e}=this,t=e.state.selection.main,r=m0(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!(r&&t.empty&&t.assoc&&r.modify))return;let a=$s.find(this,t.head);if(!a)return;let c=a.posAtStart;if(t.head==c||t.head==c+a.length)return;let f=this.coordsAt(t.head,-1),m=this.coordsAt(t.head,1);if(!f||!m||f.bottom>m.top)return;let w=this.domAtPos(t.head+t.assoc);r.collapse(w.node,w.offset),r.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let E=e.observer.selectionRange;e.docView.posFromDOM(E.anchorNode,E.anchorOffset)!=t.from&&r.collapse(i,s)}mayControlSelection(){let e=this.view.root.activeElement;return e==this.dom||v0(this.dom,this.view.observer.selectionRange)&&!(e&&this.dom.contains(e))}nearest(e){for(let t=e;t;){let r=Fr.get(t);if(r&&r.rootView==this)return r;t=t.parentNode}return null}posFromDOM(e,t){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,t)+r.posAtStart}domAtPos(e){let{i:t,off:r}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let i=this.children[t];if(r<i.length||i instanceof $s)break;t++,r=0}return this.children[t].domAtPos(r)}coordsAt(e,t){for(let r=this.length,i=this.children.length-1;;i--){let s=this.children[i],a=r-s.breakAfter-s.length;if(e>a||e==a&&s.type!=_r.WidgetBefore&&s.type!=_r.WidgetAfter&&(!i||2==t||this.children[i-1].breakAfter||this.children[i-1].type==_r.WidgetBefore&&t>-2))return s.coordsAt(e-a,t);r=a}}measureVisibleLineHeights(e){let t=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,a=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,c=-1,f=this.view.textDirection==Jr.LTR;for(let m=0,w=0;w<this.children.length;w++){let E=this.children[w],R=m+E.length;if(R>i)break;if(m>=r){let j=E.dom.getBoundingClientRect();if(t.push(j.height),a){let re=E.dom.lastChild,xe=re?Yg(re):[];if(xe.length){let ke=xe[xe.length-1],Ve=f?ke.right-j.left:j.right-ke.left;Ve>c&&(c=Ve,this.minWidth=s,this.minWidthFrom=m,this.minWidthTo=R)}}}m=R+E.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return"rtl"==getComputedStyle(this.children[t].dom).direction?Jr.RTL:Jr.LTR}measureTextSize(){for(let s of this.children)if(s instanceof $s){let a=s.measureTextSize();if(a)return a}let t,r,i,e=document.createElement("div");return e.className="cm-line",e.style.width="99999px",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Yg(e.firstChild)[0];t=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:t,e.remove()}),{lineHeight:t,charWidth:r,textHeight:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new ZI(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let r=0,i=0;;i++){let s=i==t.viewports.length?null:t.viewports[i],a=s?s.from-1:this.length;if(a>r){let c=t.lineBlockAt(a).bottom-t.lineBlockAt(r).top;e.push(sn.replace({widget:new Pk(c),block:!0,inclusive:!0,isBlockGap:!0}).range(r,a))}if(!s)break;r=s.to+1}return sn.set(e)}updateDeco(){let e=this.view.state.facet(Jg).map((t,r)=>(this.dynamicDecorationMap[r]="function"==typeof t)?t(this.view):t);for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let i,{range:t}=e,r=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1);if(!r)return;!t.empty&&(i=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=0,a=0,c=0,f=0;for(let w of this.view.state.facet(Sk).map(E=>E(this.view)))if(w){let{left:E,right:R,top:j,bottom:re}=w;null!=E&&(s=Math.max(s,E)),null!=R&&(a=Math.max(a,R)),null!=j&&(c=Math.max(c,j)),null!=re&&(f=Math.max(f,re))}!function E4(n,e,t,r,i,s,a,c){let f=n.ownerDocument,m=f.defaultView||window;for(let w=n;w;)if(1==w.nodeType){let E,R=w==f.body;if(R)E=x4(m);else{if(w.scrollHeight<=w.clientHeight&&w.scrollWidth<=w.clientWidth){w=w.assignedSlot||w.parentNode;continue}let xe=w.getBoundingClientRect();E={left:xe.left,right:xe.left+w.clientWidth,top:xe.top,bottom:xe.top+w.clientHeight}}let j=0,re=0;if("nearest"==i)e.top<E.top?(re=-(E.top-e.top+a),t>0&&e.bottom>E.bottom+re&&(re=e.bottom-E.bottom+re+a)):e.bottom>E.bottom&&(re=e.bottom-E.bottom+a,t<0&&e.top-re<E.top&&(re=-(E.top+re-e.top+a)));else{let xe=e.bottom-e.top,ke=E.bottom-E.top;re=("center"==i&&xe<=ke?e.top+xe/2-ke/2:"start"==i||"center"==i&&t<0?e.top-a:e.bottom-ke+a)-E.top}if("nearest"==r?e.left<E.left?(j=-(E.left-e.left+s),t>0&&e.right>E.right+j&&(j=e.right-E.right+j+s)):e.right>E.right&&(j=e.right-E.right+s,t<0&&e.left<E.left+j&&(j=-(E.left+j-e.left+s))):j=("center"==r?e.left+(e.right-e.left)/2-(E.right-E.left)/2:"start"==r==c?e.left-s:e.right-(E.right-E.left)+s)-E.left,j||re)if(R)m.scrollBy(j,re);else{let xe=0,ke=0;if(re){let Ve=w.scrollTop;w.scrollTop+=re,ke=w.scrollTop-Ve}if(j){let Ve=w.scrollLeft;w.scrollLeft+=j,xe=w.scrollLeft-Ve}e={left:e.left-xe,top:e.top-ke,right:e.right-xe,bottom:e.bottom-ke},xe&&Math.abs(xe-j)<1&&(r="nearest"),ke&&Math.abs(ke-re)<1&&(i="nearest")}if(R)break;w=w.assignedSlot||w.parentNode}else{if(11!=w.nodeType)break;w=w.host}}(this.view.scrollDOM,{left:r.left-s,top:r.top-c,right:r.right+a,bottom:r.bottom+f},t.head<t.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==Jr.LTR)}}class Pk extends fu{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function Lk(n){let e=n.observer.selectionRange,t=e.focusNode&&Fk(e.focusNode,e.focusOffset,0);if(!t)return null;let r=n.docView.nearest(t);if(!r)return null;if(r instanceof $s){let i=t;for(;i.parentNode!=r.dom;)i=i.parentNode;let s=i.previousSibling;for(;s&&!Fr.get(s);)s=s.previousSibling;let a=s?Fr.get(s).posAtEnd:r.posAtStart;return{from:a,to:a,node:i,text:t}}{for(;;){let{parent:s}=r;if(!s)return null;if(s instanceof $s)break;r=s}let i=r.posAtStart;return{from:i,to:i+r.length,node:r.dom,text:t}}}class H4 extends fu{constructor(e,t,r){super(),this.top=e,this.text=t,this.topView=r}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return ak}}function Fk(n,e,t){if(t<=0)for(let r=n,i=e;;){if(3==r.nodeType)return r;if(!(1==r.nodeType&&i>0))break;r=r.childNodes[i-1],i=Xg(r)}if(t>=0)for(let r=n,i=e;;){if(3==r.nodeType)return r;if(!(1==r.nodeType&&i<r.childNodes.length&&t>=0))break;r=r.childNodes[i],i=0}return null}class j4{constructor(){this.changes=[]}compareRange(e,t){IE(e,t,this.changes)}comparePoint(e,t){IE(e,t,this.changes)}}function W4(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function q4(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function LE(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function Bk(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function Vk(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function FE(n,e,t){let r,i,s,a,f,m,w,E,c=!1;for(let re=n.firstChild;re;re=re.nextSibling){let xe=Yg(re);for(let ke=0;ke<xe.length;ke++){let Ve=xe[ke];i&&LE(i,Ve)&&(Ve=Bk(Vk(Ve,i.bottom),i.top));let nt=W4(e,Ve),Ye=q4(t,Ve);if(0==nt&&0==Ye)return 3==re.nodeType?Hk(re,e,t):FE(re,e,t);if(!r||a>Ye||a==Ye&&s>nt){r=re,i=Ve,s=nt,a=Ye;let ht=Ye?t<Ve.top?-1:1:nt?e<Ve.left?-1:1:0;c=!ht||(ht>0?ke<xe.length-1:ke>0)}0==nt?t>Ve.bottom&&(!w||w.bottom<Ve.bottom)?(f=re,w=Ve):t<Ve.top&&(!E||E.top>Ve.top)&&(m=re,E=Ve):w&&LE(w,Ve)?w=Vk(w,Ve.bottom):E&&LE(E,Ve)&&(E=Bk(E,Ve.top))}}if(w&&w.bottom>=t?(r=f,i=w):E&&E.top<=t&&(r=m,i=E),!r)return{node:n,offset:0};let R=Math.max(i.left,Math.min(i.right,e));return 3==r.nodeType?Hk(r,R,t):c&&"false"!=r.contentEditable?FE(r,R,t):{node:n,offset:Array.prototype.indexOf.call(n.childNodes,r)+(e>=(i.left+i.right)/2?1:0)}}function Hk(n,e,t){let r=n.nodeValue.length,i=-1,s=1e9,a=0;for(let c=0;c<r;c++){let f=Ef(n,c,c+1).getClientRects();for(let m=0;m<f.length;m++){let w=f[m];if(w.top==w.bottom)continue;a||(a=e-w.left);let E=(w.top>t?w.top-t:t-w.bottom)-1;if(w.left-1<=e&&w.right+1>=e&&E<s){let R=e>=(w.left+w.right)/2,j=R;if((rn.chrome||rn.gecko)&&Ef(n,c).getBoundingClientRect().left==w.right&&(j=!R),E<=0)return{node:n,offset:c+(j?1:0)};i=c+(j?1:0),s=E}}}return{node:n,offset:i>-1?i:a>0?n.nodeValue.length:0}}function zk(n,e,t,r=-1){var i,s;let f,a=n.contentDOM.getBoundingClientRect(),c=a.top+n.viewState.paddingTop,{docHeight:m}=n.viewState,{x:w,y:E}=e,R=E-c;if(R<0)return 0;if(R>m)return n.state.doc.length;for(let ht=n.defaultLineHeight/2,Rt=!1;f=n.elementAtHeight(R),f.type!=_r.Text;)for(;R=r>0?f.bottom+ht:f.top-ht,!(R>=0&&R<=m);){if(Rt)return t?null:0;Rt=!0,r=-r}E=c+R;let j=f.from;if(j<n.viewport.from)return 0==n.viewport.from?0:t?null:jk(n,a,f,w,E);if(j>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:jk(n,a,f,w,E);let re=n.dom.ownerDocument,xe=n.root.elementFromPoint?n.root:re,ke=xe.elementFromPoint(w,E);ke&&!n.contentDOM.contains(ke)&&(ke=null),ke||(w=Math.max(a.left+1,Math.min(a.right-1,w)),ke=xe.elementFromPoint(w,E),ke&&!n.contentDOM.contains(ke)&&(ke=null));let Ve,nt=-1;if(ke&&0!=(null===(i=n.docView.nearest(ke))||void 0===i?void 0:i.isEditable))if(re.caretPositionFromPoint){let ht=re.caretPositionFromPoint(w,E);ht&&({offsetNode:Ve,offset:nt}=ht)}else if(re.caretRangeFromPoint){let ht=re.caretRangeFromPoint(w,E);ht&&(({startContainer:Ve,startOffset:nt}=ht),(!n.contentDOM.contains(Ve)||rn.safari&&function Y4(n,e,t){let r;if(3!=n.nodeType||e!=(r=n.nodeValue.length))return!1;for(let i=n.nextSibling;i;i=i.nextSibling)if(1!=i.nodeType||"BR"!=i.nodeName)return!1;return Ef(n,r-1,r).getBoundingClientRect().left>t}(Ve,nt,w)||rn.chrome&&function X4(n,e,t){if(0!=e)return!1;for(let i=n;;){let s=i.parentNode;if(!s||1!=s.nodeType||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}return t-(1==n.nodeType?n.getBoundingClientRect():Ef(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect()).left>5}(Ve,nt,w))&&(Ve=void 0))}if(!Ve||!n.docView.dom.contains(Ve)){let ht=$s.find(n.docView,j);if(!ht)return R>f.top+f.height/2?f.to:f.from;({node:Ve,offset:nt}=FE(ht.dom,w,E))}let Ye=n.docView.nearest(Ve);if(!Ye)return null;if(Ye.isWidget&&1==(null===(s=Ye.dom)||void 0===s?void 0:s.nodeType)){let ht=Ye.dom.getBoundingClientRect();return e.y<ht.top||e.y<=ht.bottom&&e.x<=(ht.left+ht.right)/2?Ye.posAtStart:Ye.posAtEnd}return Ye.localPosFromDOM(Ve,nt)+Ye.posAtStart}function jk(n,e,t,r,i){let s=Math.round((r-e.left)*n.defaultCharacterWidth);n.lineWrapping&&t.height>1.5*n.defaultLineHeight&&(s+=Math.floor((i-t.top)/n.defaultLineHeight)*n.viewState.heightOracle.lineLength);let a=n.state.sliceDoc(t.from,t.to);return t.from+gE(a,s,n.state.tabSize)}function Uk(n,e,t,r){let i=n.state.doc.lineAt(e.head),s=n.bidiSpans(i),a=n.textDirectionAt(i.from);for(let c=e,f=null;;){let m=Ik(i,s,a,c,t),w=Tk;if(!m){if(i.number==(t?n.state.doc.lines:1))return c;w="\n",i=n.state.doc.line(i.number+(t?1:-1)),s=n.bidiSpans(i),m=Et.cursor(t?i.from:i.to)}if(f){if(!f(w))return c}else{if(!r)return m;f=r(w)}c=m}}function BE(n,e,t){let r=n.state.facet(Ck).map(i=>i(n));for(;;){let i=!1;for(let s of r)s.between(t.from-1,t.from+1,(a,c,f)=>{t.from>a&&t.from<c&&(t=e.head>t.from?Et.cursor(a,1):Et.cursor(c,-1),i=!0)});if(!i)return t}}class Z4{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null;let t=(r,i)=>{this.ignoreDuringComposition(i)||"keydown"==i.type&&this.keydown(e,i)||(this.mustFlushObserver(i)&&e.observer.forceFlush(),this.runCustomHandlers(i.type,e,i)?i.preventDefault():r(e,i))};for(let r in Li){let i=Li[r];e.contentDOM.addEventListener(r,s=>{Wk(e,s)&&t(i,s)},VE[r]),this.registeredEvents.push(r)}e.scrollDOM.addEventListener("mousedown",r=>{if(r.target==e.scrollDOM&&r.clientY>e.contentDOM.getBoundingClientRect().bottom&&(t(Li.mousedown,r),!r.defaultPrevented&&2==r.button)){let i=e.contentDOM.style.minHeight;e.contentDOM.style.minHeight="100%",setTimeout(()=>e.contentDOM.style.minHeight=i,200)}}),rn.chrome&&102==rn.chrome_version&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,rn.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,t){var r;let i;this.customHandlers=[];for(let s of t)if(i=null===(r=s.update(e).spec)||void 0===r?void 0:r.domEventHandlers){this.customHandlers.push({plugin:s.value,handlers:i});for(let a in i)this.registeredEvents.indexOf(a)<0&&"scroll"!=a&&(this.registeredEvents.push(a),e.contentDOM.addEventListener(a,c=>{Wk(e,c)&&this.runCustomHandlers(a,e,c)&&c.preventDefault()}))}}runCustomHandlers(e,t,r){for(let i of this.customHandlers){let s=i.handlers[e];if(s)try{if(s.call(i.plugin,r,t)||r.defaultPrevented)return!0}catch(a){No(t.state,a)}}return!1}runScrollHandlers(e,t){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let r of this.customHandlers){let i=r.handlers.scroll;if(i)try{i.call(r.plugin,t,e)}catch(s){No(e.state,s)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),9==t.keyCode&&Date.now()<this.lastEscPress+2e3)return!0;if(rn.android&&rn.chrome&&!t.synthetic&&(13==t.keyCode||8==t.keyCode))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let r;return!(!rn.ios||t.synthetic||t.altKey||t.metaKey||!((r=Gk.find(i=>i.keyCode==t.keyCode))&&!t.ctrlKey||eG.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)||(this.pendingIOSKey=r||t,setTimeout(()=>this.flushIOSKey(e),250),0))}flushIOSKey(e){let t=this.pendingIOSKey;return!!t&&(this.pendingIOSKey=void 0,Cf(e.contentDOM,t.key,t.keyCode))}ignoreDuringComposition(e){return!!/^key/.test(e.type)&&(this.composing>0||!!(rn.safari&&!rn.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))}mustFlushObserver(e){return"keydown"==e.type&&229!=e.keyCode}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const Gk=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],eG="dthko",$k=[16,17,18,20,91,92,224,225];function A0(n){return.7*Math.max(0,n)+8}class tG{constructor(e,t,r,i){this.view=e,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParent=function C4(n){let e=n.ownerDocument;for(let t=n.parentNode;t&&t!=e.body;)if(1==t.nodeType){if(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth)return t;t=t.assignedSlot||t.parentNode}else{if(11!=t.nodeType)break;t=t.host}return null}(e.contentDOM);let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Gs.allowMultipleSelections)&&function nG(n,e){let t=n.state.facet(pk);return t.length?t[0](e):rn.mac?e.metaKey:e.ctrlKey}(e,t),this.dragMove=function rG(n,e){let t=n.state.facet(gk);return t.length?t[0](e):rn.mac?!e.altKey:!e.ctrlKey}(e,t),this.dragging=!(!function iG(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let r=m0(n.root);if(!r||0==r.rangeCount)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let a=i[s];if(a.left<=e.clientX&&a.right>=e.clientX&&a.top<=e.clientY&&a.bottom>=e.clientY)return!0}return!1}(e,t)||1!=nO(t))&&null}start(e){!1===this.dragging&&(e.preventDefault(),this.select(e))}move(e){var t;if(0==e.buttons)return this.destroy();if(!1!==this.dragging)return;this.select(this.lastEvent=e);let r=0,i=0,s=(null===(t=this.scrollParent)||void 0===t?void 0:t.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight};e.clientX<=s.left+6?r=-A0(s.left-e.clientX):e.clientX>=s.right-6&&(r=A0(e.clientX-s.right)),e.clientY<=s.top+6?i=-A0(s.top-e.clientY):e.clientY>=s.bottom-6&&(i=A0(e.clientY-s.bottom)),this.setScrollSpeed(r,i)}up(e){null==this.dragging&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),!1===this.dragging&&this.select(this.lastEvent)}select(e){let t=this.style.get(e,this.extend,this.multiple);(this.mustSelect||!t.eq(this.view.state.selection)||t.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:t,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Wk(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let r,t=e.target;t!=n.contentDOM;t=t.parentNode)if(!t||11==t.nodeType||(r=Fr.get(t))&&r.ignoreEvent(e))return!1;return!0}const Li=Object.create(null),VE=Object.create(null),qk=rn.ie&&rn.ie_version<15||rn.ios&&rn.webkit_version<604;function Yk(n,e){let r,{state:t}=n,i=1,s=t.toText(e),a=s.lines==t.selection.ranges.length;if(null!=HE&&t.selection.ranges.every(f=>f.empty)&&HE==s.toString()){let f=-1;r=t.changeByRange(m=>{let w=t.doc.lineAt(m.from);if(w.from==f)return{range:m};f=w.from;let E=t.toText((a?s.line(i++).text:e)+t.lineBreak);return{changes:{from:w.from,insert:E},range:Et.cursor(m.from+E.length)}})}else r=a?t.changeByRange(f=>{let m=s.line(i++);return{changes:{from:f.from,to:f.to,insert:m.text},range:Et.cursor(f.from+m.length)}}):t.replaceSelection(s);n.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}function Xk(n,e,t,r){if(1==r)return Et.cursor(e,t);if(2==r)return function $4(n,e,t=1){let r=n.charCategorizer(e),i=n.doc.lineAt(e),s=e-i.from;if(0==i.length)return Et.cursor(e);0==s?t=1:s==i.length&&(t=-1);let a=s,c=s;t<0?a=js(i.text,s,!1):c=js(i.text,s);let f=r(i.text.slice(a,c));for(;a>0;){let m=js(i.text,a,!1);if(r(i.text.slice(m,a))!=f)break;a=m}for(;c<i.length;){let m=js(i.text,c);if(r(i.text.slice(c,m))!=f)break;c=m}return Et.range(a+i.from,c+i.from)}(n.state,e,t);{let i=$s.find(n.docView,e),s=n.state.doc.lineAt(i?i.posAtEnd:e),c=i?i.posAtEnd:s.to;return c<n.state.doc.length&&c==s.to&&c++,Et.range(i?i.posAtStart:s.from,c)}}Li.keydown=(n,e)=>{n.inputState.setSelectionOrigin("select"),27==e.keyCode?n.inputState.lastEscPress=Date.now():$k.indexOf(e.keyCode)<0&&(n.inputState.lastEscPress=0)},Li.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")},Li.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")},VE.touchstart=VE.touchmove={passive:!0},Li.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return;let t=null;for(let r of n.state.facet(mk))if(t=r(n,e),t)break;if(!t&&0==e.button&&(t=function lG(n,e){let t=Jk(n,e),r=nO(e),i=n.state.selection;return{update(s){s.docChanged&&(t.pos=s.changes.mapPos(t.pos),i=i.map(s.changes))},get(s,a,c){let m,f=Jk(n,s),w=Xk(n,f.pos,f.bias,r);if(t.pos!=f.pos&&!a){let E=Xk(n,t.pos,t.bias,r),R=Math.min(E.from,w.from),j=Math.max(E.to,w.to);w=R<w.from?Et.range(R,j):Et.range(j,R)}return a?i.replaceRange(i.main.extend(w.from,w.to)):c&&1==r&&i.ranges.length>1&&(m=function uG(n,e){for(let t=0;t<n.ranges.length;t++){let{from:r,to:i}=n.ranges[t];if(r<=e&&i>=e)return Et.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}(i,f.pos))?m:c?i.addRange(w):Et.create([w])}}}(n,e)),t){let r=n.root.activeElement!=n.contentDOM;n.inputState.startMouseSelection(new tG(n,e,t,r)),r&&n.observer.ignore(()=>XI(n.contentDOM)),n.inputState.mouseSelection&&n.inputState.mouseSelection.start(e)}};let Kk=(n,e)=>n>=e.top&&n<=e.bottom,Qk=(n,e,t)=>Kk(e,t)&&n>=t.left&&n<=t.right;function oG(n,e,t,r){let i=$s.find(n.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(0==s)return 1;if(s==i.length)return-1;let a=i.coordsAt(s,-1);if(a&&Qk(t,r,a))return-1;let c=i.coordsAt(s,1);return c&&Qk(t,r,c)?1:a&&Kk(r,a)?-1:1}function Jk(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:oG(n,t,e.clientX,e.clientY)}}const aG=rn.ie&&rn.ie_version<=11;let Zk=null,eO=0,tO=0;function nO(n){if(!aG)return n.detail;let e=Zk,t=tO;return Zk=n,tO=Date.now(),eO=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(eO+1)%3:1}function rO(n,e,t,r){if(!t)return;let i=n.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:s}=n.inputState,a=r&&s&&s.dragging&&s.dragMove?{from:s.dragging.from,to:s.dragging.to}:null,c={from:i,insert:t},f=n.state.changes(a?[a,c]:c);n.focus(),n.dispatch({changes:f,selection:{anchor:f.mapPos(i,-1),head:f.mapPos(i,1)},userEvent:a?"move.drop":"input.drop"})}Li.dragstart=(n,e)=>{let{selection:{main:t}}=n.state,{mouseSelection:r}=n.inputState;r&&(r.dragging=t),e.dataTransfer&&(e.dataTransfer.setData("Text",n.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove")},Li.drop=(n,e)=>{if(!e.dataTransfer)return;if(n.state.readOnly)return e.preventDefault();let t=e.dataTransfer.files;if(t&&t.length){e.preventDefault();let r=Array(t.length),i=0,s=()=>{++i==t.length&&rO(n,e,r.filter(a=>null!=a).join(n.state.lineBreak),!1)};for(let a=0;a<t.length;a++){let c=new FileReader;c.onerror=s,c.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(c.result)||(r[a]=c.result),s()},c.readAsText(t[a])}}else rO(n,e,e.dataTransfer.getData("Text"),!0)},Li.paste=(n,e)=>{if(n.state.readOnly)return e.preventDefault();n.observer.flush();let t=qk?null:e.clipboardData;t?(Yk(n,t.getData("text/plain")||t.getData("text/uri-text")),e.preventDefault()):function sG(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),Yk(n,t.value)},50)}(n)};let HE=null;Li.copy=Li.cut=(n,e)=>{let{text:t,ranges:r,linewise:i}=function dG(n){let e=[],t=[],r=!1;for(let i of n.selection.ranges)i.empty||(e.push(n.sliceDoc(i.from,i.to)),t.push(i));if(!e.length){let i=-1;for(let{from:s}of n.selection.ranges){let a=n.doc.lineAt(s);a.number>i&&(e.push(a.text),t.push({from:a.from,to:Math.min(n.doc.length,a.to+1)})),i=a.number}r=!0}return{text:e.join(n.lineBreak),ranges:t,linewise:r}}(n.state);if(!t&&!i)return;HE=i?t:null;let s=qk?null:e.clipboardData;s?(e.preventDefault(),s.clearData(),s.setData("text/plain",t)):function cG(n,e){let t=n.dom.parentNode;if(!t)return;let r=t.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),n.focus()},50)}(n,t),"cut"==e.type&&!n.state.readOnly&&n.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})};const iO=hu.define();function sO(n,e){let t=[];for(let r of n.facet(bk)){let i=r(n,e);i&&t.push(i)}return t?n.update({effects:t,annotations:iO.of(!0)}):null}function oO(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=sO(n.state,e);t?n.dispatch(t):n.update([])}},10)}Li.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),oO(n)},Li.blur=n=>{n.observer.clearSelectionRange(),oO(n)},Li.compositionstart=Li.compositionupdate=n=>{null==n.inputState.compositionFirstChange&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0)},Li.compositionend=n=>{n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,rn.chrome&&rn.android&&n.observer.flushSoon(),setTimeout(()=>{n.inputState.composing<0&&n.docView.compositionDeco.size&&n.update([])},50)},Li.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()},Li.beforeinput=(n,e)=>{var t;let r;if(rn.chrome&&rn.android&&(r=Gk.find(i=>i.inputType==e.inputType))&&(n.observer.delayAndroidKey(r.key,r.keyCode),"Backspace"==r.key||"Delete"==r.key)){let i=(null===(t=window.visualViewport)||void 0===t?void 0:t.height)||0;setTimeout(()=>{var s;((null===(s=window.visualViewport)||void 0===s?void 0:s.height)||0)>i+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}};const aO=["pre-wrap","normal","pre-line","break-spaces"];class lO{constructor(e){this.lineWrapping=e,this.doc=pr.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let r=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((t-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return aO.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(10*i)]||(t=!0,this.heightSamples[Math.floor(10*i)]=!0)}return t}refresh(e,t,r,i,s,a){let c=aO.indexOf(e)>-1,f=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=c;if(this.lineWrapping=c,this.lineHeight=t,this.charWidth=r,this.textHeight=i,this.lineLength=s,f){this.heightSamples={};for(let m=0;m<a.length;m++){let w=a[m];w<0?m++:this.heightSamples[Math.floor(10*w)]=!0}}return f}}class uO{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class pu{constructor(e,t,r,i,s){this.from=e,this.length=t,this.top=r,this.height=i,this.type=s}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let t=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new pu(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Tr=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(Tr||(Tr={}));const T0=.001;class Cs{constructor(e,t,r=2){this.length=e,this.height=t,this.flags=r}get outdated(){return(2&this.flags)>0}set outdated(e){this.flags=(e?2:0)|-3&this.flags}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>T0&&(e.heightChanged=!0),this.height=t)}replace(e,t,r){return Cs.of(r)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,r,i){let s=this,a=r.doc;for(let c=i.length-1;c>=0;c--){let{fromA:f,toA:m,fromB:w,toB:E}=i[c],R=s.lineAt(f,Tr.ByPosNoHeight,r.setDoc(t),0,0),j=R.to>=m?R:s.lineAt(m,Tr.ByPosNoHeight,r,0,0);for(E+=j.to-m,m=j.to;c>0&&R.from<=i[c-1].toA;)f=i[c-1].fromA,w=i[c-1].fromB,c--,f<R.from&&(R=s.lineAt(f,Tr.ByPosNoHeight,r,0,0));w+=R.from-f,f=R.from;let re=zE.build(r.setDoc(a),e,w,E);s=s.replace(f,m,re)}return s.updateHeight(r,0)}static empty(){return new Po(0,0)}static of(e){if(1==e.length)return e[0];let t=0,r=e.length,i=0,s=0;for(;;)if(t==r)if(i>2*s){let c=e[t-1];c.break?e.splice(--t,1,c.left,null,c.right):e.splice(--t,1,c.left,c.right),r+=1+c.break,i-=c.size}else{if(!(s>2*i))break;{let c=e[r];c.break?e.splice(r,1,c.left,null,c.right):e.splice(r,1,c.left,c.right),r+=2+c.break,s-=c.size}}else if(i<s){let c=e[t++];c&&(i+=c.size)}else{let c=e[--r];c&&(s+=c.size)}let a=0;return null==e[t-1]?(a=1,t--):null==e[t]&&(a=1,r++),new hG(Cs.of(e.slice(0,t)),a,Cs.of(e.slice(r)))}}Cs.prototype.size=1;class cO extends Cs{constructor(e,t,r){super(e,t),this.type=r}blockAt(e,t,r,i){return new pu(i,this.length,r,this.height,this.type)}lineAt(e,t,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,t,r,i,s,a){e<=s+this.length&&t>=s&&a(this.blockAt(0,r,i,s))}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more&&this.setHeight(e,i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Po extends cO{constructor(e,t){super(e,t,_r.Text),this.collapsed=0,this.widgetHeight=0}replace(e,t,r){let i=r[0];return 1==r.length&&(i instanceof Po||i instanceof ls&&4&i.flags)&&Math.abs(this.length-i.length)<10?(i instanceof ls?i=new Po(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Cs.of(r)}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more?this.setHeight(e,i.heights[i.index++]):(r||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class ls extends Cs{constructor(e){super(e,0)}heightMetrics(e,t){let a,r=e.doc.lineAt(t).number,i=e.doc.lineAt(t+this.length).number,s=i-r+1,c=0;if(e.lineWrapping){let f=Math.min(this.height,e.lineHeight*s);a=f/s,c=(this.height-f)/(this.length-s-1)}else a=this.height/s;return{firstLine:r,lastLine:i,perLine:a,perChar:c}}blockAt(e,t,r,i){let{firstLine:s,lastLine:a,perLine:c,perChar:f}=this.heightMetrics(t,i);if(t.lineWrapping){let m=i+Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length),w=t.doc.lineAt(m),E=c+w.length*f,R=Math.max(r,e-E/2);return new pu(w.from,w.length,R,E,_r.Text)}{let m=Math.max(0,Math.min(a-s,Math.floor((e-r)/c))),{from:w,length:E}=t.doc.line(s+m);return new pu(w,E,r+c*m,c,_r.Text)}}lineAt(e,t,r,i,s){if(t==Tr.ByHeight)return this.blockAt(e,r,i,s);if(t==Tr.ByPosNoHeight){let{from:j,to:re}=r.doc.lineAt(e);return new pu(j,re-j,0,0,_r.Text)}let{firstLine:a,perLine:c,perChar:f}=this.heightMetrics(r,s),m=r.doc.lineAt(e),w=c+m.length*f,E=m.number-a;return new pu(m.from,m.length,Math.max(i,Math.min(i+c*E+f*(m.from-s-E),i+this.height-w)),w,_r.Text)}forEachLine(e,t,r,i,s,a){e=Math.max(e,s),t=Math.min(t,s+this.length);let{firstLine:c,perLine:f,perChar:m}=this.heightMetrics(r,s);for(let w=e,E=i;w<=t;){let R=r.doc.lineAt(w);if(w==e){let re=R.number-c;E+=f*re+m*(e-s-re)}let j=f+m*R.length;a(new pu(R.from,R.length,E,j,_r.Text)),E+=j,w=R.to+1}}replace(e,t,r){let i=this.length-t;if(i>0){let s=r[r.length-1];s instanceof ls?r[r.length-1]=new ls(s.length+i):r.push(null,new ls(i-1))}if(e>0){let s=r[0];s instanceof ls?r[0]=new ls(e+s.length):r.unshift(new ls(e-1),null)}return Cs.of(r)}decomposeLeft(e,t){t.push(new ls(e-1),null)}decomposeRight(e,t){t.push(null,new ls(this.length-e-1))}updateHeight(e,t=0,r=!1,i){let s=t+this.length;if(i&&i.from<=t+this.length&&i.more){let a=[],c=Math.max(t,i.from),f=-1;for(i.from>t&&a.push(new ls(i.from-t-1).updateHeight(e,t));c<=s&&i.more;){let w=e.doc.lineAt(c).length;a.length&&a.push(null);let E=i.heights[i.index++];-1==f?f=E:Math.abs(E-f)>=T0&&(f=-2);let R=new Po(w,E);R.outdated=!1,a.push(R),c+=w+1}c<=s&&a.push(null,new ls(s-c).updateHeight(e,c));let m=Cs.of(a);return(f<0||Math.abs(m.height-this.height)>=T0||Math.abs(f-this.heightMetrics(e,t).perLine)>=T0)&&(e.heightChanged=!0),m}return(r||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class hG extends Cs{constructor(e,t,r){super(e.length+t+r.length,e.height+r.height,t|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return 1&this.flags}blockAt(e,t,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,t,r,i):this.right.blockAt(e,t,s,i+this.left.length+this.break)}lineAt(e,t,r,i,s){let a=i+this.left.height,c=s+this.left.length+this.break,f=t==Tr.ByHeight?e<a:e<c,m=f?this.left.lineAt(e,t,r,i,s):this.right.lineAt(e,t,r,a,c);if(this.break||(f?m.to<c:m.from>c))return m;let w=t==Tr.ByPosNoHeight?Tr.ByPosNoHeight:Tr.ByPos;return f?m.join(this.right.lineAt(c,w,r,a,c)):this.left.lineAt(c,w,r,i,s).join(m)}forEachLine(e,t,r,i,s,a){let c=i+this.left.height,f=s+this.left.length+this.break;if(this.break)e<f&&this.left.forEachLine(e,t,r,i,s,a),t>=f&&this.right.forEachLine(e,t,r,c,f,a);else{let m=this.lineAt(f,Tr.ByPos,r,i,s);e<m.from&&this.left.forEachLine(e,m.from-1,r,i,s,a),m.to>=e&&m.from<=t&&a(m),t>m.to&&this.right.forEachLine(m.to+1,t,r,c,f,a)}}replace(e,t,r){let i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let a=s.length;for(let c of r)s.push(c);if(e>0&&dO(s,a-1),t<this.length){let c=s.length;this.decomposeRight(t,s),dO(s,c)}return Cs.of(s)}decomposeLeft(e,t){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(r++,e>=r&&t.push(null)),e>r&&this.right.decomposeLeft(e-r,t)}decomposeRight(e,t){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<r&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Cs.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,r=!1,i){let{left:s,right:a}=this,c=t+s.length+this.break,f=null;return i&&i.from<=t+s.length&&i.more?f=s=s.updateHeight(e,t,r,i):s.updateHeight(e,t,r),i&&i.from<=c+a.length&&i.more?f=a=a.updateHeight(e,c,r,i):a.updateHeight(e,c,r),f?this.balanced(s,a):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function dO(n,e){let t,r;null==n[e]&&(t=n[e-1])instanceof ls&&(r=n[e+1])instanceof ls&&n.splice(e-1,3,new ls(t.length+1+r.length))}class zE{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let r=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof Po?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new Po(r-this.pos,-1)),this.writtenTo=r,t>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,r){if(e<t||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0;i<0&&(i=this.oracle.lineHeight);let s=t-e;r.block?this.addBlock(new cO(s,i,r.type)):(s||i>=5)&&this.addLineDeco(i,s)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Po(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let r=new ls(t-e);return this.oracle.doc.lineAt(e).to==t&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Po)return e;let t=new Po(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine(),e.type==_r.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=_r.WidgetBefore&&(this.covering=e)}addLineDeco(e,t){let r=this.ensureLine();r.length+=t,r.collapsed+=t,r.widgetHeight=Math.max(r.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}finish(e){let t=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||t instanceof Po||this.isCovered?(this.writtenTo<this.pos||null==t)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new Po(0,-1));let r=e;for(let i of this.nodes)i instanceof Po&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,t,r,i){let s=new zE(r,e);return Qr.spans(t,r,i,s,0),s.finish(r)}}class gG{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,r,i){(e<t||r&&r.heightRelevant||i&&i.heightRelevant)&&IE(e,t,this.changes,5)}}function mG(n,e){let t=n.getBoundingClientRect(),r=n.ownerDocument,i=r.defaultView||window,s=Math.max(0,t.left),a=Math.min(i.innerWidth,t.right),c=Math.max(0,t.top),f=Math.min(i.innerHeight,t.bottom);for(let m=n.parentNode;m&&m!=r.body;)if(1==m.nodeType){let w=m,E=window.getComputedStyle(w);if((w.scrollHeight>w.clientHeight||w.scrollWidth>w.clientWidth)&&"visible"!=E.overflow){let R=w.getBoundingClientRect();s=Math.max(s,R.left),a=Math.min(a,R.right),c=Math.max(c,R.top),f=m==n.parentNode?R.bottom:Math.min(f,R.bottom)}m="absolute"==E.position||"fixed"==E.position?w.offsetParent:w.parentNode}else{if(11!=m.nodeType)break;m=m.host}return{left:s-t.left,right:Math.max(s,a)-t.left,top:c-(t.top+e),bottom:Math.max(c,f)-(t.top+e)}}function vG(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class jE{constructor(e,t,r){this.from=e,this.to=t,this.size=r}static same(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=t[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e){return sn.replace({widget:new yG(this.size,e)}).range(this.from,this.to)}}class yG extends fu{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class hO{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scaler=fO,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Jr.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(S0).some(r=>"function"!=typeof r&&"cm-lineWrapping"==r.class);this.heightOracle=new lO(t),this.stateDeco=e.facet(Jg).filter(r=>"function"!=typeof r),this.heightMap=Cs.empty().applyChanges(this.stateDeco,pr.empty,this.heightOracle.setDoc(e.doc),[new Pa(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=sn.set(this.lineGaps.map(r=>r.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let r=0;r<=1;r++){let i=r?t.head:t.anchor;if(!e.some(({from:s,to:a})=>i>=s&&i<=a)){let{from:s,to:a}=this.lineBlockAt(i);e.push(new I0(s,a))}}this.viewports=e.sort((r,i)=>r.from-i.from),this.scaler=this.heightMap.height<=7e6?fO:new DG(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(1==this.scaler.scale?e:em(e,this.scaler))})}update(e,t=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(Jg).filter(m=>"function"!=typeof m);let s=Pa.extendWithRanges(e.changedRanges,function pG(n,e,t){let r=new gG;return Qr.compare(n,e,t,r,0),r.changes}(r,this.stateDeco,e?e.changes:Pi.empty(this.state.doc.length))),a=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),this.heightMap.height!=a&&(e.flags|=2);let c=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<c.from||t.range.head>c.to)||!this.viewportIsAppropriate(c))&&(c=this.getViewport(0,t));let f=!e.changes.empty||2&e.flags||c.from!=this.viewport.from||c.to!=this.viewport.to;this.viewport=c,this.updateForViewport(),f&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Dk)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,r=window.getComputedStyle(t),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection="rtl"==r.direction?Jr.RTL:Jr.LTR;let a=this.heightOracle.mustRefreshForWrapping(s),c=t.getBoundingClientRect(),f=a||this.mustMeasureContent||this.contentDOMHeight!=c.height;this.contentDOMHeight=c.height,this.mustMeasureContent=!1;let m=0,w=0,E=parseInt(r.paddingTop)||0,R=parseInt(r.paddingBottom)||0;(this.paddingTop!=E||this.paddingBottom!=R)&&(this.paddingTop=E,this.paddingBottom=R,m|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(f=!0),this.editorWidth=e.scrollDOM.clientWidth,m|=8);let j=(this.printing?vG:mG)(t,this.paddingTop),re=j.top-this.pixelViewport.top,xe=j.bottom-this.pixelViewport.bottom;this.pixelViewport=j;let ke=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(ke!=this.inView&&(this.inView=ke,ke&&(f=!0)),!this.inView&&!this.scrollTarget)return 0;let Ve=c.width;if((this.contentDOMWidth!=Ve||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=c.width,this.editorHeight=e.scrollDOM.clientHeight,m|=8),f){let Ye=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(Ye)&&(a=!0),a||i.lineWrapping&&Math.abs(Ve-this.contentDOMWidth)>i.charWidth){let{lineHeight:ht,charWidth:Rt,textHeight:Nt}=e.docView.measureTextSize();a=ht>0&&i.refresh(s,ht,Rt,Nt,Ve/Rt,Ye),a&&(e.docView.minWidth=0,m|=8)}re>0&&xe>0?w=Math.max(re,xe):re<0&&xe<0&&(w=Math.min(re,xe)),i.heightChanged=!1;for(let ht of this.viewports){let Rt=ht.from==this.viewport.from?Ye:e.docView.measureVisibleLineHeights(ht);this.heightMap=(a?Cs.empty().applyChanges(this.stateDeco,pr.empty,this.heightOracle,[new Pa(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,a,new uO(ht.from,Rt))}i.heightChanged&&(m|=2)}let nt=!this.viewportIsAppropriate(this.viewport,w)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return nt&&(this.viewport=this.getViewport(w,this.scrollTarget)),this.updateForViewport(),(2&m||nt)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(a?[]:this.lineGaps,e)),m|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),m}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:a,visibleBottom:c}=this,f=new I0(i.lineAt(a-1e3*r,Tr.ByHeight,s,0,0).from,i.lineAt(c+1e3*(1-r),Tr.ByHeight,s,0,0).to);if(t){let{head:m}=t.range;if(m<f.from||m>f.to){let R,w=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),E=i.lineAt(m,Tr.ByPos,s,0,0);R="center"==t.y?(E.top+E.bottom)/2-w/2:"start"==t.y||"nearest"==t.y&&m<f.from?E.top:E.bottom-w,f=new I0(i.lineAt(R-500,Tr.ByHeight,s,0,0).from,i.lineAt(R+w+500,Tr.ByHeight,s,0,0).to)}}return f}mapViewport(e,t){let r=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new I0(this.heightMap.lineAt(r,Tr.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,Tr.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,Tr.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(t,Tr.ByPos,this.heightOracle,0,0),{visibleTop:a,visibleBottom:c}=this;return(0==e||i<=a-Math.max(10,Math.min(-r,250)))&&(t==this.state.doc.length||s>=c+Math.max(10,Math.min(r,250)))&&i>a-2e3&&s<c+2e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let r=[];for(let i of e)t.touchesRange(i.from,i.to)||r.push(new jE(t.mapPos(i.from),t.mapPos(i.to),i.size));return r}ensureLineGaps(e,t){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,a=i<<1;if(this.defaultTextDirection!=Jr.LTR&&!r)return[];let c=[],f=(m,w,E,R)=>{if(w-m<s)return;let j=this.state.selection.main,re=[j.from];j.empty||re.push(j.to);for(let ke of re)if(ke>m&&ke<w)return f(m,ke-10,E,R),void f(ke+10,w,E,R);let xe=function wG(n,e){for(let t of n)if(e(t))return t}(e,ke=>ke.from>=E.from&&ke.to<=E.to&&Math.abs(ke.from-m)<s&&Math.abs(ke.to-w)<s&&!re.some(Ve=>ke.from<Ve&&ke.to>Ve));if(!xe){if(w<E.to&&t&&r&&t.visibleRanges.some(ke=>ke.from<=w&&ke.to>=w)){let ke=t.moveToLineBoundary(Et.cursor(w),!1,!0).head;ke>m&&(w=ke)}xe=new jE(m,w,this.gapSize(E,m,w,R))}c.push(xe)};for(let m of this.viewportLines){if(m.length<a)continue;let w=bG(m.from,m.to,this.stateDeco);if(w.total<a)continue;let R,j,E=this.scrollTarget?this.scrollTarget.range.head:null;if(r){let xe,ke,re=i/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=E){let Ve=O0(w,E),nt=((this.visibleBottom-this.visibleTop)/2+re)/m.height;xe=Ve-nt,ke=Ve+nt}else xe=(this.visibleTop-m.top-re)/m.height,ke=(this.visibleBottom-m.top+re)/m.height;R=k0(w,xe),j=k0(w,ke)}else{let ke,Ve,re=w.total*this.heightOracle.charWidth,xe=i*this.heightOracle.charWidth;if(null!=E){let nt=O0(w,E),Ye=((this.pixelViewport.right-this.pixelViewport.left)/2+xe)/re;ke=nt-Ye,Ve=nt+Ye}else ke=(this.pixelViewport.left-xe)/re,Ve=(this.pixelViewport.right+xe)/re;R=k0(w,ke),j=k0(w,Ve)}R>m.from&&f(m.from,R,m,w),j<m.to&&f(j,m.to,m,w)}return c}gapSize(e,t,r,i){let s=O0(i,r)-O0(i,t);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){jE.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=sn.set(e.map(t=>t.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];Qr.spans(e,this.viewport.from,this.viewport.to,{span(i,s){t.push({from:i,to:s})},point(){}},20);let r=t.length!=this.visibleRanges.length||this.visibleRanges.some((i,s)=>i.from!=t[s].from||i.to!=t[s].to);return this.visibleRanges=t,r?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||em(this.heightMap.lineAt(e,Tr.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return em(this.heightMap.lineAt(this.scaler.fromDOM(e),Tr.ByHeight,this.heightOracle,0,0),this.scaler)}elementAtHeight(e){return em(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class I0{constructor(e,t){this.from=e,this.to=t}}function bG(n,e,t){let r=[],i=n,s=0;return Qr.spans(t,n,e,{span(){},point(a,c){a>i&&(r.push({from:i,to:a}),s+=a-i),i=c}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function k0({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let r=Math.floor(n*t);for(let i=0;;i++){let{from:s,to:a}=e[i],c=a-s;if(r<=c)return s+r;r-=c}}function O0(n,e){let t=0;for(let{from:r,to:i}of n.ranges){if(e<=i){t+=e-r;break}t+=i-r}return t/n.total}const fO={toDOM:n=>n,fromDOM:n=>n,scale:1};class DG{constructor(e,t,r){let i=0,s=0,a=0;this.viewports=r.map(({from:c,to:f})=>{let m=t.lineAt(c,Tr.ByPos,e,0,0).top,w=t.lineAt(f,Tr.ByPos,e,0,0).bottom;return i+=w-m,{from:c,to:f,top:m,bottom:w,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(t.height-i);for(let c of this.viewports)c.domTop=a+(c.top-s)*this.scale,a=c.domBottom=c.domTop+(c.bottom-c.top),s=c.bottom}toDOM(e){for(let t=0,r=0,i=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let t=0,r=0,i=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}}function em(n,e){if(1==e.scale)return n;let t=e.toDOM(n.top),r=e.toDOM(n.bottom);return new pu(n.from,n.length,t,r-t,Array.isArray(n.type)?n.type.map(i=>em(i,e)):n.type)}const R0=tn.define({combine:n=>n.join(" ")}),UE=tn.define({combine:n=>n.indexOf(!0)>-1}),GE=lc.newName(),pO=lc.newName(),gO=lc.newName(),mO={"&light":"."+pO,"&dark":"."+gO};function $E(n,e,t){return new lc(e,{finish:r=>/&/.test(r)?r.replace(/&\w*/,i=>{if("&"==i)return n;if(!t||!t[i])throw new RangeError(`Unsupported selector: ${i}`);return t[i]}):n+" "+r})}const xG=$E("."+GE,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},mO);class EG{constructor(e,t,r,i){this.typeOver=i,this.bounds=null,this.text="";let{impreciseHead:s,impreciseAnchor:a}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,r,0))){let c=s||a?[]:function SG(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:s}=n.observer.selectionRange;return t&&(e.push(new Rk(t,r)),(i!=t||s!=r)&&e.push(new Rk(i,s))),e}(e),f=new kk(c,e.state);f.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=f.text,this.newSel=function _G(n,e){if(0==n.length)return null;let t=n[0].pos,r=2==n.length?n[1].pos:t;return t>-1&&r>-1?Et.single(t+e,r+e):null}(c,this.bounds.from)}else{let c=e.observer.selectionRange,f=s&&s.node==c.focusNode&&s.offset==c.focusOffset||!Df(e.contentDOM,c.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(c.focusNode,c.focusOffset),m=a&&a.node==c.anchorNode&&a.offset==c.anchorOffset||!Df(e.contentDOM,c.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(c.anchorNode,c.anchorOffset);this.newSel=Et.single(m,f)}}}function vO(n,e){let t,{newSel:r}=e,i=n.state.selection.main;if(e.bounds){let{from:s,to:a}=e.bounds,c=i.from,f=null;(8===n.inputState.lastKeyCode&&n.inputState.lastKeyTime>Date.now()-100||rn.android&&e.text.length<a-s)&&(c=i.to,f="end");let m=function CG(n,e,t,r){let i=Math.min(n.length,e.length),s=0;for(;s<i&&n.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&n.length==e.length)return null;let a=n.length,c=e.length;for(;a>0&&c>0&&n.charCodeAt(a-1)==e.charCodeAt(c-1);)a--,c--;return"end"==r&&(t-=a+Math.max(0,s-Math.min(a,c))-s),a<s&&n.length<e.length?(s-=t<=s&&t>=a?s-t:0,c=s+(c-a),a=s):c<s&&(s-=t<=s&&t>=c?s-t:0,a=s+(a-c),c=s),{from:s,toA:a,toB:c}}(n.state.doc.sliceString(s,a,"\uffff"),e.text,c-s,f);m&&(rn.chrome&&13==n.inputState.lastKeyCode&&m.toB==m.from+2&&"\uffff\uffff"==e.text.slice(m.from,m.toB)&&m.toB--,t={from:s+m.from,to:s+m.toA,insert:pr.of(e.text.slice(m.from,m.toB).split("\uffff"))})}else r&&(!n.hasFocus&&n.state.facet(C0)||r.main.eq(i))&&(r=null);if(!t&&!r)return!1;if(!t&&e.typeOver&&!i.empty&&r&&r.main.empty?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,i.to)}:t&&t.from>=i.from&&t.to<=i.to&&(t.from!=i.from||t.to!=i.to)&&i.to-i.from-(t.to-t.from)<=4?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,i.to))}:(rn.mac||rn.android)&&t&&t.from==t.to&&t.from==i.head-1&&/^\. ?$/.test(t.insert.toString())&&"off"==n.contentDOM.getAttribute("autocorrect")?(r&&2==t.insert.length&&(r=Et.single(r.main.anchor-1,r.main.head-1)),t={from:i.from,to:i.to,insert:pr.of([" "])}):rn.chrome&&t&&t.from==t.to&&t.from==i.head&&"\n "==t.insert.toString()&&n.lineWrapping&&(r&&(r=Et.single(r.main.anchor-1,r.main.head-1)),t={from:i.from,to:i.to,insert:pr.of([" "])}),t){let s=n.state;if(rn.ios&&n.inputState.flushIOSKey(n)||rn.android&&(t.from==i.from&&t.to==i.to&&1==t.insert.length&&2==t.insert.lines&&Cf(n.contentDOM,"Enter",13)||t.from==i.from-1&&t.to==i.to&&0==t.insert.length&&Cf(n.contentDOM,"Backspace",8)||t.from==i.from&&t.to==i.to+1&&0==t.insert.length&&Cf(n.contentDOM,"Delete",46)))return!0;let c,a=t.insert.toString();if(n.state.facet(yk).some(m=>m(n,t.from,t.to,a)))return!0;if(n.inputState.composing>=0&&n.inputState.composing++,t.from>=i.from&&t.to<=i.to&&t.to-t.from>=(i.to-i.from)/3&&(!r||r.main.empty&&r.main.from==t.from+t.insert.length)&&n.inputState.composing<0){let m=i.from<t.from?s.sliceDoc(i.from,t.from):"",w=i.to>t.to?s.sliceDoc(t.to,i.to):"";c=s.replaceSelection(n.state.toText(m+t.insert.sliceString(0,void 0,n.state.lineBreak)+w))}else{let m=s.changes(t),w=r&&r.main.to<=m.newLength?r.main:void 0;if(s.selection.ranges.length>1&&n.inputState.composing>=0&&t.to<=i.to&&t.to>=i.to-10){let E=n.state.sliceDoc(t.from,t.to),R=Lk(n)||n.state.doc.lineAt(i.head),j=i.to-t.to,re=i.to-i.from;c=s.changeByRange(xe=>{if(xe.from==i.from&&xe.to==i.to)return{changes:m,range:w||xe.map(m)};let ke=xe.to-j,Ve=ke-E.length;if(xe.to-xe.from!=re||n.state.sliceDoc(Ve,ke)!=E||R&&xe.to>=R.from&&xe.from<=R.to)return{range:xe};let nt=s.changes({from:Ve,to:ke,insert:t.insert}),Ye=xe.to-i.to;return{changes:nt,range:w?Et.range(Math.max(0,w.anchor+Ye),Math.max(0,w.head+Ye)):xe.map(nt)}})}else c={changes:m,selection:w&&s.selection.replaceRange(w)}}let f="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,f+=".compose",n.inputState.compositionFirstChange&&(f+=".start",n.inputState.compositionFirstChange=!1)),n.dispatch(c,{scrollIntoView:!0,userEvent:f}),!0}if(r&&!r.main.eq(i)){let s=!1,a="select";return n.inputState.lastSelectionTime>Date.now()-50&&("select"==n.inputState.lastSelectionOrigin&&(s=!0),a=n.inputState.lastSelectionOrigin),n.dispatch({selection:r,scrollIntoView:s,userEvent:a}),!0}return!1}const MG={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},WE=rn.ie&&rn.ie_version<=11;class AG{constructor(e){this.view=e,this.active=!1,this.selectionRange=new S4,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let r of t)this.queue.push(r);(rn.ie&&rn.ie_version<=11||rn.ios&&e.composing)&&t.some(r=>"childList"==r.type&&r.removedNodes.length||"characterData"==r.type&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),WE&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver(()=>{var t;(null===(t=this.view.docView)||void 0===t?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(e.contentDOM)),this.addWindowListeners(this.win=e.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,r)=>t!=e[r]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(C0)?r.root.activeElement!=this.dom:!v0(r.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);s&&s.ignoreEvent(e)?t||(this.selectionChanged=!1):(rn.ie&&rn.ie_version<=11||rn.android&&rn.chrome)&&!r.state.selection.main.empty&&i.focusNode&&y0(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=rn.safari&&11==e.root.nodeType&&function D4(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}(this.dom.ownerDocument)==this.dom&&function TG(n){let e=null;function t(f){f.preventDefault(),f.stopImmediatePropagation(),e=f.getTargetRanges()[0]}if(n.contentDOM.addEventListener("beforeinput",t,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",t,!0),!e)return null;let r=e.startContainer,i=e.startOffset,s=e.endContainer,a=e.endOffset,c=n.docView.domAtPos(n.state.selection.main.anchor);return y0(c.node,c.offset,s,a)&&([r,i,s,a]=[s,a,r,i]),{anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:a}}(this.view)||m0(e.root);if(!t||this.selectionRange.eq(t))return!1;let r=v0(this.dom,t);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&function M4(n,e){let t=e.focusNode,r=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=r)return!1;for(;;)if(r){if(1!=t.nodeType)return!1;let i=t.childNodes[r-1];"false"==i.contentEditable?r--:(t=i,r=Xg(t))}else{if(t==n)return!0;r=b0(t),t=t.parentNode}}(this.dom,t)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(t),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let r=this.dom;r;)if(1==r.nodeType)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(r),r=r.assignedSlot||r.parentNode;else{if(11!=r.nodeType)break;r=r.host}if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=t)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,MG),WE&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),WE&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var r;this.delayedAndroidKey||(this.flushingAndroidKey=this.view.win.requestAnimationFrame(()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),!this.flush()&&s.force&&Cf(this.dom,s.key,s.keyCode))})),(!this.delayedAndroidKey||"Enter"==e)&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!(null===(r=this.delayedAndroidKey)||void 0===r||!r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,r=-1,i=!1;for(let s of e){let a=this.readMutation(s);a&&(a.typeOver&&(i=!0),-1==t?({from:t,to:r}=a):(t=Math.min(a.from,t),r=Math.max(a.to,r)))}return{from:t,to:r,typeOver:i}}readChange(){let{from:e,to:t,typeOver:r}=this.processRecords(),i=this.selectionChanged&&v0(this.dom,this.selectionRange);return e<0&&!i?null:(e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new EG(this.view,e,t,r))}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return!1;let r=this.view.state,i=vO(this.view,t);return this.view.state==r&&this.view.update([]),i}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty("attributes"==e.type),"attributes"==e.type&&(t.dirty|=4),"childList"==e.type){let r=yO(t,e.previousSibling||e.target.previousSibling,-1),i=yO(t,e.nextSibling||e.target.nextSibling,1);return{from:r?t.posAfter(r):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}return"characterData"==e.type?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,t,r,i;this.stop(),null===(e=this.intersection)||void 0===e||e.disconnect(),null===(t=this.gapIntersection)||void 0===t||t.disconnect(),null===(r=this.resizeScroll)||void 0===r||r.disconnect(),null===(i=this.resizeContent)||void 0===i||i.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function yO(n,e,t){for(;e;){let r=Fr.get(e);if(r&&r.parent==n)return r;let i=e.parentNode;e=i!=n.dom?i:t>0?e.nextSibling:e.previousSibling}return null}let Mn=(()=>{class n{constructor(t={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=t.dispatch||(r=>this.update([r])),this.dispatch=this.dispatch.bind(this),this._root=t.root||function _4(n){for(;n;){if(n&&(9==n.nodeType||11==n.nodeType&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}(t.parent)||document,this.viewState=new hO(t.state||Gs.create(t)),this.plugins=this.state.facet(Qg).map(r=>new RE(r));for(let r of this.plugins)r.update(this);this.observer=new AG(this),this.inputState=new Z4(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new Nk(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),t.parent&&t.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...t){this._dispatch(1==t.length&&t[0]instanceof Dl?t[0]:this.state.update(...t))}update(t){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let s,r=!1,i=!1,a=this.state;for(let j of t){if(j.startState!=a)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");a=j.state}if(this.destroyed)return void(this.viewState.state=a);let c=this.hasFocus,f=0,m=null;t.some(j=>j.annotation(iO))?(this.inputState.notifiedFocused=c,f=1):c!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=c,m=sO(a,c),m||(f=1));let w=this.observer.delayedAndroidKey,E=null;if(w?(this.observer.clearDelayedAndroidKey(),E=this.observer.readChange(),(E&&!this.state.doc.eq(a.doc)||!this.state.selection.eq(a.selection))&&(E=null)):this.observer.clear(),a.facet(Gs.phrases)!=this.state.facet(Gs.phrases))return this.setState(a);s=_0.create(this,a,t),s.flags|=f;let R=this.viewState.scrollTarget;try{this.updateState=2;for(let j of t){if(R&&(R=R.map(j.changes)),j.scrollIntoView){let{main:re}=j.state.selection;R=new E0(re.empty?re:Et.cursor(re.head,re.head>re.anchor?-1:1))}for(let re of j.effects)re.is(xk)&&(R=re.value)}this.viewState.update(s,R),this.bidiCache=N0.update(this.bidiCache,s.changes),s.empty||(this.updatePlugins(s),this.inputState.update(s)),r=this.docView.update(s),this.state.facet(Zg)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(t),this.docView.updateSelection(r,t.some(j=>j.isUserEvent("select.pointer")))}finally{this.updateState=0}if(s.startState.facet(R0)!=s.state.facet(R0)&&(this.viewState.mustMeasureContent=!0),(r||i||R||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!s.empty)for(let j of this.state.facet(OE))j(s);(m||E)&&Promise.resolve().then(()=>{m&&this.state==m.startState&&this.dispatch(m),E&&!vO(this,E)&&w.force&&Cf(this.contentDOM,w.key,w.keyCode)})}setState(t){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=t);this.updateState=2;let r=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new hO(t),this.plugins=t.facet(Qg).map(i=>new RE(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView=new Nk(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}r&&this.focus(),this.requestMeasure()}updatePlugins(t){let r=t.startState.facet(Qg),i=t.state.facet(Qg);if(r!=i){let s=[];for(let a of i){let c=r.indexOf(a);if(c<0)s.push(new RE(a));else{let f=this.plugins[c];f.mustUpdate=t,s.push(f)}}for(let a of this.plugins)a.mustUpdate!=t&&a.destroy(this);this.plugins=s,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let s of this.plugins)s.mustUpdate=t;for(let s=0;s<this.plugins.length;s++)this.plugins[s].update(this)}measure(t=!0){if(this.destroyed)return;this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,t&&this.observer.forceFlush();let r=null,{scrollHeight:i,scrollTop:s,clientHeight:a}=this.scrollDOM,c=s>i-a-4?i:s;try{for(let f=0;;f++){this.updateState=1;let m=this.viewport,w=this.viewState.lineBlockAtHeight(c),E=this.viewState.measure(this);if(!E&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(f>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let R=[];4&E||([this.measureRequests,R]=[R,this.measureRequests]);let j=R.map(Ve=>{try{return Ve.read(this)}catch(nt){return No(this.state,nt),bO}}),re=_0.create(this,this.state,[]),xe=!1,ke=!1;re.flags|=E,r?r.flags|=E:r=re,this.updateState=2,re.empty||(this.updatePlugins(re),this.inputState.update(re),this.updateAttrs(),xe=this.docView.update(re));for(let Ve=0;Ve<R.length;Ve++)if(j[Ve]!=bO)try{let nt=R[Ve];nt.write&&nt.write(j[Ve],this)}catch(nt){No(this.state,nt)}if(this.viewState.editorHeight)if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,ke=!0;else{let Ve=this.viewState.lineBlockAt(w.from).top-w.top;(Ve>1||Ve<-1)&&(this.scrollDOM.scrollTop+=Ve,ke=!0)}if(xe&&this.docView.updateSelection(!0),this.viewport.from==m.from&&this.viewport.to==m.to&&!ke&&0==this.measureRequests.length)break}}finally{this.updateState=0,this.measureScheduled=-1}if(r&&!r.empty)for(let f of this.state.facet(OE))f(r)}get themeClasses(){return GE+" "+(this.state.facet(UE)?gO:pO)+" "+this.state.facet(R0)}updateAttrs(){let t=wO(this,Ek,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),r={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(C0)?"true":"false",class:"cm-content",style:`${rn.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(r["aria-readonly"]="true"),wO(this,S0,r);let i=this.observer.ignore(()=>{let s=TE(this.contentDOM,this.contentAttrs,r),a=TE(this.dom,this.editorAttrs,t);return s||a});return this.editorAttrs=t,this.contentAttrs=r,i}showAnnouncements(t){let r=!0;for(let i of t)for(let s of i.effects)s.is(n.announce)&&(r&&(this.announceDOM.textContent=""),r=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=s.value)}mountStyles(){this.styleModules=this.state.facet(Zg),lc.mount(this.root,this.styleModules.concat(xG).reverse())}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(t){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),t){if(this.measureRequests.indexOf(t)>-1)return;if(null!=t.key)for(let r=0;r<this.measureRequests.length;r++)if(this.measureRequests[r].key===t.key)return void(this.measureRequests[r]=t);this.measureRequests.push(t)}}plugin(t){let r=this.pluginMap.get(t);return(void 0===r||r&&r.spec!=t)&&this.pluginMap.set(t,r=this.plugins.find(i=>i.spec==t)||null),r&&r.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(t){return this.readMeasured(),this.viewState.elementAtHeight(t)}lineBlockAtHeight(t){return this.readMeasured(),this.viewState.lineBlockAtHeight(t)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(t){return this.viewState.lineBlockAt(t)}get contentHeight(){return this.viewState.contentHeight}moveByChar(t,r,i){return BE(this,t,Uk(this,t,r,i))}moveByGroup(t,r){return BE(this,t,Uk(this,t,r,i=>function Q4(n,e,t){let r=n.state.charCategorizer(e),i=r(t);return s=>{let a=r(s);return i==Ur.Space&&(i=a),i==a}}(this,t.head,i)))}moveToLineBoundary(t,r,i=!0){return function K4(n,e,t,r){let i=n.state.doc.lineAt(e.head),s=r&&n.lineWrapping?n.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head):null;if(s){let f=n.dom.getBoundingClientRect(),m=n.textDirectionAt(i.from),w=n.posAtCoords({x:t==(m==Jr.LTR)?f.right-1:f.left+1,y:(s.top+s.bottom)/2});if(null!=w)return Et.cursor(w,t?-1:1)}let a=$s.find(n.docView,e.head);return Et.cursor(a?t?a.posAtEnd:a.posAtStart:t?i.to:i.from,t?-1:1)}(this,t,r,i)}moveVertically(t,r,i){return BE(this,t,function J4(n,e,t,r){let i=e.head,s=t?1:-1;if(i==(t?n.state.doc.length:0))return Et.cursor(i,e.assoc);let c,a=e.goalColumn,f=n.contentDOM.getBoundingClientRect(),m=n.coordsAtPos(i),w=n.documentTop;if(m)null==a&&(a=m.left-f.left),c=s<0?m.top:m.bottom;else{let j=n.viewState.lineBlockAt(i);null==a&&(a=Math.min(f.right-f.left,n.defaultCharacterWidth*(i-j.from))),c=(s<0?j.top:j.bottom)+w}let E=f.left+a,R=r??n.defaultLineHeight>>1;for(let j=0;;j+=10){let re=c+(R+j)*s,xe=zk(n,{x:E,y:re},!1,s);if(re<f.top||re>f.bottom||(s<0?xe<i:xe>i))return Et.cursor(xe,e.assoc,void 0,a)}}(this,t,r,i))}domAtPos(t){return this.docView.domAtPos(t)}posAtDOM(t,r=0){return this.docView.posFromDOM(t,r)}posAtCoords(t,r=!0){return this.readMeasured(),zk(this,t,r)}coordsAtPos(t,r=1){this.readMeasured();let i=this.docView.coordsAt(t,r);if(!i||i.left==i.right)return i;let s=this.state.doc.lineAt(t),a=this.bidiSpans(s);return bE(i,a[Sf.find(a,t-s.from,-1,r)].dir==Jr.LTR==r>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(t){return!this.state.facet(wk)||t<this.viewport.from||t>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(t))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(t){if(t.length>IG)return Ak(t.length);let r=this.textDirectionAt(t.from);for(let s of this.bidiCache)if(s.from==t.from&&s.dir==r)return s.order;let i=function Mk(n,e){let t=n.length,r=e==NE?1:2,i=e==NE?2:1;if(!n||1==r&&!F4.test(n))return Ak(t);for(let a=0,c=r,f=r;a<t;a++){let m=L4(n.charCodeAt(a));512==m?m=c:8==m&&4==f&&(m=16),Zr[a]=4==m?2:m,7&m&&(f=m),c=m}for(let a=0,c=r,f=r;a<t;a++){let m=Zr[a];if(128==m)a<t-1&&c==Zr[a+1]&&24&c?m=Zr[a]=c:Zr[a]=256;else if(64==m){let w=a+1;for(;w<t&&64==Zr[w];)w++;let E=a&&8==c||w<t&&8==Zr[w]?1==f?1:8:256;for(let R=a;R<w;R++)Zr[R]=E;a=w-1}else 8==m&&1==f&&(Zr[a]=1);c=m,7&m&&(f=m)}for(let m,w,E,a=0,c=0,f=0;a<t;a++)if(w=PE[m=n.charCodeAt(a)])if(w<0){for(let R=c-3;R>=0;R-=3)if(El[R+1]==-w){let j=El[R+2],re=2&j?r:4&j?1&j?i:r:0;re&&(Zr[a]=Zr[El[R]]=re),c=R;break}}else{if(189==El.length)break;El[c++]=a,El[c++]=m,El[c++]=f}else if(2==(E=Zr[a])||1==E){let R=E==r;f=R?0:1;for(let j=c-3;j>=0;j-=3){let re=El[j+2];if(2&re)break;if(R)El[j+2]|=2;else{if(4&re)break;El[j+2]|=4}}}for(let a=0;a<t;a++)if(256==Zr[a]){let c=a+1;for(;c<t&&256==Zr[c];)c++;let f=1==(a?Zr[a-1]:r),w=f==(1==(c<t?Zr[c]:r))?f?1:2:r;for(let E=a;E<c;E++)Zr[E]=w;a=c-1}let s=[];if(1==r)for(let a=0;a<t;){let c=a,f=1!=Zr[a++];for(;a<t&&f==(1!=Zr[a]);)a++;if(f)for(let m=a;m>c;){let w=m,E=2!=Zr[--m];for(;m>c&&E==(2!=Zr[m-1]);)m--;s.push(new Sf(m,w,E?2:1))}else s.push(new Sf(c,a,0))}else for(let a=0;a<t;){let c=a,f=2==Zr[a++];for(;a<t&&f==(2==Zr[a]);)a++;s.push(new Sf(c,a,f?1:2))}return s}(t.text,r);return this.bidiCache.push(new N0(t.from,t.to,r,i)),i}get hasFocus(){var t;return(this.dom.ownerDocument.hasFocus()||rn.safari&&(null===(t=this.inputState)||void 0===t?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{XI(this.contentDOM),this.docView.updateSelection()})}setRoot(t){this._root!=t&&(this._root=t,this.observer.setWindow((9==t.nodeType?t:t.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let t of this.plugins)t.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(t,r={}){return xk.of(new E0("number"==typeof t?Et.cursor(t):t,r.y,r.x,r.yMargin,r.xMargin))}static domEventHandlers(t){return oi.define(()=>({}),{eventHandlers:t})}static theme(t,r){let i=lc.newName(),s=[R0.of(i),Zg.of($E(`.${i}`,t))];return r&&r.dark&&s.push(UE.of(!0)),s}static baseTheme(t){return Td.lowest(Zg.of($E("."+GE,t,mO)))}static findFromDOM(t){var r;let i=t.querySelector(".cm-content");return(null===(r=(i&&Fr.get(i)||Fr.get(t))?.rootView)||void 0===r?void 0:r.view)||null}}return n.styleModule=Zg,n.inputHandler=yk,n.focusChangeEffect=bk,n.perLineTextDirection=wk,n.exceptionSink=vk,n.updateListener=OE,n.editable=C0,n.mouseSelectionStyle=mk,n.dragMovesSelection=gk,n.clickAddsSelectionRange=pk,n.decorations=Jg,n.atomicRanges=Ck,n.scrollMargins=Sk,n.darkTheme=UE,n.contentAttributes=S0,n.editorAttributes=Ek,n.lineWrapping=n.contentAttributes.of({class:"cm-lineWrapping"}),n.announce=$n.define(),n})();const IG=4096,bO={};class N0{constructor(e,t,r,i){this.from=e,this.to=t,this.dir=r,this.order=i}static update(e,t){if(t.empty)return e;let r=[],i=e.length?e[e.length-1].dir:Jr.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let a=e[s];a.dir==i&&!t.touchesRange(a.from,a.to)&&r.push(new N0(t.mapPos(a.from,1),t.mapPos(a.to,-1),a.dir,a.order))}return r}}function wO(n,e,t){for(let r=n.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],a="function"==typeof s?s(n):s;a&&ME(a,t)}return t}const kG=rn.mac?"mac":rn.windows?"win":rn.linux?"linux":"key";function P0(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),!1!==t&&e.shiftKey&&(n="Shift-"+n),n}const L0=tn.define({enables:Td.default(Mn.domEventHandlers({keydown:(n,e)=>EO(xO(e.state),n,e,"editor")}))}),DO=new WeakMap;function xO(n){let e=n.facet(L0),t=DO.get(e);return t||DO.set(e,t=function LG(n,e=kG){let t=Object.create(null),r=Object.create(null),i=(a,c)=>{let f=r[a];if(null==f)r[a]=c;else if(f!=c)throw new Error("Key binding "+a+" is used both as a regular binding and as a multi-stroke prefix")},s=(a,c,f,m)=>{var w,E;let R=t[a]||(t[a]=Object.create(null)),j=c.split(/ (?!$)/).map(ke=>function OG(n,e){const t=n.split(/-(?!$)/);let i,s,a,c,r=t[t.length-1];"Space"==r&&(r=" ");for(let f=0;f<t.length-1;++f){const m=t[f];if(/^(cmd|meta|m)$/i.test(m))c=!0;else if(/^a(lt)?$/i.test(m))i=!0;else if(/^(c|ctrl|control)$/i.test(m))s=!0;else if(/^s(hift)?$/i.test(m))a=!0;else{if(!/^mod$/i.test(m))throw new Error("Unrecognized modifier name: "+m);"mac"==e?c=!0:s=!0}}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),c&&(r="Meta-"+r),a&&(r="Shift-"+r),r}(ke,e));for(let ke=1;ke<j.length;ke++){let Ve=j.slice(0,ke).join(" ");i(Ve,!0),R[Ve]||(R[Ve]={preventDefault:!0,run:[nt=>{let Ye=fc={view:nt,prefix:Ve,scope:a};return setTimeout(()=>{fc==Ye&&(fc=null)},4e3),!0}]})}let re=j.join(" ");i(re,!1);let xe=R[re]||(R[re]={preventDefault:!1,run:(null===(E=null===(w=R._any)||void 0===w?void 0:w.run)||void 0===E?void 0:E.slice())||[]});f&&xe.run.push(f),m&&(xe.preventDefault=!0)};for(let a of n){let c=a.scope?a.scope.split(" "):["editor"];if(a.any)for(let m of c){let w=t[m]||(t[m]=Object.create(null));w._any||(w._any={preventDefault:!1,run:[]});for(let E in w)w[E].run.push(a.any)}let f=a[e]||a.key;if(f)for(let m of c)s(m,f,a.run,a.preventDefault),a.shift&&s(m,"Shift-"+f,a.shift,a.preventDefault)}return t}(e.reduce((r,i)=>r.concat(i),[]))),t}let fc=null;function EO(n,e,t,r){let i=function w4(n){var t=!(b4&&(n.ctrlKey||n.altKey||n.metaKey)||y4&&n.shiftKey&&n.key&&1==n.key.length||"Unidentified"==n.key)&&n.key||(n.shiftKey?qg:uc)[n.keyCode]||n.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(e),a=Jo(ss(i,0))==i.length&&" "!=i,c="",f=!1;fc&&fc.view==t&&fc.scope==r&&(c=fc.prefix+" ",(f=$k.indexOf(e.keyCode)<0)&&(fc=null));let R,j,m=new Set,w=re=>{if(re){for(let xe of re.run)if(!m.has(xe)&&(m.add(xe),xe(t,e)))return!0;re.preventDefault&&(f=!0)}return!1},E=n[r];if(E){if(w(E[c+P0(i,e,!a)]))return!0;if(a&&(e.altKey||e.metaKey||e.ctrlKey)&&!(rn.windows&&e.ctrlKey&&e.altKey)&&(R=uc[e.keyCode])&&R!=i){if(w(E[c+P0(R,e,!0)]))return!0;if(e.shiftKey&&(j=qg[e.keyCode])!=i&&j!=R&&w(E[c+P0(j,e,!1)]))return!0}else if(a&&e.shiftKey&&w(E[c+P0(i,e,!0)]))return!0;if(w(E._any))return!0}return f}class tm{constructor(e,t,r,i,s){this.className=e,this.left=t,this.top=r,this.width=i,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className==this.className&&(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",null!=this.width&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,r){if(r.empty){let i=e.coordsAtPos(r.head,r.assoc||1);if(!i)return[];let s=CO(e);return[new tm(t,i.left-s.left,i.top-s.top,null,i.bottom-i.top)]}return function FG(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let r=Math.max(t.from,n.viewport.from),i=Math.min(t.to,n.viewport.to),s=n.textDirection==Jr.LTR,a=n.contentDOM,c=a.getBoundingClientRect(),f=CO(n),m=a.querySelector(".cm-line"),w=m&&window.getComputedStyle(m),E=c.left+(w?parseInt(w.paddingLeft)+Math.min(0,parseInt(w.textIndent)):0),R=c.right-(w?parseInt(w.paddingRight):0),j=_O(n,r),re=_O(n,i),xe=j.type==_r.Text?j:null,ke=re.type==_r.Text?re:null;if(n.lineWrapping&&(xe&&(xe=SO(n,r,xe)),ke&&(ke=SO(n,i,ke))),xe&&ke&&xe.from==ke.from)return nt(Ye(t.from,t.to,xe));{let Rt=xe?Ye(t.from,null,xe):ht(j,!1),Nt=ke?Ye(null,t.to,ke):ht(re,!0),gn=[];return(xe||j).to<(ke||re).from-1?gn.push(Ve(E,Rt.bottom,R,Nt.top)):Rt.bottom<Nt.top&&n.elementAtHeight((Rt.bottom+Nt.top)/2).type==_r.Text&&(Rt.bottom=Nt.top=(Rt.bottom+Nt.top)/2),nt(Rt).concat(gn).concat(nt(Nt))}function Ve(Rt,Nt,gn,kr){return new tm(e,Rt-f.left,Nt-f.top-.01,gn-Rt,kr-Nt+.01)}function nt({top:Rt,bottom:Nt,horizontal:gn}){let kr=[];for(let Bn=0;Bn<gn.length;Bn+=2)kr.push(Ve(gn[Bn],Rt,gn[Bn+1],Nt));return kr}function Ye(Rt,Nt,gn){let kr=1e9,Bn=-1e9,Wn=[];function Br(go,cs,As,Nl,mo){let Ci=n.coordsAtPos(go,go==gn.to?-2:2),Yi=n.coordsAtPos(As,As==gn.from?2:-2);kr=Math.min(Ci.top,Yi.top,kr),Bn=Math.max(Ci.bottom,Yi.bottom,Bn),mo==Jr.LTR?Wn.push(s&&cs?E:Ci.left,s&&Nl?R:Yi.right):Wn.push(!s&&Nl?E:Yi.left,!s&&cs?R:Ci.right)}let Fi=Rt??gn.from,Ms=Nt??gn.to;for(let go of n.visibleRanges)if(go.to>Fi&&go.from<Ms)for(let cs=Math.max(go.from,Fi),As=Math.min(go.to,Ms);;){let Nl=n.state.doc.lineAt(cs);for(let mo of n.bidiSpans(Nl)){let Ci=mo.from+Nl.from,Yi=mo.to+Nl.from;if(Ci>=As)break;Yi>cs&&Br(Math.max(Ci,cs),null==Rt&&Ci<=Fi,Math.min(Yi,As),null==Nt&&Yi>=Ms,mo.dir)}if(cs=Nl.to+1,cs>=As)break}return 0==Wn.length&&Br(Fi,null==Rt,Ms,null==Nt,n.textDirection),{top:kr,bottom:Bn,horizontal:Wn}}function ht(Rt,Nt){let gn=c.top+(Nt?Rt.top:Rt.bottom);return{top:gn,bottom:gn,horizontal:[]}}}(e,t,r)}}function CO(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==Jr.LTR?e.left:e.right-n.scrollDOM.clientWidth)-n.scrollDOM.scrollLeft,top:e.top-n.scrollDOM.scrollTop}}function SO(n,e,t){let r=Et.cursor(e);return{from:Math.max(t.from,n.moveToLineBoundary(r,!1,!0).from),to:Math.min(t.to,n.moveToLineBoundary(r,!0,!0).from),type:_r.Text}}function _O(n,e){let t=n.lineBlockAt(e);if(Array.isArray(t.type))for(let r of t.type)if(r.to>e||r.to==e&&(r.to==t.to||r.type==_r.Text))return r;return t}class VG{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(F0)!=e.state.facet(F0)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&e.view.requestMeasure(this.measureReq)}setOrder(e){let t=0,r=e.facet(F0);for(;t<r.length&&r[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}draw(e){if(e.length!=this.drawn.length||e.some((t,r)=>!function BG(n,e){return n.constructor==e.constructor&&n.eq(e)}(t,this.drawn[r]))){let t=this.dom.firstChild,r=0;for(let i of e)i.update&&t&&i.constructor&&this.drawn[r].constructor&&i.update(t,this.drawn[r])?(t=t.nextSibling,r++):this.dom.insertBefore(i.draw(),t);for(;t;){let i=t.nextSibling;t.remove(),t=i}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const F0=tn.define();function MO(n){return[oi.define(e=>new VG(e,n)),F0.of(n)]}const AO=!rn.ios,nm=tn.define({combine:n=>Na(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})});function HG(n={}){return[nm.of(n),zG,jG,UG,Dk.of(!0)]}function TO(n){return n.startState.facet(nm)!=n.state.facet(nm)}const zG=MO({above:!0,markers(n){let{state:e}=n,t=e.facet(nm),r=[];for(let i of e.selection.ranges){let s=i==e.selection.main;if(i.empty?!s||AO:t.drawRangeCursor){let a=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",c=i.empty?i:Et.cursor(i.head,i.head>i.anchor?-1:1);for(let f of tm.forRange(n,a,c))r.push(f)}}return r},update(n,e){n.transactions.some(r=>r.selection)&&(e.style.animationName="cm-blink"==e.style.animationName?"cm-blink2":"cm-blink");let t=TO(n);return t&&IO(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){IO(e.state,n)},class:"cm-cursorLayer"});function IO(n,e){e.style.animationDuration=n.facet(nm).cursorBlinkRate+"ms"}const jG=MO({above:!1,markers:n=>n.state.selection.ranges.map(e=>e.empty?[]:tm.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t)),update:(n,e)=>n.docChanged||n.selectionSet||n.viewportChanged||TO(n),class:"cm-selectionLayer"}),kO={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};AO&&(kO[".cm-line"].caretColor="transparent !important");const UG=Td.highest(Mn.theme(kO)),OO=$n.define({map:(n,e)=>null==n?null:e.mapPos(n)}),rm=Ei.define({create:()=>null,update:(n,e)=>(null!=n&&(n=e.changes.mapPos(n)),e.effects.reduce((t,r)=>r.is(OO)?r.value:t,n))}),GG=oi.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(rm);null==t?null!=this.cursor&&(null===(e=this.cursor)||void 0===e||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(rm)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let n=this.view.state.field(rm),e=null!=n&&this.view.coordsAtPos(n);if(!e)return null;let t=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-t.left+this.view.scrollDOM.scrollLeft,top:e.top-t.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(n){this.cursor&&(n?(this.cursor.style.left=n.left+"px",this.cursor.style.top=n.top+"px",this.cursor.style.height=n.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(rm)!=n&&this.view.dispatch({effects:OO.of(n)})}},{eventHandlers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function RO(n,e,t,r,i){e.lastIndex=0;for(let c,s=n.iterRange(t,r),a=t;!s.next().done;a+=s.value.length)if(!s.lineBreak)for(;c=e.exec(s.value);)i(a+c.index,c)}class qE{constructor(e){const{regexp:t,decoration:r,decorate:i,boundary:s,maxLength:a=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,i)this.addMatch=(c,f,m,w)=>i(w,m,m+c[0].length,c,f);else if("function"==typeof r)this.addMatch=(c,f,m,w)=>{let E=r(c,f,m);E&&w(m,m+c[0].length,E)};else{if(!r)throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.addMatch=(c,f,m,w)=>w(m,m+c[0].length,r)}this.boundary=s,this.maxLength=a}createDeco(e){let t=new ac,r=t.add.bind(t);for(let{from:i,to:s}of function WG(n,e){let t=n.visibleRanges;if(1==t.length&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let r=[];for(let{from:i,to:s}of t)i=Math.max(n.state.doc.lineAt(i).from,i-e),s=Math.min(n.state.doc.lineAt(s).to,s+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=s:r.push({from:i,to:s});return r}(e,this.maxLength))RO(e.state.doc,this.regexp,i,s,(a,c)=>this.addMatch(c,e,a,r));return t.finish()}updateDeco(e,t){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((s,a,c,f)=>{f>e.view.viewport.from&&c<e.view.viewport.to&&(r=Math.min(c,r),i=Math.max(f,i))}),e.viewportChanged||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,t.map(e.changes),r,i):t}updateRange(e,t,r,i){for(let s of e.visibleRanges){let a=Math.max(s.from,r),c=Math.min(s.to,i);if(c>a){let f=e.state.doc.lineAt(a),m=f.to<c?e.state.doc.lineAt(c):f,w=Math.max(s.from,f.from),E=Math.min(s.to,m.to);if(this.boundary){for(;a>f.from;a--)if(this.boundary.test(f.text[a-1-f.from])){w=a;break}for(;c<m.to;c++)if(this.boundary.test(m.text[c-m.from])){E=c;break}}let j,R=[],re=(xe,ke,Ve)=>R.push(Ve.range(xe,ke));if(f==m)for(this.regexp.lastIndex=w-f.from;(j=this.regexp.exec(f.text))&&j.index<E-f.from;)this.addMatch(j,e,j.index+f.from,re);else RO(e.state.doc,this.regexp,w,E,(xe,ke)=>this.addMatch(ke,e,xe,re));t=t.update({filterFrom:w,filterTo:E,filter:(xe,ke)=>xe<w||ke>E,add:R})}}return t}}const YE=null!=/x/.unicode?"gu":"g",qG=new RegExp("[\0-\b\n-\x1f\x7f-\x9f\xad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]",YE),YG={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let XE=null;const B0=tn.define({combine(n){let e=Na(n,{render:null,specialChars:qG,addSpecialChars:null});return(e.replaceTabs=!function XG(){var n;if(null==XE&&typeof document<"u"&&document.body){let e=document.body.style;XE=null!=(null!==(n=e.tabSize)&&void 0!==n?n:e.MozTabSize)}return XE||!1}())&&(e.specialChars=new RegExp("\t|"+e.specialChars.source,YE)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,YE)),e}});function KG(n={}){return[B0.of(n),NO||(NO=oi.fromClass(class{constructor(n){this.view=n,this.decorations=sn.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(B0)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new qE({regexp:n.specialChars,decoration:(e,t,r)=>{let{doc:i}=t.state,s=ss(e[0],0);if(9==s){let a=i.lineAt(r),c=t.state.tabSize,f=Wg(a.text,c,r-a.from);return sn.replace({widget:new t$((c-f%c)*this.view.defaultCharacterWidth)})}return this.decorationCache[s]||(this.decorationCache[s]=sn.replace({widget:new e$(n,s)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(B0);n.startState.facet(B0)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))]}let NO=null;class e$ extends fu{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=function ZG(n){return n>=32?"\u2022":10==n?"\u2424":String.fromCharCode(9216+n)}(this.code),r=e.state.phrase("Control character")+" "+(YG[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,t);if(i)return i;let s=document.createElement("span");return s.textContent=t,s.title=r,s.setAttribute("aria-label",r),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class t$ extends fu{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="\t",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}const r$=sn.line({class:"cm-activeLine"}),i$=oi.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let r of n.state.selection.ranges){let i=n.lineBlockAt(r.head);i.from>e&&(t.push(r$.range(i.from)),e=i.from)}return sn.set(t)}},{decorations:n=>n.decorations});function LO(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),r=n.state.doc.lineAt(t),i=t-r.from,s=i>2e3?-1:i==r.length?function a$(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}(n,e.clientX):Wg(r.text,n.state.tabSize,t-r.from);return{line:r.number,col:s,off:i}}function u$(n){let e=n?.eventFilter||(t=>t.altKey&&0==t.button);return Mn.mouseSelectionStyle.of((t,r)=>e(r)?function l$(n,e){let t=LO(n,e),r=n.state.selection;return t?{update(i){if(i.docChanged){let s=i.changes.mapPos(i.startState.doc.line(t.line).from),a=i.state.doc.lineAt(s);t={line:a.number,col:t.col,off:Math.min(t.off,a.length)},r=r.map(i.changes)}},get(i,s,a){let c=LO(n,i);if(!c)return r;let f=function o$(n,e,t){let r=Math.min(e.line,t.line),i=Math.max(e.line,t.line),s=[];if(e.off>2e3||t.off>2e3||e.col<0||t.col<0){let a=Math.min(e.off,t.off),c=Math.max(e.off,t.off);for(let f=r;f<=i;f++){let m=n.doc.line(f);m.length<=c&&s.push(Et.range(m.from+a,m.to+c))}}else{let a=Math.min(e.col,t.col),c=Math.max(e.col,t.col);for(let f=r;f<=i;f++){let m=n.doc.line(f),w=gE(m.text,a,n.tabSize,!0);if(w<0)s.push(Et.cursor(m.to));else{let E=gE(m.text,c,n.tabSize);s.push(Et.range(m.from+w,m.from+E))}}}return s}(n.state,t,c);return f.length?Et.create(a?f.concat(r.ranges):f):r}}:null}(t,r):null)}const c$={Alt:[18,n=>n.altKey],Control:[17,n=>n.ctrlKey],Shift:[16,n=>n.shiftKey],Meta:[91,n=>n.metaKey]},d$={style:"cursor: crosshair"};function h$(n={}){let[e,t]=c$[n.key||"Alt"],r=oi.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventHandlers:{keydown(i){this.set(i.keyCode==e||t(i))},keyup(i){(i.keyCode==e||!t(i))&&this.set(!1)},mousemove(i){this.set(t(i))}}});return[r,Mn.contentAttributes.of(i=>{var s;return null!==(s=i.plugin(r))&&void 0!==s&&s.isDown?d$:null})]}const V0="-10000px";class FO{constructor(e,t,r){this.facet=t,this.createTooltipView=r,this.input=e.state.facet(t),this.tooltips=this.input.filter(i=>i),this.tooltipViews=this.tooltips.map(r)}update(e){var t;let r=e.state.facet(this.facet),i=r.filter(a=>a);if(r===this.input){for(let a of this.tooltipViews)a.update&&a.update(e);return!1}let s=[];for(let a=0;a<i.length;a++){let c=i[a],f=-1;if(c){for(let m=0;m<this.tooltips.length;m++){let w=this.tooltips[m];w&&w.create==c.create&&(f=m)}if(f<0)s[a]=this.createTooltipView(c);else{let m=s[a]=this.tooltipViews[f];m.update&&m.update(e)}}}for(let a of this.tooltipViews)s.indexOf(a)<0&&(a.dom.remove(),null===(t=a.destroy)||void 0===t||t.call(a));return this.input=r,this.tooltips=i,this.tooltipViews=s,!0}}function f$(n){let{win:e}=n;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const H0=tn.define({combine:n=>{var e,t,r;return{position:rn.ios?"absolute":(null===(e=n.find(i=>i.position))||void 0===e?void 0:e.position)||"fixed",parent:(null===(t=n.find(i=>i.parent))||void 0===t?void 0:t.parent)||null,tooltipSpace:(null===(r=n.find(i=>i.tooltipSpace))||void 0===r?void 0:r.tooltipSpace)||f$}}}),BO=new WeakMap,QE=oi.fromClass(class{constructor(n){this.view=n,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(H0);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new FO(n,z0,t=>this.createTooltip(t)),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n);e&&this.observeIntersection();let t=e||n.geometryChanged,r=n.state.facet(H0);if(r.position!=this.position){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;t=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n){let e=n.create(this.view);if(e.dom.classList.add("cm-tooltip"),n.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let t=document.createElement("div");t.className="cm-tooltip-arrow",e.dom.appendChild(t)}return e.dom.style.position=this.position,e.dom.style.top=V0,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var n,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let t of this.manager.tooltipViews)t.dom.remove(),null===(n=t.destroy)||void 0===n||n.call(t);null===(e=this.intersectionObserver)||void 0===e||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=this.view.dom.getBoundingClientRect();return{editor:n,parent:this.parent?this.container.getBoundingClientRect():n,pos:this.manager.tooltips.map((e,t)=>{let r=this.manager.tooltipViews[t];return r.getCoords?r.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(H0).tooltipSpace(this.view)}}writeMeasure(n){var e;let{editor:t,space:r}=n,i=[];for(let s=0;s<this.manager.tooltips.length;s++){let a=this.manager.tooltips[s],c=this.manager.tooltipViews[s],{dom:f}=c,m=n.pos[s],w=n.size[s];if(!m||m.bottom<=Math.max(t.top,r.top)||m.top>=Math.min(t.bottom,r.bottom)||m.right<Math.max(t.left,r.left)-.1||m.left>Math.min(t.right,r.right)+.1){f.style.top=V0;continue}let E=a.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,R=E?7:0,j=w.right-w.left,re=null!==(e=BO.get(c))&&void 0!==e?e:w.bottom-w.top,xe=c.offset||g$,ke=this.view.textDirection==Jr.LTR,Ve=w.width>r.right-r.left?ke?r.left:r.right-w.width:ke?Math.min(m.left-(E?14:0)+xe.x,r.right-j):Math.max(r.left,m.left-j+(E?14:0)-xe.x),nt=!!a.above;!a.strictSide&&(nt?m.top-(w.bottom-w.top)-xe.y<r.top:m.bottom+(w.bottom-w.top)+xe.y>r.bottom)&&nt==r.bottom-m.bottom>m.top-r.top&&(nt=!nt);let Ye=(nt?m.top-r.top:r.bottom-m.bottom)-R;if(Ye<re&&!1!==c.resize){if(Ye<this.view.defaultLineHeight){f.style.top=V0;continue}BO.set(c,re),f.style.height=(re=Ye)+"px"}else f.style.height&&(f.style.height="");let ht=nt?m.top-re-R-xe.y:m.bottom+R+xe.y,Rt=Ve+j;if(!0!==c.overlap)for(let Nt of i)Nt.left<Rt&&Nt.right>Ve&&Nt.top<ht+re&&Nt.bottom>ht&&(ht=nt?Nt.top-re-2-R:Nt.bottom+R+2);"absolute"==this.position?(f.style.top=ht-n.parent.top+"px",f.style.left=Ve-n.parent.left+"px"):(f.style.top=ht+"px",f.style.left=Ve+"px"),E&&(E.style.left=m.left+(ke?xe.x:-xe.x)-(Ve+14-7)+"px"),!0!==c.overlap&&i.push({left:Ve,top:ht,right:Rt,bottom:ht+re}),f.classList.toggle("cm-tooltip-above",nt),f.classList.toggle("cm-tooltip-below",!nt),c.positioned&&c.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=V0}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),g$={x:0,y:0},z0=tn.define({enables:[QE,Mn.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}})]}),im=tn.define();class JE{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new FO(e,im,t=>this.createHostedView(t))}static create(e){return new JE(e)}createHostedView(e){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}}const m$=z0.compute([im],n=>{let e=n.facet(im).filter(t=>t);return 0===e.length?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.filter(t=>null!=t.end).map(t=>t.end)),create:JE.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class v${constructor(e,t,r,i,s){this.view=e,this.source=t,this.field=r,this.setHover=i,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,t=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(null==t)return;let r=this.view.coordsAtPos(t);if(null==r||e.y<r.top||e.y>r.bottom||e.x<r.left-this.view.defaultCharacterWidth||e.x>r.right+this.view.defaultCharacterWidth)return;let i=this.view.bidiSpans(this.view.state.doc.lineAt(t)).find(c=>c.from<=t&&c.to>=t),s=i&&i.dir==Jr.RTL?-1:1,a=this.source(this.view,t,e.x<r.left?-s:s);if(a?.then){let c=this.pending={pos:t};a.then(f=>{this.pending==c&&(this.pending=null,f&&this.view.dispatch({effects:this.setHover.of(f)}))},f=>No(this.view.state,f,"hover tooltip"))}else a&&this.view.dispatch({effects:this.setHover.of(a)})}mousemove(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let r=this.active;if(r&&!VO(this.lastMove.target)||this.pending){let{pos:i}=r||this.pending,s=null!==(t=r?.end)&&void 0!==t?t:i;(i==s?this.view.posAtCoords(this.lastMove)!=i:!function y$(n,e,t,r,i,s){let a=document.createRange(),c=n.domAtPos(e),f=n.domAtPos(t);a.setEnd(f.node,f.offset),a.setStart(c.node,c.offset);let m=a.getClientRects();a.detach();for(let w=0;w<m.length;w++){let E=m[w];if(Math.max(E.top-i,i-E.bottom,E.left-r,r-E.right)<=s)return!0}return!1}(this.view,i,s,e.clientX,e.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!VO(e.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function VO(n){for(let e=n;e;e=e.parentNode)if(1==e.nodeType&&e.classList.contains("cm-tooltip"))return!0;return!1}function b$(n,e={}){let t=$n.define(),r=Ei.define({create:()=>null,update(i,s){if(i&&(e.hideOnChange&&(s.docChanged||s.selection)||e.hideOn&&e.hideOn(s,i)))return null;if(i&&s.docChanged){let a=s.changes.mapPos(i.pos,-1,Us.TrackDel);if(null==a)return null;let c=Object.assign(Object.create(null),i);c.pos=a,null!=i.end&&(c.end=s.changes.mapPos(i.end)),i=c}for(let a of s.effects)a.is(t)&&(i=a.value),a.is(D$)&&(i=null);return i},provide:i=>im.from(i)});return[r,oi.define(i=>new v$(i,n,r,t,e.hoverTime||300)),m$]}const D$=$n.define(),ZE=tn.define({combine(n){let e,t;for(let r of n)e=e||r.topContainer,t=t||r.bottomContainer;return{topContainer:e,bottomContainer:t}}});function sm(n,e){let t=n.plugin(HO),r=t?t.specs.indexOf(e):-1;return r>-1?t.panels[r]:null}const HO=oi.fromClass(class{constructor(n){this.input=n.state.facet(om),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(ZE);this.top=new j0(n,!0,e.topContainer),this.bottom=new j0(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(ZE);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new j0(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new j0(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(om);if(t!=this.input){let r=t.filter(f=>f),i=[],s=[],a=[],c=[];for(let f of r){let w,m=this.specs.indexOf(f);m<0?(w=f(n.view),c.push(w)):(w=this.panels[m],w.update&&w.update(n)),i.push(w),(w.top?s:a).push(w)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(a);for(let f of c)f.dom.classList.add("cm-panel"),f.mount&&f.mount()}else for(let r of this.panels)r.update&&r.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>Mn.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class j0{constructor(e,t,r){this.view=e,this.top=t,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=zO(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=zO(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function zO(n){let e=n.nextSibling;return n.remove(),e}const om=tn.define({enables:HO});class Cl extends Id{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Cl.prototype.elementClass="",Cl.prototype.toDOM=void 0,Cl.prototype.mapMode=Us.TrackBefore,Cl.prototype.startSide=Cl.prototype.endSide=-1,Cl.prototype.point=!0;const U0=tn.define(),x$={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Qr.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},am=tn.define();function jO(n){return[UO(),am.of(Object.assign(Object.assign({},x$),n))]}const eC=tn.define({combine:n=>n.some(e=>e)});function UO(n){let e=[E$];return n&&!1===n.fixed&&e.push(eC.of(!0)),e}const E$=oi.fromClass(class{constructor(n){this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=n.state.facet(am).map(e=>new WO(n,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!n.state.facet(eC),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,r=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(r<.8*(t.to-t.from))}n.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(eC)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&this.dom.remove();let t=Qr.iter(this.view.state.facet(U0),this.view.viewport.from),r=[],i=this.gutters.map(s=>new C$(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks){let a;if(Array.isArray(s.type)){for(let c of s.type)if(c.type==_r.Text){a=c;break}}else a=s.type==_r.Text?s:void 0;if(a){r.length&&(r=[]),$O(t,r,s.from);for(let c of i)c.line(this.view,a,r)}}for(let s of i)s.finish();n&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(n){let e=n.startState.facet(am),t=n.state.facet(am),r=n.docChanged||n.heightChanged||n.viewportChanged||!Qr.eq(n.startState.facet(U0),n.state.facet(U0),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let i of this.gutters)i.update(n)&&(r=!0);else{r=!0;let i=[];for(let s of t){let a=e.indexOf(s);a<0?i.push(new WO(this.view,s)):(this.gutters[a].update(n),i.push(this.gutters[a]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove()}},{provide:n=>Mn.scrollMargins.of(e=>{let t=e.plugin(n);return t&&0!=t.gutters.length&&t.fixed?e.textDirection==Jr.LTR?{left:t.dom.offsetWidth}:{right:t.dom.offsetWidth}:null})});function GO(n){return Array.isArray(n)?n:[n]}function $O(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class C${constructor(e,t,r){this.gutter=e,this.height=r,this.i=0,this.cursor=Qr.iter(e.markers,t.from)}line(e,t,r){let i=[];$O(this.cursor,i,t.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,t,i);s&&i.unshift(s);let a=this.gutter;if(0==i.length&&!a.config.renderEmptyElements)return;let c=t.top-this.height;if(this.i==a.elements.length){let f=new qO(e,t.height,c,i);a.elements.push(f),a.dom.appendChild(f.dom)}else a.elements[this.i].update(e,t.height,c,i);this.height=t.bottom,this.i++}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class WO{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in t.domEventHandlers)this.dom.addEventListener(r,i=>{let a,s=i.target;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let f=s.getBoundingClientRect();a=(f.top+f.bottom)/2}else a=i.clientY;let c=e.lineBlockAtHeight(a-e.documentTop);t.domEventHandlers[r](e,c,i)&&i.preventDefault()});this.markers=GO(t.markers(e)),t.initialSpacer&&(this.spacer=new qO(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=GO(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!Qr.eq(this.markers,t,r.from,r.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)}destroy(){for(let e of this.elements)e.destroy()}}class qO{constructor(e,t,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,r,i)}update(e,t,r,i){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),function S$(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,t){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,a=0;;){let c=a,f=s<t.length?t[s++]:null,m=!1;if(f){let w=f.elementClass;w&&(r+=" "+w);for(let E=a;E<this.markers.length;E++)if(this.markers[E].compare(f)){c=E,m=!0;break}}else c=this.markers.length;for(;a<c;){let w=this.markers[a++];if(w.toDOM){w.destroy(i);let E=i.nextSibling;i.remove(),i=E}}if(!f)break;f.toDOM&&(m?i=i.nextSibling:this.dom.insertBefore(f.toDOM(e),i)),m&&a++}this.dom.className=r,this.markers=t}destroy(){this.setMarkers(null,[])}}const _$=tn.define(),_f=tn.define({combine:n=>Na(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let r=Object.assign({},e);for(let i in t){let s=r[i],a=t[i];r[i]=s?(c,f,m)=>s(c,f,m)||a(c,f,m):a}return r}})});class tC extends Cl{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function nC(n,e){return n.state.facet(_f).formatNumber(e,n.state)}const M$=am.compute([_f],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers:e=>e.state.facet(_$),lineMarker:(e,t,r)=>r.some(i=>i.toDOM)?null:new tC(nC(e,e.state.doc.lineAt(t.from).number)),lineMarkerChange:e=>e.startState.facet(_f)!=e.state.facet(_f),initialSpacer:e=>new tC(nC(e,YO(e.state.doc.lines))),updateSpacer(e,t){let r=nC(t.view,YO(t.view.state.doc.lines));return r==e.number?e:new tC(r)},domEventHandlers:n.facet(_f).domEventHandlers}));function A$(n={}){return[_f.of(n),UO(),M$]}function YO(n){let e=9;for(;e<n;)e=10*e+9;return e}const T$=new class extends Cl{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},I$=U0.compute(["selection"],n=>{let e=[],t=-1;for(let r of n.selection.ranges){let i=n.doc.lineAt(r.head).from;i>t&&(t=i,e.push(T$.range(i)))}return Qr.of(e)}),QO=1024;let P$=0;class Zo{constructor(e,t){this.from=e,this.to=t}}class Nn{constructor(e={}){this.id=P$++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=Ws.match(e)),t=>{let r=e(t);return void 0===r?null:[this,r]}}}Nn.closedBy=new Nn({deserialize:n=>n.split(" ")}),Nn.openedBy=new Nn({deserialize:n=>n.split(" ")}),Nn.group=new Nn({deserialize:n=>n.split(" ")}),Nn.contextHash=new Nn({perNode:!0}),Nn.lookAhead=new Nn({perNode:!0}),Nn.mounted=new Nn({perNode:!0});const F$=Object.create(null);class Ws{constructor(e,t,r,i=0){this.name=e,this.props=t,this.id=r,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):F$,i=new Ws(e.name||"",t,e.id,(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0));if(e.props)for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}return i}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(Nn.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let i of r.split(" "))t[i]=e[r];return r=>{for(let i=r.prop(Nn.group),s=-1;s<(i?i.length:0);s++){let a=t[s<0?r.name:i[s]];if(a)return a}}}}Ws.none=new Ws("",Object.create(null),0,8);class G0{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let r of this.types){let i=null;for(let s of e){let a=s(r);a&&(i||(i=Object.assign({},r.props)),i[a[0].id]=a[1])}t.push(i?new Ws(r.name,i,r.id,r.flags):r)}return new G0(t)}}const $0=new WeakMap,JO=new WeakMap;var Gr=(()=>{return(n=Gr||(Gr={}))[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays",Gr;var n})();class ei{constructor(e,t,r,i,s){if(this.type=e,this.children=t,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[a,c]of s)this.props["number"==typeof a?a:a.id]=c}}toString(){let e=this.prop(Nn.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let r of this.children){let i=r.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new lm(this.topNode,e)}cursorAt(e,t=0,r=0){let i=$0.get(this)||this.topNode,s=new lm(i);return s.moveTo(e,t),$0.set(this,s._tree),s}get topNode(){return new ea(this,0,0,null)}resolve(e,t=0){let r=Mf($0.get(this)||this.topNode,e,t,!1);return $0.set(this,r),r}resolveInner(e,t=0){let r=Mf(JO.get(this)||this.topNode,e,t,!0);return JO.set(this,r),r}iterate(e){let{enter:t,leave:r,from:i=0,to:s=this.length}=e;for(let a=this.cursor((e.mode||0)|Gr.IncludeAnonymous);;){let c=!1;if(a.from<=s&&a.to>=i&&(a.type.isAnonymous||!1!==t(a))){if(a.firstChild())continue;c=!0}for(;c&&r&&!a.type.isAnonymous&&r(a),!a.nextSibling();){if(!a.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:sC(Ws.none,this.children,this.positions,0,this.children.length,0,this.length,(t,r,i)=>new ei(this.type,t,r,i,this.propValues),e.makeTree||((t,r,i)=>new ei(Ws.none,t,r,i)))}static build(e){return function V$(n){var e;let{buffer:t,nodeSet:r,maxBufferLength:i=QO,reused:s=[],minRepeatType:a=r.types.length}=n,c=Array.isArray(t)?new rC(t,t.length):t,f=r.types,m=0,w=0;function E(ht,Rt,Nt,gn,kr){let{id:Bn,start:Wn,end:Br,size:Fi}=c,Ms=w;for(;Fi<0;){if(c.next(),-1==Fi)return Nt.push(s[Bn]),void gn.push(Wn-ht);if(-3==Fi)return void(m=Bn);if(-4==Fi)return void(w=Bn);throw new RangeError(`Unrecognized record size: ${Fi}`)}let cs,As,go=f[Bn],Nl=Wn-ht;if(Br-Wn<=i&&(As=function xe(ht,Rt){let Nt=c.fork(),gn=0,kr=0,Bn=0,Wn=Nt.end-i,Br={size:0,start:0,skip:0};e:for(let Fi=Nt.pos-ht;Nt.pos>Fi;){let Ms=Nt.size;if(Nt.id==Rt&&Ms>=0){Br.size=gn,Br.start=kr,Br.skip=Bn,Bn+=4,gn+=4,Nt.next();continue}let go=Nt.pos-Ms;if(Ms<0||go<Fi||Nt.start<Wn)break;let cs=Nt.id>=a?4:0,As=Nt.start;for(Nt.next();Nt.pos>go;){if(Nt.size<0){if(-3!=Nt.size)break e;cs+=4}else Nt.id>=a&&(cs+=4);Nt.next()}kr=As,gn+=Ms,Bn+=cs}return(Rt<0||gn==ht)&&(Br.size=gn,Br.start=kr,Br.skip=Bn),Br.size>4?Br:void 0}(c.pos-Rt,kr))){let mo=new Uint16Array(As.size-As.skip),Ci=c.pos-As.size,Yi=mo.length;for(;c.pos>Ci;)Yi=ke(As.start,mo,Yi);cs=new Nd(mo,Br-As.start,r),Nl=As.start-ht}else{let mo=c.pos-Fi;c.next();let Ci=[],Yi=[],$d=Bn>=a?Bn:-1,$f=0,Wb=Br;for(;c.pos>mo;)$d>=0&&c.id==$d&&c.size>=0?(c.end<=Wb-i&&(j(Ci,Yi,Wn,$f,c.end,Wb,$d,Ms),$f=Ci.length,Wb=c.end),c.next()):E(Wn,mo,Ci,Yi,$d);if($d>=0&&$f>0&&$f<Ci.length&&j(Ci,Yi,Wn,$f,Wn,Wb,$d,Ms),Ci.reverse(),Yi.reverse(),$d>-1&&$f>0){let KL=function R(ht){return(Rt,Nt,gn)=>{let Wn,Br,kr=0,Bn=Rt.length-1;if(Bn>=0&&(Wn=Rt[Bn])instanceof ei){if(!Bn&&Wn.type==ht&&Wn.length==gn)return Wn;(Br=Wn.prop(Nn.lookAhead))&&(kr=Nt[Bn]+Wn.length+Br)}return re(ht,Rt,Nt,gn,kr)}}(go);cs=sC(go,Ci,Yi,0,Ci.length,0,Br-Wn,KL,KL)}else cs=re(go,Ci,Yi,Br-Wn,Ms-Br)}Nt.push(cs),gn.push(Nl)}function j(ht,Rt,Nt,gn,kr,Bn,Wn,Br){let Fi=[],Ms=[];for(;ht.length>gn;)Fi.push(ht.pop()),Ms.push(Rt.pop()+Nt-kr);ht.push(re(r.types[Wn],Fi,Ms,Bn-kr,Br-Bn)),Rt.push(kr-Nt)}function re(ht,Rt,Nt,gn,kr=0,Bn){if(m){let Wn=[Nn.contextHash,m];Bn=Bn?[Wn].concat(Bn):[Wn]}if(kr>25){let Wn=[Nn.lookAhead,kr];Bn=Bn?[Wn].concat(Bn):[Wn]}return new ei(ht,Rt,Nt,gn,Bn)}function ke(ht,Rt,Nt){let{id:gn,start:kr,end:Bn,size:Wn}=c;if(c.next(),Wn>=0&&gn<a){let Br=Nt;if(Wn>4){let Fi=c.pos-(Wn-4);for(;c.pos>Fi;)Nt=ke(ht,Rt,Nt)}Rt[--Nt]=Br,Rt[--Nt]=Bn-ht,Rt[--Nt]=kr-ht,Rt[--Nt]=gn}else-3==Wn?m=gn:-4==Wn&&(w=gn);return Nt}let Ve=[],nt=[];for(;c.pos>0;)E(n.start||0,n.bufferStart||0,Ve,nt,-1);let Ye=null!==(e=n.length)&&void 0!==e?e:Ve.length?nt[0]+Ve[0].length:0;return new ei(f[n.topID],Ve.reverse(),nt.reverse(),Ye)}(e)}}ei.empty=new ei(Ws.none,[],[],0);class rC{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new rC(this.buffer,this.index)}}class Nd{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return Ws.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let r=this.buffer[e+3],i=this.set.types[this.buffer[e]],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),r==(e+=4))return s;let a=[];for(;e<r;)a.push(this.childString(e)),e=this.buffer[e+3];return s+"("+a.join(",")+")"}findChild(e,t,r,i,s){let{buffer:a}=this,c=-1;for(let f=e;f!=t&&!(ZO(s,i,a[f+1],a[f+2])&&(c=f,r>0));f=a[f+3]);return c}slice(e,t,r){let i=this.buffer,s=new Uint16Array(t-e),a=0;for(let c=e,f=0;c<t;){s[f++]=i[c++],s[f++]=i[c++]-r;let m=s[f++]=i[c++]-r;s[f++]=i[c++]-e,a=Math.max(a,m)}return new Nd(s,a,this.set)}}function ZO(n,e,t,r){switch(n){case-2:return t<e;case-1:return r>=e&&t<e;case 0:return t<e&&r>e;case 1:return t<=e&&r>e;case 2:return r>e;case 4:return!0}}function eR(n,e){let t=n.childBefore(e);for(;t;){let r=t.lastChild;if(!r||r.to!=t.to)break;r.type.isError&&r.from==r.to?(n=t,t=r.prevSibling):t=r}return n}function Mf(n,e,t,r){for(var i;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let a=!r&&n instanceof ea&&n.index<0?null:n.parent;if(!a)return n;n=a}let s=r?0:Gr.IgnoreOverlays;if(r)for(let a=n,c=a.parent;c;a=c,c=a.parent)a instanceof ea&&a.index<0&&(null===(i=c.enter(e,t,s))||void 0===i?void 0:i.from)!=a.from&&(n=c);for(;;){let a=n.enter(e,t,s);if(!a)return n;n=a}}class ea{constructor(e,t,r,i){this._tree=e,this.from=t,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,i,s=0){for(let a=this;;){for(let{children:c,positions:f}=a._tree,m=t>0?c.length:-1;e!=m;e+=t){let w=c[e],E=f[e]+a.from;if(ZO(i,r,E,E+w.length))if(w instanceof Nd){if(s&Gr.ExcludeBuffers)continue;let R=w.findChild(0,w.buffer.length,t,r-E,i);if(R>-1)return new Sl(new B$(a,w,e,E),null,R)}else if(s&Gr.IncludeAnonymous||!w.type.isAnonymous||iC(w)){let R;if(!(s&Gr.IgnoreMounts)&&w.props&&(R=w.prop(Nn.mounted))&&!R.overlay)return new ea(R.tree,E,e,a);let j=new ea(w,E,e,a);return s&Gr.IncludeAnonymous||!j.type.isAnonymous?j:j.nextChild(t<0?w.children.length-1:0,t,r,i)}}if(s&Gr.IncludeAnonymous||!a.type.isAnonymous||(e=a.index>=0?a.index+t:t<0?-1:a._parent._tree.children.length,a=a._parent,!a))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,r=0){let i;if(!(r&Gr.IgnoreOverlays)&&(i=this._tree.prop(Nn.mounted))&&i.overlay){let s=e-this.from;for(let{from:a,to:c}of i.overlay)if((t>0?a<=s:a<s)&&(t<0?c>=s:c>s))return new ea(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new lm(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return Mf(this,e,t,!1)}resolveInner(e,t=0){return Mf(this,e,t,!0)}enterUnfinishedNodesBefore(e){return eR(this,e)}getChild(e,t=null,r=null){let i=W0(this,e,t,r);return i.length?i[0]:null}getChildren(e,t=null,r=null){return W0(this,e,t,r)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return q0(this,e)}}function W0(n,e,t,r){let i=n.cursor(),s=[];if(!i.firstChild())return s;if(null!=t)for(;!i.type.is(t);)if(!i.nextSibling())return s;for(;;){if(null!=r&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return null==r?s:[]}}function q0(n,e,t=e.length-1){for(let r=n.parent;t>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[t]&&e[t]!=r.name)return!1;t--}}return!0}class B${constructor(e,t,r,i){this.parent=e,this.buffer=t,this.index=r,this.start=i}}class Sl{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,r){this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,t,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,r);return s<0?null:new Sl(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,r=0){if(r&Gr.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new Sl(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Sl(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Sl(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new lm(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];return s>i&&(e.push(r.slice(i,s,r.buffer[this.index+1])),t.push(0)),new ei(this.type,e,t,this.to-this.from)}resolve(e,t=0){return Mf(this,e,t,!1)}resolveInner(e,t=0){return Mf(this,e,t,!0)}enterUnfinishedNodesBefore(e){return eR(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,r=null){let i=W0(this,e,t,r);return i.length?i[0]:null}getChildren(e,t=null,r=null){return W0(this,e,t,r)}get node(){return this}matchContext(e){return q0(this,e)}}class lm{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof ea)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return!!e&&(e instanceof ea?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,r);return!(s<0)&&(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?!(r&Gr.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Gr.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Gr.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{let i=t.buffer[this.index+3];if(i<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:r}=i)}else({index:t,_parent:r}=this._tree);for(;r;({index:t,_parent:r}=r))if(t>-1)for(let s=t+e,a=e<0?-1:r._tree.children.length;s!=a;s+=e){let c=r._tree.children[s];if(this.mode&Gr.IncludeAnonymous||c instanceof Nd||!c.type.isAnonymous||iC(c))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let a=e;a;a=a._parent)if(a.index==i){if(i==this.index)return a;t=a,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)t=new Sl(this.buffer,t,this.stack[i]);return this.bufferNode=new Sl(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let i=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;i&&t&&t(this),i=this.type.isAnonymous,!this.nextSibling();){if(!r)return;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return q0(this.node,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return q0(this.node,e,i);let a=r[t.buffer[this.stack[s]]];if(!a.isAnonymous){if(e[i]&&e[i]!=a.name)return!1;i--}}return!0}}function iC(n){return n.children.some(e=>e instanceof Nd||!e.type.isAnonymous||iC(e))}const tR=new WeakMap;function Y0(n,e){if(!n.isAnonymous||e instanceof Nd||e.type!=n)return 1;let t=tR.get(e);if(null==t){t=1;for(let r of e.children){if(r.type!=n||!(r instanceof ei)){t=1;break}t+=Y0(n,r)}tR.set(e,t)}return t}function sC(n,e,t,r,i,s,a,c,f){let m=0;for(let re=r;re<i;re++)m+=Y0(n,e[re]);let w=Math.ceil(1.5*m/8),E=[],R=[];return function j(re,xe,ke,Ve,nt){for(let Ye=ke;Ye<Ve;){let ht=Ye,Rt=xe[Ye],Nt=Y0(n,re[Ye]);for(Ye++;Ye<Ve;Ye++){let gn=Y0(n,re[Ye]);if(Nt+gn>=w)break;Nt+=gn}if(Ye==ht+1){if(Nt>w){let gn=re[ht];j(gn.children,gn.positions,0,gn.children.length,xe[ht]+nt);continue}E.push(re[ht])}else E.push(sC(n,re,xe,ht,Ye,Rt,xe[Ye-1]+re[Ye-1].length-Rt,null,f));R.push(Rt+nt-s)}}(e,t,r,i,0),(c||f)(E,R,a)}class gu{constructor(e,t,r,i,s=!1,a=!1){this.from=e,this.to=t,this.tree=r,this.offset=i,this.open=(s?1:0)|(a?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(e,t=[],r=!1){let i=[new gu(0,e.length,e,0,!1,r)];for(let s of t)s.to>e.length&&i.push(s);return i}static applyChanges(e,t,r=128){if(!t.length)return e;let i=[],s=1,a=e.length?e[0]:null;for(let c=0,f=0,m=0;;c++){let w=c<t.length?t[c]:null,E=w?w.fromA:1e9;if(E-f>=r)for(;a&&a.from<E;){let R=a;if(f>=R.from||E<=R.to||m){let j=Math.max(R.from,f)-m,re=Math.min(R.to,E)-m;R=j>=re?null:new gu(j,re,R.tree,R.offset+m,c>0,!!w)}if(R&&i.push(R),a.to>E)break;a=s<e.length?e[s++]:null}if(!w)break;f=w.toA,m=w.toA-w.toB}return i}}class nR{startParse(e,t,r){return"string"==typeof e&&(e=new H$(e)),r=r?r.length?r.map(i=>new Zo(i.from,i.to)):[new Zo(0,0)]:[new Zo(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let i=this.startParse(e,t,r);for(;;){let s=i.advance();if(s)return s}}}class H${constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Nn({perNode:!0});class X0{constructor(e,t,r,i,s,a,c,f,m,w=0,E){this.p=e,this.stack=t,this.state=r,this.reducePos=i,this.pos=s,this.score=a,this.buffer=c,this.bufferBase=f,this.curContext=m,this.lookAhead=w,this.parent=E}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,r=0){let i=e.parser.context;return new X0(e,[],t,r,r,0,[],0,i?new lR(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let r=e>>19,i=65535&e,{parser:s}=this.p,a=s.dynamicPrecedence(i);if(a&&(this.score+=a),0==r)return this.pushState(s.getGoto(this.state,i,!0),this.reducePos),i<s.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,4,!0),void this.reduceContext(i,this.reducePos);let c=this.stack.length-3*(r-1)-(262144&e?6:0),f=c?this.stack[c-2]:this.p.ranges[0].from,m=this.reducePos-f;m>=2e3&&(null===(t=this.p.parser.nodeSet.types[i])||void 0===t||!t.isAnonymous)&&(f==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=m):this.p.lastBigReductionSize<m&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=f,this.p.lastBigReductionSize=m));let E=this.bufferBase+this.buffer.length-(c?this.stack[c-1]:0);if(i<s.minRepeatTerm||131072&e){let R=s.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,f,R,E+4,!0)}for(this.state=262144&e?this.stack[c]:s.getGoto(this.stack[c-3],i,!0);this.stack.length>c;)this.stack.pop();this.reduceContext(i,f)}storeNode(e,t,r,i=4,s=!1){if(0==e&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let a=this,c=this.buffer.length;if(0==c&&a.parent&&(c=a.bufferBase-a.parent.bufferBase,a=a.parent),c>0&&0==a.buffer[c-4]&&a.buffer[c-1]>-1){if(t==r)return;if(a.buffer[c-2]>=t)return void(a.buffer[c-2]=r)}}if(s&&this.pos!=r){let a=this.buffer.length;if(a>0&&0!=this.buffer[a-4])for(;a>0&&this.buffer[a-2]>r;)this.buffer[a]=this.buffer[a-4],this.buffer[a+1]=this.buffer[a-3],this.buffer[a+2]=this.buffer[a-2],this.buffer[a+3]=this.buffer[a-1],a-=4,i>4&&(i-=4);this.buffer[a]=e,this.buffer[a+1]=t,this.buffer[a+2]=r,this.buffer[a+3]=i}else this.buffer.push(e,t,r,i)}shift(e,t,r){let i=this.pos;if(131072&e)this.pushState(65535&e,this.pos);else if(262144&e)this.pos=r,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,r,4);else{let s=e,{parser:a}=this.p;(r>this.pos||t<=a.maxNode)&&(this.pos=r,a.stateFlag(s,1)||(this.reducePos=r)),this.pushState(s,i),this.shiftContext(t,i),t<=a.maxNode&&this.buffer.push(t,i,r,4)}}apply(e,t,r){65536&e?this.reduce(e):this.shift(e,t,r)}useNode(e,t){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(t,i),this.buffer.push(r,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let r=e.buffer.slice(t),i=e.bufferBase+t;for(;e&&i==e.bufferBase;)e=e.parent;return new X0(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,r?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new q$(this);;){let r=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(0==r)return!1;if(!(65536&r))return!0;t.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let i=[];for(let a,s=0;s<t.length;s+=2)(a=t[s+1])!=this.state&&this.p.parser.hasAction(a,e)&&i.push(t[s],a);if(this.stack.length<120)for(let s=0;i.length<8&&s<t.length;s+=2){let a=t[s+1];i.some((c,f)=>1&f&&c==a)||i.push(t[s],a)}t=i}let r=[];for(let i=0;i<t.length&&r.length<4;i+=2){let s=t[i+1];if(s==this.state)continue;let a=this.split();a.pushState(s,this.pos),a.storeNode(0,a.pos,a.pos,4,!0),a.shiftContext(t[i],this.pos),a.score-=200,r.push(a)}return r}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if(!(65536&e))return!1;let{parser:t}=this.p;if(!t.validAction(this.state,e)){let s=this.stack.length-3*(e>>19);if(s<0||t.getGoto(this.stack[s],65535&e,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:e}=this.p;return 65535==e.data[e.stateSlot(this.state,1)]&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||-3!=this.buffer[e])&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||-4!=this.buffer[e])&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new lR(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class lR{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class q${constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=65535&e,r=e>>19;0==r?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(r-1);let i=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=i}}class K0{constructor(e,t,r){this.stack=e,this.pos=t,this.index=r,this.buffer=e.buffer,0==this.index&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new K0(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;null!=e&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new K0(this.stack,this.pos,this.index)}}function um(n,e=Uint16Array){if("string"!=typeof n)return n;let t=null;for(let r=0,i=0;r<n.length;){let s=0;for(;;){let a=n.charCodeAt(r++),c=!1;if(126==a){s=65535;break}a>=92&&a--,a>=34&&a--;let f=a-32;if(f>=46&&(f-=46,c=!0),s+=f,c)break;s*=46}t?t[i++]=s:t=new e(s)}return t}class Q0{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const uR=new Q0;class Y${constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=uR,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let r=this.range,i=this.rangeIndex,s=this.pos+e;for(;s<r.from;){if(!i)return null;let a=this.ranges[--i];s-=r.from-a.to,r=a}for(;t<0?s>r.to:s>=r.to;){if(i==this.ranges.length-1)return null;let a=this.ranges[++i];s+=a.from-r.to,r=a}return s}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let r,i,t=this.chunkOff+e;if(t>=0&&t<this.chunk.length)r=this.pos+e,i=this.chunk.charCodeAt(t);else{let s=this.resolveOffset(e,1);if(null==s)return-1;if(r=s,r>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let a=this.rangeIndex,c=this.range;for(;c.to<=r;)c=this.ranges[++a];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>c.to&&(this.chunk2=this.chunk2.slice(0,c.to-r)),i=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),i}acceptToken(e,t=0){let r=t?this.resolveOffset(t,-1):this.pos;if(null==r||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos);this.chunk=this.pos+e.length>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.next=this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?-1:this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=uR,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let r="";for(let i of this.ranges){if(i.from>=t)break;i.to>e&&(r+=this.input.read(Math.max(i.from,e),Math.min(i.to,t)))}return r}}class Af{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:r}=t.p;!function cR(n,e,t,r,i,s){let a=0,c=1<<r,{dialect:f}=t.p.parser;e:for(;c&n[a];){let m=n[a+1];for(let j=a+3;j<m;j+=2)if((n[j+1]&c)>0){let re=n[j];if(f.allows(re)&&(-1==e.token.value||e.token.value==re||K$(re,e.token.value,i,s))){e.acceptToken(re);break}}let w=e.next,E=0,R=n[a+2];if(!(e.next<0&&R>E&&65535==n[m+3*R-3]&&65535==n[m+3*R-3])){for(;E<R;){let j=E+R>>1,re=m+j+(j<<1);if(w<n[re])R=j;else{if(!(w>=(n[re+1]||65536))){a=n[re+2],e.advance();continue e}E=j+1}}break}a=n[m+3*R-1]}}(this.data,e,t,this.id,r.data,r.tokenPrecTable)}}function dR(n,e,t){for(let i,r=e;65535!=(i=n[r]);r++)if(i==t)return r-e;return-1}function K$(n,e,t,r){let i=dR(t,r,e);return i<0||dR(t,r,n)<i}Af.prototype.contextual=Af.prototype.fallback=Af.prototype.extend=!1,Af.prototype.fallback=Af.prototype.extend=!1;const La=typeof process<"u"&&process.env&&/\bparse\b/.test(process.env.LOG);let aC=null;function hR(n,e,t){let r=n.cursor(Gr.IncludeAnonymous);for(r.moveTo(e);;)if(!(t<0?r.childBefore(e):r.childAfter(e)))for(;;){if((t<0?r.to<e:r.from>e)&&!r.type.isError)return t<0?Math.max(0,Math.min(r.to-1,e-25)):Math.min(n.length,Math.max(r.from+1,e+25));if(t<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return t<0?0:n.length}}class Q${constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?hR(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?hR(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let r=this.trees[t],i=this.index[t];if(i==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=r.children[i],a=this.start[t]+r.positions[i];if(a>e)return this.nextStart=a,null;if(s instanceof ei){if(a==e){if(a<this.safeFrom)return null;let c=a+s.length;if(c<=this.safeTo){let f=s.prop(Nn.lookAhead);if(!f||c+f<this.fragment.to)return s}}this.index[t]++,a+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(a),this.index.push(0))}else this.index[t]++,this.nextStart=a+s.length}}}class J${constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(r=>new Q0)}getActions(e){let t=0,r=null,{parser:i}=e.p,{tokenizers:s}=i,a=i.stateSlot(e.state,3),c=e.curContext?e.curContext.hash:0,f=0;for(let m=0;m<s.length;m++){if(!(1<<m&a))continue;let w=s[m],E=this.tokens[m];if((!r||w.fallback)&&((w.contextual||E.start!=e.pos||E.mask!=a||E.context!=c)&&(this.updateCachedToken(E,w,e),E.mask=a,E.context=c),E.lookAhead>E.end+25&&(f=Math.max(E.lookAhead,f)),0!=E.value)){let R=t;if(E.extended>-1&&(t=this.addActions(e,E.extended,E.end,t)),t=this.addActions(e,E.value,E.end,t),!w.extend&&(r=E,t>R))break}}for(;this.actions.length>t;)this.actions.pop();return f&&e.setLookAhead(f),!r&&e.pos==this.stream.end&&(r=new Q0,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,t=this.addActions(e,r.value,r.end,t)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new Q0,{pos:r,p:i}=e;return t.start=r,t.end=Math.min(r+1,i.stream.end),t.value=r==i.stream.end?i.parser.eofTerm:0,t}updateCachedToken(e,t,r){let i=this.stream.clipPos(r.pos);if(t.token(this.stream.reset(i,e),r),e.value>-1){let{parser:s}=r.p;for(let a=0;a<s.specialized.length;a++)if(s.specialized[a]==e.value){let c=s.specializers[a](this.stream.read(e.start,e.end),r);if(c>=0&&r.p.parser.dialect.allows(c>>1)){1&c?e.extended=c>>1:e.value=c>>1;break}}}else e.value=0,e.end=this.stream.clipPos(i+1)}putAction(e,t,r,i){for(let s=0;s<i;s+=3)if(this.actions[s]==e)return i;return this.actions[i++]=e,this.actions[i++]=t,this.actions[i++]=r,i}addActions(e,t,r,i){let{state:s}=e,{parser:a}=e.p,{data:c}=a;for(let f=0;f<2;f++)for(let m=a.stateSlot(s,f?2:1);;m+=3){if(65535==c[m]){if(1!=c[m+1]){0==i&&2==c[m+1]&&(i=this.putAction(mu(c,m+2),t,r,i));break}m=mu(c,m+2)}c[m]==t&&(i=this.putAction(mu(c,m+1),t,r,i))}return i}}class Z${constructor(e,t,r,i){this.parser=e,this.input=t,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new Y$(t,i),this.tokens=new J$(e,this.stream),this.topTerm=e.top[1];let{from:s}=i[0];this.stacks=[X0.start(this,e.top[0],s)],this.fragments=r.length&&this.stream.end-s>4*e.bufferLength?new Q$(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let i,s,e=this.stacks,t=this.minStackPos,r=this.stacks=[];if(this.bigReductionCount>300&&1==e.length){let[a]=e;for(;a.forceReduce()&&a.stack.length&&a.stack[a.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let a=0;a<e.length;a++){let c=e[a];for(;;){if(this.tokens.mainToken=null,c.pos>t)r.push(c);else{if(this.advanceStack(c,r,e))continue;{i||(i=[],s=[]),i.push(c);let f=this.tokens.getMainToken(c);s.push(f.value,f.end)}}break}}if(!r.length){let a=i&&function t8(n){let e=null;for(let t of n){let r=t.p.stoppedAt;(t.pos==t.p.stream.end||null!=r&&t.pos>r)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}(i);if(a)return this.stackToTree(a);if(this.parser.strict)throw La&&i&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&i){let a=null!=this.stoppedAt&&i[0].pos>this.stoppedAt?i[0]:this.runRecovery(i,s,r);if(a)return this.stackToTree(a.forceAll())}if(this.recovering){let a=1==this.recovering?1:3*this.recovering;if(r.length>a)for(r.sort((c,f)=>f.score-c.score);r.length>a;)r.pop();r.some(c=>c.reducePos>t)&&this.recovering--}else if(r.length>1){e:for(let a=0;a<r.length-1;a++){let c=r[a];for(let f=a+1;f<r.length;f++){let m=r[f];if(c.sameState(m)||c.buffer.length>500&&m.buffer.length>500){if(!((c.score-m.score||c.buffer.length-m.buffer.length)>0)){r.splice(a--,1);continue e}r.splice(f--,1)}}}r.length>12&&r.splice(12,r.length-12)}this.minStackPos=r[0].pos;for(let a=1;a<r.length;a++)r[a].pos<this.minStackPos&&(this.minStackPos=r[a].pos);return null}stopAt(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,r){let i=e.pos,{parser:s}=this,a=La?this.stackID(e)+" -> ":"";if(null!=this.stoppedAt&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let m=e.curContext&&e.curContext.tracker.strict,w=m?e.curContext.hash:0;for(let E=this.fragments.nodeAt(i);E;){let R=this.parser.nodeSet.types[E.type.id]==E.type?s.getGoto(e.state,E.type.id):-1;if(R>-1&&E.length&&(!m||(E.prop(Nn.contextHash)||0)==w))return e.useNode(E,R),La&&console.log(a+this.stackID(e)+` (via reuse of ${s.getName(E.type.id)})`),!0;if(!(E instanceof ei)||0==E.children.length||E.positions[0]>0)break;let j=E.children[0];if(!(j instanceof ei&&0==E.positions[0]))break;E=j}}let c=s.stateSlot(e.state,4);if(c>0)return e.reduce(c),La&&console.log(a+this.stackID(e)+` (via always-reduce ${s.getName(65535&c)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let f=this.tokens.getActions(e);for(let m=0;m<f.length;){let w=f[m++],E=f[m++],R=f[m++],j=m==f.length||!r,re=j?e:e.split();if(re.apply(w,E,R),La&&console.log(a+this.stackID(re)+` (via ${65536&w?`reduce of ${s.getName(65535&w)}`:"shift"} for ${s.getName(E)} @ ${i}${re==e?"":", split"})`),j)return!0;re.pos>i?t.push(re):r.push(re)}return!1}advanceFully(e,t){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return fR(e,t),!0}}runRecovery(e,t,r){let i=null,s=!1;for(let a=0;a<e.length;a++){let c=e[a],f=t[a<<1],m=t[1+(a<<1)],w=La?this.stackID(c)+" -> ":"";if(c.deadEnd&&(s||(s=!0,c.restart(),La&&console.log(w+this.stackID(c)+" (restarted)"),this.advanceFully(c,r))))continue;let E=c.split(),R=w;for(let j=0;E.forceReduce()&&j<10&&(La&&console.log(R+this.stackID(E)+" (via force-reduce)"),!this.advanceFully(E,r));j++)La&&(R=this.stackID(E)+" -> ");for(let j of c.recoverByInsert(f))La&&console.log(w+this.stackID(j)+" (via recover-insert)"),this.advanceFully(j,r);this.stream.end>c.pos?(m==c.pos&&(m++,f=0),c.recoverByDelete(f,m),La&&console.log(w+this.stackID(c)+` (via recover-delete ${this.parser.getName(f)})`),fR(c,r)):(!i||i.score<c.score)&&(i=c)}return i}stackToTree(e){return e.close(),ei.build({buffer:K0.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(aC||(aC=new WeakMap)).get(e);return t||aC.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function fR(n,e){for(let t=0;t<e.length;t++){let r=e[t];if(r.pos==n.pos&&r.sameState(n))return void(e[t].score<n.score&&(e[t]=n))}e.push(n)}class e8{constructor(e,t,r){this.source=e,this.flags=t,this.disabled=r}allows(e){return!this.disabled||0==this.disabled[e]}}class J0 extends nR{constructor(e){if(super(),this.wrappers=[],14!=e.version)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let c=0;c<e.repeatNodeCount;c++)t.push("");let r=Object.keys(e.topRules).map(c=>e.topRules[c][1]),i=[];for(let c=0;c<t.length;c++)i.push([]);function s(c,f,m){i[c].push([f,f.deserialize(String(m))])}if(e.nodeProps)for(let c of e.nodeProps){let f=c[0];"string"==typeof f&&(f=Nn[f]);for(let m=1;m<c.length;){let w=c[m++];if(w>=0)s(w,f,c[m++]);else{let E=c[m+-w];for(let R=-w;R>0;R--)s(c[m++],f,E);m++}}}this.nodeSet=new G0(t.map((c,f)=>Ws.define({name:f>=this.minRepeatTerm?void 0:c,id:f,props:i[f],top:r.indexOf(f)>-1,error:0==f,skipped:e.skippedNodes&&e.skippedNodes.indexOf(f)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=QO;let a=um(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let c=0;c<this.specializerSpecs.length;c++)this.specialized[c]=this.specializerSpecs[c].term;this.specializers=this.specializerSpecs.map(pR),this.states=um(e.states,Uint32Array),this.data=um(e.stateData),this.goto=um(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(c=>"number"==typeof c?new Af(a,c):c),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,r){let i=new Z$(this,e,t,r);for(let s of this.wrappers)i=s(i,e,t,r);return i}getGoto(e,t,r=!1){let i=this.goto;if(t>=i[0])return-1;for(let s=i[t+1];;){let a=i[s++],c=1&a,f=i[s++];if(c&&r)return f;for(let m=s+(a>>1);s<m;s++)if(i[s]==e)return f;if(c)return-1}}hasAction(e,t){let r=this.data;for(let i=0;i<2;i++)for(let a,s=this.stateSlot(e,i?2:1);;s+=3){if(65535==(a=r[s])){if(1!=r[s+1]){if(2==r[s+1])return mu(r,s+2);break}a=r[s=mu(r,s+2)]}if(a==t||0==a)return mu(r,s+1)}return 0}stateSlot(e,t){return this.states[6*e+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){if(t==this.stateSlot(e,4))return!0;for(let r=this.stateSlot(e,1);;r+=3){if(65535==this.data[r]){if(1!=this.data[r+1])return!1;r=mu(this.data,r+2)}if(t==mu(this.data,r+1))return!0}}nextStates(e){let t=[];for(let r=this.stateSlot(e,1);;r+=3){if(65535==this.data[r]){if(1!=this.data[r+1])break;r=mu(this.data,r+2)}if(!(1&this.data[r+2])){let i=this.data[r+1];t.some((s,a)=>1&a&&s==i)||t.push(this.data[r],i)}}return t}configure(e){let t=Object.assign(Object.create(J0.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=r}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(r=>{let i=e.tokenizers.find(s=>s.from==r);return i?i.to:r})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((r,i)=>{let s=e.specializers.find(c=>c.from==r.external);if(!s)return r;let a=Object.assign(Object.assign({},r),{external:s.to});return t.specializers[i]=pR(a),a})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),null!=e.strict&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),null!=e.bufferLength&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return null==t?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),r=t.map(()=>!1);if(e)for(let s of e.split(" ")){let a=t.indexOf(s);a>=0&&(r[a]=!0)}let i=null;for(let s=0;s<t.length;s++)if(!r[s])for(let c,a=this.dialects[t[s]];65535!=(c=this.data[a++]);)(i||(i=new Uint8Array(this.maxTerm+1)))[c]=1;return new e8(e,r,i)}static deserialize(e){return new J0(e)}}function mu(n,e){return n[e]|n[e+1]<<16}function pR(n){if(n.external){let e=n.extend?1:0;return(t,r)=>n.external(t,r)<<1|e}return n.get}let n8=0;class _l{constructor(e,t,r){this.set=e,this.base=t,this.modified=r,this.id=n8++}static define(e){if(e?.base)throw new Error("Can not derive from a modified tag");let t=new _l([],null,[]);if(t.set.push(t),e)for(let r of e.set)t.set.push(r);return t}static defineModifier(){let e=new Z0;return t=>t.modified.indexOf(e)>-1?t:Z0.get(t.base||t,t.modified.concat(e).sort((r,i)=>r.id-i.id))}}let r8=0;class Z0{constructor(){this.instances=[],this.id=r8++}static get(e,t){if(!t.length)return e;let r=t[0].instances.find(c=>c.base==e&&function i8(n,e){return n.length==e.length&&n.every((t,r)=>t==e[r])}(t,c.modified));if(r)return r;let i=[],s=new _l(i,e,t);for(let c of t)c.instances.push(s);let a=function s8(n){let e=[[]];for(let t=0;t<n.length;t++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(n[t]));return e.sort((t,r)=>r.length-t.length)}(t);for(let c of e.set)if(!c.modified.length)for(let f of a)i.push(Z0.get(c,f));return s}}function gR(n){let e=Object.create(null);for(let t in n){let r=n[t];Array.isArray(r)||(r=[r]);for(let i of t.split(" "))if(i){let s=[],a=2,c=i;for(let E=0;;){if("..."==c&&E>0&&E+3==i.length){a=1;break}let R=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(c);if(!R)throw new RangeError("Invalid path: "+i);if(s.push("*"==R[0]?"":'"'==R[0][0]?JSON.parse(R[0]):R[0]),E+=R[0].length,E==i.length)break;let j=i[E++];if(E==i.length&&"!"==j){a=0;break}if("/"!=j)throw new RangeError("Invalid path: "+i);c=i.slice(E)}let f=s.length-1,m=s[f];if(!m)throw new RangeError("Invalid path: "+i);let w=new eb(r,a,f>0?s.slice(0,f):null);e[m]=w.sort(e[m])}}return mR.add(e)}const mR=new Nn;class eb{constructor(e,t,r,i){this.tags=e,this.mode=t,this.context=r,this.next=i}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function vR(n,e){let t=Object.create(null);for(let s of n)if(Array.isArray(s.tag))for(let a of s.tag)t[a.id]=s.class;else t[s.tag.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let a=i;for(let c of s)for(let f of c.set){let m=t[f.id];if(m){a=a?a+" "+m:m;break}}return a},scope:r}}function a8(n,e,t,r=0,i=n.length){let s=new l8(r,Array.isArray(e)?e:[e],t);s.highlightRange(n.cursor(),r,i,"",s.highlighters),s.flush(i)}eb.empty=new eb([],2,null);class l8{constructor(e,t,r){this.at=e,this.highlighters=t,this.span=r,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,r,i,s){let{type:a,from:c,to:f}=e;if(c>=r||f<=t)return;a.isTop&&(s=this.highlighters.filter(j=>!j.scope||j.scope(a)));let m=i,w=function u8(n){let e=n.type.prop(mR);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}(e)||eb.empty,E=function o8(n,e){let t=null;for(let r of n){let i=r.style(e);i&&(t=t?t+" "+i:i)}return t}(s,w.tags);if(E&&(m&&(m+=" "),m+=E,1==w.mode&&(i+=(i?" ":"")+E)),this.startSpan(e.from,m),w.opaque)return;let R=e.tree&&e.tree.prop(Nn.mounted);if(R&&R.overlay){let j=e.node.enter(R.overlay[0].from+c,1),re=this.highlighters.filter(ke=>!ke.scope||ke.scope(R.tree.type)),xe=e.firstChild();for(let ke=0,Ve=c;;ke++){let nt=ke<R.overlay.length?R.overlay[ke]:null,Ye=nt?nt.from+c:f,ht=Math.max(t,Ve),Rt=Math.min(r,Ye);if(ht<Rt&&xe)for(;e.from<Rt&&(this.highlightRange(e,ht,Rt,i,s),this.startSpan(Math.min(Rt,e.to),m),!(e.to>=Ye)&&e.nextSibling()););if(!nt||Ye>r)break;Ve=nt.to+c,Ve>t&&(this.highlightRange(j.cursor(),Math.max(t,nt.from+c),Math.min(r,Ve),i,re),this.startSpan(Ve,m))}xe&&e.parent()}else if(e.firstChild()){do{if(!(e.to<=t)){if(e.from>=r)break;this.highlightRange(e,t,r,i,s),this.startSpan(Math.min(r,e.to),m)}}while(e.nextSibling());e.parent()}}}const jt=_l.define,tb=jt(),pc=jt(),yR=jt(pc),bR=jt(pc),gc=jt(),nb=jt(gc),uC=jt(gc),Ml=jt(),Pd=jt(Ml),Al=jt(),Tl=jt(),cC=jt(),cm=jt(cC),rb=jt(),He={comment:tb,lineComment:jt(tb),blockComment:jt(tb),docComment:jt(tb),name:pc,variableName:jt(pc),typeName:yR,tagName:jt(yR),propertyName:bR,attributeName:jt(bR),className:jt(pc),labelName:jt(pc),namespace:jt(pc),macroName:jt(pc),literal:gc,string:nb,docString:jt(nb),character:jt(nb),attributeValue:jt(nb),number:uC,integer:jt(uC),float:jt(uC),bool:jt(gc),regexp:jt(gc),escape:jt(gc),color:jt(gc),url:jt(gc),keyword:Al,self:jt(Al),null:jt(Al),atom:jt(Al),unit:jt(Al),modifier:jt(Al),operatorKeyword:jt(Al),controlKeyword:jt(Al),definitionKeyword:jt(Al),moduleKeyword:jt(Al),operator:Tl,derefOperator:jt(Tl),arithmeticOperator:jt(Tl),logicOperator:jt(Tl),bitwiseOperator:jt(Tl),compareOperator:jt(Tl),updateOperator:jt(Tl),definitionOperator:jt(Tl),typeOperator:jt(Tl),controlOperator:jt(Tl),punctuation:cC,separator:jt(cC),bracket:cm,angleBracket:jt(cm),squareBracket:jt(cm),paren:jt(cm),brace:jt(cm),content:Ml,heading:Pd,heading1:jt(Pd),heading2:jt(Pd),heading3:jt(Pd),heading4:jt(Pd),heading5:jt(Pd),heading6:jt(Pd),contentSeparator:jt(Ml),list:jt(Ml),quote:jt(Ml),emphasis:jt(Ml),strong:jt(Ml),link:jt(Ml),monospace:jt(Ml),strikethrough:jt(Ml),inserted:jt(),deleted:jt(),changed:jt(),invalid:jt(),meta:rb,documentMeta:jt(rb),annotation:jt(rb),processingInstruction:jt(rb),definition:_l.defineModifier(),constant:_l.defineModifier(),function:_l.defineModifier(),standard:_l.defineModifier(),local:_l.defineModifier(),special:_l.defineModifier()},c8=(vR([{tag:He.link,class:"tok-link"},{tag:He.heading,class:"tok-heading"},{tag:He.emphasis,class:"tok-emphasis"},{tag:He.strong,class:"tok-strong"},{tag:He.keyword,class:"tok-keyword"},{tag:He.atom,class:"tok-atom"},{tag:He.bool,class:"tok-bool"},{tag:He.url,class:"tok-url"},{tag:He.labelName,class:"tok-labelName"},{tag:He.inserted,class:"tok-inserted"},{tag:He.deleted,class:"tok-deleted"},{tag:He.literal,class:"tok-literal"},{tag:He.string,class:"tok-string"},{tag:He.number,class:"tok-number"},{tag:[He.regexp,He.escape,He.special(He.string)],class:"tok-string2"},{tag:He.variableName,class:"tok-variableName"},{tag:He.local(He.variableName),class:"tok-variableName tok-local"},{tag:He.definition(He.variableName),class:"tok-variableName tok-definition"},{tag:He.special(He.variableName),class:"tok-variableName2"},{tag:He.definition(He.propertyName),class:"tok-propertyName tok-definition"},{tag:He.typeName,class:"tok-typeName"},{tag:He.namespace,class:"tok-namespace"},{tag:He.className,class:"tok-className"},{tag:He.macroName,class:"tok-macroName"},{tag:He.propertyName,class:"tok-propertyName"},{tag:He.operator,class:"tok-operator"},{tag:He.comment,class:"tok-comment"},{tag:He.meta,class:"tok-meta"},{tag:He.invalid,class:"tok-invalid"},{tag:He.punctuation,class:"tok-punctuation"}]),gR({String:He.string,Number:He.number,"True False":He.bool,PropertyName:He.propertyName,Null:He.null,",":He.separator,"[ ]":He.squareBracket,"{ }":He.brace})),d8=J0.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#CjOOQO'#Cp'#CpQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CrOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59U,59UO!iQPO,59UOVQPO,59QOqQPO'#CkO!nQPO,59^OOQO1G.k1G.kOVQPO'#ClO!vQPO,59aOOQO1G.p1G.pOOQO1G.l1G.lOOQO,59V,59VOOQO-E6i-E6iOOQO,59W,59WOOQO-E6j-E6j",stateData:"#O~OcOS~OQSORSOSSOTSOWQO]ROePO~OVXOeUO~O[[O~PVOg^O~Oh_OVfX~OVaO~OhbO[iX~O[dO~Oh_OVfa~OhbO[ia~O",goto:"!kjPPPPPPkPPkqwPPk{!RPPP!XP!ePP!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:"\u26a0 JsonText True False Null Number String } { Object Property PropertyName ] [ Array",maxTerm:25,nodeProps:[["openedBy",7,"{",12,"["],["closedBy",8,"}",13,"]"]],propSources:[c8],skippedNodes:[0],repeatNodeCount:2,tokenData:"(p~RaXY!WYZ!W]^!Wpq!Wrs!]|}$i}!O$n!Q!R$w!R![&V![!]&h!}#O&m#P#Q&r#Y#Z&w#b#c'f#h#i'}#o#p(f#q#r(k~!]Oc~~!`Upq!]qr!]rs!rs#O!]#O#P!w#P~!]~!wOe~~!zXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#g~#jR!Q![#s!c!i#s#T#Z#s~#vR!Q![$P!c!i$P#T#Z$P~$SR!Q![$]!c!i$]#T#Z$]~$`R!Q![!]!c!i!]#T#Z!]~$nOh~~$qQ!Q!R$w!R![&V~$|RT~!O!P%V!g!h%k#X#Y%k~%YP!Q![%]~%bRT~!Q![%]!g!h%k#X#Y%k~%nR{|%w}!O%w!Q![%}~%zP!Q![%}~&SPT~!Q![%}~&[ST~!O!P%V!Q![&V!g!h%k#X#Y%k~&mOg~~&rO]~~&wO[~~&zP#T#U&}~'QP#`#a'T~'WP#g#h'Z~'^P#X#Y'a~'fOR~~'iP#i#j'l~'oP#`#a'r~'uP#`#a'x~'}OS~~(QP#f#g(T~(WP#i#j(Z~(^P#X#Y(a~(fOQ~~(kOW~~(pOV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0});var dC;const Ld=new Nn;const h8=new Nn;let ta=(()=>{class n{constructor(t,r,i=[],s=""){this.data=t,this.name=s,Gs.prototype.hasOwnProperty("tree")||Object.defineProperty(Gs.prototype,"tree",{get(){return qi(this)}}),this.parser=r,this.extension=[mc.of(this),Gs.languageData.of((a,c,f)=>{let m=DR(a,c,f),w=m.type.prop(Ld);if(!w)return[];let E=a.facet(w),R=m.type.prop(h8);if(R){let j=m.resolve(c-m.from,f);for(let re of R)if(re.test(j,a)){let xe=a.facet(re.facet);return"replace"==re.type?xe:xe.concat(E)}}return E})].concat(i)}isActiveAt(t,r,i=-1){return DR(t,r,i).type.prop(Ld)==this.data}findRegions(t){let r=t.facet(mc);if(r?.data==this.data)return[{from:0,to:t.doc.length}];if(!r||!r.allowsNesting)return[];let i=[],s=(a,c)=>{if(a.prop(Ld)==this.data)return void i.push({from:c,to:c+a.length});let f=a.prop(Nn.mounted);if(f){if(f.tree.prop(Ld)==this.data){if(f.overlay)for(let m of f.overlay)i.push({from:m.from+c,to:m.to+c});else i.push({from:c,to:c+a.length});return}if(f.overlay){let m=i.length;if(s(f.tree,f.overlay[0].from+c),i.length>m)return}}for(let m=0;m<a.children.length;m++){let w=a.children[m];w instanceof ei&&s(w,a.positions[m]+c)}};return s(qi(t),0),i}get allowsNesting(){return!0}}return n.setState=$n.define(),n})();function DR(n,e,t){let r=n.facet(mc),i=qi(n).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,t,Gr.ExcludeBuffers))s.type.isTop&&(i=s);return i}class ib extends ta{constructor(e,t,r){super(e,t,[],r),this.parser=t}static define(e){let t=function wR(n){return tn.define({combine:n?e=>e.concat(n):void 0})}(e.languageData);return new ib(t,e.parser.configure({props:[Ld.add(r=>r.isTop?t:void 0)]}),e.name)}configure(e,t){return new ib(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function qi(n){let e=n.field(ta.state,!1);return e?e.tree:ei.empty}class p8{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let r=this.cursorPos-this.string.length;return e<r||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-r,t-r)}}let dm=null;class Tf{constructor(e,t,r=[],i,s,a,c,f){this.parser=e,this.state=t,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=a,this.skipped=c,this.scheduleOn=f,this.parse=null,this.tempSkipped=[]}static create(e,t,r){return new Tf(e,t,[],ei.empty,0,r,[],null)}startParse(){return this.parser.startParse(new p8(this.state.doc),this.fragments)}work(e,t){return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=ei.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if("number"==typeof e){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),null!=t&&(null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i){if(this.fragments=this.withoutTempSkipped(gu.addTree(i,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(r=this.parse.stoppedAt)&&void 0!==r?r:this.state.doc.length,this.tree=i,this.parse=null,!(this.treeLen<(t??this.state.doc.length)))return!0;this.parse=this.startParse()}if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(gu.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=dm;dm=this;try{return e()}finally{dm=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=xR(e,t.from,t.to);return e}changes(e,t){let{fragments:r,tree:i,treeLen:s,viewport:a,skipped:c}=this;if(this.takeTree(),!e.empty){let f=[];if(e.iterChangedRanges((m,w,E,R)=>f.push({fromA:m,toA:w,fromB:E,toB:R})),r=gu.applyChanges(r,f),i=ei.empty,s=0,a={from:e.mapPos(a.from,-1),to:e.mapPos(a.to,1)},this.skipped.length){c=[];for(let m of this.skipped){let w=e.mapPos(m.from,1),E=e.mapPos(m.to,-1);w<E&&c.push({from:w,to:E})}}}return new Tf(this.parser,t,r,i,s,a,c,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=xR(this.fragments,i,s),this.skipped.splice(r--,1))}return!(this.skipped.length>=t||(this.reset(),0))}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends nR{createParse(t,r,i){let s=i[0].from,a=i[i.length-1].to;return{parsedPos:s,advance(){let f=dm;if(f){for(let m of i)f.tempSkipped.push(m);e&&(f.scheduleOn=f.scheduleOn?Promise.all([f.scheduleOn,e]):e)}return this.parsedPos=a,new ei(Ws.none,[],[],a-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}static get(){return dm}}function xR(n,e,t){return gu.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class If{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,r)||t.takeTree(),new If(t)}static init(e){let t=Math.min(3e3,e.doc.length),r=Tf.create(e.facet(mc).parser,e,{from:0,to:t});return r.work(20,t)||r.takeTree(),new If(r)}}ta.state=Ei.define({create:If.init,update(n,e){for(let t of e.effects)if(t.is(ta.setState))return t.value;return e.startState.facet(mc)!=e.state.facet(mc)?If.init(e.state):n.apply(e)}});let ER=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(ER=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const hC=typeof navigator<"u"&&null!==(dC=navigator.scheduling)&&void 0!==dC&&dC.isInputPending?()=>navigator.scheduling.isInputPending():null,CR=oi.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(ta.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(ta.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=ER(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(ta.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let a=Date.now()+Math.min(this.chunkBudget,100,e&&!hC?Math.max(25,e.timeRemaining()-5):1e9),c=s.context.treeLen<i&&r.doc.length>i+1e3,f=s.context.work(()=>hC&&hC()||Date.now()>a,i+(c?0:1e5));this.chunkBudget-=Date.now()-t,(f||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:ta.setState.of(new If(s.context))})),this.chunkBudget>0&&!(f&&!c)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>No(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),mc=tn.define({combine:n=>n.length?n[0]:null,enables:n=>[ta.state,CR,Mn.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class g8{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const _R=tn.define(),fC=tn.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function Fd(n){let e=n.facet(fC);return 9==e.charCodeAt(0)?n.tabSize*e.length:e.length}function kf(n,e){let t="",r=n.tabSize,i=n.facet(fC)[0];if("\t"==i){for(;e>=r;)t+="\t",e-=r;i=" "}for(let s=0;s<e;s++)t+=i;return t}function sb(n,e){n instanceof Gs&&(n=new hm(n));for(let r of n.state.facet(_R)){let i=r(n,e);if(void 0!==i)return i}let t=qi(n.state);return t?function m8(n,e,t){return AR(e.resolveInner(t).enterUnfinishedNodesBefore(t),t,n)}(n,t,e):null}class hm{constructor(e,t={}){this.state=e,this.options=t,this.unit=Fd(e)}lineAt(e,t=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return null!=i&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(t<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,t);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,t=1){let{text:r,from:i}=this.lineAt(e,t),s=this.countColumn(r,e-i),a=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return a>-1&&(s+=a-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,t=e.length){return Wg(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:r,from:i}=this.lineAt(e,t),s=this.options.overrideIndentation;if(s){let a=s(i);if(a>-1)return a}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const MR=new Nn;function y8(n){let e=n.type.prop(MR);if(e)return e;let r,t=n.firstChild;if(t&&(r=t.type.prop(Nn.closedBy))){let i=n.lastChild,s=i&&r.indexOf(i.name)>-1;return a=>function TR(n,e,t,r,i){let s=n.textAfter,a=s.match(/^\s*/)[0].length,c=r&&s.slice(a,a+r.length)==r||i==n.pos+a,f=e?function D8(n){let e=n.node,t=e.childAfter(e.from),r=e.lastChild;if(!t)return null;let i=n.options.simulateBreak,s=n.state.doc.lineAt(t.from),a=null==i||i<=s.from?s.to:Math.min(s.to,i);for(let c=t.to;;){let f=e.childAfter(c);if(!f||f==r)return null;if(!f.type.isSkipped)return f.from<a?t:null;c=f.to}}(n):null;return f?n.column(c?f.from:f.to):n.baseIndent+(c?0:n.unit*t)}(a,!0,1,void 0,s&&!function v8(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}(a)?i.from:void 0)}return null==n.parent?b8:null}function AR(n,e,t){for(;n;n=n.parent){let r=y8(n);if(r)return r(pC.create(t,e,n))}return null}function b8(){return 0}class pC extends hm{constructor(e,t,r){super(e.state,e.options),this.base=e,this.pos=t,this.node=r}static create(e,t,r){return new pC(e,t,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let t=this.node.resolve(e.from);for(;t.parent&&t.parent.from==t.from;)t=t.parent;if(w8(t,this.node))break;e=this.state.doc.lineAt(t.from)}return this.lineIndent(e.from)}continue(){let e=this.node.parent;return e?AR(e,this.pos,this.base):0}}function w8(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function IR({except:n,units:e=1}={}){return t=>{let r=n&&n.test(t.textAfter);return t.baseIndent+(r?0:e*t.unit)}}const C8=tn.define(),kR=new Nn;function M8(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function fm(n,e,t){for(let r of n.facet(C8)){let i=r(n,e,t);if(i)return i}return function _8(n,e,t){let r=qi(n);if(r.length<t)return null;let s=null;for(let a=r.resolveInner(t,1);a;a=a.parent){if(a.to<=t||a.from>t)continue;if(s&&a.from<e)break;let c=a.type.prop(kR);if(c&&(a.to<r.length-50||r.length==n.doc.length||!M8(a))){let f=c(a,n);f&&f.from<=t&&f.from>=e&&f.to>t&&(s=f)}}return s}(n,e,t)}function OR(n,e){let t=e.mapPos(n.from,1),r=e.mapPos(n.to,-1);return t>=r?void 0:{from:t,to:r}}const pm=$n.define({map:OR}),Of=$n.define({map:OR});function gC(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(r=>r.from<=t&&r.to>=t)||e.push(n.lineBlockAt(t));return e}const vc=Ei.define({create:()=>sn.none,update(n,e){n=n.map(e.changes);for(let t of e.effects)t.is(pm)&&!A8(n,t.value.from,t.value.to)?n=n.update({add:[PR.range(t.value.from,t.value.to)]}):t.is(Of)&&(n=n.update({filter:(r,i)=>t.value.from!=r||t.value.to!=i,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:r}=e.selection.main;n.between(r,r,(i,s)=>{i<r&&s>r&&(t=!0)}),t&&(n=n.update({filterFrom:r,filterTo:r,filter:(i,s)=>s<=r||i>=r}))}return n},provide:n=>Mn.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(r,i)=>{t.push(r,i)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let r=n[t++],i=n[t++];if("number"!=typeof r||"number"!=typeof i)throw new RangeError("Invalid JSON for fold state");e.push(PR.range(r,i))}return sn.set(e,!0)}});function gm(n,e,t){var r;let i=null;return null===(r=n.field(vc,!1))||void 0===r||r.between(e,t,(s,a)=>{(!i||i.from>s)&&(i={from:s,to:a})}),i}function A8(n,e,t){let r=!1;return n.between(e,e,(i,s)=>{i==e&&s==t&&(r=!0)}),r}function mC(n,e){return n.field(vc,!1)?e:e.concat($n.appendConfig.of(NR()))}function ob(n,e,t=!0){let r=n.state.doc.lineAt(e.from).number,i=n.state.doc.lineAt(e.to).number;return Mn.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${r} ${n.state.phrase("to")} ${i}.`)}const N8=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:n=>{for(let e of gC(n)){let t=fm(n.state,e.from,e.to);if(t)return n.dispatch({effects:mC(n.state,[pm.of(t),ob(n,t)])}),!0}return!1}},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:n=>{if(!n.state.field(vc,!1))return!1;let e=[];for(let t of gC(n)){let r=gm(n.state,t.from,t.to);r&&e.push(Of.of(r),ob(n,r,!1))}return e.length&&n.dispatch({effects:e}),e.length>0}},{key:"Ctrl-Alt-[",run:n=>{let{state:e}=n,t=[];for(let r=0;r<e.doc.length;){let i=n.lineBlockAt(r),s=fm(e,i.from,i.to);s&&t.push(pm.of(s)),r=(s?n.lineBlockAt(s.to):i).to+1}return t.length&&n.dispatch({effects:mC(n.state,t)}),!!t.length}},{key:"Ctrl-Alt-]",run:n=>{let e=n.state.field(vc,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(r,i)=>{t.push(Of.of({from:r,to:i}))}),n.dispatch({effects:t}),!0}}],P8={placeholderDOM:null,placeholderText:"\u2026"},RR=tn.define({combine:n=>Na(n,P8)});function NR(n){let e=[vc,B8];return n&&e.push(RR.of(n)),e}const PR=sn.replace({widget:new class extends fu{toDOM(n){let{state:e}=n,t=e.facet(RR),r=s=>{let a=n.lineBlockAt(n.posAtDOM(s.target)),c=gm(n.state,a.from,a.to);c&&n.dispatch({effects:Of.of(c)}),s.preventDefault()};if(t.placeholderDOM)return t.placeholderDOM(n,r);let i=document.createElement("span");return i.textContent=t.placeholderText,i.setAttribute("aria-label",e.phrase("folded code")),i.title=e.phrase("unfold"),i.className="cm-foldPlaceholder",i.onclick=r,i}}}),L8={openText:"\u2304",closedText:"\u203a",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class vC extends Cl{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function F8(n={}){let e=Object.assign(Object.assign({},L8),n),t=new vC(e,!0),r=new vC(e,!1),i=oi.fromClass(class{constructor(a){this.from=a.viewport.from,this.markers=this.buildMarkers(a)}update(a){(a.docChanged||a.viewportChanged||a.startState.facet(mc)!=a.state.facet(mc)||a.startState.field(vc,!1)!=a.state.field(vc,!1)||qi(a.startState)!=qi(a.state)||e.foldingChanged(a))&&(this.markers=this.buildMarkers(a.view))}buildMarkers(a){let c=new ac;for(let f of a.viewportLineBlocks){let m=gm(a.state,f.from,f.to)?r:fm(a.state,f.from,f.to)?t:null;m&&c.add(f.from,f.from,m)}return c.finish()}}),{domEventHandlers:s}=e;return[i,jO({class:"cm-foldGutter",markers(a){var c;return(null===(c=a.plugin(i))||void 0===c?void 0:c.markers)||Qr.empty},initialSpacer:()=>new vC(e,!1),domEventHandlers:Object.assign(Object.assign({},s),{click:(a,c,f)=>{if(s.click&&s.click(a,c,f))return!0;let m=gm(a.state,c.from,c.to);if(m)return a.dispatch({effects:Of.of(m)}),!0;let w=fm(a.state,c.from,c.to);return!!w&&(a.dispatch({effects:pm.of(w)}),!0)}})}),NR()]}const B8=Mn.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Rf{constructor(e,t){let r;function i(c){let f=lc.newName();return(r||(r=Object.create(null)))["."+f]=c,f}this.specs=e;const s="string"==typeof t.all?t.all:t.all?i(t.all):void 0,a=t.scope;this.scope=a instanceof ta?c=>c.prop(Ld)==a.data:a?c=>c==a:void 0,this.style=vR(e.map(c=>({tag:c.tag,class:c.class||i(Object.assign({},c,{tag:null}))})),{all:s}).style,this.module=r?new lc(r):null,this.themeType=t.themeType}static define(e,t){return new Rf(e,t||{})}}const yC=tn.define(),LR=tn.define({combine:n=>n.length?[n[0]]:null});function ab(n){let e=n.facet(yC);return e.length?e:n.facet(LR)}function bC(n,e){let r,t=[H8];return n instanceof Rf&&(n.module&&t.push(Mn.styleModule.of(n.module)),r=n.themeType),t.push(e?.fallback?LR.of(n):r?yC.computeN([Mn.darkTheme],i=>i.facet(Mn.darkTheme)==("dark"==r)?[n]:[]):yC.of(n)),t}class V8{constructor(e){this.markCache=Object.create(null),this.tree=qi(e.state),this.decorations=this.buildDeco(e,ab(e.state))}update(e){let t=qi(e.state),r=ab(e.state),i=r!=ab(e.startState);t.length<e.view.viewport.to&&!i&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,r))}buildDeco(e,t){if(!t||!this.tree.length)return sn.none;let r=new ac;for(let{from:i,to:s}of e.visibleRanges)a8(this.tree,t,(a,c,f)=>{r.add(a,c,this.markCache[f]||(this.markCache[f]=sn.mark({class:f})))},i,s);return r.finish()}}const H8=Td.high(oi.fromClass(V8,{decorations:n=>n.decorations})),z8=Rf.define([{tag:He.meta,color:"#404740"},{tag:He.link,textDecoration:"underline"},{tag:He.heading,textDecoration:"underline",fontWeight:"bold"},{tag:He.emphasis,fontStyle:"italic"},{tag:He.strong,fontWeight:"bold"},{tag:He.strikethrough,textDecoration:"line-through"},{tag:He.keyword,color:"#708"},{tag:[He.atom,He.bool,He.url,He.contentSeparator,He.labelName],color:"#219"},{tag:[He.literal,He.inserted],color:"#164"},{tag:[He.string,He.deleted],color:"#a11"},{tag:[He.regexp,He.escape,He.special(He.string)],color:"#e40"},{tag:He.definition(He.variableName),color:"#00f"},{tag:He.local(He.variableName),color:"#30a"},{tag:[He.typeName,He.namespace],color:"#085"},{tag:He.className,color:"#167"},{tag:[He.special(He.variableName),He.macroName],color:"#256"},{tag:He.definition(He.propertyName),color:"#00c"},{tag:He.comment,color:"#940"},{tag:He.invalid,color:"#f00"}]),j8=Mn.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),VR=tn.define({combine:n=>Na(n,{afterCursor:!0,brackets:"()[]{}",maxScanDistance:1e4,renderMatch:$8})}),U8=sn.mark({class:"cm-matchingBracket"}),G8=sn.mark({class:"cm-nonmatchingBracket"});function $8(n){let e=[],t=n.matched?U8:G8;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const W8=[Ei.define({create:()=>sn.none,update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],r=e.state.facet(VR);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=Il(e.state,i.head,-1,r)||i.head>0&&Il(e.state,i.head-1,1,r)||r.afterCursor&&(Il(e.state,i.head,1,r)||i.head<e.state.doc.length&&Il(e.state,i.head+1,-1,r));s&&(t=t.concat(r.renderMatch(s,e.state)))}return sn.set(t,!0)},provide:n=>Mn.decorations.from(n)}),j8];function q8(n={}){return[VR.of(n),W8]}const Y8=new Nn;function wC(n,e,t){let r=n.prop(e<0?Nn.openedBy:Nn.closedBy);if(r)return r;if(1==n.name.length){let i=t.indexOf(n.name);if(i>-1&&i%2==(e<0?1:0))return[t[i+e]]}return null}function DC(n){let e=n.type.prop(Y8);return e?e(n.node):n}function Il(n,e,t,r={}){let i=r.maxScanDistance||1e4,s=r.brackets||"()[]{}",a=qi(n),c=a.resolveInner(e,t);for(let f=c;f;f=f.parent){let m=wC(f.type,t,s);if(m&&f.from<f.to){let w=DC(f);if(w&&(t>0?e>=w.from&&e<w.to:e>w.from&&e<=w.to))return X8(0,0,t,f,w,m,s)}}return function K8(n,e,t,r,i,s,a){let c=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),f=a.indexOf(c);if(f<0||f%2==0!=t>0)return null;let m={from:t<0?e-1:e,to:t>0?e+1:e},w=n.doc.iterRange(e,t>0?n.doc.length:0),E=0;for(let R=0;!w.next().done&&R<=s;){let j=w.value;t<0&&(R+=j.length);let re=e+R*t;for(let xe=t>0?0:j.length-1,ke=t>0?j.length:-1;xe!=ke;xe+=t){let Ve=a.indexOf(j[xe]);if(!(Ve<0||r.resolveInner(re+xe,1).type!=i))if(Ve%2==0==t>0)E++;else{if(1==E)return{start:m,end:{from:re+xe,to:re+xe+1},matched:Ve>>1==f>>1};E--}}t>0&&(R+=j.length)}return w.done?{start:m,matched:!1}:null}(n,e,t,a,c.type,i,s)}function X8(n,e,t,r,i,s,a){let f={from:i.from,to:i.to},m=0,w=r.parent?.cursor();if(w&&(t<0?w.childBefore(r.from):w.childAfter(r.to)))do{if(t<0?w.to<=r.from:w.from>=r.to){if(0==m&&s.indexOf(w.type.name)>-1&&w.from<w.to){let E=DC(w);return{start:f,end:E?{from:E.from,to:E.to}:void 0,matched:!0}}if(wC(w.type,t,a))m++;else if(wC(w.type,-t,a)){if(0==m){let E=DC(w);return{start:f,end:E&&E.from<E.to?{from:E.from,to:E.to}:void 0,matched:!1}}m--}}}while(t<0?w.prevSibling():w.nextSibling());return{start:f,matched:!1}}const EC=Object.create(null),mm=[Ws.none],WR=[],qR=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])qR[n]=XR(EC,e);function CC(n,e){WR.indexOf(n)>-1||(WR.push(n),console.warn(e))}function XR(n,e){let t=null;for(let s of e.split(".")){let a=n[s]||He[s];a?"function"==typeof a?t?t=a(t):CC(s,`Modifier ${s} used at start of tag`):t?CC(s,`Tag ${s} used as modifier`):t=a:CC(s,`Unknown highlighting tag ${s}`)}if(!t)return 0;let r=e.replace(/ /g,"_"),i=Ws.define({id:mm.length,name:r,props:[gR({[r]:t})]});return mm.push(i),i.id}const oW=ib.define({name:"json",parser:d8.configure({props:[MR.add({Object:IR({except:/^\s*\}/}),Array:IR({except:/^\s*\]/})}),kR.add({"Object Array":function S8(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function Ir(){var n=arguments[0];"string"==typeof n&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&"object"==typeof t&&null==t.nodeType&&!Array.isArray(t)){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=t[r];"string"==typeof i?n.setAttribute(r,i):null!=i&&(n[r]=i)}e++}for(;e<arguments.length;e++)KR(n,arguments[e]);return n}function KR(n,e){if("string"==typeof e)n.appendChild(document.createTextNode(e));else if(null!=e)if(null!=e.nodeType)n.appendChild(e);else{if(!Array.isArray(e))throw new RangeError("Unsupported child node: "+e);for(var t=0;t<e.length;t++)KR(n,e[t])}}class lW{constructor(e,t,r){this.from=e,this.to=t,this.diagnostic=r}}class Bd{constructor(e,t,r){this.diagnostics=e,this.panel=t,this.selected=r}static init(e,t,r){let i=e,s=r.facet(Vd).markerFilter;s&&(i=s(i));let a=sn.set(i.map(c=>c.from==c.to||c.from==c.to-1&&r.doc.lineAt(c.from).to==c.from?sn.widget({widget:new gW(c),diagnostic:c}).range(c.from):sn.mark({attributes:{class:"cm-lintRange cm-lintRange-"+c.severity},diagnostic:c}).range(c.from,c.to)),!0);return new Bd(a,t,Nf(a))}}function Nf(n,e=null,t=0){let r=null;return n.between(t,1e9,(i,s,{spec:a})=>{if(!e||a.diagnostic==e)return r=new lW(i,s,a.diagnostic),!1}),r}function QR(n,e){return!(!n.effects.some(t=>t.is(lb))&&!n.changes.touchesRange(e.pos))}function JR(n,e){return n.field(qs,!1)?e:e.concat($n.appendConfig.of([qs,Mn.decorations.compute([qs],t=>{let{selected:r,panel:i}=t.field(qs);return r&&i&&r.from!=r.to?sn.set([cW.range(r.from,r.to)]):sn.none}),b$(dW,{hideOn:QR}),mW]))}const lb=$n.define(),SC=$n.define(),ZR=$n.define(),qs=Ei.define({create:()=>new Bd(sn.none,null,null),update(n,e){if(e.docChanged){let t=n.diagnostics.map(e.changes),r=null;if(n.selected){let i=e.changes.mapPos(n.selected.from,1);r=Nf(t,n.selected.diagnostic,i)||Nf(t,null,i)}n=new Bd(t,n.panel,r)}for(let t of e.effects)t.is(lb)?n=Bd.init(t.value,n.panel,e.state):t.is(SC)?n=new Bd(n.diagnostics,t.value?ub.open:null,n.selected):t.is(ZR)&&(n=new Bd(n.diagnostics,n.panel,t.value));return n},provide:n=>[om.from(n,e=>e.panel),Mn.decorations.from(n,e=>e.diagnostics)]}),cW=sn.mark({class:"cm-lintRange cm-lintRange-active"});function dW(n,e,t){let{diagnostics:r}=n.state.field(qs),i=[],s=2e8,a=0;r.between(e-(t<0?1:0),e+(t>0?1:0),(f,m,{spec:w})=>{e>=f&&e<=m&&(f==m||(e>f||t>0)&&(e<m||t<0))&&(i.push(w.diagnostic),s=Math.min(f,s),a=Math.max(m,a))});let c=n.state.facet(Vd).tooltipFilter;return c&&(i=c(i)),i.length?{pos:s,end:a,above:n.state.doc.lineAt(s).to<a,create:()=>({dom:eN(n,i)})}:null}function eN(n,e){return Ir("ul",{class:"cm-tooltip-lint"},e.map(t=>iN(n,t,!1)))}const tN=n=>{let e=n.state.field(qs,!1);return!(!e||!e.panel||(n.dispatch({effects:SC.of(!1)}),0))},fW=[{key:"Mod-Shift-m",run:n=>{let e=n.state.field(qs,!1);(!e||!e.panel)&&n.dispatch({effects:JR(n.state,[SC.of(!0)])});let t=sm(n,ub.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},preventDefault:!0},{key:"F8",run:n=>{let e=n.state.field(qs,!1);if(!e)return!1;let t=n.state.selection.main,r=e.diagnostics.iter(t.to+1);return!(!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==t.from&&r.to==t.to)||(n.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),0))}}],Vd=tn.define({combine:n=>Object.assign({sources:n.map(e=>e.source)},Na(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,t)=>e?t?r=>e(r)||t(r):e:t})),enables:oi.fromClass(class{constructor(n){this.view=n,this.timeout=-1,this.set=!0;let{delay:e}=n.state.facet(Vd);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let n=Date.now();if(n<this.lintTime-10)setTimeout(this.run,this.lintTime-n);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(Vd);Promise.all(t.map(r=>Promise.resolve(r(this.view)))).then(r=>{let i=r.reduce((s,a)=>s.concat(a));this.view.state.doc==e.doc&&this.view.dispatch(function uW(n,e){return{effects:JR(n,[lb.of(e)])}}(this.view.state,i))},r=>{No(this.view.state,r)})}}update(n){let e=n.state.facet(Vd);(n.docChanged||e!=n.startState.facet(Vd)||e.needsRefresh&&e.needsRefresh(n))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}})});function rN(n){let e=[];if(n)e:for(let{name:t}of n){for(let r=0;r<t.length;r++){let i=t[r];if(/[a-zA-Z]/.test(i)&&!e.some(s=>s.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function iN(n,e,t){var r;let i=t?rN(e.actions):[];return Ir("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Ir("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),null===(r=e.actions)||void 0===r?void 0:r.map((s,a)=>{let c=!1,f=R=>{if(R.preventDefault(),c)return;c=!0;let j=Nf(n.state.field(qs).diagnostics,e);j&&s.apply(n,j.from,j.to)},{name:m}=s,w=i[a]?m.indexOf(i[a]):-1,E=w<0?m:[m.slice(0,w),Ir("u",m.slice(w,w+1)),m.slice(w+1)];return Ir("button",{type:"button",class:"cm-diagnosticAction",onclick:f,onmousedown:f,"aria-label":` Action: ${m}${w<0?"":` (access key "${i[a]})"`}.`},E)}),e.source&&Ir("div",{class:"cm-diagnosticSource"},e.source))}class gW extends fu{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return Ir("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class sN{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=iN(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class ub{constructor(e){this.view=e,this.items=[],this.list=Ir("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:i=>{if(27==i.keyCode)tN(this.view),this.view.focus();else if(38==i.keyCode||33==i.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==i.keyCode||34==i.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==i.keyCode)this.moveSelection(0);else if(35==i.keyCode)this.moveSelection(this.items.length-1);else if(13==i.keyCode)this.view.focus();else{if(!(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0))return;{let{diagnostic:s}=this.items[this.selectedIndex],a=rN(s.actions);for(let c=0;c<a.length;c++)if(a[c].toUpperCase().charCodeAt(0)==i.keyCode){let f=Nf(this.view.state.field(qs).diagnostics,s);f&&s.actions[c].apply(e,f.from,f.to)}}}i.preventDefault()},onclick:i=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(i.target)&&this.moveSelection(s)}}),this.dom=Ir("div",{class:"cm-panel-lint"},this.list,Ir("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>tN(this.view)},"\xd7")),this.update()}get selectedIndex(){let e=this.view.state.field(qs).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(qs),r=0,i=!1,s=null;for(e.between(0,this.view.state.doc.length,(a,c,{spec:f})=>{let w,m=-1;for(let E=r;E<this.items.length;E++)if(this.items[E].diagnostic==f.diagnostic){m=E;break}m<0?(w=new sN(this.view,f.diagnostic),this.items.splice(r,0,w),i=!0):(w=this.items[m],m>r&&(this.items.splice(r,m-r),i=!0)),t&&w.diagnostic==t.diagnostic?w.dom.hasAttribute("aria-selected")||(w.dom.setAttribute("aria-selected","true"),s=w):w.dom.hasAttribute("aria-selected")&&w.dom.removeAttribute("aria-selected"),r++});r<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();0==this.items.length&&(this.items.push(new sN(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:c})=>{a.top<c.top?this.list.scrollTop-=c.top-a.top:a.bottom>c.bottom&&(this.list.scrollTop+=a.bottom-c.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function t(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)t();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let r=Nf(this.view.state.field(qs).diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:ZR.of(r)})}static open(e){return new ub(e)}}function _C(n){return function cb(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const mW=Mn.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:_C("#d11")},".cm-lintRange-warning":{backgroundImage:_C("orange")},".cm-lintRange-info":{backgroundImage:_C("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function AC(n,e){return({state:t,dispatch:r})=>{if(t.readOnly)return!1;let i=n(e,t);return!!i&&(r(t.update(i)),!0)}}const CW=AC(TW,0),SW=AC(lN,0),_W=AC((n,e)=>lN(n,e,function AW(n){let e=[];for(let t of n.selection.ranges){let r=n.doc.lineAt(t.from),i=t.to<=r.to?r:n.doc.lineAt(t.to),s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from,to:i.to})}return e}(e)),0);function TC(n,e){let t=n.languageDataAt("commentTokens",e);return t.length?t[0]:{}}function lN(n,e,t=e.selection.ranges){let r=t.map(s=>TC(e,s.from).block);if(!r.every(s=>s))return null;let i=t.map((s,a)=>function MW(n,{open:e,close:t},r,i){let w,E,s=n.sliceDoc(r-50,r),a=n.sliceDoc(i,i+50),c=/\s*$/.exec(s)[0].length,f=/^\s*/.exec(a)[0].length,m=s.length-c;if(s.slice(m-e.length,m)==e&&a.slice(f,f+t.length)==t)return{open:{pos:r-c,margin:c&&1},close:{pos:i+f,margin:f&&1}};i-r<=100?w=E=n.sliceDoc(r,i):(w=n.sliceDoc(r,r+50),E=n.sliceDoc(i-50,i));let R=/^\s*/.exec(w)[0].length,j=/\s*$/.exec(E)[0].length,re=E.length-j-t.length;return w.slice(R,R+e.length)==e&&E.slice(re,re+t.length)==t?{open:{pos:r+R+e.length,margin:/\s/.test(w.charAt(R+e.length))?1:0},close:{pos:i-j-t.length,margin:/\s/.test(E.charAt(re-1))?1:0}}:null}(e,r[a],s.from,s.to));if(2!=n&&!i.every(s=>s))return{changes:e.changes(t.map((s,a)=>i[a]?[]:[{from:s.from,insert:r[a].open+" "},{from:s.to,insert:" "+r[a].close}]))};if(1!=n&&i.some(s=>s)){let s=[];for(let c,a=0;a<i.length;a++)if(c=i[a]){let f=r[a],{open:m,close:w}=c;s.push({from:m.pos-f.open.length,to:m.pos+m.margin},{from:w.pos-w.margin,to:w.pos+f.close.length})}return{changes:s}}return null}function TW(n,e,t=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:a}of t){let c=r.length,f=1e9,m=TC(e,s).line;if(m){for(let w=s;w<=a;){let E=e.doc.lineAt(w);if(E.from>i&&(s==a||a>E.from)){i=E.from;let R=/^\s*/.exec(E.text)[0].length,j=R==E.length,re=E.text.slice(R,R+m.length)==m?R:-1;R<E.text.length&&R<f&&(f=R),r.push({line:E,comment:re,token:m,indent:R,empty:j,single:!1})}w=E.to+1}if(f<1e9)for(let w=c;w<r.length;w++)r[w].indent<r[w].line.text.length&&(r[w].indent=f);r.length==c+1&&(r[c].single=!0)}}if(2!=n&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:c,token:f,indent:m,empty:w,single:E}of r)(E||!w)&&s.push({from:c.from+m,insert:f+" "});let a=e.changes(s);return{changes:a,selection:e.selection.map(a,1)}}if(1!=n&&r.some(s=>s.comment>=0)){let s=[];for(let{line:a,comment:c,token:f}of r)if(c>=0){let m=a.from+c,w=m+f.length;" "==a.text[w-a.from]&&w++,s.push({from:m,to:w})}return{changes:s}}return null}const IC=hu.define(),IW=hu.define(),kW=tn.define(),uN=tn.define({combine:n=>Na(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(r,i)=>e(r,i)||t(r,i)})}),kC=Ei.define({create:()=>NC.empty,update(n,e){let t=e.state.facet(uN),r=e.annotation(IC);if(r){let f=e.docChanged?Et.single(function OW(n){let e=0;return n.iterChangedRanges((t,r)=>e=r),e}(e.changes)):void 0,m=fo.fromTransaction(e,f),w=r.side,E=0==w?n.undone:n.done;return E=m?fb(E,E.length,t.minDepth,m):hN(E,e.startState.selection),new NC(0==w?r.rest:E,0==w?E:r.rest)}let i=e.annotation(IW);if(("full"==i||"before"==i)&&(n=n.isolate()),!1===e.annotation(Dl.addToHistory))return e.changes.empty?n:n.addMapping(e.changes.desc);let s=fo.fromTransaction(e),a=e.annotation(Dl.time),c=e.annotation(Dl.userEvent);return s?n=n.addChanges(s,a,c,t,e):e.selection&&(n=n.addSelection(e.startState.selection,a,c,t.newGroupDelay)),("full"==i||"after"==i)&&(n=n.isolate()),n},toJSON:n=>({done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}),fromJSON:n=>new NC(n.done.map(fo.fromJSON),n.undone.map(fo.fromJSON))});function RW(n={}){return[kC,uN.of(n),Mn.domEventHandlers({beforeinput(e,t){let r="historyUndo"==e.inputType?cN:"historyRedo"==e.inputType?OC:null;return!!r&&(e.preventDefault(),r(t))}})]}function hb(n,e){return function({state:t,dispatch:r}){if(!e&&t.readOnly)return!1;let i=t.field(kC,!1);if(!i)return!1;let s=i.pop(n,t,e);return!!s&&(r(s),!0)}}const cN=hb(0,!1),OC=hb(1,!1),NW=hb(0,!0),PW=hb(1,!0);class fo{constructor(e,t,r,i,s){this.changes=e,this.effects=t,this.mapped=r,this.startSelection=i,this.selectionsAfter=s}setSelAfter(e){return new fo(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,r;return{changes:null===(e=this.changes)||void 0===e?void 0:e.toJSON(),mapped:null===(t=this.mapped)||void 0===t?void 0:t.toJSON(),startSelection:null===(r=this.startSelection)||void 0===r?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new fo(e.changes&&Pi.fromJSON(e.changes),[],e.mapped&&wl.fromJSON(e.mapped),e.startSelection&&Et.fromJSON(e.startSelection),e.selectionsAfter.map(Et.fromJSON))}static fromTransaction(e,t){let r=na;for(let i of e.startState.facet(kW)){let s=i(e);s.length&&(r=r.concat(s))}return!r.length&&e.changes.empty?null:new fo(e.changes.invert(e.startState.doc),r,void 0,t||e.startState.selection,na)}static selection(e){return new fo(void 0,na,void 0,void 0,e)}}function fb(n,e,t,r){let s=n.slice(e+1>t+20?e-t-1:0,e);return s.push(r),s}function dN(n,e){return n.length?e.length?n.concat(e):n:e}const na=[];function hN(n,e){if(n.length){let t=n[n.length-1],r=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-200));return r.length&&r[r.length-1].eq(e)?n:(r.push(e),fb(n,n.length-1,1e9,t.setSelAfter(r)))}return[fo.selection([e])]}function VW(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function RC(n,e){if(!n.length)return n;let t=n.length,r=na;for(;t;){let i=HW(n[t-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let s=n.slice(0,t);return s[t-1]=i,s}e=i.mapped,t--,r=i.selectionsAfter}return r.length?[fo.selection(r)]:na}function HW(n,e,t){let r=dN(n.selectionsAfter.length?n.selectionsAfter.map(c=>c.map(e)):na,t);if(!n.changes)return fo.selection(r);let i=n.changes.map(e),s=e.mapDesc(n.changes,!0),a=n.mapped?n.mapped.composeDesc(s):s;return new fo(i,$n.mapEffects(n.effects,e),a,n.startSelection.map(s),r)}const zW=/^(input\.type|delete)($|\.)/;let NC=(()=>{class n{constructor(t,r,i=0,s){this.done=t,this.undone=r,this.prevTime=i,this.prevUserEvent=s}isolate(){return this.prevTime?new n(this.done,this.undone):this}addChanges(t,r,i,s,a){let c=this.done,f=c[c.length-1];return c=f&&f.changes&&!f.changes.empty&&t.changes&&(!i||zW.test(i))&&(!f.selectionsAfter.length&&r-this.prevTime<s.newGroupDelay&&s.joinToEvent(a,function LW(n,e){let t=[],r=!1;return n.iterChangedRanges((i,s)=>t.push(i,s)),e.iterChangedRanges((i,s,a,c)=>{for(let f=0;f<t.length;){let m=t[f++],w=t[f++];c>=m&&a<=w&&(r=!0)}}),r}(f.changes,t.changes))||"input.type.compose"==i)?fb(c,c.length-1,s.minDepth,new fo(t.changes.compose(f.changes),dN(t.effects,f.effects),f.mapped,f.startSelection,na)):fb(c,c.length,s.minDepth,t),new n(c,na,r,i)}addSelection(t,r,i,s){let a=this.done.length?this.done[this.done.length-1].selectionsAfter:na;return a.length>0&&r-this.prevTime<s&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&function FW(n,e){return n.ranges.length==e.ranges.length&&0===n.ranges.filter((t,r)=>t.empty!=e.ranges[r].empty).length}(a[a.length-1],t)?this:new n(hN(this.done,t),this.undone,r,i)}addMapping(t){return new n(RC(this.done,t),RC(this.undone,t),this.prevTime,this.prevUserEvent)}pop(t,r,i){let s=0==t?this.done:this.undone;if(0==s.length)return null;let a=s[s.length-1];if(i&&a.selectionsAfter.length)return r.update({selection:a.selectionsAfter[a.selectionsAfter.length-1],annotations:IC.of({side:t,rest:VW(s)}),userEvent:0==t?"select.undo":"select.redo",scrollIntoView:!0});if(a.changes){let c=1==s.length?na:s.slice(0,s.length-1);return a.mapped&&(c=RC(c,a.mapped)),r.update({changes:a.changes,selection:a.startSelection,effects:a.effects,annotations:IC.of({side:t,rest:c}),filter:!1,userEvent:0==t?"undo":"redo",scrollIntoView:!0})}return null}}return n.empty=new n(na,na),n})();const jW=[{key:"Mod-z",run:cN,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:OC,preventDefault:!0},{linux:"Ctrl-Shift-z",run:OC,preventDefault:!0},{key:"Mod-u",run:NW,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:PW,preventDefault:!0}];function Pf(n,e){return Et.create(n.ranges.map(e),n.mainIndex)}function kl(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function ra({state:n,dispatch:e},t){let r=Pf(n.selection,t);return!r.eq(n.selection)&&(e(kl(n,r)),!0)}function ym(n,e){return Et.cursor(e?n.to:n.from)}function pb(n,e){return ra(n,t=>t.empty?n.moveByChar(t,e):ym(t,e))}function Ss(n){return n.textDirectionAt(n.state.selection.main.head)==Jr.LTR}const fN=n=>pb(n,!Ss(n)),pN=n=>pb(n,Ss(n));function gb(n,e){return ra(n,t=>t.empty?n.moveByGroup(t,e):ym(t,e))}function $W(n,e,t){if(e.type.prop(t))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function mb(n,e,t){let a,c,r=qi(n).resolveInner(e.head),i=t?Nn.closedBy:Nn.openedBy;for(let f=e.head;;){let m=t?r.childAfter(f):r.childBefore(f);if(!m)break;$W(n,m,i)?r=m:f=t?m.to:m.from}return c=r.type.prop(i)&&(a=t?Il(n,r.from,1):Il(n,r.to,-1))&&a.matched?t?a.end.to:a.end.from:t?r.to:r.from,Et.cursor(c,t?-1:1)}function vN(n,e){return ra(n,t=>{if(!t.empty)return ym(t,e);let r=n.moveVertically(t,e);return r.head!=t.head?r:n.moveToLineBoundary(t,e)})}const yN=n=>vN(n,!1),bN=n=>vN(n,!0);function wN(n){let i,e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,r=0;if(e){for(let s of n.state.facet(Mn.scrollMargins)){let a=s(n);a?.top&&(t=Math.max(a?.top,t)),a?.bottom&&(r=Math.max(a?.bottom,r))}i=n.scrollDOM.clientHeight-t-r}else i=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:r,selfScroll:e,height:Math.max(n.defaultLineHeight,i-5)}}function DN(n,e){let s,t=wN(n),{state:r}=n,i=Pf(r.selection,a=>a.empty?n.moveVertically(a,e,t.height):ym(a,e));if(i.eq(r.selection))return!1;if(t.selfScroll){let a=n.coordsAtPos(r.selection.main.head),c=n.scrollDOM.getBoundingClientRect(),f=c.top+t.marginTop;a&&a.top>f&&a.bottom<c.bottom-t.marginBottom&&(s=Mn.scrollIntoView(i.main.head,{y:"start",yMargin:a.top-f}))}return n.dispatch(kl(r,i),{effects:s}),!0}const xN=n=>DN(n,!1),PC=n=>DN(n,!0);function yc(n,e,t){let r=n.lineBlockAt(e.head),i=n.moveToLineBoundary(e,t);if(i.head==e.head&&i.head!=(t?r.to:r.from)&&(i=n.moveToLineBoundary(e,t,!1)),!t&&i.head==r.from&&r.length){let s=/^\s*/.exec(n.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=Et.cursor(r.from+s))}return i}function Lo(n,e){let t=Pf(n.state.selection,r=>{let i=e(r);return Et.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return!t.eq(n.state.selection)&&(n.dispatch(kl(n.state,t)),!0)}function vb(n,e){return Lo(n,t=>n.moveByChar(t,e))}const CN=n=>vb(n,!Ss(n)),SN=n=>vb(n,Ss(n));function yb(n,e){return Lo(n,t=>n.moveByGroup(t,e))}function MN(n,e){return Lo(n,t=>n.moveVertically(t,e))}const AN=n=>MN(n,!1),TN=n=>MN(n,!0);function IN(n,e){return Lo(n,t=>n.moveVertically(t,e,wN(n).height))}const kN=n=>IN(n,!1),ON=n=>IN(n,!0),RN=({state:n,dispatch:e})=>(e(kl(n,{anchor:0})),!0),NN=({state:n,dispatch:e})=>(e(kl(n,{anchor:n.doc.length})),!0),PN=({state:n,dispatch:e})=>(e(kl(n,{anchor:n.selection.main.anchor,head:0})),!0),LN=({state:n,dispatch:e})=>(e(kl(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0);function bb(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:r}=n,i=r.changeByRange(s=>{let{from:a,to:c}=s;if(a==c){let f=e(a);f<a?(t="delete.backward",f=wb(n,f,!1)):f>a&&(t="delete.forward",f=wb(n,f,!0)),a=Math.min(a,f),c=Math.max(c,f)}else a=wb(n,a,!1),c=wb(n,c,!0);return a==c?{range:s}:{changes:{from:a,to:c},range:Et.cursor(a)}});return!i.changes.empty&&(n.dispatch(r.update(i,{scrollIntoView:!0,userEvent:t,effects:"delete.selection"==t?Mn.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function wb(n,e,t){if(n instanceof Mn)for(let r of n.state.facet(Mn.atomicRanges).map(i=>i(n)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=t?s:i)});return e}const FN=(n,e)=>bb(n,t=>{let s,a,{state:r}=n,i=r.doc.lineAt(t);if(!e&&t>i.from&&t<i.from+200&&!/[^ \t]/.test(s=i.text.slice(0,t-i.from))){if("\t"==s[s.length-1])return t-1;let f=Wg(s,r.tabSize)%Fd(r)||Fd(r);for(let m=0;m<f&&" "==s[s.length-1-m];m++)t--;a=t}else a=js(i.text,t-i.from,e,e)+i.from,a==t&&i.number!=(e?r.doc.lines:1)&&(a+=e?1:-1);return a}),LC=n=>FN(n,!1),BN=n=>FN(n,!0),VN=(n,e)=>bb(n,t=>{let r=t,{state:i}=n,s=i.doc.lineAt(r),a=i.charCategorizer(r);for(let c=null;;){if(r==(e?s.to:s.from)){r==t&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let f=js(s.text,r-s.from,e)+s.from,m=s.text.slice(Math.min(r,f)-s.from,Math.max(r,f)-s.from),w=a(m);if(null!=c&&w!=c)break;(" "!=m||r!=t)&&(c=w),r=f}return r}),HN=n=>VN(n,!1),zN=n=>bb(n,e=>{let t=n.lineBlockAt(e).to;return e<t?t:Math.min(n.state.doc.length,e+1)});function Db(n){let e=[],t=-1;for(let r of n.selection.ranges){let i=n.doc.lineAt(r.from),s=n.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=n.doc.lineAt(r.to-1)),t>=i.number){let a=e[e.length-1];a.to=s.to,a.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});t=s.number+1}return e}function jN(n,e,t){if(n.readOnly)return!1;let r=[],i=[];for(let s of Db(n)){if(t?s.to==n.doc.length:0==s.from)continue;let a=n.doc.lineAt(t?s.to+1:s.from-1),c=a.length+1;if(t){r.push({from:s.to,to:a.to},{from:s.from,insert:a.text+n.lineBreak});for(let f of s.ranges)i.push(Et.range(Math.min(n.doc.length,f.anchor+c),Math.min(n.doc.length,f.head+c)))}else{r.push({from:a.from,to:s.from},{from:s.to,insert:n.lineBreak+a.text});for(let f of s.ranges)i.push(Et.range(f.anchor-c,f.head-c))}}return!!r.length&&(e(n.update({changes:r,scrollIntoView:!0,selection:Et.create(i,n.selection.mainIndex),userEvent:"move.line"})),!0)}function UN(n,e,t){if(n.readOnly)return!1;let r=[];for(let i of Db(n))r.push(t?{from:i.from,insert:n.doc.slice(i.from,i.to)+n.lineBreak}:{from:i.to,insert:n.lineBreak+n.doc.slice(i.from,i.to)});return e(n.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const S9=GN(!1);function GN(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:a}=i,c=e.doc.lineAt(s),f=!n&&s==a&&function C9(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let s,t=qi(n).resolveInner(e),r=t.childBefore(e),i=t.childAfter(e);return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(Nn.closedBy))&&s.indexOf(i.name)>-1&&n.doc.lineAt(r.to).from==n.doc.lineAt(i.from).from?{from:r.to,to:i.from}:null}(e,s);n&&(s=a=(a<=c.to?c:e.doc.lineAt(a)).to);let m=new hm(e,{simulateBreak:s,simulateDoubleBreak:!!f}),w=sb(m,s);for(null==w&&(w=/^\s*/.exec(e.doc.lineAt(s).text)[0].length);a<c.to&&/\s/.test(c.text[a-c.from]);)a++;f?({from:s,to:a}=f):s>c.from&&s<c.from+100&&!/\S/.test(c.text.slice(0,s))&&(s=c.from);let E=["",kf(e,w)];return f&&E.push(kf(e,m.lineIndent(c.from,-1))),{changes:{from:s,to:a,insert:pr.of(E)},range:Et.cursor(s+1+E[1].length)}});return t(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function FC(n,e){let t=-1;return n.changeByRange(r=>{let i=[];for(let a=r.from;a<=r.to;){let c=n.doc.lineAt(a);c.number>t&&(r.empty||r.to>c.from)&&(e(c,i,r),t=c.number),a=c.to+1}let s=n.changes(i);return{changes:i,range:Et.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const I9=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:n=>ra(n,e=>mb(n.state,e,!Ss(n))),shift:n=>Lo(n,e=>mb(n.state,e,!Ss(n)))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:n=>ra(n,e=>mb(n.state,e,Ss(n))),shift:n=>Lo(n,e=>mb(n.state,e,Ss(n)))},{key:"Alt-ArrowUp",run:({state:n,dispatch:e})=>jN(n,e,!1)},{key:"Shift-Alt-ArrowUp",run:({state:n,dispatch:e})=>UN(n,e,!1)},{key:"Alt-ArrowDown",run:({state:n,dispatch:e})=>jN(n,e,!0)},{key:"Shift-Alt-ArrowDown",run:({state:n,dispatch:e})=>UN(n,e,!0)},{key:"Escape",run:({state:n,dispatch:e})=>{let t=n.selection,r=null;return t.ranges.length>1?r=Et.create([t.main]):t.main.empty||(r=Et.create([Et.cursor(t.main.head)])),!!r&&(e(kl(n,r)),!0)}},{key:"Mod-Enter",run:GN(!0)},{key:"Alt-l",mac:"Ctrl-l",run:({state:n,dispatch:e})=>{let t=Db(n).map(({from:r,to:i})=>Et.range(r,Math.min(i+1,n.doc.length)));return e(n.update({selection:Et.create(t),userEvent:"select"})),!0}},{key:"Mod-i",run:({state:n,dispatch:e})=>{let t=Pf(n.selection,r=>{var i;let s=qi(n).resolveInner(r.head,1);for(;!(s.from<r.from&&s.to>=r.to||s.to>r.to&&s.from<=r.from||null===(i=s.parent)||void 0===i)&&i.parent;)s=s.parent;return Et.range(s.to,s.from)});return e(kl(n,t)),!0},preventDefault:!0},{key:"Mod-[",run:({state:n,dispatch:e})=>!n.readOnly&&(e(n.update(FC(n,(t,r)=>{let i=/^\s*/.exec(t.text)[0];if(!i)return;let s=Wg(i,n.tabSize),a=0,c=kf(n,Math.max(0,s-Fd(n)));for(;a<i.length&&a<c.length&&i.charCodeAt(a)==c.charCodeAt(a);)a++;r.push({from:t.from+a,to:t.from+i.length,insert:c.slice(a)})}),{userEvent:"delete.dedent"})),!0)},{key:"Mod-]",run:({state:n,dispatch:e})=>!n.readOnly&&(e(n.update(FC(n,(t,r)=>{r.push({from:t.from,insert:n.facet(fC)})}),{userEvent:"input.indent"})),!0)},{key:"Mod-Alt-\\",run:({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),r=new hm(n,{overrideIndentation:s=>t[s]??-1}),i=FC(n,(s,a,c)=>{let f=sb(r,s.from);if(null==f)return;/\S/.test(s.text)||(f=0);let m=/^\s*/.exec(s.text)[0],w=kf(n,f);(m!=w||c.from<s.from+m.length)&&(t[s.from]=f,a.push({from:s.from,to:s.from+m.length,insert:w}))});return i.changes.empty||e(n.update(i,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(Db(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=Pf(e.selection,i=>n.moveVertically(i,!0)).map(t);return n.dispatch({changes:t,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:({state:n,dispatch:e})=>function EN(n,e,t){let r=!1,i=Pf(n.selection,s=>{let a=Il(n,s.head,-1)||Il(n,s.head,1)||s.head>0&&Il(n,s.head-1,1)||s.head<n.doc.length&&Il(n,s.head+1,-1);if(!a||!a.end)return s;r=!0;let c=a.start.from==s.head?a.end.to:a.end.from;return t?Et.range(s.anchor,c):Et.cursor(c)});return!!r&&(e(kl(n,i)),!0)}(n,e,!1)},{key:"Mod-/",run:n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),r=TC(n.state,t.from);return r.line?CW(n):!!r.block&&_W(n)}},{key:"Alt-A",run:SW}].concat([{key:"ArrowLeft",run:fN,shift:CN,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:n=>gb(n,!Ss(n)),shift:n=>yb(n,!Ss(n)),preventDefault:!0},{mac:"Cmd-ArrowLeft",run:n=>ra(n,e=>yc(n,e,!Ss(n))),shift:n=>Lo(n,e=>yc(n,e,!Ss(n))),preventDefault:!0},{key:"ArrowRight",run:pN,shift:SN,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:n=>gb(n,Ss(n)),shift:n=>yb(n,Ss(n)),preventDefault:!0},{mac:"Cmd-ArrowRight",run:n=>ra(n,e=>yc(n,e,Ss(n))),shift:n=>Lo(n,e=>yc(n,e,Ss(n))),preventDefault:!0},{key:"ArrowUp",run:yN,shift:AN,preventDefault:!0},{mac:"Cmd-ArrowUp",run:RN,shift:PN},{mac:"Ctrl-ArrowUp",run:xN,shift:kN},{key:"ArrowDown",run:bN,shift:TN,preventDefault:!0},{mac:"Cmd-ArrowDown",run:NN,shift:LN},{mac:"Ctrl-ArrowDown",run:PC,shift:ON},{key:"PageUp",run:xN,shift:kN},{key:"PageDown",run:PC,shift:ON},{key:"Home",run:n=>ra(n,e=>yc(n,e,!1)),shift:n=>Lo(n,e=>yc(n,e,!1)),preventDefault:!0},{key:"Mod-Home",run:RN,shift:PN},{key:"End",run:n=>ra(n,e=>yc(n,e,!0)),shift:n=>Lo(n,e=>yc(n,e,!0)),preventDefault:!0},{key:"Mod-End",run:NN,shift:LN},{key:"Enter",run:S9},{key:"Mod-a",run:({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0)},{key:"Backspace",run:LC,shift:LC},{key:"Delete",run:BN},{key:"Mod-Backspace",mac:"Alt-Backspace",run:HN},{key:"Mod-Delete",mac:"Alt-Delete",run:n=>VN(n,!0)},{mac:"Mod-Backspace",run:n=>bb(n,e=>{let t=n.lineBlockAt(e).from;return e>t?t:Math.max(0,e-1)})},{mac:"Mod-Delete",run:zN}].concat([{key:"Ctrl-b",run:fN,shift:CN,preventDefault:!0},{key:"Ctrl-f",run:pN,shift:SN},{key:"Ctrl-p",run:yN,shift:AN},{key:"Ctrl-n",run:bN,shift:TN},{key:"Ctrl-a",run:n=>ra(n,e=>Et.cursor(n.lineBlockAt(e.head).from,1)),shift:n=>Lo(n,e=>Et.cursor(n.lineBlockAt(e.head).from))},{key:"Ctrl-e",run:n=>ra(n,e=>Et.cursor(n.lineBlockAt(e.head).to,-1)),shift:n=>Lo(n,e=>Et.cursor(n.lineBlockAt(e.head).to))},{key:"Ctrl-d",run:BN},{key:"Ctrl-h",run:LC},{key:"Ctrl-k",run:zN},{key:"Ctrl-Alt-h",run:HN},{key:"Ctrl-o",run:({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:pr.of(["",""])},range:Et.cursor(r.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>{if(!r.empty||0==r.from||r.from==n.doc.length)return{range:r};let i=r.from,s=n.doc.lineAt(i),a=i==s.from?i-1:js(s.text,i-s.from,!1)+s.from,c=i==s.to?i+1:js(s.text,i-s.from,!0)+s.from;return{changes:{from:a,to:c,insert:n.doc.slice(i,c).append(n.doc.slice(a,i))},range:Et.cursor(c)}});return!t.changes.empty&&(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:PC}].map(n=>({mac:n.key,run:n.run,shift:n.shift})))),WN="function"==typeof String.prototype.normalize?n=>n.normalize("NFKD"):n=>n;class Lf{constructor(e,t,r=0,i=e.length,s,a){this.test=a,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?c=>s(WN(c)):WN,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return ss(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=tE(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=Jo(e);let i=this.normalize(t);for(let s=0,a=r;;s++){let c=i.charCodeAt(s),f=this.match(c,a);if(f)return this.value=f,this;if(s==i.length-1)break;a==r&&s<t.length&&t.charCodeAt(s)==c&&a++}}}match(e,t){let r=null;for(let i=0;i<this.matches.length;i+=2){let s=this.matches[i],a=!1;this.query.charCodeAt(s)==e&&(s==this.query.length-1?r={from:this.matches[i+1],to:t+1}:(this.matches[i]++,a=!0)),a||(this.matches.splice(i,2),i-=2)}return this.query.charCodeAt(0)==e&&(1==this.query.length?r={from:t,to:t+1}:this.matches.push(1,t)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferPos)&&(r=null),r}}typeof Symbol<"u"&&(Lf.prototype[Symbol.iterator]=function(){return this});const qN={from:-1,to:-1,match:/.*/.exec("")},VC="gm"+(null==/x/.unicode?"":"u");class YN{constructor(e,t,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=qN,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new XN(e,t,r,i,s);this.re=new RegExp(t,VC+(r?.ignoreCase?"i":"")),this.test=r?.test,this.iter=e.iter();let a=e.lineAt(i);this.curLineStart=a.from,this.matchPos=xb(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let r=this.curLineStart+t.index,i=r+t[0].length;if(this.matchPos=xb(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,t)))return this.value={from:r,to:i,match:t},this;e=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),e=0}}}}const HC=new WeakMap;class Ff{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,r){let i=HC.get(e);if(!i||i.from>=r||i.to<=t){let c=new Ff(t,e.sliceString(t,r));return HC.set(e,c),c}if(i.from==t&&i.to==r)return i;let{text:s,from:a}=i;return a>t&&(s=e.sliceString(t,a)+s,a=t),i.to<r&&(s+=e.sliceString(i.to,r)),HC.set(e,new Ff(a,s)),new Ff(t,s.slice(t-a,r-a))}}class XN{constructor(e,t,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=qN,this.matchPos=xb(e,i),this.re=new RegExp(t,VC+(r?.ignoreCase?"i":"")),this.test=r?.test,this.flat=Ff.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let r=this.flat.from+t.index,i=r+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,t)))return this.value={from:r,to:i,match:t},this.matchPos=xb(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Ff.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}function xb(n,e){if(e>=n.length)return e;let r,t=n.lineAt(e);for(;e<t.to&&(r=t.text.charCodeAt(e-t.from))>=56320&&r<57344;)e++;return e}function zC(n){let e=Ir("input",{class:"cm-textfield",name:"line"});function r(){let i=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!i)return;let{state:s}=n,a=s.doc.lineAt(s.selection.main.head),[,c,f,m,w]=i,E=m?+m.slice(1):0,R=f?+f:a.number;if(f&&w){let re=R/100;c&&(re=re*("-"==c?-1:1)+a.number/s.doc.lines),R=Math.round(s.doc.lines*re)}else f&&c&&(R=R*("-"==c?-1:1)+a.number);let j=s.doc.line(Math.max(1,Math.min(s.doc.lines,R)));n.dispatch({effects:Eb.of(!1),selection:Et.cursor(j.from+Math.max(0,Math.min(E,j.length))),scrollIntoView:!0}),n.focus()}return{dom:Ir("form",{class:"cm-gotoLine",onkeydown:i=>{27==i.keyCode?(i.preventDefault(),n.dispatch({effects:Eb.of(!1)}),n.focus()):13==i.keyCode&&(i.preventDefault(),r())},onsubmit:i=>{i.preventDefault(),r()}},Ir("label",n.state.phrase("Go to line"),": ",e)," ",Ir("button",{class:"cm-button",type:"submit"},n.state.phrase("go")))}}typeof Symbol<"u"&&(YN.prototype[Symbol.iterator]=XN.prototype[Symbol.iterator]=function(){return this});const Eb=$n.define(),KN=Ei.define({create:()=>!0,update(n,e){for(let t of e.effects)t.is(Eb)&&(n=t.value);return n},provide:n=>om.from(n,e=>e?zC:null)}),R9=Mn.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),N9={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},QN=tn.define({combine:n=>Na(n,N9,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})});function P9(n){let e=[H9,V9];return n&&e.push(QN.of(n)),e}const L9=sn.mark({class:"cm-selectionMatch"}),F9=sn.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function JN(n,e,t,r){return!(0!=t&&n(e.sliceDoc(t-1,t))==Ur.Word||r!=e.doc.length&&n(e.sliceDoc(r,r+1))==Ur.Word)}const V9=oi.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(QN),{state:t}=n,r=t.selection;if(r.ranges.length>1)return sn.none;let s,i=r.main,a=null;if(i.empty){if(!e.highlightWordAroundCursor)return sn.none;let f=t.wordAt(i.head);if(!f)return sn.none;a=t.charCategorizer(i.head),s=t.sliceDoc(f.from,f.to)}else{let f=i.to-i.from;if(f<e.minSelectionLength||f>200)return sn.none;if(e.wholeWords){if(s=t.sliceDoc(i.from,i.to),a=t.charCategorizer(i.head),!JN(a,t,i.from,i.to)||!function B9(n,e,t,r){return n(e.sliceDoc(t,t+1))==Ur.Word&&n(e.sliceDoc(r-1,r))==Ur.Word}(a,t,i.from,i.to))return sn.none}else if(s=t.sliceDoc(i.from,i.to).trim(),!s)return sn.none}let c=[];for(let f of n.visibleRanges){let m=new Lf(t.doc,s,f.from,f.to);for(;!m.next().done;){let{from:w,to:E}=m.value;if((!a||JN(a,t,w,E))&&(i.empty&&w<=i.from&&E>=i.to?c.push(F9.range(w,E)):(w>=i.to||E<=i.from)&&c.push(L9.range(w,E)),c.length>e.maxMatches))return sn.none}}return sn.set(c)}},{decorations:n=>n.decorations}),H9=Mn.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),Hd=tn.define({combine:n=>Na(n,{top:!1,caseSensitive:!1,literal:!1,wholeWord:!1,createPanel:e=>new t6(e),scrollToMatch:e=>Mn.scrollIntoView(e)})});class ZN{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||function k9(n){try{return new RegExp(n,VC),!0}catch{return!1}}(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,r)=>"n"==r?"\n":"r"==r?"\r":"t"==r?"\t":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new q9(this):new $9(this)}getCursor(e,t=0,r){let i=e.doc?e:Gs.create({doc:e});return null==r&&(r=i.doc.length),this.regexp?Vf(this,i,t,r):Bf(this,i,t,r)}}class eP{constructor(e){this.spec=e}}function Bf(n,e,t,r){return new Lf(e.doc,n.unquoted,t,r,n.caseSensitive?void 0:i=>i.toLowerCase(),n.wholeWord?function G9(n,e){return(t,r,i,s)=>((s>t||s+i.length<r)&&(s=Math.max(0,t-2),i=n.sliceString(s,Math.min(n.length,r+2))),!(e(Cb(i,t-s))==Ur.Word&&e(Sb(i,t-s))==Ur.Word||e(Sb(i,r-s))==Ur.Word&&e(Cb(i,r-s))==Ur.Word))}(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}class $9 extends eP{constructor(e){super(e)}nextMatch(e,t,r){let i=Bf(this.spec,e,r,e.doc.length).nextOverlapping();return i.done&&(i=Bf(this.spec,e,0,t).nextOverlapping()),i.done?null:i.value}prevMatchInRange(e,t,r){for(let i=r;;){let s=Math.max(t,i-1e4-this.spec.unquoted.length),a=Bf(this.spec,e,s,i),c=null;for(;!a.nextOverlapping().done;)c=a.value;if(c)return c;if(s==t)return null;i-=1e4}}prevMatch(e,t,r){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let r=Bf(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=t)return null;i.push(r.value)}return i}highlight(e,t,r,i){let s=Bf(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function Vf(n,e,t,r){return new YN(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?W9(e.charCategorizer(e.selection.main.head)):void 0},t,r)}function Cb(n,e){return n.slice(js(n,e,!1),e)}function Sb(n,e){return n.slice(e,js(n,e))}function W9(n){return(e,t,r)=>!r[0].length||(n(Cb(r.input,r.index))!=Ur.Word||n(Sb(r.input,r.index))!=Ur.Word)&&(n(Sb(r.input,r.index+r[0].length))!=Ur.Word||n(Cb(r.input,r.index+r[0].length))!=Ur.Word)}class q9 extends eP{nextMatch(e,t,r){let i=Vf(this.spec,e,r,e.doc.length).next();return i.done&&(i=Vf(this.spec,e,0,t).next()),i.done?null:i.value}prevMatchInRange(e,t,r){for(let i=1;;i++){let s=Math.max(t,r-1e4*i),a=Vf(this.spec,e,s,r),c=null;for(;!a.next().done;)c=a.value;if(c&&(s==t||c.from>s+10))return c;if(s==t)return null}}prevMatch(e,t,r){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(t,r)=>"$"==r?"$":"&"==r?e.match[0]:"0"!=r&&+r<e.match.length?e.match[r]:t))}matchAll(e,t){let r=Vf(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=t)return null;i.push(r.value)}return i}highlight(e,t,r,i){let s=Vf(this.spec,e,Math.max(0,t-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const bm=$n.define(),jC=$n.define(),Ol=Ei.define({create:n=>new UC(Ab(n).create(),null),update(n,e){for(let t of e.effects)t.is(bm)?n=new UC(t.value.create(),n.panel):t.is(jC)&&(n=new UC(n.query,t.value?GC:null));return n},provide:n=>om.from(n,e=>e.panel)});class UC{constructor(e,t){this.query=e,this.panel=t}}const Y9=sn.mark({class:"cm-searchMatch"}),X9=sn.mark({class:"cm-searchMatch cm-searchMatch-selected"}),K9=oi.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(Ol))}update(n){let e=n.state.field(Ol);(e!=n.startState.field(Ol)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return sn.none;let{view:t}=this,r=new ac;for(let i=0,s=t.visibleRanges,a=s.length;i<a;i++){let{from:c,to:f}=s[i];for(;i<a-1&&f>s[i+1].from-500;)f=s[++i].to;n.highlight(t.state,c,f,(m,w)=>{let E=t.state.selection.ranges.some(R=>R.from==m&&R.to==w);r.add(m,w,E?X9:Y9)})}return r.finish()}},{decorations:n=>n.decorations});function wm(n){return e=>{let t=e.state.field(Ol,!1);return t&&t.query.spec.valid?n(e,t):nP(e)}}const _b=wm((n,{query:e})=>{let{to:t}=n.state.selection.main,r=e.nextMatch(n.state,t,t);if(!r)return!1;let i=Et.single(r.from,r.to),s=n.state.facet(Hd);return n.dispatch({selection:i,effects:[$C(n,r),s.scrollToMatch(i.main)],userEvent:"select.search"}),!0}),Mb=wm((n,{query:e})=>{let{state:t}=n,{from:r}=t.selection.main,i=e.prevMatch(t,r,r);if(!i)return!1;let s=Et.single(i.from,i.to),a=n.state.facet(Hd);return n.dispatch({selection:s,effects:[$C(n,i),a.scrollToMatch(s.main)],userEvent:"select.search"}),!0}),Q9=wm((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!(!t||!t.length||(n.dispatch({selection:Et.create(t.map(r=>Et.range(r.from,r.to))),userEvent:"select.search.matches"}),0))}),tP=wm((n,{query:e})=>{let{state:t}=n,{from:r,to:i}=t.selection.main;if(t.readOnly)return!1;let s=e.nextMatch(t,r,r);if(!s)return!1;let c,f,a=[],m=[];if(s.from==r&&s.to==i&&(f=t.toText(e.getReplacement(s)),a.push({from:s.from,to:s.to,insert:f}),s=e.nextMatch(t,s.from,s.to),m.push(Mn.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(r).number)+"."))),s){let w=0==a.length||a[0].from>=s.to?0:s.to-s.from-f.length;c=Et.single(s.from-w,s.to-w),m.push($C(n,s)),m.push(t.facet(Hd).scrollToMatch(c.main))}return n.dispatch({changes:a,selection:c,effects:m,userEvent:"input.replace"}),!0}),Z9=wm((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(i=>{let{from:s,to:a}=i;return{from:s,to:a,insert:e.getReplacement(i)}});if(!t.length)return!1;let r=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:Mn.announce.of(r),userEvent:"input.replace.all"}),!0});function GC(n){return n.state.facet(Hd).createPanel(n)}function Ab(n,e){var t,r,i,s;let a=n.selection.main,c=a.empty||a.to>a.from+100?"":n.sliceDoc(a.from,a.to);if(e&&!c)return e;let f=n.facet(Hd);return new ZN({search:(null!==(t=e?.literal)&&void 0!==t?t:f.literal)?c:c.replace(/\n/g,"\\n"),caseSensitive:null!==(r=e?.caseSensitive)&&void 0!==r?r:f.caseSensitive,literal:null!==(i=e?.literal)&&void 0!==i?i:f.literal,wholeWord:null!==(s=e?.wholeWord)&&void 0!==s?s:f.wholeWord})}const nP=n=>{let e=n.state.field(Ol,!1);if(e&&e.panel){let t=sm(n,GC);if(!t)return!1;let r=t.dom.querySelector("[main-field]");if(r&&r!=n.root.activeElement){let i=Ab(n.state,e.query.spec);i.valid&&n.dispatch({effects:bm.of(i)}),r.focus(),r.select()}}else n.dispatch({effects:[jC.of(!0),e?bm.of(Ab(n.state,e.query.spec)):$n.appendConfig.of(WC)]});return!0},rP=n=>{let e=n.state.field(Ol,!1);if(!e||!e.panel)return!1;let t=sm(n,GC);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:jC.of(!1)}),!0},e6=[{key:"Mod-f",run:nP,scope:"editor search-panel"},{key:"F3",run:_b,shift:Mb,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:_b,shift:Mb,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:rP,scope:"editor search-panel"},{key:"Mod-Shift-l",run:({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:r,to:i}=t.main,s=[],a=0;for(let c=new Lf(n.doc,n.sliceDoc(r,i));!c.next().done;){if(s.length>1e3)return!1;c.value.from==r&&(a=s.length),s.push(Et.range(c.value.from,c.value.to))}return e(n.update({selection:Et.create(s,a),userEvent:"select.search.matches"})),!0}},{key:"Alt-g",run:n=>{let e=sm(n,zC);if(!e){let t=[Eb.of(!0)];null==n.state.field(KN,!1)&&t.push($n.appendConfig.of([KN,R9])),n.dispatch({effects:t}),e=sm(n,zC)}return e&&e.dom.querySelector("input").focus(),!0}},{key:"Mod-d",run:({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(s=>s.from===s.to))return(({state:n,dispatch:e})=>{let{selection:t}=n,r=Et.create(t.ranges.map(i=>n.wordAt(i.head)||Et.cursor(i.head)),t.mainIndex);return!r.eq(t)&&(e(n.update({selection:r})),!0)})({state:n,dispatch:e});let r=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(s=>n.sliceDoc(s.from,s.to)!=r))return!1;let i=function j9(n,e){let{main:t,ranges:r}=n.selection,i=n.wordAt(t.head),s=i&&i.from==t.from&&i.to==t.to;for(let a=!1,c=new Lf(n.doc,e,r[r.length-1].to);;){if(c.next(),!c.done){if(a&&r.some(f=>f.from==c.value.from))continue;if(s){let f=n.wordAt(c.value.from);if(!f||f.from!=c.value.from||f.to!=c.value.to)continue}return c.value}if(a)return null;c=new Lf(n.doc,e,0,Math.max(0,r[r.length-1].from-1)),a=!0}}(n,r);return!!i&&(e(n.update({selection:n.selection.addRange(Et.range(i.from,i.to),!1),effects:Mn.scrollIntoView(i.to)})),!0)},preventDefault:!0}];class t6{constructor(e){this.view=e;let t=this.query=e.state.field(Ol).query.spec;function r(i,s,a){return Ir("button",{class:"cm-button",name:i,onclick:s,type:"button"},a)}this.commit=this.commit.bind(this),this.searchField=Ir("input",{value:t.search,placeholder:Fo(e,"Find"),"aria-label":Fo(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Ir("input",{value:t.replace,placeholder:Fo(e,"Replace"),"aria-label":Fo(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Ir("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=Ir("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=Ir("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit}),this.dom=Ir("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>_b(e),[Fo(e,"next")]),r("prev",()=>Mb(e),[Fo(e,"previous")]),r("select",()=>Q9(e),[Fo(e,"all")]),Ir("label",null,[this.caseField,Fo(e,"match case")]),Ir("label",null,[this.reField,Fo(e,"regexp")]),Ir("label",null,[this.wordField,Fo(e,"by word")]),...e.state.readOnly?[]:[Ir("br"),this.replaceField,r("replace",()=>tP(e),[Fo(e,"replace")]),r("replaceAll",()=>Z9(e),[Fo(e,"replace all")])],Ir("button",{name:"close",onclick:()=>rP(e),"aria-label":Fo(e,"close"),type:"button"},["\xd7"])])}commit(){let e=new ZN({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:bm.of(e)}))}keydown(e){!function NG(n,e,t){return EO(xO(n.state),e,n,t)}(this.view,e,"search-panel")?13==e.keyCode&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Mb:_b)(this.view)):13==e.keyCode&&e.target==this.replaceField&&(e.preventDefault(),tP(this.view)):e.preventDefault()}update(e){for(let t of e.transactions)for(let r of t.effects)r.is(bm)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Hd).top}}function Fo(n,e){return n.state.phrase(e)}const Ib=/[\s\.,:;?!]/;function $C(n,{from:e,to:t}){let r=n.state.doc.lineAt(e),i=n.state.doc.lineAt(t).to,s=Math.max(r.from,e-30),a=Math.min(i,t+30),c=n.state.sliceDoc(s,a);if(s!=r.from)for(let f=0;f<30;f++)if(!Ib.test(c[f+1])&&Ib.test(c[f])){c=c.slice(f);break}if(a!=i)for(let f=c.length-1;f>c.length-30;f--)if(!Ib.test(c[f-1])&&Ib.test(c[f])){c=c.slice(0,f);break}return Mn.announce.of(`${n.state.phrase("current match")}. ${c} ${n.state.phrase("on line")} ${r.number}.`)}const n6=Mn.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),WC=[Ol,Td.lowest(K9),n6];class iP{constructor(e,t,r){this.state=e,this.pos=t,this.explicit=r,this.abortListeners=[]}tokenBefore(e){let t=qi(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),r=Math.max(t.from,this.pos-250),i=t.text.slice(r-t.from,this.pos-t.from),s=i.search(aP(e,!1));return s<0?null:{from:r+s,to:this.pos,text:i.slice(s)}}get aborted(){return null==this.abortListeners}addEventListener(e,t){"abort"==e&&this.abortListeners&&this.abortListeners.push(t)}}function sP(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}class oP{constructor(e,t,r){this.completion=e,this.source=t,this.match=r}}function bc(n){return n.selection.main.head}function aP(n,e){var t;let{source:r}=n,i=e&&"^"!=r[0],s="$"!=r[r.length-1];return i||s?new RegExp(`${i?"^":""}(?:${r})${s?"$":""}`,null!==(t=n.flags)&&void 0!==t?t:n.ignoreCase?"i":""):n}const lP=hu.define();function uP(n,e){const t=e.completion.apply||e.completion.label;let r=e.source;"string"==typeof t?n.dispatch(Object.assign(Object.assign({},function s6(n,e,t,r){return Object.assign(Object.assign({},n.changeByRange(i=>{if(i==n.selection.main)return{changes:{from:t,to:r,insert:e},range:Et.cursor(t+e.length)};let s=r-t;return!i.empty||s&&n.sliceDoc(i.from-s,i.from)!=n.sliceDoc(t,r)?{range:i}:{changes:{from:i.from-s,to:i.from,insert:e},range:Et.cursor(i.from-s+e.length)}})),{userEvent:"input.complete"})}(n.state,t,r.from,r.to)),{annotations:lP.of(e.completion)})):t(n,e.completion,r.from,r.to)}const cP=new WeakMap;function o6(n){if(!Array.isArray(n))return n;let e=cP.get(n);return e||cP.set(n,e=function i6(n){let e=n.map(i=>"string"==typeof i?{label:i}:i),[t,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:function r6(n){let e=Object.create(null),t=Object.create(null);for(let{label:i}of n){e[i[0]]=!0;for(let s=1;s<i.length;s++)t[i[s]]=!0}let r=sP(e)+sP(t)+"*$";return[new RegExp("^"+r),new RegExp(r)]}(e);return i=>{let s=i.matchBefore(r);return s||i.explicit?{from:s?s.from:i.pos,options:e,validFor:t}:null}}(n)),e}class a6{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let t=0;t<e.length;){let r=ss(e,t),i=Jo(r);this.chars.push(r);let s=e.slice(t,t+i),a=s.toUpperCase();this.folded.push(ss(a==s?s.toLowerCase():a,0)),t+=i}this.astral=e.length!=this.chars.length}match(e){if(0==this.pattern.length)return[0];if(e.length<this.pattern.length)return null;let{chars:t,folded:r,any:i,precise:s,byWord:a}=this;if(1==t.length){let nt=ss(e,0),Ye=Jo(nt),ht=Ye==e.length?0:-100;if(nt!=t[0]){if(nt!=r[0])return null;ht+=-200}return[ht,0,Ye]}let c=e.indexOf(this.pattern);if(0==c)return[e.length==this.pattern.length?0:-100,0,this.pattern.length];let f=t.length,m=0;if(c<0){for(let nt=0,Ye=Math.min(e.length,200);nt<Ye&&m<f;){let ht=ss(e,nt);(ht==t[m]||ht==r[m])&&(i[m++]=nt),nt+=Jo(ht)}if(m<f)return null}let w=0,E=0,R=!1,j=0,re=-1,xe=-1,ke=/[a-z]/.test(e),Ve=!0;for(let nt=0,Ye=Math.min(e.length,200),ht=0;nt<Ye&&E<f;){let Rt=ss(e,nt);c<0&&(w<f&&Rt==t[w]&&(s[w++]=nt),j<f&&(Rt==t[j]||Rt==r[j]?(0==j&&(re=nt),xe=nt+1,j++):j=0));let Nt,gn=Rt<255?Rt>=48&&Rt<=57||Rt>=97&&Rt<=122?2:Rt>=65&&Rt<=90?1:0:(Nt=tE(Rt))!=Nt.toLowerCase()?1:Nt!=Nt.toUpperCase()?2:0;(!nt||1==gn&&ke||0==ht&&0!=gn)&&(t[E]==Rt||r[E]==Rt&&(R=!0)?a[E++]=nt:a.length&&(Ve=!1)),ht=gn,nt+=Jo(Rt)}return E==f&&0==a[0]&&Ve?this.result((R?-200:0)-100,a,e):j==f&&0==re?[-200-e.length+(xe==e.length?0:-100),0,xe]:c>-1?[-700-e.length,c,c+this.pattern.length]:j==f?[-900-e.length,re,xe]:E==f?this.result((R?-200:0)-100-700+(Ve?0:-1100),a,e):2==t.length?null:this.result((i[0]?-700:0)-200-1100,i,e)}result(e,t,r){let i=[e-r.length],s=1;for(let a of t){let c=a+(this.astral?Jo(ss(r,a)):1);s>1&&i[s-1]==a?i[s-1]=c:(i[s++]=a,i[s++]=c)}return i}}const ia=tn.define({combine:n=>Na(n,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>r=>dP(e(r),t(r)),optionClass:(e,t)=>r=>dP(e(r),t(r)),addToOptions:(e,t)=>e.concat(t)})});function dP(n,e){return n?e?n+" "+e:n:e}function hP(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let i=Math.floor(e/t);return{from:i*t,to:(i+1)*t}}let r=Math.floor((n-e)/t);return{from:n-(r+1)*t,to:n-r*t}}class u6{constructor(e,t){this.view=e,this.stateField=t,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:c=>this.positionInfo(c),key:this},this.space=null,this.currentClass="";let r=e.state.field(t),{options:i,selected:s}=r.open,a=e.state.facet(ia);this.optionContent=function l6(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),t.type&&r.classList.add(...t.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(t,r,i){let s=document.createElement("span");s.className="cm-completionLabel";let{label:a}=t,c=0;for(let f=1;f<i.length;){let m=i[f++],w=i[f++];m>c&&s.appendChild(document.createTextNode(a.slice(c,m)));let E=s.appendChild(document.createElement("span"));E.appendChild(document.createTextNode(a.slice(m,w))),E.className="cm-completionMatchedText",c=w}return c<a.length&&s.appendChild(document.createTextNode(a.slice(c))),s},position:50},{render(t){if(!t.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=t.detail,r},position:80}),e.sort((t,r)=>t.position-r.position).map(t=>t.render)}(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=hP(i.length,s,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",c=>{for(let m,f=c.target;f&&f!=this.dom;f=f.parentNode)if("LI"==f.nodeName&&(m=/-(\d+)$/.exec(f.id))&&+m[1]<i.length)return uP(e,i[+m[1]]),void c.preventDefault()}),this.list=this.dom.appendChild(this.createListBox(i,r.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})}mount(){this.updateSel()}update(e){var t,r,i;let s=e.state.field(this.stateField),a=e.startState.field(this.stateField);this.updateTooltipClass(e.state),s!=a&&(this.updateSel(),(null===(t=s.open)||void 0===t?void 0:t.disabled)!=(null===(r=a.open)||void 0===r?void 0:r.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!(null===(i=s.open)||void 0===i||!i.disabled)))}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of t.split(" "))r&&this.dom.classList.add(r);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=hP(t.options.length,t.selected,this.view.state.facet(ia).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})),this.updateSelectedOption(t.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:r}=t.options[t.selected],{info:i}=r;if(!i)return;let s="string"==typeof i?document.createTextNode(i):i(r);if(!s)return;"then"in s?s.then(a=>{a&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(a)}).catch(a=>No(this.view.state,a,"completion info")):this.addInfoPane(s)}}addInfoPane(e){let t=this.info=document.createElement("div");t.className="cm-tooltip cm-completionInfo",t.appendChild(e),this.dom.appendChild(t),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(e){let t=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),t=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return t&&function d6(n,e){let t=n.getBoundingClientRect(),r=e.getBoundingClientRect();r.top<t.top?n.scrollTop-=t.top-r.top:r.bottom>t.bottom&&(n.scrollTop+=r.bottom-t.bottom)}(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),s=this.space;if(!s){let re=this.dom.ownerDocument.defaultView||window;s={left:0,top:0,right:re.innerWidth,bottom:re.innerHeight}}if(i.top>Math.min(s.bottom,t.bottom)-10||i.bottom<Math.max(s.top,t.top)+10)return null;let m,a=this.view.textDirection==Jr.RTL,c=a,f=!1,w="",E="",R=t.left-s.left,j=s.right-t.right;if(c&&R<Math.min(r.width,j)?c=!1:!c&&j<Math.min(r.width,R)&&(c=!0),r.width<=(c?R:j))w=Math.max(s.top,Math.min(i.top,s.bottom-r.height))-t.top+"px",m=Math.min(400,c?R:j)+"px";else{f=!0,m=Math.min(400,(a?t.right:s.right-t.left)-30)+"px";let re=s.bottom-t.bottom;re>=r.height||re>t.top?w=i.bottom-t.top+"px":E=t.bottom-i.top+"px"}return{top:w,bottom:E,maxWidth:m,class:f?a?"left-narrow":"right-narrow":c?"left":"right"}}positionInfo(e){this.info&&(e?(this.info.style.top=e.top,this.info.style.bottom=e.bottom,this.info.style.maxWidth=e.maxWidth,this.info.className="cm-tooltip cm-completionInfo cm-completionInfo-"+e.class):this.info.style.top="-1e6px")}createListBox(e,t,r){const i=document.createElement("ul");i.id=t,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let s=r.from;s<r.to;s++){let{completion:a,match:c}=e[s];const f=i.appendChild(document.createElement("li"));f.id=t+"-"+s,f.setAttribute("role","option");let m=this.optionClass(a);m&&(f.className=m);for(let w of this.optionContent){let E=w(a,this.view.state,c);E&&f.appendChild(E)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}}function fP(n){return 100*(n.boost||0)+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}class Hf{constructor(e,t,r,i,s,a){this.options=e,this.attrs=t,this.tooltip=r,this.timestamp=i,this.selected=s,this.disabled=a}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new Hf(this.options,pP(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,r,i,s){let a=function h6(n,e){let t=[],r=0;for(let c of n)if(c.hasResult())if(!1===c.result.filter){let f=c.result.getMatch;for(let m of c.result.options){let w=[1e9-r++];if(f)for(let E of f(m))w.push(E);t.push(new oP(m,c,w))}}else{let m,f=new a6(e.sliceDoc(c.from,c.to));for(let w of c.result.options)(m=f.match(w.label))&&(null!=w.boost&&(m[0]+=w.boost),t.push(new oP(w,c,m)))}let i=[],s=null,a=e.facet(ia).compareCompletions;for(let c of t.sort((f,m)=>m.match[0]-f.match[0]||a(f.completion,m.completion)))!s||s.label!=c.completion.label||s.detail!=c.completion.detail||null!=s.type&&null!=c.completion.type&&s.type!=c.completion.type||s.apply!=c.completion.apply?i.push(c):fP(c.completion)>fP(s)&&(i[i.length-1]=c),s=c.completion;return i}(e,t);if(!a.length)return i&&e.some(f=>1==f.state)?new Hf(i.options,i.attrs,i.tooltip,i.timestamp,i.selected,!0):null;let c=t.facet(ia).selectOnOpen?0:-1;if(i&&i.selected!=c&&-1!=i.selected){let f=i.options[i.selected].completion;for(let m=0;m<a.length;m++)if(a[m].completion==f){c=m;break}}return new Hf(a,pP(r,c),{pos:e.reduce((f,m)=>m.hasResult()?Math.min(f,m.from):f,1e8),create:(n=_s,e=>new u6(e,n)),above:s.aboveCursor},i?i.timestamp:Date.now(),c,!1);var n}map(e){return new Hf(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class kb{constructor(e,t,r){this.active=e,this.id=t,this.open=r}static start(){return new kb(g6,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(e){let{state:t}=e,r=t.facet(ia),s=(r.override||t.languageDataAt("autocomplete",bc(t)).map(o6)).map(c=>(this.active.find(m=>m.source==c)||new po(c,this.active.some(m=>0!=m.state)?1:0)).update(e,r));s.length==this.active.length&&s.every((c,f)=>c==this.active[f])&&(s=this.active);let a=this.open;a&&e.docChanged&&(a=a.map(e.changes)),e.selection||s.some(c=>c.hasResult()&&e.changes.touchesRange(c.from,c.to))||!function f6(n,e){if(n==e)return!0;for(let t=0,r=0;;){for(;t<n.length&&!n[t].hasResult;)t++;for(;r<e.length&&!e[r].hasResult;)r++;let i=t==n.length,s=r==e.length;if(i||s)return i==s;if(n[t++].result!=e[r++].result)return!1}}(s,this.active)?a=Hf.build(s,t,this.id,a,r):a&&a.disabled&&!s.some(c=>1==c.state)&&(a=null),!a&&s.every(c=>1!=c.state)&&s.some(c=>c.hasResult())&&(s=s.map(c=>c.hasResult()?new po(c.source,0):c));for(let c of e.effects)c.is(XC)&&(a=a&&a.setSelected(c.value,this.id));return s==this.active&&a==this.open?this:new kb(s,this.id,a)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:p6}}const p6={"aria-autocomplete":"list"};function pP(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const g6=[];function qC(n){return n.isUserEvent("input.type")?"input":n.isUserEvent("delete.backward")?"delete":null}class po{constructor(e,t,r=-1){this.source=e,this.state=t,this.explicitPos=r}hasResult(){return!1}update(e,t){let r=qC(e),i=this;r?i=i.handleUserEvent(e,r,t):e.docChanged?i=i.handleChange(e):e.selection&&0!=i.state&&(i=new po(i.source,0));for(let s of e.effects)if(s.is(YC))i=new po(i.source,1,s.value?bc(e.state):-1);else if(s.is(Ob))i=new po(i.source,0);else if(s.is(gP))for(let a of s.value)a.source==i.source&&(i=a);return i}handleUserEvent(e,t,r){return"delete"!=t&&r.activateOnTyping?new po(this.source,1):this.map(e.changes)}handleChange(e){return e.changes.touchesRange(bc(e.startState))?new po(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new po(this.source,this.state,e.mapPos(this.explicitPos))}}class Dm extends po{constructor(e,t,r,i,s){super(e,2,t),this.result=r,this.from=i,this.to=s}hasResult(){return!0}handleUserEvent(e,t,r){var i;let s=e.changes.mapPos(this.from),a=e.changes.mapPos(this.to,1),c=bc(e.state);if((this.explicitPos<0?c<=s:c<this.from)||c>a||"delete"==t&&bc(e.startState)==this.from)return new po(this.source,"input"==t&&r.activateOnTyping?1:0);let m,f=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return function m6(n,e,t,r){if(!n)return!1;let i=e.sliceDoc(t,r);return"function"==typeof n?n(i,t,r,e):aP(n,!0).test(i)}(this.result.validFor,e.state,s,a)?new Dm(this.source,f,this.result,s,a):this.result.update&&(m=this.result.update(this.result,s,a,new iP(e.state,c,f>=0)))?new Dm(this.source,f,m,m.from,null!==(i=m.to)&&void 0!==i?i:bc(e.state)):new po(this.source,1,f)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new po(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new Dm(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}const YC=$n.define(),Ob=$n.define(),gP=$n.define({map:(n,e)=>n.map(t=>t.map(e))}),XC=$n.define(),_s=Ei.define({create:()=>kb.start(),update:(n,e)=>n.update(e),provide:n=>[z0.from(n,e=>e.tooltip),Mn.contentAttributes.from(n,e=>e.attrs)]});function Rb(n,e="option"){return t=>{let r=t.state.field(_s,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<t.state.facet(ia).interactionDelay)return!1;let s,i=1;"page"==e&&(s=function w$(n,e){let t=n.plugin(QE);if(!t)return null;let r=t.manager.tooltips.indexOf(e);return r<0?null:t.manager.tooltipViews[r]}(t,r.open.tooltip))&&(i=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:a}=r.open.options,c=r.open.selected>-1?r.open.selected+i*(n?1:-1):n?0:a-1;return c<0?c="page"==e?0:a-1:c>=a&&(c="page"==e?a-1:0),t.dispatch({effects:XC.of(c)}),!0}}class w6{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const E6=oi.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of n.state.field(_s).active)1==e.state&&this.startQuery(e)}update(n){let e=n.state.field(_s);if(!n.selectionSet&&!n.docChanged&&n.startState.field(_s)==e)return;let t=n.transactions.some(r=>(r.selection||r.docChanged)&&!qC(r));for(let r=0;r<this.running.length;r++){let i=this.running[r];if(t||i.updates.length+n.transactions.length>50&&Date.now()-i.time>1e3){for(let s of i.context.abortListeners)try{s()}catch(a){No(this.view.state,a)}i.context.abortListeners=null,this.running.splice(r--,1)}else i.updates.push(...n.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(r=>1==r.state&&!this.running.some(i=>i.active.source==r.source))?setTimeout(()=>this.startUpdate(),50):-1,0!=this.composing)for(let r of n.transactions)"input"==qC(r)?this.composing=2:2==this.composing&&r.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:n}=this.view,e=n.field(_s);for(let t of e.active)1==t.state&&!this.running.some(r=>r.active.source==t.source)&&this.startQuery(t)}startQuery(n){let{state:e}=this.view,t=bc(e),r=new iP(e,t,n.explicitPos==t),i=new w6(n,r);this.running.push(i),Promise.resolve(n.source(r)).then(s=>{i.context.aborted||(i.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:Ob.of(null)}),No(this.view.state,s)})}scheduleAccept(){this.running.every(n=>void 0!==n.done)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),50))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(ia);for(let r=0;r<this.running.length;r++){let i=this.running[r];if(void 0===i.done)continue;if(this.running.splice(r--,1),i.done){let a=new Dm(i.active.source,i.active.explicitPos,i.done,i.done.from,null!==(n=i.done.to)&&void 0!==n?n:bc(i.updates.length?i.updates[0].startState:this.view.state));for(let c of i.updates)a=a.update(c,t);if(a.hasResult()){e.push(a);continue}}let s=this.view.state.field(_s).active.find(a=>a.source==i.active.source);if(s&&1==s.state)if(null==i.done){let a=new po(i.active.source,0);for(let c of i.updates)a=a.update(c,t);1!=a.state&&e.push(a)}else this.startQuery(s)}e.length&&this.view.dispatch({effects:gP.of(e)})}},{eventHandlers:{blur(){let n=this.view.state.field(_s,!1);n&&n.tooltip&&this.view.state.facet(ia).closeOnBlur&&this.view.dispatch({effects:Ob.of(null)})},compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout(()=>this.view.dispatch({effects:YC.of(!1)}),20),this.composing=0}}}),vP=Mn.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xb7\xb7\xb7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25cb'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25cc'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1d465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1d436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1d461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222a'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25a1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1f511}\ufe0e'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25a2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Cm={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},zd=$n.define({map:(n,e)=>e.mapPos(n,-1,Us.TrackAfter)??void 0}),ZC=$n.define({map:(n,e)=>e.mapPos(n)}),e1=new class extends Id{};e1.startSide=1,e1.endSide=-1;const CP=Ei.define({create:()=>Qr.empty,update(n,e){if(e.selection){let t=e.state.doc.lineAt(e.selection.main.head).from,r=e.startState.doc.lineAt(e.startState.selection.main.head).from;t!=e.changes.mapPos(r,-1)&&(n=Qr.empty)}n=n.map(e.changes);for(let t of e.effects)t.is(zd)?n=n.update({add:[e1.range(t.value,t.value+1)]}):t.is(ZC)&&(n=n.update({filter:r=>r!=t.value}));return n}}),t1="()[]{}<>";function SP(n){for(let e=0;e<t1.length;e+=2)if(t1.charCodeAt(e)==n)return t1.charAt(e+1);return tE(n<128?n:n+1)}function _P(n,e){return n.languageDataAt("closeBrackets",e)[0]||Cm}const P6="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),L6=Mn.inputHandler.of((n,e,t,r)=>{if((P6?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let i=n.state.selection.main;if(r.length>2||2==r.length&&1==Jo(ss(r,0))||e!=i.from||t!=i.to)return!1;let s=function B6(n,e){let t=_P(n,n.selection.main.head),r=t.brackets||Cm.brackets;for(let i of r){let s=SP(ss(i,0));if(e==i)return s==i?j6(n,i,r.indexOf(i+i+i)>-1,t):H6(n,i,s,t.before||Cm.before);if(e==s&&MP(n,n.selection.main.from))return z6(n,0,s)}return null}(n.state,r);return!!s&&(n.dispatch(s),!0)}),F6=[{key:"Backspace",run:({state:n,dispatch:e})=>{if(n.readOnly)return!1;let r=_P(n,n.selection.main.head).brackets||Cm.brackets,i=null,s=n.changeByRange(a=>{if(a.empty){let c=function V6(n,e){let t=n.sliceString(e-2,e);return Jo(ss(t,0))==t.length?t:t.slice(1)}(n.doc,a.head);for(let f of r)if(f==c&&Nb(n.doc,a.head)==SP(ss(f,0)))return{changes:{from:a.head-f.length,to:a.head+f.length},range:Et.cursor(a.head-f.length)}}return{range:i=a}});return i||e(n.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!i}}];function MP(n,e){let t=!1;return n.field(CP).between(0,n.doc.length,r=>{r==e&&(t=!0)}),t}function Nb(n,e){let t=n.sliceString(e,e+2);return t.slice(0,Jo(ss(t,0)))}function H6(n,e,t,r){let i=null,s=n.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:t,from:a.to}],effects:zd.of(a.to+e.length),range:Et.range(a.anchor+e.length,a.head+e.length)};let c=Nb(n.doc,a.head);return!c||/\s/.test(c)||r.indexOf(c)>-1?{changes:{insert:e+t,from:a.head},effects:zd.of(a.head+e.length),range:Et.cursor(a.head+e.length)}:{range:i=a}});return i?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function z6(n,e,t){let r=null,i=n.selection.ranges.map(s=>s.empty&&Nb(n.doc,s.head)==t?Et.cursor(s.head+t.length):r=s);return r?null:n.update({selection:Et.create(i,n.selection.mainIndex),scrollIntoView:!0,effects:n.selection.ranges.map(({from:s})=>ZC.of(s))})}function j6(n,e,t,r){let i=r.stringPrefixes||Cm.stringPrefixes,s=null,a=n.changeByRange(c=>{if(!c.empty)return{changes:[{insert:e,from:c.from},{insert:e,from:c.to}],effects:zd.of(c.to+e.length),range:Et.range(c.anchor+e.length,c.head+e.length)};let w,f=c.head,m=Nb(n.doc,f);if(m==e){if(AP(n,f))return{changes:{insert:e+e,from:f},effects:zd.of(f+e.length),range:Et.cursor(f+e.length)};if(MP(n,f)){let E=t&&n.sliceDoc(f,f+3*e.length)==e+e+e;return{range:Et.cursor(f+e.length*(E?3:1)),effects:ZC.of(f)}}}else{if(t&&n.sliceDoc(f-2*e.length,f)==e+e&&(w=TP(n,f-2*e.length,i))>-1&&AP(n,w))return{changes:{insert:e+e+e+e,from:f},effects:zd.of(f+e.length),range:Et.cursor(f+e.length)};if(n.charCategorizer(f)(m)!=Ur.Word&&TP(n,f,i)>-1&&!function U6(n,e,t,r){let i=qi(n).resolveInner(e,-1),s=r.reduce((a,c)=>Math.max(a,c.length),0);for(let a=0;a<5;a++){let c=n.sliceDoc(i.from,Math.min(i.to,i.from+t.length+s)),f=c.indexOf(t);if(!f||f>-1&&r.indexOf(c.slice(0,f))>-1){let w=i.firstChild;for(;w&&w.from==i.from&&w.to-w.from>t.length+f;){if(n.sliceDoc(w.to-t.length,w.to)==t)return!1;w=w.firstChild}return!0}let m=i.to==e&&i.parent;if(!m)break;i=m}return!1}(n,f,e,i))return{changes:{insert:e+e,from:f},effects:zd.of(f+e.length),range:Et.cursor(f+e.length)}}return{range:s=c}});return s?null:n.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function AP(n,e){let t=qi(n).resolveInner(e+1);return t.parent&&t.from==e}function TP(n,e,t){let r=n.charCategorizer(e);if(r(n.sliceDoc(e-1,e))!=Ur.Word)return e;for(let i of t){let s=e-i.length;if(n.sliceDoc(s,e)==i&&r(n.sliceDoc(s-1,s))!=Ur.Word)return s}return-1}function G6(n={}){return[_s,ia.of(n),E6,$6,vP]}const IP=[{key:"Ctrl-Space",run:n=>!!n.state.field(_s,!1)&&(n.dispatch({effects:YC.of(!0)}),!0)},{key:"Escape",run:n=>{let e=n.state.field(_s,!1);return!(!e||!e.active.some(t=>0!=t.state)||(n.dispatch({effects:Ob.of(null)}),0))}},{key:"ArrowDown",run:Rb(!0)},{key:"ArrowUp",run:Rb(!1)},{key:"PageDown",run:Rb(!0,"page")},{key:"PageUp",run:Rb(!1,"page")},{key:"Enter",run:n=>{let e=n.state.field(_s,!1);return!(n.state.readOnly||!e||!e.open||e.open.selected<0||Date.now()-e.open.timestamp<n.state.facet(ia).interactionDelay||(e.open.disabled||uP(n,e.open.options[e.open.selected]),0))}}],$6=Td.highest(L0.computeN([ia],n=>n.facet(ia).defaultKeymap?[IP]:[])),W6=(()=>[A$(),I$,KG(),RW(),F8(),HG(),[rm,GG],Gs.allowMultipleSelections.of(!0),Gs.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:r}=n.newSelection.main,i=t.lineAt(r);if(r>i.from+200)return n;let s=t.sliceString(i.from,r);if(!e.some(m=>m.test(s)))return n;let{state:a}=n,c=-1,f=[];for(let{head:m}of a.selection.ranges){let w=a.doc.lineAt(m);if(w.from==c)continue;c=w.from;let E=sb(a,w.from);if(null==E)continue;let R=/^\s*/.exec(w.text)[0],j=kf(a,E);R!=j&&f.push({from:w.from,to:w.from+R.length,insert:j})}return f.length?[n,{changes:f,sequential:!0}]:n}),bC(z8,{fallback:!0}),q8(),[L6,CP],G6(),u$(),h$(),i$,P9(),L0.of([...F6,...I9,...e6,...jW,...N8,...IP,...fW])])(),n1="#2e3440",OP="#3b4252",RP="#434c5e",jf="#4c566a",Sm="#d8dee9",jd="#8fbcbb",NP="#88c0d0",Rl="#5e81ac",PP="#d08770",r1="#ebcb8b",Pb="#a3be8c",s1="#b48ead",LP="#d30102",l1=[Mn.theme({"&":{color:Sm,backgroundColor:n1},".cm-content":{caretColor:Sm},".cm-cursor, .cm-dropCursor":{borderLeftColor:Sm},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:jf},".cm-panels":{backgroundColor:"#252a33",color:jf},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"transparent",outline:`1px solid ${jd}`},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:Sm,color:n1},".cm-activeLine":{backgroundColor:jf},".cm-selectionMatch":{backgroundColor:"#e5e9f0",color:OP},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${jd}`},"&.cm-focused .cm-matchingBracket":{backgroundColor:"#eceff4",color:RP},".cm-gutters":{backgroundColor:n1,color:jf,border:"none"},".cm-activeLineGutter":{backgroundColor:jf,color:Sm},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:OP},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:OP,borderBottomColor:OP},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:jf,color:jf}}},{dark:!0}),bC(Rf.define([{tag:He.keyword,color:Rl},{tag:[He.name,He.deleted,He.character,He.propertyName,He.macroName],color:NP},{tag:[He.variableName],color:jd},{tag:[He.function(He.variableName)],color:jd},{tag:[He.labelName],color:"#81a1c1"},{tag:[He.color,He.constant(He.name),He.standard(He.name)],color:Rl},{tag:[He.definition(He.name),He.separator],color:Pb},{tag:[He.brace],color:jd},{tag:[He.annotation],color:LP},{tag:[He.number,He.changed,He.annotation,He.modifier,He.self,He.namespace],color:s1},{tag:[He.typeName,He.className],color:r1},{tag:[He.operator,He.operatorKeyword],color:Pb},{tag:[He.tagName],color:s1},{tag:[He.squareBracket],color:"#bf616a"},{tag:[He.angleBracket],color:PP},{tag:[He.attributeName],color:r1},{tag:[He.regexp],color:Rl},{tag:[He.quote],color:s1},{tag:[He.string],color:Pb},{tag:He.link,color:Pb,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[He.url,He.escape,He.special(He.string)],color:jd},{tag:[He.meta],color:NP},{tag:[He.monospace],color:Sm,fontStyle:"italic"},{tag:[He.comment],color:jf,fontStyle:"italic"},{tag:He.strong,fontWeight:"bold",color:Rl},{tag:He.emphasis,fontStyle:"italic",color:Rl},{tag:He.strikethrough,textDecoration:"line-through"},{tag:He.heading,fontWeight:"bold",color:Rl},{tag:He.special(He.heading1),fontWeight:"bold",color:Rl},{tag:He.heading1,fontWeight:"bold",color:Rl},{tag:[He.heading2,He.heading3,He.heading4],fontWeight:"bold",color:Rl},{tag:[He.heading5,He.heading6],color:Rl},{tag:[He.atom,He.bool,He.special(He.variableName)],color:PP},{tag:[He.processingInstruction,He.inserted],color:jd},{tag:[He.contentSeparator],color:r1},{tag:He.invalid,color:RP,borderBottom:`1px dotted ${LP}`}]))],BP="#2e3440",VP="#3b4252",HP="#434c5e",Lb="#4c566a",u1="#e5e9f0",c1="#eceff4",d1="#8fbcbb",zP="#88c0d0",Fa="#5e81ac",Uf="#d08770",h1="#ebcb8b",jP="#a3be8c",UP="#d30102",uq=[Mn.theme({"&":{color:BP,backgroundColor:"#ffffff"},".cm-content":{caretColor:VP},".cm-cursor, .cm-dropCursor":{borderLeftColor:VP},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:c1},".cm-panels":{backgroundColor:c1,color:Lb},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:`1px solid ${Lb}`},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:u1},".cm-activeLine":{backgroundColor:c1},".cm-selectionMatch":{backgroundColor:u1},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${Lb}`},"&.cm-focused .cm-matchingBracket":{backgroundColor:c1},".cm-gutters":{backgroundColor:c1,color:BP,border:"none"},".cm-activeLineGutter":{backgroundColor:c1},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:u1},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:u1,borderBottomColor:u1},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:c1,color:Lb}}},{dark:!1}),bC(Rf.define([{tag:He.keyword,color:Fa},{tag:[He.name,He.deleted,He.character,He.propertyName,He.macroName],color:Uf},{tag:[He.variableName],color:Uf},{tag:[He.function(He.variableName)],color:Fa},{tag:[He.labelName],color:"#81a1c1"},{tag:[He.color,He.constant(He.name),He.standard(He.name)],color:Fa},{tag:[He.definition(He.name),He.separator],color:jP},{tag:[He.brace],color:d1},{tag:[He.annotation],color:UP},{tag:[He.number,He.changed,He.annotation,He.modifier,He.self,He.namespace],color:zP},{tag:[He.typeName,He.className],color:h1},{tag:[He.operator,He.operatorKeyword],color:jP},{tag:[He.tagName],color:"#b48ead"},{tag:[He.squareBracket],color:"#bf616a"},{tag:[He.angleBracket],color:Uf},{tag:[He.attributeName],color:h1},{tag:[He.regexp],color:Fa},{tag:[He.quote],color:VP},{tag:[He.string],color:Uf},{tag:He.link,color:d1,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[He.url,He.escape,He.special(He.string)],color:Uf},{tag:[He.meta],color:zP},{tag:[He.comment],color:HP,fontStyle:"italic"},{tag:He.strong,fontWeight:"bold",color:Fa},{tag:He.emphasis,fontStyle:"italic",color:Fa},{tag:He.strikethrough,textDecoration:"line-through"},{tag:He.heading,fontWeight:"bold",color:Fa},{tag:He.special(He.heading1),fontWeight:"bold",color:Fa},{tag:He.heading1,fontWeight:"bold",color:Fa},{tag:[He.heading2,He.heading3,He.heading4],fontWeight:"bold",color:Fa},{tag:[He.heading5,He.heading6],color:Fa},{tag:[He.atom,He.bool,He.special(He.variableName)],color:Uf},{tag:[He.processingInstruction,He.inserted],color:d1},{tag:[He.contentSeparator],color:h1},{tag:He.invalid,color:HP,borderBottom:`1px dotted ${UP}`}]))];class wc{constructor(){this._darkMode=!1,this._darkMode$=new xT(this._darkMode)}toggleDarkMode(){this._darkMode=!this._darkMode,this._darkMode$.next(this._darkMode)}darkMode(){return this._darkMode$.asObservable()}}wc.\u0275fac=function(e){return new(e||wc)},wc.\u0275prov=En({token:wc,factory:wc.\u0275fac,providedIn:"root"});const cq=["cm"];class _m{set targetContent(e){e&&(this.editorSource=e.nativeElement,this.initEditor())}constructor(e){this.globalSettings=e,this.editorReady=new Promise(t=>{this.editorReadyPromiseResolve=t}),this.theme=l1,this.extensions=this.updateExtensions(),this.text="",this.docChangedDebounceTime=400,this.docChanged=new Lr,this.darkMode=!1,this.docValue$=new Ne,this.invalidInput=!1}ngOnInit(){this.globalSettings.darkMode().subscribe(e=>{this.darkMode=e,this.updateTheme()}),this.docValue$.asObservable().pipe(Hx(this.docChangedDebounceTime)).subscribe(e=>{this.docChanged.emit(e)})}ngOnChanges(){this.setEditorContent(this.text)}initEditor(){null!=this.editorSource&&(this.view=new Mn({state:Gs.create({doc:this.text,extensions:this.extensions}),parent:this.editorSource}),this.editorReadyPromiseResolve())}setEditorContent(e){var t=this;return mf(function*(){if(yield t.editorReady,null==t.view)return;const r=Gs.create({doc:e,extensions:t.extensions});t.view.setState(r)})()}updateTheme(){var e=this;return mf(function*(){if(yield e.editorReady,null==e.view)return;e.theme=e.darkMode?l1:uq,e.updateExtensions();const t=Gs.create({doc:e.view.state.doc,extensions:e.extensions});e.view.setState(t)})()}updateExtensions(){null==this.theme&&(this.theme=l1);const e=function pW(n,e={}){return Vd.of({source:n,config:e})}(n=>{try{JSON.parse(n.state.doc.toString())}catch(e){if(!(e instanceof SyntaxError))throw e;const t=function sW(n,e){let t;return(t=n.message.match(/at position (\d+)/))?Math.min(+t[1],e.length):(t=n.message.match(/at line (\d+) column (\d+)/))?Math.min(e.line(+t[1]).from+ +t[2]-1,e.length):0}(e,n.state.doc);return[{from:t,message:e.message,severity:"error",to:t}]}return[]});return this.extensions=[W6,Mn.lineWrapping,new g8(oW),e,this.theme,Mn.updateListener.of(t=>{if(t.docChanged)try{const r=JSON.parse(t.state.doc.toString());this.docValue$.next(r)}catch{this.invalidInput=!0}})],this.extensions}onSaveHandler(e){console.log("Save"),e.preventDefault()}onPasteHandler(e){console.log("Pasted")}}_m.\u0275fac=function(e){return new(e||_m)(gt(wc))},_m.\u0275cmp=Do({type:_m,selectors:[["im-poc1-rdf-editor"]],viewQuery:function(e,t){if(1&e&&yg(cq,5),2&e){let r;ef(r=tf())&&(t.targetContent=r.first)}},hostBindings:function(e,t){1&e&&bi("keydown.control.s",function(i){return t.onSaveHandler(i)},0,Vs)("keydown.control.v",function(i){return t.onPasteHandler(i)},!1,Vs)},inputs:{text:"text",docChangedDebounceTime:"docChangedDebounceTime"},outputs:{docChanged:"docChanged"},standalone:!0,features:[On,gg],decls:3,vars:2,consts:[[1,"container"],["cm",""]],template:function(e,t){1&e&&(yi(0,"div",0),Ma(1,"div",null,1),Wi()),2&e&&lg("background-color",t.darkMode?"#2e3440":"white")},dependencies:[sf],styles:[".container[_ngcontent-%COMP%]{height:100%}"]});const Ba=new Wt("NgValueAccessor"),f7=["switch"],p7=["*"],g7=new Wt("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})}),m7={provide:Ba,useExisting:st(()=>YL),multi:!0};class qL{constructor(e,t){this.source=e,this.checked=t}}let v7=0;const y7=G5($x(U5(j5(class{constructor(n){this._elementRef=n}}))));let b7=(()=>{class n extends y7{get required(){return this._required}set required(t){this._required=Ig(t)}get checked(){return this._checked}set checked(t){this._checked=Ig(t),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(t,r,i,s,a,c,f){super(t),this._focusMonitor=r,this._changeDetectorRef=i,this.defaults=a,this._onChange=m=>{},this._onTouched=()=>{},this._required=!1,this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new Lr,this.toggleChange=new Lr,this.tabIndex=parseInt(s)||0,this.color=this.defaultColor=a.color||"accent",this._noopAnimations="NoopAnimations"===c,this.id=this._uniqueId=`${f}${++v7}`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{"keyboard"===t||"program"===t?(this._focused=!0,this._changeDetectorRef.markForCheck()):t||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(t){this.checked=!!t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}}return n.\u0275fac=function(t){!function yS(){throw new Error("invalid")}()},n.\u0275dir=hn({type:n,inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},features:[sr]}),n})(),YL=(()=>{class n extends b7{get buttonId(){return`${this.id||this._uniqueId}-button`}constructor(t,r,i,s,a,c){super(t,r,i,s,a,c,"mat-mdc-slide-toggle-"),this._labelId=this._uniqueId+"-label"}_handleClick(){this.toggleChange.emit(),this.defaults.disableToggleValue||(this.checked=!this.checked,this._onChange(this.checked),this.change.emit(new qL(this,this.checked)))}focus(){this._switchElement.nativeElement.focus()}_createChangeEvent(t){return new qL(this,t)}_getAriaLabelledBy(){return this.ariaLabelledby?this.ariaLabelledby:this.ariaLabel?null:this._labelId}}return n.\u0275fac=function(t){return new(t||n)(gt(ii),gt(L5),gt(ky),nd("tabindex"),gt(g7),gt(aA,8))},n.\u0275cmp=Do({type:n,selectors:[["mat-slide-toggle"]],viewQuery:function(t,r){if(1&t&&yg(f7,5),2&t){let i;ef(i=tf())&&(r._switchElement=i.first)}},hostAttrs:[1,"mat-mdc-slide-toggle"],hostVars:11,hostBindings:function(t,r){2&t&&(ID("id",r.id),uo("tabindex",null)("aria-label",null)("name",null)("aria-labelledby",null),Aa("mat-mdc-slide-toggle-focused",r._focused)("mat-mdc-slide-toggle-checked",r.checked)("_mat-animation-noopable",r._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matSlideToggle"],features:[Mr([m7]),sr],ngContentSelectors:p7,decls:17,vars:24,consts:[[1,"mdc-form-field"],["role","switch","type","button",1,"mdc-switch",3,"tabIndex","disabled","click"],["switch",""],[1,"mdc-switch__track"],[1,"mdc-switch__handle-track"],[1,"mdc-switch__handle"],[1,"mdc-switch__shadow"],[1,"mdc-elevation-overlay"],[1,"mdc-switch__ripple"],["mat-ripple","",1,"mat-mdc-slide-toggle-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-switch__icons"],["viewBox","0 0 24 24",1,"mdc-switch__icon","mdc-switch__icon--on"],["d","M19.69,5.23L8.96,15.96l-4.23-4.23L2.96,13.5l6,6L21.46,7L19.69,5.23z"],["viewBox","0 0 24 24",1,"mdc-switch__icon","mdc-switch__icon--off"],["d","M20 13H4v-2h16v2z"],[3,"for","click"]],template:function(t,r){if(1&t&&(ag(),yi(0,"div",0)(1,"button",1,2),bi("click",function(){return r._handleClick()}),Ma(3,"div",3),yi(4,"div",4)(5,"div",5)(6,"div",6),Ma(7,"div",7),Wi(),yi(8,"div",8),Ma(9,"div",9),Wi(),yi(10,"div",10),function dv(){dn.lFrame.currentNamespace="svg"}(),yi(11,"svg",11),Ma(12,"path",12),Wi(),yi(13,"svg",13),Ma(14,"path",14),Wi()()()()(),function vp(){!function Xc(){dn.lFrame.currentNamespace=null}()}(),yi(15,"label",15),bi("click",function(s){return s.stopPropagation()}),Xh(16),Wi()()),2&t){const i=function YS(n){return function Ou(n,e){return n[e]}(function nl(){return dn.lFrame.contextLView}(),22+n)}(2);Aa("mdc-form-field--align-end","before"==r.labelPosition),Yo(1),Aa("mdc-switch--selected",r.checked)("mdc-switch--unselected",!r.checked)("mdc-switch--checked",r.checked)("mdc-switch--disabled",r.disabled),co("tabIndex",r.tabIndex)("disabled",r.disabled),uo("id",r.buttonId)("name",r.name)("aria-label",r.ariaLabel)("aria-labelledby",r._getAriaLabelledBy())("aria-describedby",r.ariaDescribedby)("aria-required",r.required||null)("aria-checked",r.checked),Yo(8),co("matRippleTrigger",i)("matRippleDisabled",r.disableRipple||r.disabled)("matRippleCentered",!0),Yo(6),co("for",r.buttonId),uo("id",r._labelId)}},dependencies:[Q5],styles:['.mdc-form-field{display:inline-flex;align-items:center;vertical-align:middle}.mdc-form-field[hidden]{display:none}.mdc-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{margin-left:auto;margin-right:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{padding-left:0;padding-right:4px}.mdc-form-field--nowrap>label{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{margin-left:0;margin-right:auto}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{padding-left:4px;padding-right:0}.mdc-form-field--space-between{justify-content:space-between}.mdc-form-field--space-between>label{margin:0}[dir=rtl] .mdc-form-field--space-between>label,.mdc-form-field--space-between>label[dir=rtl]{margin:0}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1);background-color:var(--mdc-elevation-overlay-color, #fff)}.mdc-switch{align-items:center;background:none;border:none;cursor:pointer;display:inline-flex;flex-shrink:0;margin:0;outline:none;overflow:visible;padding:0;position:relative}.mdc-switch[hidden]{display:none}.mdc-switch:disabled{cursor:default;pointer-events:none}.mdc-switch__track{overflow:hidden;position:relative;width:100%}.mdc-switch__track::before,.mdc-switch__track::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";height:100%;left:0;position:absolute;width:100%}@media screen and (forced-colors: active){.mdc-switch__track::before,.mdc-switch__track::after{border-color:currentColor}}.mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0)}.mdc-switch__track::after{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(-100%)}[dir=rtl] .mdc-switch__track::after,.mdc-switch__track[dir=rtl]::after{transform:translateX(100%)}.mdc-switch--selected .mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__track::before,.mdc-switch--selected .mdc-switch__track[dir=rtl]::before{transform:translateX(-100%)}.mdc-switch--selected .mdc-switch__track::after{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0)}.mdc-switch__handle-track{height:100%;pointer-events:none;position:absolute;top:0;transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);left:0;right:auto;transform:translateX(0)}[dir=rtl] .mdc-switch__handle-track,.mdc-switch__handle-track[dir=rtl]{left:auto;right:0}.mdc-switch--selected .mdc-switch__handle-track{transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__handle-track,.mdc-switch--selected .mdc-switch__handle-track[dir=rtl]{transform:translateX(-100%)}.mdc-switch__handle{display:flex;pointer-events:auto;position:absolute;top:50%;transform:translateY(-50%);left:0;right:auto}[dir=rtl] .mdc-switch__handle,.mdc-switch__handle[dir=rtl]{left:auto;right:0}.mdc-switch__handle::before,.mdc-switch__handle::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";width:100%;height:100%;left:0;position:absolute;top:0;transition:background-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1),border-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);z-index:-1}@media screen and (forced-colors: active){.mdc-switch__handle::before,.mdc-switch__handle::after{border-color:currentColor}}.mdc-switch__shadow{border-radius:inherit;bottom:0;left:0;position:absolute;right:0;top:0}.mdc-elevation-overlay{bottom:0;left:0;right:0;top:0}.mdc-switch__ripple{left:50%;position:absolute;top:50%;transform:translate(-50%, -50%);z-index:-1}.mdc-switch:disabled .mdc-switch__ripple{display:none}.mdc-switch__icons{height:100%;position:relative;width:100%;z-index:1}.mdc-switch__icon{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;opacity:0;transition:opacity 30ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-switch--selected .mdc-switch__icon--on,.mdc-switch--unselected .mdc-switch__icon--off{opacity:1;transition:opacity 45ms 30ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle{display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-mdc-slide-toggle .mdc-switch{width:var(--mdc-switch-track-width, 36px)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-selected-handle-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-hover-handle-color, #310077)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-focus-handle-color, #310077)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-selected-pressed-handle-color, #310077)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-selected-handle-color, #424242)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-unselected-handle-color, #616161)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-hover-handle-color, #212121)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-focus-handle-color, #212121)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-unselected-pressed-handle-color, #212121)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-unselected-handle-color, #424242)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__handle::before{background:var(--mdc-switch-handle-surface-color, var(--mdc-theme-surface, #fff))}.mat-mdc-slide-toggle .mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation, 0px 2px 1px -1px rgba(0, 0, 0, 0.2), 0px 1px 1px 0px rgba(0, 0, 0, 0.14), 0px 1px 3px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-slide-toggle .mdc-switch:disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__focus-ring-wrapper,.mat-mdc-slide-toggle .mdc-switch .mdc-switch__handle{height:var(--mdc-switch-handle-height, 20px)}.mat-mdc-slide-toggle .mdc-switch:disabled .mdc-switch__handle::after{opacity:var(--mdc-switch-disabled-handle-opacity, 0.38)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__handle{border-radius:var(--mdc-switch-handle-shape, 10px)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__handle{width:var(--mdc-switch-handle-width, 20px)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__handle-track{width:calc(100% - var(--mdc-switch-handle-width, 20px))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled .mdc-switch__icon{fill:var(--mdc-switch-selected-icon-color, var(--mdc-theme-on-primary, #fff))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-selected-icon-color, var(--mdc-theme-on-primary, #fff))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled .mdc-switch__icon{fill:var(--mdc-switch-unselected-icon-color, var(--mdc-theme-on-primary, #fff))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-unselected-icon-color, var(--mdc-theme-on-primary, #fff))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-selected-icon-opacity, 0.38)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-unselected-icon-opacity, 0.38)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected .mdc-switch__icon{width:var(--mdc-switch-selected-icon-size, 18px);height:var(--mdc-switch-selected-icon-size, 18px)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected .mdc-switch__icon{width:var(--mdc-switch-unselected-icon-size, 18px);height:var(--mdc-switch-unselected-icon-size, 18px)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-hover-state-layer-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:focus .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:focus .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-focus-state-layer-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-pressed-state-layer-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-hover-state-layer-color, #424242)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-focus-state-layer-color, #424242)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-pressed-state-layer-color, #424242)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:hover:not(:focus):hover .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:hover:not(:focus).mdc-ripple-surface--hover .mdc-switch__ripple::before{opacity:var(--mdc-switch-selected-hover-state-layer-opacity, 0.04)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:focus.mdc-ripple-upgraded--background-focused .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:focus:not(.mdc-ripple-upgraded):focus .mdc-switch__ripple::before{transition-duration:75ms;opacity:var(--mdc-switch-selected-focus-state-layer-opacity, 0.12)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active:not(.mdc-ripple-upgraded) .mdc-switch__ripple::after{transition:opacity 150ms linear}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active:not(.mdc-ripple-upgraded):active .mdc-switch__ripple::after{transition-duration:75ms;opacity:var(--mdc-switch-selected-pressed-state-layer-opacity, 0.1)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-switch-selected-pressed-state-layer-opacity, 0.1)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus):hover .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus).mdc-ripple-surface--hover .mdc-switch__ripple::before{opacity:var(--mdc-switch-unselected-hover-state-layer-opacity, 0.04)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:focus.mdc-ripple-upgraded--background-focused .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:focus:not(.mdc-ripple-upgraded):focus .mdc-switch__ripple::before{transition-duration:75ms;opacity:var(--mdc-switch-unselected-focus-state-layer-opacity, 0.12)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active:not(.mdc-ripple-upgraded) .mdc-switch__ripple::after{transition:opacity 150ms linear}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active:not(.mdc-ripple-upgraded):active .mdc-switch__ripple::after{transition-duration:75ms;opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity, 0.1)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity, 0.1)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__ripple{height:var(--mdc-switch-state-layer-size, 48px);width:var(--mdc-switch-state-layer-size, 48px)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__track{height:var(--mdc-switch-track-height, 14px)}.mat-mdc-slide-toggle .mdc-switch:disabled .mdc-switch__track{opacity:var(--mdc-switch-disabled-track-opacity, 0.12)}.mat-mdc-slide-toggle .mdc-switch:enabled .mdc-switch__track::after{background:var(--mdc-switch-selected-track-color, #d7bbff)}.mat-mdc-slide-toggle .mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-hover-track-color, #d7bbff)}.mat-mdc-slide-toggle .mdc-switch:enabled:focus:not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-focus-track-color, #d7bbff)}.mat-mdc-slide-toggle .mdc-switch:enabled:active .mdc-switch__track::after{background:var(--mdc-switch-selected-pressed-track-color, #d7bbff)}.mat-mdc-slide-toggle .mdc-switch:disabled .mdc-switch__track::after{background:var(--mdc-switch-disabled-selected-track-color, #424242)}.mat-mdc-slide-toggle .mdc-switch:enabled .mdc-switch__track::before{background:var(--mdc-switch-unselected-track-color, #e0e0e0)}.mat-mdc-slide-toggle .mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-hover-track-color, #e0e0e0)}.mat-mdc-slide-toggle .mdc-switch:enabled:focus:not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-focus-track-color, #e0e0e0)}.mat-mdc-slide-toggle .mdc-switch:enabled:active .mdc-switch__track::before{background:var(--mdc-switch-unselected-pressed-track-color, #e0e0e0)}.mat-mdc-slide-toggle .mdc-switch:disabled .mdc-switch__track::before{background:var(--mdc-switch-disabled-unselected-track-color, #424242)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__track{border-radius:var(--mdc-switch-track-shape, 7px)}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple,.mat-mdc-slide-toggle .mdc-switch__ripple::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple:not(:empty),.mat-mdc-slide-toggle .mdc-switch__ripple::after:not(:empty){transform:translateZ(0)}.mat-mdc-slide-toggle .mdc-switch__ripple::after{content:"";opacity:0}.mat-mdc-slide-toggle .mdc-switch:hover .mdc-switch__ripple::after{opacity:.04;transition:opacity 75ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mdc-switch .mdc-switch__ripple::after{opacity:.12}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mat-mdc-focus-indicator::before{content:""}.mat-mdc-slide-toggle .mat-ripple-element{opacity:.12}.mat-mdc-slide-toggle .mat-mdc-focus-indicator::before{border-radius:50%}.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle-track,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-elevation-overlay,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__icon,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::after,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::after{transition:none}'],encapsulation:2,changeDetection:0}),n})(),XL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vs({type:n}),n.\u0275inj=Or({}),n})(),x7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vs({type:n}),n.\u0275inj=Or({imports:[XL,rc,J5,sf,XL,rc]}),n})();const E7=["*",[["mat-toolbar-row"]]],C7=["*","mat-toolbar-row"],S7=$x(class{constructor(n){this._elementRef=n}});let _7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=hn({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),M7=(()=>{class n extends S7{constructor(t,r,i){super(t),this._platform=r,this._document=i}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(t){return new(t||n)(gt(ii),gt(af),gt(ui))},n.\u0275cmp=Do({type:n,selectors:[["mat-toolbar"]],contentQueries:function(t,r,i){if(1&t&&function LM(n,e,t,r){const i=Ln();if(i.firstCreatePass){const s=yr();BM(i,new NM(e,t,r),s.index),function rH(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(i,n),2==(2&t)&&(i.staticContentQueries=!0)}FM(i,St(),t)}(i,_7,5),2&t){let s;ef(s=tf())&&(r._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,r){2&t&&Aa("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",0===r._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[sr],ngContentSelectors:C7,decls:2,vars:0,template:function(t,r){1&t&&(ag(E7),Xh(0),Xh(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color: inherit;--mdc-outlined-button-label-text-color: inherit}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),n})(),A7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vs({type:n}),n.\u0275inj=Or({imports:[rc,rc]}),n})();class Om{constructor(e,t){this.document=e,this.globalSettings=t,this.darkMode=!1}ngOnInit(){this.globalSettings.darkMode().subscribe(e=>{this.darkMode=e,this.document.body.style.backgroundColor=e?"#bbb":"#eee"})}}Om.\u0275fac=function(e){return new(e||Om)(gt(ui),gt(wc))},Om.\u0275cmp=Do({type:Om,selectors:[["im-poc1-top-bar"]],standalone:!0,features:[gg],decls:9,vars:3,consts:[[1,"toolbar"],[1,"toggle"],[1,"mr-8"],[3,"checked","click"]],template:function(e,t){1&e&&(yi(0,"mat-toolbar",0)(1,"h2"),wy(2,"JSON-LD graph view"),Wi(),yi(3,"div",1)(4,"mat-icon",2),wy(5,"brightness_5"),Wi(),yi(6,"mat-slide-toggle",3),bi("click",function(){return t.globalSettings.toggleDarkMode()}),Wi(),yi(7,"mat-icon"),wy(8,"bedtime"),Wi()()()),2&e&&(Aa("dark",t.darkMode),Yo(6),co("checked",t.darkMode))},dependencies:[sf,A7,M7,x7,YL,gI,RU],styles:[".toolbar[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;box-shadow:#00000026 1.95px 1.95px 2.6px;background-color:#fff}.toggle[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;gap:3px}.dark[_ngcontent-%COMP%]{color:#fff!important;background-color:#020b4a!important}@media screen and (max-width: 500px){h2[_ngcontent-%COMP%]{font-size:1em}}"]});class Rm{constructor(e){this.globalSettings=e,this.graphData={"@context":{name:"http://schema.org/name",description:"http://schema.org/description",image:{"@id":"http://schema.org/image","@type":"@id"},geo:"http://schema.org/geo",latitude:{"@id":"http://schema.org/latitude","@type":"xsd:float"},longitude:{"@id":"http://schema.org/longitude","@type":"xsd:float"},xsd:"http://www.w3.org/2001/XMLSchema#"},name:"The Empire State Building",description:"The Empire State Building is a 102-story landmark in New York City.",image:"http://www.civil.usherbrooke.ca/cours/gci215a/empire-state-building.jpg",geo:{latitude:"40.75",longitude:"73.98"}},this.rdfText=JSON.stringify(this.graphData,null,2),this.darkMode=!1,this.isSmallScreen=!1}ngOnInit(){this.globalSettings.darkMode().subscribe(e=>{this.darkMode=e}),this.detectScreenSize()}onRDFDocUpdate(e){this.graphData=e}onWindowResize(){this.detectScreenSize()}detectScreenSize(){this.isSmallScreen=window.innerWidth<500}}Rm.\u0275fac=function(e){return new(e||Rm)(gt(wc))},Rm.\u0275cmp=Do({type:Rm,selectors:[["im-poc1-root"]],hostBindings:function(e,t){1&e&&bi("resize",function(i){return t.onWindowResize(i)},0,Ju)},standalone:!0,features:[gg],decls:8,vars:7,consts:[[1,"main"],[1,"split-container"],[3,"direction"],[3,"size"],[3,"text","docChanged"],[3,"data"]],template:function(e,t){1&e&&(Ma(0,"im-poc1-top-bar"),yi(1,"div",0)(2,"div",1)(3,"as-split",2)(4,"as-split-area",3)(5,"im-poc1-rdf-editor",4),bi("docChanged",function(i){return t.onRDFDocUpdate(i)}),Wi()(),yi(6,"as-split-area",3),Ma(7,"im-poc1-graph",5),Wi()()()()),2&e&&(Yo(2),lg("background-color",t.darkMode?"#595959":"white"),Yo(1),co("direction",t.isSmallScreen?"vertical":"horizontal"),Yo(1),co("size",40),Yo(1),co("text",t.rdfText),Yo(1),co("size",60),Yo(1),co("data",t.graphData))},dependencies:[Bg,_m,Xj,wT,Yj,Om],styles:[".split-container[_ngcontent-%COMP%]{width:calc(100% - 20px);height:calc(100vh - 200px);box-shadow:#00000026 1.95px 1.95px 2.6px;border-radius:10px;padding:10px}.main[_ngcontent-%COMP%]{padding:50px}@media screen and (max-width: 500px){.main[_ngcontent-%COMP%]{padding:5px}.split-container[_ngcontent-%COMP%]{width:calc(100% - 20px);height:calc(100vh - 75px)}}"]}),function yj(n,e){return zH({rootComponent:n,...dT(e)})}(Rm).catch(n=>console.error(n))},7352:(Oe,Re,G)=>{"use strict";G.r(Re),G.d(Re,{afterMain:()=>ce,afterRead:()=>le,afterWrite:()=>B,applyStyles:()=>ze,arrow:()=>$r,auto:()=>N,basePlacements:()=>C,beforeMain:()=>J,beforeRead:()=>oe,beforeWrite:()=>U,bottom:()=>P,clippingParents:()=>H,computeStyles:()=>ps,createPopper:()=>ua,createPopperBase:()=>$a,createPopperLite:()=>ur,detectOverflow:()=>Qs,end:()=>M,eventListeners:()=>Xs,flip:()=>Yd,hide:()=>yu,left:()=>S,main:()=>Ie,modifierPhases:()=>Q,offset:()=>Ua,placements:()=>q,popper:()=>X,popperGenerator:()=>Xi,popperOffsets:()=>gr,preventOverflow:()=>Xd,read:()=>K,reference:()=>ee,right:()=>I,start:()=>T,top:()=>$,variationPlacements:()=>z,viewport:()=>F,write:()=>L});var $="top",P="bottom",I="right",S="left",N="auto",C=[$,P,I,S],T="start",M="end",H="clippingParents",F="viewport",X="popper",ee="reference",z=C.reduce(function(_e,ye){return _e.concat([ye+"-"+T,ye+"-"+M])},[]),q=[].concat(C,[N]).reduce(function(_e,ye){return _e.concat([ye,ye+"-"+T,ye+"-"+M])},[]),oe="beforeRead",K="read",le="afterRead",J="beforeMain",Ie="main",ce="afterMain",U="beforeWrite",L="write",B="afterWrite",Q=[oe,K,le,J,Ie,ce,U,L,B];function ue(_e){return _e?(_e.nodeName||"").toLowerCase():null}function ge(_e){if(null==_e)return window;if("[object Window]"!==_e.toString()){var ye=_e.ownerDocument;return ye&&ye.defaultView||window}return _e}function ie(_e){return _e instanceof ge(_e).Element||_e instanceof Element}function we(_e){return _e instanceof ge(_e).HTMLElement||_e instanceof HTMLElement}function Pe(_e){return!(typeof ShadowRoot>"u")&&(_e instanceof ge(_e).ShadowRoot||_e instanceof ShadowRoot)}const ze={name:"applyStyles",enabled:!0,phase:"write",fn:function me(_e){var ye=_e.state;Object.keys(ye.elements).forEach(function(Ue){var bt=ye.styles[Ue]||{},st=ye.attributes[Ue]||{},ut=ye.elements[Ue];!we(ut)||!ue(ut)||(Object.assign(ut.style,bt),Object.keys(st).forEach(function(Kt){var Ft=st[Kt];!1===Ft?ut.removeAttribute(Kt):ut.setAttribute(Kt,!0===Ft?"":Ft)}))})},effect:function We(_e){var ye=_e.state,Ue={popper:{position:ye.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(ye.elements.popper.style,Ue.popper),ye.styles=Ue,ye.elements.arrow&&Object.assign(ye.elements.arrow.style,Ue.arrow),function(){Object.keys(ye.elements).forEach(function(bt){var st=ye.elements[bt],ut=ye.attributes[bt]||{},Ft=Object.keys(ye.styles.hasOwnProperty(bt)?ye.styles[bt]:Ue[bt]).reduce(function(Ht,un){return Ht[un]="",Ht},{});!we(st)||!ue(st)||(Object.assign(st.style,Ft),Object.keys(ut).forEach(function(Ht){st.removeAttribute(Ht)}))})}},requires:["computeStyles"]};function Te(_e){return _e.split("-")[0]}var ve=Math.max,fe=Math.min,Ze=Math.round;function $e(){var _e=navigator.userAgentData;return null!=_e&&_e.brands?_e.brands.map(function(ye){return ye.brand+"/"+ye.version}).join(" "):navigator.userAgent}function Ne(){return!/^((?!chrome|android).)*safari/i.test($e())}function Qe(_e,ye,Ue){void 0===ye&&(ye=!1),void 0===Ue&&(Ue=!1);var bt=_e.getBoundingClientRect(),st=1,ut=1;ye&&we(_e)&&(st=_e.offsetWidth>0&&Ze(bt.width)/_e.offsetWidth||1,ut=_e.offsetHeight>0&&Ze(bt.height)/_e.offsetHeight||1);var Ft=(ie(_e)?ge(_e):window).visualViewport,Ht=!Ne()&&Ue,un=(bt.left+(Ht&&Ft?Ft.offsetLeft:0))/st,it=(bt.top+(Ht&&Ft?Ft.offsetTop:0))/ut,qn=bt.width/st,Ut=bt.height/ut;return{width:qn,height:Ut,top:it,right:un+qn,bottom:it+Ut,left:un,x:un,y:it}}function kt(_e){var ye=Qe(_e),Ue=_e.offsetWidth,bt=_e.offsetHeight;return Math.abs(ye.width-Ue)<=1&&(Ue=ye.width),Math.abs(ye.height-bt)<=1&&(bt=ye.height),{x:_e.offsetLeft,y:_e.offsetTop,width:Ue,height:bt}}function ft(_e,ye){var Ue=ye.getRootNode&&ye.getRootNode();if(_e.contains(ye))return!0;if(Ue&&Pe(Ue)){var bt=ye;do{if(bt&&_e.isSameNode(bt))return!0;bt=bt.parentNode||bt.host}while(bt)}return!1}function ot(_e){return ge(_e).getComputedStyle(_e)}function lt(_e){return["table","td","th"].indexOf(ue(_e))>=0}function Ge(_e){return((ie(_e)?_e.ownerDocument:_e.document)||window.document).documentElement}function De(_e){return"html"===ue(_e)?_e:_e.assignedSlot||_e.parentNode||(Pe(_e)?_e.host:null)||Ge(_e)}function Fe(_e){return we(_e)&&"fixed"!==ot(_e).position?_e.offsetParent:null}function Mt(_e){for(var ye=ge(_e),Ue=Fe(_e);Ue&&lt(Ue)&&"static"===ot(Ue).position;)Ue=Fe(Ue);return Ue&&("html"===ue(Ue)||"body"===ue(Ue)&&"static"===ot(Ue).position)?ye:Ue||function ct(_e){var ye=/firefox/i.test($e());if(/Trident/i.test($e())&&we(_e)&&"fixed"===ot(_e).position)return null;var st=De(_e);for(Pe(st)&&(st=st.host);we(st)&&["html","body"].indexOf(ue(st))<0;){var ut=ot(st);if("none"!==ut.transform||"none"!==ut.perspective||"paint"===ut.contain||-1!==["transform","perspective"].indexOf(ut.willChange)||ye&&"filter"===ut.willChange||ye&&ut.filter&&"none"!==ut.filter)return st;st=st.parentNode}return null}(_e)||ye}function dt(_e){return["top","bottom"].indexOf(_e)>=0?"x":"y"}function Ot(_e,ye,Ue){return ve(_e,fe(ye,Ue))}function en(_e){return Object.assign({},{top:0,right:0,bottom:0,left:0},_e)}function on(_e,ye){return ye.reduce(function(Ue,bt){return Ue[bt]=_e,Ue},{})}const $r={name:"arrow",enabled:!0,phase:"main",fn:function cr(_e){var ye,Ue=_e.state,bt=_e.name,st=_e.options,ut=Ue.elements.arrow,Kt=Ue.modifiersData.popperOffsets,Ft=Te(Ue.placement),Ht=dt(Ft),it=[S,I].indexOf(Ft)>=0?"height":"width";if(ut&&Kt){var qn=function(ye,Ue){return en("number"!=typeof(ye="function"==typeof ye?ye(Object.assign({},Ue.rects,{placement:Ue.placement})):ye)?ye:on(ye,C))}(st.padding,Ue),Ut=kt(ut),Gt="y"===Ht?$:S,wr="y"===Ht?P:I,Hn=Ue.rects.reference[it]+Ue.rects.reference[Ht]-Kt[Ht]-Ue.rects.popper[it],zn=Kt[Ht]-Ue.rects.reference[Ht],jn=Mt(ut),Un=jn?"y"===Ht?jn.clientHeight||0:jn.clientWidth||0:0,In=Un/2-Ut[it]/2+(Hn/2-zn/2),vr=Ot(qn[Gt],In,Un-Ut[it]-qn[wr]);Ue.modifiersData[bt]=((ye={})[Ht]=vr,ye.centerOffset=vr-In,ye)}},effect:function lr(_e){var ye=_e.state,bt=_e.options.element,st=void 0===bt?"[data-popper-arrow]":bt;null!=st&&("string"==typeof st&&!(st=ye.elements.popper.querySelector(st))||ft(ye.elements.popper,st)&&(ye.elements.arrow=st))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ti(_e){return _e.split("-")[1]}var ds={top:"auto",right:"auto",bottom:"auto",left:"auto"};function fs(_e){var ye,Ue=_e.popper,bt=_e.popperRect,st=_e.placement,ut=_e.variation,Kt=_e.offsets,Ft=_e.position,Ht=_e.gpuAcceleration,un=_e.adaptive,it=_e.roundOffsets,qn=_e.isFixed,Ut=Kt.x,Gt=void 0===Ut?0:Ut,wr=Kt.y,Hn=void 0===wr?0:wr,zn="function"==typeof it?it({x:Gt,y:Hn}):{x:Gt,y:Hn};Gt=zn.x,Hn=zn.y;var jn=Kt.hasOwnProperty("x"),Un=Kt.hasOwnProperty("y"),Vr=S,Jn=$,or=window;if(un){var In=Mt(Ue),vr="clientHeight",Hr="clientWidth";In===ge(Ue)&&"static"!==ot(In=Ge(Ue)).position&&"absolute"===Ft&&(vr="scrollHeight",Hr="scrollWidth"),(st===$||(st===S||st===I)&&ut===M)&&(Jn=P,Hn-=(qn&&In===or&&or.visualViewport?or.visualViewport.height:In[vr])-bt.height,Hn*=Ht?1:-1),st!==S&&(st!==$&&st!==P||ut!==M)||(Vr=I,Gt-=(qn&&In===or&&or.visualViewport?or.visualViewport.width:In[Hr])-bt.width,Gt*=Ht?1:-1)}var Yn,dr=Object.assign({position:Ft},un&&ds),to=!0===it?function hs(_e){var Ue=_e.y,st=window.devicePixelRatio||1;return{x:Ze(_e.x*st)/st||0,y:Ze(Ue*st)/st||0}}({x:Gt,y:Hn}):{x:Gt,y:Hn};return Gt=to.x,Hn=to.y,Object.assign({},dr,Ht?((Yn={})[Jn]=Un?"0":"",Yn[Vr]=jn?"0":"",Yn.transform=(or.devicePixelRatio||1)<=1?"translate("+Gt+"px, "+Hn+"px)":"translate3d("+Gt+"px, "+Hn+"px, 0)",Yn):((ye={})[Jn]=Un?Hn+"px":"",ye[Vr]=jn?Gt+"px":"",ye.transform="",ye))}const ps={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function Yt(_e){var ye=_e.state,Ue=_e.options,bt=Ue.gpuAcceleration,st=void 0===bt||bt,ut=Ue.adaptive,Kt=void 0===ut||ut,Ft=Ue.roundOffsets,Ht=void 0===Ft||Ft,it={placement:Te(ye.placement),variation:ti(ye.placement),popper:ye.elements.popper,popperRect:ye.rects.popper,gpuAcceleration:st,isFixed:"fixed"===ye.options.strategy};null!=ye.modifiersData.popperOffsets&&(ye.styles.popper=Object.assign({},ye.styles.popper,fs(Object.assign({},it,{offsets:ye.modifiersData.popperOffsets,position:ye.options.strategy,adaptive:Kt,roundOffsets:Ht})))),null!=ye.modifiersData.arrow&&(ye.styles.arrow=Object.assign({},ye.styles.arrow,fs(Object.assign({},it,{offsets:ye.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:Ht})))),ye.attributes.popper=Object.assign({},ye.attributes.popper,{"data-popper-placement":ye.placement})},data:{}};var Pn={passive:!0};const Xs={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function Cc(_e){var ye=_e.state,Ue=_e.instance,bt=_e.options,st=bt.scroll,ut=void 0===st||st,Kt=bt.resize,Ft=void 0===Kt||Kt,Ht=ge(ye.elements.popper),un=[].concat(ye.scrollParents.reference,ye.scrollParents.popper);return ut&&un.forEach(function(it){it.addEventListener("scroll",Ue.update,Pn)}),Ft&&Ht.addEventListener("resize",Ue.update,Pn),function(){ut&&un.forEach(function(it){it.removeEventListener("scroll",Ue.update,Pn)}),Ft&&Ht.removeEventListener("resize",Ue.update,Pn)}},data:{}};var sa={left:"right",right:"left",bottom:"top",top:"bottom"};function Pl(_e){return _e.replace(/left|right|bottom|top/g,function(ye){return sa[ye]})}var vu={start:"end",end:"start"};function Va(_e){return _e.replace(/start|end/g,function(ye){return vu[ye]})}function vo(_e){var ye=ge(_e);return{scrollLeft:ye.pageXOffset,scrollTop:ye.pageYOffset}}function oa(_e){return Qe(Ge(_e)).left+vo(_e).scrollLeft}function Si(_e){var ye=ot(_e);return/auto|scroll|overlay|hidden/.test(ye.overflow+ye.overflowY+ye.overflowX)}function Bo(_e){return["html","body","#document"].indexOf(ue(_e))>=0?_e.ownerDocument.body:we(_e)&&Si(_e)?_e:Bo(De(_e))}function aa(_e,ye){var Ue;void 0===ye&&(ye=[]);var bt=Bo(_e),st=bt===(null==(Ue=_e.ownerDocument)?void 0:Ue.body),ut=ge(bt),Kt=st?[ut].concat(ut.visualViewport||[],Si(bt)?bt:[]):bt,Ft=ye.concat(Kt);return st?Ft:Ft.concat(aa(De(Kt)))}function Vo(_e){return Object.assign({},_e,{left:_e.x,top:_e.y,right:_e.x+_e.width,bottom:_e.y+_e.height})}function za(_e,ye,Ue){return ye===F?Vo(function Ll(_e,ye){var Ue=ge(_e),bt=Ge(_e),st=Ue.visualViewport,ut=bt.clientWidth,Kt=bt.clientHeight,Ft=0,Ht=0;if(st){ut=st.width,Kt=st.height;var un=Ne();(un||!un&&"fixed"===ye)&&(Ft=st.offsetLeft,Ht=st.offsetTop)}return{width:ut,height:Kt,x:Ft+oa(_e),y:Ht}}(_e,Ue)):ie(ye)?function Sc(_e,ye){var Ue=Qe(_e,!1,"fixed"===ye);return Ue.top=Ue.top+_e.clientTop,Ue.left=Ue.left+_e.clientLeft,Ue.bottom=Ue.top+_e.clientHeight,Ue.right=Ue.left+_e.clientWidth,Ue.width=_e.clientWidth,Ue.height=_e.clientHeight,Ue.x=Ue.left,Ue.y=Ue.top,Ue}(ye,Ue):Vo(function Ha(_e){var ye,Ue=Ge(_e),bt=vo(_e),st=null==(ye=_e.ownerDocument)?void 0:ye.body,ut=ve(Ue.scrollWidth,Ue.clientWidth,st?st.scrollWidth:0,st?st.clientWidth:0),Kt=ve(Ue.scrollHeight,Ue.clientHeight,st?st.scrollHeight:0,st?st.clientHeight:0),Ft=-bt.scrollLeft+oa(_e),Ht=-bt.scrollTop;return"rtl"===ot(st||Ue).direction&&(Ft+=ve(Ue.clientWidth,st?st.clientWidth:0)-ut),{width:ut,height:Kt,x:Ft,y:Ht}}(Ge(_e)))}function Ks(_e){var Ht,ye=_e.reference,Ue=_e.element,bt=_e.placement,st=bt?Te(bt):null,ut=bt?ti(bt):null,Kt=ye.x+ye.width/2-Ue.width/2,Ft=ye.y+ye.height/2-Ue.height/2;switch(st){case $:Ht={x:Kt,y:ye.y-Ue.height};break;case P:Ht={x:Kt,y:ye.y+ye.height};break;case I:Ht={x:ye.x+ye.width,y:Ft};break;case S:Ht={x:ye.x-Ue.width,y:Ft};break;default:Ht={x:ye.x,y:ye.y}}var un=st?dt(st):null;if(null!=un){var it="y"===un?"height":"width";switch(ut){case T:Ht[un]=Ht[un]-(ye[it]/2-Ue[it]/2);break;case M:Ht[un]=Ht[un]+(ye[it]/2-Ue[it]/2)}}return Ht}function Qs(_e,ye){void 0===ye&&(ye={});var bt=ye.placement,st=void 0===bt?_e.placement:bt,ut=ye.strategy,Kt=void 0===ut?_e.strategy:ut,Ft=ye.boundary,Ht=void 0===Ft?H:Ft,un=ye.rootBoundary,it=void 0===un?F:un,qn=ye.elementContext,Ut=void 0===qn?X:qn,Gt=ye.altBoundary,wr=void 0!==Gt&&Gt,Hn=ye.padding,zn=void 0===Hn?0:Hn,jn=en("number"!=typeof zn?zn:on(zn,C)),Vr=_e.rects.popper,Jn=_e.elements[wr?Ut===X?ee:X:Ut],or=function Wd(_e,ye,Ue,bt){var st="clippingParents"===ye?function ja(_e){var ye=aa(De(_e)),bt=["absolute","fixed"].indexOf(ot(_e).position)>=0&&we(_e)?Mt(_e):_e;return ie(bt)?ye.filter(function(st){return ie(st)&&ft(st,bt)&&"body"!==ue(st)}):[]}(_e):[].concat(ye),ut=[].concat(st,[Ue]),Ft=ut.reduce(function(Ht,un){var it=za(_e,un,bt);return Ht.top=ve(it.top,Ht.top),Ht.right=fe(it.right,Ht.right),Ht.bottom=fe(it.bottom,Ht.bottom),Ht.left=ve(it.left,Ht.left),Ht},za(_e,ut[0],bt));return Ft.width=Ft.right-Ft.left,Ft.height=Ft.bottom-Ft.top,Ft.x=Ft.left,Ft.y=Ft.top,Ft}(ie(Jn)?Jn:Jn.contextElement||Ge(_e.elements.popper),Ht,it,Kt),In=Qe(_e.elements.reference),vr=Ks({reference:In,element:Vr,strategy:"absolute",placement:st}),Hr=Vo(Object.assign({},Vr,vr)),Wr=Ut===X?Hr:In,Dr={top:or.top-Wr.top+jn.top,bottom:Wr.bottom-or.bottom+jn.bottom,left:or.left-Wr.left+jn.left,right:Wr.right-or.right+jn.right},dr=_e.modifiersData.offset;if(Ut===X&&dr){var to=dr[st];Object.keys(Dr).forEach(function(Yn){var Is=[I,P].indexOf(Yn)>=0?1:-1,ri=[$,P].indexOf(Yn)>=0?"y":"x";Dr[Yn]+=to[ri]*Is})}return Dr}const Yd={name:"flip",enabled:!0,phase:"main",fn:function qd(_e){var ye=_e.state,Ue=_e.options,bt=_e.name;if(!ye.modifiersData[bt]._skip){for(var st=Ue.mainAxis,ut=void 0===st||st,Kt=Ue.altAxis,Ft=void 0===Kt||Kt,Ht=Ue.fallbackPlacements,un=Ue.padding,it=Ue.boundary,qn=Ue.rootBoundary,Ut=Ue.altBoundary,Gt=Ue.flipVariations,wr=void 0===Gt||Gt,Hn=Ue.allowedAutoPlacements,zn=ye.options.placement,jn=Te(zn),Vr=Ht||(jn!==zn&&wr?function la(_e){if(Te(_e)===N)return[];var ye=Pl(_e);return[Va(_e),ye,Va(ye)]}(zn):[Pl(zn)]),Jn=[zn].concat(Vr).reduce(function(Ya,ks){return Ya.concat(Te(ks)===N?function Ts(_e,ye){void 0===ye&&(ye={});var st=ye.boundary,ut=ye.rootBoundary,Kt=ye.padding,Ft=ye.flipVariations,Ht=ye.allowedAutoPlacements,un=void 0===Ht?q:Ht,it=ti(ye.placement),qn=it?Ft?z:z.filter(function(wr){return ti(wr)===it}):C,Ut=qn.filter(function(wr){return un.indexOf(wr)>=0});0===Ut.length&&(Ut=qn);var Gt=Ut.reduce(function(wr,Hn){return wr[Hn]=Qs(_e,{placement:Hn,boundary:st,rootBoundary:ut,padding:Kt})[Te(Hn)],wr},{});return Object.keys(Gt).sort(function(wr,Hn){return Gt[wr]-Gt[Hn]})}(ye,{placement:ks,boundary:it,rootBoundary:qn,padding:un,flipVariations:wr,allowedAutoPlacements:Hn}):ks)},[]),or=ye.rects.reference,In=ye.rects.popper,vr=new Map,Hr=!0,Wr=Jn[0],Dr=0;Dr<Jn.length;Dr++){var dr=Jn[Dr],to=Te(dr),Yn=ti(dr)===T,Is=[$,P].indexOf(to)>=0,ri=Is?"width":"height",mn=Qs(ye,{placement:dr,boundary:it,rootBoundary:qn,altBoundary:Ut,padding:un}),Er=Is?Yn?I:S:Yn?P:$;or[ri]>In[ri]&&(Er=Pl(Er));var Ic=Pl(Er),qa=[];if(ut&&qa.push(mn[to]<=0),Ft&&qa.push(mn[Er]<=0,mn[Ic]<=0),qa.every(function(Ya){return Ya})){Wr=dr,Hr=!1;break}vr.set(dr,qa)}if(Hr)for(var Jd=function(ks){var no=Jn.find(function(Du){var bo=vr.get(Du);if(bo)return bo.slice(0,ks).every(function(ca){return ca})});if(no)return Wr=no,"break"},Or=wr?3:1;Or>0&&"break"!==Jd(Or);Or--);ye.placement!==Wr&&(ye.modifiersData[bt]._skip=!0,ye.placement=Wr,ye.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function _c(_e,ye,Ue){return void 0===Ue&&(Ue={x:0,y:0}),{top:_e.top-ye.height-Ue.y,right:_e.right-ye.width+Ue.x,bottom:_e.bottom-ye.height+Ue.y,left:_e.left-ye.width-Ue.x}}function Mc(_e){return[$,I,P,S].some(function(ye){return _e[ye]>=0})}const yu={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function Wf(_e){var ye=_e.state,Ue=_e.name,bt=ye.rects.reference,st=ye.rects.popper,ut=ye.modifiersData.preventOverflow,Kt=Qs(ye,{elementContext:"reference"}),Ft=Qs(ye,{altBoundary:!0}),Ht=_c(Kt,bt),un=_c(Ft,st,ut),it=Mc(Ht),qn=Mc(un);ye.modifiersData[Ue]={referenceClippingOffsets:Ht,popperEscapeOffsets:un,isReferenceHidden:it,hasPopperEscaped:qn},ye.attributes.popper=Object.assign({},ye.attributes.popper,{"data-popper-reference-hidden":it,"data-popper-escaped":qn})}},Ua={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function bu(_e){var ye=_e.state,bt=_e.name,st=_e.options.offset,ut=void 0===st?[0,0]:st,Kt=q.reduce(function(it,qn){return it[qn]=function Js(_e,ye,Ue){var bt=Te(_e),st=[S,$].indexOf(bt)>=0?-1:1,ut="function"==typeof Ue?Ue(Object.assign({},ye,{placement:_e})):Ue,Kt=ut[0],Ft=ut[1];return Kt=Kt||0,Ft=(Ft||0)*st,[S,I].indexOf(bt)>=0?{x:Ft,y:Kt}:{x:Kt,y:Ft}}(qn,ye.rects,ut),it},{}),Ft=Kt[ye.placement],un=Ft.y;null!=ye.modifiersData.popperOffsets&&(ye.modifiersData.popperOffsets.x+=Ft.x,ye.modifiersData.popperOffsets.y+=un),ye.modifiersData[bt]=Kt}},gr={name:"popperOffsets",enabled:!0,phase:"read",fn:function wu(_e){var ye=_e.state;ye.modifiersData[_e.name]=Ks({reference:ye.rects.reference,element:ye.rects.popper,strategy:"absolute",placement:ye.placement})},data:{}},Xd={name:"preventOverflow",enabled:!0,phase:"main",fn:function tr(_e){var ye=_e.state,Ue=_e.options,bt=_e.name,st=Ue.mainAxis,ut=void 0===st||st,Kt=Ue.altAxis,Ft=void 0!==Kt&&Kt,Ut=Ue.tether,Gt=void 0===Ut||Ut,wr=Ue.tetherOffset,Hn=void 0===wr?0:wr,zn=Qs(ye,{boundary:Ue.boundary,rootBoundary:Ue.rootBoundary,padding:Ue.padding,altBoundary:Ue.altBoundary}),jn=Te(ye.placement),Un=ti(ye.placement),Vr=!Un,Jn=dt(jn),or=function qf(_e){return"x"===_e?"y":"x"}(Jn),In=ye.modifiersData.popperOffsets,vr=ye.rects.reference,Hr=ye.rects.popper,Wr="function"==typeof Hn?Hn(Object.assign({},ye.rects,{placement:ye.placement})):Hn,Dr="number"==typeof Wr?{mainAxis:Wr,altAxis:Wr}:Object.assign({mainAxis:0,altAxis:0},Wr),dr=ye.modifiersData.offset?ye.modifiersData.offset[ye.placement]:null,to={x:0,y:0};if(In){if(ut){var Yn,Is="y"===Jn?$:S,ri="y"===Jn?P:I,mn="y"===Jn?"height":"width",Er=In[Jn],Ic=Er+zn[Is],qa=Er-zn[ri],En=Gt?-Hr[mn]/2:0,Jd=Un===T?vr[mn]:Hr[mn],Or=Un===T?-Hr[mn]:-vr[mn],yo=ye.elements.arrow,Ya=Gt&&yo?kt(yo):{width:0,height:0},ks=ye.modifiersData["arrow#persistent"]?ye.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},no=ks[Is],Du=ks[ri],bo=Ot(0,vr[mn],Ya[mn]),ca=Vr?vr[mn]/2-En-bo-no-Dr.mainAxis:Jd-bo-no-Dr.mainAxis,kc=Vr?-vr[mn]/2+En+bo+Du+Dr.mainAxis:Or+bo+Du+Dr.mainAxis,xu=ye.elements.arrow&&Mt(ye.elements.arrow),fn=null!=(Yn=dr?.[Jn])?Yn:0,Qf=Er+kc-fn,mr=Ot(Gt?fe(Ic,Er+ca-fn-(xu?"y"===Jn?xu.clientTop||0:xu.clientLeft||0:0)):Ic,Er,Gt?ve(qa,Qf):qa);In[Jn]=mr,to[Jn]=mr-Er}if(Ft){var Os,da=In[or],Rc="y"===or?"height":"width",ha=da+zn["x"===Jn?$:S],ro=da-zn["x"===Jn?P:I],fa=-1!==[$,S].indexOf(jn),ms=null!=(Os=dr?.[or])?Os:0,Xa=fa?ha:da-vr[Rc]-Hr[Rc]-ms+Dr.altAxis,Zd=fa?da+vr[Rc]+Hr[Rc]-ms-Dr.altAxis:ro,Fl=Gt&&fa?function Jt(_e,ye,Ue){var bt=Ot(_e,ye,Ue);return bt>Ue?Ue:bt}(Xa,da,Zd):Ot(Gt?Xa:ha,da,Gt?Zd:ro);In[or]=Fl,to[or]=Fl-da}ye.modifiersData[bt]=to}},requiresIfExists:["offset"]};function Yf(_e,ye,Ue){void 0===Ue&&(Ue=!1);var bt=we(ye),st=we(ye)&&function Ga(_e){var ye=_e.getBoundingClientRect(),Ue=Ze(ye.width)/_e.offsetWidth||1,bt=Ze(ye.height)/_e.offsetHeight||1;return 1!==Ue||1!==bt}(ye),ut=Ge(ye),Kt=Qe(_e,st,Ue),Ft={scrollLeft:0,scrollTop:0},Ht={x:0,y:0};return(bt||!bt&&!Ue)&&(("body"!==ue(ye)||Si(ut))&&(Ft=function Kd(_e){return _e!==ge(_e)&&we(_e)?function gs(_e){return{scrollLeft:_e.scrollLeft,scrollTop:_e.scrollTop}}(_e):vo(_e)}(ye)),we(ye)?((Ht=Qe(ye,!0)).x+=ye.clientLeft,Ht.y+=ye.clientTop):ut&&(Ht.x=oa(ut))),{x:Kt.left+Ft.scrollLeft-Ht.x,y:Kt.top+Ft.scrollTop-Ht.y,width:Kt.width,height:Kt.height}}function Ac(_e){var ye=new Map,Ue=new Set,bt=[];function st(ut){Ue.add(ut.name),[].concat(ut.requires||[],ut.requiresIfExists||[]).forEach(function(Ft){if(!Ue.has(Ft)){var Ht=ye.get(Ft);Ht&&st(Ht)}}),bt.push(ut)}return _e.forEach(function(ut){ye.set(ut.name,ut)}),_e.forEach(function(ut){Ue.has(ut.name)||st(ut)}),bt}function Ho(_e){var ye;return function(){return ye||(ye=new Promise(function(Ue){Promise.resolve().then(function(){ye=void 0,Ue(_e())})})),ye}}var eo={placement:"bottom",modifiers:[],strategy:"absolute"};function Qd(){for(var _e=arguments.length,ye=new Array(_e),Ue=0;Ue<_e;Ue++)ye[Ue]=arguments[Ue];return!ye.some(function(bt){return!(bt&&"function"==typeof bt.getBoundingClientRect)})}function Xi(_e){void 0===_e&&(_e={});var Ue=_e.defaultModifiers,bt=void 0===Ue?[]:Ue,st=_e.defaultOptions,ut=void 0===st?eo:st;return function(Ft,Ht,un){void 0===un&&(un=ut);var it={placement:"bottom",orderedModifiers:[],options:Object.assign({},eo,ut),modifiersData:{},elements:{reference:Ft,popper:Ht},attributes:{},styles:{}},qn=[],Ut=!1,Gt={state:it,setOptions:function(jn){var Un="function"==typeof jn?jn(it.options):jn;Hn(),it.options=Object.assign({},ut,it.options,Un),it.scrollParents={reference:ie(Ft)?aa(Ft):Ft.contextElement?aa(Ft.contextElement):[],popper:aa(Ht)};var Vr=function ni(_e){var ye=Ac(_e);return Q.reduce(function(Ue,bt){return Ue.concat(ye.filter(function(st){return st.phase===bt}))},[])}(function Tc(_e){var ye=_e.reduce(function(Ue,bt){var st=Ue[bt.name];return Ue[bt.name]=st?Object.assign({},st,bt,{options:Object.assign({},st.options,bt.options),data:Object.assign({},st.data,bt.data)}):bt,Ue},{});return Object.keys(ye).map(function(Ue){return ye[Ue]})}([].concat(bt,it.options.modifiers)));return it.orderedModifiers=Vr.filter(function(dr){return dr.enabled}),function wr(){it.orderedModifiers.forEach(function(zn){var Un=zn.options,Jn=zn.effect;if("function"==typeof Jn){var or=Jn({state:it,name:zn.name,instance:Gt,options:void 0===Un?{}:Un});qn.push(or||function(){})}})}(),Gt.update()},forceUpdate:function(){if(!Ut){var jn=it.elements,Un=jn.reference,Vr=jn.popper;if(Qd(Un,Vr)){it.rects={reference:Yf(Un,Mt(Vr),"fixed"===it.options.strategy),popper:kt(Vr)},it.reset=!1,it.placement=it.options.placement,it.orderedModifiers.forEach(function(dr){return it.modifiersData[dr.name]=Object.assign({},dr.data)});for(var or=0;or<it.orderedModifiers.length;or++)if(!0!==it.reset){var In=it.orderedModifiers[or],vr=In.fn,Hr=In.options;"function"==typeof vr&&(it=vr({state:it,options:void 0===Hr?{}:Hr,name:In.name,instance:Gt})||it)}else it.reset=!1,or=-1}}},update:Ho(function(){return new Promise(function(zn){Gt.forceUpdate(),zn(it)})}),destroy:function(){Hn(),Ut=!0}};if(!Qd(Ft,Ht))return Gt;function Hn(){qn.forEach(function(zn){return zn()}),qn=[]}return Gt.setOptions(un).then(function(zn){!Ut&&un.onFirstUpdate&&un.onFirstUpdate(zn)}),Gt}}var $a=Xi(),ua=Xi({defaultModifiers:[Xs,gr,ps,ze,Ua,Yd,Xd,$r,yu]}),ur=Xi({defaultModifiers:[Xs,gr,ps,ze]})},5423:Oe=>{"use strict";Oe.exports=function Re(G){return null===G||"object"!=typeof G||null!=G.toJSON?JSON.stringify(G):Array.isArray(G)?"["+G.reduce(($,P,I)=>$+(0===I?"":",")+Re(void 0===P||"symbol"==typeof P?null:P),"")+"]":"{"+Object.keys(G).sort().reduce(($,P,I)=>void 0===G[P]||"symbol"==typeof G[P]?$:$+(0===$.length?"":",")+Re(P)+":"+Re(G[P]),"")+"}"}},2405:function(Oe,Re,G){var $;Oe.exports=($=G(5982),function(P){var I={};function S(N){if(I[N])return I[N].exports;var C=I[N]={i:N,l:!1,exports:{}};return P[N].call(C.exports,C,C.exports,S),C.l=!0,C.exports}return S.m=P,S.c=I,S.i=function(N){return N},S.d=function(N,C,T){S.o(N,C)||Object.defineProperty(N,C,{configurable:!1,enumerable:!0,get:T})},S.n=function(N){var C=N&&N.__esModule?function(){return N.default}:function(){return N};return S.d(C,"a",C),C},S.o=function(N,C){return Object.prototype.hasOwnProperty.call(N,C)},S.p="",S(S.s=7)}([function(P,I){P.exports=$},function(P,I,S){"use strict";var N=S(0).FDLayoutConstants;function C(){}for(var T in N)C[T]=N[T];C.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,C.DEFAULT_RADIAL_SEPARATION=N.DEFAULT_EDGE_LENGTH,C.DEFAULT_COMPONENT_SEPERATION=60,C.TILE=!0,C.TILING_PADDING_VERTICAL=10,C.TILING_PADDING_HORIZONTAL=10,C.TREE_REDUCTION_ON_INCREMENTAL=!1,P.exports=C},function(P,I,S){"use strict";var N=S(0).FDLayoutEdge;function C(M,H,F){N.call(this,M,H,F)}for(var T in C.prototype=Object.create(N.prototype),N)C[T]=N[T];P.exports=C},function(P,I,S){"use strict";var N=S(0).LGraph;function C(M,H,F){N.call(this,M,H,F)}for(var T in C.prototype=Object.create(N.prototype),N)C[T]=N[T];P.exports=C},function(P,I,S){"use strict";var N=S(0).LGraphManager;function C(M){N.call(this,M)}for(var T in C.prototype=Object.create(N.prototype),N)C[T]=N[T];P.exports=C},function(P,I,S){"use strict";var N=S(0).FDLayoutNode,C=S(0).IMath;function T(H,F,X,ee){N.call(this,H,F,X,ee)}for(var M in T.prototype=Object.create(N.prototype),N)T[M]=N[M];T.prototype.move=function(){var H=this.graphManager.getLayout();this.displacementX=H.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY=H.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren,Math.abs(this.displacementX)>H.coolingFactor*H.maxNodeDisplacement&&(this.displacementX=H.coolingFactor*H.maxNodeDisplacement*C.sign(this.displacementX)),Math.abs(this.displacementY)>H.coolingFactor*H.maxNodeDisplacement&&(this.displacementY=H.coolingFactor*H.maxNodeDisplacement*C.sign(this.displacementY)),null==this.child||0==this.child.getNodes().length?this.moveBy(this.displacementX,this.displacementY):this.propogateDisplacementToChildren(this.displacementX,this.displacementY),H.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},T.prototype.propogateDisplacementToChildren=function(H,F){for(var ee,X=this.getChild().getNodes(),z=0;z<X.length;z++)null==(ee=X[z]).getChild()?(ee.moveBy(H,F),ee.displacementX+=H,ee.displacementY+=F):ee.propogateDisplacementToChildren(H,F)},T.prototype.setPred1=function(H){this.pred1=H},T.prototype.getPred1=function(){return pred1},T.prototype.getPred2=function(){return pred2},T.prototype.setNext=function(H){this.next=H},T.prototype.getNext=function(){return next},T.prototype.setProcessed=function(H){this.processed=H},T.prototype.isProcessed=function(){return processed},P.exports=T},function(P,I,S){"use strict";var N=S(0).FDLayout,C=S(4),T=S(3),M=S(5),H=S(2),F=S(1),X=S(0).FDLayoutConstants,ee=S(0).LayoutConstants,z=S(0).Point,q=S(0).PointD,oe=S(0).Layout,K=S(0).Integer,le=S(0).IGeometry,J=S(0).LGraph,Ie=S(0).Transform;function ce(){N.call(this),this.toBeTiled={}}for(var U in ce.prototype=Object.create(N.prototype),N)ce[U]=N[U];ce.prototype.newGraphManager=function(){var L=new C(this);return this.graphManager=L,L},ce.prototype.newGraph=function(L){return new T(null,this.graphManager,L)},ce.prototype.newNode=function(L){return new M(this.graphManager,L)},ce.prototype.newEdge=function(L){return new H(null,null,L)},ce.prototype.initParameters=function(){N.prototype.initParameters.call(this,arguments),this.isSubLayout||(this.idealEdgeLength=F.DEFAULT_EDGE_LENGTH<10?10:F.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=F.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.springConstant=X.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=X.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=X.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=X.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=X.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=X.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1,this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/X.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=X.CONVERGENCE_CHECK_PERIOD/this.maxIterations,this.coolingAdjuster=1)},ce.prototype.layout=function(){return ee.DEFAULT_CREATE_BENDS_AS_NEEDED&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},ce.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(F.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var B=new Set(this.getAllNodes()),Q=this.nodesWithGravity.filter(function(ie){return B.has(ie)});this.graphManager.setAllNodesToApplyGravitation(Q)}}else{var L=this.getFlatForest();L.length>0?this.positionNodesRadially(L):(this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation(),B=new Set(this.getAllNodes()),Q=this.nodesWithGravity.filter(function(ue){return B.has(ue)}),this.graphManager.setAllNodesToApplyGravitation(Q),this.positionNodesRandomly())}return this.initSpringEmbedder(),this.runSpringEmbedder(),!0},ce.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}if(this.totalIterations%X.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged()){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}this.coolingCycle++,0==this.layoutQuality?this.coolingAdjuster=this.coolingCycle:1==this.layoutQuality&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var L=new Set(this.getAllNodes()),B=this.nodesWithGravity.filter(function(ge){return L.has(ge)});this.graphManager.setAllNodesToApplyGravitation(B),this.graphManager.updateBounds(),this.updateGrid(),this.coolingFactor=X.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),this.coolingFactor=X.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var Q=!this.isTreeGrowing&&!this.isGrowthFinished,ue=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(Q,ue),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},ce.prototype.getPositionsData=function(){for(var L=this.graphManager.getAllNodes(),B={},Q=0;Q<L.length;Q++){var ue=L[Q].rect,ge=L[Q].id;B[ge]={id:ge,x:ue.getCenterX(),y:ue.getCenterY(),w:ue.width,h:ue.height}}return B},ce.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var L=!1;if("during"===X.ANIMATE)this.emit("layoutstarted");else{for(;!L;)L=this.tick();this.graphManager.updateBounds()}},ce.prototype.calculateNodesToApplyGravitationTo=function(){var B,ge,L=[],Q=this.graphManager.getGraphs(),ue=Q.length;for(ge=0;ge<ue;ge++)(B=Q[ge]).updateConnected(),B.isConnected||(L=L.concat(B.getNodes()));return L},ce.prototype.createBendpoints=function(){var L=[];L=L.concat(this.graphManager.getAllEdges());var Q,B=new Set;for(Q=0;Q<L.length;Q++){var ue=L[Q];if(!B.has(ue)){var ge=ue.getSource(),ie=ue.getTarget();if(ge==ie)ue.getBendpoints().push(new q),ue.getBendpoints().push(new q),this.createDummyNodesForBendpoints(ue),B.add(ue);else{var we=[];if(we=(we=we.concat(ge.getEdgeListToNode(ie))).concat(ie.getEdgeListToNode(ge)),!B.has(we[0])){var Pe;if(we.length>1)for(Pe=0;Pe<we.length;Pe++){var me=we[Pe];me.getBendpoints().push(new q),this.createDummyNodesForBendpoints(me)}we.forEach(function(We){B.add(We)})}}}if(B.size==L.length)break}},ce.prototype.positionNodesRadially=function(L){for(var B=new z(0,0),Q=Math.ceil(Math.sqrt(L.length)),ue=0,ge=0,ie=0,we=new q(0,0),Pe=0;Pe<L.length;Pe++){Pe%Q==0&&(ie=0,ge=ue,0!=Pe&&(ge+=F.DEFAULT_COMPONENT_SEPERATION),ue=0);var me=L[Pe],We=oe.findCenterOfTree(me);B.x=ie,B.y=ge,(we=ce.radialLayout(me,We,B)).y>ue&&(ue=Math.floor(we.y)),ie=Math.floor(we.x+F.DEFAULT_COMPONENT_SEPERATION)}this.transform(new q(ee.WORLD_CENTER_X-we.x/2,ee.WORLD_CENTER_Y-we.y/2))},ce.radialLayout=function(L,B,Q){var ue=Math.max(this.maxDiagonalInTree(L),F.DEFAULT_RADIAL_SEPARATION);ce.branchRadialLayout(B,null,0,359,0,ue);var ge=J.calculateBounds(L),ie=new Ie;ie.setDeviceOrgX(ge.getMinX()),ie.setDeviceOrgY(ge.getMinY()),ie.setWorldOrgX(Q.x),ie.setWorldOrgY(Q.y);for(var we=0;we<L.length;we++)L[we].transform(ie);var me=new q(ge.getMaxX(),ge.getMaxY());return ie.inverseTransformPoint(me)},ce.branchRadialLayout=function(L,B,Q,ue,ge,ie){var we=(ue-Q+1)/2;we<0&&(we+=180);var me=(we+Q)%360*le.TWO_PI/360,ze=(Math.cos(me),ge*Math.cos(me)),Te=ge*Math.sin(me);L.setCenter(ze,Te);var ve=[],fe=(ve=ve.concat(L.getEdges())).length;null!=B&&fe--;for(var Ne,Ze=0,$e=ve.length,Qe=L.getEdgesBetween(B);Qe.length>1;){var kt=Qe[0];Qe.splice(0,1);var ft=ve.indexOf(kt);ft>=0&&ve.splice(ft,1),$e--,fe--}Ne=null!=B?(ve.indexOf(Qe[0])+1)%$e:0;for(var ot=Math.abs(ue-Q)/fe,lt=Ne;Ze!=fe;lt=++lt%$e){var Ge=ve[lt].getOtherEnd(L);if(Ge!=B){var De=(Q+Ze*ot)%360;ce.branchRadialLayout(Ge,L,De,(De+ot)%360,ge+ie,ie),Ze++}}},ce.maxDiagonalInTree=function(L){for(var B=K.MIN_VALUE,Q=0;Q<L.length;Q++){var ge=L[Q].getDiagonal();ge>B&&(B=ge)}return B},ce.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},ce.prototype.groupZeroDegreeMembers=function(){var L=this,B={};this.memberGroups={},this.idToDummyNode={};for(var Q=[],ue=this.graphManager.getAllNodes(),ge=0;ge<ue.length;ge++){var we=(ie=ue[ge]).getParent();0===this.getNodeDegreeWithChildren(ie)&&(null==we.id||!this.getToBeTiled(we))&&Q.push(ie)}for(ge=0;ge<Q.length;ge++){var ie,Pe=(ie=Q[ge]).getParent().id;typeof B[Pe]>"u"&&(B[Pe]=[]),B[Pe]=B[Pe].concat(ie)}Object.keys(B).forEach(function(me){if(B[me].length>1){var We="DummyCompound_"+me;L.memberGroups[We]=B[me];var ze=B[me][0].getParent(),Te=new M(L.graphManager);Te.id=We,Te.paddingLeft=ze.paddingLeft||0,Te.paddingRight=ze.paddingRight||0,Te.paddingBottom=ze.paddingBottom||0,Te.paddingTop=ze.paddingTop||0,L.idToDummyNode[We]=Te;var ve=L.getGraphManager().add(L.newGraph(),Te),fe=ze.getChild();fe.add(Te);for(var Ze=0;Ze<B[me].length;Ze++){var $e=B[me][Ze];fe.remove($e),ve.add($e)}}})},ce.prototype.clearCompounds=function(){var L={},B={};this.performDFSOnCompounds();for(var Q=0;Q<this.compoundOrder.length;Q++)B[this.compoundOrder[Q].id]=this.compoundOrder[Q],L[this.compoundOrder[Q].id]=[].concat(this.compoundOrder[Q].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[Q].getChild()),this.compoundOrder[Q].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(L,B)},ce.prototype.clearZeroDegreeMembers=function(){var L=this,B=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(Q){var ue=L.idToDummyNode[Q];B[Q]=L.tileNodes(L.memberGroups[Q],ue.paddingLeft+ue.paddingRight),ue.rect.width=B[Q].width,ue.rect.height=B[Q].height})},ce.prototype.repopulateCompounds=function(){for(var L=this.compoundOrder.length-1;L>=0;L--){var B=this.compoundOrder[L];this.adjustLocations(this.tiledMemberPack[B.id],B.rect.x,B.rect.y,B.paddingLeft,B.paddingTop)}},ce.prototype.repopulateZeroDegreeMembers=function(){var L=this,B=this.tiledZeroDegreePack;Object.keys(B).forEach(function(Q){var ue=L.idToDummyNode[Q];L.adjustLocations(B[Q],ue.rect.x,ue.rect.y,ue.paddingLeft,ue.paddingTop)})},ce.prototype.getToBeTiled=function(L){var B=L.id;if(null!=this.toBeTiled[B])return this.toBeTiled[B];var Q=L.getChild();if(null==Q)return this.toBeTiled[B]=!1,!1;for(var ue=Q.getNodes(),ge=0;ge<ue.length;ge++){var ie=ue[ge];if(this.getNodeDegree(ie)>0)return this.toBeTiled[B]=!1,!1;if(null!=ie.getChild()){if(!this.getToBeTiled(ie))return this.toBeTiled[B]=!1,!1}else this.toBeTiled[ie.id]=!1}return this.toBeTiled[B]=!0,!0},ce.prototype.getNodeDegree=function(L){for(var Q=L.getEdges(),ue=0,ge=0;ge<Q.length;ge++){var ie=Q[ge];ie.getSource().id!==ie.getTarget().id&&(ue+=1)}return ue},ce.prototype.getNodeDegreeWithChildren=function(L){var B=this.getNodeDegree(L);if(null==L.getChild())return B;for(var Q=L.getChild().getNodes(),ue=0;ue<Q.length;ue++)B+=this.getNodeDegreeWithChildren(Q[ue]);return B},ce.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},ce.prototype.fillCompexOrderByDFS=function(L){for(var B=0;B<L.length;B++){var Q=L[B];null!=Q.getChild()&&this.fillCompexOrderByDFS(Q.getChild().getNodes()),this.getToBeTiled(Q)&&this.compoundOrder.push(Q)}},ce.prototype.adjustLocations=function(L,B,Q,ue,ge){Q+=ge;for(var ie=B+=ue,we=0;we<L.rows.length;we++){var Pe=L.rows[we];B=ie;for(var me=0,We=0;We<Pe.length;We++){var ze=Pe[We];ze.rect.x=B,ze.rect.y=Q,B+=ze.rect.width+L.horizontalPadding,ze.rect.height>me&&(me=ze.rect.height)}Q+=me+L.verticalPadding}},ce.prototype.tileCompoundMembers=function(L,B){var Q=this;this.tiledMemberPack=[],Object.keys(L).forEach(function(ue){var ge=B[ue];Q.tiledMemberPack[ue]=Q.tileNodes(L[ue],ge.paddingLeft+ge.paddingRight),ge.rect.width=Q.tiledMemberPack[ue].width,ge.rect.height=Q.tiledMemberPack[ue].height})},ce.prototype.tileNodes=function(L,B){var ge={rows:[],rowWidth:[],rowHeight:[],width:0,height:B,verticalPadding:F.TILING_PADDING_VERTICAL,horizontalPadding:F.TILING_PADDING_HORIZONTAL};L.sort(function(Pe,me){return Pe.rect.width*Pe.rect.height>me.rect.width*me.rect.height?-1:Pe.rect.width*Pe.rect.height<me.rect.width*me.rect.height?1:0});for(var ie=0;ie<L.length;ie++){var we=L[ie];0==ge.rows.length?this.insertNodeToRow(ge,we,0,B):this.canAddHorizontal(ge,we.rect.width,we.rect.height)?this.insertNodeToRow(ge,we,this.getShortestRowIndex(ge),B):this.insertNodeToRow(ge,we,ge.rows.length,B),this.shiftToLastRow(ge)}return ge},ce.prototype.insertNodeToRow=function(L,B,Q,ue){var ge=ue;Q==L.rows.length&&(L.rows.push([]),L.rowWidth.push(ge),L.rowHeight.push(0));var we=L.rowWidth[Q]+B.rect.width;L.rows[Q].length>0&&(we+=L.horizontalPadding),L.rowWidth[Q]=we,L.width<we&&(L.width=we);var Pe=B.rect.height;Q>0&&(Pe+=L.verticalPadding);var me=0;Pe>L.rowHeight[Q]&&(me=L.rowHeight[Q],L.rowHeight[Q]=Pe,me=L.rowHeight[Q]-me),L.height+=me,L.rows[Q].push(B)},ce.prototype.getShortestRowIndex=function(L){for(var B=-1,Q=Number.MAX_VALUE,ue=0;ue<L.rows.length;ue++)L.rowWidth[ue]<Q&&(B=ue,Q=L.rowWidth[ue]);return B},ce.prototype.getLongestRowIndex=function(L){for(var B=-1,Q=Number.MIN_VALUE,ue=0;ue<L.rows.length;ue++)L.rowWidth[ue]>Q&&(B=ue,Q=L.rowWidth[ue]);return B},ce.prototype.canAddHorizontal=function(L,B,Q){var ue=this.getShortestRowIndex(L);if(ue<0)return!0;var ge=L.rowWidth[ue];if(ge+L.horizontalPadding+B<=L.width)return!0;var we,Pe,ie=0;return L.rowHeight[ue]<Q&&ue>0&&(ie=Q+L.verticalPadding-L.rowHeight[ue]),we=L.width-ge>=B+L.horizontalPadding?(L.height+ie)/(ge+B+L.horizontalPadding):(L.height+ie)/L.width,ie=Q+L.verticalPadding,(Pe=L.width<B?(L.height+ie)/B:(L.height+ie)/L.width)<1&&(Pe=1/Pe),we<1&&(we=1/we),we<Pe},ce.prototype.shiftToLastRow=function(L){var B=this.getLongestRowIndex(L),Q=L.rowWidth.length-1,ue=L.rows[B],ge=ue[ue.length-1],ie=ge.width+L.horizontalPadding;if(L.width-L.rowWidth[Q]>ie&&B!=Q){ue.splice(-1,1),L.rows[Q].push(ge),L.rowWidth[B]=L.rowWidth[B]-ie,L.rowWidth[Q]=L.rowWidth[Q]+ie,L.width=L.rowWidth[instance.getLongestRowIndex(L)];for(var we=Number.MIN_VALUE,Pe=0;Pe<ue.length;Pe++)ue[Pe].height>we&&(we=ue[Pe].height);B>0&&(we+=L.verticalPadding);var me=L.rowHeight[B]+L.rowHeight[Q];L.rowHeight[B]=we,L.rowHeight[Q]<ge.height+L.verticalPadding&&(L.rowHeight[Q]=ge.height+L.verticalPadding),L.height+=L.rowHeight[B]+L.rowHeight[Q]-me,this.shiftToLastRow(L)}},ce.prototype.tilingPreLayout=function(){F.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},ce.prototype.tilingPostLayout=function(){F.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},ce.prototype.reduceTrees=function(){for(var Q,L=[],B=!0;B;){var ue=this.graphManager.getAllNodes(),ge=[];B=!1;for(var ie=0;ie<ue.length;ie++)1==(Q=ue[ie]).getEdges().length&&!Q.getEdges()[0].isInterGraph&&null==Q.getChild()&&(ge.push([Q,Q.getEdges()[0],Q.getOwner()]),B=!0);if(1==B){for(var we=[],Pe=0;Pe<ge.length;Pe++)1==ge[Pe][0].getEdges().length&&(we.push(ge[Pe]),ge[Pe][0].getOwner().remove(ge[Pe][0]));L.push(we),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=L},ce.prototype.growTree=function(L){for(var ue,Q=L[L.length-1],ge=0;ge<Q.length;ge++)this.findPlaceforPrunedNode(ue=Q[ge]),ue[2].add(ue[0]),ue[2].add(ue[1],ue[1].source,ue[1].target);L.splice(L.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},ce.prototype.findPlaceforPrunedNode=function(L){var B,Q,ue=L[0],ge=(Q=ue==L[1].source?L[1].target:L[1].source).startX,ie=Q.finishX,we=Q.startY,Pe=Q.finishY,ve=[0,0,0,0];if(we>0)for(var fe=ge;fe<=ie;fe++)ve[0]+=this.grid[fe][we-1].length+this.grid[fe][we].length-1;if(ie<this.grid.length-1)for(fe=we;fe<=Pe;fe++)ve[1]+=this.grid[ie+1][fe].length+this.grid[ie][fe].length-1;if(Pe<this.grid[0].length-1)for(fe=ge;fe<=ie;fe++)ve[2]+=this.grid[fe][Pe+1].length+this.grid[fe][Pe].length-1;if(ge>0)for(fe=we;fe<=Pe;fe++)ve[3]+=this.grid[ge-1][fe].length+this.grid[ge][fe].length-1;for(var $e,Ne,Ze=K.MAX_VALUE,Qe=0;Qe<ve.length;Qe++)ve[Qe]<Ze?(Ze=ve[Qe],$e=1,Ne=Qe):ve[Qe]==Ze&&$e++;if(3==$e&&0==Ze)0==ve[0]&&0==ve[1]&&0==ve[2]?B=1:0==ve[0]&&0==ve[1]&&0==ve[3]?B=0:0==ve[0]&&0==ve[2]&&0==ve[3]?B=3:0==ve[1]&&0==ve[2]&&0==ve[3]&&(B=2);else if(2==$e&&0==Ze){var kt=Math.floor(2*Math.random());B=0==ve[0]&&0==ve[1]?0==kt?0:1:0==ve[0]&&0==ve[2]?0==kt?0:2:0==ve[0]&&0==ve[3]?0==kt?0:3:0==ve[1]&&0==ve[2]?0==kt?1:2:0==ve[1]&&0==ve[3]?0==kt?1:3:0==kt?2:3}else B=4==$e&&0==Ze?kt=Math.floor(4*Math.random()):Ne;0==B?ue.setCenter(Q.getCenterX(),Q.getCenterY()-Q.getHeight()/2-X.DEFAULT_EDGE_LENGTH-ue.getHeight()/2):1==B?ue.setCenter(Q.getCenterX()+Q.getWidth()/2+X.DEFAULT_EDGE_LENGTH+ue.getWidth()/2,Q.getCenterY()):2==B?ue.setCenter(Q.getCenterX(),Q.getCenterY()+Q.getHeight()/2+X.DEFAULT_EDGE_LENGTH+ue.getHeight()/2):ue.setCenter(Q.getCenterX()-Q.getWidth()/2-X.DEFAULT_EDGE_LENGTH-ue.getWidth()/2,Q.getCenterY())},P.exports=ce},function(P,I,S){"use strict";var N={};N.layoutBase=S(0),N.CoSEConstants=S(1),N.CoSEEdge=S(2),N.CoSEGraph=S(3),N.CoSEGraphManager=S(4),N.CoSELayout=S(6),N.CoSENode=S(5),P.exports=N}]))},5791:function(Oe,Re,G){var $;Oe.exports=($=G(2405),function(P){var I={};function S(N){if(I[N])return I[N].exports;var C=I[N]={i:N,l:!1,exports:{}};return P[N].call(C.exports,C,C.exports,S),C.l=!0,C.exports}return S.m=P,S.c=I,S.i=function(N){return N},S.d=function(N,C,T){S.o(N,C)||Object.defineProperty(N,C,{configurable:!1,enumerable:!0,get:T})},S.n=function(N){var C=N&&N.__esModule?function(){return N.default}:function(){return N};return S.d(C,"a",C),C},S.o=function(N,C){return Object.prototype.hasOwnProperty.call(N,C)},S.p="",S(S.s=1)}([function(P,I){P.exports=$},function(P,I,S){"use strict";var N=S(0).layoutBase.LayoutConstants,C=S(0).layoutBase.FDLayoutConstants,T=S(0).CoSEConstants,M=S(0).CoSELayout,H=S(0).CoSENode,F=S(0).layoutBase.PointD,X=S(0).layoutBase.DimensionD,ee={ready:function(){},stop:function(){},quality:"default",nodeDimensionsIncludeLabels:!1,refresh:30,fit:!0,padding:10,randomize:!0,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",animationDuration:500,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.5};function q(le){this.options=function z(le,J){var Ie={};for(var ce in le)Ie[ce]=le[ce];for(var ce in J)Ie[ce]=J[ce];return Ie}(ee,le),oe(this.options)}var oe=function(J){null!=J.nodeRepulsion&&(T.DEFAULT_REPULSION_STRENGTH=C.DEFAULT_REPULSION_STRENGTH=J.nodeRepulsion),null!=J.idealEdgeLength&&(T.DEFAULT_EDGE_LENGTH=C.DEFAULT_EDGE_LENGTH=J.idealEdgeLength),null!=J.edgeElasticity&&(T.DEFAULT_SPRING_STRENGTH=C.DEFAULT_SPRING_STRENGTH=J.edgeElasticity),null!=J.nestingFactor&&(T.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=C.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=J.nestingFactor),null!=J.gravity&&(T.DEFAULT_GRAVITY_STRENGTH=C.DEFAULT_GRAVITY_STRENGTH=J.gravity),null!=J.numIter&&(T.MAX_ITERATIONS=C.MAX_ITERATIONS=J.numIter),null!=J.gravityRange&&(T.DEFAULT_GRAVITY_RANGE_FACTOR=C.DEFAULT_GRAVITY_RANGE_FACTOR=J.gravityRange),null!=J.gravityCompound&&(T.DEFAULT_COMPOUND_GRAVITY_STRENGTH=C.DEFAULT_COMPOUND_GRAVITY_STRENGTH=J.gravityCompound),null!=J.gravityRangeCompound&&(T.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=C.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=J.gravityRangeCompound),null!=J.initialEnergyOnIncremental&&(T.DEFAULT_COOLING_FACTOR_INCREMENTAL=C.DEFAULT_COOLING_FACTOR_INCREMENTAL=J.initialEnergyOnIncremental),N.QUALITY="draft"==J.quality?0:"proof"==J.quality?2:1,T.NODE_DIMENSIONS_INCLUDE_LABELS=C.NODE_DIMENSIONS_INCLUDE_LABELS=N.NODE_DIMENSIONS_INCLUDE_LABELS=J.nodeDimensionsIncludeLabels,T.DEFAULT_INCREMENTAL=C.DEFAULT_INCREMENTAL=N.DEFAULT_INCREMENTAL=!J.randomize,T.ANIMATE=C.ANIMATE=N.ANIMATE=J.animate,T.TILE=J.tile,T.TILING_PADDING_VERTICAL="function"==typeof J.tilingPaddingVertical?J.tilingPaddingVertical.call():J.tilingPaddingVertical,T.TILING_PADDING_HORIZONTAL="function"==typeof J.tilingPaddingHorizontal?J.tilingPaddingHorizontal.call():J.tilingPaddingHorizontal};q.prototype.run=function(){var le,J,Ie=this.options,U=(this.idToLNode={},this.layout=new M),L=this;L.stopped=!1,this.cy=this.options.cy,this.cy.trigger({type:"layoutstart",layout:this});var B=U.newGraphManager();this.gm=B;var Q=this.options.eles.nodes(),ue=this.options.eles.edges();this.root=B.addRoot(),this.processChildrenList(this.root,this.getTopMostNodes(Q),U);for(var ge=0;ge<ue.length;ge++){var ie=ue[ge],we=this.idToLNode[ie.data("source")],Pe=this.idToLNode[ie.data("target")];we!==Pe&&0==we.getEdgesBetween(Pe).length&&(B.add(U.newEdge(),we,Pe).id=ie.id())}var We=function(ve,fe){"number"==typeof ve&&(ve=fe);var Ze=ve.data("id"),$e=L.idToLNode[Ze];return{x:$e.getRect().getCenterX(),y:$e.getRect().getCenterY()}},ze=function Te(){for(var Ze,ve=function(){Ie.fit&&Ie.cy.fit(Ie.eles,Ie.padding),le||(le=!0,L.cy.one("layoutready",Ie.ready),L.cy.trigger({type:"layoutready",layout:L}))},fe=L.options.refresh,$e=0;$e<fe&&!Ze;$e++)Ze=L.stopped||L.layout.tick();if(Ze)return U.checkLayoutSuccess()&&!U.isSubLayout&&U.doPostLayout(),U.tilingPostLayout&&U.tilingPostLayout(),U.isLayoutFinished=!0,L.options.eles.nodes().positions(We),ve(),L.cy.one("layoutstop",L.options.stop),L.cy.trigger({type:"layoutstop",layout:L}),J&&cancelAnimationFrame(J),void(le=!1);var Ne=L.layout.getPositionsData();Ie.eles.nodes().positions(function(Qe,kt){if("number"==typeof Qe&&(Qe=kt),!Qe.isParent()){for(var ft=Qe.id(),ot=Ne[ft],lt=Qe;null==ot&&(ot=Ne[lt.data("parent")]||Ne["DummyCompound_"+lt.data("parent")],Ne[ft]=ot,null!=(lt=lt.parent()[0])););return null!=ot?{x:ot.x,y:ot.y}:{x:Qe.position("x"),y:Qe.position("y")}}}),ve(),J=requestAnimationFrame(Te)};return U.addListener("layoutstarted",function(){"during"===L.options.animate&&(J=requestAnimationFrame(ze))}),U.runLayout(),"during"!==this.options.animate&&(L.options.eles.nodes().not(":parent").layoutPositions(L,L.options,We),le=!1),this},q.prototype.getTopMostNodes=function(le){for(var J={},Ie=0;Ie<le.length;Ie++)J[le[Ie].id()]=!0;return le.filter(function(U,L){"number"==typeof U&&(U=L);for(var B=U.parent()[0];null!=B;){if(J[B.id()])return!1;B=B.parent()[0]}return!0})},q.prototype.processChildrenList=function(le,J,Ie){for(var ce=J.length,U=0;U<ce;U++){var Q,Pe,L=J[U],B=L.children(),ue=L.layoutDimensions({nodeDimensionsIncludeLabels:this.options.nodeDimensionsIncludeLabels});if((Q=null!=L.outerWidth()&&null!=L.outerHeight()?le.add(new H(Ie.graphManager,new F(L.position("x")-ue.w/2,L.position("y")-ue.h/2),new X(parseFloat(ue.w),parseFloat(ue.h)))):le.add(new H(this.graphManager))).id=L.data("id"),Q.paddingLeft=parseInt(L.css("padding")),Q.paddingTop=parseInt(L.css("padding")),Q.paddingRight=parseInt(L.css("padding")),Q.paddingBottom=parseInt(L.css("padding")),this.options.nodeDimensionsIncludeLabels&&L.isParent()){var ge=L.boundingBox({includeLabels:!0,includeNodes:!1}).w,ie=L.boundingBox({includeLabels:!0,includeNodes:!1}).h,we=L.css("text-halign");Q.labelWidth=ge,Q.labelHeight=ie,Q.labelPos=we}this.idToLNode[L.data("id")]=Q,isNaN(Q.rect.x)&&(Q.rect.x=0),isNaN(Q.rect.y)&&(Q.rect.y=0),null!=B&&B.length>0&&(Pe=Ie.getGraphManager().add(Ie.newGraph(),Q),this.processChildrenList(Pe,B,Ie))}},q.prototype.stop=function(){return this.stopped=!0,this};var K=function(J){J("layout","cose-bilkent",q)};typeof cytoscape<"u"&&K(cytoscape),P.exports=K}]))},1212:function(Oe){Oe.exports=function(Re){var G={};function $(P){if(G[P])return G[P].exports;var I=G[P]={i:P,l:!1,exports:{}};return Re[P].call(I.exports,I,I.exports,$),I.l=!0,I.exports}return $.m=Re,$.c=G,$.i=function(P){return P},$.d=function(P,I,S){$.o(P,I)||Object.defineProperty(P,I,{configurable:!1,enumerable:!0,get:S})},$.n=function(P){var I=P&&P.__esModule?function(){return P.default}:function(){return P};return $.d(I,"a",I),I},$.o=function(P,I){return Object.prototype.hasOwnProperty.call(P,I)},$.p="",$($.s=4)}([function(Re,G,$){"use strict";var P=$(2),I=$(1),S=$(3),N=S.removeEles,C=S.setStyles,T=S.createElement,M=S.getPixelRatio,H=S.getOffset;Re.exports=function(ee){var z=I({},P,ee),q=this,oe=q.container(),K=void 0,le={options:z,handlers:[],container:T({class:"cxtmenu"})},J=le.container,Ie=T(),ce=T({tag:"canvas"}),U=[],L=ce.getContext("2d"),B=100,Q=2*(B+z.activePadding),ue=void 0,ge=void 0;function we(Ge,De){ve.drawBg=[Ge,De]}function Pe(Ge,De){L.globalCompositeOperation="source-over",L.clearRect(0,0,Q,Q),L.fillStyle=z.fillColor;for(var Fe=2*Math.PI/U.length,ct=Math.PI/2,Mt=ct+Fe,dt=0;dt<U.length;dt++){var Ot=U[dt];Ot.fillColor&&(L.fillStyle=Ot.fillColor),L.beginPath(),L.moveTo(Ge+z.activePadding,Ge+z.activePadding),L.arc(Ge+z.activePadding,Ge+z.activePadding,Ge,2*Math.PI-ct,2*Math.PI-Mt,!0),L.closePath(),L.fill(),ct+=Fe,Mt+=Fe,L.fillStyle=z.fillColor}L.globalCompositeOperation="destination-out",L.strokeStyle="white",L.lineWidth=z.separatorWidth,Mt=(ct=Math.PI/2)+Fe;for(var Jt=0;Jt<U.length;Jt++){var Tt=Ge*Math.cos(ct),en=Ge*Math.sin(ct);L.beginPath(),L.moveTo(Ge+z.activePadding,Ge+z.activePadding),L.lineTo(Ge+z.activePadding+Tt,Ge+z.activePadding-en),L.closePath(),L.stroke(),ct+=Fe,Mt+=Fe}L.fillStyle="white",L.globalCompositeOperation="destination-out",L.beginPath(),L.arc(Ge+z.activePadding,Ge+z.activePadding,De+z.spotlightPadding,0,2*Math.PI,!0),L.closePath(),L.fill(),L.globalCompositeOperation="source-over"}function We(Ge,De,Fe,ct,Mt){var dt=2*Math.PI/U.length,Ot=Math.PI/2,Jt=Ot+dt;Ot+=dt*ue,Jt+=dt*ue,L.fillStyle=z.activeFillColor,L.strokeStyle="black",L.lineWidth=1,L.beginPath(),L.moveTo(Fe+z.activePadding,Fe+z.activePadding),L.arc(Fe+z.activePadding,Fe+z.activePadding,Fe+z.activePadding,2*Math.PI-Ot,2*Math.PI-Jt,!0),L.closePath(),L.fill(),L.fillStyle="white",L.globalCompositeOperation="destination-out";var Tt=Fe+z.activePadding+Ge/Fe*(Mt+z.spotlightPadding-z.indicatorSize/4),en=Fe+z.activePadding+De/Fe*(Mt+z.spotlightPadding-z.indicatorSize/4),on=Math.PI/4-ct;L.translate(Tt,en),L.rotate(on);var Vn=z.indicatorSize>Mt+z.spotlightPadding?Mt+z.spotlightPadding:z.indicatorSize;L.beginPath(),L.fillRect(-Vn/2,-Vn/2,Vn,Vn),L.closePath(),L.fill(),L.rotate(-on),L.translate(-Tt,-en),L.beginPath(),L.arc(Fe+z.activePadding,Fe+z.activePadding,Mt+z.spotlightPadding,0,2*Math.PI,!0),L.closePath(),L.fill(),L.globalCompositeOperation="source-over"}function ze(){var Ge=M(),De=Q,Fe=Q;ce.width=De*Ge,ce.height=Fe*Ge,ce.style.width=De+"px",ce.style.height=Fe+"px",L.setTransform(1,0,0,1,0,0),L.scale(Ge,Ge)}oe.insertBefore(J,oe.firstChild),J.appendChild(Ie),Ie.appendChild(ce),C(J,{position:"absolute",zIndex:z.zIndex,userSelect:"none",pointerEvents:"none"}),["mousedown","mousemove","mouseup","contextmenu"].forEach(function(Ge){J.addEventListener(Ge,function(De){return De.preventDefault(),!1})}),C(Ie,{display:"none",width:Q+"px",height:Q+"px",position:"absolute",zIndex:1,marginLeft:-z.activePadding+"px",marginTop:-z.activePadding+"px",userSelect:"none"}),ce.width=Q,ce.height=Q;var Te=!0,ve={},fe=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(Ge){return setTimeout(Ge,16)};ze(),function Ge(){ve.drawBg&&Pe.apply(null,ve.drawBg),ve.drawCommands&&We.apply(null,ve.drawCommands),ve={},Te&&fe(Ge)}();var $e=void 0,Ne=void 0,Qe=void 0,kt={on:function(De,Fe,ct){var Mt=ct;return"core"===Fe&&(Mt=function(Ot){if(Ot.cyTarget===q||Ot.target===q)return ct.apply(this,[Ot])}),le.handlers.push({events:De,selector:Fe,fn:Mt}),"core"===Fe?q.on(De,Mt):q.on(De,Fe,Mt),this}};function lt(){Te=!1,function ot(){for(var Ge=le.handlers,De=0;De<Ge.length;De++){var Fe=Ge[De];"core"===Fe.selector?q.off(Fe.events,Fe.fn):q.off(Fe.events,Fe.selector,Fe.fn)}window.removeEventListener("resize",ze)}(),J.remove()}return function ft(){var Fe,Ge=void 0,De=!1,ct=void 0,Mt=void 0,dt=void 0,Ot=void 0,Jt=void 0,cr=function(){Ge&&K.grabify(),ct&&q.userZoomingEnabled(!0),Mt&&q.userPanningEnabled(!0),dt&&q.boxSelectionEnabled(!0)};window.addEventListener("resize",ze),kt.on("resize",function(){ze()}).on(z.openMenuEvents,z.selector,function(lr){K=this;var $r=this,ti=this===q;if(De&&(Ie.style.display="none",De=!1,cr()),"function"==typeof z.commands){var ds=z.commands(K);ds.then?ds.then(function(fs){U=fs,hs()}):(U=ds,hs())}else U=z.commands,hs();function hs(){if(U&&0!==U.length){ct=q.userZoomingEnabled(),q.userZoomingEnabled(!1),Mt=q.userPanningEnabled(),q.userPanningEnabled(!1),dt=q.boxSelectionEnabled(),q.boxSelectionEnabled(!1),(Ge=K.grabbable&&K.grabbable())&&K.ungrabify();var fs=void 0,Yt=void 0,Pn=void 0;!ti&&$r&&$r.isNode instanceof Function&&$r.isNode()&&!$r.isParent()&&!z.atMouse?(fs=$r.renderedPosition(),Yt=$r.renderedOuterWidth(),$r.renderedOuterHeight(),Pn=Yt/2,Pn=!z.adaptativeNodeSpotlightRadius&&z.minSpotlightRadius?Math.max(Pn,z.minSpotlightRadius):Pn,Pn=!z.adaptativeNodeSpotlightRadius&&z.maxSpotlightRadius?Math.min(Pn,z.maxSpotlightRadius):Pn):(fs=lr.renderedPosition||lr.cyRenderedPosition,Pn=(Yt=1)/2,Pn=z.minSpotlightRadius?Math.max(Pn,z.minSpotlightRadius):Pn,Pn=z.maxSpotlightRadius?Math.min(Pn,z.maxSpotlightRadius):Pn),ge=H(oe),$e=fs.x,Ne=fs.y,B=Yt/2+(z.menuRadius instanceof Function?z.menuRadius(K):Number(z.menuRadius)),Q=2*(B+z.activePadding),ze(),C(Ie,{width:Q+"px",height:Q+"px",display:"block",left:fs.x-B+"px",top:fs.y-B+"px"}),function ie(Ge,De){N(".cxtmenu-item",Ie);for(var Fe=2*Math.PI/U.length,ct=Math.PI/2,Mt=ct+Fe,dt=0;dt<U.length;dt++){var Ot=U[dt],Jt=(ct+Mt)/2,Tt=(Ge+De)/2*Math.cos(Jt),en=(Ge+De)/2*Math.sin(Jt),on=1*Math.abs((Ge-De)*Math.cos(Jt)),Vn=1*Math.abs((Ge-De)*Math.sin(Jt));on=Math.max(on,Vn);var cr=T({class:"cxtmenu-item"});C(cr,{color:z.itemColor,cursor:"default",display:"table","text-align":"center",position:"absolute","text-shadow":"-1px -1px 2px "+z.itemTextShadowColor+", 1px -1px 2px "+z.itemTextShadowColor+", -1px 1px 2px "+z.itemTextShadowColor+", 1px 1px 1px "+z.itemTextShadowColor,left:"50%",top:"50%","min-height":on+"px",width:on+"px",height:on+"px",marginLeft:Tt-on/2+"px",marginTop:-en-on/2+"px"});var lr=T({class:"cxtmenu-content"});Ot.content instanceof HTMLElement?lr.appendChild(Ot.content):lr.innerHTML=Ot.content,C(lr,{width:on+"px",height:on+"px","vertical-align":"middle",display:"table-cell"}),C(lr,Ot.contentStyle||{}),(!0===Ot.disabled||!1===Ot.enabled)&&lr.setAttribute("class","cxtmenu-content cxtmenu-disabled"),Ie.appendChild(cr),cr.appendChild(lr),ct+=Fe,Mt+=Fe}}(B,Pn),we(B,Pn),ue=void 0,De=!0,Ot=lr}}}).on("cxtdrag tapdrag",z.selector,Fe=function($r){if(De){$r.preventDefault();var ti=$r.originalEvent,ds=ti.touches&&ti.touches.length>0,hs=(ds?ti.touches[0].pageX:ti.pageX)-window.pageXOffset,fs=(ds?ti.touches[0].pageY:ti.pageY)-window.pageYOffset;ue=void 0;var Yt=hs-ge.left-$e,ps=fs-ge.top-Ne;0===Yt&&(Yt=.01);var Pn=Math.sqrt(Yt*Yt+ps*ps),Xs=Math.acos((ps*ps-Pn*Pn-Yt*Yt)/(-2*Pn*Yt)),sa=void 0;if(K&&K.isNode instanceof Function&&K.isNode()&&!K.isParent()&&!z.atMouse?(sa=K.renderedOuterWidth(),Qe=sa/2,Qe=!z.adaptativeNodeSpotlightRadius&&z.minSpotlightRadius?Math.max(Qe,z.minSpotlightRadius):Qe,Qe=!z.adaptativeNodeSpotlightRadius&&z.maxSpotlightRadius?Math.min(Qe,z.maxSpotlightRadius):Qe):(Qe=(sa=1)/2,Qe=z.minSpotlightRadius?Math.max(Qe,z.minSpotlightRadius):Qe,Qe=z.maxSpotlightRadius?Math.min(Qe,z.maxSpotlightRadius):Qe),B=sa/2+(z.menuRadius instanceof Function?z.menuRadius(K):Number(z.menuRadius)),Pn<Qe+z.spotlightPadding||"number"==typeof z.outsideMenuCancel&&Pn>B+z.activePadding+z.outsideMenuCancel)return void we(B,Qe);we(B,Qe);var Pl=Yt*B/Pn,vu=ps*B/Pn;ps>0&&(Xs=Math.PI+Math.abs(Xs-Math.PI));for(var Va=2*Math.PI/U.length,vo=Math.PI/2,oa=vo+Va,Ll=0;Ll<U.length;Ll++){var Ha=U[Ll],Si=vo<=Xs&&Xs<=oa||vo<=Xs+2*Math.PI&&Xs+2*Math.PI<=oa;if((!0===Ha.disabled||!1===Ha.enabled)&&(Si=!1),Si){ue=Ll;break}vo+=Va,oa+=Va}!function me(Ge,De,Fe,ct,Mt){ve.drawCommands=[Ge,De,Fe,ct,Mt]}(Pl,vu,B,Xs,Qe)}}).on("tapdrag",Fe).on("mousemove",function(){if(void 0!==ue){var lr=U[ue].hover;lr&&(Jt!==ue&&lr.apply(K,[K,Ot]),Jt=ue)}}).on("cxttapend tapend",function(){if(Ie.style.display="none",void 0!==ue){var lr=U[ue].select;lr&&(lr.apply(K,[K,Ot]),ue=void 0)}Jt=void 0,De=!1,cr()})}(),{destroy:function(){lt()}}}},function(Re,G,$){"use strict";Re.exports=null!=Object.assign?Object.assign.bind(Object):function(P){for(var I=arguments.length,S=Array(I>1?I-1:0),N=1;N<I;N++)S[N-1]=arguments[N];return S.filter(function(C){return null!=C}).forEach(function(C){Object.keys(C).forEach(function(T){return P[T]=C[T]})}),P}},function(Re,G,$){"use strict";Re.exports={menuRadius:function(S){return 100},selector:"node",commands:[],fillColor:"rgba(0, 0, 0, 0.75)",activeFillColor:"rgba(1, 105, 217, 0.75)",activePadding:20,indicatorSize:24,separatorWidth:3,spotlightPadding:4,adaptativeNodeSpotlightRadius:!1,minSpotlightRadius:24,maxSpotlightRadius:38,openMenuEvents:"cxttapstart taphold",itemColor:"white",itemTextShadowColor:"transparent",zIndex:9999,atMouse:!1,outsideMenuCancel:!1}},function(Re,G,$){"use strict";var I=function(M,H){for(var F=Object.keys(H),X=0,ee=F.length;X<ee;X++)M.style[F[X]]=H[F[X]]};Re.exports={removeEles:function(M){for(var F=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).querySelectorAll(M),X=0;X<F.length;X++){var ee=F[X];ee.parentNode.removeChild(ee)}},setStyles:I,createElement:function(M){M=M||{};var H=document.createElement(M.tag||"div");return H.className=M.class||"",M.style&&I(H,M.style),H},getPixelRatio:function(){return window.devicePixelRatio||1},getOffset:function(M){var H=M.getBoundingClientRect();return{left:H.left+document.body.scrollLeft+parseFloat(getComputedStyle(document.body)["padding-left"])+parseFloat(getComputedStyle(document.body)["border-left-width"]),top:H.top+document.body.scrollTop+parseFloat(getComputedStyle(document.body)["padding-top"])+parseFloat(getComputedStyle(document.body)["border-top-width"])}}}},function(Re,G,$){"use strict";var P=$(0),I=function(N){N&&N("core","cxtmenu",P)};typeof cytoscape<"u"&&I(cytoscape),Re.exports=I}])},3811:function(Oe,Re,G){var $;Oe.exports=($=G(7352),function(P){var I={};function S(N){if(I[N])return I[N].exports;var C=I[N]={i:N,l:!1,exports:{}};return P[N].call(C.exports,C,C.exports,S),C.l=!0,C.exports}return S.m=P,S.c=I,S.i=function(N){return N},S.d=function(N,C,T){S.o(N,C)||Object.defineProperty(N,C,{configurable:!1,enumerable:!0,get:T})},S.n=function(N){var C=N&&N.__esModule?function(){return N.default}:function(){return N};return S.d(C,"a",C),C},S.o=function(N,C){return Object.prototype.hasOwnProperty.call(N,C)},S.p="",S(S.s=7)}([function(P,I,S){"use strict";P.exports=null!=Object.assign?Object.assign.bind(Object):function(N){for(var C=arguments.length,T=Array(C>1?C-1:0),M=1;M<C;M++)T[M-1]=arguments[M];return T.forEach(function(H){null!=H&&Object.keys(H).forEach(function(F){return N[F]=H[F]})}),N}},function(P,I,S){"use strict";var C=S(5).getBoundingBox;P.exports={getRef:function T(M,H){return{getBoundingClientRect:function(){return C(M,H)}}}}},function(P,I,S){"use strict";var N=S(0),T=S(1).getRef,H=S(6).getContent,F={},ee=S(8).createPopper;P.exports={getPopper:function z(q,oe){var K=T(q,oe),le=H(q,oe.content),J=N({},F,oe.popper);return ee(K,le,J)}}},function(P,I,S){"use strict";var N=S(0),T=S(2).getPopper,H=S(1).getRef;function ee(K,le){var J=function(Q){return Q.isNode()?{w:Q.renderedWidth(),h:Q.renderedHeight()}:{w:3,h:3}},U=K.cy();return N({},{renderedDimensions:J,renderedPosition:function(Q){return Q.isNode()?function z(K,le){var J=K.renderedPosition(),Ie=le(K);return{x:J.x-Ie.w/2,y:J.y-Ie.h/2}}(Q,J):function q(K){var le=K.midpoint(),J=K.cy().pan(),Ie=K.cy().zoom();return{x:le.x*Ie+J.x,y:le.y*Ie+J.y}}(Q)},popper:{},cy:U},le)}function oe(K){K.length>1&&(console.warn("Popper.js Extension should only be used on one element."),console.warn("Ignoring all subsequent elements"))}P.exports={popper:function F(K){return oe(this),T(this[0],ee(this[0],K))},popperRef:function X(K){return oe(this),H(this[0],ee(this[0],K))}}},function(P,I,S){"use strict";var N=S(0),T=S(2).getPopper,H=S(1).getRef;function ee(z,q){return N({},{boundingBox:{top:0,left:0,right:0,bottom:0,w:3,h:3},renderedDimensions:function(){return{w:3,h:3}},renderedPosition:function(){return{x:0,y:0}},popper:{},cy:z},q)}P.exports={popper:function F(z){return T(this,ee(this,z))},popperRef:function X(z){return H(this,ee(this,z))}}},function(P,I,S){"use strict";P.exports={getBoundingBox:function N(C,T){var M=T.renderedPosition,F=T.renderedDimensions,X=T.cy.container().getBoundingClientRect(),ee=F(C),z=M(C);return{top:z.y+X.top,left:z.x+X.left,right:z.x+ee.w+X.left,bottom:z.y+ee.h+X.top,width:ee.w,height:ee.h}}}},function(P,I,S){"use strict";P.exports={getContent:function N(C,T){var M;if("function"!=typeof T){if(T instanceof HTMLElement)return T;throw new Error("Can not create popper from 'target' with unknown type")}if(null===(M=T(C)))throw new Error("No 'target' specified to create popper");return M}}},function(P,I,S){"use strict";var N=S(4),C=S(3),T=function(H){H&&(H("core","popper",N.popper),H("collection","popper",C.popper),H("core","popperRef",N.popperRef),H("collection","popperRef",C.popperRef))};typeof cytoscape<"u"&&T(cytoscape),P.exports=T},function(P,I){P.exports=$}]))},6864:(Oe,Re,G)=>{"use strict";var $=G(406),P=G(5203),I=G(8817),S=G(4793),N=G(4152);function C(u){return u&&"object"==typeof u&&"default"in u?u:{default:u}}var T=C($),M=C(P),H=C(I),F=C(S),X=C(N);function ee(u){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(u)}function z(u,o){if(!(u instanceof o))throw new TypeError("Cannot call a class as a function")}function q(u,o){for(var l=0;l<o.length;l++){var d=o[l];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(u,d.key,d)}}function oe(u,o,l){return o&&q(u.prototype,o),l&&q(u,l),Object.defineProperty(u,"prototype",{writable:!1}),u}function K(u,o,l){return o in u?Object.defineProperty(u,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):u[o]=l,u}function le(u,o){return function J(u){if(Array.isArray(u))return u}(u)||function Ie(u,o){var l=null==u?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(null!=l){var g,v,d=[],h=!0,p=!1;try{for(l=l.call(u);!(h=(g=l.next()).done)&&(d.push(g.value),!o||d.length!==o);h=!0);}catch(b){p=!0,v=b}finally{try{!h&&null!=l.return&&l.return()}finally{if(p)throw v}}return d}}(u,o)||function ce(u,o){if(u){if("string"==typeof u)return U(u,o);var l=Object.prototype.toString.call(u).slice(8,-1);if("Object"===l&&u.constructor&&(l=u.constructor.name),"Map"===l||"Set"===l)return Array.from(u);if("Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return U(u,o)}}(u,o)||function L(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(u,o){(null==o||o>u.length)&&(o=u.length);for(var l=0,d=new Array(o);l<o;l++)d[l]=u[l];return d}var B=typeof window>"u"?null:window,Q=B?B.navigator:null,ue=ee(""),ge=ee({}),ie=ee(function(){}),we=typeof HTMLElement>"u"?"undefined":ee(HTMLElement),Pe=function(o){return o&&o.instanceString&&We(o.instanceString)?o.instanceString():null},me=function(o){return null!=o&&ee(o)==ue},We=function(o){return null!=o&&ee(o)===ie},ze=function(o){return!Ne(o)&&(Array.isArray?Array.isArray(o):null!=o&&o instanceof Array)},Te=function(o){return null!=o&&ee(o)===ge&&!ze(o)&&o.constructor===Object},fe=function(o){return null!=o&&ee(o)===ee(1)&&!isNaN(o)},$e=function(o){if("undefined"!==we)return null!=o&&o instanceof HTMLElement},Ne=function(o){return Qe(o)||kt(o)},Qe=function(o){return"collection"===Pe(o)&&o._private.single},kt=function(o){return"collection"===Pe(o)&&!o._private.single},ft=function(o){return"core"===Pe(o)},ot=function(o){return"stylesheet"===Pe(o)},Ge=function(o){return null==o||!(""!==o&&!o.match(/^\s+$/))},ct=function(o){return function(o){return null!=o&&ee(o)===ge}(o)&&We(o.then)},dt=function(o,l){l||(l=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var p=[],g=0;g<arguments.length;g++)p.push(arguments[g]);return p.join("$")});var d=function h(){var v,p=this,g=arguments,b=l.apply(p,g),y=h.cache;return(v=y[b])||(v=y[b]=o.apply(p,g)),v};return d.cache={},d},Ot=dt(function(u){return u.replace(/([A-Z])/g,function(o){return"-"+o.toLowerCase()})}),Jt=dt(function(u){return u.replace(/(-\w)/g,function(o){return o[1].toUpperCase()})}),Tt=dt(function(u,o){return u+o[0].toUpperCase()+o.substring(1)},function(u,o){return u+"$"+o}),en=function(o){return Ge(o)?o:o.charAt(0).toUpperCase()+o.substring(1)},on="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",Vn="rgb[a]?\\(("+on+"[%]?)\\s*,\\s*("+on+"[%]?)\\s*,\\s*("+on+"[%]?)(?:\\s*,\\s*("+on+"))?\\)",cr="rgb[a]?\\((?:"+on+"[%]?)\\s*,\\s*(?:"+on+"[%]?)\\s*,\\s*(?:"+on+"[%]?)(?:\\s*,\\s*(?:"+on+"))?\\)",lr="hsl[a]?\\(("+on+")\\s*,\\s*("+on+"[%])\\s*,\\s*("+on+"[%])(?:\\s*,\\s*("+on+"))?\\)",$r="hsl[a]?\\((?:"+on+")\\s*,\\s*(?:"+on+"[%])\\s*,\\s*(?:"+on+"[%])(?:\\s*,\\s*(?:"+on+"))?\\)",hs=function(o,l){return o<l?-1:o>l?1:0},Yt=null!=Object.assign?Object.assign.bind(Object):function(u){for(var o=arguments,l=1;l<o.length;l++){var d=o[l];if(null!=d)for(var h=Object.keys(d),p=0;p<h.length;p++){var g=h[p];u[g]=d[g]}}return u},Pl={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},vu=function(o){for(var l=o.map,d=o.keys,h=d.length,p=0;p<h;p++){var g=d[p];if(Te(g))throw Error("Tried to set map with object key");p<d.length-1?(null==l[g]&&(l[g]={}),l=l[g]):l[g]=o.value}},Va=function(o){for(var l=o.map,d=o.keys,h=d.length,p=0;p<h;p++){var g=d[p];if(Te(g))throw Error("Tried to get map with object key");if(null==(l=l[g]))return l}return l},vo=B?B.performance:null,oa=vo&&vo.now?function(){return vo.now()}:function(){return Date.now()},Ll=function(){if(B){if(B.requestAnimationFrame)return function(u){B.requestAnimationFrame(u)};if(B.mozRequestAnimationFrame)return function(u){B.mozRequestAnimationFrame(u)};if(B.webkitRequestAnimationFrame)return function(u){B.webkitRequestAnimationFrame(u)};if(B.msRequestAnimationFrame)return function(u){B.msRequestAnimationFrame(u)}}return function(u){u&&setTimeout(function(){u(oa())},1e3/60)}}(),Ha=function(o){return Ll(o)},Si=oa,Bo=9261,aa=65599,Vo=5381,Sc=function(o){for(var h,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bo,d=l;!(h=o.next()).done;)d=d*aa+h.value|0;return d},za=function(o){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bo;return l*aa+o|0},ja=function(o){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vo;return(l<<5)+l+o|0},Ks=function(o){return 2097152*o[0]+o[1]},Qs=function(o,l){return[za(o[0],l[0]),ja(o[1],l[1])]},la=function(o,l){var d={value:0,done:!1},h=0,p=o.length;return Sc({next:function(){return h<p?d.value=o.charCodeAt(h++):d.done=!0,d}},l)},qd=function(){return Yd(arguments)},Yd=function(o){for(var l,d=0;d<o.length;d++){var h=o[d];l=0===d?la(h):la(h,l)}return l},_c=!0,Mc=null!=console.warn,Wf=null!=console.trace,yu=Number.MAX_SAFE_INTEGER||9007199254740991,Js=function(){return!0},bu=function(){return!1},Ua=function(){return 0},wu=function(){},gr=function(o){throw new Error(o)},qf=function(o){if(void 0===o)return _c;_c=!!o},tr=function(o){qf()&&(Mc?console.warn(o):(console.log(o),Wf&&console.trace()))},gs=function(o){return null==o?o:ze(o)?o.slice():Te(o)?function(o){return Yt({},o)}(o):o},Ga=function(o,l){for(l=o="";o++<36;l+=51*o&52?(15^o?8^Math.random()*(20^o?16:4):4).toString(16):"-");return l},Yf={},Ac=function(){return Yf},ni=function(o){var l=Object.keys(o);return function(d){for(var h={},p=0;p<l.length;p++){var g=l[p],v=d?.[g];h[g]=void 0===v?o[g]:v}return h}},Ho=function(o,l,d){for(var h=o.length-1;h>=0&&(o[h]!==l||(o.splice(h,1),!d));h--);},Tc=function(o){o.splice(0,o.length)},Zs=function(o,l,d){return d&&(l=Tt(d,l)),o[l]},eo=function(o,l,d,h){d&&(l=Tt(d,l)),o[l]=h},Xi=typeof Map<"u"?Map:function(){function u(){z(this,u),this._obj={}}return oe(u,[{key:"set",value:function(l,d){return this._obj[l]=d,this}},{key:"delete",value:function(l){return this._obj[l]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(l){return void 0!==this._obj[l]}},{key:"get",value:function(l){return this._obj[l]}}]),u}(),Xf=function(){function u(o){if(z(this,u),this._obj=Object.create(null),this.size=0,null!=o){var l;l=null!=o.instanceString&&o.instanceString()===this.instanceString()?o.toArray():o;for(var d=0;d<l.length;d++)this.add(l[d])}}return oe(u,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(l){var d=this._obj;1!==d[l]&&(d[l]=1,this.size++)}},{key:"delete",value:function(l){var d=this._obj;1===d[l]&&(d[l]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(l){return 1===this._obj[l]}},{key:"toArray",value:function(){var l=this;return Object.keys(this._obj).filter(function(d){return l.has(d)})}},{key:"forEach",value:function(l,d){return this.toArray().forEach(l,d)}}]),u}(),ua="undefined"!==(typeof Set>"u"?"undefined":ee(Set))?Set:Xf,Wa=function(o,l){var d=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==o&&void 0!==l&&ft(o)){var h=l.group;if(null==h&&(h=l.data&&null!=l.data.source&&null!=l.data.target?"edges":"nodes"),"nodes"===h||"edges"===h){this.length=1,this[0]=this;var p=this._private={cy:o,single:!0,data:l.data||{},position:l.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:h,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!l.selected,selectable:void 0===l.selectable||!!l.selectable,locked:!!l.locked,grabbed:!1,grabbable:void 0===l.grabbable||!!l.grabbable,pannable:void 0===l.pannable?"edges"===h:!!l.pannable,active:!1,classes:new ua,animation:{current:[],queue:[]},rscratch:{},scratch:l.scratch||{},edges:[],children:[],parent:l.parent&&l.parent.isNode()?l.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==p.position.x&&(p.position.x=0),null==p.position.y&&(p.position.y=0),l.renderedPosition){var g=l.renderedPosition,v=o.pan(),b=o.zoom();p.position={x:(g.x-v.x)/b,y:(g.y-v.y)/b}}var y=[];ze(l.classes)?y=l.classes:me(l.classes)&&(y=l.classes.split(/\s+/));for(var D=0,x=y.length;D<x;D++){var _=y[D];!_||""===_||p.classes.add(_)}this.createEmitter();var k=l.style||l.css;k&&(tr("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(k)),(void 0===d||d)&&this.restore()}else gr("An element must be of type `nodes` or `edges`; you specified `"+h+"`")}else gr("An element must have a core reference and parameters set")},ur=function(o){return o={bfs:o.bfs||!o.dfs,dfs:o.dfs||!o.bfs},function(d,h,p){var g;Te(d)&&!Ne(d)&&(d=(g=d).roots||g.root,h=g.visit,p=g.directed),p=2!==arguments.length||We(h)?p:h,h=We(h)?h:function(){};for(var V,v=this._private.cy,b=d=me(d)?this.filter(d):d,y=[],D=[],x={},_={},k={},O=0,W=this.byGroup(),Y=W.nodes,te=W.edges,ne=0;ne<b.length;ne++){var se=b[ne],Ee=se.id();se.isNode()&&(y.unshift(se),o.bfs&&(k[Ee]=!0,D.push(se)),_[Ee]=0)}for(var Ce=function(){var Le=o.bfs?y.shift():y.pop(),Se=Le.id();if(o.dfs){if(k[Se])return"continue";k[Se]=!0,D.push(Le)}var at,qe=_[Se],Be=x[Se],je=null!=Be?Be.source():null,Ke=null!=Be?Be.target():null,tt=null==Be?void 0:Le.same(je)?Ke[0]:je[0];if(!0===(at=h(Le,Be,tt,O++,qe)))return V=Le,"break";if(!1===at)return"break";for(var et=Le.connectedEdges().filter(function(mt){return(!p||mt.source().same(Le))&&te.has(mt)}),Je=0;Je<et.length;Je++){var wt=et[Je],xt=wt.connectedNodes().filter(function(mt){return!mt.same(Le)&&Y.has(mt)}),yt=xt.id();0!==xt.length&&!k[yt]&&(y.push(xt=xt[0]),o.bfs&&(k[yt]=!0,D.push(xt)),x[yt]=wt,_[yt]=_[Se]+1)}};0!==y.length;){var ae=Ce();if("continue"!==ae&&"break"===ae)break}for(var be=v.collection(),de=0;de<D.length;de++){var Ae=D[de],Me=x[Ae.id()];null!=Me&&be.push(Me),be.push(Ae)}return{path:v.collection(be),found:v.collection(V)}}},_e={breadthFirstSearch:ur({bfs:!0}),depthFirstSearch:ur({dfs:!0})};_e.bfs=_e.breadthFirstSearch,_e.dfs=_e.depthFirstSearch;var ye=ni({root:null,weight:function(o){return 1},directed:!1}),Ue={dijkstra:function(o){if(!Te(o)){var l=arguments;o={root:l[0],weight:l[1],directed:l[2]}}var d=ye(o),h=d.root,p=d.weight,g=d.directed,v=this,b=p,y=me(h)?this.filter(h)[0]:h[0],D={},x={},_={},k=this.byGroup(),O=k.nodes,V=k.edges;V.unmergeBy(function(qe){return qe.isLoop()});for(var W=function(Be){return D[Be.id()]},Y=function(Be,je){D[Be.id()]=je,te.updateItem(Be)},te=new M.default(function(qe,Be){return W(qe)-W(Be)}),ne=0;ne<O.length;ne++){var se=O[ne];D[se.id()]=se.same(y)?0:1/0,te.push(se)}for(var Ee=function(Be,je){for(var at,Ke=(g?Be.edgesTo(je):Be.edgesWith(je)).intersect(V),tt=1/0,et=0;et<Ke.length;et++){var Je=Ke[et],wt=b(Je);(wt<tt||!at)&&(tt=wt,at=Je)}return{edge:at,dist:tt}};te.size()>0;){var Ce=te.pop(),ae=W(Ce),be=Ce.id();if(_[be]=ae,ae!==1/0)for(var de=Ce.neighborhood().intersect(O),Ae=0;Ae<de.length;Ae++){var Me=de[Ae],pe=Me.id(),Le=Ee(Ce,Me),Se=ae+Le.dist;Se<W(Me)&&(Y(Me,Se),x[pe]={node:Ce,edge:Le.edge})}}return{distanceTo:function(Be){var je=me(Be)?O.filter(Be)[0]:Be[0];return _[je.id()]},pathTo:function(Be){var je=me(Be)?O.filter(Be)[0]:Be[0],Ke=[],tt=je,at=tt.id();if(je.length>0)for(Ke.unshift(je);x[at];){var et=x[at];Ke.unshift(et.edge),Ke.unshift(et.node),at=(tt=et.node).id()}return v.spawn(Ke)}}}},bt={kruskal:function(o){o=o||function(ne){return 1};for(var l=this.byGroup(),d=l.nodes,h=l.edges,p=d.length,g=new Array(p),v=d,b=function(se){for(var Ee=0;Ee<g.length;Ee++)if(g[Ee].has(se))return Ee},y=0;y<p;y++)g[y]=this.spawn(d[y]);for(var D=h.sort(function(ne,se){return o(ne)-o(se)}),x=0;x<D.length;x++){var _=D[x],k=_.source()[0],O=_.target()[0],V=b(k),W=b(O),Y=g[V],te=g[W];V!==W&&(v.merge(_),Y.merge(te),g.splice(W,1))}return v}},st=ni({root:null,goal:null,weight:function(o){return 1},heuristic:function(o){return 0},directed:!1}),ut={aStar:function(o){var l=this.cy(),d=st(o),h=d.root,p=d.goal,g=d.heuristic,v=d.directed,b=d.weight;h=l.collection(h)[0],p=l.collection(p)[0];var ne,se,y=h.id(),D=p.id(),x={},_={},k={},O=new M.default(function(at,et){return _[at.id()]-_[et.id()]}),V=new ua,W={},Y={},te=function(et,Je){O.push(et),V.add(Je)};te(h,y),x[y]=0,_[y]=g(h);for(var ae=0;O.size()>0;){if(se=(ne=O.pop()).id(),V.delete(se),ae++,se===D){for(var be=[],de=p,Ae=D,Me=Y[Ae];be.unshift(de),null!=Me&&be.unshift(Me),null!=(de=W[Ae]);)Me=Y[Ae=de.id()];return{found:!0,distance:x[se],path:this.spawn(be),steps:ae}}k[se]=!0;for(var pe=ne._private.edges,Le=0;Le<pe.length;Le++){var Se=pe[Le];if(this.hasElementWithId(Se.id())&&(!v||Se.data("source")===se)){var qe=Se.source(),Be=Se.target(),je=qe.id()!==se?qe:Be,Ke=je.id();if(this.hasElementWithId(Ke)&&!k[Ke]){var tt=x[se]+b(Se);if(!V.has(Ke)){x[Ke]=tt,_[Ke]=tt+g(je),te(je,Ke),W[Ke]=ne,Y[Ke]=Se;continue}tt<x[Ke]&&(x[Ke]=tt,_[Ke]=tt+g(je),W[Ke]=ne,Y[Ke]=Se)}}}}return{found:!1,distance:void 0,path:void 0,steps:ae}}},Kt=ni({weight:function(o){return 1},directed:!1}),Ft={floydWarshall:function(o){for(var l=this.cy(),d=Kt(o),p=d.directed,g=d.weight,v=this.byGroup(),b=v.nodes,y=v.edges,D=b.length,x=D*D,_=function(wt){return b.indexOf(wt)},k=function(wt){return b[wt]},O=new Array(x),V=0;V<x;V++){var W=V%D;O[V]=(V-W)/D===W?0:1/0}for(var te=new Array(x),ne=new Array(x),se=0;se<y.length;se++){var Ee=y[se],Ce=Ee.source()[0],ae=Ee.target()[0];if(Ce!==ae){var be=_(Ce),de=_(ae),Ae=be*D+de,Me=g(Ee);if(O[Ae]>Me&&(O[Ae]=Me,te[Ae]=de,ne[Ae]=Ee),!p){var pe=de*D+be;!p&&O[pe]>Me&&(O[pe]=Me,te[pe]=be,ne[pe]=Ee)}}}for(var Le=0;Le<D;Le++)for(var Se=0;Se<D;Se++)for(var qe=Se*D+Le,Be=0;Be<D;Be++){var je=Se*D+Be,Ke=Le*D+Be;O[qe]+O[Ke]<O[je]&&(O[je]=O[qe]+O[Ke],te[je]=te[qe])}var at=function(wt){return _(function(wt){return(me(wt)?l.filter(wt):wt)[0]}(wt))};return{distance:function(wt,xt){var yt=at(wt),mt=at(xt);return O[yt*D+mt]},path:function(wt,xt){var yt=at(wt),mt=at(xt),Xe=k(yt);if(yt===mt)return Xe.collection();if(null==te[yt*D+mt])return l.collection();var Dt=l.collection();for(Dt.merge(Xe);yt!==mt;)Dt.merge(ne[yt*D+(yt=te[yt*D+mt])]),Dt.merge(k(yt));return Dt}}}},Ht=ni({weight:function(o){return 1},directed:!1,root:null}),un={bellmanFord:function(o){var l=this,d=Ht(o),p=d.directed,g=d.root,v=d.weight,b=this,y=this.cy(),D=this.byGroup(),x=D.edges,_=D.nodes,k=_.length,O=new Xi,V=!1,W=[];g=y.collection(g)[0],x.unmergeBy(function(Qt){return Qt.isLoop()});for(var Y=x.length,te=function(zt){var nn=O.get(zt.id());return nn||(nn={},O.set(zt.id(),nn)),nn},ne=function(zt){return(me(zt)?y.$(zt):zt)[0]},Ce=0;Ce<k;Ce++){var ae=_[Ce],be=te(ae);be.dist=ae.same(g)?0:1/0,be.pred=null,be.edge=null}for(var de=!1,Ae=function(zt,nn,Rn,Dn,cn,It){var he=Dn.dist+It;he<cn.dist&&!Rn.same(Dn.edge)&&(cn.dist=he,cn.pred=zt,cn.edge=Rn,de=!0)},Me=1;Me<k;Me++){de=!1;for(var pe=0;pe<Y;pe++){var Le=x[pe],Se=Le.source(),qe=Le.target(),Be=v(Le),je=te(Se),Ke=te(qe);Ae(Se,0,Le,je,Ke,Be),p||Ae(qe,0,Le,Ke,je,Be)}if(!de)break}if(de)for(var tt=[],at=0;at<Y;at++){var et=x[at],Je=et.source(),wt=et.target(),xt=v(et),yt=te(Je).dist,mt=te(wt).dist;if(yt+xt<mt||!p&&mt+xt<yt){if(V||(tr("Graph contains a negative weight cycle for Bellman-Ford"),V=!0),!1===o.findNegativeWeightCycles)break;var Xe=[];yt+xt<mt&&Xe.push(Je),!p&&mt+xt<yt&&Xe.push(wt);for(var Dt=Xe.length,Ct=0;Ct<Dt;Ct++){var Pt=Xe[Ct],Bt=[Pt];Bt.push(te(Pt).edge);for(var vn=te(Pt).pred;-1===Bt.indexOf(vn);)Bt.push(vn),Bt.push(te(vn).edge),vn=te(vn).pred;for(var Cn=(Bt=Bt.slice(Bt.indexOf(vn)))[0].id(),Vt=0,Lt=2;Lt<Bt.length;Lt+=2)Bt[Lt].id()<Cn&&(Cn=Bt[Lt].id(),Vt=Lt);(Bt=Bt.slice(Vt).concat(Bt.slice(0,Vt))).push(Bt[0]);var ln=Bt.map(function(Qt){return Qt.id()}).join(",");-1===tt.indexOf(ln)&&(W.push(b.spawn(Bt)),tt.push(ln))}}}return{distanceTo:function(zt){return te(ne(zt)).dist},pathTo:function(zt){for(var nn=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g,Rn=ne(zt),Dn=[],cn=Rn;;){if(null==cn)return l.spawn();var It=te(cn),he=It.edge,rt=It.pred;if(Dn.unshift(cn[0]),cn.same(nn)&&Dn.length>0)break;null!=he&&Dn.unshift(he),cn=rt}return b.spawn(Dn)},hasNegativeWeightCycle:V,negativeWeightCycles:W}}},it=Math.sqrt(2),qn=function(o,l,d){0===d.length&&gr("Karger-Stein must be run on a connected (sub)graph");for(var h=d[o],v=l[h[1]],b=l[h[2]],y=d,D=y.length-1;D>=0;D--){var x=y[D],_=x[1],k=x[2];(l[_]===v&&l[k]===b||l[_]===b&&l[k]===v)&&y.splice(D,1)}for(var O=0;O<y.length;O++){var V=y[O];V[1]===b?(y[O]=V.slice(),y[O][1]=v):V[2]===b&&(y[O]=V.slice(),y[O][2]=v)}for(var W=0;W<l.length;W++)l[W]===b&&(l[W]=v);return y},Ut=function(o,l,d,h){for(;d>h;){var p=Math.floor(Math.random()*l.length);l=qn(p,o,l),d--}return l},Gt={kargerStein:function(){var o=this,l=this.byGroup(),d=l.nodes,h=l.edges;h.unmergeBy(function(Ke){return Ke.isLoop()});var p=d.length,g=h.length,v=Math.ceil(Math.pow(Math.log(p)/Math.LN2,2)),b=Math.floor(p/it);if(!(p<2)){for(var y=[],D=0;D<g;D++){var x=h[D];y.push([D,d.indexOf(x.source()),d.indexOf(x.target())])}for(var _=1/0,k=[],O=new Array(p),V=new Array(p),W=new Array(p),Y=function(tt,at){for(var et=0;et<p;et++)at[et]=tt[et]},te=0;te<=v;te++){for(var ne=0;ne<p;ne++)V[ne]=ne;var se=Ut(V,y.slice(),p,b),Ee=se.slice();Y(V,W);var Ce=Ut(V,se,b,2),ae=Ut(W,Ee,b,2);Ce.length<=ae.length&&Ce.length<_?(_=Ce.length,k=Ce,Y(V,O)):ae.length<=Ce.length&&ae.length<_&&(_=ae.length,k=ae,Y(W,O))}for(var be=this.spawn(k.map(function(Ke){return h[Ke[0]]})),de=this.spawn(),Ae=this.spawn(),Me=O[0],pe=0;pe<O.length;pe++){var Se=d[pe];O[pe]===Me?de.merge(Se):Ae.merge(Se)}var qe=function(tt){var at=o.spawn();return tt.forEach(function(et){at.merge(et),et.connectedEdges().forEach(function(Je){o.contains(Je)&&!be.contains(Je)&&at.merge(Je)})}),at},Be=[qe(de),qe(Ae)];return{cut:be,components:Be,partition1:de,partition2:Ae}}gr("At least 2 nodes are required for Karger-Stein algorithm")}},Hn=function(o,l,d){return{x:o.x*l+d.x,y:o.y*l+d.y}},zn=function(o,l,d){return{x:(o.x-d.x)/l,y:(o.y-d.y)/l}},jn=function(o){return{x:o[0],y:o[1]}},vr=function(o,l){return Math.atan2(l,o)-Math.PI/2},Hr=Math.log2||function(u){return Math.log(u)/Math.log(2)},Wr=function(o){return o>0?1:o<0?-1:0},Dr=function(o,l){return Math.sqrt(dr(o,l))},dr=function(o,l){var d=l.x-o.x,h=l.y-o.y;return d*d+h*h},to=function(o){for(var l=o.length,d=0,h=0;h<l;h++)d+=o[h];for(var p=0;p<l;p++)o[p]=o[p]/d;return o},Yn=function(o,l,d,h){return(1-h)*(1-h)*o+2*(1-h)*h*l+h*h*d},Is=function(o,l,d,h){return{x:Yn(o.x,l.x,d.x,h),y:Yn(o.y,l.y,d.y,h)}},mn=function(o,l,d){return Math.max(o,Math.min(d,l))},Er=function(o){if(null==o)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=o.x1&&null!=o.y1){if(null!=o.x2&&null!=o.y2&&o.x2>=o.x1&&o.y2>=o.y1)return{x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2,w:o.x2-o.x1,h:o.y2-o.y1};if(null!=o.w&&null!=o.h&&o.w>=0&&o.h>=0)return{x1:o.x1,y1:o.y1,x2:o.x1+o.w,y2:o.y1+o.h,w:o.w,h:o.h}}},En=function(o,l){o.x1=Math.min(o.x1,l.x1),o.x2=Math.max(o.x2,l.x2),o.w=o.x2-o.x1,o.y1=Math.min(o.y1,l.y1),o.y2=Math.max(o.y2,l.y2),o.h=o.y2-o.y1},Jd=function(o,l,d){o.x1=Math.min(o.x1,l),o.x2=Math.max(o.x2,l),o.w=o.x2-o.x1,o.y1=Math.min(o.y1,d),o.y2=Math.max(o.y2,d),o.h=o.y2-o.y1},Or=function(o){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return o.x1-=l,o.x2+=l,o.y1-=l,o.y2+=l,o.w=o.x2-o.x1,o.h=o.y2-o.y1,o},yo=function(o){var d,h,p,g,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===l.length)d=h=p=g=l[0];else if(2===l.length)d=p=l[0],g=h=l[1];else if(4===l.length){var v=le(l,4);d=v[0],h=v[1],p=v[2],g=v[3]}return o.x1-=g,o.x2+=h,o.y1-=d,o.y2+=p,o.w=o.x2-o.x1,o.h=o.y2-o.y1,o},Ya=function(o,l){o.x1=l.x1,o.y1=l.y1,o.x2=l.x2,o.y2=l.y2,o.w=o.x2-o.x1,o.h=o.y2-o.y1},ks=function(o,l){return!(o.x1>l.x2||l.x1>o.x2||o.x2<l.x1||l.x2<o.x1||o.y2<l.y1||l.y2<o.y1||o.y1>l.y2||l.y1>o.y2)},no=function(o,l,d){return o.x1<=l&&l<=o.x2&&o.y1<=d&&d<=o.y2},Du=function(o,l){return no(o,l.x,l.y)},bo=function(o,l){return no(o,l.x1,l.y1)&&no(o,l.x2,l.y2)},ca=function(o,l,d,h,p,g,v){var x,b=Nc(p,g),y=p/2,D=g/2,k=h-D-v;if((x=ms(o,l,d,h,d-y+b-v,k,d+y-b+v,k,!1)).length>0)return x;var W=d+y+v;if((x=ms(o,l,d,h,W,h-D+b-v,W,h+D-b+v,!1)).length>0)return x;var Ee=h+D+v;if((x=ms(o,l,d,h,d-y+b-v,Ee,d+y-b+v,Ee,!1)).length>0)return x;var pe,be=d-y-v;if((x=ms(o,l,d,h,be,h-D+b-v,be,h+D-b+v,!1)).length>0)return x;var Le=d-y+b,Se=h-D+b;if((pe=ro(o,l,d,h,Le,Se,b+v)).length>0&&pe[0]<=Le&&pe[1]<=Se)return[pe[0],pe[1]];var qe=d+y-b,Be=h-D+b;if((pe=ro(o,l,d,h,qe,Be,b+v)).length>0&&pe[0]>=qe&&pe[1]<=Be)return[pe[0],pe[1]];var je=d+y-b,Ke=h+D-b;if((pe=ro(o,l,d,h,je,Ke,b+v)).length>0&&pe[0]>=je&&pe[1]>=Ke)return[pe[0],pe[1]];var tt=d-y+b,at=h+D-b;return(pe=ro(o,l,d,h,tt,at,b+v)).length>0&&pe[0]<=tt&&pe[1]>=at?[pe[0],pe[1]]:[]},kc=function(o,l,d,h,p,g,v){var b=v,y=Math.min(d,p),D=Math.max(d,p),x=Math.min(h,g),_=Math.max(h,g);return y-b<=o&&o<=D+b&&x-b<=l&&l<=_+b},xu=function(o,l,d,h,p,g,v,b,y){var D_x1=Math.min(d,v,p)-y,D_x2=Math.max(d,v,p)+y,D_y1=Math.min(h,b,g)-y,D_y2=Math.max(h,b,g)+y;return!(o<D_x1||o>D_x2||l<D_y1||l>D_y2)},Oc=function(o,l,d,h,p,g,v,b){var k=[];!function(o,l,d,h,p){var v,b,y,D,x,_,k,O;0===o&&(o=1e-5),y=-27*(h/=o)+(l/=o)*(9*(d/=o)-l*l*2),v=(b=(3*d-l*l)/9)*b*b+(y/=54)*y,p[1]=0,k=l/3,v>0?(x=(x=y+Math.sqrt(v))<0?-Math.pow(-x,1/3):Math.pow(x,1/3),_=(_=y-Math.sqrt(v))<0?-Math.pow(-_,1/3):Math.pow(_,1/3),p[0]=-k+x+_,p[4]=p[2]=-(k+=(x+_)/2),k=Math.sqrt(3)*(-_+x)/2,p[3]=k,p[5]=-k):(p[5]=p[3]=0,0===v?(O=y<0?-Math.pow(-y,1/3):Math.pow(y,1/3),p[0]=2*O-k,p[4]=p[2]=-(O+k)):(D=(b=-b)*b*b,D=Math.acos(y/Math.sqrt(D)),O=2*Math.sqrt(b),p[0]=-k+O*Math.cos(D/3),p[2]=-k+O*Math.cos((D+2*Math.PI)/3),p[4]=-k+O*Math.cos((D+4*Math.PI)/3)))}(1*d*d-4*d*p+2*d*v+4*p*p-4*p*v+v*v+h*h-4*h*g+2*h*b+4*g*g-4*g*b+b*b,9*d*p-3*d*d-3*d*v-6*p*p+3*p*v+9*h*g-3*h*h-3*h*b-6*g*g+3*g*b,3*d*d-6*d*p+d*v-d*o+2*p*p+2*p*o-v*o+3*h*h-6*h*g+h*b-h*l+2*g*g+2*g*l-b*l,1*d*p-d*d+d*o-p*o+h*g-h*h+h*l-g*l,k);for(var V=[],W=0;W<6;W+=2)Math.abs(k[W+1])<1e-7&&k[W]>=0&&k[W]<=1&&V.push(k[W]);V.push(1),V.push(0);for(var te,ne,se,Y=-1,Ee=0;Ee<V.length;Ee++)te=Math.pow(1-V[Ee],2)*d+2*(1-V[Ee])*V[Ee]*p+V[Ee]*V[Ee]*v,ne=Math.pow(1-V[Ee],2)*h+2*(1-V[Ee])*V[Ee]*g+V[Ee]*V[Ee]*b,se=Math.pow(te-o,2)+Math.pow(ne-l,2),Y>=0?se<Y&&(Y=se):Y=se;return Y},Qf=function(o,l,d,h,p,g){var v=[o-d,l-h],b=[p-d,g-h],y=b[0]*b[0]+b[1]*b[1],D=v[0]*v[0]+v[1]*v[1],x=v[0]*b[0]+v[1]*b[1],_=x*x/y;return x<0?D:_>y?(o-p)*(o-p)+(l-g)*(l-g):D-_},mr=function(o,l,d){for(var h,p,g,v,y=0,D=0;D<d.length/2;D++)if(p=d[2*D+1],D+1<d.length/2?(g=d[2*(D+1)],v=d[2*(D+1)+1]):(g=d[2*(D+1-d.length/2)],v=d[2*(D+1-d.length/2)+1]),(h=d[2*D])!=o||g!=o){if(!(h>=o&&o>=g||h<=o&&o<=g))continue;(o-h)/(g-h)*(v-p)+p>l&&y++}return y%2!=0},Os=function(o,l,d,h,p,g,v,b,y){var x,V,D=new Array(d.length);null!=b[0]?(x=Math.atan(b[1]/b[0]),b[0]<0?x+=Math.PI/2:x=-x-Math.PI/2):x=b;for(var _=Math.cos(-x),k=Math.sin(-x),O=0;O<D.length/2;O++)D[2*O]=g/2*(d[2*O]*_-d[2*O+1]*k),D[2*O+1]=v/2*(d[2*O+1]*_+d[2*O]*k),D[2*O]+=h,D[2*O+1]+=p;if(y>0){var W=da(D,-y);V=hr(W)}else V=D;return mr(o,l,V)},hr=function(o){for(var v,b,y,D,l=new Array(o.length/2),x=0;x<o.length/4;x++){x<o.length/4-1?(v=o[4*(x+1)],b=o[4*(x+1)+1],y=o[4*(x+1)+2],D=o[4*(x+1)+3]):(v=o[0],b=o[1],y=o[2],D=o[3]);var _=ms(o[4*x],o[4*x+1],o[4*x+2],o[4*x+3],v,b,y,D,!0);l[2*x]=_[0],l[2*x+1]=_[1]}return l},da=function(o,l){for(var h,p,g,v,d=new Array(2*o.length),b=0;b<o.length/2;b++){b<o.length/2-1?(g=o[2*(b+1)],v=o[2*(b+1)+1]):(g=o[0],v=o[1]);var y=v-(p=o[2*b+1]),D=-(g-(h=o[2*b])),x=Math.sqrt(y*y+D*D),_=y/x,k=D/x;d[4*b]=h+_*l,d[4*b+1]=p+k*l,d[4*b+2]=g+_*l,d[4*b+3]=v+k*l}return d},ha=function(o,l,d,h,p,g,v){return o-=p,l-=g,(o/=d/2+v)*o+(l/=h/2+v)*l<=1},ro=function(o,l,d,h,p,g,v){var b=[d-o,h-l],y=[o-p,l-g],D=b[0]*b[0]+b[1]*b[1],x=2*(y[0]*b[0]+y[1]*b[1]),k=x*x-4*D*(y[0]*y[0]+y[1]*y[1]-v*v);if(k<0)return[];var O=(-x+Math.sqrt(k))/(2*D),V=(-x-Math.sqrt(k))/(2*D),W=Math.min(O,V),Y=Math.max(O,V),te=[];if(W>=0&&W<=1&&te.push(W),Y>=0&&Y<=1&&te.push(Y),0===te.length)return[];var ne=te[0]*b[0]+o,se=te[0]*b[1]+l;return te.length>1?te[0]==te[1]?[ne,se]:[ne,se,te[1]*b[0]+o,te[1]*b[1]+l]:[ne,se]},fa=function(o,l,d){return l<=o&&o<=d||d<=o&&o<=l?o:o<=l&&l<=d||d<=l&&l<=o?l:d},ms=function(o,l,d,h,p,g,v,b,y){var D=o-p,x=d-o,_=v-p,k=l-g,O=h-l,V=b-g,W=_*k-V*D,Y=x*k-O*D,te=V*x-_*O;if(0!==te){var ne=W/te,se=Y/te;return-.001<=ne&&ne<=1.001&&-.001<=se&&se<=1.001||y?[o+ne*x,l+ne*O]:[]}return 0===W||0===Y?fa(o,d,v)===v?[v,b]:fa(o,d,p)===p?[p,g]:fa(p,v,d)===d?[d,h]:[]:[]},Xa=function(o,l,d,h,p,g,v,b){var D,k,y=[],x=new Array(d.length),_=!0;if(null==g&&(_=!1),_){for(var O=0;O<x.length/2;O++)x[2*O]=d[2*O]*g+h,x[2*O+1]=d[2*O+1]*v+p;if(b>0){var V=da(x,-b);k=hr(V)}else k=x}else k=d;for(var te,ne,se=0;se<k.length/2;se++)se<k.length/2-1?(te=k[2*(se+1)],ne=k[2*(se+1)+1]):(te=k[0],ne=k[1]),0!==(D=ms(o,l,h,p,k[2*se],k[2*se+1],te,ne)).length&&y.push(D[0],D[1]);return y},Fl=function(o,l,d){var h=[o[0]-l[0],o[1]-l[1]],p=Math.sqrt(h[0]*h[0]+h[1]*h[1]),g=(p-d)/p;return g<0&&(g=1e-5),[l[0]+g*h[0],l[1]+g*h[1]]},Bi=function(o,l){var d=Ka(o,l);return Eu(d)},Eu=function(o){for(var l,d,h=o.length/2,p=1/0,g=1/0,v=-1/0,b=-1/0,y=0;y<h;y++)l=o[2*y],d=o[2*y+1],p=Math.min(p,l),v=Math.max(v,l),g=Math.min(g,d),b=Math.max(b,d);for(var D=2/(v-p),x=2/(b-g),_=0;_<h;_++)l=o[2*_]=o[2*_]*D,d=o[2*_+1]=o[2*_+1]*x,p=Math.min(p,l),v=Math.max(v,l),g=Math.min(g,d),b=Math.max(b,d);if(g<-1)for(var k=0;k<h;k++)d=o[2*k+1]=o[2*k+1]+(-1-g);return o},Ka=function(o,l){var d=1/o*2*Math.PI,h=o%2==0?Math.PI/2+d/2:Math.PI/2;h+=l;for(var g,p=new Array(2*o),v=0;v<o;v++)g=v*d+h,p[2*v]=Math.cos(g),p[2*v+1]=Math.sin(-g);return p},Nc=function(o,l){return Math.min(o/4,l/4,8)},an=function(o,l){return Math.min(o/10,l/10,8)},Su=function(o,l){return{heightOffset:Math.min(15,.05*l),widthOffset:Math.min(100,.25*o),ctrlPtOffsetPct:.05}},Zf=ni({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(o){return 1}}),Pc={pageRank:function(o){for(var l=Zf(o),d=l.dampingFactor,h=l.precision,p=l.iterations,g=l.weight,v=this._private.cy,b=this.byGroup(),y=b.nodes,D=b.edges,x=y.length,k=D.length,O=new Array(x*x),V=new Array(x),W=(1-d)/x,Y=0;Y<x;Y++){for(var te=0;te<x;te++)O[Y*x+te]=0;V[Y]=0}for(var se=0;se<k;se++){var Ee=D[se],Ce=Ee.data("source"),ae=Ee.data("target");if(Ce!==ae){var be=y.indexOfId(Ce),de=y.indexOfId(ae),Ae=g(Ee);O[de*x+be]+=Ae,V[be]+=Ae}}for(var pe=1/x+W,Le=0;Le<x;Le++)if(0===V[Le])for(var Se=0;Se<x;Se++)O[Se*x+Le]=pe;else for(var Be=0;Be<x;Be++){var je=Be*x+Le;O[je]=O[je]/V[Le]+W}for(var at,Ke=new Array(x),tt=new Array(x),et=0;et<x;et++)Ke[et]=1;for(var Je=0;Je<p;Je++){for(var wt=0;wt<x;wt++)tt[wt]=0;for(var xt=0;xt<x;xt++)for(var yt=0;yt<x;yt++)tt[xt]+=O[xt*x+yt]*Ke[yt];to(tt),at=Ke,Ke=tt,tt=at;for(var Xe=0,Dt=0;Dt<x;Dt++){var Ct=at[Dt]-Ke[Dt];Xe+=Ct*Ct}if(Xe<h)break}return{rank:function(vn){return vn=v.collection(vn)[0],Ke[y.indexOf(vn)]}}}},Lm=ni({root:null,weight:function(o){return 1},directed:!1,alpha:0}),_u={degreeCentralityNormalized:function(o){o=Lm(o);var l=this.cy(),d=this.nodes(),h=d.length;if(o.directed){for(var D={},x={},_=0,k=0,O=0;O<h;O++){var V=d[O],W=V.id();o.root=V;var Y=this.degreeCentrality(o);_<Y.indegree&&(_=Y.indegree),k<Y.outdegree&&(k=Y.outdegree),D[W]=Y.indegree,x[W]=Y.outdegree}return{indegree:function(ne){return 0==_?0:(me(ne)&&(ne=l.filter(ne)),D[ne.id()]/_)},outdegree:function(ne){return 0===k?0:(me(ne)&&(ne=l.filter(ne)),x[ne.id()]/k)}}}for(var p={},g=0,v=0;v<h;v++){var b=d[v];o.root=b;var y=this.degreeCentrality(o);g<y.degree&&(g=y.degree),p[b.id()]=y.degree}return{degree:function(ne){return 0===g?0:(me(ne)&&(ne=l.filter(ne)),p[ne.id()]/g)}}},degreeCentrality:function(o){o=Lm(o);var l=this.cy(),d=this,p=o.root,g=o.weight,v=o.directed,b=o.alpha;if(p=l.collection(p)[0],v){for(var k=p.connectedEdges(),O=k.filter(function(Ce){return Ce.target().same(p)&&d.has(Ce)}),V=k.filter(function(Ce){return Ce.source().same(p)&&d.has(Ce)}),W=O.length,Y=V.length,te=0,ne=0,se=0;se<O.length;se++)te+=g(O[se]);for(var Ee=0;Ee<V.length;Ee++)ne+=g(V[Ee]);return{indegree:Math.pow(W,1-b)*Math.pow(te,b),outdegree:Math.pow(Y,1-b)*Math.pow(ne,b)}}for(var y=p.connectedEdges().intersection(d),D=y.length,x=0,_=0;_<y.length;_++)x+=g(y[_]);return{degree:Math.pow(D,1-b)*Math.pow(x,b)}}};_u.dc=_u.degreeCentrality,_u.dcn=_u.degreeCentralityNormalised=_u.degreeCentralityNormalized;var Fm=ni({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Rs={closenessCentralityNormalized:function(o){for(var l=Fm(o),d=l.harmonic,h=l.weight,p=l.directed,g=this.cy(),v={},b=0,y=this.nodes(),D=this.floydWarshall({weight:h,directed:p}),x=0;x<y.length;x++){for(var _=0,k=y[x],O=0;O<y.length;O++)if(x!==O){var V=D.distance(k,y[O]);_+=d?1/V:V}d||(_=1/_),b<_&&(b=_),v[k.id()]=_}return{closeness:function(Y){return 0==b?0:(Y=me(Y)?g.filter(Y)[0].id():Y.id(),v[Y]/b)}}},closenessCentrality:function(o){var l=Fm(o),d=l.root,h=l.weight,p=l.directed,g=l.harmonic;d=this.filter(d)[0];for(var v=this.dijkstra({root:d,weight:h,directed:p}),b=0,y=this.nodes(),D=0;D<y.length;D++){var x=y[D];if(!x.same(d)){var _=v.distanceTo(x);b+=g?1/_:_}}return g?b:1/b}};Rs.cc=Rs.closenessCentrality,Rs.ccn=Rs.closenessCentralityNormalised=Rs.closenessCentralityNormalized;var wo=ni({weight:null,directed:!1}),Bm={betweennessCentrality:function(o){for(var l=wo(o),d=l.directed,h=l.weight,p=null!=h,g=this.cy(),v=this.nodes(),b={},y={},D=0,x={set:function(ne,se){y[ne]=se,se>D&&(D=se)},get:function(ne){return y[ne]}},_=0;_<v.length;_++){var k=v[_],O=k.id();b[O]=d?k.outgoers().nodes():k.openNeighborhood().nodes(),x.set(O,0)}for(var V=function(ne){for(var se=v[ne].id(),Ee=[],Ce={},ae={},be={},de=new M.default(function(yt,mt){return be[yt]-be[mt]}),Ae=0;Ae<v.length;Ae++){var Me=v[Ae].id();Ce[Me]=[],ae[Me]=0,be[Me]=1/0}for(ae[se]=1,be[se]=0,de.push(se);!de.empty();){var pe=de.pop();if(Ee.push(pe),p)for(var Le=0;Le<b[pe].length;Le++){var Be,Se=b[pe][Le],qe=g.getElementById(pe);Be=qe.edgesTo(Se).length>0?qe.edgesTo(Se)[0]:Se.edgesTo(qe)[0];var je=h(Be);Se=Se.id(),be[Se]>be[pe]+je&&(be[Se]=be[pe]+je,de.nodes.indexOf(Se)<0?de.push(Se):de.updateItem(Se),ae[Se]=0,Ce[Se]=[]),be[Se]==be[pe]+je&&(ae[Se]=ae[Se]+ae[pe],Ce[Se].push(pe))}else for(var Ke=0;Ke<b[pe].length;Ke++){var tt=b[pe][Ke].id();be[tt]==1/0&&(de.push(tt),be[tt]=be[pe]+1),be[tt]==be[pe]+1&&(ae[tt]=ae[tt]+ae[pe],Ce[tt].push(pe))}}for(var at={},et=0;et<v.length;et++)at[v[et].id()]=0;for(;Ee.length>0;){for(var Je=Ee.pop(),wt=0;wt<Ce[Je].length;wt++){var xt=Ce[Je][wt];at[xt]=at[xt]+ae[xt]/ae[Je]*(1+at[Je])}Je!=v[ne].id()&&x.set(Je,x.get(Je)+at[Je])}},W=0;W<v.length;W++)V(W);var Y={betweenness:function(ne){var se=g.collection(ne).id();return x.get(se)},betweennessNormalized:function(ne){if(0==D)return 0;var se=g.collection(ne).id();return x.get(se)/D}};return Y.betweennessNormalised=Y.betweennessNormalized,Y}};Bm.bc=Bm.betweennessCentrality;var V1=ni({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(u){return 1}]}),pa=function(o,l){for(var d=0,h=0;h<l.length;h++)d+=l[h](o);return d},Lc=function(o,l){for(var d,h=0;h<l;h++){d=0;for(var p=0;p<l;p++)d+=o[p*l+h];for(var g=0;g<l;g++)o[g*l+h]=o[g*l+h]/d}},ep=function(o,l,d){for(var h=new Array(d*d),p=0;p<d;p++){for(var g=0;g<d;g++)h[p*d+g]=0;for(var v=0;v<d;v++)for(var b=0;b<d;b++)h[p*d+b]+=o[p*d+v]*l[v*d+b]}return h},tp=function(o,l,d){for(var h=o.slice(0),p=1;p<d;p++)o=ep(o,h,l);return o},Vm=function(o,l,d){for(var h=new Array(l*l),p=0;p<l*l;p++)h[p]=Math.pow(o[p],d);return Lc(h,l),h},ga=function(o,l,d,h){for(var p=0;p<d;p++)if(Math.round(o[p]*Math.pow(10,h))/Math.pow(10,h)!=Math.round(l[p]*Math.pow(10,h))/Math.pow(10,h))return!1;return!0},Yb=function(o,l){for(var d=0;d<o.length;d++)if(!l[d]||o[d].id()!==l[d].id())return!1;return!0},Hm=function(o){for(var l=this.nodes(),d=this.edges(),h=this.cy(),p=function(o){return V1(o)}(o),g={},v=0;v<l.length;v++)g[l[v].id()]=v;for(var x,b=l.length,y=b*b,D=new Array(y),_=0;_<y;_++)D[_]=0;for(var k=0;k<d.length;k++){var O=d[k],V=g[O.source().id()],W=g[O.target().id()],Y=pa(O,p.attributes);D[V*b+W]+=Y,D[W*b+V]+=Y}(function(o,l,d){for(var h=0;h<l;h++)o[h*l+h]=d})(D,b,p.multFactor),Lc(D,b);for(var te=!0,ne=0;te&&ne<p.maxIterations;)te=!1,x=tp(D,b,p.expandFactor),D=Vm(x,b,p.inflateFactor),ga(D,x,y,4)||(te=!0),ne++;var se=function(o,l,d,h){for(var p=[],g=0;g<l;g++){for(var v=[],b=0;b<l;b++)Math.round(1e3*o[g*l+b])/1e3>0&&v.push(d[b]);0!==v.length&&p.push(h.collection(v))}return p}(D,b,l,h);return se=function(o){for(var l=0;l<o.length;l++)for(var d=0;d<o.length;d++)l!=d&&Yb(o[l],o[d])&&o.splice(d,1);return o}(se),se},zm={markovClustering:Hm,mcl:Hm},jm=function(o){return o},vs=function(o,l){return Math.abs(l-o)},Um=function(o,l,d){return o+vs(l,d)},np=function(o,l,d){return o+Math.pow(d-l,2)},hn=function(o){return Math.sqrt(o)},ys=function(o,l,d){return Math.max(o,vs(l,d))},Xn=function(o,l,d,h,p){for(var g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:jm,v=h,D=0;D<o;D++)v=p(v,l(D),d(D));return g(v)},qr={euclidean:function(o,l,d){return o>=2?Xn(o,l,d,0,np,hn):Xn(o,l,d,0,Um)},squaredEuclidean:function(o,l,d){return Xn(o,l,d,0,np)},manhattan:function(o,l,d){return Xn(o,l,d,0,Um)},max:function(o,l,d){return Xn(o,l,d,-1/0,ys)}};function hi(u,o,l,d,h,p){var g;return g=We(u)?u:qr[u]||qr.euclidean,0===o&&We(u)?g(h,p):g(o,l,d,h,p)}qr["squared-euclidean"]=qr.squaredEuclidean,qr.squaredeuclidean=qr.squaredEuclidean;var Bc=ni({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),Ki=function(o){return Bc(o)},io=function(o,l,d,h,p){var v="kMedoids"!==p?function(x){return d[x]}:function(x){return h[x](d)};return hi(o,h.length,v,function(_){return h[_](l)},d,l)},$t=function(o,l,d){for(var h=d.length,p=new Array(h),g=new Array(h),v=new Array(l),b=null,y=0;y<h;y++)p[y]=o.min(d[y]).value,g[y]=o.max(d[y]).value;for(var D=0;D<l;D++){b=[];for(var x=0;x<h;x++)b[x]=Math.random()*(g[x]-p[x])+p[x];v[D]=b}return v},Sn=function(o,l,d,h,p){for(var g=1/0,v=0,b=0;b<l.length;b++){var y=io(d,o,l[b],h,p);y<g&&(g=y,v=b)}return v},Rr=function(o,l,d){for(var h=[],p=null,g=0;g<l.length;g++)d[(p=l[g]).id()]===o&&h.push(p);return h},xo=function(o,l,d){return Math.abs(l-o)<=d},Bl=function(o,l,d){for(var h=0;h<o.length;h++)for(var p=0;p<o[h].length;p++)if(Math.abs(o[h][p]-l[h][p])>d)return!1;return!0},Vi=function(o,l,d){for(var h=0;h<d;h++)if(o===l[h])return!0;return!1},Vl=function(o,l){var d=new Array(l);if(o.length<50)for(var h=0;h<l;h++){for(var p=o[Math.floor(Math.random()*o.length)];Vi(p,d,h);)p=o[Math.floor(Math.random()*o.length)];d[h]=p}else for(var g=0;g<l;g++)d[g]=o[Math.floor(Math.random()*o.length)];return d},zr=function(o,l,d){for(var h=0,p=0;p<l.length;p++)h+=io("manhattan",l[p],o,d,"kMedoids");return h},An=function(o,l,d,h,p){for(var g,v,b=0;b<l.length;b++)for(var y=0;y<o.length;y++)h[b][y]=Math.pow(d[b][y],p.m);for(var D=0;D<o.length;D++)for(var x=0;x<p.attributes.length;x++){g=0,v=0;for(var _=0;_<l.length;_++)g+=h[_][D]*p.attributes[x](l[_]),v+=h[_][D];o[D][x]=g/v}},rp=function(o,l,d,h,p){for(var g=0;g<o.length;g++)l[g]=o[g].slice();for(var v,b,y,D=2/(p.m-1),x=0;x<d.length;x++)for(var _=0;_<h.length;_++){v=0;for(var k=0;k<d.length;k++)b=io(p.distance,h[_],d[x],p.attributes,"cmeans"),y=io(p.distance,h[_],d[k],p.attributes,"cmeans"),v+=Math.pow(b/y,D);o[_][x]=1/v}},ip=function(o){var p,g,v,b,y,l=this.cy(),d=this.nodes(),h=Ki(o);b=new Array(d.length);for(var D=0;D<d.length;D++)b[D]=new Array(h.k);v=new Array(d.length);for(var x=0;x<d.length;x++)v[x]=new Array(h.k);for(var _=0;_<d.length;_++){for(var k=0,O=0;O<h.k;O++)v[_][O]=Math.random(),k+=v[_][O];for(var V=0;V<h.k;V++)v[_][V]=v[_][V]/k}g=new Array(h.k);for(var W=0;W<h.k;W++)g[W]=new Array(h.attributes.length);y=new Array(d.length);for(var Y=0;Y<d.length;Y++)y[Y]=new Array(h.k);for(var te=!0,ne=0;te&&ne<h.maxIterations;)te=!1,An(g,d,v,y,h),rp(v,b,g,d,h),Bl(v,b,h.sensitivityThreshold)||(te=!0),ne++;return p=function(o,l,d,h){for(var p=new Array(d.k),g=0;g<p.length;g++)p[g]=[];for(var v,b,y=0;y<l.length;y++){v=-1/0,b=-1;for(var D=0;D<l[0].length;D++)l[y][D]>v&&(v=l[y][D],b=D);p[b].push(o[y])}for(var x=0;x<p.length;x++)p[x]=h.collection(p[x]);return p}(d,v,h,l),{clusters:p,degreeOfMembership:v}},Mu={kMeans:function(o){var b,l=this.cy(),d=this.nodes(),h=null,p=Ki(o),g=new Array(p.k),v={};b=p.testMode?"number"==typeof p.testCentroids?$t(d,p.k,p.attributes):"object"===ee(p.testCentroids)?p.testCentroids:$t(d,p.k,p.attributes):$t(d,p.k,p.attributes);for(var y=!0,D=0;y&&D<p.maxIterations;){for(var x=0;x<d.length;x++)v[(h=d[x]).id()]=Sn(h,b,p.distance,p.attributes,"kMeans");y=!1;for(var _=0;_<p.k;_++){var k=Rr(_,d,v);if(0!==k.length){for(var O=p.attributes.length,V=b[_],W=new Array(O),Y=new Array(O),te=0;te<O;te++){Y[te]=0;for(var ne=0;ne<k.length;ne++)Y[te]+=p.attributes[te](h=k[ne]);W[te]=Y[te]/k.length,xo(W[te],V[te],p.sensitivityThreshold)||(y=!0)}b[_]=W,g[_]=l.collection(k)}}D++}return g},kMedoids:function(o){var v,y,l=this.cy(),d=this.nodes(),h=null,p=Ki(o),g=new Array(p.k),b={},D=new Array(p.k);p.testMode?"number"==typeof p.testCentroids||(v="object"===ee(p.testCentroids)?p.testCentroids:Vl(d,p.k)):v=Vl(d,p.k);for(var x=!0,_=0;x&&_<p.maxIterations;){for(var k=0;k<d.length;k++)b[(h=d[k]).id()]=Sn(h,v,p.distance,p.attributes,"kMedoids");x=!1;for(var O=0;O<v.length;O++){var V=Rr(O,d,b);if(0!==V.length){D[O]=zr(v[O],V,p.attributes);for(var W=0;W<V.length;W++)(y=zr(V[W],V,p.attributes))<D[O]&&(D[O]=y,v[O]=V[W],x=!0);g[O]=l.collection(V)}}_++}return g},fuzzyCMeans:ip,fcm:ip},Hi=ni({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),Hc={single:"min",complete:"max"},Eo=function(o,l,d,h,p){for(var b,g=0,v=1/0,y=p.attributes,D=function(de,Ae){return hi(p.distance,y.length,function(Me){return y[Me](de)},function(Me){return y[Me](Ae)},de,Ae)},x=0;x<o.length;x++){var _=o[x].key,k=d[_][h[_]];k<v&&(g=_,v=k)}if("threshold"===p.mode&&v>=p.threshold||"dendrogram"===p.mode&&1===o.length)return!1;var W,O=l[g],V=l[h[g]];W="dendrogram"===p.mode?{left:O,right:V,key:O.key}:{value:O.value.concat(V.value),key:O.key},o[O.index]=W,o.splice(V.index,1),l[O.key]=W;for(var Y=0;Y<o.length;Y++){var te=o[Y];O.key===te.key?b=1/0:"min"===p.linkage?(b=d[O.key][te.key],d[O.key][te.key]>d[V.key][te.key]&&(b=d[V.key][te.key])):"max"===p.linkage?(b=d[O.key][te.key],d[O.key][te.key]<d[V.key][te.key]&&(b=d[V.key][te.key])):b="mean"===p.linkage?(d[O.key][te.key]*O.size+d[V.key][te.key]*V.size)/(O.size+V.size):"dendrogram"===p.mode?D(te.value,O.value):D(te.value[0],O.value[0]),d[O.key][te.key]=d[te.key][O.key]=b}for(var ne=0;ne<o.length;ne++){var se=o[ne].key;if(h[se]===O.key||h[se]===V.key){for(var Ee=se,Ce=0;Ce<o.length;Ce++){var ae=o[Ce].key;d[se][ae]<d[se][Ee]&&(Ee=ae)}h[se]=Ee}o[ne].index=ne}return O.key=V.key=O.index=V.index=null,!0},Qa=function u(o,l,d){o&&(o.value?l.push(o.value):(o.left&&u(o.left,l),o.right&&u(o.right,l)))},Gm=function u(o,l){if(!o)return"";if(o.left&&o.right){var d=u(o.left,l),h=u(o.right,l),p=l.add({group:"nodes",data:{id:d+","+h}});return l.add({group:"edges",data:{source:d,target:p.id()}}),l.add({group:"edges",data:{source:h,target:p.id()}}),p.id()}return o.value?o.value.id():void 0},Cr=function u(o,l,d){if(!o)return[];var h=[],p=[],g=[];return 0===l?(o.left&&Qa(o.left,h),o.right&&Qa(o.right,p),g=h.concat(p),[d.collection(g)]):1===l?o.value?[d.collection(o.value)]:(o.left&&Qa(o.left,h),o.right&&Qa(o.right,p),[d.collection(h),d.collection(p)]):o.value?[d.collection(o.value)]:(o.left&&(h=u(o.left,l-1,d)),o.right&&(p=u(o.right,l-1,d)),h.concat(p))},Xb=function(o){for(var l=this.cy(),d=this.nodes(),h=function(o){var l=Hi(o),d=Hc[l.linkage];return null!=d&&(l.linkage=d),l}(o),p=h.attributes,g=function(ne,se){return hi(h.distance,p.length,function(Ee){return p[Ee](ne)},function(Ee){return p[Ee](se)},ne,se)},v=[],b=[],y=[],D=[],x=0;x<d.length;x++){var _={value:"dendrogram"===h.mode?d[x]:[d[x]],key:x,index:x};v[x]=_,D[x]=_,b[x]=[],y[x]=0}for(var k=0;k<v.length;k++)for(var O=0;O<=k;O++){var V;V="dendrogram"===h.mode?k===O?1/0:g(v[k].value,v[O].value):k===O?1/0:g(v[k].value[0],v[O].value[0]),b[k][O]=V,b[O][k]=V,V<b[k][y[k]]&&(y[k]=O)}for(var W=Eo(v,D,b,y,h);W;)W=Eo(v,D,b,y,h);var Y;return"dendrogram"===h.mode?(Y=Cr(v[0],h.dendrogramDepth,l),h.addDendrogram&&Gm(v[0],l)):(Y=new Array(v.length),v.forEach(function(te,ne){te.key=te.index=null,Y[ne]=l.collection(te.value)})),Y},sp={hierarchicalClustering:Xb,hca:Xb},$m=ni({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),rh=function(o,l,d,h){var p=function(v,b){return h[b](v)};return-hi(o,h.length,function(g){return p(l,g)},function(g){return p(d,g)},l,d)},Kb=function(o,l,d){for(var h=[],p=0;p<o;p++){for(var g=-1,v=-1/0,b=0;b<d.length;b++){var y=d[b];l[p*o+y]>v&&(g=y,v=l[p*o+y])}g>0&&h.push(g)}for(var D=0;D<d.length;D++)h[d[D]]=d[D];return h},so=function(o){for(var l=this.cy(),d=this.nodes(),h=function(o){var l=o.damping,d=o.preference;.5<=l&&l<1||gr("Damping must range on [0.5, 1).  Got: ".concat(l));var h=["median","mean","min","max"];return h.some(function(p){return p===d})||fe(d)||gr("Preference must be one of [".concat(h.map(function(p){return"'".concat(p,"'")}).join(", "),"] or a number.  Got: ").concat(d)),$m(o)}(o),p={},g=0;g<d.length;g++)p[d[g].id()]=g;var v,b,y,D,x,_,de;b=(v=d.length)*v,y=new Array(b);for(var k=0;k<b;k++)y[k]=-1/0;for(var O=0;O<v;O++)for(var V=0;V<v;V++)O!==V&&(y[O*v+V]=rh(h.distance,d[O],d[V],h.attributes));D=function(o,l){var d;return d="median"===l?function(o){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.length,p=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],g=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];!(arguments.length>3&&void 0!==arguments[3])||arguments[3]?o=o.slice(l,d):(d<o.length&&o.splice(d,o.length-d),l>0&&o.splice(0,l));for(var v=0,b=o.length-1;b>=0;b--)g?isFinite(o[b])||(o[b]=-1/0,v++):o.splice(b,1);p&&o.sort(function(_,k){return _-k});var D=o.length,x=Math.floor(D/2);return D%2!=0?o[x+1+v]:(o[x-1+v]+o[x+v])/2}(o):"mean"===l?function(o){for(var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.length,h=0,p=0,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;g<d;g++){var v=o[g];isFinite(v)&&(h+=v,p++)}return h/p}(o):"min"===l?function(o){for(var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.length,h=1/0,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;p<d;p++){var g=o[p];isFinite(g)&&(h=Math.min(g,h))}return h}(o):"max"===l?function(o){for(var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.length,h=-1/0,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;p<d;p++){var g=o[p];isFinite(g)&&(h=Math.max(g,h))}return h}(o):l,d}(y,h.preference);for(var W=0;W<v;W++)y[W*v+W]=D;x=new Array(b);for(var Y=0;Y<b;Y++)x[Y]=0;_=new Array(b);for(var te=0;te<b;te++)_[te]=0;for(var ne=new Array(v),se=new Array(v),Ee=new Array(v),Ce=0;Ce<v;Ce++)ne[Ce]=0,se[Ce]=0,Ee[Ce]=0;for(var ae=new Array(v*h.minIterations),be=0;be<ae.length;be++)ae[be]=0;for(de=0;de<h.maxIterations;de++){for(var Ae=0;Ae<v;Ae++){for(var Me=-1/0,pe=-1/0,Le=-1,Se=0,qe=0;qe<v;qe++)ne[qe]=x[Ae*v+qe],(Se=_[Ae*v+qe]+y[Ae*v+qe])>=Me?(pe=Me,Me=Se,Le=qe):Se>pe&&(pe=Se);for(var Be=0;Be<v;Be++)x[Ae*v+Be]=(1-h.damping)*(y[Ae*v+Be]-Me)+h.damping*ne[Be];x[Ae*v+Le]=(1-h.damping)*(y[Ae*v+Le]-pe)+h.damping*ne[Le]}for(var je=0;je<v;je++){for(var Ke=0,tt=0;tt<v;tt++)ne[tt]=_[tt*v+je],se[tt]=Math.max(0,x[tt*v+je]),Ke+=se[tt];Ke-=se[je],se[je]=x[je*v+je],Ke+=se[je];for(var at=0;at<v;at++)_[at*v+je]=(1-h.damping)*Math.min(0,Ke-se[at])+h.damping*ne[at];_[je*v+je]=(1-h.damping)*(Ke-se[je])+h.damping*ne[je]}for(var et=0,Je=0;Je<v;Je++){var wt=_[Je*v+Je]+x[Je*v+Je]>0?1:0;ae[de%h.minIterations*v+Je]=wt,et+=wt}if(et>0&&(de>=h.minIterations-1||de==h.maxIterations-1)){for(var xt=0,yt=0;yt<v;yt++){Ee[yt]=0;for(var mt=0;mt<h.minIterations;mt++)Ee[yt]+=ae[mt*v+yt];(0===Ee[yt]||Ee[yt]===h.minIterations)&&xt++}if(xt===v)break}}for(var Xe=function(o,l,d){for(var h=[],p=0;p<o;p++)l[p*o+p]+d[p*o+p]>0&&h.push(p);return h}(v,x,_),Dt=function(o,l,d){for(var h=Kb(o,l,d),p=0;p<d.length;p++){for(var g=[],v=0;v<h.length;v++)h[v]===d[p]&&g.push(v);for(var b=-1,y=-1/0,D=0;D<g.length;D++){for(var x=0,_=0;_<g.length;_++)x+=l[g[_]*o+g[D]];x>y&&(b=D,y=x)}d[p]=g[b]}return Kb(o,l,d)}(v,y,Xe),Ct={},Pt=0;Pt<Xe.length;Pt++)Ct[Xe[Pt]]=[];for(var Bt=0;Bt<d.length;Bt++){var Cn=Dt[p[d[Bt].id()]];null!=Cn&&Ct[Cn].push(d[Bt])}for(var Vt=new Array(Xe.length),Lt=0;Lt<Xe.length;Lt++)Vt[Lt]=l.collection(Ct[Xe[Lt]]);return Vt},op={affinityPropagation:so,ap:so},zc=ni({root:void 0,directed:!1}),ih={hierholzer:function(o){if(!Te(o)){var l=arguments;o={root:l[0],directed:l[1]}}var b,y,D,d=zc(o),h=d.root,p=d.directed,g=this,v=!1;h&&(D=me(h)?this.filter(h)[0].id():h[0].id());var x={},_={};g.forEach(p?function(te){var ne=te.id();if(te.isNode()){var se=te.indegree(!0),Ee=te.outdegree(!0),Ce=se-Ee,ae=Ee-se;1==Ce?b?v=!0:b=ne:1==ae?y?v=!0:y=ne:(ae>1||Ce>1)&&(v=!0),x[ne]=[],te.outgoers().forEach(function(be){be.isEdge()&&x[ne].push(be.id())})}else _[ne]=[void 0,te.target().id()]}:function(te){var ne=te.id();te.isNode()?(te.degree(!0)%2&&(b?y?v=!0:y=ne:b=ne),x[ne]=[],te.connectedEdges().forEach(function(Ee){return x[ne].push(Ee.id())})):_[ne]=[te.source().id(),te.target().id()]});var k={found:!1,trail:void 0};if(v)return k;if(y&&b)if(p){if(D&&y!=D)return k;D=y}else{if(D&&y!=D&&b!=D)return k;D||(D=y)}else D||(D=g[0].id());var O=function(ne){for(var Ce,ae,be,se=ne,Ee=[ne];x[se].length;)Ce=x[se].shift(),ae=_[Ce][0],se!=(be=_[Ce][1])?(x[be]=x[be].filter(function(de){return de!=Ce}),se=be):!p&&se!=ae&&(x[ae]=x[ae].filter(function(de){return de!=Ce}),se=ae),Ee.unshift(Ce),Ee.unshift(se);return Ee},V=[],W=[];for(W=O(D);1!=W.length;)0==x[W[0]].length?(V.unshift(g.getElementById(W.shift())),V.unshift(g.getElementById(W.shift()))):W=O(W.shift()).concat(W);for(var Y in V.unshift(g.getElementById(W.shift())),x)if(x[Y].length)return k;return k.found=!0,k.trail=this.spawn(V,!0),k}},bs=function(){var o=this,l={},d=0,h=0,p=[],g=[],v={},y=function x(_,k,O){_===O&&(h+=1),l[k]={id:d,low:d++,cutVertex:!1};var W,Y,te,ne,V=o.getElementById(k).connectedEdges().intersection(o);0===V.size()?p.push(o.spawn(o.getElementById(k))):V.forEach(function(se){W=se.source().id(),Y=se.target().id(),(te=W===k?Y:W)!==O&&(ne=se.id(),v[ne]||(v[ne]=!0,g.push({x:k,y:te,edge:se})),te in l?l[k].low=Math.min(l[k].low,l[te].id):(x(_,te,k),l[k].low=Math.min(l[k].low,l[te].low),l[k].id<=l[te].low&&(l[k].cutVertex=!0,function(_,k){for(var O=g.length-1,V=[],W=o.spawn();g[O].x!=_||g[O].y!=k;)V.push(g.pop().edge),O--;V.push(g.pop().edge),V.forEach(function(Y){var te=Y.connectedNodes().intersection(o);W.merge(Y),te.forEach(function(ne){var se=ne.id(),Ee=ne.connectedEdges().intersection(o);W.merge(ne),W.merge(l[se].cutVertex?Ee.filter(function(Ce){return Ce.isLoop()}):Ee)})}),p.push(W)}(k,te))))})};o.forEach(function(x){if(x.isNode()){var _=x.id();_ in l||(h=0,y(_,_),l[_].cutVertex=h>1)}});var D=Object.keys(l).filter(function(x){return l[x].cutVertex}).map(function(x){return o.getElementById(x)});return{cut:o.spawn(D),components:p}},ap=function(){var o=this,l={},d=0,h=[],p=[],g=o.spawn(o),v=function b(y){if(p.push(y),l[y]={index:d,low:d++,explored:!1},o.getElementById(y).connectedEdges().intersection(o).forEach(function(V){var W=V.target().id();W!==y&&(W in l||b(W),l[W].explored||(l[y].low=Math.min(l[y].low,l[W].low)))}),l[y].index===l[y].low){for(var x=o.spawn();;){var _=p.pop();if(x.merge(o.getElementById(_)),l[_].low=l[y].index,l[_].explored=!0,_===y)break}var k=x.edgesWith(x),O=x.merge(k);h.push(O),g=g.difference(O)}};return o.forEach(function(b){if(b.isNode()){var y=b.id();y in l||v(y)}}),{cut:g,components:h}},Wm={};[_e,Ue,bt,ut,Ft,un,Gt,Pc,_u,Rs,Bm,zm,Mu,sp,op,ih,{hopcroftTarjanBiconnected:bs,htbc:bs,htb:bs,hopcroftTarjanBiconnectedComponents:bs},{tarjanStronglyConnected:ap,tsc:ap,tscc:ap,tarjanStronglyConnectedComponents:ap}].forEach(function(u){Yt(Wm,u)});var Ja=function u(o){if(!(this instanceof u))return new u(o);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof o&&o.call(this,this.fulfill.bind(this),this.reject.bind(this))};Ja.prototype={fulfill:function(o){return nw(this,1,"fulfillValue",o)},reject:function(o){return nw(this,2,"rejectReason",o)},then:function(o,l){var d=this,h=new Ja;return d.onFulfilled.push(sw(o,h,"fulfill")),d.onRejected.push(sw(l,h,"reject")),rw(d),h.proxy}};var nw=function(o,l,d,h){return 0===o.state&&(o.state=l,o[d]=h,rw(o)),o},rw=function(o){1===o.state?iw(o,"onFulfilled",o.fulfillValue):2===o.state&&iw(o,"onRejected",o.rejectReason)},iw=function(o,l,d){if(0!==o[l].length){var h=o[l];o[l]=[];var p=function(){for(var v=0;v<h.length;v++)h[v](d)};"function"==typeof setImmediate?setImmediate(p):setTimeout(p,0)}},sw=function(o,l,d){return function(h){if("function"!=typeof o)l[d].call(l,h);else{var p;try{p=o(h)}catch(g){return void l.reject(g)}H1(l,p)}}},H1=function u(o,l){if(o!==l&&o.proxy!==l){var d;if("object"===ee(l)&&null!==l||"function"==typeof l)try{d=l.then}catch(p){return void o.reject(p)}if("function"!=typeof d)o.fulfill(l);else{var h=!1;try{d.call(l,function(p){h||(h=!0,p===l?o.reject(new TypeError("circular thenable chain")):u(o,p))},function(p){h||(h=!0,o.reject(p))})}catch(p){h||o.reject(p)}}}else o.reject(new TypeError("cannot resolve promise with itself"))};Ja.all=function(u){return new Ja(function(o,l){for(var d=new Array(u.length),h=0,p=function(b,y){d[b]=y,++h===u.length&&o(d)},g=0;g<u.length;g++)!function(v){var b=u[v];null!=b&&null!=b.then?b.then(function(x){p(v,x)},function(x){l(x)}):p(v,b)}(g)})},Ja.resolve=function(u){return new Ja(function(o,l){o(u)})},Ja.reject=function(u){return new Ja(function(o,l){l(u)})};var jc=typeof Promise<"u"?Promise:Ja,qm=function(o,l,d){var h=ft(o),p=!h,g=this._private=Yt({duration:1e3},l,d);if(g.target=o,g.style=g.style||g.css,g.started=!1,g.playing=!1,g.hooked=!1,g.applying=!1,g.progress=0,g.completes=[],g.frames=[],g.complete&&We(g.complete)&&g.completes.push(g.complete),p){var v=o.position();g.startPosition=g.startPosition||{x:v.x,y:v.y},g.startStyle=g.startStyle||o.cy().style().getAnimationStartStyle(o,g.style)}if(h){var b=o.pan();g.startPan={x:b.x,y:b.y},g.startZoom=o.zoom()}this.length=1,this[0]=this},Iu=qm.prototype;Yt(Iu,{instanceString:function(){return"animation"},hook:function(){var o=this._private;if(!o.hooked){var d=o.target._private.animation;(o.queue?d.queue:d.current).push(this),Ne(o.target)&&o.target.cy().addToAnimationPool(o.target),o.hooked=!0}return this},play:function(){var o=this._private;return 1===o.progress&&(o.progress=0),o.playing=!0,o.started=!1,o.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var o=this._private;return o.applying=!0,o.started=!1,o.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var o=this._private;return o.playing=!1,o.started=!1,this},stop:function(){var o=this._private;return o.playing=!1,o.started=!1,o.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(o){var l=this._private;return void 0===o?l.progress*l.duration:this.progress(o/l.duration)},progress:function(o){var l=this._private,d=l.playing;return void 0===o?l.progress:(d&&this.pause(),l.progress=o,l.started=!1,d&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var o=this._private,l=o.playing;l&&this.pause(),o.progress=1-o.progress,o.started=!1;var d=function(y,D){var x=o[y];null!=x&&(o[y]=o[D],o[D]=x)};if(d("zoom","startZoom"),d("pan","startPan"),d("position","startPosition"),o.style)for(var h=0;h<o.style.length;h++){var p=o.style[h],g=p.name,v=o.startStyle[g];o.startStyle[g]=p,o.style[h]=v}return l&&this.play(),this},promise:function(o){var d,l=this._private;return d="frame"===o?l.frames:l.completes,new jc(function(h,p){d.push(function(){h()})})}}),Iu.complete=Iu.completed,Iu.run=Iu.play,Iu.running=Iu.playing;var Xm={data:function(o){return o=Yt({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(h){},beforeSet:function(h,p){},onSet:function(h){},canSet:function(h){return!0}},o),function(h,p){var g=o,v=this,b=void 0!==v.length,y=b?v:[v],D=b?v[0]:v;if(me(h)){var k,_=-1!==h.indexOf(".")&&X.default(h);if(g.allowGetting&&void 0===p)return D&&(g.beforeGet(D),k=_&&void 0===D._private[g.field][h]?H.default(D._private[g.field],_):D._private[g.field][h]),k;if(g.allowSetting&&void 0!==p&&!g.immutableKeys[h]){var V=K({},h,p);g.beforeSet(v,V);for(var W=0,Y=y.length;W<Y;W++){var te=y[W];g.canSet(te)&&(_&&void 0===D._private[g.field][h]?F.default(te._private[g.field],_,p):te._private[g.field][h]=p)}g.updateStyle&&v.updateStyle(),g.onSet(v),g.settingTriggersEvent&&v[g.triggerFnName](g.settingEvent)}}else if(g.allowSetting&&Te(h)){var se,Ee,ne=h,Ce=Object.keys(ne);g.beforeSet(v,ne);for(var ae=0;ae<Ce.length;ae++)if(Ee=ne[se=Ce[ae]],!g.immutableKeys[se])for(var de=0;de<y.length;de++){var Ae=y[de];g.canSet(Ae)&&(Ae._private[g.field][se]=Ee)}g.updateStyle&&v.updateStyle(),g.onSet(v),g.settingTriggersEvent&&v[g.triggerFnName](g.settingEvent)}else if(g.allowBinding&&We(h))v.on(g.bindingEvent,h);else if(g.allowGetting&&void 0===h){var pe;return D&&(g.beforeGet(D),pe=D._private[g.field]),pe}return v}},removeData:function(o){return o=Yt({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},o),function(h){var p=o,g=this,b=void 0!==g.length?g:[g];if(me(h)){for(var y=h.split(/\s+/),D=y.length,x=0;x<D;x++){var _=y[x];if(!Ge(_)&&!p.immutableKeys[_])for(var O=0,V=b.length;O<V;O++)b[O]._private[p.field][_]=void 0}p.triggerEvent&&g[p.triggerFnName](p.event)}else if(void 0===h){for(var W=0,Y=b.length;W<Y;W++)for(var te=b[W]._private[p.field],ne=Object.keys(te),se=0;se<ne.length;se++){var Ee=ne[se];!p.immutableKeys[Ee]&&(te[Ee]=void 0)}p.triggerEvent&&g[p.triggerFnName](p.event)}return g}}},z1={eventAliasesOn:function(o){var l=o;l.addListener=l.listen=l.bind=l.on,l.unlisten=l.unbind=l.off=l.removeListener,l.trigger=l.emit,l.pon=l.promiseOn=function(d,h){var p=this,g=Array.prototype.slice.call(arguments,0);return new jc(function(v,b){var D=g.concat([function(k){p.off.apply(p,x),v(k)}]),x=D.concat([]);p.on.apply(p,D)})}}},fr={};[{animated:function(){return function(){var l=this,h=void 0!==l.length?l:[l];if(!(this._private.cy||this).styleEnabled())return!1;var g=h[0];return g?g._private.animation.current.length>0:void 0}},clearQueue:function(){return function(){var l=this,h=void 0!==l.length?l:[l];if(!(this._private.cy||this).styleEnabled())return this;for(var g=0;g<h.length;g++)h[g]._private.animation.queue=[];return this}},delay:function(){return function(l,d){return(this._private.cy||this).styleEnabled()?this.animate({delay:l,duration:l,complete:d}):this}},delayAnimation:function(){return function(l,d){return(this._private.cy||this).styleEnabled()?this.animation({delay:l,duration:l,complete:d}):this}},animation:function(){return function(l,d){var h=this,p=void 0!==h.length,g=p?h:[h],v=this._private.cy||this,b=!p,y=!b;if(!v.styleEnabled())return this;var D=v.style();if(l=Yt({},l,d),0===Object.keys(l).length)return new qm(g[0],l);switch(void 0===l.duration&&(l.duration=400),l.duration){case"slow":l.duration=600;break;case"fast":l.duration=200}if(y&&(l.style=D.getPropsList(l.style||l.css),l.css=void 0),y&&null!=l.renderedPosition){var _=l.renderedPosition,k=v.pan(),O=v.zoom();l.position=zn(_,O,k)}if(b&&null!=l.panBy){var V=l.panBy,W=v.pan();l.pan={x:W.x+V.x,y:W.y+V.y}}var Y=l.center||l.centre;if(b&&null!=Y){var te=v.getCenterPan(Y.eles,l.zoom);null!=te&&(l.pan=te)}if(b&&null!=l.fit){var ne=l.fit,se=v.getFitViewport(ne.eles||ne.boundingBox,ne.padding);null!=se&&(l.pan=se.pan,l.zoom=se.zoom)}if(b&&Te(l.zoom)){var Ee=v.getZoomedViewport(l.zoom);null!=Ee?(Ee.zoomed&&(l.zoom=Ee.zoom),Ee.panned&&(l.pan=Ee.pan)):l.zoom=null}return new qm(g[0],l)}},animate:function(){return function(l,d){var h=this,g=void 0!==h.length?h:[h];if(!(this._private.cy||this).styleEnabled())return this;d&&(l=Yt({},l,d));for(var b=0;b<g.length;b++){var y=g[b],D=y.animated()&&(void 0===l.queue||l.queue);y.animation(l,D?{queue:!0}:void 0).play()}return this}},stop:function(){return function(l,d){var h=this,g=void 0!==h.length?h:[h],v=this._private.cy||this;if(!v.styleEnabled())return this;for(var b=0;b<g.length;b++){for(var D=g[b]._private,x=D.animation.current,_=0;_<x.length;_++)d&&(x[_]._private.duration=0);l&&(D.animation.queue=[]),d||(D.animation.current=[])}return v.notify("draw"),this}}},Xm,z1].forEach(function(u){Yt(fr,u)});var j1={animate:fr.animate(),animation:fr.animation(),animated:fr.animated(),clearQueue:fr.clearQueue(),delay:fr.delay(),delayAnimation:fr.delayAnimation(),stop:fr.stop()},jo={classes:function(o){var l=this;if(void 0===o){var d=[];return l[0]._private.classes.forEach(function(O){return d.push(O)}),d}ze(o)||(o=(o||"").match(/\S+/g)||[]);for(var h=[],p=new ua(o),g=0;g<l.length;g++){for(var v=l[g],b=v._private,y=b.classes,D=!1,x=0;x<o.length;x++)if(!y.has(o[x])){D=!0;break}D||(D=y.size!==o.length),D&&(b.classes=p,h.push(v))}return h.length>0&&this.spawn(h).updateStyle().emit("class"),l},addClass:function(o){return this.toggleClass(o,!0)},hasClass:function(o){var l=this[0];return null!=l&&l._private.classes.has(o)},toggleClass:function(o,l){ze(o)||(o=o.match(/\S+/g)||[]);for(var d=this,h=void 0===l,p=[],g=0,v=d.length;g<v;g++)for(var b=d[g],y=b._private.classes,D=!1,x=0;x<o.length;x++){var _=o[x],k=y.has(_),O=!1;l||h&&!k?(y.add(_),O=!0):(!l||h&&k)&&(y.delete(_),O=!0),!D&&O&&(p.push(b),D=!0)}return p.length>0&&this.spawn(p).updateStyle().emit("class"),d},removeClass:function(o){return this.toggleClass(o,!1)},flashClass:function(o,l){var d=this;if(null==l)l=250;else if(0===l)return d;return d.addClass(o),setTimeout(function(){d.removeClass(o)},l),d}};jo.className=jo.classNames=jo.classes;var Zn={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:"\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'",number:on,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};Zn.variable="(?:[\\w-.]|(?:\\\\"+Zn.metaChar+"))+",Zn.className="(?:[\\w-]|(?:\\\\"+Zn.metaChar+"))+",Zn.value=Zn.string+"|"+Zn.number,Zn.id=Zn.variable,function(){var u,o,l;for(u=Zn.comparatorOp.split("|"),l=0;l<u.length;l++)Zn.comparatorOp+="|@"+(o=u[l]);for(u=Zn.comparatorOp.split("|"),l=0;l<u.length;l++)!((o=u[l]).indexOf("!")>=0)&&"="!==o&&(Zn.comparatorOp+="|\\!"+o)}();var lp=[{selector:":selected",matches:function(o){return o.selected()}},{selector:":unselected",matches:function(o){return!o.selected()}},{selector:":selectable",matches:function(o){return o.selectable()}},{selector:":unselectable",matches:function(o){return!o.selectable()}},{selector:":locked",matches:function(o){return o.locked()}},{selector:":unlocked",matches:function(o){return!o.locked()}},{selector:":visible",matches:function(o){return o.visible()}},{selector:":hidden",matches:function(o){return!o.visible()}},{selector:":transparent",matches:function(o){return o.transparent()}},{selector:":grabbed",matches:function(o){return o.grabbed()}},{selector:":free",matches:function(o){return!o.grabbed()}},{selector:":removed",matches:function(o){return o.removed()}},{selector:":inside",matches:function(o){return!o.removed()}},{selector:":grabbable",matches:function(o){return o.grabbable()}},{selector:":ungrabbable",matches:function(o){return!o.grabbable()}},{selector:":animated",matches:function(o){return o.animated()}},{selector:":unanimated",matches:function(o){return!o.animated()}},{selector:":parent",matches:function(o){return o.isParent()}},{selector:":childless",matches:function(o){return o.isChildless()}},{selector:":child",matches:function(o){return o.isChild()}},{selector:":orphan",matches:function(o){return o.isOrphan()}},{selector:":nonorphan",matches:function(o){return o.isChild()}},{selector:":compound",matches:function(o){return o.isNode()?o.isParent():o.source().isParent()||o.target().isParent()}},{selector:":loop",matches:function(o){return o.isLoop()}},{selector:":simple",matches:function(o){return o.isSimple()}},{selector:":active",matches:function(o){return o.active()}},{selector:":inactive",matches:function(o){return!o.active()}},{selector:":backgrounding",matches:function(o){return o.backgrounding()}},{selector:":nonbackgrounding",matches:function(o){return!o.backgrounding()}}].sort(function(u,o){return function(o,l){return-1*hs(o,l)}(u.selector,o.selector)}),ow=function(){for(var o,u={},l=0;l<lp.length;l++)u[(o=lp[l]).selector]=o.matches;return u}(),Qm="("+lp.map(function(u){return u.selector}).join("|")+")",ku=function(o){return o.replace(new RegExp("\\\\("+Zn.metaChar+")","g"),function(l,d){return d})},Uo=function(o,l,d){o[o.length-1]=d},up=[{name:"group",query:!0,regex:"("+Zn.group+")",populate:function(o,l,d){var p=le(d,1)[0];l.checks.push({type:0,value:"*"===p?p:p+"s"})}},{name:"state",query:!0,regex:Qm,populate:function(o,l,d){var h=le(d,1);l.checks.push({type:7,value:h[0]})}},{name:"id",query:!0,regex:"\\#("+Zn.id+")",populate:function(o,l,d){var h=le(d,1);l.checks.push({type:8,value:ku(h[0])})}},{name:"className",query:!0,regex:"\\.("+Zn.className+")",populate:function(o,l,d){var h=le(d,1);l.checks.push({type:9,value:ku(h[0])})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+Zn.variable+")\\s*\\]",populate:function(o,l,d){var h=le(d,1);l.checks.push({type:4,field:ku(h[0])})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+Zn.variable+")\\s*("+Zn.comparatorOp+")\\s*("+Zn.value+")\\s*\\]",populate:function(o,l,d){var h=le(d,3),p=h[0],g=h[1],v=h[2];v=null!=new RegExp("^"+Zn.string+"$").exec(v)?v.substring(1,v.length-1):parseFloat(v),l.checks.push({type:3,field:ku(p),operator:g,value:v})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+Zn.boolOp+")\\s*("+Zn.variable+")\\s*\\]",populate:function(o,l,d){var h=le(d,2),p=h[0];l.checks.push({type:5,field:ku(h[1]),operator:p})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+Zn.meta+")\\s*("+Zn.comparatorOp+")\\s*("+Zn.number+")\\s*\\]\\]",populate:function(o,l,d){var h=le(d,3),g=h[1],v=h[2];l.checks.push({type:6,field:ku(h[0]),operator:g,value:parseFloat(v)})}},{name:"nextQuery",separator:!0,regex:Zn.separator,populate:function(o,l){var d=o.currentSubject,h=o.edgeCount,p=o.compoundCount,g=o[o.length-1];return null!=d&&(g.subject=d,o.currentSubject=null),g.edgeCount=h,g.compoundCount=p,o.edgeCount=0,o.compoundCount=0,o[o.length++]={checks:[]}}},{name:"directedEdge",separator:!0,regex:Zn.directedEdge,populate:function(o,l){if(null==o.currentSubject){var d={checks:[]},p={checks:[]};return d.checks.push({type:11,source:l,target:p}),Uo(o,0,d),o.edgeCount++,p}var g={checks:[]},b={checks:[]};return g.checks.push({type:12,source:l,target:b}),Uo(o,0,g),o.edgeCount++,b}},{name:"undirectedEdge",separator:!0,regex:Zn.undirectedEdge,populate:function(o,l){if(null==o.currentSubject){var d={checks:[]},p={checks:[]};return d.checks.push({type:10,nodes:[l,p]}),Uo(o,0,d),o.edgeCount++,p}var g={checks:[]},b={checks:[]};return g.checks.push({type:14,node:l,neighbor:b}),Uo(o,0,g),b}},{name:"child",separator:!0,regex:Zn.child,populate:function(o,l){if(null==o.currentSubject){var d={checks:[]},h={checks:[]};return d.checks.push({type:15,parent:o[o.length-1],child:h}),Uo(o,0,d),o.compoundCount++,h}if(o.currentSubject===l){var g={checks:[]},b={checks:[]},y={checks:[]},D={checks:[]},x={checks:[]};return g.checks.push({type:19,left:o[o.length-1],right:b,subject:y}),y.checks=l.checks,l.checks=[{type:20}],x.checks.push({type:20}),b.checks.push({type:17,parent:x,child:D}),Uo(o,0,g),o.currentSubject=y,o.compoundCount++,D}var _={checks:[]},k={checks:[]},O=[{type:17,parent:_,child:k}];return _.checks=l.checks,l.checks=O,o.compoundCount++,k}},{name:"descendant",separator:!0,regex:Zn.descendant,populate:function(o,l){if(null==o.currentSubject){var d={checks:[]},h={checks:[]};return d.checks.push({type:16,ancestor:o[o.length-1],descendant:h}),Uo(o,0,d),o.compoundCount++,h}if(o.currentSubject===l){var g={checks:[]},b={checks:[]},y={checks:[]},D={checks:[]},x={checks:[]};return g.checks.push({type:19,left:o[o.length-1],right:b,subject:y}),y.checks=l.checks,l.checks=[{type:20}],x.checks.push({type:20}),b.checks.push({type:18,ancestor:x,descendant:D}),Uo(o,0,g),o.currentSubject=y,o.compoundCount++,D}var _={checks:[]},k={checks:[]},O=[{type:18,ancestor:_,descendant:k}];return _.checks=l.checks,l.checks=O,o.compoundCount++,k}},{name:"subject",modifier:!0,regex:Zn.subject,populate:function(o,l){if(null!=o.currentSubject&&o.currentSubject!==l)return tr("Redefinition of subject in selector `"+o.toString()+"`"),!1;o.currentSubject=l;var h=o[o.length-1].checks[0],p=null==h?null:h.type;11===p?h.type=13:10===p&&(h.type=14,h.node=h.nodes[1],h.neighbor=h.nodes[0],h.nodes=null)}}];up.forEach(function(u){return u.regexObj=new RegExp("^"+u.regex)});var oo=function(o){for(var l,d,h,p=0;p<up.length;p++){var g=up[p],v=g.name,b=o.match(g.regexObj);if(null!=b){d=b,l=g,h=v,o=o.substring(b[0].length);break}}return{expr:l,match:d,name:h,remaining:o}},aw={parse:function(o){var l=this,d=l.inputText=o,h=l[0]={checks:[]};for(l.length=1,d=function(o){var l=o.match(/^\s+/);return l&&(o=o.substring(l[0].length)),o}(d);;){var p=oo(d);if(null==p.expr)return tr("The selector `"+o+"`is invalid"),!1;var g=p.match.slice(1),v=p.expr.populate(l,h,g);if(!1===v)return!1;if(null!=v&&(h=v),(d=p.remaining).match(/^\s*$/))break}var b=l[l.length-1];null!=l.currentSubject&&(b.subject=l.currentSubject),b.edgeCount=l.edgeCount,b.compoundCount=l.compoundCount;for(var y=0;y<l.length;y++){var D=l[y];if(D.compoundCount>0&&D.edgeCount>0)return tr("The selector `"+o+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(D.edgeCount>1)return tr("The selector `"+o+"` is invalid because it uses multiple edge selectors"),!1;1===D.edgeCount&&tr("The selector `"+o+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString:function(){if(null!=this.toStringCache)return this.toStringCache;for(var o=function(D){return D??""},l=function(D){return me(D)?'"'+D+'"':o(D)},d=function(D){return" "+D+" "},p=function(D,x){return D.checks.reduce(function(_,k,O){return _+(x===D&&0===O?"$":"")+function(D,x){var k=D.value;switch(D.type){case 0:var O=o(k);return O.substring(0,O.length-1);case 3:return"["+D.field+d(o(D.operator))+l(k)+"]";case 5:var te=D.field;return"["+o(D.operator)+te+"]";case 4:return"["+D.field+"]";case 6:return"[["+D.field+d(o(D.operator))+l(k)+"]]";case 7:return k;case 8:return"#"+k;case 9:return"."+k;case 17:case 15:return p(D.parent,x)+d(">")+p(D.child,x);case 18:case 16:return p(D.ancestor,x)+" "+p(D.descendant,x);case 19:var Ce=p(D.left,x),ae=p(D.subject,x),be=p(D.right,x);return Ce+(Ce.length>0?" ":"")+ae+be;case 20:return""}}(k,x)},"")},g="",v=0;v<this.length;v++){var b=this[v];g+=p(b,b.subject),this.length>1&&v<this.length-1&&(g+=", ")}return this.toStringCache=g,g}},Uc=function(o,l,d){var h,b,y,p=me(o),g=fe(o),v=me(d),D=!1,x=!1,_=!1;switch(l.indexOf("!")>=0&&(l=l.replace("!",""),x=!0),l.indexOf("@")>=0&&(l=l.replace("@",""),D=!0),(p||v||D)&&(b=p||g?""+o:"",y=""+d),D&&(o=b=b.toLowerCase(),d=y=y.toLowerCase()),l){case"*=":h=b.indexOf(y)>=0;break;case"$=":h=b.indexOf(y,b.length-y.length)>=0;break;case"^=":h=0===b.indexOf(y);break;case"=":h=o===d;break;case">":_=!0,h=o>d;break;case">=":_=!0,h=o>=d;break;case"<":_=!0,h=o<d;break;case"<=":_=!0,h=o<=d;break;default:h=!1}return x&&(null!=o||!_)&&(h=!h),h},sh=function(o,l){return o.data(l)},Kn=[],Sr=function(o,l){return o.checks.every(function(d){return Kn[d.type](d,l)})};Kn[0]=function(u,o){var l=u.value;return"*"===l||l===o.group()},Kn[7]=function(u,o){return function(o,l){return ow[o](l)}(u.value,o)},Kn[8]=function(u,o){var l=u.value;return o.id()===l},Kn[9]=function(u,o){return o.hasClass(u.value)},Kn[6]=function(u,o){var d=u.operator,h=u.value;return Uc(function(o,l){return o[l]()}(o,u.field),d,h)},Kn[3]=function(u,o){var d=u.operator,h=u.value;return Uc(sh(o,u.field),d,h)},Kn[5]=function(u,o){var d=u.operator;return function(o,l){switch(l){case"?":return!!o;case"!":return!o;case"^":return void 0===o}}(sh(o,u.field),d)},Kn[4]=function(u,o){return function(o){return void 0!==o}(sh(o,u.field))},Kn[10]=function(u,o){var l=u.nodes[0],d=u.nodes[1],h=o.source(),p=o.target();return Sr(l,h)&&Sr(d,p)||Sr(d,h)&&Sr(l,p)},Kn[14]=function(u,o){return Sr(u.node,o)&&o.neighborhood().some(function(l){return l.isNode()&&Sr(u.neighbor,l)})},Kn[11]=function(u,o){return Sr(u.source,o.source())&&Sr(u.target,o.target())},Kn[12]=function(u,o){return Sr(u.source,o)&&o.outgoers().some(function(l){return l.isNode()&&Sr(u.target,l)})},Kn[13]=function(u,o){return Sr(u.target,o)&&o.incomers().some(function(l){return l.isNode()&&Sr(u.source,l)})},Kn[15]=function(u,o){return Sr(u.child,o)&&Sr(u.parent,o.parent())},Kn[17]=function(u,o){return Sr(u.parent,o)&&o.children().some(function(l){return Sr(u.child,l)})},Kn[16]=function(u,o){return Sr(u.descendant,o)&&o.ancestors().some(function(l){return Sr(u.ancestor,l)})},Kn[18]=function(u,o){return Sr(u.ancestor,o)&&o.descendants().some(function(l){return Sr(u.descendant,l)})},Kn[19]=function(u,o){return Sr(u.subject,o)&&Sr(u.left,o)&&Sr(u.right,o)},Kn[20]=function(){return!0},Kn[1]=function(u,o){return u.value.has(o)},Kn[2]=function(u,o){return(0,u.value)(o)};var Za={matches:function(o){for(var d=0;d<this.length;d++)if(Sr(this[d],o))return!0;return!1},filter:function(o){var l=this;if(1===l.length&&1===l[0].checks.length&&8===l[0].checks[0].type)return o.getElementById(l[0].checks[0].value).collection();var d=function(p){for(var g=0;g<l.length;g++)if(Sr(l[g],p))return!0;return!1};return null==l.text()&&(d=function(){return!0}),o.filter(d)}},ma=function(o){this.inputText=o,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==o||me(o)&&o.match(/^\s*$/)||(Ne(o)?this.addQuery({checks:[{type:1,value:o.collection()}]}):We(o)?this.addQuery({checks:[{type:2,value:o}]}):me(o)?this.parse(o)||(this.invalid=!0):gr("A selector must be created from a string; found "))},Go=ma.prototype;[aw,Za].forEach(function(u){return Yt(Go,u)}),Go.text=function(){return this.inputText},Go.size=function(){return this.length},Go.eq=function(u){return this[u]},Go.sameText=function(u){return!this.invalid&&!u.invalid&&this.text()===u.text()},Go.addQuery=function(u){this[this.length++]=u},Go.selector=Go.toString;var dn={allAre:function(o){var l=new ma(o);return this.every(function(d){return l.matches(d)})},is:function(o){var l=new ma(o);return this.some(function(d){return l.matches(d)})},some:function(o,l){for(var d=0;d<this.length;d++)if(l?o.apply(l,[this[d],d,this]):o(this[d],d,this))return!0;return!1},every:function(o,l){for(var d=0;d<this.length;d++)if(!(l?o.apply(l,[this[d],d,this]):o(this[d],d,this)))return!1;return!0},same:function(o){if(this===o)return!0;o=this.cy().collection(o);var l=this.length;return l===o.length&&(1===l?this[0]===o[0]:this.every(function(h){return o.hasElementWithId(h.id())}))},anySame:function(o){return o=this.cy().collection(o),this.some(function(l){return o.hasElementWithId(l.id())})},allAreNeighbors:function(o){o=this.cy().collection(o);var l=this.neighborhood();return o.every(function(d){return l.hasElementWithId(d.id())})},contains:function(o){o=this.cy().collection(o);var l=this;return o.every(function(d){return l.hasElementWithId(d.id())})}};dn.allAreNeighbours=dn.allAreNeighbors,dn.has=dn.contains,dn.equal=dn.equals=dn.same;var $c,rv,Ls=function(o,l){return function(h,p,g,v){var D,b=h,y=this;if(null==b?D="":Ne(b)&&1===b.length&&(D=b.id()),1===y.length&&D){var x=y[0]._private,_=x.traversalCache=x.traversalCache||{},k=_[l]=_[l]||[],O=la(D);return k[O]||(k[O]=o.call(y,h,p,g,v))}return o.call(y,h,p,g,v)}},Gc={parent:function(o){var l=[];if(1===this.length){var d=this[0]._private.parent;if(d)return d}for(var h=0;h<this.length;h++){var g=this[h]._private.parent;g&&l.push(g)}return this.spawn(l,!0).filter(o)},parents:function(o){for(var l=[],d=this.parent();d.nonempty();){for(var h=0;h<d.length;h++)l.push(d[h]);d=d.parent()}return this.spawn(l,!0).filter(o)},commonAncestors:function(o){for(var l,d=0;d<this.length;d++){var p=this[d].parents();l=(l=l||p).intersect(p)}return l.filter(o)},orphans:function(o){return this.stdFilter(function(l){return l.isOrphan()}).filter(o)},nonorphans:function(o){return this.stdFilter(function(l){return l.isChild()}).filter(o)},children:Ls(function(u){for(var o=[],l=0;l<this.length;l++)for(var h=this[l]._private.children,p=0;p<h.length;p++)o.push(h[p]);return this.spawn(o,!0).filter(u)},"children"),siblings:function(o){return this.parent().children().not(this).filter(o)},isParent:function(){var o=this[0];if(o)return o.isNode()&&0!==o._private.children.length},isChildless:function(){var o=this[0];if(o)return o.isNode()&&0===o._private.children.length},isChild:function(){var o=this[0];if(o)return o.isNode()&&null!=o._private.parent},isOrphan:function(){var o=this[0];if(o)return o.isNode()&&null==o._private.parent},descendants:function(o){var l=[];return function d(h){for(var p=0;p<h.length;p++){var g=h[p];l.push(g),g.children().nonempty()&&d(g.children())}}(this.children()),this.spawn(l,!0).filter(o)}};function cp(u,o,l,d){for(var h=[],p=new ua,v=u.cy().hasCompoundNodes(),b=0;b<u.length;b++){var y=u[b];l?h.push(y):v&&d(h,p,y)}for(;h.length>0;){var D=h.shift();o(D),p.add(D.id()),v&&d(h,p,D)}return u}function ev(u,o,l){if(l.isParent())for(var d=l._private.children,h=0;h<d.length;h++){var p=d[h];o.has(p.id())||u.push(p)}}function tv(u,o,l){if(l.isChild()){var d=l._private.parent;o.has(d.id())||u.push(d)}}function nv(u,o,l){tv(u,o,l),ev(u,o,l)}Gc.forEachDown=function(u){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return cp(this,u,o,ev)},Gc.forEachUp=function(u){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return cp(this,u,o,tv)},Gc.forEachUpAndDown=function(u){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return cp(this,u,o,nv)},Gc.ancestors=Gc.parents,$c=rv={data:fr.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:fr.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:fr.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:fr.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:fr.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:fr.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var o=this[0];if(o)return o._private.data.id}},$c.attr=$c.data,$c.removeAttr=$c.removeData;var St=rv,Ln={};function el(u){return function(o){var l=this;if(void 0===o&&(o=!0),0===l.length);else if(l.isNode()&&!l.removed()){for(var d=0,h=l[0],p=h._private.edges,g=0;g<p.length;g++){var v=p[g];!o&&v.isLoop()||(d+=u(h,v))}return d}}}function Co(u,o){return function(l){for(var d,h=this.nodes(),p=0;p<h.length;p++){var v=h[p][u](l);void 0!==v&&(void 0===d||o(v,d))&&(d=v)}return d}}Yt(Ln,{degree:el(function(u,o){return o.source().same(o.target())?2:1}),indegree:el(function(u,o){return o.target().same(u)?1:0}),outdegree:el(function(u,o){return o.source().same(u)?1:0})}),Yt(Ln,{minDegree:Co("degree",function(u,o){return u<o}),maxDegree:Co("degree",function(u,o){return u>o}),minIndegree:Co("indegree",function(u,o){return u<o}),maxIndegree:Co("indegree",function(u,o){return u>o}),minOutdegree:Co("outdegree",function(u,o){return u<o}),maxOutdegree:Co("outdegree",function(u,o){return u>o})}),Yt(Ln,{totalDegree:function(o){for(var l=0,d=this.nodes(),h=0;h<d.length;h++)l+=d[h].degree(o);return l}});var yr,dp,Ru=function(o,l,d){for(var h=0;h<o.length;h++){var p=o[h];if(!p.locked()){var g=p._private.position,v={x:null!=l.x?l.x-g.x:0,y:null!=l.y?l.y-g.y:0};p.isParent()&&!(0===v.x&&0===v.y)&&p.children().shift(v,d),p.dirtyBoundingBoxCache()}}},So={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(o){o.updateCompoundBounds()},beforeSet:function(o,l){Ru(o,l,!1)},onSet:function(o){o.dirtyCompoundBoundsCache()},canSet:function(o){return!o.locked()}};yr=dp={position:fr.data(So),silentPosition:fr.data(Yt({},So,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(o,l){Ru(o,l,!0)},onSet:function(o){o.dirtyCompoundBoundsCache()}})),positions:function(o,l){if(Te(o))l?this.silentPosition(o):this.position(o);else if(We(o)){var d=o,h=this.cy();h.startBatch();for(var p=0;p<this.length;p++){var v,g=this[p];(v=d(g,p))&&(l?g.silentPosition(v):g.position(v))}h.endBatch()}return this},silentPositions:function(o){return this.positions(o,!0)},shift:function(o,l,d){var h;if(Te(o)?(h={x:fe(o.x)?o.x:0,y:fe(o.y)?o.y:0},d=l):me(o)&&fe(l)&&((h={x:0,y:0})[o]=l),null!=h){var p=this.cy();p.startBatch();for(var g=0;g<this.length;g++){var v=this[g];if(!(p.hasCompoundNodes()&&v.isChild()&&v.ancestors().anySame(this))){var b=v.position(),y={x:b.x+h.x,y:b.y+h.y};d?v.silentPosition(y):v.position(y)}}p.endBatch()}return this},silentShift:function(o,l){return Te(o)?this.shift(o,!0):me(o)&&fe(l)&&this.shift(o,l,!0),this},renderedPosition:function(o,l){var d=this[0],h=this.cy(),p=h.zoom(),g=h.pan(),v=Te(o)?o:void 0,b=void 0!==v||void 0!==l&&me(o);if(d&&d.isNode()){if(!b){var x=d.position();return v=Hn(x,p,g),void 0===o?v:v[o]}for(var y=0;y<this.length;y++){var D=this[y];void 0!==l?D.position(o,(l-g[o])/p):void 0!==v&&D.position(zn(v,p,g))}}else if(!b)return;return this},relativePosition:function(o,l){var d=this[0],h=this.cy(),p=Te(o)?o:void 0,g=void 0!==p||void 0!==l&&me(o),v=h.hasCompoundNodes();if(d&&d.isNode()){if(!g){var O=d.position(),V=v?d.parent():null,W=V&&V.length>0;W&&(V=V[0]);var te=W?V.position():{x:0,y:0};return p={x:O.x-te.x,y:O.y-te.y},void 0===o?p:p[o]}for(var b=0;b<this.length;b++){var y=this[b],D=v?y.parent():null,x=D&&D.length>0;x&&(D=D[0]);var k=x?D.position():{x:0,y:0};void 0!==l?y.position(o,l+k[o]):void 0!==p&&y.position({x:p.x+k.x,y:p.y+k.y})}}else if(!g)return;return this}},yr.modelPosition=yr.point=yr.position,yr.modelPositions=yr.points=yr.positions,yr.renderedPoint=yr.renderedPosition,yr.relativePoint=yr.relativePosition;var tl,nl,hp=dp;tl=nl={},nl.renderedBoundingBox=function(u){var o=this.boundingBox(u),l=this.cy(),d=l.zoom(),h=l.pan(),p=o.x1*d+h.x,g=o.x2*d+h.x,v=o.y1*d+h.y,b=o.y2*d+h.y;return{x1:p,x2:g,y1:v,y2:b,w:g-p,h:b-v}},nl.dirtyCompoundBoundsCache=function(){var u=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=this.cy();return o.styleEnabled()&&o.hasCompoundNodes()?(this.forEachUp(function(l){if(l.isParent()){var d=l._private;d.compoundBoundsClean=!1,d.bbCache=null,u||l.emitAndNotify("bounds")}}),this):this},nl.updateCompoundBounds=function(){var u=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=this.cy();if(!o.styleEnabled()||!o.hasCompoundNodes())return this;if(!u&&o.batching())return this;function l(g){if(g.isParent()){var v=g._private,b=g.children(),y="include"===g.pstyle("compound-sizing-wrt-labels").value,D={width:{val:g.pstyle("min-width").pfValue,left:g.pstyle("min-width-bias-left"),right:g.pstyle("min-width-bias-right")},height:{val:g.pstyle("min-height").pfValue,top:g.pstyle("min-height-bias-top"),bottom:g.pstyle("min-height-bias-bottom")}},x=b.boundingBox({includeLabels:y,includeOverlays:!1,useCache:!1}),_=v.position;(0===x.w||0===x.h)&&((x={w:g.pstyle("width").pfValue,h:g.pstyle("height").pfValue}).x1=_.x-x.w/2,x.x2=_.x+x.w/2,x.y1=_.y-x.h/2,x.y2=_.y+x.h/2);var V=D.width.left.value;"px"===D.width.left.units&&D.width.val>0&&(V=100*V/D.width.val);var W=D.width.right.value;"px"===D.width.right.units&&D.width.val>0&&(W=100*W/D.width.val);var Y=D.height.top.value;"px"===D.height.top.units&&D.height.val>0&&(Y=100*Y/D.height.val);var te=D.height.bottom.value;"px"===D.height.bottom.units&&D.height.val>0&&(te=100*te/D.height.val);var ne=k(D.width.val-x.w,V,W),se=ne.biasDiff,Ee=ne.biasComplementDiff,Ce=k(D.height.val-x.h,Y,te),ae=Ce.biasDiff,be=Ce.biasComplementDiff;v.autoPadding=function O(de,Ae,Me,pe){if("%"!==Me.units)return"px"===Me.units?Me.pfValue:0;switch(pe){case"width":return de>0?Me.pfValue*de:0;case"height":return Ae>0?Me.pfValue*Ae:0;case"average":return de>0&&Ae>0?Me.pfValue*(de+Ae)/2:0;case"min":return de>0&&Ae>0?de>Ae?Me.pfValue*Ae:Me.pfValue*de:0;case"max":return de>0&&Ae>0?de>Ae?Me.pfValue*de:Me.pfValue*Ae:0;default:return 0}}(x.w,x.h,g.pstyle("padding"),g.pstyle("padding-relative-to").value),v.autoWidth=Math.max(x.w,D.width.val),_.x=(-se+x.x1+x.x2+Ee)/2,v.autoHeight=Math.max(x.h,D.height.val),_.y=(-ae+x.y1+x.y2+be)/2}function k(de,Ae,Me){var pe=0,Le=0,Se=Ae+Me;return de>0&&Se>0&&(pe=Ae/Se*de,Le=Me/Se*de),{biasDiff:pe,biasComplementDiff:Le}}}for(var d=0;d<this.length;d++){var h=this[d],p=h._private;(!p.compoundBoundsClean||u)&&(l(h),o.batching()||(p.compoundBoundsClean=!0))}return this};var _o=function(o){return o===1/0||o===-1/0?0:o},ao=function(o,l,d,h,p){h-l==0||p-d==0||null==l||null==d||null==h||null==p||(o.x1=l<o.x1?l:o.x1,o.x2=h>o.x2?h:o.x2,o.y1=d<o.y1?d:o.y1,o.y2=p>o.y2?p:o.y2,o.w=o.x2-o.x1,o.h=o.y2-o.y1)},Yr=function(o,l){return null==l?o:ao(o,l.x1,l.y1,l.x2,l.y2)},Fs=function(o,l,d){return Zs(o,l,d)},Wc=function(o,l,d){if(!l.cy().headless()){var b,y,h=l._private,p=h.rstyle,g=p.arrowWidth/2;if("none"!==l.pstyle(d+"-arrow-shape").value){"source"===d?(b=p.srcX,y=p.srcY):"target"===d?(b=p.tgtX,y=p.tgtY):(b=p.midX,y=p.midY);var D=h.arrowBounds=h.arrowBounds||{},x=D[d]=D[d]||{};x.x1=b-g,x.y1=y-g,x.x2=b+g,x.y2=y+g,x.w=x.x2-x.x1,x.h=x.y2-x.y1,Or(x,1),ao(o,x.x1,x.y1,x.x2,x.y2)}}},rl=function(o,l,d){if(!l.cy().headless()){var h,p=l._private,g=p.rstyle;if(l.pstyle((h=d?d+"-":"")+"label").strValue){var Me,pe,Le,Se,b=l.pstyle("text-halign"),y=l.pstyle("text-valign"),D=Fs(g,"labelWidth",d),x=Fs(g,"labelHeight",d),_=Fs(g,"labelX",d),k=Fs(g,"labelY",d),O=l.pstyle(h+"text-margin-x").pfValue,V=l.pstyle(h+"text-margin-y").pfValue,W=l.isEdge(),Y=l.pstyle(h+"text-rotation"),te=l.pstyle("text-outline-width").pfValue,se=l.pstyle("text-border-width").pfValue/2,Ee=l.pstyle("text-background-padding").pfValue,ae=x,be=D,de=be/2,Ae=ae/2;if(W)Me=_-de,pe=_+de,Le=k-Ae,Se=k+Ae;else{switch(b.value){case"left":Me=_-be,pe=_;break;case"center":Me=_-de,pe=_+de;break;case"right":Me=_,pe=_+be}switch(y.value){case"top":Le=k-ae,Se=k;break;case"center":Le=k-Ae,Se=k+Ae;break;case"bottom":Le=k,Se=k+ae}}Me+=O-Math.max(te,se)-Ee-2,pe+=O+Math.max(te,se)+Ee+2,Le+=V-Math.max(te,se)-Ee-2,Se+=V+Math.max(te,se)+Ee+2;var qe=d||"main",Be=p.labelBounds,je=Be[qe]=Be[qe]||{};je.x1=Me,je.y1=Le,je.x2=pe,je.y2=Se,je.w=pe-Me,je.h=Se-Le;var Ke=W&&"autorotate"===Y.strValue;if(Ke||null!=Y.pfValue&&0!==Y.pfValue){var at=Ke?Fs(p.rstyle,"labelAngle",d):Y.pfValue,et=Math.cos(at),Je=Math.sin(at),wt=(Me+pe)/2,xt=(Le+Se)/2;if(!W){switch(b.value){case"left":wt=pe;break;case"right":wt=Me}switch(y.value){case"top":xt=Se;break;case"bottom":xt=Le}}var yt=function(Cn,Vt){return{x:(Cn-=wt)*et-(Vt-=xt)*Je+wt,y:Cn*Je+Vt*et+xt}},mt=yt(Me,Le),Xe=yt(Me,Se),Dt=yt(pe,Le),Ct=yt(pe,Se);Me=Math.min(mt.x,Xe.x,Dt.x,Ct.x),pe=Math.max(mt.x,Xe.x,Dt.x,Ct.x),Le=Math.min(mt.y,Xe.y,Dt.y,Ct.y),Se=Math.max(mt.y,Xe.y,Dt.y,Ct.y)}var Pt=qe+"Rot",Bt=Be[Pt]=Be[Pt]||{};Bt.x1=Me,Bt.y1=Le,Bt.x2=pe,Bt.y2=Se,Bt.w=pe-Me,Bt.h=Se-Le,ao(o,Me,Le,pe,Se),ao(p.labelBounds.all,Me,Le,pe,Se)}return o}},iv=function(o){var l=0,d=function(g){return(g?1:0)<<l++},h=0;return h+=d(o.incudeNodes),h+=d(o.includeEdges),h+=d(o.includeLabels),h+=d(o.includeMainLabels),h+=d(o.includeSourceLabels),(h+=d(o.includeTargetLabels))+d(o.includeOverlays)},fp=function(o){if(o.isEdge()){var l=o.source().position(),d=o.target().position(),h=function(g){return Math.round(g)};return function(o,l){var d={value:0,done:!1},h=0,p=o.length;return Sc({next:function(){return h<p?d.value=o[h++]:d.done=!0,d}},void 0)}([h(l.x),h(l.y),h(d.x),h(d.y)])}return 0},sv=function(o,l){var h,d=o._private,p=o.isEdge(),v=(null==l?ah:iv(l))===ah,b=fp(o),y=d.bbCachePosKey===b,D=l.useCache&&y,x=function(V){return null==V._private.bbCache||V._private.styleDirty};if(!D||x(o)||p&&x(o.source())||x(o.target())?(y||o.recalculateRenderedStyle(D),h=function(o,l){var D,x,_,k,O,V,d=o._private.cy,h=d.styleEnabled(),p=d.headless(),g=Er(),v=o._private,b=o.isNode(),y=o.isEdge(),W=v.rstyle,Y=b&&h?o.pstyle("bounds-expansion").pfValue:[0],te=function(ln){return"none"!==ln.pstyle("display").value},ne=!h||te(o)&&(!y||te(o.source())&&te(o.target()));if(ne){var Ee=0;h&&l.includeOverlays&&0!==o.pstyle("overlay-opacity").value&&(Ee=o.pstyle("overlay-padding").value);var ae=0;h&&l.includeUnderlays&&0!==o.pstyle("underlay-opacity").value&&(ae=o.pstyle("underlay-padding").value);var be=Math.max(Ee,ae),Ae=0;if(h&&(Ae=o.pstyle("width").pfValue/2),b&&l.includeNodes){var Me=o.position();O=Me.x,V=Me.y;var Le=o.outerWidth()/2,qe=o.outerHeight()/2;ao(g,D=O-Le,_=V-qe,x=O+Le,k=V+qe)}else if(y&&l.includeEdges)if(h&&!p){var Be=o.pstyle("curve-style").strValue;if(D=Math.min(W.srcX,W.midX,W.tgtX),x=Math.max(W.srcX,W.midX,W.tgtX),_=Math.min(W.srcY,W.midY,W.tgtY),k=Math.max(W.srcY,W.midY,W.tgtY),ao(g,D-=Ae,_-=Ae,x+=Ae,k+=Ae),"haystack"===Be){var je=W.haystackPts;if(je&&2===je.length){if((D=je[0].x)>(x=je[1].x)){var Ke=D;D=x,x=Ke}if((_=je[0].y)>(k=je[1].y)){var tt=_;_=k,k=tt}ao(g,D-Ae,_-Ae,x+Ae,k+Ae)}}else if("bezier"===Be||"unbundled-bezier"===Be||"segments"===Be||"taxi"===Be){var at;switch(Be){case"bezier":case"unbundled-bezier":at=W.bezierPts;break;case"segments":case"taxi":at=W.linePts}if(null!=at)for(var et=0;et<at.length;et++){var Je=at[et];ao(g,D=Je.x-Ae,_=Je.y-Ae,x=Je.x+Ae,k=Je.y+Ae)}}}else{var xt=o.source().position(),mt=o.target().position();if((D=xt.x)>(x=mt.x)){var Xe=D;D=x,x=Xe}if((_=xt.y)>(k=mt.y)){var Dt=_;_=k,k=Dt}ao(g,D-=Ae,_-=Ae,x+=Ae,k+=Ae)}if(h&&l.includeEdges&&y&&(Wc(g,o,"mid-source"),Wc(g,o,"mid-target"),Wc(g,o,"source"),Wc(g,o,"target")),h&&"yes"===o.pstyle("ghost").value){var Pt=o.pstyle("ghost-offset-x").pfValue,Bt=o.pstyle("ghost-offset-y").pfValue;ao(g,g.x1+Pt,g.y1+Bt,g.x2+Pt,g.y2+Bt)}var vn=v.bodyBounds=v.bodyBounds||{};Ya(vn,g),yo(vn,Y),Or(vn,1),h&&ao(g,(D=g.x1)-be,(_=g.y1)-be,(x=g.x2)+be,(k=g.y2)+be);var Cn=v.overlayBounds=v.overlayBounds||{};Ya(Cn,g),yo(Cn,Y),Or(Cn,1);var Vt=v.labelBounds=v.labelBounds||{};null!=Vt.all?function(o){o.x1=1/0,o.y1=1/0,o.x2=-1/0,o.y2=-1/0,o.w=0,o.h=0}(Vt.all):Vt.all=Er(),h&&l.includeLabels&&(l.includeMainLabels&&rl(g,o,null),y&&(l.includeSourceLabels&&rl(g,o,"source"),l.includeTargetLabels&&rl(g,o,"target")))}return g.x1=_o(g.x1),g.y1=_o(g.y1),g.x2=_o(g.x2),g.y2=_o(g.y2),g.w=_o(g.x2-g.x1),g.h=_o(g.y2-g.y1),g.w>0&&g.h>0&&ne&&(yo(g,Y),Or(g,1)),g}(o,qc),d.bbCache=h,d.bbCachePosKey=b):h=d.bbCache,!v){var k=o.isNode();h=Er(),(l.includeNodes&&k||l.includeEdges&&!k)&&Yr(h,l.includeOverlays?d.overlayBounds:d.bodyBounds),l.includeLabels&&(l.includeMainLabels&&(!p||l.includeSourceLabels&&l.includeTargetLabels)?Yr(h,d.labelBounds.all):(l.includeMainLabels&&Yr(h,d.labelBounds.mainRot),l.includeSourceLabels&&Yr(h,d.labelBounds.sourceRot),l.includeTargetLabels&&Yr(h,d.labelBounds.targetRot))),h.w=h.x2-h.x1,h.h=h.y2-h.y1}return h},qc={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,useCache:!0},ah=iv(qc),lh=ni(qc);nl.boundingBox=function(u){var o;if(1!==this.length||null==this[0]._private.bbCache||this[0]._private.styleDirty||void 0!==u&&void 0!==u.useCache&&!0!==u.useCache){o=Er();var l=lh(u=u||qc),d=this;if(d.cy().styleEnabled())for(var g=0;g<d.length;g++){var v=d[g],b=v._private,y=fp(v);v.recalculateRenderedStyle(l.useCache&&b.bbCachePosKey===y&&!b.styleDirty)}this.updateCompoundBounds(!u.useCache);for(var _=0;_<d.length;_++)Yr(o,sv(d[_],l))}else u=void 0===u?qc:lh(u),o=sv(this[0],u);return o.x1=_o(o.x1),o.y1=_o(o.y1),o.x2=_o(o.x2),o.y2=_o(o.y2),o.w=_o(o.x2-o.x1),o.h=_o(o.y2-o.y1),o},nl.dirtyBoundingBoxCache=function(){for(var u=0;u<this.length;u++){var o=this[u]._private;o.bbCache=null,o.bbCachePosKey=null,o.bodyBounds=null,o.overlayBounds=null,o.labelBounds.all=null,o.labelBounds.source=null,o.labelBounds.target=null,o.labelBounds.main=null,o.labelBounds.sourceRot=null,o.labelBounds.targetRot=null,o.labelBounds.mainRot=null,o.arrowBounds.source=null,o.arrowBounds.target=null,o.arrowBounds["mid-source"]=null,o.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},nl.boundingBoxAt=function(u){var o=this.nodes(),l=this.cy(),d=l.hasCompoundNodes(),h=l.collection();if(d&&(h=o.filter(function(y){return y.isParent()}),o=o.not(h)),Te(u)){var p=u;u=function(){return p}}l.startBatch(),o.forEach(function(D,x){return D._private.bbAtOldPos=u(D,x)}).silentPositions(u),d&&(h.dirtyCompoundBoundsCache(),h.dirtyBoundingBoxCache(),h.updateCompoundBounds(!0));var b=function(o){return{x1:o.x1,x2:o.x2,w:o.w,y1:o.y1,y2:o.y2,h:o.h}}(this.boundingBox({useCache:!1}));return o.silentPositions(function(D){return D._private.bbAtOldPos}),d&&(h.dirtyCompoundBoundsCache(),h.dirtyBoundingBoxCache(),h.updateCompoundBounds(!0)),l.endBatch(),b},tl.boundingbox=tl.bb=tl.boundingBox,tl.renderedBoundingbox=tl.renderedBoundingBox;var Hl,Yc,ov=nl;Hl=Yc={};var pp=function(o){o.uppercaseName=en(o.name),o.autoName="auto"+o.uppercaseName,o.labelName="label"+o.uppercaseName,o.outerName="outer"+o.uppercaseName,o.uppercaseOuterName=en(o.outerName),Hl[o.name]=function(){var d=this[0],h=d._private;if(d){if(h.cy._private.styleEnabled){if(d.isParent())return d.updateCompoundBounds(),h[o.autoName]||0;var v=d.pstyle(o.name);return"label"===v.strValue?(d.recalculateRenderedStyle(),h.rstyle[o.labelName]||0):v.pfValue}return 1}},Hl["outer"+o.uppercaseName]=function(){var d=this[0];if(d)return d._private.cy._private.styleEnabled?d[o.name]()+d.pstyle("border-width").pfValue+2*d.padding():1},Hl["rendered"+o.uppercaseName]=function(){var d=this[0];if(d)return d[o.name]()*this.cy().zoom()},Hl["rendered"+o.uppercaseOuterName]=function(){var d=this[0];if(d)return d[o.outerName]()*this.cy().zoom()}};pp({name:"width"}),pp({name:"height"}),Yc.padding=function(){var u=this[0],o=u._private;return u.isParent()?(u.updateCompoundBounds(),void 0!==o.autoPadding?o.autoPadding:u.pstyle("padding").pfValue):u.pstyle("padding").pfValue},Yc.paddedHeight=function(){var u=this[0];return u.height()+2*u.padding()},Yc.paddedWidth=function(){var u=this[0];return u.width()+2*u.padding()};var gp=Yc,il={controlPoints:{get:function(o){return o.renderer().getControlPoints(o)},mult:!0},segmentPoints:{get:function(o){return o.renderer().getSegmentPoints(o)},mult:!0},sourceEndpoint:{get:function(o){return o.renderer().getSourceEndpoint(o)}},targetEndpoint:{get:function(o){return o.renderer().getTargetEndpoint(o)}},midpoint:{get:function(o){return o.renderer().getEdgeMidpoint(o)}}},dv=Object.keys(il).reduce(function(u,o){var l=il[o],d=function(o){return"rendered"+o[0].toUpperCase()+o.substr(1)}(o);return u[o]=function(){return function(o,l){if(o.isEdge())return l(o)}(this,l.get)},u[d]=l.mult?function(){return function(o,l){if(o.isEdge()){var d=o.cy(),h=d.pan(),p=d.zoom();return l(o).map(function(g){return Hn(g,p,h)})}}(this,l.get)}:function(){return function(o,l){if(o.isEdge()){var d=o.cy();return Hn(l(o),d.zoom(),d.pan())}}(this,l.get)},u},{}),hw=Yt({},hp,ov,gp,dv),vp=function(o,l){this.recycle(o,l)};function Xc(){return!1}function uh(){return!0}vp.prototype={instanceString:function(){return"event"},recycle:function(o,l){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Xc,null!=o&&o.preventDefault?(this.type=o.type,this.isDefaultPrevented=o.defaultPrevented?uh:Xc):null!=o&&o.type?l=o:this.type=o,null!=l&&(this.originalEvent=l.originalEvent,this.type=null!=l.type?l.type:this.type,this.cy=l.cy,this.target=l.target,this.position=l.position,this.renderedPosition=l.renderedPosition,this.namespace=l.namespace,this.layout=l.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var d=this.position,h=this.cy.zoom(),p=this.cy.pan();this.renderedPosition={x:d.x*h+p.x,y:d.y*h+p.y}}this.timeStamp=o&&o.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=uh;var o=this.originalEvent;o&&o.preventDefault&&o.preventDefault()},stopPropagation:function(){this.isPropagationStopped=uh;var o=this.originalEvent;o&&o.stopPropagation&&o.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=uh,this.stopPropagation()},isDefaultPrevented:Xc,isPropagationStopped:Xc,isImmediatePropagationStopped:Xc};var hv=/^([^.]+)(\.(?:[^.]+))?$/,Kc={qualifierCompare:function(o,l){return o===l},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(o){return o},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},Qc=Object.keys(Kc),yp={};function Jc(){for(var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yp,o=arguments.length>1?arguments[1]:void 0,l=0;l<Qc.length;l++){var d=Qc[l];this[d]=u[d]||Kc[d]}this.context=o||this.context,this.listeners=[],this.emitting=0}var sl=Jc.prototype,zl=function(o,l,d,h,p,g,v){We(h)&&(p=h,h=null),v&&(g=null==g?v:Yt({},g,v));for(var b=ze(d)?d:d.split(/\s+/),y=0;y<b.length;y++){var D=b[y];if(!Ge(D)){var x=D.match(hv);if(x&&!1===l(o,D,x[1],x[2]?x[2]:null,h,p,g))break}}},Nu=function(o,l){return o.addEventFields(o.context,l),new vp(l.type,l)};sl.on=sl.addListener=function(u,o,l,d,h){return zl(this,function(p,g,v,b,y,D,x){We(D)&&p.listeners.push({event:g,callback:D,type:v,namespace:b,qualifier:y,conf:x})},u,o,l,d,h),this},sl.one=function(u,o,l,d){return this.on(u,o,l,d,{one:!0})},sl.removeListener=sl.off=function(u,o,l,d){var h=this;0!==this.emitting&&(this.listeners=function(o){return o.slice()}(this.listeners));for(var p=this.listeners,g=function(y){var D=p[y];zl(h,function(x,_,k,O,V,W){if((D.type===k||"*"===u)&&(!O&&".*"!==D.namespace||D.namespace===O)&&(!V||x.qualifierCompare(D.qualifier,V))&&(!W||D.callback===W))return p.splice(y,1),!1},u,o,l,d)},v=p.length-1;v>=0;v--)g(v);return this},sl.removeAllListeners=function(){return this.removeListener("*")},sl.emit=sl.trigger=function(u,o,l){var d=this.listeners,h=d.length;return this.emitting++,ze(o)||(o=[o]),function(o,l,d){if(function(o){return"event"===Pe(o)}(d))l(o,d);else if(Te(d))l(o,Nu(o,d));else for(var h=ze(d)?d:d.split(/\s+/),p=0;p<h.length;p++){var g=h[p];if(!Ge(g)){var v=g.match(hv);v&&l(o,Nu(o,{type:v[1],namespace:v[2]?v[2]:null,target:o.context}))}}}(this,function(p,g){null!=l&&(h=(d=[{event:g.event,type:g.type,namespace:g.namespace,callback:l}]).length);for(var v=function(D){var x=d[D];if(x.type===g.type&&(!x.namespace||x.namespace===g.namespace||".*"===x.namespace)&&p.eventMatches(p.context,x,g)){var _=[g];null!=o&&function(o,l){for(var d=0;d<l.length;d++)o.push(l[d])}(_,o),p.beforeEmit(p.context,x,g),x.conf&&x.conf.one&&(p.listeners=p.listeners.filter(function(V){return V!==x}));var k=p.callbackContext(p.context,x,g),O=x.callback.apply(k,_);p.afterEmit(p.context,x,g),!1===O&&(g.stopPropagation(),g.preventDefault())}},b=0;b<h;b++)v(b);p.bubble(p.context)&&!g.isPropagationStopped()&&p.parent(p.context).emit(g,o)},u),this.emitting--,this};var U1={qualifierCompare:function(o,l){return null==o||null==l?null==o&&null==l:o.sameText(l)},eventMatches:function(o,l,d){var h=l.qualifier;return null==h||o!==d.target&&Qe(d.target)&&h.matches(d.target)},addEventFields:function(o,l){l.cy=o.cy(),l.target=o},callbackContext:function(o,l,d){return null!=l.qualifier?d.target:o},beforeEmit:function(o,l){l.conf&&l.conf.once&&l.conf.onceCollection.removeListener(l.event,l.qualifier,l.callback)},bubble:function(){return!0},parent:function(o){return o.isChild()?o.parent():o.cy()}},Pu=function(o){return me(o)?new ma(o):o},pw={createEmitter:function(){for(var o=0;o<this.length;o++){var l=this[o],d=l._private;d.emitter||(d.emitter=new Jc(U1,l))}return this},emitter:function(){return this._private.emitter},on:function(o,l,d){for(var h=Pu(l),p=0;p<this.length;p++)this[p].emitter().on(o,h,d);return this},removeListener:function(o,l,d){for(var h=Pu(l),p=0;p<this.length;p++)this[p].emitter().removeListener(o,h,d);return this},removeAllListeners:function(){for(var o=0;o<this.length;o++)this[o].emitter().removeAllListeners();return this},one:function(o,l,d){for(var h=Pu(l),p=0;p<this.length;p++)this[p].emitter().one(o,h,d);return this},once:function(o,l,d){for(var h=Pu(l),p=0;p<this.length;p++)this[p].emitter().on(o,h,d,{once:!0,onceCollection:this})},emit:function(o,l){for(var d=0;d<this.length;d++)this[d].emitter().emit(o,l);return this},emitAndNotify:function(o,l){if(0!==this.length)return this.cy().notify(o,this),this.emit(o,l),this}};fr.eventAliasesOn(pw);var fv={nodes:function(o){return this.filter(function(l){return l.isNode()}).filter(o)},edges:function(o){return this.filter(function(l){return l.isEdge()}).filter(o)},byGroup:function(){for(var o=this.spawn(),l=this.spawn(),d=0;d<this.length;d++){var h=this[d];h.isNode()?o.push(h):l.push(h)}return{nodes:o,edges:l}},filter:function(o,l){if(void 0===o)return this;if(me(o)||Ne(o))return new ma(o).filter(this);if(We(o)){for(var d=this.spawn(),h=this,p=0;p<h.length;p++){var g=h[p];(l?o.apply(l,[g,p,h]):o(g,p,h))&&d.push(g)}return d}return this.spawn()},not:function(o){if(o){me(o)&&(o=this.filter(o));for(var l=this.spawn(),d=0;d<this.length;d++){var h=this[d];o.has(h)||l.push(h)}return l}return this},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(o){if(me(o))return this.filter(o);for(var d=this.spawn(),g=this.length<o.length,v=g?this:o,b=g?o:this,y=0;y<v.length;y++){var D=v[y];b.has(D)&&d.push(D)}return d},xor:function(o){var l=this._private.cy;me(o)&&(o=l.$(o));var d=this.spawn(),p=o,g=function(b,y){for(var D=0;D<b.length;D++){var x=b[D];y.hasElementWithId(x._private.data.id)||d.push(x)}};return g(this,p),g(p,this),d},diff:function(o){var l=this._private.cy;me(o)&&(o=l.$(o));var d=this.spawn(),h=this.spawn(),p=this.spawn(),v=o,b=function(D,x,_){for(var k=0;k<D.length;k++){var O=D[k];x.hasElementWithId(O._private.data.id)?p.merge(O):_.push(O)}};return b(this,v,d),b(v,this,h),{left:d,right:h,both:p}},add:function(o){var l=this._private.cy;if(!o)return this;if(me(o)){var d=o;o=l.mutableElements().filter(d)}for(var h=this.spawnSelf(),p=0;p<o.length;p++){var g=o[p];!this.has(g)&&h.push(g)}return h},merge:function(o){var l=this._private,d=l.cy;if(!o)return this;if(o&&me(o)){var h=o;o=d.mutableElements().filter(h)}for(var p=l.map,g=0;g<o.length;g++){var v=o[g],b=v._private.data.id;if(!p.has(b)){var D=this.length++;this[D]=v,p.set(b,{ele:v,index:D})}}return this},unmergeAt:function(o){var d=this[o].id(),p=this._private.map;if(this[o]=void 0,p.delete(d),this.length>1&&o!==this.length-1){var v=this.length-1,b=this[v],y=b._private.data.id;this[v]=void 0,this[o]=b,p.set(y,{ele:b,index:o})}return this.length--,this},unmergeOne:function(o){var p=this._private.map.get((o=o[0])._private.data.id);return p?(this.unmergeAt(p.index),this):this},unmerge:function(o){var l=this._private.cy;if(!o)return this;if(o&&me(o)){var d=o;o=l.mutableElements().filter(d)}for(var h=0;h<o.length;h++)this.unmergeOne(o[h]);return this},unmergeBy:function(o){for(var l=this.length-1;l>=0;l--)o(this[l])&&this.unmergeAt(l);return this},map:function(o,l){for(var d=[],h=this,p=0;p<h.length;p++){var g=h[p],v=l?o.apply(l,[g,p,h]):o(g,p,h);d.push(v)}return d},reduce:function(o,l){for(var d=l,h=this,p=0;p<h.length;p++)d=o(d,h[p],p,h);return d},max:function(o,l){for(var h,d=-1/0,p=this,g=0;g<p.length;g++){var v=p[g],b=l?o.apply(l,[v,g,p]):o(v,g,p);b>d&&(d=b,h=v)}return{value:d,ele:h}},min:function(o,l){for(var h,d=1/0,p=this,g=0;g<p.length;g++){var v=p[g],b=l?o.apply(l,[v,g,p]):o(v,g,p);b<d&&(d=b,h=v)}return{value:d,ele:h}}},nr=fv;nr.u=nr["|"]=nr["+"]=nr.union=nr.or=nr.add,nr["\\"]=nr["!"]=nr["-"]=nr.difference=nr.relativeComplement=nr.subtract=nr.not,nr.n=nr["&"]=nr["."]=nr.and=nr.intersection=nr.intersect,nr["^"]=nr["(+)"]=nr["(-)"]=nr.symmetricDifference=nr.symdiff=nr.xor,nr.fnFilter=nr.filterFn=nr.stdFilter=nr.filter,nr.complement=nr.abscomp=nr.absoluteComplement;var o,gw=function(o,l){var h=o.cy().hasCompoundNodes();function p(D){var x=D.pstyle("z-compound-depth");return"auto"===x.value?h?D.zDepth():0:"bottom"===x.value?-1:"top"===x.value?yu:0}var g=p(o)-p(l);if(0!==g)return g;function v(D){return"auto"===D.pstyle("z-index-compare").value&&D.isNode()?1:0}var b=v(o)-v(l);if(0!==b)return b;var y=o.pstyle("z-index").value-l.pstyle("z-index").value;return 0!==y?y:o.poolIndex()-l.poolIndex()},Lu={forEach:function(o,l){if(We(o))for(var d=this.length,h=0;h<d;h++){var p=this[h];if(!1===(l?o.apply(l,[p,h,this]):o(p,h,this)))break}return this},toArray:function(){for(var o=[],l=0;l<this.length;l++)o.push(this[l]);return o},slice:function(o,l){var d=[],h=this.length;null==l&&(l=h),null==o&&(o=0),o<0&&(o=h+o),l<0&&(l=h+l);for(var p=o;p>=0&&p<l&&p<h;p++)d.push(this[p]);return this.spawn(d)},size:function(){return this.length},eq:function(o){return this[o]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(o){if(!We(o))return this;var l=this.toArray().sort(o);return this.spawn(l)},sortByZIndex:function(){return this.sort(gw)},zDepth:function(){var o=this[0];if(o){var l=o._private;if("nodes"===l.group){var h=l.data.parent?o.parents().size():0;return o.isParent()?h:yu-1}var g=l.target,v=l.source.zDepth(),b=g.zDepth();return Math.max(v,b,0)}}};Lu.each=Lu.forEach,o="undefined",(typeof Symbol>"u"?"undefined":ee(Symbol))!=o&&ee(Symbol.iterator)!=o&&(Lu[Symbol.iterator]=function(){var d=this,h={value:void 0,done:!1},p=0,g=this.length;return K({next:function(){return p<g?h.value=d[p++]:(h.value=void 0,h.done=!0),h}},Symbol.iterator,function(){return this})});var gv=ni({nodeDimensionsIncludeLabels:!1}),ol={layoutDimensions:function(o){var l;if(o=gv(o),this.takesUpSpace())if(o.nodeDimensionsIncludeLabels){var d=this.boundingBox();l={w:d.w,h:d.h}}else l={w:this.outerWidth(),h:this.outerHeight()};else l={w:0,h:0};return(0===l.w||0===l.h)&&(l.w=l.h=1),l},layoutPositions:function(o,l,d){var h=this.nodes().filter(function(Ee){return!Ee.isParent()}),p=this.cy(),g=l.eles,v=function(Ce){return Ce.id()},b=dt(d,v);o.emit({type:"layoutstart",layout:o}),o.animations=[];var D=l.spacingFactor&&1!==l.spacingFactor,_=function(){if(!D)return null;for(var Ce=Er(),ae=0;ae<h.length;ae++){var de=b(h[ae],ae);Jd(Ce,de.x,de.y)}return Ce}(),k=dt(function(Ee,Ce){var ae=b(Ee,Ce);return D&&(ae=function(Ce,ae,be){var de_x=ae.x1+ae.w/2,de_y=ae.y1+ae.h/2;return{x:de_x+(be.x-de_x)*Ce,y:de_y+(be.y-de_y)*Ce}}(Math.abs(l.spacingFactor),_,ae)),null!=l.transform&&(ae=l.transform(Ee,ae)),ae},v);if(l.animate){for(var O=0;O<h.length;O++){var V=h[O],W=k(V,O);if(null==l.animateFilter||l.animateFilter(V,O)){var te=V.animation({position:W,duration:l.animationDuration,easing:l.animationEasing});o.animations.push(te)}else V.position(W)}if(l.fit){var ne=p.animation({fit:{boundingBox:g.boundingBoxAt(k),padding:l.padding},duration:l.animationDuration,easing:l.animationEasing});o.animations.push(ne)}else if(void 0!==l.zoom&&void 0!==l.pan){var se=p.animation({zoom:l.zoom,pan:l.pan,duration:l.animationDuration,easing:l.animationEasing});o.animations.push(se)}o.animations.forEach(function(Ee){return Ee.play()}),o.one("layoutready",l.ready),o.emit({type:"layoutready",layout:o}),jc.all(o.animations.map(function(Ee){return Ee.promise()})).then(function(){o.one("layoutstop",l.stop),o.emit({type:"layoutstop",layout:o})})}else h.positions(k),l.fit&&p.fit(l.eles,l.padding),null!=l.zoom&&p.zoom(l.zoom),l.pan&&p.pan(l.pan),o.one("layoutready",l.ready),o.emit({type:"layoutready",layout:o}),o.one("layoutstop",l.stop),o.emit({type:"layoutstop",layout:o});return this},layout:function(o){return this.cy().makeLayout(Yt({},o,{eles:this}))}};function bp(u,o,l){var p,d=l._private,h=d.styleCache=d.styleCache||[];return null!=(p=h[u])||(p=h[u]=o(l)),p}function Zc(u,o){return u=la(u),function(d){return bp(u,o,d)}}function jl(u,o){u=la(u);var l=function(h){return o.call(h)};return function(){var h=this[0];if(h)return bp(u,l,h)}}ol.createLayout=ol.makeLayout=ol.layout;var Mi={recalculateRenderedStyle:function(o){var l=this.cy(),d=l.renderer(),h=l.styleEnabled();return d&&h&&d.recalculateRenderedStyle(this,o),this},dirtyStyleCache:function(){var d,o=this.cy(),l=function(p){return p._private.styleCache=null};return o.hasCompoundNodes()?((d=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(d.connectedEdges()),d.forEach(l)):this.forEach(function(h){l(h),h.connectedEdges().forEach(l)}),this},updateStyle:function(o){var l=this._private.cy;if(!l.styleEnabled())return this;if(l.batching())return l._private.batchStyleEles.merge(this),this;var p=this;o=!(!o&&void 0!==o),l.hasCompoundNodes()&&(p=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var g=p;return o?g.emitAndNotify("style"):g.emit("style"),p.forEach(function(v){return v._private.styleDirty=!0}),this},cleanStyle:function(){var o=this.cy();if(o.styleEnabled())for(var l=0;l<this.length;l++){var d=this[l];d._private.styleDirty&&(d._private.styleDirty=!1,o.style().apply(d))}},parsedStyle:function(o){var l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],d=this[0],h=d.cy();if(h.styleEnabled()&&d){this.cleanStyle();var p=d._private.style[o];return p??(l?h.style().getDefaultProperty(o):null)}},numericStyle:function(o){var l=this[0];if(l.cy().styleEnabled()&&l){var d=l.pstyle(o);return void 0!==d.pfValue?d.pfValue:d.value}},numericStyleUnits:function(o){var l=this[0];if(l.cy().styleEnabled()&&l)return l.pstyle(o).units},renderedStyle:function(o){var l=this.cy();if(!l.styleEnabled())return this;var d=this[0];return d?l.style().getRenderedStyle(d,o):void 0},style:function(o,l){var d=this.cy();if(!d.styleEnabled())return this;var p=d.style();if(Te(o))p.applyBypass(this,o,!1),this.emitAndNotify("style");else if(me(o)){if(void 0===l){var v=this[0];return v?p.getStylePropertyValue(v,o):void 0}p.applyBypass(this,o,l,!1),this.emitAndNotify("style")}else if(void 0===o){var b=this[0];return b?p.getRawStyle(b):void 0}return this},removeStyle:function(o){var l=this.cy();if(!l.styleEnabled())return this;var h=l.style(),p=this;if(void 0===o)for(var g=0;g<p.length;g++)h.removeAllBypasses(p[g],!1);else{o=o.split(/\s+/);for(var b=0;b<p.length;b++)h.removeBypasses(p[b],o,!1)}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var o=this.cy();if(!o.styleEnabled())return 1;var l=o.hasCompoundNodes(),d=this[0];if(d){var h=d._private,p=d.pstyle("opacity").value;if(!l)return p;var g=h.data.parent?d.parents():null;if(g)for(var v=0;v<g.length;v++)p*=g[v].pstyle("opacity").value;return p}},transparent:function(){if(!this.cy().styleEnabled())return!1;var l=this[0],d=l.cy().hasCompoundNodes();return l?d?0===l.effectiveOpacity():0===l.pstyle("opacity").value:void 0},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function Fu(u,o){var d=u._private.data.parent?u.parents():null;if(d)for(var h=0;h<d.length;h++)if(!o(d[h]))return!1;return!0}function ed(u){var o=u.ok,l=u.edgeOkViaNode||u.ok,d=u.parentOk||u.ok;return function(){var h=this.cy();if(!h.styleEnabled())return!0;var p=this[0],g=h.hasCompoundNodes();if(p){var v=p._private;if(!o(p))return!1;if(p.isNode())return!g||Fu(p,d);var b=v.source,y=v.target;return l(b)&&(!g||Fu(b,l))&&(b===y||l(y)&&(!g||Fu(y,l)))}}}var ya=Zc("eleTakesUpSpace",function(u){return"element"===u.pstyle("display").value&&0!==u.width()&&(!u.isNode()||0!==u.height())});Mi.takesUpSpace=jl("takesUpSpace",ed({ok:ya}));var $1=Zc("eleInteractive",function(u){return"yes"===u.pstyle("events").value&&"visible"===u.pstyle("visibility").value&&ya(u)}),mv=Zc("parentInteractive",function(u){return"visible"===u.pstyle("visibility").value&&ya(u)});Mi.interactive=jl("interactive",ed({ok:$1,parentOk:mv,edgeOkViaNode:ya})),Mi.noninteractive=function(){var u=this[0];if(u)return!u.interactive()};var vv=Zc("eleVisible",function(u){return"visible"===u.pstyle("visibility").value&&0!==u.pstyle("opacity").pfValue&&ya(u)});Mi.visible=jl("visible",ed({ok:vv,edgeOkViaNode:ya})),Mi.hidden=function(){var u=this[0];if(u)return!u.visible()},Mi.isBundledBezier=jl("isBundledBezier",function(){return!!this.cy().styleEnabled()&&!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace()}),Mi.bypass=Mi.css=Mi.style,Mi.renderedCss=Mi.renderedStyle,Mi.removeBypass=Mi.removeCss=Mi.removeStyle,Mi.pstyle=Mi.parsedStyle;var Ai={};function yv(u){return function(){var o=arguments,l=[];if(2===o.length){var d=o[0],h=o[1];this.on(u.event,d,h)}else if(1===o.length&&We(o[0])){var p=o[0];this.on(u.event,p)}else if(0===o.length||1===o.length&&ze(o[0])){for(var g=1===o.length?o[0]:null,v=0;v<this.length;v++){var b=this[v],y=!u.ableField||b._private[u.ableField],D=b._private[u.field]!=u.value;if(u.overrideAble){var x=u.overrideAble(b);if(void 0!==x&&(y=x,!x))return this}y&&(b._private[u.field]=u.value,D&&l.push(b))}var _=this.spawn(l);_.updateStyle(),_.emit(u.event),g&&_.emit(g)}return this}}function ba(u){Ai[u.field]=function(){var o=this[0];if(o){if(u.overrideField){var l=u.overrideField(o);if(void 0!==l)return l}return o._private[u.field]}},Ai[u.on]=yv({event:u.on,field:u.field,ableField:u.ableField,overrideAble:u.overrideAble,value:!0}),Ai[u.off]=yv({event:u.off,field:u.field,ableField:u.ableField,overrideAble:u.overrideAble,value:!1})}ba({field:"locked",overrideField:function(o){return!!o.cy().autolock()||void 0},on:"lock",off:"unlock"}),ba({field:"grabbable",overrideField:function(o){return!o.cy().autoungrabify()&&!o.pannable()&&void 0},on:"grabify",off:"ungrabify"}),ba({field:"selected",ableField:"selectable",overrideAble:function(o){return!o.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),ba({field:"selectable",overrideField:function(o){return!o.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),Ai.deselect=Ai.unselect,Ai.grabbed=function(){var u=this[0];if(u)return u._private.grabbed},ba({field:"active",on:"activate",off:"unactivate"}),ba({field:"pannable",on:"panify",off:"unpanify"}),Ai.inactive=function(){var u=this[0];if(u)return!u._private.active};var fi={},wp=function(o){return function(d){for(var p=[],g=0;g<this.length;g++){var v=this[g];if(v.isNode()){for(var b=!1,y=v.connectedEdges(),D=0;D<y.length;D++){var x=y[D],_=x.source(),k=x.target();if(o.noIncomingEdges&&k===v&&_!==v||o.noOutgoingEdges&&_===v&&k!==v){b=!0;break}}b||p.push(v)}}return this.spawn(p,!0).filter(d)}},dh=function(o){return function(l){for(var h=[],p=0;p<this.length;p++){var g=this[p];if(g.isNode())for(var v=g.connectedEdges(),b=0;b<v.length;b++){var y=v[b],D=y.source(),x=y.target();o.outgoing&&D===g?(h.push(y),h.push(x)):o.incoming&&x===g&&(h.push(y),h.push(D))}}return this.spawn(h,!0).filter(l)}},hh=function(o){return function(l){for(var d=this,h=[],p={};;){var g=o.outgoing?d.outgoers():d.incomers();if(0===g.length)break;for(var v=!1,b=0;b<g.length;b++){var y=g[b],D=y.id();p[D]||(p[D]=!0,h.push(y),v=!0)}if(!v)break;d=g}return this.spawn(h,!0).filter(l)}};function bv(u){return function(l){for(var d=[],h=0;h<this.length;h++){var g=this[h]._private[u.attr];g&&d.push(g)}return this.spawn(d,!0).filter(l)}}function Dp(u){return function(l){var d=[],h=this._private.cy,p=u||{};me(l)&&(l=h.$(l));for(var g=0;g<l.length;g++)for(var v=l[g]._private.edges,b=0;b<v.length;b++){var y=v[b],D=y._private.data,x=this.hasElementWithId(D.source)&&l.hasElementWithId(D.target),_=l.hasElementWithId(D.source)&&this.hasElementWithId(D.target);(x||_)&&((p.thisIsSrc||p.thisIsTgt)&&(p.thisIsSrc&&!x||p.thisIsTgt&&!_)||d.push(y))}return this.spawn(d,!0)}}function xp(u){return u=Yt({},{codirected:!1},u),function(d){for(var h=[],p=this.edges(),g=u,v=0;v<p.length;v++)for(var y=p[v]._private,D=y.source,x=D._private.data.id,_=y.data.target,k=D._private.edges,O=0;O<k.length;O++){var V=k[O],W=V._private.data,Y=W.target,te=W.source,ne=Y===_&&te===x;(g.codirected&&ne||!g.codirected&&(ne||x===Y&&_===te))&&h.push(V)}return this.spawn(h,!0).filter(d)}}fi.clearTraversalCache=function(){for(var u=0;u<this.length;u++)this[u]._private.traversalCache=null},Yt(fi,{roots:wp({noIncomingEdges:!0}),leaves:wp({noOutgoingEdges:!0}),outgoers:Ls(dh({outgoing:!0}),"outgoers"),successors:hh({outgoing:!0}),incomers:Ls(dh({incoming:!0}),"incomers"),predecessors:hh({incoming:!0})}),Yt(fi,{neighborhood:Ls(function(u){for(var o=[],l=this.nodes(),d=0;d<l.length;d++)for(var h=l[d],p=h.connectedEdges(),g=0;g<p.length;g++){var v=p[g],b=v.source(),y=v.target(),D=h===b?y:b;D.length>0&&o.push(D[0]),o.push(v[0])}return this.spawn(o,!0).filter(u)},"neighborhood"),closedNeighborhood:function(o){return this.neighborhood().add(this).filter(o)},openNeighborhood:function(o){return this.neighborhood(o)}}),fi.neighbourhood=fi.neighborhood,fi.closedNeighbourhood=fi.closedNeighborhood,fi.openNeighbourhood=fi.openNeighborhood,Yt(fi,{source:Ls(function(o){var d,l=this[0];return l&&(d=l._private.source||l.cy().collection()),d&&o?d.filter(o):d},"source"),target:Ls(function(o){var d,l=this[0];return l&&(d=l._private.target||l.cy().collection()),d&&o?d.filter(o):d},"target"),sources:bv({attr:"source"}),targets:bv({attr:"target"})}),Yt(fi,{edgesWith:Ls(Dp(),"edgesWith"),edgesTo:Ls(Dp({thisIsSrc:!0}),"edgesTo")}),Yt(fi,{connectedEdges:Ls(function(u){for(var o=[],d=0;d<this.length;d++){var h=this[d];if(h.isNode())for(var p=h._private.edges,g=0;g<p.length;g++)o.push(p[g])}return this.spawn(o,!0).filter(u)},"connectedEdges"),connectedNodes:Ls(function(u){for(var o=[],d=0;d<this.length;d++){var h=this[d];h.isEdge()&&(o.push(h.source()[0]),o.push(h.target()[0]))}return this.spawn(o,!0).filter(u)},"connectedNodes"),parallelEdges:Ls(xp(),"parallelEdges"),codirectedEdges:Ls(xp({codirected:!0}),"codirectedEdges")}),Yt(fi,{components:function(o){var l=this,d=l.cy(),h=d.collection(),p=null==o?l.nodes():o.nodes(),g=[];null!=o&&p.empty()&&(p=o.sources());var v=function(D,x){h.merge(D),p.unmerge(D),x.merge(D)};if(p.empty())return l.spawn();var b=function(){var D=d.collection();g.push(D);var x=p[0];v(x,D),l.bfs({directed:!1,roots:x,visit:function(k){return v(k,D)}}),D.forEach(function(_){_.connectedEdges().forEach(function(k){l.has(k)&&D.has(k.source())&&D.has(k.target())&&D.merge(k)})})};do{b()}while(p.length>0);return g},component:function(){var o=this[0];return o.cy().mutableElements().components(o)[0]}}),fi.componentsOf=fi.components;var pi=function(o,l){var d=arguments.length>2&&void 0!==arguments[2]&&arguments[2],h=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(void 0!==o){var p=new Xi,g=!1;if(l){if(l.length>0&&Te(l[0])&&!Qe(l[0])){g=!0;for(var v=[],b=new ua,y=0,D=l.length;y<D;y++){var x=l[y];null==x.data&&(x.data={});var _=x.data;if(null==_.id)_.id=Ga();else if(o.hasElementWithId(_.id)||b.has(_.id))continue;var k=new Wa(o,x,!1);v.push(k),b.add(_.id)}l=v}}else l=[];this.length=0;for(var O=0,V=l.length;O<V;O++){var W=l[O][0];if(null!=W){var Y=W._private.data.id;(!d||!p.has(Y))&&(d&&p.set(Y,{index:this.length,ele:W}),this[this.length]=W,this.length++)}}this._private={eles:this,cy:o,get map(){return null==this.lazyMap&&this.rebuildMap(),this.lazyMap},set map(te){this.lazyMap=te},rebuildMap:function(){for(var ne=this.lazyMap=new Xi,se=this.eles,Ee=0;Ee<se.length;Ee++){var Ce=se[Ee];ne.set(Ce.id(),{index:Ee,ele:Ce})}}},d&&(this._private.map=p),g&&!h&&this.restore()}else gr("A collection must have a reference to the core")},br=Wa.prototype=pi.prototype=Object.create(Array.prototype);br.instanceString=function(){return"collection"},br.spawn=function(u,o){return new pi(this.cy(),u,o)},br.spawnSelf=function(){return this.spawn(this)},br.cy=function(){return this._private.cy},br.renderer=function(){return this._private.cy.renderer()},br.element=function(){return this[0]},br.collection=function(){return kt(this)?this:new pi(this._private.cy,[this])},br.unique=function(){return new pi(this._private.cy,this,!0)},br.hasElementWithId=function(u){return this._private.map.has(u=""+u)},br.getElementById=function(u){var o=this._private.cy,l=this._private.map.get(u=""+u);return l?l.ele:new pi(o)},br.$id=br.getElementById,br.poolIndex=function(){return this._private.cy._private.elements._private.map.get(this[0]._private.data.id).index},br.indexOf=function(u){return this._private.map.get(u[0]._private.data.id).index},br.indexOfId=function(u){return this._private.map.get(u=""+u).index},br.json=function(u){var o=this.element(),l=this.cy();if(null==o&&u)return this;if(null!=o){var d=o._private;if(Te(u)){if(l.startBatch(),u.data){o.data(u.data);var h=d.data;if(o.isEdge()){var p=!1,g={},v=u.data.source,b=u.data.target;null!=v&&v!=h.source&&(g.source=""+v,p=!0),null!=b&&b!=h.target&&(g.target=""+b,p=!0),p&&(o=o.move(g))}else{var D=u.data.parent;"parent"in u.data&&(null!=D||null!=h.parent)&&D!=h.parent&&(void 0===D&&(D=null),null!=D&&(D=""+D),o=o.move({parent:D}))}}u.position&&o.position(u.position);var x=function(V,W,Y){var te=u[V];null!=te&&te!==d[V]&&(te?o[W]():o[Y]())};return x("removed","remove","restore"),x("selected","select","unselect"),x("selectable","selectify","unselectify"),x("locked","lock","unlock"),x("grabbable","grabify","ungrabify"),x("pannable","panify","unpanify"),null!=u.classes&&o.classes(u.classes),l.endBatch(),this}if(void 0===u){var _={data:gs(d.data),position:gs(d.position),group:d.group,removed:d.removed,selected:d.selected,selectable:d.selectable,locked:d.locked,grabbable:d.grabbable,pannable:d.pannable,classes:""},k=0;return d.classes.forEach(function(O){return _.classes+=0==k++?O:" "+O}),_}}},br.jsons=function(){for(var u=[],o=0;o<this.length;o++){var d=this[o].json();u.push(d)}return u},br.clone=function(){for(var u=this.cy(),o=[],l=0;l<this.length;l++){var h=this[l].json(),p=new Wa(u,h,!1);o.push(p)}return new pi(u,o)},br.copy=br.clone,br.restore=function(){for(var v,u=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],l=this,d=l.cy(),h=d._private,p=[],g=[],b=0,y=l.length;b<y;b++){var D=l[b];o&&!D.removed()||(D.isNode()?p.push(D):g.push(D))}v=p.concat(g);var x,_=function(){v.splice(x,1),x--};for(x=0;x<v.length;x++){var k=v[x],O=k._private,V=O.data;if(k.clearTraversalCache(),o||O.removed)if(void 0===V.id)V.id=Ga();else if(fe(V.id))V.id=""+V.id;else{if(Ge(V.id)||!me(V.id)){gr("Can not create element with invalid string ID `"+V.id+"`"),_();continue}if(d.hasElementWithId(V.id)){gr("Can not create second element with ID `"+V.id+"`"),_();continue}}var W=V.id;if(k.isNode()){var Y=O.position;null==Y.x&&(Y.x=0),null==Y.y&&(Y.y=0)}if(k.isEdge()){for(var te=k,ne=["source","target"],se=ne.length,Ee=!1,Ce=0;Ce<se;Ce++){var ae=ne[Ce],be=V[ae];fe(be)&&(be=V[ae]=""+V[ae]),null==be||""===be?(gr("Can not create edge `"+W+"` with unspecified "+ae),Ee=!0):d.hasElementWithId(be)||(gr("Can not create edge `"+W+"` with nonexistant "+ae+" `"+be+"`"),Ee=!0)}if(Ee){_();continue}var de=d.getElementById(V.source),Ae=d.getElementById(V.target);de.same(Ae)?de._private.edges.push(te):(de._private.edges.push(te),Ae._private.edges.push(te)),te._private.source=de,te._private.target=Ae}O.map=new Xi,O.map.set(W,{ele:k,index:0}),O.removed=!1,o&&d.addToPool(k)}for(var Me=0;Me<p.length;Me++){var pe=p[Me],Le=pe._private.data;fe(Le.parent)&&(Le.parent=""+Le.parent);var Se=Le.parent,qe=null!=Se;if(qe||pe._private.parent){var Be=pe._private.parent?d.collection().merge(pe._private.parent):d.getElementById(Se);if(Be.empty())Le.parent=void 0;else if(Be[0].removed())tr("Node added with missing parent, reference to parent removed"),Le.parent=void 0,pe._private.parent=null;else{for(var je=!1,Ke=Be;!Ke.empty();){if(pe.same(Ke)){je=!0,Le.parent=void 0;break}Ke=Ke.parent()}je||(Be[0]._private.children.push(pe),pe._private.parent=Be[0],h.hasCompoundNodes=!0)}}}if(v.length>0){for(var tt=v.length===l.length?l:new pi(d,v),at=0;at<tt.length;at++){var et=tt[at];et.isNode()||(et.parallelEdges().clearTraversalCache(),et.source().clearTraversalCache(),et.target().clearTraversalCache())}(h.hasCompoundNodes?d.collection().merge(tt).merge(tt.connectedNodes()).merge(tt.parent()):tt).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(u),u?tt.emitAndNotify("add"):o&&tt.emit("add")}return l},br.removed=function(){var u=this[0];return u&&u._private.removed},br.inside=function(){var u=this[0];return u&&!u._private.removed},br.remove=function(){var u=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],l=this,d=[],h={},p=l._private.cy;function g(Se){for(var qe=Se._private.edges,Be=0;Be<qe.length;Be++)b(qe[Be])}function v(Se){for(var qe=Se._private.children,Be=0;Be<qe.length;Be++)b(qe[Be])}function b(Se){var qe=h[Se.id()];o&&Se.removed()||qe||(h[Se.id()]=!0,Se.isNode()?(d.push(Se),g(Se),v(Se)):d.unshift(Se))}for(var y=0,D=l.length;y<D;y++){var x=l[y];b(x)}function _(Se,qe){Ho(Se._private.edges,qe),Se.clearTraversalCache()}function k(Se){Se.clearTraversalCache()}var O=[];function V(Se,qe){qe=qe[0];var Be=(Se=Se[0])._private.children,je=Se.id();Ho(Be,qe),qe._private.parent=null,O.ids[je]||(O.ids[je]=!0,O.push(Se))}O.ids={},l.dirtyCompoundBoundsCache(),o&&p.removeFromPool(d);for(var W=0;W<d.length;W++){var Y=d[W];if(Y.isEdge()){var te=Y.source()[0],ne=Y.target()[0];_(te,Y),_(ne,Y);for(var se=Y.parallelEdges(),Ee=0;Ee<se.length;Ee++){var Ce=se[Ee];k(Ce),Ce.isBundledBezier()&&Ce.dirtyBoundingBoxCache()}}else{var ae=Y.parent();0!==ae.length&&V(ae,Y)}o&&(Y._private.removed=!0)}var be=p._private.elements;p._private.hasCompoundNodes=!1;for(var de=0;de<be.length;de++){var Ae=be[de];if(Ae.isParent()){p._private.hasCompoundNodes=!0;break}}var Me=new pi(this.cy(),d);Me.size()>0&&(u?Me.emitAndNotify("remove"):o&&Me.emit("remove"));for(var pe=0;pe<O.length;pe++){var Le=O[pe];(!o||!Le.removed())&&Le.updateStyle()}return Me},br.move=function(u){var o=this._private.cy,l=this,d=!1,h=!1,p=function(O){return null==O?O:""+O};if(void 0!==u.source||void 0!==u.target){var g=p(u.source),v=p(u.target),b=null!=g&&o.hasElementWithId(g),y=null!=v&&o.hasElementWithId(v);(b||y)&&(o.batch(function(){l.remove(d,h),l.emitAndNotify("moveout");for(var k=0;k<l.length;k++){var O=l[k],V=O._private.data;O.isEdge()&&(b&&(V.source=g),y&&(V.target=v))}l.restore(d,h)}),l.emitAndNotify("move"))}else if(void 0!==u.parent){var D=p(u.parent);if(null===D||o.hasElementWithId(D)){var _=null===D?void 0:D;o.batch(function(){var k=l.remove(d,h);k.emitAndNotify("moveout");for(var O=0;O<l.length;O++){var V=l[O],W=V._private.data;V.isNode()&&(W.parent=_)}k.restore(d,h)}),l.emitAndNotify("move")}}return this},[Wm,j1,jo,dn,Gc,St,Ln,hw,pw,fv,{isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var o=this[0];if(o)return o._private.group}},Lu,ol,Mi,Ai,fi].forEach(function(u){Yt(br,u)});var vw={add:function(o){var l,d=this;if(Ne(o)){var h=o;if(h._private.cy===d)l=h.restore();else{for(var p=[],g=0;g<h.length;g++)p.push(h[g].json());l=new pi(d,p)}}else if(ze(o))l=new pi(d,o);else if(Te(o)&&(ze(o.nodes)||ze(o.edges))){for(var y=o,D=[],x=["nodes","edges"],_=0,k=x.length;_<k;_++){var O=x[_],V=y[O];if(ze(V))for(var W=0,Y=V.length;W<Y;W++){var te=Yt({group:O},V[W]);D.push(te)}}l=new pi(d,D)}else l=new Wa(d,o).collection();return l},remove:function(o){return Ne(o)||me(o)&&(o=this.$(o)),o.remove()}},Ul=function(){function u(d){return-d.tension*d.x-d.friction*d.v}function o(d,h,p){var g={x:d.x+p.dx*h,v:d.v+p.dv*h,tension:d.tension,friction:d.friction};return{dx:g.v,dv:u(g)}}function l(d,h){var p={dx:d.v,dv:u(d)},g=o(d,.5*h,p),v=o(d,.5*h,g),b=o(d,h,v),D=1/6*(p.dv+2*(g.dv+v.dv)+b.dv);return d.x=d.x+1/6*(p.dx+2*(g.dx+v.dx)+b.dx)*h,d.v=d.v+D*h,d}return function d(h,p,g){var _,k,O,v={x:-1,v:0,tension:null,friction:null},b=[0],y=0,D=1e-4;for(h=parseFloat(h)||500,p=parseFloat(p)||20,g=g||null,v.tension=h,v.friction=p,k=(_=null!==g)?(y=d(h,p))/g*.016:.016;O=l(O||v,k),b.push(1+O.x),y+=16,Math.abs(O.x)>D&&Math.abs(O.v)>D;);return _?function(V){return b[V*(b.length-1)|0]}:y}}(),xr=function(o,l,d,h){var p=function fh(u,o,l,d){var h=4,p=.001,g=1e-7,v=10,b=11,y=1/(b-1),D=typeof Float32Array<"u";if(4!==arguments.length)return!1;for(var x=0;x<4;++x)if("number"!=typeof arguments[x]||isNaN(arguments[x])||!isFinite(arguments[x]))return!1;u=Math.min(u,1),l=Math.min(l,1),u=Math.max(u,0),l=Math.max(l,0);var _=D?new Float32Array(b):new Array(b);function k(Ae,Me){return 1-3*Me+3*Ae}function O(Ae,Me){return 3*Me-6*Ae}function V(Ae){return 3*Ae}function W(Ae,Me,pe){return((k(Me,pe)*Ae+O(Me,pe))*Ae+V(Me))*Ae}function Y(Ae,Me,pe){return 3*k(Me,pe)*Ae*Ae+2*O(Me,pe)*Ae+V(Me)}function te(Ae,Me){for(var pe=0;pe<h;++pe){var Le=Y(Me,u,l);if(0===Le)return Me;Me-=(W(Me,u,l)-Ae)/Le}return Me}function ne(){for(var Ae=0;Ae<b;++Ae)_[Ae]=W(Ae*y,u,l)}function se(Ae,Me,pe){var Le,Se,qe=0;do{(Le=W(Se=Me+(pe-Me)/2,u,l)-Ae)>0?pe=Se:Me=Se}while(Math.abs(Le)>g&&++qe<v);return Se}function Ee(Ae){for(var Me=0,pe=1,Le=b-1;pe!==Le&&_[pe]<=Ae;++pe)Me+=y;--pe;var qe=Me+(Ae-_[pe])/(_[pe+1]-_[pe])*y,Be=Y(qe,u,l);return Be>=p?te(Ae,qe):0===Be?qe:se(Ae,Me,Me+y)}var Ce=!1;function ae(){Ce=!0,(u!==o||l!==d)&&ne()}var be=function(Me){return Ce||ae(),u===o&&l===d?Me:0===Me?0:1===Me?1:W(Ee(Me),o,d)};be.getControlPoints=function(){return[{x:u,y:o},{x:l,y:d}]};var de="generateBezier("+[u,o,l,d]+")";return be.toString=function(){return de},be}(o,l,d,h);return function(g,v,b){return g+(v-g)*p(b)}},td={linear:function(o,l,d){return o+(l-o)*d},ease:xr(.25,.1,.25,1),"ease-in":xr(.42,0,1,1),"ease-out":xr(0,0,.58,1),"ease-in-out":xr(.42,0,.58,1),"ease-in-sine":xr(.47,0,.745,.715),"ease-out-sine":xr(.39,.575,.565,1),"ease-in-out-sine":xr(.445,.05,.55,.95),"ease-in-quad":xr(.55,.085,.68,.53),"ease-out-quad":xr(.25,.46,.45,.94),"ease-in-out-quad":xr(.455,.03,.515,.955),"ease-in-cubic":xr(.55,.055,.675,.19),"ease-out-cubic":xr(.215,.61,.355,1),"ease-in-out-cubic":xr(.645,.045,.355,1),"ease-in-quart":xr(.895,.03,.685,.22),"ease-out-quart":xr(.165,.84,.44,1),"ease-in-out-quart":xr(.77,0,.175,1),"ease-in-quint":xr(.755,.05,.855,.06),"ease-out-quint":xr(.23,1,.32,1),"ease-in-out-quint":xr(.86,0,.07,1),"ease-in-expo":xr(.95,.05,.795,.035),"ease-out-expo":xr(.19,1,.22,1),"ease-in-out-expo":xr(1,0,0,1),"ease-in-circ":xr(.6,.04,.98,.335),"ease-out-circ":xr(.075,.82,.165,1),"ease-in-out-circ":xr(.785,.135,.15,.86),spring:function(o,l,d){if(0===d)return td.linear;var h=Ul(o,l,d);return function(p,g,v){return p+(g-p)*h(v)}},"cubic-bezier":xr};function Ep(u,o,l,d,h){if(1===d||o===l)return l;var p=h(o,l,d);return null==u||((u.roundValue||u.color)&&(p=Math.round(p)),void 0!==u.min&&(p=Math.max(p,u.min)),void 0!==u.max&&(p=Math.min(p,u.max))),p}function Gl(u,o){return null!=u.pfValue||null!=u.value?null==u.pfValue||null!=o&&"%"===o.type.units?u.value:u.pfValue:u}function Bu(u,o,l,d,h){var p=null!=h?h.type:null;l<0?l=0:l>1&&(l=1);var g=Gl(u,h),v=Gl(o,h);if(fe(g)&&fe(v))return Ep(p,g,v,l,d);if(ze(g)&&ze(v)){for(var b=[],y=0;y<v.length;y++){var D=g[y],x=v[y];if(null!=D&&null!=x){var _=Ep(p,D,x,l,d);b.push(_)}else b.push(x)}return b}}function Ti(u,o,l,d){var h=!d,p=u._private,g=o._private,v=g.easing,b=g.startTime,D=(d?u:u.cy()).style();if(!g.easingImpl)if(null==v)g.easingImpl=td.linear;else{var x,k,O;x=me(v)?D.parse("transition-timing-function",v).value:v,me(x)?(k=x,O=[]):(k=x[1],O=x.slice(2).map(function(tt){return+tt})),O.length>0?("spring"===k&&O.push(g.duration),g.easingImpl=td[k].apply(null,O)):g.easingImpl=td[k]}var W,V=g.easingImpl;if(W=0===g.duration?1:(l-b)/g.duration,g.applying&&(W=g.progress),W<0?W=0:W>1&&(W=1),null==g.delay){var Y=g.startPosition,te=g.position;if(te&&h&&!u.locked()){var ne={};$l(Y.x,te.x)&&(ne.x=Bu(Y.x,te.x,W,V)),$l(Y.y,te.y)&&(ne.y=Bu(Y.y,te.y,W,V)),u.position(ne)}var se=g.startPan,Ee=g.pan,Ce=p.pan,ae=null!=Ee&&d;ae&&($l(se.x,Ee.x)&&(Ce.x=Bu(se.x,Ee.x,W,V)),$l(se.y,Ee.y)&&(Ce.y=Bu(se.y,Ee.y,W,V)),u.emit("pan"));var be=g.startZoom,de=g.zoom,Ae=null!=de&&d;Ae&&($l(be,de)&&(p.zoom=mn(p.minZoom,Bu(be,de,W,V),p.maxZoom)),u.emit("zoom")),(ae||Ae)&&u.emit("viewport");var Me=g.style;if(Me&&Me.length>0&&h){for(var pe=0;pe<Me.length;pe++){var Le=Me[pe],Se=Le.name,Be=g.startStyle[Se],Ke=Bu(Be,Le,W,V,D.properties[Be.name]);D.overrideBypass(u,Se,Ke)}u.emit("style")}}return g.progress=W,W}function $l(u,o){return!!(null!=u&&null!=o&&(fe(u)&&fe(o)||u&&o))}function yw(u,o,l,d){var h=o._private;h.started=!0,h.startTime=l-h.progress*h.duration}function Cp(u,o){var l=o._private.aniEles,d=[];function h(D,x){var _=D._private,k=_.animation.current,O=_.animation.queue,V=!1;if(0===k.length){var W=O.shift();W&&k.push(W)}for(var Y=function(Ce){for(var ae=Ce.length-1;ae>=0;ae--)(0,Ce[ae])();Ce.splice(0,Ce.length)},te=k.length-1;te>=0;te--){var ne=k[te],se=ne._private;se.stopped?(k.splice(te,1),se.hooked=!1,se.playing=!1,se.started=!1,Y(se.frames)):!se.playing&&!se.applying||(se.playing&&se.applying&&(se.applying=!1),se.started||yw(0,ne,u),Ti(D,ne,u,x),se.applying&&(se.applying=!1),Y(se.frames),null!=se.step&&se.step(u),ne.completed()&&(k.splice(te,1),se.hooked=!1,se.playing=!1,se.started=!1,Y(se.completes)),V=!0)}return!x&&0===k.length&&0===O.length&&d.push(D),V}for(var p=!1,g=0;g<l.length;g++){var b=h(l[g]);p=p||b}var y=h(o,!0);(p||y)&&(l.length>0?o.notify("draw",l):o.notify("draw")),l.unmerge(d),o.emit("step")}var nd={animate:fr.animate(),animation:fr.animation(),animated:fr.animated(),clearQueue:fr.clearQueue(),delay:fr.delay(),delayAnimation:fr.delayAnimation(),stop:fr.stop(),addToAnimationPool:function(o){this.styleEnabled()&&this._private.aniEles.merge(o)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var o=this;if(o._private.animationsRunning=!0,o.styleEnabled()){var d=o.renderer();d&&d.beforeRender?d.beforeRender(function(p,g){Cp(g,o)},d.beforeRenderPriorities.animations):function l(){o._private.animationsRunning&&Ha(function(p){Cp(p,o),l()})}()}}},Vu={qualifierCompare:function(o,l){return null==o||null==l?null==o&&null==l:o.sameText(l)},eventMatches:function(o,l,d){var h=l.qualifier;return null==h||o!==d.target&&Qe(d.target)&&h.matches(d.target)},addEventFields:function(o,l){l.cy=o,l.target=o},callbackContext:function(o,l,d){return null!=l.qualifier?d.target:o}},wa=function(o){return me(o)?new ma(o):o},Wl={createEmitter:function(){var o=this._private;return o.emitter||(o.emitter=new Jc(Vu,this)),this},emitter:function(){return this._private.emitter},on:function(o,l,d){return this.emitter().on(o,wa(l),d),this},removeListener:function(o,l,d){return this.emitter().removeListener(o,wa(l),d),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(o,l,d){return this.emitter().one(o,wa(l),d),this},once:function(o,l,d){return this.emitter().one(o,wa(l),d),this},emit:function(o,l){return this.emitter().emit(o,l),this},emitAndNotify:function(o,l){return this.emit(o),this.notify(o,l),this}};fr.eventAliasesOn(Wl);var ph={png:function(o){return this._private.renderer.png(o=o||{})},jpg:function(o){var l=this._private.renderer;return(o=o||{}).bg=o.bg||"#fff",l.jpg(o)}};ph.jpeg=ph.jpg;var Hu={layout:function(o){var l=this;if(null!=o)if(null!=o.name){var p,d=o.name,h=l.extension("layout",d);if(null!=h)return p=me(o.eles)?l.$(o.eles):null!=o.eles?o.eles:l.$(),new h(Yt({},o,{cy:l,eles:p}));gr("No such layout `"+d+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else gr("A `name` must be specified to make a layout");else gr("Layout options must be specified to make a layout")}};Hu.createLayout=Hu.makeLayout=Hu.layout;var zu={notify:function(o,l){var d=this._private;if(this.batching()){d.batchNotifications=d.batchNotifications||{};var h=d.batchNotifications[o]=d.batchNotifications[o]||this.collection();null!=l&&h.merge(l)}else if(d.notificationsEnabled){var p=this.renderer();this.destroyed()||!p||p.notify(o,l)}},notifications:function(o){var l=this._private;return void 0===o?l.notificationsEnabled:(l.notificationsEnabled=!!o,this)},noNotifications:function(o){this.notifications(!1),o(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var o=this._private;return null==o.batchCount&&(o.batchCount=0),0===o.batchCount&&(o.batchStyleEles=this.collection(),o.batchNotifications={}),o.batchCount++,this},endBatch:function(){var o=this._private;if(0===o.batchCount)return this;if(o.batchCount--,0===o.batchCount){o.batchStyleEles.updateStyle();var l=this.renderer();Object.keys(o.batchNotifications).forEach(function(d){var h=o.batchNotifications[d];h.empty()?l.notify(d):l.notify(d,h)})}return this},batch:function(o){return this.startBatch(),o(),this.endBatch(),this},batchData:function(o){var l=this;return this.batch(function(){for(var d=Object.keys(o),h=0;h<d.length;h++){var p=d[h],g=o[p];l.getElementById(p).data(g)}})}},W1=ni({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),Sp={renderTo:function(o,l,d,h){return this._private.renderer.renderTo(o,l,d,h),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(o){var l=this,d=l.extension("renderer",o.name);if(null!=d){void 0!==o.wheelSensitivity&&tr("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var h=W1(o);h.cy=l,l._private.renderer=new d(h),this.notify("init")}else gr("Can not initialise: No such renderer `".concat(o.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))},destroyRenderer:function(){var o=this;o.notify("destroy");var l=o.container();if(l)for(l._cyreg=null;l.childNodes.length>0;)l.removeChild(l.childNodes[0]);o._private.renderer=null,o.mutableElements().forEach(function(d){var h=d._private;h.rscratch={},h.rstyle={},h.animation.current=[],h.animation.queue=[]})},onRender:function(o){return this.on("render",o)},offRender:function(o){return this.off("render",o)}};Sp.invalidateDimensions=Sp.resize;var Wt={collection:function(o,l){return me(o)?this.$(o):Ne(o)?o.collection():ze(o)?(l||(l={}),new pi(this,o,l.unique,l.removed)):new pi(this)},nodes:function(o){var l=this.$(function(d){return d.isNode()});return o?l.filter(o):l},edges:function(o){var l=this.$(function(d){return d.isEdge()});return o?l.filter(o):l},$:function(o){var l=this._private.elements;return o?l.filter(o):l.spawnSelf()},mutableElements:function(){return this._private.elements}};Wt.elements=Wt.filter=Wt.$;var Zi={apply:function(u){for(var o=this,h=o._private.cy.collection(),p=0;p<u.length;p++){var g=u[p],v=o.getContextMeta(g);if(!v.empty){var b=o.getContextStyle(v),y=o.applyContextStyle(v,b,g);g._private.appliedInitStyle?o.updateTransitions(g,y.diffProps):g._private.appliedInitStyle=!0,o.updateStyleHints(g)&&h.push(g)}}return h},getPropertiesDiff:function(u,o){var l=this,d=l._private.propDiffs=l._private.propDiffs||{},h=u+"-"+o,p=d[h];if(p)return p;for(var g=[],v={},b=0;b<l.length;b++){var y=l[b],x="t"===o[b],_="t"===u[b]!==x,k=y.mappedProperties.length>0;if(_||x&&k){var O=void 0;_&&k||_?O=y.properties:k&&(O=y.mappedProperties);for(var V=0;V<O.length;V++){for(var W=O[V],Y=W.name,te=!1,ne=b+1;ne<l.length&&("t"!==o[ne]||!(te=null!=l[ne].properties[W.name]));ne++);!v[Y]&&!te&&(v[Y]=!0,g.push(Y))}}}return d[h]=g,g},getContextMeta:function(u){for(var d,o=this,l="",h=u._private.styleCxtKey||"",p=0;p<o.length;p++){var g=o[p];l+=g.selector&&g.selector.matches(u)?"t":"f"}return d=o.getPropertiesDiff(h,l),u._private.styleCxtKey=l,{key:l,diffPropNames:d,empty:0===d.length}},getContextStyle:function(u){var o=u.key,d=this._private.contextStyles=this._private.contextStyles||{};if(d[o])return d[o];for(var h={_private:{key:o}},p=0;p<this.length;p++){var g=this[p];if("t"===o[p])for(var b=0;b<g.properties.length;b++){var y=g.properties[b];h[y.name]=y}}return d[o]=h,h},applyContextStyle:function(u,o,l){for(var h=u.diffPropNames,p={},g=this.types,v=0;v<h.length;v++){var b=h[v],y=o[b],D=l.pstyle(b);if(!y){if(!D)continue;y=D.bypass?{name:b,deleteBypassed:!0}:{name:b,delete:!0}}if(D!==y){if(y.mapped===g.fn&&null!=D&&null!=D.mapping&&D.mapping.value===y.value){var x=D.mapping;if((x.fnValue=y.value(l))===x.prevFnValue)continue}var k=p[b]={prev:D};this.applyParsedProperty(l,y),k.next=l.pstyle(b),k.next&&k.next.bypass&&(k.next=k.next.bypassed)}}return{diffProps:p}},updateStyleHints:function(u){var d,o=u._private,l=this,h=l.propertyGroupKeys,p=function(Pt,Bt,vn){return l.getPropertiesHash(Pt,Bt,vn)},g=o.styleKey;if(u.removed())return!1;var Pt,v="nodes"===o.group,b=u._private.style;d=Object.keys(b);for(var y=0;y<h.length;y++)o.styleKeys[h[y]]=[Bo,Vo];for(var x=function(Pt,Bt){return o.styleKeys[Bt][0]=za(Pt,o.styleKeys[Bt][0])},_=function(Pt,Bt){return o.styleKeys[Bt][1]=ja(Pt,o.styleKeys[Bt][1])},k=function(Pt,Bt){x(Pt,Bt),_(Pt,Bt)},O=function(Pt,Bt){for(var vn=0;vn<Pt.length;vn++){var Cn=Pt.charCodeAt(vn);x(Cn,Bt),_(Cn,Bt)}},Y=0;Y<d.length;Y++){var te=d[Y],ne=b[te];if(null!=ne){var se=this.properties[te],Ee=se.type,Ce=se.groupKey,ae=void 0;null!=se.hashOverride?ae=se.hashOverride(u,ne):null!=ne.pfValue&&(ae=ne.pfValue);var be=null==se.enums?ne.value:null,de=null!=ae,pe=ne.units;!Ee.number||!de&&null==be||Ee.multiple?O(ne.strValue,Ce):(k(-128<(Pt=de?ae:be)&&Pt<128&&Math.floor(Pt)!==Pt?2e9-(1024*Pt|0):Pt,Ce),!de&&null!=pe&&O(pe,Ce))}}for(var Se=[Bo,Vo],qe=0;qe<h.length;qe++){var je=o.styleKeys[h[qe]];Se[0]=za(je[0],Se[0]),Se[1]=ja(je[1],Se[1])}o.styleKey=function(o,l){return 2097152*o+l}(Se[0],Se[1]);var Ke=o.styleKeys;o.labelDimsKey=Ks(Ke.labelDimensions);var tt=p(u,["label"],Ke.labelDimensions);if(o.labelKey=Ks(tt),o.labelStyleKey=Ks(Qs(Ke.commonLabel,tt)),!v){var at=p(u,["source-label"],Ke.labelDimensions);o.sourceLabelKey=Ks(at),o.sourceLabelStyleKey=Ks(Qs(Ke.commonLabel,at));var et=p(u,["target-label"],Ke.labelDimensions);o.targetLabelKey=Ks(et),o.targetLabelStyleKey=Ks(Qs(Ke.commonLabel,et))}if(v){var Je=o.styleKeys,Xe=Je.pie,Dt=[Je.nodeBody,Je.nodeBorder,Je.backgroundImage,Je.compound,Xe].filter(function(Ct){return null!=Ct}).reduce(Qs,[Bo,Vo]);o.nodeKey=Ks(Dt),o.hasPie=null!=Xe&&Xe[0]!==Bo&&Xe[1]!==Vo}return g!==o.styleKey},clearStyleHints:function(u){var o=u._private;o.styleCxtKey="",o.styleKeys={},o.styleKey=null,o.labelKey=null,o.labelStyleKey=null,o.sourceLabelKey=null,o.sourceLabelStyleKey=null,o.targetLabelKey=null,o.targetLabelStyleKey=null,o.nodeKey=null,o.hasPie=null},applyParsedProperty:function(u,o){var p,l=this,d=o,h=u._private.style,g=l.types,v=l.properties[d.name].type,b=d.bypass,y=h[d.name],D=y&&y.bypass,x=u._private,_="mapping",k=function(wt){return null==wt?null:null!=wt.pfValue?wt.pfValue:wt.value},O=function(){var wt=k(y),xt=k(d);l.checkTriggers(u,d.name,wt,xt)};if(d&&"pie"===d.name.substr(0,3)&&tr("The pie style properties are deprecated.  Create charts using background images instead."),"curve-style"===o.name&&u.isEdge()&&("bezier"!==o.value&&u.isLoop()||"haystack"===o.value&&(u.source().isParent()||u.target().isParent()))&&(d=o=this.parse(o.name,"bezier",b)),d.delete)return h[d.name]=void 0,O(),!0;if(d.deleteBypassed)return y?!!y.bypass&&(y.bypassed=void 0,O(),!0):(O(),!0);if(d.deleteBypass)return y?!!y.bypass&&(h[d.name]=y.bypassed,O(),!0):(O(),!0);var V=function(){tr("Do not assign mappings to elements without corresponding data (i.e. ele `"+u.id()+"` has no mapping for property `"+d.name+"` with data field `"+d.field+"`); try a `["+d.field+"]` selector to limit scope to elements with `"+d.field+"` defined")};switch(d.mapped){case g.mapData:for(var W=d.field.split("."),Y=x.data,te=0;te<W.length&&Y;te++)Y=Y[W[te]];if(null==Y)return V(),!1;var se;if(!fe(Y))return tr("Do not use continuous mappers without specifying numeric data (i.e. `"+d.field+": "+Y+"` for `"+u.id()+"` is non-numeric)"),!1;var Ee=d.fieldMax-d.fieldMin;if((se=0===Ee?0:(Y-d.fieldMin)/Ee)<0?se=0:se>1&&(se=1),v.color){var Ce=d.valueMin[0],be=d.valueMin[1],de=d.valueMax[1],Ae=d.valueMin[2],Me=d.valueMax[2],pe=null==d.valueMin[3]?1:d.valueMin[3],Le=null==d.valueMax[3]?1:d.valueMax[3],Se=[Math.round(Ce+(d.valueMax[0]-Ce)*se),Math.round(be+(de-be)*se),Math.round(Ae+(Me-Ae)*se),Math.round(pe+(Le-pe)*se)];p={bypass:d.bypass,name:d.name,value:Se,strValue:"rgb("+Se[0]+", "+Se[1]+", "+Se[2]+")"}}else{if(!v.number)return!1;p=this.parse(d.name,d.valueMin+(d.valueMax-d.valueMin)*se,d.bypass,_)}if(!p)return V(),!1;p.mapping=d,d=p;break;case g.data:for(var Be=d.field.split("."),je=x.data,Ke=0;Ke<Be.length&&je;Ke++)je=je[Be[Ke]];if(null!=je&&(p=this.parse(d.name,je,d.bypass,_)),!p)return V(),!1;p.mapping=d,d=p;break;case g.fn:var et=null!=d.fnValue?d.fnValue:(0,d.value)(u);if(d.prevFnValue=et,null==et)return tr("Custom function mappers may not return null (i.e. `"+d.name+"` for ele `"+u.id()+"` is null)"),!1;if(!(p=this.parse(d.name,et,d.bypass,_)))return tr("Custom function mappers may not return invalid values for the property type (i.e. `"+d.name+"` for ele `"+u.id()+"` is invalid)"),!1;p.mapping=gs(d),d=p;break;case void 0:break;default:return!1}return b?(d.bypassed=D?y.bypassed:y,h[d.name]=d):D?y.bypassed=d:h[d.name]=d,O(),!0},cleanElements:function(u,o){for(var l=0;l<u.length;l++){var d=u[l];if(this.clearStyleHints(d),d.dirtyCompoundBoundsCache(),d.dirtyBoundingBoxCache(),o)for(var h=d._private.style,p=Object.keys(h),g=0;g<p.length;g++){var v=p[g],b=h[v];null!=b&&(b.bypass?b.bypassed=null:h[v]=null)}else d._private.style={}}},update:function(){this._private.cy.mutableElements().updateStyle()},updateTransitions:function(u,o){var l=this,d=u._private,h=u.pstyle("transition-property").value,p=u.pstyle("transition-duration").pfValue,g=u.pstyle("transition-delay").pfValue;if(h.length>0&&p>0){for(var v={},b=!1,y=0;y<h.length;y++){var D=h[y],x=u.pstyle(D),_=o[D];if(_){var O=_.prev,V=null!=_.next?_.next:x,W=!1,Y=void 0;O&&(fe(O.pfValue)&&fe(V.pfValue)?Y=O.pfValue+1e-6*(W=V.pfValue-O.pfValue):fe(O.value)&&fe(V.value)?Y=O.value+1e-6*(W=V.value-O.value):ze(O.value)&&ze(V.value)&&(W=O.value[0]!==V.value[0]||O.value[1]!==V.value[1]||O.value[2]!==V.value[2],Y=O.strValue),W&&(v[D]=V.strValue,this.applyBypass(u,D,Y),b=!0))}}if(!b)return;d.transitioning=!0,new jc(function(ne){g>0?u.delayAnimation(g).play().promise().then(ne):ne()}).then(function(){return u.animation({style:v,duration:p,easing:u.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){l.removeBypasses(u,h),u.emitAndNotify("style"),d.transitioning=!1})}else d.transitioning&&(this.removeBypasses(u,h),u.emitAndNotify("style"),d.transitioning=!1)},checkTrigger:function(u,o,l,d,h,p){var g=this.properties[o],v=h(g);null!=v&&v(l,d)&&p(g)},checkZOrderTrigger:function(u,o,l,d){var h=this;this.checkTrigger(u,o,l,d,function(p){return p.triggersZOrder},function(){h._private.cy.notify("zorder",u)})},checkBoundsTrigger:function(u,o,l,d){this.checkTrigger(u,o,l,d,function(h){return h.triggersBounds},function(h){u.dirtyCompoundBoundsCache(),u.dirtyBoundingBoxCache(),h.triggersBoundsOfParallelBeziers&&("curve-style"===o&&("bezier"===l||"bezier"===d)||"display"===o&&("none"===l||"none"===d))&&u.parallelEdges().forEach(function(p){p.isBundledBezier()&&p.dirtyBoundingBoxCache()})})},checkTriggers:function(u,o,l,d){u.dirtyStyleCache(),this.checkZOrderTrigger(u,o,l,d),this.checkBoundsTrigger(u,o,l,d)}},mh={applyBypass:function(u,o,l,d){var p=[];if("*"===o||"**"===o){if(void 0!==l)for(var v=0;v<this.properties.length;v++){var D=this.parse(this.properties[v].name,l,!0);D&&p.push(D)}}else if(me(o)){var x=this.parse(o,l,!0);x&&p.push(x)}else{if(!Te(o))return!1;var _=o;d=l;for(var k=Object.keys(_),O=0;O<k.length;O++){var V=k[O],W=_[V];if(void 0===W&&(W=_[Jt(V)]),void 0!==W){var Y=this.parse(V,W,!0);Y&&p.push(Y)}}}if(0===p.length)return!1;for(var te=!1,ne=0;ne<u.length;ne++){for(var se=u[ne],Ee={},Ce=void 0,ae=0;ae<p.length;ae++){var be=p[ae];if(d){var de=se.pstyle(be.name);Ce=Ee[be.name]={prev:de}}te=this.applyParsedProperty(se,gs(be))||te,d&&(Ce.next=se.pstyle(be.name))}te&&this.updateStyleHints(se),d&&this.updateTransitions(se,Ee,!0)}return te},overrideBypass:function(u,o,l){o=Ot(o);for(var d=0;d<u.length;d++){var h=u[d],p=h._private.style[o],g=this.properties[o].type,v=g.color,b=g.mutiple,y=p?null!=p.pfValue?p.pfValue:p.value:null;p&&p.bypass?(p.value=l,null!=p.pfValue&&(p.pfValue=l),p.strValue=v?"rgb("+l.join(",")+")":b?l.join(" "):""+l,this.updateStyleHints(h)):this.applyBypass(h,o,l),this.checkTriggers(h,o,y,l)}},removeAllBypasses:function(u,o){return this.removeBypasses(u,this.propertyNames,o)},removeBypasses:function(u,o,l){for(var h=0;h<u.length;h++){for(var p=u[h],g={},v=0;v<o.length;v++){var b=o[v],y=this.properties[b],D=p.pstyle(y.name);if(D&&D.bypass){var _=this.parse(b,"",!0),k=g[y.name]={prev:D};this.applyParsedProperty(p,_),k.next=p.pstyle(y.name)}}this.updateStyleHints(p),l&&this.updateTransitions(p,g,!0)}}},wv={getEmSizeInPixels:function(){var u=this.containerCss("font-size");return null!=u?parseFloat(u):1},containerCss:function(u){var l=this._private.cy.container();if(B&&l&&B.getComputedStyle)return B.getComputedStyle(l).getPropertyValue(u)}},Da={getRenderedStyle:function(u,o){return o?this.getStylePropertyValue(u,o,!0):this.getRawStyle(u,!0)},getRawStyle:function(u,o){var l=this;if(u=u[0]){for(var d={},h=0;h<l.properties.length;h++){var p=l.properties[h],g=l.getStylePropertyValue(u,p.name,o);null!=g&&(d[p.name]=g,d[Jt(p.name)]=g)}return d}},getIndexedStyle:function(u,o,l,d){return u.pstyle(o)[l][d]??u.cy().style().getDefaultProperty(o)[l][0]},getStylePropertyValue:function(u,o,l){if(u=u[0]){var h=this.properties[o];h.alias&&(h=h.pointsTo);var p=h.type,g=u.pstyle(h.name);if(g){var v=g.value,b=g.units,y=g.strValue;if(l&&p.number&&null!=v&&fe(v)){var D=u.cy().zoom(),x=function(W){return W*D},_=function(W,Y){return x(W)+Y},k=ze(v);return(k?b.every(function(V){return null!=V}):null!=b)?k?v.map(function(V,W){return _(V,b[W])}).join(" "):_(v,b):k?v.map(function(V){return me(V)?V:""+x(V)}).join(" "):""+x(v)}if(null!=y)return y}return null}},getAnimationStartStyle:function(u,o){for(var l={},d=0;d<o.length;d++){var p=o[d].name,g=u.pstyle(p);void 0!==g&&(g=Te(g)?this.parse(p,g.strValue):this.parse(p,g)),g&&(l[p]=g)}return l},getPropsList:function(u){var l=[],d=u,h=this.properties;if(d)for(var p=Object.keys(d),g=0;g<p.length;g++){var v=p[g],b=d[v],y=h[v]||h[Ot(v)],D=this.parse(y.name,b);D&&l.push(D)}return l},getNonDefaultPropertiesHash:function(u,o,l){var p,g,v,b,y,d=l.slice();for(b=0;b<o.length;b++)if(null!=(p=u.pstyle(o[b],!1)))if(null!=p.pfValue)d[0]=za(v,d[0]),d[1]=ja(v,d[1]);else for(g=p.strValue,y=0;y<g.length;y++)v=g.charCodeAt(y),d[0]=za(v,d[0]),d[1]=ja(v,d[1]);return d}};Da.getPropertiesHash=Da.getNonDefaultPropertiesHash;var _p={appendFromJson:function(u){for(var o=this,l=0;l<u.length;l++){var d=u[l],h=d.selector,p=d.style||d.css,g=Object.keys(p);o.selector(h);for(var v=0;v<g.length;v++){var b=g[v];o.css(b,p[b])}}return o},fromJson:function(u){var o=this;return o.resetToDefault(),o.appendFromJson(u),o},json:function(){for(var u=[],o=this.defaultLength;o<this.length;o++){for(var l=this[o],d=l.selector,h=l.properties,p={},g=0;g<h.length;g++){var v=h[g];p[v.name]=v.strValue}u.push({selector:d?d.toString():"core",style:p})}return u}},ql={appendFromString:function(u){var h,p,g,l=this,d=""+u;function v(){d=d.length>h.length?d.substr(h.length):""}function b(){p=p.length>g.length?p.substr(g.length):""}for(d=d.replace(/[/][*](\s|.)+?[*][/]/g,"");!d.match(/^\s*$/);){var D=d.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!D){tr("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+d);break}h=D[0];var x=D[1];if("core"!==x&&new ma(x).invalid)tr("Skipping parsing of block: Invalid selector found in string stylesheet: "+x),v();else{var k=D[2],O=!1;p=k;for(var V=[];!p.match(/^\s*$/);){var Y=p.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!Y){tr("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+k),O=!0;break}g=Y[0];var te=Y[1],ne=Y[2];this.properties[te]?l.parse(te,ne)?(V.push({name:te,val:ne}),b()):(tr("Skipping property: Invalid property definition in: "+g),b()):(tr("Skipping property: Invalid property name in: "+g),b())}if(O){v();break}l.selector(x);for(var Ce=0;Ce<V.length;Ce++){var ae=V[Ce];l.css(ae.name,ae.val)}v()}}return l},fromString:function(u){var o=this;return o.resetToDefault(),o.appendFromString(u),o}},zi={};(function(){var u=on,o=cr,l=$r,p=function(Dt){return"^"+Dt+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},g=function(Dt){var Ct=u+"|\\w+|"+o+"|"+l+"|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6}";return"^"+Dt+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+u+")\\s*\\,\\s*("+u+")\\s*,\\s*("+Ct+")\\s*\\,\\s*("+Ct+")\\)$"},v=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];zi.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:p("data")},layoutData:{mapping:!0,regex:p("layoutData")},scratch:{mapping:!0,regex:p("scratch")},mapData:{mapping:!0,regex:g("mapData")},mapLayoutData:{mapping:!0,regex:g("mapLayoutData")},mapScratch:{mapping:!0,regex:g("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:v,singleRegexMatchValue:!0},urls:{regexes:v,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(Dt,Ct){switch(Dt.length){case 2:return"deg"!==Ct[0]&&"rad"!==Ct[0]&&"deg"!==Ct[1]&&"rad"!==Ct[1];case 1:return me(Dt[0])||"deg"===Ct[0]||"rad"===Ct[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+u+")\\s*,\\s*("+u+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+u+")\\s*,\\s*("+u+")\\s*,\\s*("+u+")\\s*,\\s*("+u+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(Dt){var Ct=Dt.length;return 1===Ct||2===Ct||4===Ct}}};var b={zeroNonZero:function(Dt,Ct){return(null==Dt||null==Ct)&&Dt!==Ct||0==Dt&&0!=Ct||0!=Dt&&0==Ct},any:function(Dt,Ct){return Dt!=Ct},emptyNonEmpty:function(Dt,Ct){var Pt=Ge(Dt),Bt=Ge(Ct);return Pt&&!Bt||!Pt&&Bt}},y=zi.types,D=[{name:"label",type:y.text,triggersBounds:b.any,triggersZOrder:b.emptyNonEmpty},{name:"text-rotation",type:y.textRotation,triggersBounds:b.any},{name:"text-margin-x",type:y.bidirectionalSize,triggersBounds:b.any},{name:"text-margin-y",type:y.bidirectionalSize,triggersBounds:b.any}],x=[{name:"source-label",type:y.text,triggersBounds:b.any},{name:"source-text-rotation",type:y.textRotation,triggersBounds:b.any},{name:"source-text-margin-x",type:y.bidirectionalSize,triggersBounds:b.any},{name:"source-text-margin-y",type:y.bidirectionalSize,triggersBounds:b.any},{name:"source-text-offset",type:y.size,triggersBounds:b.any}],_=[{name:"target-label",type:y.text,triggersBounds:b.any},{name:"target-text-rotation",type:y.textRotation,triggersBounds:b.any},{name:"target-text-margin-x",type:y.bidirectionalSize,triggersBounds:b.any},{name:"target-text-margin-y",type:y.bidirectionalSize,triggersBounds:b.any},{name:"target-text-offset",type:y.size,triggersBounds:b.any}],k=[{name:"font-family",type:y.fontFamily,triggersBounds:b.any},{name:"font-style",type:y.fontStyle,triggersBounds:b.any},{name:"font-weight",type:y.fontWeight,triggersBounds:b.any},{name:"font-size",type:y.size,triggersBounds:b.any},{name:"text-transform",type:y.textTransform,triggersBounds:b.any},{name:"text-wrap",type:y.textWrap,triggersBounds:b.any},{name:"text-overflow-wrap",type:y.textOverflowWrap,triggersBounds:b.any},{name:"text-max-width",type:y.size,triggersBounds:b.any},{name:"text-outline-width",type:y.size,triggersBounds:b.any},{name:"line-height",type:y.positiveNumber,triggersBounds:b.any}],O=[{name:"text-valign",type:y.valign,triggersBounds:b.any},{name:"text-halign",type:y.halign,triggersBounds:b.any},{name:"color",type:y.color},{name:"text-outline-color",type:y.color},{name:"text-outline-opacity",type:y.zeroOneNumber},{name:"text-background-color",type:y.color},{name:"text-background-opacity",type:y.zeroOneNumber},{name:"text-background-padding",type:y.size,triggersBounds:b.any},{name:"text-border-opacity",type:y.zeroOneNumber},{name:"text-border-color",type:y.color},{name:"text-border-width",type:y.size,triggersBounds:b.any},{name:"text-border-style",type:y.borderStyle,triggersBounds:b.any},{name:"text-background-shape",type:y.textBackgroundShape,triggersBounds:b.any},{name:"text-justification",type:y.justification}],V=[{name:"events",type:y.bool},{name:"text-events",type:y.bool}],W=[{name:"display",type:y.display,triggersZOrder:b.any,triggersBounds:b.any,triggersBoundsOfParallelBeziers:!0},{name:"visibility",type:y.visibility,triggersZOrder:b.any},{name:"opacity",type:y.zeroOneNumber,triggersZOrder:b.zeroNonZero},{name:"text-opacity",type:y.zeroOneNumber},{name:"min-zoomed-font-size",type:y.size},{name:"z-compound-depth",type:y.zCompoundDepth,triggersZOrder:b.any},{name:"z-index-compare",type:y.zIndexCompare,triggersZOrder:b.any},{name:"z-index",type:y.nonNegativeInt,triggersZOrder:b.any}],Y=[{name:"overlay-padding",type:y.size,triggersBounds:b.any},{name:"overlay-color",type:y.color},{name:"overlay-opacity",type:y.zeroOneNumber,triggersBounds:b.zeroNonZero},{name:"overlay-shape",type:y.overlayShape,triggersBounds:b.any}],te=[{name:"underlay-padding",type:y.size,triggersBounds:b.any},{name:"underlay-color",type:y.color},{name:"underlay-opacity",type:y.zeroOneNumber,triggersBounds:b.zeroNonZero},{name:"underlay-shape",type:y.overlayShape,triggersBounds:b.any}],ne=[{name:"transition-property",type:y.propList},{name:"transition-duration",type:y.time},{name:"transition-delay",type:y.time},{name:"transition-timing-function",type:y.easing}],se=function(Dt,Ct){return"label"===Ct.value?-Dt.poolIndex():Ct.pfValue},Ee=[{name:"height",type:y.nodeSize,triggersBounds:b.any,hashOverride:se},{name:"width",type:y.nodeSize,triggersBounds:b.any,hashOverride:se},{name:"shape",type:y.nodeShape,triggersBounds:b.any},{name:"shape-polygon-points",type:y.polygonPointList,triggersBounds:b.any},{name:"background-color",type:y.color},{name:"background-fill",type:y.fill},{name:"background-opacity",type:y.zeroOneNumber},{name:"background-blacken",type:y.nOneOneNumber},{name:"background-gradient-stop-colors",type:y.colors},{name:"background-gradient-stop-positions",type:y.percentages},{name:"background-gradient-direction",type:y.gradientDirection},{name:"padding",type:y.sizeMaybePercent,triggersBounds:b.any},{name:"padding-relative-to",type:y.paddingRelativeTo,triggersBounds:b.any},{name:"bounds-expansion",type:y.boundsExpansion,triggersBounds:b.any}],Ce=[{name:"border-color",type:y.color},{name:"border-opacity",type:y.zeroOneNumber},{name:"border-width",type:y.size,triggersBounds:b.any},{name:"border-style",type:y.borderStyle}],ae=[{name:"background-image",type:y.urls},{name:"background-image-crossorigin",type:y.bgCrossOrigin},{name:"background-image-opacity",type:y.zeroOneNumbers},{name:"background-image-containment",type:y.bgContainment},{name:"background-image-smoothing",type:y.bools},{name:"background-position-x",type:y.bgPos},{name:"background-position-y",type:y.bgPos},{name:"background-width-relative-to",type:y.bgRelativeTo},{name:"background-height-relative-to",type:y.bgRelativeTo},{name:"background-repeat",type:y.bgRepeat},{name:"background-fit",type:y.bgFit},{name:"background-clip",type:y.bgClip},{name:"background-width",type:y.bgWH},{name:"background-height",type:y.bgWH},{name:"background-offset-x",type:y.bgPos},{name:"background-offset-y",type:y.bgPos}],be=[{name:"position",type:y.position,triggersBounds:b.any},{name:"compound-sizing-wrt-labels",type:y.compoundIncludeLabels,triggersBounds:b.any},{name:"min-width",type:y.size,triggersBounds:b.any},{name:"min-width-bias-left",type:y.sizeMaybePercent,triggersBounds:b.any},{name:"min-width-bias-right",type:y.sizeMaybePercent,triggersBounds:b.any},{name:"min-height",type:y.size,triggersBounds:b.any},{name:"min-height-bias-top",type:y.sizeMaybePercent,triggersBounds:b.any},{name:"min-height-bias-bottom",type:y.sizeMaybePercent,triggersBounds:b.any}],de=[{name:"line-style",type:y.lineStyle},{name:"line-color",type:y.color},{name:"line-fill",type:y.fill},{name:"line-cap",type:y.lineCap},{name:"line-opacity",type:y.zeroOneNumber},{name:"line-dash-pattern",type:y.numbers},{name:"line-dash-offset",type:y.number},{name:"line-gradient-stop-colors",type:y.colors},{name:"line-gradient-stop-positions",type:y.percentages},{name:"curve-style",type:y.curveStyle,triggersBounds:b.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:y.zeroOneNumber,triggersBounds:b.any},{name:"source-endpoint",type:y.edgeEndpoint,triggersBounds:b.any},{name:"target-endpoint",type:y.edgeEndpoint,triggersBounds:b.any},{name:"control-point-step-size",type:y.size,triggersBounds:b.any},{name:"control-point-distances",type:y.bidirectionalSizes,triggersBounds:b.any},{name:"control-point-weights",type:y.numbers,triggersBounds:b.any},{name:"segment-distances",type:y.bidirectionalSizes,triggersBounds:b.any},{name:"segment-weights",type:y.numbers,triggersBounds:b.any},{name:"taxi-turn",type:y.bidirectionalSizeMaybePercent,triggersBounds:b.any},{name:"taxi-turn-min-distance",type:y.size,triggersBounds:b.any},{name:"taxi-direction",type:y.axisDirection,triggersBounds:b.any},{name:"edge-distances",type:y.edgeDistances,triggersBounds:b.any},{name:"arrow-scale",type:y.positiveNumber,triggersBounds:b.any},{name:"loop-direction",type:y.angle,triggersBounds:b.any},{name:"loop-sweep",type:y.angle,triggersBounds:b.any},{name:"source-distance-from-node",type:y.size,triggersBounds:b.any},{name:"target-distance-from-node",type:y.size,triggersBounds:b.any}],Ae=[{name:"ghost",type:y.bool,triggersBounds:b.any},{name:"ghost-offset-x",type:y.bidirectionalSize,triggersBounds:b.any},{name:"ghost-offset-y",type:y.bidirectionalSize,triggersBounds:b.any},{name:"ghost-opacity",type:y.zeroOneNumber}],Me=[{name:"selection-box-color",type:y.color},{name:"selection-box-opacity",type:y.zeroOneNumber},{name:"selection-box-border-color",type:y.color},{name:"selection-box-border-width",type:y.size},{name:"active-bg-color",type:y.color},{name:"active-bg-opacity",type:y.zeroOneNumber},{name:"active-bg-size",type:y.size},{name:"outside-texture-bg-color",type:y.color},{name:"outside-texture-bg-opacity",type:y.zeroOneNumber}],pe=[];zi.pieBackgroundN=16,pe.push({name:"pie-size",type:y.sizeMaybePercent});for(var Le=1;Le<=zi.pieBackgroundN;Le++)pe.push({name:"pie-"+Le+"-background-color",type:y.color}),pe.push({name:"pie-"+Le+"-background-size",type:y.percent}),pe.push({name:"pie-"+Le+"-background-opacity",type:y.zeroOneNumber});var Se=[],qe=zi.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:y.arrowShape,triggersBounds:b.any},{name:"arrow-color",type:y.color},{name:"arrow-fill",type:y.arrowFill}].forEach(function(Xe){qe.forEach(function(Dt){Se.push({name:Dt+"-"+Xe.name,type:Xe.type,triggersBounds:Xe.triggersBounds})})},{});var Be=zi.properties=[].concat(V,ne,W,Y,te,Ae,O,k,D,x,_,Ee,Ce,ae,pe,be,de,Se,Me),je=zi.propertyGroups={behavior:V,transition:ne,visibility:W,overlay:Y,underlay:te,ghost:Ae,commonLabel:O,labelDimensions:k,mainLabel:D,sourceLabel:x,targetLabel:_,nodeBody:Ee,nodeBorder:Ce,backgroundImage:ae,pie:pe,compound:be,edgeLine:de,edgeArrow:Se,core:Me},Ke=zi.propertyGroupNames={};(zi.propertyGroupKeys=Object.keys(je)).forEach(function(Xe){Ke[Xe]=je[Xe].map(function(Dt){return Dt.name}),je[Xe].forEach(function(Dt){return Dt.groupKey=Xe})});var at=zi.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];zi.propertyNames=Be.map(function(Xe){return Xe.name});for(var et=0;et<Be.length;et++){var Je=Be[et];Be[Je.name]=Je}for(var wt=0;wt<at.length;wt++){var xt=at[wt],mt={name:xt.name,alias:!0,pointsTo:Be[xt.pointsTo]};Be.push(mt),Be[xt.name]=mt}})(),zi.getDefaultProperty=function(u){return this.getDefaultProperties()[u]},zi.getDefaultProperties=function(){var u=this._private;if(null!=u.defaultProperties)return u.defaultProperties;for(var o=Yt({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(b,y){for(var D=1;D<=zi.pieBackgroundN;D++)b[y.name.replace("{{i}}",D)]=y.value;return b},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce(function(b,y){return zi.arrowPrefixes.forEach(function(D){b[D+"-"+y.name]=y.value}),b},{})),l={},d=0;d<this.properties.length;d++){var h=this.properties[d];if(!h.pointsTo){var p=h.name,v=this.parse(p,o[p]);l[p]=v}}return u.defaultProperties=l,u.defaultProperties},zi.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var Mp={parse:function(u,o,l,d){var h=this;if(We(o))return h.parseImplWarn(u,o,l,d);var D,b=qd(u,""+o,l?"t":"f","mapping"===d||!0===d||!1===d||null==d?"dontcare":d),y=h.propCache=h.propCache||[];return(D=y[b])||(D=y[b]=h.parseImplWarn(u,o,l,d)),(l||"mapping"===d)&&(D=gs(D))&&(D.value=gs(D.value)),D},parseImplWarn:function(u,o,l,d){var h=this.parseImpl(u,o,l,d);return!h&&null!=o&&tr("The style property `".concat(u,": ").concat(o,"` is invalid")),h&&("width"===h.name||"height"===h.name)&&"label"===o&&tr("The style value of `label` is deprecated for `"+h.name+"`"),h}};Mp.parseImpl=function(u,o,l,d){var h=this;u=Ot(u);var p=h.properties[u],g=o,v=h.types;if(!p||void 0===o)return null;p.alias&&(u=(p=p.pointsTo).name);var b=me(o);b&&(o=o.trim());var D,x,y=p.type;if(!y)return null;if(l&&(""===o||null===o))return{name:u,value:o,bypass:!0,deleteBypass:!0};if(We(o))return{name:u,value:o,strValue:"fn",mapped:v.fn,bypass:l};if(!(!b||d||o.length<7||"a"!==o[1])){if(o.length>=7&&"d"===o[0]&&(D=new RegExp(v.data.regex).exec(o)))return!l&&{name:u,value:D,strValue:""+o,mapped:v.data,field:D[1],bypass:l};if(o.length>=10&&"m"===o[0]&&(x=new RegExp(v.mapData.regex).exec(o))){if(l||y.multiple)return!1;var k=v.mapData;if(!y.color&&!y.number)return!1;var O=this.parse(u,x[4]);if(!O||O.mapped)return!1;var V=this.parse(u,x[5]);if(!V||V.mapped)return!1;if(O.pfValue===V.pfValue||O.strValue===V.strValue)return tr("`"+u+": "+o+"` is not a valid mapper because the output range is zero; converting to `"+u+": "+O.strValue+"`"),this.parse(u,O.strValue);if(y.color){var W=O.value,Y=V.value;if(!(W[0]!==Y[0]||W[1]!==Y[1]||W[2]!==Y[2]||W[3]!==Y[3]&&(null!=W[3]&&1!==W[3]||null!=Y[3]&&1!==Y[3])))return!1}return{name:u,value:x,strValue:""+o,mapped:k,field:x[1],fieldMin:parseFloat(x[2]),fieldMax:parseFloat(x[3]),valueMin:O.value,valueMax:V.value,bypass:l}}}if(y.multiple&&"multiple"!==d){var ne;if(ne=b?o.split(/\s+/):ze(o)?o:[o],y.evenMultiple&&ne.length%2!=0)return null;for(var se=[],Ee=[],Ce=[],ae="",be=!1,de=0;de<ne.length;de++){var Ae=h.parse(u,ne[de],l,"multiple");be=be||me(Ae.value),se.push(Ae.value),Ce.push(null!=Ae.pfValue?Ae.pfValue:Ae.value),Ee.push(Ae.units),ae+=(de>0?" ":"")+Ae.strValue}return y.validate&&!y.validate(se,Ee)?null:y.singleEnum&&be?1===se.length&&me(se[0])?{name:u,value:se[0],strValue:se[0],bypass:l}:null:{name:u,value:se,pfValue:Ce,strValue:ae,bypass:l,units:Ee}}var Me=function(){for(var Ct=0;Ct<y.enums.length;Ct++)if(y.enums[Ct]===o)return{name:u,value:o,strValue:""+o,bypass:l};return null};if(y.number){var pe,Le="px";if(y.units&&(pe=y.units),y.implicitUnits&&(Le=y.implicitUnits),!y.unitless)if(b){var Se="px|em"+(y.allowPercent?"|\\%":"");pe&&(Se=pe);var qe=o.match("^("+on+")("+Se+")?$");qe&&(o=qe[1],pe=qe[2]||Le)}else(!pe||y.implicitUnits)&&(pe=Le);if(o=parseFloat(o),isNaN(o)&&void 0===y.enums)return null;if(isNaN(o)&&void 0!==y.enums)return o=g,Me();if(y.integer&&!function(o){return fe(o)&&Math.floor(o)===o}(o)||void 0!==y.min&&(o<y.min||y.strictMin&&o===y.min)||void 0!==y.max&&(o>y.max||y.strictMax&&o===y.max))return null;var Be={name:u,value:o,strValue:""+o+(pe||""),units:pe,bypass:l};return Be.pfValue=y.unitless||"px"!==pe&&"em"!==pe?o:"px"!==pe&&pe?this.getEmSizeInPixels()*o:o,("ms"===pe||"s"===pe)&&(Be.pfValue="ms"===pe?o:1e3*o),("deg"===pe||"rad"===pe)&&(Be.pfValue="rad"===pe?o:function(o){return Math.PI*o/180}(o)),"%"===pe&&(Be.pfValue=o/100),Be}if(y.propList){var je=[],Ke=""+o;if("none"!==Ke){for(var tt=Ke.split(/\s*,\s*|\s+/),at=0;at<tt.length;at++){var et=tt[at].trim();h.properties[et]?je.push(et):tr("`"+et+"` is not a valid property name")}if(0===je.length)return null}return{name:u,value:je,strValue:0===je.length?"none":je.join(" "),bypass:l}}if(y.color){var Je=function(o){return(ze(o)?o:null)||function(o){return Pl[o.toLowerCase()]}(o)||function(o){if((4===o.length||7===o.length)&&"#"===o[0]){var d,h,p,g=16;return 4===o.length?(d=parseInt(o[1]+o[1],g),h=parseInt(o[2]+o[2],g),p=parseInt(o[3]+o[3],g)):(d=parseInt(o[1]+o[2],g),h=parseInt(o[3]+o[4],g),p=parseInt(o[5]+o[6],g)),[d,h,p]}}(o)||function(o){var l,d=new RegExp("^"+Vn+"$").exec(o);if(d){l=[];for(var h=[],p=1;p<=3;p++){var g=d[p];if("%"===g[g.length-1]&&(h[p]=!0),g=parseFloat(g),h[p]&&(g=g/100*255),g<0||g>255)return;l.push(Math.floor(g))}if((h[1]||h[2]||h[3])&&!(h[1]&&h[2]&&h[3]))return;var y=d[4];if(void 0!==y){if((y=parseFloat(y))<0||y>1)return;l.push(y)}}return l}(o)||function(o){var l,d,h,p,g,v,b,y;function D(O,V,W){return W<0&&(W+=1),W>1&&(W-=1),W<1/6?O+6*(V-O)*W:W<.5?V:W<2/3?O+(V-O)*(2/3-W)*6:O}var x=new RegExp("^"+lr+"$").exec(o);if(x){if((d=parseInt(x[1]))<0?d=(360- -1*d%360)%360:d>360&&(d%=360),d/=360,(h=parseFloat(x[2]))<0||h>100||(h/=100,(p=parseFloat(x[3]))<0||p>100)||(p/=100,void 0!==(g=x[4])&&((g=parseFloat(g))<0||g>1)))return;if(0===h)v=b=y=Math.round(255*p);else{var _=p<.5?p*(1+h):p+h-p*h,k=2*p-_;v=Math.round(255*D(k,_,d+1/3)),b=Math.round(255*D(k,_,d)),y=Math.round(255*D(k,_,d-1/3))}l=[v,b,y,g]}return l}(o)}(o);return Je?{name:u,value:Je,pfValue:Je,strValue:"rgb("+Je[0]+","+Je[1]+","+Je[2]+")",bypass:l}:null}if(y.regex||y.regexes){if(y.enums){var wt=Me();if(wt)return wt}for(var xt=y.regexes?y.regexes:[y.regex],yt=0;yt<xt.length;yt++){var Xe=new RegExp(xt[yt]).exec(o);if(Xe)return{name:u,value:y.singleRegexMatchValue?Xe[1]:Xe,strValue:""+o,bypass:l}}return null}return y.string?{name:u,value:""+o,strValue:""+o,bypass:l}:y.enums?Me():null};var Qn=function u(o){if(!(this instanceof u))return new u(o);ft(o)?(this._private={cy:o,coreStyle:{}},this.length=0,this.resetToDefault()):gr("A style must have a core reference")},gi=Qn.prototype;gi.instanceString=function(){return"style"},gi.clear=function(){for(var u=this._private,l=u.cy.elements(),d=0;d<this.length;d++)this[d]=void 0;return this.length=0,u.contextStyles={},u.propDiffs={},this.cleanElements(l,!0),l.forEach(function(h){var p=h[0]._private;p.styleDirty=!0,p.appliedInitStyle=!1}),this},gi.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},gi.core=function(u){return this._private.coreStyle[u]||this.getDefaultProperty(u)},gi.selector=function(u){var o="core"===u?null:new ma(u),l=this.length++;return this[l]={selector:o,properties:[],mappedProperties:[],index:l},this},gi.css=function(){var u=this,o=arguments;if(1===o.length)for(var l=o[0],d=0;d<u.properties.length;d++){var h=u.properties[d],p=l[h.name];void 0===p&&(p=l[Jt(h.name)]),void 0!==p&&this.cssRule(h.name,p)}else 2===o.length&&this.cssRule(o[0],o[1]);return this},gi.style=gi.css,gi.cssRule=function(u,o){var l=this.parse(u,o);if(l){var d=this.length-1;this[d].properties.push(l),this[d].properties[l.name]=l,l.name.match(/pie-(\d+)-background-size/)&&l.value&&(this._private.hasPie=!0),l.mapped&&this[d].mappedProperties.push(l),!this[d].selector&&(this._private.coreStyle[l.name]=l)}return this},gi.append=function(u){return ot(u)?u.appendToStyle(this):ze(u)?this.appendFromJson(u):me(u)&&this.appendFromString(u),this},Qn.fromJson=function(u,o){var l=new Qn(u);return l.fromJson(o),l},Qn.fromString=function(u,o){return new Qn(u).fromString(o)},[Zi,mh,wv,Da,_p,ql,zi,Mp].forEach(function(u){Yt(gi,u)}),Qn.types=gi.types,Qn.properties=gi.properties,Qn.propertyGroups=gi.propertyGroups,Qn.propertyGroupNames=gi.propertyGroupNames,Qn.propertyGroupKeys=gi.propertyGroupKeys;var rd={style:function(o){return o&&this.setStyle(o).update(),this._private.style},setStyle:function(o){var l=this._private;return l.style=ot(o)?o.generateStyle(this):ze(o)?Qn.fromJson(this,o):me(o)?Qn.fromString(this,o):Qn(this),l.style},updateStyle:function(){this.mutableElements().updateStyle()}},mi={autolock:function(o){return void 0===o?this._private.autolock:(this._private.autolock=!!o,this)},autoungrabify:function(o){return void 0===o?this._private.autoungrabify:(this._private.autoungrabify=!!o,this)},autounselectify:function(o){return void 0===o?this._private.autounselectify:(this._private.autounselectify=!!o,this)},selectionType:function(o){var l=this._private;return null==l.selectionType&&(l.selectionType="single"),void 0===o?l.selectionType:(("additive"===o||"single"===o)&&(l.selectionType=o),this)},panningEnabled:function(o){return void 0===o?this._private.panningEnabled:(this._private.panningEnabled=!!o,this)},userPanningEnabled:function(o){return void 0===o?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!o,this)},zoomingEnabled:function(o){return void 0===o?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!o,this)},userZoomingEnabled:function(o){return void 0===o?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!o,this)},boxSelectionEnabled:function(o){return void 0===o?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!o,this)},pan:function(){var d,h,p,g,v,o=arguments,l=this._private.pan;switch(o.length){case 0:return l;case 1:if(me(o[0]))return l[d=o[0]];if(Te(o[0])){if(!this._private.panningEnabled)return this;v=(p=o[0]).y,fe(g=p.x)&&(l.x=g),fe(v)&&(l.y=v),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;h=o[1],("x"===(d=o[0])||"y"===d)&&fe(h)&&(l[d]=h),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function(o,l){var p,g,v,b,y,d=arguments,h=this._private.pan;if(!this._private.panningEnabled)return this;switch(d.length){case 1:Te(o)&&(y=(v=d[0]).y,fe(b=v.x)&&(h.x+=b),fe(y)&&(h.y+=y),this.emit("pan viewport"));break;case 2:g=l,("x"===(p=o)||"y"===p)&&fe(g)&&(h[p]+=g),this.emit("pan viewport")}return this.notify("viewport"),this},fit:function(o,l){var d=this.getFitViewport(o,l);if(d){var h=this._private;h.zoom=d.zoom,h.pan=d.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(o,l){var d;if((fe(o)&&void 0===l&&(l=o,o=void 0),this._private.panningEnabled&&this._private.zoomingEnabled)&&(me(o)?o=this.$(o):!function(o){return Te(o)&&fe(o.x1)&&fe(o.x2)&&fe(o.y1)&&fe(o.y2)}(o)?Ne(o)||(o=this.mutableElements()):((d={x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2}).w=d.x2-d.x1,d.h=d.y2-d.y1),!Ne(o)||!o.empty())){d=d||o.boundingBox();var b,g=this.width(),v=this.height();if(l=fe(l)?l:0,!isNaN(g)&&!isNaN(v)&&g>0&&v>0&&!isNaN(d.w)&&!isNaN(d.h)&&d.w>0&&d.h>0)return{zoom:b=(b=(b=Math.min((g-2*l)/d.w,(v-2*l)/d.h))>this._private.maxZoom?this._private.maxZoom:b)<this._private.minZoom?this._private.minZoom:b,pan:{x:(g-b*(d.x1+d.x2))/2,y:(v-b*(d.y1+d.y2))/2}}}},zoomRange:function(o,l){var d=this._private;if(null==l){var h=o;o=h.min,l=h.max}return fe(o)&&fe(l)&&o<=l?(d.minZoom=o,d.maxZoom=l):fe(o)&&void 0===l&&o<=d.maxZoom?d.minZoom=o:fe(l)&&void 0===o&&l>=d.minZoom&&(d.maxZoom=l),this},minZoom:function(o){return void 0===o?this._private.minZoom:this.zoomRange({min:o})},maxZoom:function(o){return void 0===o?this._private.maxZoom:this.zoomRange({max:o})},getZoomedViewport:function(o){var p,g,l=this._private,d=l.pan,h=l.zoom,v=!1;return l.zoomingEnabled||(v=!0),fe(o)?g=o:Te(o)&&(g=o.level,null!=o.position?p=Hn(o.position,h,d):null!=o.renderedPosition&&(p=o.renderedPosition),null!=p&&!l.panningEnabled&&(v=!0)),g=(g=g>l.maxZoom?l.maxZoom:g)<l.minZoom?l.minZoom:g,!v&&fe(g)&&g!==h&&(null==p||fe(p.x)&&fe(p.y))?null!=p?{zoomed:!0,panned:!0,zoom:g,pan:{x:-g/h*(p.x-d.x)+p.x,y:-g/h*(p.y-d.y)+p.y}}:{zoomed:!0,panned:!1,zoom:g,pan:d}:null},zoom:function(o){if(void 0===o)return this._private.zoom;var l=this.getZoomedViewport(o),d=this._private;return null!=l&&l.zoomed?(d.zoom=l.zoom,l.panned&&(d.pan.x=l.pan.x,d.pan.y=l.pan.y),this.emit("zoom"+(l.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this},viewport:function(o){var l=this._private,d=!0,h=!0,p=[],g=!1,v=!1;if(!o)return this;if(fe(o.zoom)||(d=!1),Te(o.pan)||(h=!1),!d&&!h)return this;if(d){var b=o.zoom;b<l.minZoom||b>l.maxZoom||!l.zoomingEnabled?g=!0:(l.zoom=b,p.push("zoom"))}if(h&&(!g||!o.cancelOnFailedZoom)&&l.panningEnabled){var y=o.pan;fe(y.x)&&(l.pan.x=y.x,v=!1),fe(y.y)&&(l.pan.y=y.y,v=!1),v||p.push("pan")}return p.length>0&&(p.push("viewport"),this.emit(p.join(" ")),this.notify("viewport")),this},center:function(o){var l=this.getCenterPan(o);return l&&(this._private.pan=l,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(o,l){if(this._private.panningEnabled){if(me(o)){var d=o;o=this.mutableElements().filter(d)}else Ne(o)||(o=this.mutableElements());if(0!==o.length){var h=o.boundingBox(),p=this.width(),g=this.height();return{x:(p-(l=void 0===l?this._private.zoom:l)*(h.x1+h.x2))/2,y:(g-l*(h.y1+h.y2))/2}}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var d,h,o=this._private,l=o.container;return o.sizeCache=o.sizeCache||(l?(d=B.getComputedStyle(l),{width:l.clientWidth-(h=function(g){return parseFloat(d.getPropertyValue(g))})("padding-left")-h("padding-right"),height:l.clientHeight-h("padding-top")-h("padding-bottom")}):{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var o=this._private.pan,l=this._private.zoom,d=this.renderedExtent(),h={x1:(d.x1-o.x)/l,x2:(d.x2-o.x)/l,y1:(d.y1-o.y)/l,y2:(d.y2-o.y)/l};return h.w=h.x2-h.x1,h.h=h.y2-h.y1,h},renderedExtent:function(){var o=this.width(),l=this.height();return{x1:0,y1:0,x2:o,y2:l,w:o,h:l}},multiClickDebounceTime:function(o){return o?(this._private.multiClickDebounceTime=o,this):this._private.multiClickDebounceTime}};mi.centre=mi.center,mi.autolockNodes=mi.autolock,mi.autoungrabifyNodes=mi.autoungrabify;var Mo={data:fr.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:fr.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:fr.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:fr.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};Mo.attr=Mo.data,Mo.removeAttr=Mo.removeData;var ju=function(o){var l=this,d=(o=Yt({},o)).container;d&&!$e(d)&&$e(d[0])&&(d=d[0]);var h=d?d._cyreg:null;(h=h||{})&&h.cy&&(h.cy.destroy(),h={});var p=h.readies=h.readies||[];d&&(d._cyreg=h),h.cy=l;var g=void 0!==B&&void 0!==d&&!o.headless,v=o;v.layout=Yt({name:g?"grid":"null"},v.layout),v.renderer=Yt({name:g?"canvas":"null"},v.renderer);var b=function(O,V,W){return void 0!==V?V:void 0!==W?W:O},y=this._private={container:d,ready:!1,options:v,elements:new pi(this),listeners:[],aniEles:new pi(this),data:v.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:b(!0,v.zoomingEnabled),userZoomingEnabled:b(!0,v.userZoomingEnabled),panningEnabled:b(!0,v.panningEnabled),userPanningEnabled:b(!0,v.userPanningEnabled),boxSelectionEnabled:b(!0,v.boxSelectionEnabled),autolock:b(!1,v.autolock,v.autolockNodes),autoungrabify:b(!1,v.autoungrabify,v.autoungrabifyNodes),autounselectify:b(!1,v.autounselectify),styleEnabled:void 0===v.styleEnabled?g:v.styleEnabled,zoom:fe(v.zoom)?v.zoom:1,pan:{x:Te(v.pan)&&fe(v.pan.x)?v.pan.x:0,y:Te(v.pan)&&fe(v.pan.y)?v.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:b(250,v.multiClickDebounceTime)};this.createEmitter(),this.selectionType(v.selectionType),this.zoomRange({min:v.minZoom,max:v.maxZoom}),y.styleEnabled&&l.setStyle([]);var x=Yt({},v,v.renderer);l.initRenderer(x),function(O,V){if(O.some(ct))return jc.all(O).then(V);V(O)}([v.style,v.elements],function(k){var O=k[0],V=k[1];y.styleEnabled&&l.style().append(O),function(O,V,W){l.notifications(!1);var Y=l.mutableElements();Y.length>0&&Y.remove(),null!=O&&(Te(O)||ze(O))&&l.add(O),l.one("layoutready",function(ne){l.notifications(!0),l.emit(ne),l.one("load",V),l.emitAndNotify("load")}).one("layoutstop",function(){l.one("done",W),l.emit("done")});var te=Yt({},l._private.options.layout);te.eles=l.elements(),l.layout(te).run()}(V,function(){l.startAnimationLoop(),y.ready=!0,We(v.ready)&&l.on("ready",v.ready);for(var W=0;W<p.length;W++)l.on("ready",p[W]);h&&(h.readies=[]),l.emit("ready")},v.done)})},Yl=ju.prototype;Yt(Yl,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(o){return this.isReady()?this.emitter().emit("ready",[],o):this.on("ready",o),this},destroy:function(){var o=this;if(!o.destroyed())return o.stopAnimationLoop(),o.destroyRenderer(),this.emit("destroy"),o._private.destroyed=!0,o},hasElementWithId:function(o){return this._private.elements.hasElementWithId(o)},getElementById:function(o){return this._private.elements.getElementById(o)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(o){return this._private.elements.merge(o),this},removeFromPool:function(o){return this._private.elements.unmerge(o),this},container:function(){return this._private.container||null},mount:function(o){if(null!=o){var l=this,d=l._private,h=d.options;return!$e(o)&&$e(o[0])&&(o=o[0]),l.stopAnimationLoop(),l.destroyRenderer(),d.container=o,d.styleEnabled=!0,l.invalidateSize(),l.initRenderer(Yt({},h,h.renderer,{name:"null"===h.renderer.name?"canvas":h.renderer.name})),l.startAnimationLoop(),l.style(h.style),l.emit("mount"),l}},unmount:function(){var o=this;return o.stopAnimationLoop(),o.destroyRenderer(),o.initRenderer({name:"null"}),o.emit("unmount"),o},options:function(){return gs(this._private.options)},json:function(o){var l=this,d=l._private,h=l.mutableElements();if(Te(o)){if(l.startBatch(),o.elements){var g={},v=function(se,Ee){for(var Ce=[],ae=[],be=0;be<se.length;be++){var de=se[be];if(de.data.id){var Ae=""+de.data.id,Me=l.getElementById(Ae);g[Ae]=!0,0!==Me.length?ae.push({ele:Me,json:de}):(Ee&&(de.group=Ee),Ce.push(de))}else tr("cy.json() cannot handle elements without an ID attribute")}l.add(Ce);for(var pe=0;pe<ae.length;pe++){var Le=ae[pe];Le.ele.json(Le.json)}};if(ze(o.elements))v(o.elements);else for(var b=["nodes","edges"],y=0;y<b.length;y++){var D=b[y],x=o.elements[D];ze(x)&&v(x,D)}var _=l.collection();h.filter(function(ne){return!g[ne.id()]}).forEach(function(ne){ne.isParent()?_.merge(ne):ne.remove()}),_.forEach(function(ne){return ne.children().move({parent:null})}),_.forEach(function(ne){return(se=ne,l.getElementById(se.id())).remove();var se})}o.style&&l.style(o.style),null!=o.zoom&&o.zoom!==d.zoom&&l.zoom(o.zoom),o.pan&&(o.pan.x!==d.pan.x||o.pan.y!==d.pan.y)&&l.pan(o.pan),o.data&&l.data(o.data);for(var k=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],O=0;O<k.length;O++){var V=k[O];null!=o[V]&&l[V](o[V])}return l.endBatch(),this}var Y={};o?Y.elements=this.elements().map(function(ne){return ne.json()}):(Y.elements={},h.forEach(function(ne){var se=ne.group();Y.elements[se]||(Y.elements[se]=[]),Y.elements[se].push(ne.json())})),this._private.styleEnabled&&(Y.style=l.style().json()),Y.data=gs(l.data());var te=d.options;return Y.zoomingEnabled=d.zoomingEnabled,Y.userZoomingEnabled=d.userZoomingEnabled,Y.zoom=d.zoom,Y.minZoom=d.minZoom,Y.maxZoom=d.maxZoom,Y.panningEnabled=d.panningEnabled,Y.userPanningEnabled=d.userPanningEnabled,Y.pan=gs(d.pan),Y.boxSelectionEnabled=d.boxSelectionEnabled,Y.renderer=gs(te.renderer),Y.hideEdgesOnViewport=te.hideEdgesOnViewport,Y.textureOnViewport=te.textureOnViewport,Y.wheelSensitivity=te.wheelSensitivity,Y.motionBlur=te.motionBlur,Y.multiClickDebounceTime=te.multiClickDebounceTime,Y}}),Yl.$id=Yl.getElementById,[vw,nd,Wl,ph,Hu,zu,Sp,Wt,rd,mi,Mo].forEach(function(u){Yt(Yl,u)});var id={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,maximal:!1,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(o,l){return!0},ready:void 0,stop:void 0,transform:function(o,l){return l}},Uu=function(o){return o.scratch("breadthfirst")},ww=function(o,l){return o.scratch("breadthfirst",l)};function Dv(u){this.options=Yt({},id,u)}Dv.prototype.run=function(){var y,u=this.options,o=u,l=u.cy,d=o.eles,h=d.nodes().filter(function(Vt){return!Vt.isParent()}),p=d,g=o.directed,v=o.maximal||o.maximalAdjustments>0,b=Er(o.boundingBox?o.boundingBox:{x1:0,y1:0,w:l.width(),h:l.height()});if(Ne(o.roots))y=o.roots;else if(ze(o.roots)){for(var D=[],x=0;x<o.roots.length;x++){var k=l.getElementById(o.roots[x]);D.push(k)}y=l.collection(D)}else if(me(o.roots))y=l.$(o.roots);else if(g)y=h.roots();else{var O=d.components();y=l.collection();for(var V=function(Lt){var ln=O[Lt],Qt=ln.maxDegree(!1),zt=ln.filter(function(nn){return nn.degree(!1)===Qt});y=y.add(zt)},W=0;W<O.length;W++)V(W)}var Y=[],te={},ne=function(Lt,ln){null==Y[ln]&&(Y[ln]=[]);var Qt=Y[ln].length;Y[ln].push(Lt),ww(Lt,{index:Qt,depth:ln})};p.bfs({roots:y,directed:o.directed,visit:function(Lt,ln,Qt,zt,nn){var Rn=Lt[0],Dn=Rn.id();ne(Rn,nn),te[Dn]=!0}});for(var Ee=[],Ce=0;Ce<h.length;Ce++){var ae=h[Ce];te[ae.id()]||Ee.push(ae)}var be=function(Lt){for(var ln=Y[Lt],Qt=0;Qt<ln.length;Qt++){var zt=ln[Qt];null!=zt?ww(zt,{depth:Lt,index:Qt}):(ln.splice(Qt,1),Qt--)}},de=function(){for(var Lt=0;Lt<Y.length;Lt++)be(Lt)},Ae=function(Lt,ln){for(var Qt=Uu(Lt),zt=Lt.incomers().filter(function(he){return he.isNode()&&d.has(he)}),nn=-1,Rn=Lt.id(),Dn=0;Dn<zt.length;Dn++){var It=Uu(zt[Dn]);nn=Math.max(nn,It.depth)}return Qt.depth<=nn&&(ln[Rn]?null:(function(Lt,ln){var Qt=Uu(Lt);Y[Qt.depth][Qt.index]=null,ne(Lt,ln)}(Lt,nn+1),ln[Rn]=!0,!0))};if(g&&v){var Me=[],pe={},Le=function(Lt){return Me.push(Lt)};for(h.forEach(function(Vt){return Me.push(Vt)});Me.length>0;){var qe=Me.shift(),Be=Ae(qe,pe);if(Be)qe.outgoers().filter(function(Vt){return Vt.isNode()&&d.has(Vt)}).forEach(Le);else if(null===Be){tr("Detected double maximal shift for node `"+qe.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}de();var je=0;if(o.avoidOverlap)for(var Ke=0;Ke<h.length;Ke++){var at=h[Ke].layoutDimensions(o);je=Math.max(je,at.w,at.h)}var wt={},xt=function(Lt){if(wt[Lt.id()])return wt[Lt.id()];for(var ln=Uu(Lt).depth,Qt=Lt.neighborhood(),zt=0,nn=0,Rn=0;Rn<Qt.length;Rn++){var Dn=Qt[Rn];if(!Dn.isEdge()&&!Dn.isParent()&&h.has(Dn)){var cn=Uu(Dn);if(null!=cn){var It=cn.index,he=cn.depth;null!=It&&null!=he&&he<ln&&(zt+=It/Y[he].length,nn++)}}}return zt/=nn=Math.max(1,nn),0===nn&&(zt=0),wt[Lt.id()]=zt,zt},yt=function(Lt,ln){var nn=xt(Lt)-xt(ln);return 0===nn?hs(Lt.id(),ln.id()):nn};void 0!==o.depthSort&&(yt=o.depthSort);for(var mt=0;mt<Y.length;mt++)Y[mt].sort(yt),be(mt);for(var Xe=[],Dt=0;Dt<Ee.length;Dt++)Xe.push(Ee[Dt]);Y.unshift(Xe),de();for(var Ct=0,Pt=0;Pt<Y.length;Pt++)Ct=Math.max(Y[Pt].length,Ct);var Bt_x=b.x1+b.w/2,Bt_y=b.x1+b.h/2,vn=Y.reduce(function(Vt,Lt){return Math.max(Vt,Lt.length)},0);return d.nodes().layoutPositions(this,o,function(Lt){var ln=Uu(Lt),Qt=ln.depth,zt=ln.index,nn=Y[Qt].length,Rn=Math.max(b.w/((o.grid?vn:nn)+1),je),Dn=Math.max(b.h/(Y.length+1),je),cn=Math.min(b.w/2/Y.length,b.h/2/Y.length);if(cn=Math.max(cn,je),o.circle){var he=cn*Qt+cn-(Y.length>0&&Y[0].length<=3?cn/2:0),rt=2*Math.PI/Y[Qt].length*zt;return 0===Qt&&1===Y[0].length&&(he=1),{x:Bt_x+he*Math.cos(rt),y:Bt_y+he*Math.sin(rt)}}return{x:Bt_x+(zt+1-(nn+1)/2)*Rn,y:(Qt+1)*Dn}}),this};var Y1={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(o,l){return!0},ready:void 0,stop:void 0,transform:function(o,l){return l}};function ws(u){this.options=Yt({},Y1,u)}ws.prototype.run=function(){var u=this.options,o=u,l=u.cy,d=o.eles,h=void 0!==o.counterclockwise?!o.counterclockwise:o.clockwise,p=d.nodes().not(":parent");o.sort&&(p=p.sort(o.sort));for(var D,g=Er(o.boundingBox?o.boundingBox:{x1:0,y1:0,w:l.width(),h:l.height()}),v={x:g.x1+g.w/2,y:g.y1+g.h/2},y=(void 0===o.sweep?2*Math.PI-2*Math.PI/p.length:o.sweep)/Math.max(1,p.length-1),x=0,_=0;_<p.length;_++){var O=p[_].layoutDimensions(o);x=Math.max(x,O.w,O.h)}if(D=fe(o.radius)?o.radius:p.length<=1?0:Math.min(g.h,g.w)/2-x,p.length>1&&o.avoidOverlap){x*=1.75;var Y=Math.cos(y)-Math.cos(0),te=Math.sin(y)-Math.sin(0),ne=Math.sqrt(x*x/(Y*Y+te*te));D=Math.max(ne,D)}return d.nodes().layoutPositions(this,o,function(Ce,ae){var be=o.startAngle+ae*y*(h?1:-1),de=D*Math.cos(be),Ae=D*Math.sin(be);return{x:v.x+de,y:v.y+Ae}}),this};var Ap={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(o){return o.degree()},levelWidth:function(o){return o.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(o,l){return!0},ready:void 0,stop:void 0,transform:function(o,l){return l}};function Xl(u){this.options=Yt({},Ap,u)}Xl.prototype.run=function(){for(var u=this.options,o=u,l=void 0!==o.counterclockwise?!o.counterclockwise:o.clockwise,d=u.cy,h=o.eles,p=h.nodes().not(":parent"),g=Er(o.boundingBox?o.boundingBox:{x1:0,y1:0,w:d.width(),h:d.height()}),v={x:g.x1+g.w/2,y:g.y1+g.h/2},b=[],y=0,D=0;D<p.length;D++){var _,x=p[D];_=o.concentric(x),b.push({value:_,node:x}),x._private.scratch.concentric=_}p.updateStyle();for(var k=0;k<p.length;k++){var V=p[k].layoutDimensions(o);y=Math.max(y,V.w,V.h)}b.sort(function(Vt,Lt){return Lt.value-Vt.value});for(var W=o.levelWidth(p),Y=[[]],te=Y[0],ne=0;ne<b.length;ne++){var se=b[ne];te.length>0&&Math.abs(te[0].value-se.value)>=W&&Y.push(te=[]),te.push(se)}var Ce=y+o.minNodeSpacing;if(!o.avoidOverlap){var ae=Y.length>0&&Y[0].length>1,be=Math.min(g.w,g.h)/2-Ce;Ce=Math.min(Ce,be/(Y.length+ae?1:0))}for(var Ae=0,Me=0;Me<Y.length;Me++){var pe=Y[Me],Le=void 0===o.sweep?2*Math.PI-2*Math.PI/pe.length:o.sweep,Se=pe.dTheta=Le/Math.max(1,pe.length-1);if(pe.length>1&&o.avoidOverlap){var qe=Math.cos(Se)-Math.cos(0),Be=Math.sin(Se)-Math.sin(0),je=Math.sqrt(Ce*Ce/(qe*qe+Be*Be));Ae=Math.max(je,Ae)}pe.r=Ae,Ae+=Ce}if(o.equidistant){for(var Ke=0,tt=0,at=0;at<Y.length;at++)Ke=Math.max(Ke,Y[at].r-tt);tt=0;for(var wt=0;wt<Y.length;wt++){var xt=Y[wt];0===wt&&(tt=xt.r),xt.r=tt,tt+=Ke}}for(var yt={},mt=0;mt<Y.length;mt++)for(var Xe=Y[mt],Dt=Xe.dTheta,Ct=Xe.r,Pt=0;Pt<Xe.length;Pt++){var Bt=Xe[Pt],vn=o.startAngle+(l?1:-1)*Dt*Pt,Cn={x:v.x+Ct*Math.cos(vn),y:v.y+Ct*Math.sin(vn)};yt[Bt.node.id()]=Cn}return h.nodes().layoutPositions(this,o,function(Vt){var Lt=Vt.id();return yt[Lt]}),this};var xv,Ev={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(o,l){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(o){return 2048},nodeOverlap:4,idealEdgeLength:function(o){return 32},edgeElasticity:function(o){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function vh(u){this.options=Yt({},Ev,u),this.options.layout=this}vh.prototype.run=function(){var u=this.options,o=u.cy,l=this;l.stopped=!1,(!0===u.animate||!1===u.animate)&&l.emit({type:"layoutstart",layout:l}),xv=!0===u.debug;var d=Dw(o,l,u);xv&&(void 0)(d),u.randomize&&Sw(d);var h=Si(),p=function(){bh(d,o,u),!0===u.fit&&o.fit(u.padding)},g=function(_){return!(l.stopped||_>=u.numIter||(Tp(d,u),d.temperature=d.temperature*u.coolingFactor,d.temperature<u.minTemp))},v=function(){if(!0===u.animate||!1===u.animate)p(),l.one("layoutstop",u.stop),l.emit({type:"layoutstop",layout:l});else{var _=u.eles.nodes(),k=yh(d,u,_);_.layoutPositions(l,u,k)}},b=0,y=!0;if(!0===u.animate)!function x(){for(var _=0;y&&_<u.refresh;)y=g(b),b++,_++;y?(Si()-h>=u.animationThreshold&&p(),Ha(x)):($u(d,u),v())}();else{for(;y;)y=g(b),b++;$u(d,u),v()}return this},vh.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},vh.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var Dw=function(o,l,d){for(var h=d.eles.edges(),p=d.eles.nodes(),g={isCompound:o.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:p.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:h.size(),temperature:d.initialTemp,clientWidth:o.width(),clientHeight:o.width(),boundingBox:Er(d.boundingBox?d.boundingBox:{x1:0,y1:0,w:o.width(),h:o.height()})},v=d.eles.components(),b={},y=0;y<v.length;y++)for(var D=v[y],x=0;x<D.length;x++)b[D[x].id()]=y;for(y=0;y<g.nodeSize;y++){var O=(k=p[y]).layoutDimensions(d);(V={}).isLocked=k.locked(),V.id=k.data("id"),V.parentId=k.data("parent"),V.cmptId=b[k.id()],V.children=[],V.positionX=k.position("x"),V.positionY=k.position("y"),V.offsetX=0,V.offsetY=0,V.height=O.w,V.width=O.h,V.maxX=V.positionX+V.width/2,V.minX=V.positionX-V.width/2,V.maxY=V.positionY+V.height/2,V.minY=V.positionY-V.height/2,V.padLeft=parseFloat(k.style("padding")),V.padRight=parseFloat(k.style("padding")),V.padTop=parseFloat(k.style("padding")),V.padBottom=parseFloat(k.style("padding")),V.nodeRepulsion=We(d.nodeRepulsion)?d.nodeRepulsion(k):d.nodeRepulsion,g.layoutNodes.push(V),g.idToIndex[V.id]=y}var W=[],Y=0,te=-1,ne=[];for(y=0;y<g.nodeSize;y++){var k,se=(k=g.layoutNodes[y]).parentId;null!=se?g.layoutNodes[g.idToIndex[se]].children.push(k.id):(W[++te]=k.id,ne.push(k.id))}for(g.graphSet.push(ne);Y<=te;){var Ee=W[Y++],ae=g.layoutNodes[g.idToIndex[Ee]].children;if(ae.length>0)for(g.graphSet.push(ae),y=0;y<ae.length;y++)W[++te]=ae[y]}for(y=0;y<g.graphSet.length;y++){var be=g.graphSet[y];for(x=0;x<be.length;x++)g.indexToGraph[g.idToIndex[be[x]]]=y}for(y=0;y<g.edgeSize;y++){var Ae=h[y],Me={};Me.id=Ae.data("id"),Me.sourceId=Ae.data("source"),Me.targetId=Ae.data("target");var pe=We(d.idealEdgeLength)?d.idealEdgeLength(Ae):d.idealEdgeLength,Le=We(d.edgeElasticity)?d.edgeElasticity(Ae):d.edgeElasticity,Se=g.idToIndex[Me.sourceId],qe=g.idToIndex[Me.targetId];if(g.indexToGraph[Se]!=g.indexToGraph[qe]){for(var Ke=xw(Me.sourceId,Me.targetId,g),tt=g.graphSet[Ke],at=0,V=g.layoutNodes[Se];-1===tt.indexOf(V.id);)V=g.layoutNodes[g.idToIndex[V.parentId]],at++;for(V=g.layoutNodes[qe];-1===tt.indexOf(V.id);)V=g.layoutNodes[g.idToIndex[V.parentId]],at++;pe*=at*d.nestingFactor}Me.idealLength=pe,Me.elasticity=Le,g.layoutEdges.push(Me)}return g},xw=function(o,l,d){var h=Ew(o,l,0,d);return 2>h.count?0:h.graph},Ew=function u(o,l,d,h){var p=h.graphSet[d];if(-1<p.indexOf(o)&&-1<p.indexOf(l))return{count:2,graph:d};for(var g=0,v=0;v<p.length;v++){var D=h.layoutNodes[h.idToIndex[p[v]]].children;if(0!==D.length){var _=u(o,l,h.indexToGraph[h.idToIndex[D[0]]],h);if(0!==_.count){if(1!==_.count)return _;if(2==++g)break}}}return{count:g,graph:d}},Sw=function(o,l){for(var d=o.clientWidth,h=o.clientHeight,p=0;p<o.nodeSize;p++){var g=o.layoutNodes[p];0===g.children.length&&!g.isLocked&&(g.positionX=Math.random()*d,g.positionY=Math.random()*h)}},yh=function(o,l,d){var h=o.boundingBox,p={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return l.boundingBox&&(d.forEach(function(g){var v=o.layoutNodes[o.idToIndex[g.data("id")]];p.x1=Math.min(p.x1,v.positionX),p.x2=Math.max(p.x2,v.positionX),p.y1=Math.min(p.y1,v.positionY),p.y2=Math.max(p.y2,v.positionY)}),p.w=p.x2-p.x1,p.h=p.y2-p.y1),function(g,v){var b=o.layoutNodes[o.idToIndex[g.data("id")]];return l.boundingBox?{x:h.x1+(b.positionX-p.x1)/p.w*h.w,y:h.y1+(b.positionY-p.y1)/p.h*h.h}:{x:b.positionX,y:b.positionY}}},bh=function(o,l,d){var h=d.layout,p=d.eles.nodes(),g=yh(o,d,p);p.positions(g),!0!==o.ready&&(o.ready=!0,h.one("layoutready",d.ready),h.emit({type:"layoutready",layout:this}))},Tp=function(o,l,d){Kl(o,l),ad(o),wh(o,l),Cv(o),Mw(o)},Kl=function(o,l){for(var d=0;d<o.graphSet.length;d++)for(var h=o.graphSet[d],p=h.length,g=0;g<p;g++)for(var v=o.layoutNodes[o.idToIndex[h[g]]],b=g+1;b<p;b++)sd(v,o.layoutNodes[o.idToIndex[h[b]]],o,l)},Ip=function(o){return-o+2*o*Math.random()},sd=function(o,l,d,h){if(o.cmptId===l.cmptId||d.isCompound){var v=l.positionX-o.positionX,b=l.positionY-o.positionY;0===v&&0===b&&(v=Ip(1),b=Ip(1));var D=_w(o,l,v,b);if(D>0)var k=(x=h.nodeOverlap*D)*v/(_=Math.sqrt(v*v+b*b)),O=x*b/_;else{var x,V=od(o,v,b),W=od(l,-1*v,-1*b),Y=W.x-V.x,te=W.y-V.y,ne=Y*Y+te*te,_=Math.sqrt(ne);k=(x=(o.nodeRepulsion+l.nodeRepulsion)/ne)*Y/_,O=x*te/_}o.isLocked||(o.offsetX-=k,o.offsetY-=O),l.isLocked||(l.offsetX+=k,l.offsetY+=O)}},_w=function(o,l,d,h){if(d>0)var p=o.maxX-l.minX;else p=l.maxX-o.minX;if(h>0)var g=o.maxY-l.minY;else g=l.maxY-o.minY;return p>=0&&g>=0?Math.sqrt(p*p+g*g):0},od=function(o,l,d){var h=o.positionX,p=o.positionY,g=o.height||1,v=o.width||1,b=d/l,y=g/v,D={};return 0===l&&0<d||0===l&&0>d?(D.x=h,D.y=p+g/2,D):0<l&&-1*y<=b&&b<=y?(D.x=h+v/2,D.y=p+v*d/2/l,D):0>l&&-1*y<=b&&b<=y?(D.x=h-v/2,D.y=p-v*d/2/l,D):0<d&&(b<=-1*y||b>=y)?(D.x=h+g*l/2/d,D.y=p+g/2,D):(0>d&&(b<=-1*y||b>=y)&&(D.x=h-g*l/2/d,D.y=p-g/2),D)},ad=function(o,l){for(var d=0;d<o.edgeSize;d++){var h=o.layoutEdges[d],g=o.layoutNodes[o.idToIndex[h.sourceId]],b=o.layoutNodes[o.idToIndex[h.targetId]],y=b.positionX-g.positionX,D=b.positionY-g.positionY;if(0!==y||0!==D){var x=od(g,y,D),_=od(b,-1*y,-1*D),k=_.x-x.x,O=_.y-x.y,V=Math.sqrt(k*k+O*O),W=Math.pow(h.idealLength-V,2)/h.elasticity;if(0!==V)var Y=W*k/V,te=W*O/V;else Y=0,te=0;g.isLocked||(g.offsetX+=Y,g.offsetY+=te),b.isLocked||(b.offsetX-=Y,b.offsetY-=te)}}},wh=function(o,l){if(0!==l.gravity)for(var h=0;h<o.graphSet.length;h++){var p=o.graphSet[h],g=p.length;if(0===h)var v=o.clientHeight/2,b=o.clientWidth/2;else{var D=o.layoutNodes[o.idToIndex[o.layoutNodes[o.idToIndex[p[0]]].parentId]];v=D.positionX,b=D.positionY}for(var x=0;x<g;x++){var _=o.layoutNodes[o.idToIndex[p[x]]];if(!_.isLocked){var k=v-_.positionX,O=b-_.positionY,V=Math.sqrt(k*k+O*O);if(V>1){var Y=l.gravity*O/V;_.offsetX+=l.gravity*k/V,_.offsetY+=Y}}}}},Cv=function(o,l){var d=[],h=0,p=-1;for(d.push.apply(d,o.graphSet[0]),p+=o.graphSet[0].length;h<=p;){var g=d[h++],b=o.layoutNodes[o.idToIndex[g]],y=b.children;if(0<y.length&&!b.isLocked){for(var D=b.offsetX,x=b.offsetY,_=0;_<y.length;_++){var k=o.layoutNodes[o.idToIndex[y[_]]];k.offsetX+=D,k.offsetY+=x,d[++p]=y[_]}b.offsetX=0,b.offsetY=0}}},Mw=function(o,l){for(var d=0;d<o.nodeSize;d++)0<(h=o.layoutNodes[d]).children.length&&(h.maxX=void 0,h.minX=void 0,h.maxY=void 0,h.minY=void 0);for(d=0;d<o.nodeSize;d++)if(!(0<(h=o.layoutNodes[d]).children.length||h.isLocked)){var p=Aw(h.offsetX,h.offsetY,o.temperature);h.positionX+=p.x,h.positionY+=p.y,h.offsetX=0,h.offsetY=0,h.minX=h.positionX-h.width,h.maxX=h.positionX+h.width,h.minY=h.positionY-h.height,h.maxY=h.positionY+h.height,Gu(h,o)}for(d=0;d<o.nodeSize;d++){var h;0<(h=o.layoutNodes[d]).children.length&&!h.isLocked&&(h.positionX=(h.maxX+h.minX)/2,h.positionY=(h.maxY+h.minY)/2,h.width=h.maxX-h.minX,h.height=h.maxY-h.minY)}},Aw=function(o,l,d){var h=Math.sqrt(o*o+l*l);if(h>d)var p={x:d*o/h,y:d*l/h};else p={x:o,y:l};return p},Gu=function u(o,l){var d=o.parentId;if(null!=d){var h=l.layoutNodes[l.idToIndex[d]],p=!1;if((null==h.maxX||o.maxX+h.padRight>h.maxX)&&(h.maxX=o.maxX+h.padRight,p=!0),(null==h.minX||o.minX-h.padLeft<h.minX)&&(h.minX=o.minX-h.padLeft,p=!0),(null==h.maxY||o.maxY+h.padBottom>h.maxY)&&(h.maxY=o.maxY+h.padBottom,p=!0),(null==h.minY||o.minY-h.padTop<h.minY)&&(h.minY=o.minY-h.padTop,p=!0),p)return u(h,l)}},$u=function(o,l){for(var d=o.layoutNodes,h=[],p=0;p<d.length;p++){var g=d[p],v=g.cmptId;(h[v]=h[v]||[]).push(g)}var y=0;for(p=0;p<h.length;p++)if(D=h[p]){D.x1=1/0,D.x2=-1/0,D.y1=1/0,D.y2=-1/0;for(var x=0;x<D.length;x++){var _=D[x];D.x1=Math.min(D.x1,_.positionX-_.width/2),D.x2=Math.max(D.x2,_.positionX+_.width/2),D.y1=Math.min(D.y1,_.positionY-_.height/2),D.y2=Math.max(D.y2,_.positionY+_.height/2)}D.w=D.x2-D.x1,D.h=D.y2-D.y1,y+=D.w*D.h}h.sort(function(te,ne){return ne.w*ne.h-te.w*te.h});var k=0,O=0,V=0,W=0,Y=Math.sqrt(y)*o.clientWidth/o.clientHeight;for(p=0;p<h.length;p++){var D;if(D=h[p]){for(x=0;x<D.length;x++)(_=D[x]).isLocked||(_.positionX+=k-D.x1,_.positionY+=O-D.y1);k+=D.w+l.componentSpacing,V+=D.w+l.componentSpacing,W=Math.max(W,D.h),V>Y&&(O+=W+l.componentSpacing,k=0,V=0,W=0)}}},Tw={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(o){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(o,l){return!0},ready:void 0,stop:void 0,transform:function(o,l){return l}};function Iw(u){this.options=Yt({},Tw,u)}Iw.prototype.run=function(){var u=this.options,o=u,l=u.cy,d=o.eles,h=d.nodes().not(":parent");o.sort&&(h=h.sort(o.sort));var p=Er(o.boundingBox?o.boundingBox:{x1:0,y1:0,w:l.width(),h:l.height()});if(0===p.h||0===p.w)d.nodes().layoutPositions(this,o,function(wt){return{x:p.x1,y:p.y1}});else{var g=h.size(),v=Math.sqrt(g*p.h/p.w),b=Math.round(v),y=Math.round(p.w/p.h*v),D=function(xt){if(null==xt)return Math.min(b,y);Math.min(b,y)==b?b=xt:y=xt},x=function(xt){if(null==xt)return Math.max(b,y);Math.max(b,y)==b?b=xt:y=xt},_=o.rows,k=null!=o.cols?o.cols:o.columns;if(null!=_&&null!=k)b=_,y=k;else if(null!=_&&null==k)b=_,y=Math.ceil(g/b);else if(null==_&&null!=k)y=k,b=Math.ceil(g/y);else if(y*b>g){var O=D(),V=x();(O-1)*V>=g?D(O-1):(V-1)*O>=g&&x(V-1)}else for(;y*b<g;){var W=D(),Y=x();(Y+1)*W>=g?x(Y+1):D(W+1)}var te=p.w/y,ne=p.h/b;if(o.condense&&(te=0,ne=0),o.avoidOverlap)for(var se=0;se<h.length;se++){var Ee=h[se],Ce=Ee._private.position;(null==Ce.x||null==Ce.y)&&(Ce.x=0,Ce.y=0);var ae=Ee.layoutDimensions(o),be=o.avoidOverlapPadding,Ae=ae.h+be;te=Math.max(te,ae.w+be),ne=Math.max(ne,Ae)}for(var Me={},pe=function(xt,yt){return!!Me["c-"+xt+"-"+yt]},Le=function(xt,yt){Me["c-"+xt+"-"+yt]=!0},Se=0,qe=0,Be=function(){++qe>=y&&(qe=0,Se++)},je={},Ke=0;Ke<h.length;Ke++){var tt=h[Ke],at=o.position(tt);if(at&&(void 0!==at.row||void 0!==at.col)){var et={row:at.row,col:at.col};if(void 0===et.col)for(et.col=0;pe(et.row,et.col);)et.col++;else if(void 0===et.row)for(et.row=0;pe(et.row,et.col);)et.row++;je[tt.id()]=et,Le(et.row,et.col)}}h.layoutPositions(this,o,function(xt,yt){var mt,Xe;if(xt.locked()||xt.isParent())return!1;var Dt=je[xt.id()];if(Dt)mt=Dt.col*te+te/2+p.x1,Xe=Dt.row*ne+ne/2+p.y1;else{for(;pe(Se,qe);)Be();mt=qe*te+te/2+p.x1,Xe=Se*ne+ne/2+p.y1,Le(Se,qe),Be()}return{x:mt,y:Xe}})}return this};var Sv={ready:function(){},stop:function(){}};function kp(u){this.options=Yt({},Sv,u)}kp.prototype.run=function(){var u=this.options,o=u.eles,l=this;return l.emit("layoutstart"),o.nodes().positions(function(){return{x:0,y:0}}),l.one("layoutready",u.ready),l.emit("layoutready"),l.one("layoutstop",u.stop),l.emit("layoutstop"),this},kp.prototype.stop=function(){return this};var X1={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(o,l){return!0},ready:void 0,stop:void 0,transform:function(o,l){return l}};function _v(u){this.options=Yt({},X1,u)}_v.prototype.run=function(){var u=this.options,l=u.eles.nodes(),d=We(u.positions);return l.layoutPositions(this,u,function(p,g){var v=function h(p){return null==u.positions?function(o){return{x:o.x,y:o.y}}(p.position()):d?u.positions(p):u.positions[p._private.data.id]??null}(p);return!p.locked()&&null!=v&&v}),this};var kw={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(o,l){return!0},ready:void 0,stop:void 0,transform:function(o,l){return l}};function Mv(u){this.options=Yt({},kw,u)}Mv.prototype.run=function(){var u=this.options,o=u.cy,l=u.eles,d=Er(u.boundingBox?u.boundingBox:{x1:0,y1:0,w:o.width(),h:o.height()});return l.nodes().layoutPositions(this,u,function(g,v){return{x:d.x1+Math.round(Math.random()*d.w),y:d.y1+Math.round(Math.random()*d.h)}}),this};var Dh=[{name:"breadthfirst",impl:Dv},{name:"circle",impl:ws},{name:"concentric",impl:Xl},{name:"cose",impl:vh},{name:"grid",impl:Iw},{name:"null",impl:kp},{name:"preset",impl:_v},{name:"random",impl:Mv}];function Op(u){this.options=u,this.notifications=0}var Av=function(){},Rp=function(){throw new Error("A headless instance can not render images")};Op.prototype={recalculateRenderedStyle:Av,notify:function(){this.notifications++},init:Av,isHeadless:function(){return!0},png:Rp,jpg:Rp};var Tv={arrowShapeWidth:.3,registerArrowShapes:function(){var u=this.arrowShapes={},o=this,l=function(y,D,x,_,k,O,V){return k.x-x/2-V<=y&&y<=k.x+x/2+V&&k.y-x/2-V<=D&&D<=k.y+x/2+V},d=function(y,D,x,_,k){var O=y*Math.cos(_)-D*Math.sin(_),V=y*Math.sin(_)+D*Math.cos(_);return{x:O*x+k.x,y:V*x+k.y}},h=function(y,D,x,_){for(var k=[],O=0;O<y.length;O+=2)k.push(d(y[O],y[O+1],D,x,_));return k},p=function(y){for(var D=[],x=0;x<y.length;x++){var _=y[x];D.push(_.x,_.y)}return D},g=function(y){return y.pstyle("width").pfValue*y.pstyle("arrow-scale").pfValue*2},v=function(y,D){me(D)&&(D=u[D]),u[y]=Yt({name:y,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(_,k,O,V,W,Y){var te=p(h(this.points,O+2*Y,V,W));return mr(_,k,te)},roughCollide:l,draw:function(_,k,O,V){var W=h(this.points,k,O,V);o.arrowShapeImpl("polygon")(_,W)},spacing:function(_){return 0},gap:g},D)};v("none",{collide:bu,roughCollide:bu,draw:wu,spacing:Ua,gap:Ua}),v("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),v("arrow","triangle"),v("triangle-backcurve",{points:u.triangle.points,controlPoint:[0,-.15],roughCollide:l,draw:function(y,D,x,_,k){var O=h(this.points,D,x,_),V=this.controlPoint,W=d(V[0],V[1],D,x,_);o.arrowShapeImpl(this.name)(y,O,W)},gap:function(y){return.8*g(y)}}),v("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(y,D,x,_,k,O,V){var W=p(h(this.points,x+2*V,_,k)),Y=p(h(this.pointsTee,x+2*V,_,k));return mr(y,D,W)||mr(y,D,Y)},draw:function(y,D,x,_,k){var O=h(this.points,D,x,_),V=h(this.pointsTee,D,x,_);o.arrowShapeImpl(this.name)(y,O,V)}}),v("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(y,D,x,_,k,O,V){var W=k,Y=Math.pow(W.x-y,2)+Math.pow(W.y-D,2)<=Math.pow((x+2*V)*this.radius,2),te=p(h(this.points,x+2*V,_,k));return mr(y,D,te)||Y},draw:function(y,D,x,_,k){var O=h(this.pointsTr,D,x,_);o.arrowShapeImpl(this.name)(y,O,_.x,_.y,this.radius*D)},spacing:function(y){return o.getArrowWidth(y.pstyle("width").pfValue,y.pstyle("arrow-scale").value)*this.radius}}),v("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(y,D){var x=this.baseCrossLinePts.slice(),_=D/y;return x[3]=x[3]-_,x[5]=x[5]-_,x},collide:function(y,D,x,_,k,O,V){var W=p(h(this.points,x+2*V,_,k)),Y=p(h(this.crossLinePts(x,O),x+2*V,_,k));return mr(y,D,W)||mr(y,D,Y)},draw:function(y,D,x,_,k){var O=h(this.points,D,x,_),V=h(this.crossLinePts(D,k),D,x,_);o.arrowShapeImpl(this.name)(y,O,V)}}),v("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(y){return.525*g(y)}}),v("circle",{radius:.15,collide:function(y,D,x,_,k,O,V){var W=k;return Math.pow(W.x-y,2)+Math.pow(W.y-D,2)<=Math.pow((x+2*V)*this.radius,2)},draw:function(y,D,x,_,k){o.arrowShapeImpl(this.name)(y,_.x,_.y,this.radius*D)},spacing:function(y){return o.getArrowWidth(y.pstyle("width").pfValue,y.pstyle("arrow-scale").value)*this.radius}}),v("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(y){return 1},gap:function(y){return 1}}),v("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),v("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(y){return y.pstyle("width").pfValue*y.pstyle("arrow-scale").value}}),v("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(y){return.95*y.pstyle("width").pfValue*y.pstyle("arrow-scale").value}})}},al={projectIntoViewport:function(u,o){var l=this.cy,d=this.findContainerClientCoords(),h=d[0],p=d[1],g=d[4],v=l.pan(),b=l.zoom();return[((u-h)/g-v.x)/b,((o-p)/g-v.y)/b]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var u=this.container,o=u.getBoundingClientRect(),l=B.getComputedStyle(u),d=function(Y){return parseFloat(l.getPropertyValue(Y))},h_left=d("padding-left"),h_right=d("padding-right"),h_top=d("padding-top"),h_bottom=d("padding-bottom"),p_left=d("border-left-width"),p_right=d("border-right-width"),p_top=d("border-top-width"),g=(d("border-bottom-width"),u.clientWidth);return this.containerBB=[o.left+h_left+p_left,o.top+h_top+p_top,g-(h_left+h_right),u.clientHeight-(h_top+h_bottom),o.width/(g+(p_left+p_right))]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(u,o,l,d){return this.findNearestElements(u,o,l,d)[0]},findNearestElements:function(u,o,l,d){var O,V,h=this,p=this,g=p.getCachedZSortedEles(),v=[],b=p.cy.zoom(),y=p.cy.hasCompoundNodes(),D=(d?24:8)/b,x=(d?8:2)/b,_=(d?8:2)/b,k=1/0;function W(ae,be){if(ae.isNode()){if(V)return;V=ae,v.push(ae)}if(ae.isEdge()&&(null==be||be<k))if(O){if(O.pstyle("z-compound-depth").value===ae.pstyle("z-compound-depth").value&&O.pstyle("z-compound-depth").value===ae.pstyle("z-compound-depth").value)for(var de=0;de<v.length;de++)if(v[de].isEdge()){v[de]=ae,O=ae,k=be??k;break}}else v.push(ae),O=ae,k=be??k}function Y(ae){var be=ae.outerWidth()+2*x,de=ae.outerHeight()+2*x,Ae=be/2,Me=de/2,pe=ae.position();if(pe.x-Ae<=u&&u<=pe.x+Ae&&pe.y-Me<=o&&o<=pe.y+Me&&p.nodeShapes[h.getNodeShape(ae)].checkPoint(u,o,0,be,de,pe.x,pe.y))return W(ae,0),!0}function te(ae){var qe,be=ae._private,de=be.rscratch,Ae=ae.pstyle("width").pfValue,Me=ae.pstyle("arrow-scale").value,pe=Ae/2+D,Le=pe*pe,Se=2*pe,Ke=be.source,tt=be.target;if("segments"===de.edgeType||"straight"===de.edgeType||"haystack"===de.edgeType){for(var Be=de.allpts,je=0;je+3<Be.length;je+=2)if(kc(u,o,Be[je],Be[je+1],Be[je+2],Be[je+3],Se)&&Le>(qe=Qf(u,o,Be[je],Be[je+1],Be[je+2],Be[je+3])))return W(ae,qe),!0}else if("bezier"===de.edgeType||"multibezier"===de.edgeType||"self"===de.edgeType||"compound"===de.edgeType)for(Be=de.allpts,je=0;je+5<de.allpts.length;je+=4)if(xu(u,o,Be[je],Be[je+1],Be[je+2],Be[je+3],Be[je+4],Be[je+5],Se)&&Le>(qe=Oc(u,o,Be[je],Be[je+1],Be[je+2],Be[je+3],Be[je+4],Be[je+5])))return W(ae,qe),!0;Ke=Ke||be.source,tt=tt||be.target;var at=h.getArrowWidth(Ae,Me),et=[{name:"source",x:de.arrowStartX,y:de.arrowStartY,angle:de.srcArrowAngle},{name:"target",x:de.arrowEndX,y:de.arrowEndY,angle:de.tgtArrowAngle},{name:"mid-source",x:de.midX,y:de.midY,angle:de.midsrcArrowAngle},{name:"mid-target",x:de.midX,y:de.midY,angle:de.midtgtArrowAngle}];for(je=0;je<et.length;je++){var Je=et[je],wt=p.arrowShapes[ae.pstyle(Je.name+"-arrow-shape").value],xt=ae.pstyle("width").pfValue;if(wt.roughCollide(u,o,at,Je.angle,{x:Je.x,y:Je.y},xt,D)&&wt.collide(u,o,at,Je.angle,{x:Je.x,y:Je.y},xt,D))return W(ae),!0}y&&v.length>0&&(Y(Ke),Y(tt))}function ne(ae,be,de){return Zs(ae,be,de)}function se(ae,be){var Me,de=ae._private,Ae=_;Me=be?be+"-":"",ae.boundingBox();var pe=de.labelBounds[be||"main"],Le=ae.pstyle(Me+"label").value;if("yes"===ae.pstyle("text-events").strValue&&Le){var qe=ne(de.rscratch,"labelX",be),Be=ne(de.rscratch,"labelY",be),je=ne(de.rscratch,"labelAngle",be),Ke=ae.pstyle(Me+"text-margin-x").pfValue,tt=ae.pstyle(Me+"text-margin-y").pfValue,at=pe.x1-Ae-Ke,et=pe.x2+Ae-Ke,Je=pe.y1-Ae-tt,wt=pe.y2+Ae-tt;if(je){var xt=Math.cos(je),yt=Math.sin(je),mt=function(Cn,Vt){return{x:(Cn-=qe)*xt-(Vt-=Be)*yt+qe,y:Cn*yt+Vt*xt+Be}},Xe=mt(at,Je),Dt=mt(at,wt),Ct=mt(et,Je),Pt=mt(et,wt);if(mr(u,o,[Xe.x+Ke,Xe.y+tt,Ct.x+Ke,Ct.y+tt,Pt.x+Ke,Pt.y+tt,Dt.x+Ke,Dt.y+tt]))return W(ae),!0}else if(no(pe,u,o))return W(ae),!0}}l&&(g=g.interactive);for(var Ee=g.length-1;Ee>=0;Ee--){var Ce=g[Ee];Ce.isNode()?Y(Ce)||se(Ce):te(Ce)||se(Ce)||se(Ce,"source")||se(Ce,"target")}return v},getAllInBox:function(u,o,l,d){for(var h=this.getCachedZSortedEles().interactive,p=[],g=Math.min(u,l),v=Math.max(u,l),b=Math.min(o,d),y=Math.max(o,d),D=Er({x1:u=g,y1:o=b,x2:l=v,y2:d=y}),x=0;x<h.length;x++){var _=h[x];if(_.isNode()){var k=_,O=k.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});ks(D,O)&&!bo(O,D)&&p.push(k)}else{var V=_,W=V._private,Y=W.rscratch;if(null!=Y.startX&&null!=Y.startY&&!no(D,Y.startX,Y.startY)||null!=Y.endX&&null!=Y.endY&&!no(D,Y.endX,Y.endY))continue;if("bezier"===Y.edgeType||"multibezier"===Y.edgeType||"self"===Y.edgeType||"compound"===Y.edgeType||"segments"===Y.edgeType||"haystack"===Y.edgeType){for(var te=W.rstyle.bezierPts||W.rstyle.linePts||W.rstyle.haystackPts,ne=!0,se=0;se<te.length;se++)if(!Du(D,te[se])){ne=!1;break}ne&&p.push(V)}else("haystack"===Y.edgeType||"straight"===Y.edgeType)&&p.push(V)}}return p}},Np={calculateArrowAngles:function(u){var b,y,D,x,_,k,o=u._private.rscratch,l="haystack"===o.edgeType,d="bezier"===o.edgeType,h="multibezier"===o.edgeType,p="segments"===o.edgeType,g="compound"===o.edgeType,v="self"===o.edgeType;l?(D=o.haystackPts[0],x=o.haystackPts[1],_=o.haystackPts[2],k=o.haystackPts[3]):(D=o.arrowStartX,x=o.arrowStartY,_=o.arrowEndX,k=o.arrowEndY),Y=o.midX,te=o.midY,p?(b=D-o.segpts[0],y=x-o.segpts[1]):h||g||v||d?(b=D-Yn((O=o.allpts)[0],O[2],O[4],.1),y=x-Yn(O[1],O[3],O[5],.1)):(b=D-Y,y=x-te),o.srcArrowAngle=vr(b,y);var Y=o.midX,te=o.midY;if(l&&(Y=(D+_)/2,te=(x+k)/2),b=_-D,y=k-x,p)if((O=o.allpts).length/2%2==0)b=O[ne=O.length/2]-O[se=ne-2],y=O[ne+1]-O[se+1];else{var ne,se,Ee=2+(ne=O.length/2-1);b=O[ne]-O[se=ne-2],y=O[ne+1]-O[se+1]}else if(h||g||v){var ae,be,de,Ae,pe,Me,Le,O=o.allpts;o.ctrlpts.length/2%2==0?(ae=Yn(O[Me=O.length/2-1],O[pe=Me+2],O[Le=pe+2],0),be=Yn(O[Me+1],O[pe+1],O[Le+1],0),de=Yn(O[Me],O[pe],O[Le],1e-4),Ae=Yn(O[Me+1],O[pe+1],O[Le+1],1e-4)):(ae=Yn(O[Me=(pe=O.length/2-1)-2],O[pe],O[Le=pe+2],.4999),be=Yn(O[Me+1],O[pe+1],O[Le+1],.4999),de=Yn(O[Me],O[pe],O[Le],.5),Ae=Yn(O[Me+1],O[pe+1],O[Le+1],.5)),b=de-ae,y=Ae-be}if(o.midtgtArrowAngle=vr(b,y),o.midDispX=b,o.midDispY=y,b*=-1,y*=-1,p&&(O=o.allpts).length/2%2!=0&&(b=-(O[Ee=2+(ne=O.length/2-1)]-O[ne]),y=-(O[Ee+1]-O[ne+1])),o.midsrcArrowAngle=vr(b,y),p)b=_-o.segpts[o.segpts.length-2],y=k-o.segpts[o.segpts.length-1];else if(h||g||v||d){var Se=(O=o.allpts).length;b=_-Yn(O[Se-6],O[Se-4],O[Se-2],.9),y=k-Yn(O[Se-5],O[Se-3],O[Se-1],.9)}else b=_-Y,y=k-te;o.tgtArrowAngle=vr(b,y)}};Np.getArrowWidth=Np.getArrowHeight=function(u,o){var l=this.arrowWidthCache=this.arrowWidthCache||{},d=l[u+", "+o];return d||(d=Math.max(Math.pow(13.37*u,.9),29)*o,l[u+", "+o]=d,d)};var es={};function Iv(u){var o=[];if(null!=u){for(var l=0;l<u.length;l+=2)o.push({x:u[l],y:u[l+1]});return o}}es.findHaystackPoints=function(u){for(var o=0;o<u.length;o++){var l=u[o],d=l._private,h=d.rscratch;if(!h.haystack){var p=2*Math.random()*Math.PI;h.source={x:Math.cos(p),y:Math.sin(p)},p=2*Math.random()*Math.PI,h.target={x:Math.cos(p),y:Math.sin(p)}}var g=d.source,v=d.target,b=g.position(),y=v.position(),D=g.width(),x=v.width(),_=g.height(),k=v.height(),V=l.pstyle("haystack-radius").value/2;h.haystackPts=h.allpts=[h.source.x*D*V+b.x,h.source.y*_*V+b.y,h.target.x*x*V+y.x,h.target.y*k*V+y.y],h.midX=(h.allpts[0]+h.allpts[2])/2,h.midY=(h.allpts[1]+h.allpts[3])/2,h.edgeType="haystack",h.haystack=!0,this.storeEdgeProjections(l),this.calculateArrowAngles(l),this.recalculateEdgeLabelProjections(l),this.calculateLabelAngles(l)}},es.findSegmentsPoints=function(u,o){var l=u._private.rscratch,d=o.posPts,h=o.intersectionPts,p=o.vectorNormInverse,g=u.pstyle("edge-distances").value,v=u.pstyle("segment-weights"),b=u.pstyle("segment-distances"),y=Math.min(v.pfValue.length,b.pfValue.length);l.edgeType="segments",l.segpts=[];for(var D=0;D<y;D++){var x=v.pfValue[D],_=b.pfValue[D],k=1-x,V="node-position"===g?d:h,W={x:V.x1*k+V.x2*x,y:V.y1*k+V.y2*x};l.segpts.push(W.x+p.x*_,W.y+p.y*_)}},es.findLoopPoints=function(u,o,l,d){var h=u._private.rscratch,p=o.dirCounts,g=o.srcPos,v=u.pstyle("control-point-distances"),b=v?v.pfValue[0]:void 0,y=u.pstyle("loop-direction").pfValue,D=u.pstyle("loop-sweep").pfValue,x=u.pstyle("control-point-step-size").pfValue;h.edgeType="self";var _=l,k=x;d&&(_=0,k=b);var O=y-Math.PI/2,V=O-D/2,W=O+D/2,Y=String(y+"_"+D);_=void 0===p[Y]?p[Y]=0:++p[Y],h.ctrlpts=[g.x+1.4*Math.cos(V)*k*(_/3+1),g.y+1.4*Math.sin(V)*k*(_/3+1),g.x+1.4*Math.cos(W)*k*(_/3+1),g.y+1.4*Math.sin(W)*k*(_/3+1)]},es.findCompoundLoopPoints=function(u,o,l,d){var h=u._private.rscratch;h.edgeType="compound";var p=o.srcPos,g=o.tgtPos,v=o.srcW,b=o.srcH,y=o.tgtW,D=o.tgtH,x=u.pstyle("control-point-step-size").pfValue,_=u.pstyle("control-point-distances"),O=l,V=x;d&&(O=0,V=_?_.pfValue[0]:void 0);var Y={x:p.x-v/2,y:p.y-b/2},te={x:g.x-y/2,y:g.y-D/2},ne={x:Math.min(Y.x,te.x),y:Math.min(Y.y,te.y)},Ee=Math.max(.5,Math.log(.01*v)),Ce=Math.max(.5,Math.log(.01*y));h.ctrlpts=[ne.x,ne.y-(1+Math.pow(50,1.12)/100)*V*(O/3+1)*Ee,ne.x-(1+Math.pow(50,1.12)/100)*V*(O/3+1)*Ce,ne.y]},es.findStraightEdgePoints=function(u){u._private.rscratch.edgeType="straight"},es.findBezierPoints=function(u,o,l,d,h){var p=u._private.rscratch,g=o.vectorNormInverse,v=o.posPts,b=o.intersectionPts,y=u.pstyle("edge-distances").value,D=u.pstyle("control-point-step-size").pfValue,x=u.pstyle("control-point-distances"),_=u.pstyle("control-point-weights"),k=x&&_?Math.min(x.value.length,_.value.length):1,O=x?x.pfValue[0]:void 0,V=_.value[0],W=d;p.edgeType=W?"multibezier":"bezier",p.ctrlpts=[];for(var Y=0;Y<k;Y++){var ne,te=(.5-o.eles.length/2+l)*D*(h?-1:1),se=Wr(te);W&&(O=x?x.pfValue[Y]:D,V=_.value[Y]);var Ee=void 0!==(ne=d?O:void 0!==O?se*O:void 0)?ne:te,Ce=1-V,be="node-position"===y?v:b,de={x:be.x1*Ce+be.x2*V,y:be.y1*Ce+be.y2*V};p.ctrlpts.push(de.x+g.x*Ee,de.y+g.y*Ee)}},es.findTaxiPoints=function(u,o){var l=u._private.rscratch;l.edgeType="segments";var d="vertical",h="horizontal",p="leftward",g="rightward",v="downward",b="upward",D=o.posPts,x=o.srcW,_=o.srcH,k=o.tgtW,O=o.tgtH,W="node-position"!==u.pstyle("edge-distances").value,Y=u.pstyle("taxi-direction").value,te=Y,ne=u.pstyle("taxi-turn"),se="%"===ne.units,Ee=ne.pfValue,Ce=Ee<0,ae=u.pstyle("taxi-turn-min-distance").pfValue,de=W?(_+O)/2:0,Ae=D.x2-D.x1,Me=D.y2-D.y1,pe=function(Zt,Fn){return Zt>0?Math.max(Zt-Fn,0):Math.min(Zt+Fn,0)},Le=pe(Ae,W?(x+k)/2:0),Se=pe(Me,de),qe=!1;"auto"===te?Y=Math.abs(Le)>Math.abs(Se)?h:d:te===b||te===v?(Y=d,qe=!0):(te===p||te===g)&&(Y=h,qe=!0);var et,Be=Y===d,je=Be?Se:Le,Ke=Be?Me:Ae,tt=Wr(Ke),at=!1;(!qe||!se&&!Ce)&&(te===v&&Ke<0||te===b&&Ke>0||te===p&&Ke>0||te===g&&Ke<0)&&(je=(tt*=-1)*Math.abs(je),at=!0);var xt=function(Zt){return Math.abs(Zt)<ae||Math.abs(Zt)>=Math.abs(je)},yt=xt(et=se?(Ee<0?1+Ee:Ee)*je:(Ee<0?je:0)+Ee*tt),mt=xt(Math.abs(je)-Math.abs(et));if(!yt&&!mt||at)if(Be){var he=D.y1+et+(W?_/2*tt:0);l.segpts=[D.x1,he,D.x2,he]}else{var pt=D.x1+et+(W?x/2*tt:0);l.segpts=[pt,D.y1,pt,D.y2]}else if(Be){var Dt=Math.abs(Ke)<=_/2,Ct=Math.abs(Ae)<=k/2;if(Dt){var Pt=(D.x1+D.x2)/2;l.segpts=[Pt,D.y1,Pt,D.y2]}else if(Ct){var Cn=(D.y1+D.y2)/2;l.segpts=[D.x1,Cn,D.x2,Cn]}else l.segpts=[D.x1,D.y2]}else{var ln=Math.abs(Ke)<=x/2,Qt=Math.abs(Me)<=O/2;if(ln){var zt=(D.y1+D.y2)/2;l.segpts=[D.x1,zt,D.x2,zt]}else if(Qt){var Dn=(D.x1+D.x2)/2;l.segpts=[Dn,D.y1,Dn,D.y2]}else l.segpts=[D.x2,D.y1]}},es.tryToCorrectInvalidPoints=function(u,o){var l=u._private.rscratch;if("bezier"===l.edgeType){var d=o.srcPos,h=o.tgtPos,p=o.srcW,g=o.srcH,v=o.tgtW,b=o.tgtH,y=o.srcShape,D=o.tgtShape,x=!fe(l.startX)||!fe(l.startY),_=!fe(l.arrowStartX)||!fe(l.arrowStartY),k=!fe(l.endX)||!fe(l.endY),O=!fe(l.arrowEndX)||!fe(l.arrowEndY),Y=this.getArrowWidth(u.pstyle("width").pfValue,u.pstyle("arrow-scale").value)*this.arrowShapeWidth*3,te=Dr({x:l.ctrlpts[0],y:l.ctrlpts[1]},{x:l.startX,y:l.startY}),ne=te<Y,se=Dr({x:l.ctrlpts[0],y:l.ctrlpts[1]},{x:l.endX,y:l.endY}),Ee=se<Y,Ce=!1;if(x||_||ne){Ce=!0;var ae={x:l.ctrlpts[0]-d.x,y:l.ctrlpts[1]-d.y},be=Math.sqrt(ae.x*ae.x+ae.y*ae.y),de={x:ae.x/be,y:ae.y/be},Ae=Math.max(p,g),Me={x:l.ctrlpts[0]+2*de.x*Ae,y:l.ctrlpts[1]+2*de.y*Ae},pe=y.intersectLine(d.x,d.y,p,g,Me.x,Me.y,0);ne?(l.ctrlpts[0]=l.ctrlpts[0]+de.x*(Y-te),l.ctrlpts[1]=l.ctrlpts[1]+de.y*(Y-te)):(l.ctrlpts[0]=pe[0]+de.x*Y,l.ctrlpts[1]=pe[1]+de.y*Y)}if(k||O||Ee){Ce=!0;var Le={x:l.ctrlpts[0]-h.x,y:l.ctrlpts[1]-h.y},Se=Math.sqrt(Le.x*Le.x+Le.y*Le.y),qe={x:Le.x/Se,y:Le.y/Se},Be=Math.max(p,g),je={x:l.ctrlpts[0]+2*qe.x*Be,y:l.ctrlpts[1]+2*qe.y*Be},Ke=D.intersectLine(h.x,h.y,v,b,je.x,je.y,0);Ee?(l.ctrlpts[0]=l.ctrlpts[0]+qe.x*(Y-se),l.ctrlpts[1]=l.ctrlpts[1]+qe.y*(Y-se)):(l.ctrlpts[0]=Ke[0]+qe.x*Y,l.ctrlpts[1]=Ke[1]+qe.y*Y)}Ce&&this.findEndpoints(u)}},es.storeAllpts=function(u){var o=u._private.rscratch;if("multibezier"===o.edgeType||"bezier"===o.edgeType||"self"===o.edgeType||"compound"===o.edgeType){o.allpts=[],o.allpts.push(o.startX,o.startY);for(var l=0;l+1<o.ctrlpts.length;l+=2)o.allpts.push(o.ctrlpts[l],o.ctrlpts[l+1]),l+3<o.ctrlpts.length&&o.allpts.push((o.ctrlpts[l]+o.ctrlpts[l+2])/2,(o.ctrlpts[l+1]+o.ctrlpts[l+3])/2);var d;o.allpts.push(o.endX,o.endY),o.ctrlpts.length/2%2==0?(o.midX=o.allpts[d=o.allpts.length/2-1],o.midY=o.allpts[d+1]):(o.midX=Yn(o.allpts[d=o.allpts.length/2-3],o.allpts[d+2],o.allpts[d+4],.5),o.midY=Yn(o.allpts[d+1],o.allpts[d+3],o.allpts[d+5],.5))}else if("straight"===o.edgeType)o.allpts=[o.startX,o.startY,o.endX,o.endY],o.midX=(o.startX+o.endX+o.arrowStartX+o.arrowEndX)/4,o.midY=(o.startY+o.endY+o.arrowStartY+o.arrowEndY)/4;else if("segments"===o.edgeType)if(o.allpts=[],o.allpts.push(o.startX,o.startY),o.allpts.push.apply(o.allpts,o.segpts),o.allpts.push(o.endX,o.endY),o.segpts.length%4==0){var p=o.segpts.length/2,g=p-2;o.midX=(o.segpts[g]+o.segpts[p])/2,o.midY=(o.segpts[g+1]+o.segpts[p+1])/2}else{var v=o.segpts.length/2-1;o.midX=o.segpts[v],o.midY=o.segpts[v+1]}},es.checkForInvalidEdgeWarning=function(u){var o=u[0]._private.rscratch;o.nodesOverlap||fe(o.startX)&&fe(o.startY)&&fe(o.endX)&&fe(o.endY)?o.loggedErr=!1:o.loggedErr||(o.loggedErr=!0,tr("Edge `"+u.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},es.findEdgeControlPoints=function(u){var o=this;if(u&&0!==u.length){for(var l=this,h=l.cy.hasCompoundNodes(),p={map:new Xi,get:function(ae){var be=this.map.get(ae[0]);return null!=be?be.get(ae[1]):null},set:function(ae,be){var de=this.map.get(ae[0]);null==de&&(de=new Xi,this.map.set(ae[0],de)),de.set(ae[1],be)}},g=[],v=[],b=0;b<u.length;b++){var y=u[b],D=y._private,x=y.pstyle("curve-style").value;if(!y.removed()&&y.takesUpSpace()){if("haystack"===x){v.push(y);continue}var _="unbundled-bezier"===x||"segments"===x||"straight"===x||"straight-triangle"===x||"taxi"===x,k="unbundled-bezier"===x||"bezier"===x,V=D.target,te=[D.source.poolIndex(),V.poolIndex()].sort(),ne=p.get(te);null==ne&&(p.set(te,ne={eles:[]}),g.push(te)),ne.eles.push(y),_&&(ne.hasUnbundled=!0),k&&(ne.hasBezier=!0)}}for(var se=function(ae){var de=p.get(g[ae]),Ae=void 0;if(!de.hasUnbundled){var Me=de.eles[0].parallelEdges().filter(function(It){return It.isBundledBezier()});Tc(de.eles),Me.forEach(function(It){return de.eles.push(It)}),de.eles.sort(function(It,he){return It.poolIndex()-he.poolIndex()})}var pe=de.eles[0],Le=pe.source(),Se=pe.target();if(Le.poolIndex()>Se.poolIndex()){var qe=Le;Le=Se,Se=qe}var Be=de.srcPos=Le.position(),je=de.tgtPos=Se.position(),Ke=de.srcW=Le.outerWidth(),tt=de.srcH=Le.outerHeight(),at=de.tgtW=Se.outerWidth(),et=de.tgtH=Se.outerHeight(),Je=de.srcShape=l.nodeShapes[o.getNodeShape(Le)],wt=de.tgtShape=l.nodeShapes[o.getNodeShape(Se)];de.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var xt=0;xt<de.eles.length;xt++){var yt=de.eles[xt],mt=yt[0]._private.rscratch,Xe=yt.pstyle("curve-style").value,Dt="unbundled-bezier"===Xe||"segments"===Xe||"taxi"===Xe,Ct=!Le.same(yt.source());if(!de.calculatedIntersection&&Le!==Se&&(de.hasBezier||de.hasUnbundled)){de.calculatedIntersection=!0;var Pt=Je.intersectLine(Be.x,Be.y,Ke,tt,je.x,je.y,0),Bt=de.srcIntn=Pt,vn=wt.intersectLine(je.x,je.y,at,et,Be.x,Be.y,0),Cn=de.tgtIntn=vn,Vt=de.intersectionPts={x1:Pt[0],x2:vn[0],y1:Pt[1],y2:vn[1]},Lt=de.posPts={x1:Be.x,x2:je.x,y1:Be.y,y2:je.y},ln=vn[1]-Pt[1],Qt=vn[0]-Pt[0],zt=Math.sqrt(Qt*Qt+ln*ln),nn=de.vector={x:Qt,y:ln},Rn=de.vectorNorm={x:nn.x/zt,y:nn.y/zt},Dn={x:-Rn.y,y:Rn.x};de.nodesOverlap=!fe(zt)||wt.checkPoint(Pt[0],Pt[1],0,at,et,je.x,je.y)||Je.checkPoint(vn[0],vn[1],0,Ke,tt,Be.x,Be.y),de.vectorNormInverse=Dn,Ae={nodesOverlap:de.nodesOverlap,dirCounts:de.dirCounts,calculatedIntersection:!0,hasBezier:de.hasBezier,hasUnbundled:de.hasUnbundled,eles:de.eles,srcPos:je,tgtPos:Be,srcW:at,srcH:et,tgtW:Ke,tgtH:tt,srcIntn:Cn,tgtIntn:Bt,srcShape:wt,tgtShape:Je,posPts:{x1:Lt.x2,y1:Lt.y2,x2:Lt.x1,y2:Lt.y1},intersectionPts:{x1:Vt.x2,y1:Vt.y2,x2:Vt.x1,y2:Vt.y1},vector:{x:-nn.x,y:-nn.y},vectorNorm:{x:-Rn.x,y:-Rn.y},vectorNormInverse:{x:-Dn.x,y:-Dn.y}}}var cn=Ct?Ae:de;mt.nodesOverlap=cn.nodesOverlap,mt.srcIntn=cn.srcIntn,mt.tgtIntn=cn.tgtIntn,h&&(Le.isParent()||Le.isChild()||Se.isParent()||Se.isChild())&&(Le.parents().anySame(Se)||Se.parents().anySame(Le)||Le.same(Se)&&Le.isParent())?o.findCompoundLoopPoints(yt,cn,xt,Dt):Le===Se?o.findLoopPoints(yt,cn,xt,Dt):"segments"===Xe?o.findSegmentsPoints(yt,cn):"taxi"===Xe?o.findTaxiPoints(yt,cn):"straight"===Xe||!Dt&&de.eles.length%2==1&&xt===Math.floor(de.eles.length/2)?o.findStraightEdgePoints(yt):o.findBezierPoints(yt,cn,xt,Dt,Ct),o.findEndpoints(yt),o.tryToCorrectInvalidPoints(yt,cn),o.checkForInvalidEdgeWarning(yt),o.storeAllpts(yt),o.storeEdgeProjections(yt),o.calculateArrowAngles(yt),o.recalculateEdgeLabelProjections(yt),o.calculateLabelAngles(yt)}},Ee=0;Ee<g.length;Ee++)se(Ee);this.findHaystackPoints(v)}},es.getSegmentPoints=function(u){var o=u[0]._private.rscratch;if("segments"===o.edgeType)return this.recalculateRenderedStyle(u),Iv(o.segpts)},es.getControlPoints=function(u){var o=u[0]._private.rscratch,l=o.edgeType;if("bezier"===l||"multibezier"===l||"self"===l||"compound"===l)return this.recalculateRenderedStyle(u),Iv(o.ctrlpts)},es.getEdgeMidpoint=function(u){var o=u[0]._private.rscratch;return this.recalculateRenderedStyle(u),{x:o.midX,y:o.midY}};var Ql={manualEndptToPx:function(u,o){var d=u.position(),h=u.outerWidth(),p=u.outerHeight();if(2===o.value.length){var g=[o.pfValue[0],o.pfValue[1]];return"%"===o.units[0]&&(g[0]=g[0]*h),"%"===o.units[1]&&(g[1]=g[1]*p),g[0]+=d.x,g[1]+=d.y,g}var v=o.pfValue[0];v=-Math.PI/2+v;var b=2*Math.max(h,p),y=[d.x+Math.cos(v)*b,d.y+Math.sin(v)*b];return this.nodeShapes[this.getNodeShape(u)].intersectLine(d.x,d.y,h,p,y[0],y[1],0)},findEndpoints:function(u){var l,Ae,Me,pe,Le,o=this,d=u.source()[0],h=u.target()[0],p=d.position(),g=h.position(),v=u.pstyle("target-arrow-shape").value,b=u.pstyle("source-arrow-shape").value,y=u.pstyle("target-distance-from-node").pfValue,D=u.pstyle("source-distance-from-node").pfValue,x=u.pstyle("curve-style").value,_=u._private.rscratch,k=_.edgeType,V="self"===k||"compound"===k,W="bezier"===k||"multibezier"===k||V,Y="bezier"!==k,te="straight"===k||"segments"===k,ne="segments"===k,se=W||Y||te,Ee=V||"taxi"===x,Ce=u.pstyle("source-endpoint"),ae=Ee?"outside-to-node":Ce.value,be=u.pstyle("target-endpoint"),de=Ee?"outside-to-node":be.value;if(_.srcManEndpt=Ce,_.tgtManEndpt=be,W){var Se=[_.ctrlpts[0],_.ctrlpts[1]];Ae=Y?[_.ctrlpts[_.ctrlpts.length-2],_.ctrlpts[_.ctrlpts.length-1]]:Se,Me=Se}else if(te){var Be=ne?_.segpts.slice(0,2):[g.x,g.y];Ae=ne?_.segpts.slice(_.segpts.length-2):[p.x,p.y],Me=Be}if("inside-to-node"===de)l=[g.x,g.y];else if(be.units)l=this.manualEndptToPx(h,be);else if("outside-to-line"===de)l=_.tgtIntn;else if("outside-to-node"===de||"outside-to-node-or-label"===de?pe=Ae:("outside-to-line"===de||"outside-to-line-or-label"===de)&&(pe=[p.x,p.y]),l=o.nodeShapes[this.getNodeShape(h)].intersectLine(g.x,g.y,h.outerWidth(),h.outerHeight(),pe[0],pe[1],0),"outside-to-node-or-label"===de||"outside-to-line-or-label"===de){var Ke=h._private.rscratch,et=Ke.labelX,Je=Ke.labelY,wt=Ke.labelWidth/2,xt=Ke.labelHeight/2,yt=h.pstyle("text-valign").value;"top"===yt?Je-=xt:"bottom"===yt&&(Je+=xt);var mt=h.pstyle("text-halign").value;"left"===mt?et-=wt:"right"===mt&&(et+=wt);var Xe=Xa(pe[0],pe[1],[et-wt,Je-xt,et+wt,Je-xt,et+wt,Je+xt,et-wt,Je+xt],g.x,g.y);if(Xe.length>0){var Dt=p,Ct=dr(Dt,jn(l)),Pt=dr(Dt,jn(Xe)),Bt=Ct;Pt<Ct&&(l=Xe,Bt=Pt),Xe.length>2&&dr(Dt,{x:Xe[2],y:Xe[3]})<Bt&&(l=[Xe[2],Xe[3]])}}var Cn=Fl(l,Ae,o.arrowShapes[v].spacing(u)+y),Vt=Fl(l,Ae,o.arrowShapes[v].gap(u)+y);if(_.endX=Vt[0],_.endY=Vt[1],_.arrowEndX=Cn[0],_.arrowEndY=Cn[1],"inside-to-node"===ae)l=[p.x,p.y];else if(Ce.units)l=this.manualEndptToPx(d,Ce);else if("outside-to-line"===ae)l=_.srcIntn;else if("outside-to-node"===ae||"outside-to-node-or-label"===ae?Le=Me:("outside-to-line"===ae||"outside-to-line-or-label"===ae)&&(Le=[g.x,g.y]),l=o.nodeShapes[this.getNodeShape(d)].intersectLine(p.x,p.y,d.outerWidth(),d.outerHeight(),Le[0],Le[1],0),"outside-to-node-or-label"===ae||"outside-to-line-or-label"===ae){var Lt=d._private.rscratch,zt=Lt.labelX,nn=Lt.labelY,Rn=Lt.labelWidth/2,Dn=Lt.labelHeight/2,cn=d.pstyle("text-valign").value;"top"===cn?nn-=Dn:"bottom"===cn&&(nn+=Dn);var It=d.pstyle("text-halign").value;"left"===It?zt-=Rn:"right"===It&&(zt+=Rn);var he=Xa(Le[0],Le[1],[zt-Rn,nn-Dn,zt+Rn,nn-Dn,zt+Rn,nn+Dn,zt-Rn,nn+Dn],p.x,p.y);if(he.length>0){var rt=g,At=dr(rt,jn(l)),pt=dr(rt,jn(he)),vt=At;pt<At&&(l=[he[0],he[1]],vt=pt),he.length>2&&dr(rt,{x:he[2],y:he[3]})<vt&&(l=[he[2],he[3]])}}var _t=Fl(l,Me,o.arrowShapes[b].spacing(u)+D),Zt=Fl(l,Me,o.arrowShapes[b].gap(u)+D);_.startX=Zt[0],_.startY=Zt[1],_.arrowStartX=_t[0],_.arrowStartY=_t[1],se&&(_.badLine=!(fe(_.startX)&&fe(_.startY)&&fe(_.endX)&&fe(_.endY)))},getSourceEndpoint:function(u){var o=u[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(u),o.edgeType)?{x:o.haystackPts[0],y:o.haystackPts[1]}:{x:o.arrowStartX,y:o.arrowStartY}},getTargetEndpoint:function(u){var o=u[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(u),o.edgeType)?{x:o.haystackPts[2],y:o.haystackPts[3]}:{x:o.arrowEndX,y:o.arrowEndY}}},kv={};function K1(u,o,l){for(var d=function(y,D,x,_){return Yn(y,D,x,_)},p=o._private.rstyle.bezierPts,g=0;g<u.bezierProjPcts.length;g++){var v=u.bezierProjPcts[g];p.push({x:d(l[0],l[2],l[4],v),y:d(l[1],l[3],l[5],v)})}}kv.storeEdgeProjections=function(u){var o=u._private,l=o.rscratch,d=l.edgeType;if(o.rstyle.bezierPts=null,o.rstyle.linePts=null,o.rstyle.haystackPts=null,"multibezier"===d||"bezier"===d||"self"===d||"compound"===d){o.rstyle.bezierPts=[];for(var h=0;h+5<l.allpts.length;h+=4)K1(this,u,l.allpts.slice(h,h+6))}else if("segments"===d){var p=o.rstyle.linePts=[];for(h=0;h+1<l.allpts.length;h+=2)p.push({x:l.allpts[h],y:l.allpts[h+1]})}else if("haystack"===d){var g=l.haystackPts;o.rstyle.haystackPts=[{x:g[0],y:g[1]},{x:g[2],y:g[3]}]}o.rstyle.arrowWidth=this.getArrowWidth(u.pstyle("width").pfValue,u.pstyle("arrow-scale").value)*this.arrowShapeWidth},kv.recalculateEdgeProjections=function(u){this.findEdgeControlPoints(u)};var lo={recalculateNodeLabelProjection:function(u){var o=u.pstyle("label").strValue;if(!Ge(o)){var l,d,h=u._private,p=u.width(),g=u.height(),v=u.padding(),b=u.position(),y=u.pstyle("text-halign").strValue,D=u.pstyle("text-valign").strValue,x=h.rscratch,_=h.rstyle;switch(y){case"left":l=b.x-p/2-v;break;case"right":l=b.x+p/2+v;break;default:l=b.x}switch(D){case"top":d=b.y-g/2-v;break;case"bottom":d=b.y+g/2+v;break;default:d=b.y}x.labelX=l,x.labelY=d,_.labelX=l,_.labelY=d,this.calculateLabelAngles(u),this.applyLabelDimensions(u)}}},Ow=function(o,l){var d=Math.atan(l/o);return 0===o&&d<0&&(d*=-1),d},Rw=function(o,l){return Ow(l.x-o.x,l.y-o.y)};lo.recalculateEdgeLabelProjections=function(u){var o,l=u._private,d=l.rscratch,h=this,p={mid:u.pstyle("label").strValue,source:u.pstyle("source-label").strValue,target:u.pstyle("target-label").strValue};if(p.mid||p.source||p.target){var g=function(x,_,k){eo(l.rscratch,x,_,k),eo(l.rstyle,x,_,k)};g("labelX",null,(o={x:d.midX,y:d.midY}).x),g("labelY",null,o.y);var v=Ow(d.midDispX,d.midDispY);g("labelAutoAngle",null,v);var b=function D(){if(D.cache)return D.cache;for(var x=[],_=0;_+5<d.allpts.length;_+=4)x.push({p0:{x:d.allpts[_],y:d.allpts[_+1]},p1:{x:d.allpts[_+2],y:d.allpts[_+3]},p2:{x:d.allpts[_+4],y:d.allpts[_+5]},startDist:0,length:0,segments:[]});var W=l.rstyle.bezierPts,Y=h.bezierProjPcts.length;function te(ae,be,de,Ae,Me){var pe=Dr(be,de),Le=ae.segments[ae.segments.length-1];ae.segments.push({p0:be,p1:de,t0:Ae,t1:Me,startDist:Le?Le.startDist+Le.length:0,length:pe}),ae.length+=pe}for(var ne=0;ne<x.length;ne++){var se=x[ne],Ee=x[ne-1];Ee&&(se.startDist=Ee.startDist+Ee.length),te(se,se.p0,W[ne*Y],0,h.bezierProjPcts[0]);for(var Ce=0;Ce<Y-1;Ce++)te(se,W[ne*Y+Ce],W[ne*Y+Ce+1],h.bezierProjPcts[Ce],h.bezierProjPcts[Ce+1]);te(se,W[ne*Y+Y-1],se.p2,h.bezierProjPcts[Y-1],1)}return D.cache=x},y=function(x){var _,k="source"===x;if(p[x]){var O=u.pstyle(x+"-text-offset").pfValue;switch(d.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var W,V=b(),Y=0,te=0,ne=0;ne<V.length;ne++){for(var se=V[k?ne:V.length-1-ne],Ee=0;Ee<se.segments.length;Ee++){var Ce=se.segments[k?Ee:se.segments.length-1-Ee];if(Y=te,(te+=Ce.length)>=O||ne===V.length-1&&Ee===se.segments.length-1){W={cp:se,segment:Ce};break}}if(W)break}var be=W.cp,de=W.segment,Ae=(O-Y)/de.length,Me=de.t1-de.t0,pe=k?de.t0+Me*Ae:de.t1-Me*Ae;pe=mn(0,pe,1),o=Is(be.p0,be.p1,be.p2,pe),_=function(o,l,d,h){var p=mn(0,h-.001,1),g=mn(0,h+.001,1),v=Is(o,l,d,p),b=Is(o,l,d,g);return Rw(v,b)}(be.p0,be.p1,be.p2,pe);break;case"straight":case"segments":case"haystack":for(var Se,qe,Be,je,Le=0,Ke=d.allpts.length,tt=0;tt+3<Ke&&(k?(Be={x:d.allpts[tt],y:d.allpts[tt+1]},je={x:d.allpts[tt+2],y:d.allpts[tt+3]}):(Be={x:d.allpts[Ke-2-tt],y:d.allpts[Ke-1-tt]},je={x:d.allpts[Ke-4-tt],y:d.allpts[Ke-3-tt]}),qe=Le,!((Le+=Se=Dr(Be,je))>=O));tt+=2);var et=(O-qe)/Se;et=mn(0,et,1),o=function(o,l,d,h){var p_x=l.x-o.x,p_y=l.y-o.y,g=Dr(o,l);return d=d??0,{x:o.x+p_x/g*(h=h??d*g),y:o.y+p_y/g*h}}(Be,je,et),_=Rw(Be,je)}g("labelX",x,o.x),g("labelY",x,o.y),g("labelAutoAngle",x,_)}};y("source"),y("target"),this.applyLabelDimensions(u)}},lo.applyLabelDimensions=function(u){this.applyPrefixedLabelDimensions(u),u.isEdge()&&(this.applyPrefixedLabelDimensions(u,"source"),this.applyPrefixedLabelDimensions(u,"target"))},lo.applyPrefixedLabelDimensions=function(u,o){var l=u._private,d=this.getLabelText(u,o),h=this.calculateLabelDimensions(u,d),p=u.pstyle("line-height").pfValue,g=u.pstyle("text-wrap").strValue,v=Zs(l.rscratch,"labelWrapCachedLines",o)||[],b="wrap"!==g?1:Math.max(v.length,1),y=h.height/b,D=y*p,x=h.width,_=h.height+(b-1)*(p-1)*y;eo(l.rstyle,"labelWidth",o,x),eo(l.rscratch,"labelWidth",o,x),eo(l.rstyle,"labelHeight",o,_),eo(l.rscratch,"labelHeight",o,_),eo(l.rscratch,"labelLineHeight",o,D)},lo.getLabelText=function(u,o){var l=u._private,h=u.pstyle((o?o+"-":"")+"label").strValue,p=u.pstyle("text-transform").value,g=function(at,et){return et?(eo(l.rscratch,at,o,et),et):Zs(l.rscratch,at,o)};if(!h)return"";"none"==p||("uppercase"==p?h=h.toUpperCase():"lowercase"==p&&(h=h.toLowerCase()));var v=u.pstyle("text-wrap").value;if("wrap"===v){var b=g("labelKey");if(null!=b&&g("labelWrapKey")===b)return g("labelWrapCachedText");for(var D=h.split("\n"),x=u.pstyle("text-max-width").pfValue,k="anywhere"===u.pstyle("text-overflow-wrap").value,O=[],V=/[\s\u200b]+/,W=k?"":" ",Y=0;Y<D.length;Y++){var te=D[Y],se=this.calculateLabelDimensions(u,te).width;if(k){var Ee=te.split("").join("\u200b");te=Ee}if(se>x){for(var Ce=te.split(V),ae="",be=0;be<Ce.length;be++){var de=Ce[be];this.calculateLabelDimensions(u,0===ae.length?de:ae+W+de).width<=x?ae+=de+W:(ae&&O.push(ae),ae=de+W)}ae.match(/^[\s\u200b]+$/)||O.push(ae)}else O.push(te)}g("labelWrapCachedLines",O),h=g("labelWrapCachedText",O.join("\n")),g("labelWrapKey",b)}else if("ellipsis"===v){var Le=u.pstyle("text-max-width").pfValue,Se="",Be=!1;if(this.calculateLabelDimensions(u,h).width<Le)return h;for(var je=0;je<h.length&&!(this.calculateLabelDimensions(u,Se+h[je]+"\u2026").width>Le);je++)Se+=h[je],je===h.length-1&&(Be=!0);return Be||(Se+="\u2026"),Se}return h},lo.getLabelJustification=function(u){var o=u.pstyle("text-justification").strValue,l=u.pstyle("text-halign").strValue;if("auto"!==o)return o;if(!u.isNode())return"center";switch(l){case"left":return"right";case"right":return"left";default:return"center"}},lo.calculateLabelDimensions=function(u,o){var d=la(o,u._private.labelDimsKey),h=this.labelDimCache||(this.labelDimCache=[]),p=h[d];if(null!=p)return p;var v=u.pstyle("font-style").strValue,b=u.pstyle("font-size").pfValue,y=u.pstyle("font-family").strValue,D=u.pstyle("font-weight").strValue,x=this.labelCalcCanvas,_=this.labelCalcCanvasContext;if(!x){x=this.labelCalcCanvas=document.createElement("canvas"),_=this.labelCalcCanvasContext=x.getContext("2d");var k=x.style;k.position="absolute",k.left="-9999px",k.top="-9999px",k.zIndex="-1",k.visibility="hidden",k.pointerEvents="none"}_.font="".concat(v," ").concat(D," ").concat(b,"px ").concat(y);for(var O=0,V=0,W=o.split("\n"),Y=0;Y<W.length;Y++){var ne=_.measureText(W[Y]),se=Math.ceil(ne.width),Ee=b;O=Math.max(se,O),V+=Ee}return h[d]={width:O+=0,height:V+=0}},lo.calculateLabelAngle=function(u,o){var d=u._private.rscratch,h=u.isEdge(),g=u.pstyle((o?o+"-":"")+"text-rotation"),v=g.strValue;return"none"===v?0:h&&"autorotate"===v?d.labelAutoAngle:"autorotate"===v?0:g.pfValue},lo.calculateLabelAngles=function(u){var o=this,l=u.isEdge(),h=u._private.rscratch;h.labelAngle=o.calculateLabelAngle(u),l&&(h.sourceLabelAngle=o.calculateLabelAngle(u,"source"),h.targetLabelAngle=o.calculateLabelAngle(u,"target"))};var Nw={},Ov=!1;Nw.getNodeShape=function(u){var l=u.pstyle("shape").value;if("cutrectangle"===l&&(u.width()<28||u.height()<28))return Ov||(tr("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),Ov=!0),"rectangle";if(u.isParent())return"rectangle"===l||"roundrectangle"===l||"round-rectangle"===l||"cutrectangle"===l||"cut-rectangle"===l||"barrel"===l?l:"rectangle";if("polygon"===l){var d=u.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(d).name}return l};var Wu={updateCachedGrabbedEles:function(){var u=this.cachedZSortedEles;if(u){u.drag=[],u.nondrag=[];for(var o=[],l=0;l<u.length;l++){var h=(d=u[l])._private.rscratch;d.grabbed()&&!d.isParent()?o.push(d):h.inDragLayer?u.drag.push(d):u.nondrag.push(d)}for(l=0;l<o.length;l++){var d;u.drag.push(d=o[l])}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(u){if(u||!this.cachedZSortedEles){var o=this.cy.mutableElements().toArray();o.sort(gw),o.interactive=o.filter(function(l){return l.interactive()}),this.cachedZSortedEles=o,this.updateCachedGrabbedEles()}else o=this.cachedZSortedEles;return o}},Pp={};[al,Np,es,Ql,kv,lo,Nw,{registerCalculationListeners:function(){var u=this.cy,o=u.collection(),l=this,d=function(g){var v=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(o.merge(g),v)for(var b=0;b<g.length;b++){var y=g[b],D=y._private,x=D.rstyle;x.clean=!1,x.cleanConnected=!1}};l.binder(u).on("bounds.* dirty.*",function(g){d(g.target)}).on("style.* background.*",function(g){d(g.target,!1)});var h=function(g){if(g){var v=l.onUpdateEleCalcsFns;o.cleanStyle();for(var b=0;b<o.length;b++){var y=o[b],D=y._private.rstyle;y.isNode()&&!D.cleanConnected&&(d(y.connectedEdges()),D.cleanConnected=!0)}if(v)for(var x=0;x<v.length;x++)(0,v[x])(g,o);l.recalculateRenderedStyle(o),o=u.collection()}};l.flushRenderedStyleQueue=function(){h(!0)},l.beforeRender(h,l.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(u){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(u)},recalculateRenderedStyle:function(u,o){var l=function(se){return se._private.rstyle.cleanConnected},d=[],h=[];if(!this.destroyed){void 0===o&&(o=!0);for(var p=0;p<u.length;p++){var g=u[p],v=g._private,b=v.rstyle;g.isEdge()&&(!l(g.source())||!l(g.target()))&&(b.clean=!1),!(o&&b.clean||g.removed())&&"none"!==g.pstyle("display").value&&("nodes"===v.group?h.push(g):d.push(g),b.clean=!0)}for(var y=0;y<h.length;y++){var D=h[y],_=D._private.rstyle,k=D.position();this.recalculateNodeLabelProjection(D),_.nodeX=k.x,_.nodeY=k.y,_.nodeW=D.pstyle("width").pfValue,_.nodeH=D.pstyle("height").pfValue}this.recalculateEdgeProjections(d);for(var O=0;O<d.length;O++){var W=d[O]._private,Y=W.rstyle,te=W.rscratch;Y.srcX=te.arrowStartX,Y.srcY=te.arrowStartY,Y.tgtX=te.arrowEndX,Y.tgtY=te.arrowEndY,Y.midX=te.midX,Y.midY=te.midY,Y.labelAngle=te.labelAngle,Y.sourceLabelAngle=te.sourceLabelAngle,Y.targetLabelAngle=te.targetLabelAngle}}}},Wu].forEach(function(u){Yt(Pp,u)});var Lp={getCachedImage:function(u,o,l){var h=this.imageCache=this.imageCache||{},p=h[u];if(p)return p.image.complete||p.image.addEventListener("load",l),p.image;var g=(p=h[u]=h[u]||{}).image=new Image;g.addEventListener("load",l),g.addEventListener("error",function(){g.error=!0});var v="data:";return u.substring(0,v.length).toLowerCase()===v||(g.crossOrigin=o),g.src=u,g}},Jl={registerBinding:function(u,o,l,d){var h=Array.prototype.slice.apply(arguments,[1]),p=this.binder(u);return p.on.apply(p,h)},binder:function(u){var o=this,l=u===window||u===document||u===document.body||function(o){return!(typeof HTMLElement>"u")&&o instanceof HTMLElement}(u);if(null==o.supportsPassiveEvents){var d=!1;try{var h=Object.defineProperty({},"passive",{get:function(){return d=!0,!0}});window.addEventListener("test",null,h)}catch{}o.supportsPassiveEvents=d}var p=function(v,b,y){var D=Array.prototype.slice.call(arguments);return l&&o.supportsPassiveEvents&&(D[2]={capture:y??!1,passive:!1,once:!1}),o.bindings.push({target:u,args:D}),(u.addEventListener||u.on).apply(u,D),this};return{on:p,addEventListener:p,addListener:p,bind:p}},nodeIsDraggable:function(u){return u&&u.isNode()&&!u.locked()&&u.grabbable()},nodeIsGrabbable:function(u){return this.nodeIsDraggable(u)&&u.interactive()}};Jl.load=function(){var u=this,o=function(he){return he.selected()},l=function(he,rt,At,pt){null==he&&(he=u.cy);for(var vt=0;vt<rt.length;vt++)he.emit({originalEvent:At,type:rt[vt],position:pt})},d=function(he){return he.shiftKey||he.metaKey||he.ctrlKey},h=function(he,rt){var At=!0;if(u.cy.hasCompoundNodes()&&he&&he.pannable()){for(var pt=0;rt&&pt<rt.length;pt++)if((he=rt[pt]).isNode()&&he.isParent()&&!he.pannable()){At=!1;break}}else At=!0;return At},v=function(he){he[0]._private.rscratch.inDragLayer=!0},y=function(he){he[0]._private.rscratch.isGrabTarget=!0},x=function(he,rt){var At=rt.addToList;!At.has(he)&&he.grabbable()&&!he.locked()&&(At.merge(he),function(he){he[0]._private.grabbed=!0}(he))},k=function(he,rt){rt=rt||{};var At=he.cy().hasCompoundNodes();rt.inDragLayer&&(he.forEach(v),he.neighborhood().stdFilter(function(pt){return!At||pt.isEdge()}).forEach(v)),rt.addToList&&he.forEach(function(pt){x(pt,rt)}),function(he,rt){if(he.cy().hasCompoundNodes()&&(null!=rt.inDragLayer||null!=rt.addToList)){var At=he.descendants();rt.inDragLayer&&(At.forEach(v),At.connectedEdges().forEach(v)),rt.addToList&&x(At,rt)}}(he,rt),W(he,{inDragLayer:rt.inDragLayer}),u.updateCachedGrabbedEles()},O=k,V=function(he){he&&(u.getCachedZSortedEles().forEach(function(rt){(function(he){he[0]._private.grabbed=!1})(rt),function(he){he[0]._private.rscratch.inDragLayer=!1}(rt),function(he){he[0]._private.rscratch.isGrabTarget=!1}(rt)}),u.updateCachedGrabbedEles())},W=function(he,rt){if((null!=rt.inDragLayer||null!=rt.addToList)&&he.cy().hasCompoundNodes()){var At=he.ancestors().orphans();if(!At.same(he)){var pt=At.descendants().spawnSelf().merge(At).unmerge(he).unmerge(he.descendants()),vt=pt.connectedEdges();rt.inDragLayer&&(vt.forEach(v),pt.forEach(v)),rt.addToList&&pt.forEach(function(xn){x(xn,rt)})}}},Y=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},te=typeof MutationObserver<"u",ne=typeof ResizeObserver<"u";te?(u.removeObserver=new MutationObserver(function(It){for(var he=0;he<It.length;he++){var At=It[he].removedNodes;if(At)for(var pt=0;pt<At.length;pt++)if(At[pt]===u.container){u.destroy();break}}}),u.container.parentNode&&u.removeObserver.observe(u.container.parentNode,{childList:!0})):u.registerBinding(u.container,"DOMNodeRemoved",function(It){u.destroy()});var se=T.default(function(){u.cy.resize()},100);te&&(u.styleObserver=new MutationObserver(se),u.styleObserver.observe(u.container,{attributes:!0})),u.registerBinding(window,"resize",se),ne&&(u.resizeObserver=new ResizeObserver(se),u.resizeObserver.observe(u.container));var Ce=function(){u.invalidateContainerClientCoordsCache()};(function(he,rt){for(;null!=he;)u.registerBinding(It=he,"transitionend",Ce),u.registerBinding(It,"animationend",Ce),u.registerBinding(It,"scroll",Ce),he=he.parentNode;var It})(u.container),u.registerBinding(u.container,"contextmenu",function(It){It.preventDefault()});var de,Ae,Me,be=function(he){for(var rt=u.findContainerClientCoords(),At=rt[0],pt=rt[1],vt=rt[2],xn=rt[3],_t=he.touches?he.touches:[he],Zt=!1,Fn=0;Fn<_t.length;Fn++){var ir=_t[Fn];if(At<=ir.clientX&&ir.clientX<=At+vt&&pt<=ir.clientY&&ir.clientY<=pt+xn){Zt=!0;break}}if(!Zt)return!1;for(var Tn=u.container,bn=he.target.parentNode,wn=!1;bn;){if(bn===Tn){wn=!0;break}bn=bn.parentNode}return!!wn};u.registerBinding(u.container,"mousedown",function(he){if(be(he)){he.preventDefault(),Y(),u.hoverData.capture=!0,u.hoverData.which=he.which;var rt=u.cy,At=[he.clientX,he.clientY],pt=u.projectIntoViewport(At[0],At[1]),vt=u.selection,xn=u.findNearestElements(pt[0],pt[1],!0,!1),_t=xn[0],Zt=u.dragData.possibleDragElements;if(u.hoverData.mdownPos=pt,u.hoverData.mdownGPos=At,3==he.which){u.hoverData.cxtStarted=!0;var ir={originalEvent:he,type:"cxttapstart",position:{x:pt[0],y:pt[1]}};_t?(_t.activate(),_t.emit(ir),u.hoverData.down=_t):rt.emit(ir),u.hoverData.downTime=(new Date).getTime(),u.hoverData.cxtDragged=!1}else if(1==he.which){if(_t&&_t.activate(),null!=_t&&u.nodeIsGrabbable(_t)){var Tn=function(Pr){return{originalEvent:he,type:Pr,position:{x:pt[0],y:pt[1]}}};if(y(_t),_t.selected()){Zt=u.dragData.possibleDragElements=rt.collection();var bn=rt.$(function(wn){return wn.isNode()&&wn.selected()&&u.nodeIsGrabbable(wn)});k(bn,{addToList:Zt}),_t.emit(Tn("grabon")),bn.forEach(function(Pr){Pr.emit(Tn("grab"))})}else Zt=u.dragData.possibleDragElements=rt.collection(),O(_t,{addToList:Zt}),_t.emit(Tn("grabon")).emit(Tn("grab"));u.redrawHint("eles",!0),u.redrawHint("drag",!0)}u.hoverData.down=_t,u.hoverData.downs=xn,u.hoverData.downTime=(new Date).getTime(),l(_t,["mousedown","tapstart","vmousedown"],he,{x:pt[0],y:pt[1]}),null==_t?(vt[4]=1,u.data.bgActivePosistion={x:pt[0],y:pt[1]},u.redrawHint("select",!0),u.redraw()):_t.pannable()&&(vt[4]=1),u.hoverData.tapholdCancelled=!1,clearTimeout(u.hoverData.tapholdTimeout),u.hoverData.tapholdTimeout=setTimeout(function(){if(!u.hoverData.tapholdCancelled){var Pr=u.hoverData.down;Pr?Pr.emit({originalEvent:he,type:"taphold",position:{x:pt[0],y:pt[1]}}):rt.emit({originalEvent:he,type:"taphold",position:{x:pt[0],y:pt[1]}})}},u.tapholdDuration)}vt[0]=vt[2]=pt[0],vt[1]=vt[3]=pt[1]}},!1),u.registerBinding(window,"mousemove",function(he){var ns;if(u.hoverData.capture||be(he)){var At=!1,pt=u.cy,vt=pt.zoom(),xn=[he.clientX,he.clientY],_t=u.projectIntoViewport(xn[0],xn[1]),Zt=u.hoverData.mdownPos,Fn=u.hoverData.mdownGPos,ir=u.selection,Tn=null;!u.hoverData.draggingEles&&!u.hoverData.dragging&&!u.hoverData.selecting&&(Tn=u.findNearestElement(_t[0],_t[1],!0,!1));var li,er=u.hoverData.last,bn=u.hoverData.down,wn=[_t[0]-ir[2],_t[1]-ir[3]],Pr=u.dragData.possibleDragElements;if(Fn){var Ao=xn[0]-Fn[0],vi=xn[1]-Fn[1];u.hoverData.isOverThresholdDrag=li=Ao*Ao+vi*vi>=u.desktopTapThreshold2}var Ca=d(he);li&&(u.hoverData.tapholdCancelled=!0),At=!0,l(Tn,["mousemove","vmousemove","tapdrag"],he,{x:_t[0],y:_t[1]});var dl=function(){u.data.bgActivePosistion=void 0,u.hoverData.selecting||pt.emit({originalEvent:he,type:"boxstart",position:{x:_t[0],y:_t[1]}}),ir[4]=1,u.hoverData.selecting=!0,u.redrawHint("select",!0),u.redraw()};if(3===u.hoverData.which){if(li){var ru={originalEvent:he,type:"cxtdrag",position:{x:_t[0],y:_t[1]}};bn?bn.emit(ru):pt.emit(ru),u.hoverData.cxtDragged=!0,(!u.hoverData.cxtOver||Tn!==u.hoverData.cxtOver)&&(u.hoverData.cxtOver&&u.hoverData.cxtOver.emit({originalEvent:he,type:"cxtdragout",position:{x:_t[0],y:_t[1]}}),u.hoverData.cxtOver=Tn,Tn&&Tn.emit({originalEvent:he,type:"cxtdragover",position:{x:_t[0],y:_t[1]}}))}}else if(u.hoverData.dragging){if(At=!0,pt.panningEnabled()&&pt.userPanningEnabled()){var iu;if(u.hoverData.justStartedPan){var Rh=u.hoverData.mdownPos;iu={x:(_t[0]-Rh[0])*vt,y:(_t[1]-Rh[1])*vt},u.hoverData.justStartedPan=!1}else iu={x:wn[0]*vt,y:wn[1]*vt};pt.panBy(iu),pt.emit("dragpan"),u.hoverData.dragged=!0}_t=u.projectIntoViewport(he.clientX,he.clientY)}else if(1!=ir[4]||null!=bn&&!bn.pannable()){if(bn&&bn.pannable()&&bn.active()&&bn.unactivate(),(!bn||!bn.grabbed())&&Tn!=er&&(er&&l(er,["mouseout","tapdragout"],he,{x:_t[0],y:_t[1]}),Tn&&l(Tn,["mouseover","tapdragover"],he,{x:_t[0],y:_t[1]}),u.hoverData.last=Tn),bn)if(li){if(pt.boxSelectionEnabled()&&Ca)bn&&bn.grabbed()&&(V(Pr),bn.emit("freeon"),Pr.emit("free"),u.dragData.didDrag&&(bn.emit("dragfreeon"),Pr.emit("dragfree"))),dl();else if(bn&&bn.grabbed()&&u.nodeIsDraggable(bn)){var Bs=!u.dragData.didDrag;Bs&&u.redrawHint("eles",!0),u.dragData.didDrag=!0,u.hoverData.draggingEles||k(Pr,{inDragLayer:!0});var $i={x:0,y:0};if(fe(wn[0])&&fe(wn[1])&&($i.x+=wn[0],$i.y+=wn[1],Bs)){var Oi=u.hoverData.dragDelta;Oi&&fe(Oi[0])&&fe(Oi[1])&&($i.x+=Oi[0],$i.y+=Oi[1])}u.hoverData.draggingEles=!0,Pr.silentShift($i).emit("position drag"),u.redrawHint("drag",!0),u.redraw()}}else 0===(ns=u.hoverData.dragDelta=u.hoverData.dragDelta||[]).length?(ns.push(wn[0]),ns.push(wn[1])):(ns[0]+=wn[0],ns[1]+=wn[1]);At=!0}else li&&(u.hoverData.dragging||!pt.boxSelectionEnabled()||!Ca&&pt.panningEnabled()&&pt.userPanningEnabled()?!u.hoverData.selecting&&pt.panningEnabled()&&pt.userPanningEnabled()&&h(bn,u.hoverData.downs)&&(u.hoverData.dragging=!0,u.hoverData.justStartedPan=!0,ir[4]=0,u.data.bgActivePosistion=jn(Zt),u.redrawHint("select",!0),u.redraw()):dl(),bn&&bn.pannable()&&bn.active()&&bn.unactivate());if(ir[2]=_t[0],ir[3]=_t[1],At)return he.stopPropagation&&he.stopPropagation(),he.preventDefault&&he.preventDefault(),!1}},!1),u.registerBinding(window,"mouseup",function(he){if(u.hoverData.capture){u.hoverData.capture=!1;var At=u.cy,pt=u.projectIntoViewport(he.clientX,he.clientY),vt=u.selection,xn=u.findNearestElement(pt[0],pt[1],!0,!1),_t=u.dragData.possibleDragElements,Zt=u.hoverData.down,Fn=d(he);if(u.data.bgActivePosistion&&(u.redrawHint("select",!0),u.redraw()),u.hoverData.tapholdCancelled=!0,u.data.bgActivePosistion=void 0,Zt&&Zt.unactivate(),3===u.hoverData.which){var ir={originalEvent:he,type:"cxttapend",position:{x:pt[0],y:pt[1]}};if(Zt?Zt.emit(ir):At.emit(ir),!u.hoverData.cxtDragged){var Tn={originalEvent:he,type:"cxttap",position:{x:pt[0],y:pt[1]}};Zt?Zt.emit(Tn):At.emit(Tn)}u.hoverData.cxtDragged=!1,u.hoverData.which=null}else if(1===u.hoverData.which){if(l(xn,["mouseup","tapend","vmouseup"],he,{x:pt[0],y:pt[1]}),!u.dragData.didDrag&&!u.hoverData.dragged&&!u.hoverData.selecting&&!u.hoverData.isOverThresholdDrag&&(l(Zt,["click","tap","vclick"],he,{x:pt[0],y:pt[1]}),Ae=!1,he.timeStamp-Me<=At.multiClickDebounceTime()?(de&&clearTimeout(de),Ae=!0,Me=null,l(Zt,["dblclick","dbltap","vdblclick"],he,{x:pt[0],y:pt[1]})):(de=setTimeout(function(){Ae||l(Zt,["oneclick","onetap","voneclick"],he,{x:pt[0],y:pt[1]})},At.multiClickDebounceTime()),Me=he.timeStamp)),null==Zt&&!u.dragData.didDrag&&!u.hoverData.selecting&&!u.hoverData.dragged&&!d(he)&&(At.$(o).unselect(["tapunselect"]),_t.length>0&&u.redrawHint("eles",!0),u.dragData.possibleDragElements=_t=At.collection()),xn==Zt&&!u.dragData.didDrag&&!u.hoverData.selecting&&null!=xn&&xn._private.selectable&&(u.hoverData.dragging||("additive"===At.selectionType()||Fn?xn.selected()?xn.unselect(["tapunselect"]):xn.select(["tapselect"]):Fn||(At.$(o).unmerge(xn).unselect(["tapunselect"]),xn.select(["tapselect"]))),u.redrawHint("eles",!0)),u.hoverData.selecting){var er=At.collection(u.getAllInBox(vt[0],vt[1],vt[2],vt[3]));u.redrawHint("select",!0),er.length>0&&u.redrawHint("eles",!0),At.emit({type:"boxend",originalEvent:he,position:{x:pt[0],y:pt[1]}}),"additive"===At.selectionType()||Fn||At.$(o).unmerge(er).unselect(),er.emit("box").stdFilter(function(li){return li.selectable()&&!li.selected()}).select().emit("boxselect"),u.redraw()}if(u.hoverData.dragging&&(u.hoverData.dragging=!1,u.redrawHint("select",!0),u.redrawHint("eles",!0),u.redraw()),!vt[4]){u.redrawHint("drag",!0),u.redrawHint("eles",!0);var wn=Zt&&Zt.grabbed();V(_t),wn&&(Zt.emit("freeon"),_t.emit("free"),u.dragData.didDrag&&(Zt.emit("dragfreeon"),_t.emit("dragfree")))}}vt[4]=0,u.hoverData.down=null,u.hoverData.cxtStarted=!1,u.hoverData.draggingEles=!1,u.hoverData.selecting=!1,u.hoverData.isOverThresholdDrag=!1,u.dragData.didDrag=!1,u.hoverData.dragged=!1,u.hoverData.dragDelta=[],u.hoverData.mdownPos=null,u.hoverData.mdownGPos=null}},!1);var pe=function(he){if(!u.scrollingPage){var rt=u.cy,At=rt.zoom(),pt=rt.pan(),vt=u.projectIntoViewport(he.clientX,he.clientY),xn=[vt[0]*At+pt.x,vt[1]*At+pt.y];if(u.hoverData.draggingEles||u.hoverData.dragging||u.hoverData.cxtStarted||0!==u.selection[4])return void he.preventDefault();if(rt.panningEnabled()&&rt.userPanningEnabled()&&rt.zoomingEnabled()&&rt.userZoomingEnabled()){var _t;he.preventDefault(),u.data.wheelZooming=!0,clearTimeout(u.data.wheelTimeout),u.data.wheelTimeout=setTimeout(function(){u.data.wheelZooming=!1,u.redrawHint("eles",!0),u.redraw()},150),_t=null!=he.deltaY?he.deltaY/-250:null!=he.wheelDeltaY?he.wheelDeltaY/1e3:he.wheelDelta/1e3,_t*=u.wheelSensitivity,1===he.deltaMode&&(_t*=33);var Fn=rt.zoom()*Math.pow(10,_t);"gesturechange"===he.type&&(Fn=u.gestureStartZoom*he.scale),rt.zoom({level:Fn,renderedPosition:{x:xn[0],y:xn[1]}}),rt.emit("gesturechange"===he.type?"pinchzoom":"scrollzoom")}}};u.registerBinding(u.container,"wheel",pe,!0),u.registerBinding(window,"scroll",function(he){u.scrollingPage=!0,clearTimeout(u.scrollingPageTimeout),u.scrollingPageTimeout=setTimeout(function(){u.scrollingPage=!1},250)},!0),u.registerBinding(u.container,"gesturestart",function(he){u.gestureStartZoom=u.cy.zoom(),u.hasTouchStarted||he.preventDefault()},!0),u.registerBinding(u.container,"gesturechange",function(It){u.hasTouchStarted||pe(It)},!0),u.registerBinding(u.container,"mouseout",function(he){var rt=u.projectIntoViewport(he.clientX,he.clientY);u.cy.emit({originalEvent:he,type:"mouseout",position:{x:rt[0],y:rt[1]}})},!1),u.registerBinding(u.container,"mouseover",function(he){var rt=u.projectIntoViewport(he.clientX,he.clientY);u.cy.emit({originalEvent:he,type:"mouseover",position:{x:rt[0],y:rt[1]}})},!1);var Le,Se,qe,Be,je,Ke,tt,at,et,Je,wt,xt,yt,Dt,Ct,Pt,Bt,vn,Cn,Vt,mt=function(he,rt,At,pt){return Math.sqrt((At-he)*(At-he)+(pt-rt)*(pt-rt))},Xe=function(he,rt,At,pt){return(At-he)*(At-he)+(pt-rt)*(pt-rt)};if(u.registerBinding(u.container,"touchstart",Dt=function(he){if(u.hasTouchStarted=!0,be(he)){Y(),u.touchData.capture=!0,u.data.bgActivePosistion=void 0;var rt=u.cy,At=u.touchData.now,pt=u.touchData.earlier;if(he.touches[0]){var vt=u.projectIntoViewport(he.touches[0].clientX,he.touches[0].clientY);At[0]=vt[0],At[1]=vt[1]}if(he.touches[1]&&(vt=u.projectIntoViewport(he.touches[1].clientX,he.touches[1].clientY),At[2]=vt[0],At[3]=vt[1]),he.touches[2]&&(vt=u.projectIntoViewport(he.touches[2].clientX,he.touches[2].clientY),At[4]=vt[0],At[5]=vt[1]),he.touches[1]){u.touchData.singleTouchMoved=!0,V(u.dragData.touchDragEles);var xn=u.findContainerClientCoords();wt=xn[2],xt=xn[3],Se=he.touches[0].clientY-(Je=xn[1]),qe=he.touches[1].clientX-(et=xn[0]),Be=he.touches[1].clientY-Je,yt=0<=(Le=he.touches[0].clientX-et)&&Le<=wt&&0<=qe&&qe<=wt&&0<=Se&&Se<=xt&&0<=Be&&Be<=xt;var _t=rt.pan(),Zt=rt.zoom();if(je=mt(Le,Se,qe,Be),Ke=Xe(Le,Se,qe,Be),at=[((tt=[(Le+qe)/2,(Se+Be)/2])[0]-_t.x)/Zt,(tt[1]-_t.y)/Zt],Ke<4e4&&!he.touches[2]){var Tn=u.findNearestElement(At[0],At[1],!0,!0),er=u.findNearestElement(At[2],At[3],!0,!0);return Tn&&Tn.isNode()?(Tn.activate().emit({originalEvent:he,type:"cxttapstart",position:{x:At[0],y:At[1]}}),u.touchData.start=Tn):er&&er.isNode()?(er.activate().emit({originalEvent:he,type:"cxttapstart",position:{x:At[0],y:At[1]}}),u.touchData.start=er):rt.emit({originalEvent:he,type:"cxttapstart",position:{x:At[0],y:At[1]}}),u.touchData.start&&(u.touchData.start._private.grabbed=!1),u.touchData.cxt=!0,u.touchData.cxtDragged=!1,u.data.bgActivePosistion=void 0,void u.redraw()}}if(he.touches[2])rt.boxSelectionEnabled()&&he.preventDefault();else if(!he.touches[1]&&he.touches[0]){var bn=u.findNearestElements(At[0],At[1],!0,!0),wn=bn[0];if(null!=wn&&(wn.activate(),u.touchData.start=wn,u.touchData.starts=bn,u.nodeIsGrabbable(wn))){var Pr=u.dragData.touchDragEles=rt.collection(),li=null;u.redrawHint("eles",!0),u.redrawHint("drag",!0),wn.selected()?(li=rt.$(function(ts){return ts.selected()&&u.nodeIsGrabbable(ts)}),k(li,{addToList:Pr})):O(wn,{addToList:Pr}),y(wn);var Ao=function(Ca){return{originalEvent:he,type:Ca,position:{x:At[0],y:At[1]}}};wn.emit(Ao("grabon")),li?li.forEach(function(ts){ts.emit(Ao("grab"))}):wn.emit(Ao("grab"))}l(wn,["touchstart","tapstart","vmousedown"],he,{x:At[0],y:At[1]}),null==wn&&(u.data.bgActivePosistion={x:vt[0],y:vt[1]},u.redrawHint("select",!0),u.redraw()),u.touchData.singleTouchMoved=!1,u.touchData.singleTouchStartTime=+new Date,clearTimeout(u.touchData.tapholdTimeout),u.touchData.tapholdTimeout=setTimeout(function(){!1===u.touchData.singleTouchMoved&&!u.pinching&&!u.touchData.selecting&&l(u.touchData.start,["taphold"],he,{x:At[0],y:At[1]})},u.tapholdDuration)}if(he.touches.length>=1){for(var To=u.touchData.startPosition=[],vi=0;vi<At.length;vi++)To[vi]=pt[vi]=At[vi];var ki=he.touches[0];u.touchData.startGPosition=[ki.clientX,ki.clientY]}}},!1),u.registerBinding(window,"touchmove",Ct=function(he){var rt=u.touchData.capture;if(rt||be(he)){var At=u.selection,pt=u.cy,vt=u.touchData.now,xn=u.touchData.earlier,_t=pt.zoom();if(he.touches[0]){var Zt=u.projectIntoViewport(he.touches[0].clientX,he.touches[0].clientY);vt[0]=Zt[0],vt[1]=Zt[1]}he.touches[1]&&(Zt=u.projectIntoViewport(he.touches[1].clientX,he.touches[1].clientY),vt[2]=Zt[0],vt[3]=Zt[1]),he.touches[2]&&(Zt=u.projectIntoViewport(he.touches[2].clientX,he.touches[2].clientY),vt[4]=Zt[0],vt[5]=Zt[1]);var ir,Fn=u.touchData.startGPosition;if(rt&&he.touches[0]&&Fn){for(var Tn=[],er=0;er<vt.length;er++)Tn[er]=vt[er]-xn[er];var bn=he.touches[0].clientX-Fn[0],Pr=he.touches[0].clientY-Fn[1];ir=bn*bn+Pr*Pr>=u.touchTapThreshold2}if(rt&&u.touchData.cxt){he.preventDefault();var Ca=Xe(To=he.touches[0].clientX-et,vi=he.touches[0].clientY-Je,ki=he.touches[1].clientX-et,ts=he.touches[1].clientY-Je);if(Ca/Ke>=2.25||Ca>=22500){u.touchData.cxt=!1,u.data.bgActivePosistion=void 0,u.redrawHint("select",!0);var hl={originalEvent:he,type:"cxttapend",position:{x:vt[0],y:vt[1]}};u.touchData.start?(u.touchData.start.unactivate().emit(hl),u.touchData.start=null):pt.emit(hl)}}if(rt&&u.touchData.cxt){hl={originalEvent:he,type:"cxtdrag",position:{x:vt[0],y:vt[1]}},u.data.bgActivePosistion=void 0,u.redrawHint("select",!0),u.touchData.start?u.touchData.start.emit(hl):pt.emit(hl),u.touchData.start&&(u.touchData.start._private.grabbed=!1),u.touchData.cxtDragged=!0;var Bs=u.findNearestElement(vt[0],vt[1],!0,!0);(!u.touchData.cxtOver||Bs!==u.touchData.cxtOver)&&(u.touchData.cxtOver&&u.touchData.cxtOver.emit({originalEvent:he,type:"cxtdragout",position:{x:vt[0],y:vt[1]}}),u.touchData.cxtOver=Bs,Bs&&Bs.emit({originalEvent:he,type:"cxtdragover",position:{x:vt[0],y:vt[1]}}))}else if(rt&&he.touches[2]&&pt.boxSelectionEnabled())he.preventDefault(),u.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,u.touchData.selecting||pt.emit({originalEvent:he,type:"boxstart",position:{x:vt[0],y:vt[1]}}),u.touchData.selecting=!0,u.touchData.didSelect=!0,At[4]=1,At&&0!==At.length&&void 0!==At[0]?(At[2]=(vt[0]+vt[2]+vt[4])/3,At[3]=(vt[1]+vt[3]+vt[5])/3):(At[0]=(vt[0]+vt[2]+vt[4])/3,At[1]=(vt[1]+vt[3]+vt[5])/3,At[2]=(vt[0]+vt[2]+vt[4])/3+1,At[3]=(vt[1]+vt[3]+vt[5])/3+1),u.redrawHint("select",!0),u.redraw();else if(rt&&he.touches[1]&&!u.touchData.didSelect&&pt.zoomingEnabled()&&pt.panningEnabled()&&pt.userZoomingEnabled()&&pt.userPanningEnabled()){if(he.preventDefault(),u.data.bgActivePosistion=void 0,u.redrawHint("select",!0),$i=u.dragData.touchDragEles){u.redrawHint("drag",!0);for(var Oi=0;Oi<$i.length;Oi++){var Nh=$i[Oi]._private;Nh.grabbed=!1,Nh.rscratch.inDragLayer=!1}}var To,vi,ki,ts,ns=u.touchData.start,ii=mt(To=he.touches[0].clientX-et,vi=he.touches[0].clientY-Je,ki=he.touches[1].clientX-et,ts=he.touches[1].clientY-Je),Xw=ii/je;if(yt){var Qu=(To-Le+(ki-qe))/2,Jw=(vi-Se+(ts-Be))/2,su=pt.zoom(),vd=su*Xw,Ph=pt.pan(),Lh=at[0]*su+Ph.x,qo=at[1]*su+Ph.y,Zw={x:-vd/su*(Lh-Ph.x-Qu)+Lh,y:-vd/su*(qo-Ph.y-Jw)+qo};ns&&ns.active()&&(V($i=u.dragData.touchDragEles),u.redrawHint("drag",!0),u.redrawHint("eles",!0),ns.unactivate().emit("freeon"),$i.emit("free"),u.dragData.didDrag&&(ns.emit("dragfreeon"),$i.emit("dragfree"))),pt.viewport({zoom:vd,pan:Zw,cancelOnFailedZoom:!0}),pt.emit("pinchzoom"),je=ii,Le=To,Se=vi,qe=ki,Be=ts,u.pinching=!0}he.touches[0]&&(Zt=u.projectIntoViewport(he.touches[0].clientX,he.touches[0].clientY),vt[0]=Zt[0],vt[1]=Zt[1]),he.touches[1]&&(Zt=u.projectIntoViewport(he.touches[1].clientX,he.touches[1].clientY),vt[2]=Zt[0],vt[3]=Zt[1]),he.touches[2]&&(Zt=u.projectIntoViewport(he.touches[2].clientX,he.touches[2].clientY),vt[4]=Zt[0],vt[5]=Zt[1])}else if(he.touches[0]&&!u.touchData.didSelect){var Io=u.touchData.start,ng=u.touchData.last;if(!u.hoverData.draggingEles&&!u.swipePanning&&(Bs=u.findNearestElement(vt[0],vt[1],!0,!0)),rt&&null!=Io&&he.preventDefault(),rt&&null!=Io&&u.nodeIsDraggable(Io))if(ir){var $i=u.dragData.touchDragEles,oy=!u.dragData.didDrag;oy&&k($i,{inDragLayer:!0}),u.dragData.didDrag=!0;var Ju={x:0,y:0};fe(Tn[0])&&fe(Tn[1])&&(Ju.x+=Tn[0],Ju.y+=Tn[1],oy)&&(u.redrawHint("eles",!0),(Vs=u.touchData.dragDelta)&&fe(Vs[0])&&fe(Vs[1])&&(Ju.x+=Vs[0],Ju.y+=Vs[1])),u.hoverData.draggingEles=!0,$i.silentShift(Ju).emit("position drag"),u.redrawHint("drag",!0),u.touchData.startPosition[0]==xn[0]&&u.touchData.startPosition[1]==xn[1]&&u.redrawHint("eles",!0),u.redraw()}else{var Vs;0===(Vs=u.touchData.dragDelta=u.touchData.dragDelta||[]).length?(Vs.push(Tn[0]),Vs.push(Tn[1])):(Vs[0]+=Tn[0],Vs[1]+=Tn[1])}if(l(Io||Bs,["touchmove","tapdrag","vmousemove"],he,{x:vt[0],y:vt[1]}),(!Io||!Io.grabbed())&&Bs!=ng&&(ng&&ng.emit({originalEvent:he,type:"tapdragout",position:{x:vt[0],y:vt[1]}}),Bs&&Bs.emit({originalEvent:he,type:"tapdragover",position:{x:vt[0],y:vt[1]}})),u.touchData.last=Bs,rt)for(Oi=0;Oi<vt.length;Oi++)vt[Oi]&&u.touchData.startPosition[Oi]&&ir&&(u.touchData.singleTouchMoved=!0);rt&&(null==Io||Io.pannable())&&pt.panningEnabled()&&pt.userPanningEnabled()&&(h(Io,u.touchData.starts)&&(he.preventDefault(),u.data.bgActivePosistion||(u.data.bgActivePosistion=jn(u.touchData.startPosition)),u.swipePanning?(pt.panBy({x:Tn[0]*_t,y:Tn[1]*_t}),pt.emit("dragpan")):ir&&(u.swipePanning=!0,pt.panBy({x:bn*_t,y:Pr*_t}),pt.emit("dragpan"),Io&&(Io.unactivate(),u.redrawHint("select",!0),u.touchData.start=null))),Zt=u.projectIntoViewport(he.touches[0].clientX,he.touches[0].clientY),vt[0]=Zt[0],vt[1]=Zt[1])}for(er=0;er<vt.length;er++)xn[er]=vt[er];rt&&he.touches.length>0&&!u.hoverData.draggingEles&&!u.swipePanning&&null!=u.data.bgActivePosistion&&(u.data.bgActivePosistion=void 0,u.redrawHint("select",!0),u.redraw())}},!1),u.registerBinding(window,"touchcancel",Pt=function(he){var rt=u.touchData.start;u.touchData.capture=!1,rt&&rt.unactivate()}),u.registerBinding(window,"touchend",Bt=function(he){var rt=u.touchData.start;if(u.touchData.capture){0===he.touches.length&&(u.touchData.capture=!1),he.preventDefault();var pt=u.selection;u.swipePanning=!1,u.hoverData.draggingEles=!1;var ir,vt=u.cy,xn=vt.zoom(),_t=u.touchData.now,Zt=u.touchData.earlier;if(he.touches[0]){var Fn=u.projectIntoViewport(he.touches[0].clientX,he.touches[0].clientY);_t[0]=Fn[0],_t[1]=Fn[1]}if(he.touches[1]&&(Fn=u.projectIntoViewport(he.touches[1].clientX,he.touches[1].clientY),_t[2]=Fn[0],_t[3]=Fn[1]),he.touches[2]&&(Fn=u.projectIntoViewport(he.touches[2].clientX,he.touches[2].clientY),_t[4]=Fn[0],_t[5]=Fn[1]),rt&&rt.unactivate(),u.touchData.cxt){if(ir={originalEvent:he,type:"cxttapend",position:{x:_t[0],y:_t[1]}},rt?rt.emit(ir):vt.emit(ir),!u.touchData.cxtDragged){var Tn={originalEvent:he,type:"cxttap",position:{x:_t[0],y:_t[1]}};rt?rt.emit(Tn):vt.emit(Tn)}return u.touchData.start&&(u.touchData.start._private.grabbed=!1),u.touchData.cxt=!1,u.touchData.start=null,void u.redraw()}if(!he.touches[2]&&vt.boxSelectionEnabled()&&u.touchData.selecting){u.touchData.selecting=!1;var er=vt.collection(u.getAllInBox(pt[0],pt[1],pt[2],pt[3]));pt[0]=void 0,pt[1]=void 0,pt[2]=void 0,pt[3]=void 0,pt[4]=0,u.redrawHint("select",!0),vt.emit({type:"boxend",originalEvent:he,position:{x:_t[0],y:_t[1]}}),er.emit("box").stdFilter(function(ru){return ru.selectable()&&!ru.selected()}).select().emit("boxselect"),er.nonempty()&&u.redrawHint("eles",!0),u.redraw()}if(rt?.unactivate(),he.touches[2])u.data.bgActivePosistion=void 0,u.redrawHint("select",!0);else if(!he.touches[1]&&!he.touches[0]&&!he.touches[0]){u.data.bgActivePosistion=void 0,u.redrawHint("select",!0);var wn=u.dragData.touchDragEles;if(null!=rt){var Pr=rt._private.grabbed;V(wn),u.redrawHint("drag",!0),u.redrawHint("eles",!0),Pr&&(rt.emit("freeon"),wn.emit("free"),u.dragData.didDrag&&(rt.emit("dragfreeon"),wn.emit("dragfree"))),l(rt,["touchend","tapend","vmouseup","tapdragout"],he,{x:_t[0],y:_t[1]}),rt.unactivate(),u.touchData.start=null}else{var li=u.findNearestElement(_t[0],_t[1],!0,!0);l(li,["touchend","tapend","vmouseup","tapdragout"],he,{x:_t[0],y:_t[1]})}var Ao=u.touchData.startPosition[0]-_t[0],vi=u.touchData.startPosition[1]-_t[1],Ca=(Ao*Ao+vi*vi)*xn*xn;u.touchData.singleTouchMoved||(rt||vt.$(":selected").unselect(["tapunselect"]),l(rt,["tap","vclick"],he,{x:_t[0],y:_t[1]}),vn=!1,he.timeStamp-Vt<=vt.multiClickDebounceTime()?(Cn&&clearTimeout(Cn),vn=!0,Vt=null,l(rt,["dbltap","vdblclick"],he,{x:_t[0],y:_t[1]})):(Cn=setTimeout(function(){vn||l(rt,["onetap","voneclick"],he,{x:_t[0],y:_t[1]})},vt.multiClickDebounceTime()),Vt=he.timeStamp)),null!=rt&&!u.dragData.didDrag&&rt._private.selectable&&Ca<u.touchTapThreshold2&&!u.pinching&&("single"===vt.selectionType()?(vt.$(o).unmerge(rt).unselect(["tapunselect"]),rt.select(["tapselect"])):rt.selected()?rt.unselect(["tapunselect"]):rt.select(["tapselect"]),u.redrawHint("eles",!0)),u.touchData.singleTouchMoved=!0}for(var cl=0;cl<_t.length;cl++)Zt[cl]=_t[cl];u.dragData.didDrag=!1,0===he.touches.length&&(u.touchData.dragDelta=[],u.touchData.startPosition=null,u.touchData.startGPosition=null,u.touchData.didSelect=!1),he.touches.length<2&&(1===he.touches.length&&(u.touchData.startGPosition=[he.touches[0].clientX,he.touches[0].clientY]),u.pinching=!1,u.redrawHint("eles",!0),u.redraw())}},!1),typeof TouchEvent>"u"){var Lt=[],ln=function(he){return{clientX:he.clientX,clientY:he.clientY,force:1,identifier:he.pointerId,pageX:he.pageX,pageY:he.pageY,radiusX:he.width/2,radiusY:he.height/2,screenX:he.screenX,screenY:he.screenY,target:he.target}},nn=function(he){for(var rt=0;rt<Lt.length;rt++)if(Lt[rt].event.pointerId===he.pointerId)return void Lt.splice(rt,1)},Dn=function(he){he.touches=Lt.map(function(rt){return rt.touch})},cn=function(he){return"mouse"===he.pointerType||4===he.pointerType};u.registerBinding(u.container,"pointerdown",function(It){cn(It)||(It.preventDefault(),Lt.push(function(he){return{event:he,touch:ln(he)}}(It)),Dn(It),Dt(It))}),u.registerBinding(u.container,"pointerup",function(It){cn(It)||(nn(It),Dn(It),Bt(It))}),u.registerBinding(u.container,"pointercancel",function(It){cn(It)||(nn(It),Dn(It),Pt())}),u.registerBinding(u.container,"pointermove",function(It){var he,rt;cn(It)||(It.preventDefault(),he=It,(rt=Lt.filter(function(At){return At.event.pointerId===he.pointerId})[0]).event=he,rt.touch=ln(he),Dn(It),Ct(It))})}};var jr={generatePolygon:function(u,o){return this.nodeShapes[u]={renderer:this,name:u,points:o,draw:function(d,h,p,g,v){this.renderer.nodeShapeImpl("polygon",d,h,p,g,v,this.points)},intersectLine:function(d,h,p,g,v,b,y){return Xa(v,b,this.points,d,h,p/2,g/2,y)},checkPoint:function(d,h,p,g,v,b,y){return Os(d,h,this.points,b,y,g,v,[0,-1],p)}}},generateEllipse:function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(o,l,d,h,p){this.renderer.nodeShapeImpl(this.name,o,l,d,h,p)},intersectLine:function(o,l,d,h,p,g,v){return function(o,l,d,h,p,g){var v=d-o,b=h-l;v/=p,b/=g;var y=Math.sqrt(v*v+b*b),D=y-1;if(D<0)return[];var x=D/y;return[(d-o)*x+o,(h-l)*x+l]}(p,g,o,l,d/2+v,h/2+v)},checkPoint:function(o,l,d,h,p,g,v){return ha(o,l,h,p,g,v,d)}}},generateRoundPolygon:function(u,o){for(var l=new Array(2*o.length),d=0;d<o.length/2;d++){var p,h=2*d;p=d<o.length/2-1?2*(d+1):0,l[4*d]=o[h],l[4*d+1]=o[h+1];var g=o[p]-o[h],v=o[p+1]-o[h+1],b=Math.sqrt(g*g+v*v);l[4*d+2]=g/b,l[4*d+3]=v/b}return this.nodeShapes[u]={renderer:this,name:u,points:l,draw:function(D,x,_,k,O){this.renderer.nodeShapeImpl("round-polygon",D,x,_,k,O,this.points)},intersectLine:function(D,x,_,k,O,V,W){return function(o,l,d,h,p,g,v,b){for(var D,y=[],x=new Array(d.length),_=g/2,k=v/2,O=an(g,v),V=0;V<d.length/4;V++){var Y,W;W=0===V?d.length-2:4*V-2,Y=4*V+2;var te=h+_*d[4*V],ne=p+k*d[4*V+1],Ee=O/Math.tan(Math.acos(-d[W]*d[Y]-d[W+1]*d[Y+1])/2),Ce=te-Ee*d[W],ae=ne-Ee*d[W+1],be=te+Ee*d[Y],de=ne+Ee*d[Y+1];0===V?(x[d.length-2]=Ce,x[d.length-1]=ae):(x[4*V-2]=Ce,x[4*V-1]=ae),x[4*V]=be,x[4*V+1]=de;var Ae=d[W+1],Me=-d[W];Ae*d[Y]+Me*d[Y+1]<0&&(Ae*=-1,Me*=-1),0!==(D=ro(o,l,h,p,Ce+Ae*O,ae+Me*O,O)).length&&y.push(D[0],D[1])}for(var qe=0;qe<x.length/4;qe++)0!==(D=ms(o,l,h,p,x[4*qe],x[4*qe+1],x[4*qe+2],x[4*qe+3],!1)).length&&y.push(D[0],D[1]);if(y.length>2){for(var Be=[y[0],y[1]],je=Math.pow(Be[0]-o,2)+Math.pow(Be[1]-l,2),Ke=1;Ke<y.length/2;Ke++){var tt=Math.pow(y[2*Ke]-o,2)+Math.pow(y[2*Ke+1]-l,2);tt<=je&&(Be[0]=y[2*Ke],Be[1]=y[2*Ke+1],je=tt)}return Be}return y}(O,V,this.points,D,x,_,k)},checkPoint:function(D,x,_,k,O,V,W){return function(o,l,d,h,p,g,v){for(var b=new Array(d.length),y=g/2,D=v/2,x=an(g,v),_=x*x,k=0;k<d.length/4;k++){var V,O;O=0===k?d.length-2:4*k-2,V=4*k+2;var W=h+y*d[4*k],Y=p+D*d[4*k+1],ne=x/Math.tan(Math.acos(-d[O]*d[V]-d[O+1]*d[V+1])/2),se=W-ne*d[O],Ee=Y-ne*d[O+1],Ce=W+ne*d[V],ae=Y+ne*d[V+1];b[4*k]=se,b[4*k+1]=Ee,b[4*k+2]=Ce,b[4*k+3]=ae;var be=d[O+1],de=-d[O];be*d[V]+de*d[V+1]<0&&(be*=-1,de*=-1);var pe=Ee+de*x;if(Math.pow(se+be*x-o,2)+Math.pow(pe-l,2)<=_)return!0}return mr(o,l,b)}(D,x,this.points,V,W,k,O)}}},generateRoundRectangle:function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Bi(4,0),draw:function(o,l,d,h,p){this.renderer.nodeShapeImpl(this.name,o,l,d,h,p)},intersectLine:function(o,l,d,h,p,g,v){return ca(p,g,o,l,d,h,v)},checkPoint:function(o,l,d,h,p,g,v){var b=Nc(h,p),y=2*b;return!!(Os(o,l,this.points,g,v,h,p-y,[0,-1],d)||Os(o,l,this.points,g,v,h-y,p,[0,-1],d)||ha(o,l,y,y,g-h/2+b,v-p/2+b,d)||ha(o,l,y,y,g+h/2-b,v-p/2+b,d)||ha(o,l,y,y,g+h/2-b,v+p/2-b,d)||ha(o,l,y,y,g-h/2+b,v+p/2-b,d))}}},generateCutRectangle:function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:8,points:Bi(4,0),draw:function(o,l,d,h,p){this.renderer.nodeShapeImpl(this.name,o,l,d,h,p)},generateCutTrianglePts:function(o,l,d,h){var p=this.cornerLength,g=l/2,v=o/2,b=d-v,y=d+v,D=h-g,x=h+g;return{topLeft:[b,D+p,b+p,D,b+p,D+p],topRight:[y-p,D,y,D+p,y-p,D+p],bottomRight:[y,x-p,y-p,x,y-p,x-p],bottomLeft:[b+p,x,b,x-p,b+p,x-p]}},intersectLine:function(o,l,d,h,p,g,v){var b=this.generateCutTrianglePts(d+2*v,h+2*v,o,l),y=[].concat.apply([],[b.topLeft.splice(0,4),b.topRight.splice(0,4),b.bottomRight.splice(0,4),b.bottomLeft.splice(0,4)]);return Xa(p,g,y,o,l)},checkPoint:function(o,l,d,h,p,g,v){if(Os(o,l,this.points,g,v,h,p-2*this.cornerLength,[0,-1],d)||Os(o,l,this.points,g,v,h-2*this.cornerLength,p,[0,-1],d))return!0;var b=this.generateCutTrianglePts(h,p,g,v);return mr(o,l,b.topLeft)||mr(o,l,b.topRight)||mr(o,l,b.bottomRight)||mr(o,l,b.bottomLeft)}}},generateBarrel:function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Bi(4,0),draw:function(o,l,d,h,p){this.renderer.nodeShapeImpl(this.name,o,l,d,h,p)},intersectLine:function(o,l,d,h,p,g,v){var x=this.generateBarrelBezierPts(d+2*v,h+2*v,o,l),_=function(V){var W=Is({x:V[0],y:V[1]},{x:V[2],y:V[3]},{x:V[4],y:V[5]},.15),Y=Is({x:V[0],y:V[1]},{x:V[2],y:V[3]},{x:V[4],y:V[5]},.5),te=Is({x:V[0],y:V[1]},{x:V[2],y:V[3]},{x:V[4],y:V[5]},.85);return[V[0],V[1],W.x,W.y,Y.x,Y.y,te.x,te.y,V[4],V[5]]},k=[].concat(_(x.topLeft),_(x.topRight),_(x.bottomRight),_(x.bottomLeft));return Xa(p,g,k,o,l)},generateBarrelBezierPts:function(o,l,d,h){var p=l/2,g=o/2,v=d-g,b=d+g,y=h-p,D=h+p,x=Su(o,l),_=x.heightOffset,k=x.widthOffset,O=x.ctrlPtOffsetPct*o,V={topLeft:[v,y+_,v+O,y,v+k,y],topRight:[b-k,y,b-O,y,b,y+_],bottomRight:[b,D-_,b-O,D,b-k,D],bottomLeft:[v+k,D,v+O,D,v,D-_]};return V.topLeft.isTop=!0,V.topRight.isTop=!0,V.bottomLeft.isBottom=!0,V.bottomRight.isBottom=!0,V},checkPoint:function(o,l,d,h,p,g,v){var b=Su(h,p),D=b.widthOffset;if(Os(o,l,this.points,g,v,h,p-2*b.heightOffset,[0,-1],d)||Os(o,l,this.points,g,v,h-2*D,p,[0,-1],d))return!0;for(var x=this.generateBarrelBezierPts(h,p,g,v),_=function(ae,be,de){var Ae=de[4],Me=de[2],pe=de[0],Le=de[5],Se=de[1],qe=Math.min(Ae,pe),Be=Math.max(Ae,pe),je=Math.min(Le,Se),Ke=Math.max(Le,Se);if(qe<=ae&&ae<=Be&&je<=be&&be<=Ke){var tt=function(o,l,d){return[o-2*l+d,2*(l-o),o]}(Ae,Me,pe),at=function(o,l,d,h){var p=l*l-4*o*(d-=h);if(p<0)return[];var g=Math.sqrt(p),v=2*o;return[(-l+g)/v,(-l-g)/v]}(tt[0],tt[1],tt[2],ae),et=at.filter(function(Je){return 0<=Je&&Je<=1});if(et.length>0)return et[0]}return null},k=Object.keys(x),O=0;O<k.length;O++){var W=x[k[O]],Y=_(o,l,W);if(null!=Y){var Ee=Yn(W[5],W[3],W[1],Y);if(W.isTop&&Ee<=l||W.isBottom&&l<=Ee)return!0}}return!1}}},generateBottomRoundrectangle:function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Bi(4,0),draw:function(o,l,d,h,p){this.renderer.nodeShapeImpl(this.name,o,l,d,h,p)},intersectLine:function(o,l,d,h,p,g,v){var y=l-(h/2+v),_=ms(p,g,o,l,o-(d/2+v),y,o+(d/2+v),y,!1);return _.length>0?_:ca(p,g,o,l,d,h,v)},checkPoint:function(o,l,d,h,p,g,v){var b=Nc(h,p),y=2*b;if(Os(o,l,this.points,g,v,h,p-y,[0,-1],d)||Os(o,l,this.points,g,v,h-y,p,[0,-1],d))return!0;var D=h/2+2*d,x=p/2+2*d;return!!(mr(o,l,[g-D,v-x,g-D,v,g+D,v,g+D,v-x])||ha(o,l,y,y,g+h/2-b,v+p/2-b,d)||ha(o,l,y,y,g-h/2+b,v+p/2-b,d))}}},registerNodeShapes:function(){var u=this.nodeShapes={},o=this;this.generateEllipse(),this.generatePolygon("triangle",Bi(3,0)),this.generateRoundPolygon("round-triangle",Bi(3,0)),this.generatePolygon("rectangle",Bi(4,0)),u.square=u.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var l=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",l),this.generateRoundPolygon("round-diamond",l),this.generatePolygon("pentagon",Bi(5,0)),this.generateRoundPolygon("round-pentagon",Bi(5,0)),this.generatePolygon("hexagon",Bi(6,0)),this.generateRoundPolygon("round-hexagon",Bi(6,0)),this.generatePolygon("heptagon",Bi(7,0)),this.generateRoundPolygon("round-heptagon",Bi(7,0)),this.generatePolygon("octagon",Bi(8,0)),this.generateRoundPolygon("round-octagon",Bi(8,0));var d=new Array(20),h=Ka(5,0),p=Ka(5,Math.PI/5),g=.5*(3-Math.sqrt(5));g*=1.57;for(var v=0;v<p.length/2;v++)p[2*v]*=g,p[2*v+1]*=g;for(v=0;v<5;v++)d[4*v]=h[2*v],d[4*v+1]=h[2*v+1],d[4*v+2]=p[2*v],d[4*v+3]=p[2*v+1];d=Eu(d),this.generatePolygon("star",d),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var b=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",b),this.generateRoundPolygon("round-tag",b),u.makePolygon=function(y){var _,x="polygon-"+y.join("$");return(_=this[x])?_:o.generatePolygon(x,y)}}},ud={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(u){u=u||Ac();var o=this;void 0===o.averageRedrawTime&&(o.averageRedrawTime=0),void 0===o.lastRedrawTime&&(o.lastRedrawTime=0),void 0===o.lastDrawTime&&(o.lastDrawTime=0),o.requestedFrame=!0,o.renderOptions=u},beforeRender:function(u,o){if(!this.destroyed){null==o&&gr("Priority is not optional for beforeRender");var l=this.beforeRenderCallbacks;l.push({fn:u,priority:o}),l.sort(function(d,h){return h.priority-d.priority})}}},Rv=function(o,l,d){for(var h=o.beforeRenderCallbacks,p=0;p<h.length;p++)h[p].fn(l,d)};ud.startRenderLoop=function(){var u=this,o=u.cy;u.renderLoopStarted||(u.renderLoopStarted=!0,Ha(function d(h){if(!u.destroyed){if(!o.batching())if(u.requestedFrame&&!u.skipFrame){Rv(u,!0,h);var p=Si();u.render(u.renderOptions);var g=u.lastDrawTime=Si();void 0===u.averageRedrawTime&&(u.averageRedrawTime=g-p),void 0===u.redrawCount&&(u.redrawCount=0),u.redrawCount++,void 0===u.redrawTotalTime&&(u.redrawTotalTime=0);var v=g-p;u.redrawTotalTime+=v,u.lastRedrawTime=v,u.averageRedrawTime=u.averageRedrawTime/2+v/2,u.requestedFrame=!1}else Rv(u,!1,h);u.skipFrame=!1,Ha(d)}}))};var Fp=function(o){this.init(o)},ll=Fp.prototype;ll.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],ll.init=function(u){var o=this;o.options=u,o.cy=u.cy;var l=o.container=u.cy.container();if(B){var d=B.document,h=d.head,p="__________cytoscape_stylesheet",g="__________cytoscape_container",v=null!=d.getElementById(p);if(l.className.indexOf(g)<0&&(l.className=(l.className||"")+" "+g),!v){var b=d.createElement("style");b.id=p,b.innerHTML="."+g+" { position: relative; }",h.insertBefore(b,h.children[0])}"static"===B.getComputedStyle(l).getPropertyValue("position")&&tr("A Cytoscape container has style position:static and so can not use UI extensions properly")}o.selection=[void 0,void 0,void 0,void 0,0],o.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],o.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},o.dragData={possibleDragElements:[]},o.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},o.redraws=0,o.showFps=u.showFps,o.debug=u.debug,o.hideEdgesOnViewport=u.hideEdgesOnViewport,o.textureOnViewport=u.textureOnViewport,o.wheelSensitivity=u.wheelSensitivity,o.motionBlurEnabled=u.motionBlur,o.forcedPixelRatio=fe(u.pixelRatio)?u.pixelRatio:null,o.motionBlur=u.motionBlur,o.motionBlurOpacity=u.motionBlurOpacity,o.motionBlurTransparency=1-o.motionBlurOpacity,o.motionBlurPxRatio=1,o.mbPxRBlurry=1,o.minMbLowQualFrames=4,o.fullQualityMb=!1,o.clearedForMotionBlur=[],o.desktopTapThreshold=u.desktopTapThreshold,o.desktopTapThreshold2=u.desktopTapThreshold*u.desktopTapThreshold,o.touchTapThreshold=u.touchTapThreshold,o.touchTapThreshold2=u.touchTapThreshold*u.touchTapThreshold,o.tapholdDuration=500,o.bindings=[],o.beforeRenderCallbacks=[],o.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},o.registerNodeShapes(),o.registerArrowShapes(),o.registerCalculationListeners()},ll.notify=function(u,o){var l=this,d=l.cy;if(!this.destroyed){if("init"===u)return void l.load();if("destroy"===u)return void l.destroy();("add"===u||"remove"===u||"move"===u&&d.hasCompoundNodes()||"load"===u||"zorder"===u||"mount"===u)&&l.invalidateCachedZSortedEles(),"viewport"===u&&l.redrawHint("select",!0),("load"===u||"resize"===u||"mount"===u)&&(l.invalidateContainerClientCoordsCache(),l.matchCanvasSize(l.container)),l.redrawHint("eles",!0),l.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}},ll.destroy=function(){var u=this;u.destroyed=!0,u.cy.stopAnimationLoop();for(var o=0;o<u.bindings.length;o++){var l=u.bindings[o],h=l.target;(h.off||h.removeEventListener).apply(h,l.args)}if(u.bindings=[],u.beforeRenderCallbacks=[],u.onUpdateEleCalcsFns=[],u.removeObserver&&u.removeObserver.disconnect(),u.styleObserver&&u.styleObserver.disconnect(),u.resizeObserver&&u.resizeObserver.disconnect(),u.labelCalcDiv)try{document.body.removeChild(u.labelCalcDiv)}catch{}},ll.isHeadless=function(){return!1},[Tv,Pp,Lp,Jl,jr,ud].forEach(function(u){Yt(ll,u)});var Bp=1e3/60,Nv_setupDequeueing=function(o){return function(){var d=this,h=this.renderer;if(!d.dequeueingSetup){d.dequeueingSetup=!0;var p=T.default(function(){h.redrawHint("eles",!0),h.redrawHint("drag",!0),h.redraw()},o.deqRedrawThreshold);h.beforeRender(function(y,D){var x=Si(),_=h.averageRedrawTime,k=h.lastRedrawTime,O=[],V=h.cy.extent(),W=h.getPixelRatio();for(y||h.flushRenderedStyleQueue();;){var Y=Si(),te=Y-x,ne=Y-D;if(k<Bp){if(ne>=o.deqFastCost*(Bp-(y?_:0)))break}else if(y){if(te>=o.deqCost*k||te>=o.deqAvgCost*_)break}else if(ne>=o.deqNoDrawCost*Bp)break;var Ee=o.deq(d,W,V);if(!(Ee.length>0))break;for(var Ce=0;Ce<Ee.length;Ce++)O.push(Ee[Ce])}O.length>0&&(o.onDeqd(d,O),!y&&o.shouldRedraw(d,O,W,V)&&p())},(o.priority||wu)(d))}}},Fw=function(){function u(o){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bu;z(this,u),this.idsByKey=new Xi,this.keyForId=new Xi,this.cachesByLvl=new Xi,this.lvls=[],this.getKey=o,this.doesEleInvalidateKey=l}return oe(u,[{key:"getIdsFor",value:function(l){null==l&&gr("Can not get id list for null key");var d=this.idsByKey,h=this.idsByKey.get(l);return h||(h=new ua,d.set(l,h)),h}},{key:"addIdForKey",value:function(l,d){null!=l&&this.getIdsFor(l).add(d)}},{key:"deleteIdForKey",value:function(l,d){null!=l&&this.getIdsFor(l).delete(d)}},{key:"getNumberOfIdsForKey",value:function(l){return null==l?0:this.getIdsFor(l).size}},{key:"updateKeyMappingFor",value:function(l){var d=l.id(),h=this.keyForId.get(d),p=this.getKey(l);this.deleteIdForKey(h,d),this.addIdForKey(p,d),this.keyForId.set(d,p)}},{key:"deleteKeyMappingFor",value:function(l){var d=l.id(),h=this.keyForId.get(d);this.deleteIdForKey(h,d),this.keyForId.delete(d)}},{key:"keyHasChangedFor",value:function(l){var d=l.id();return this.keyForId.get(d)!==this.getKey(l)}},{key:"isInvalid",value:function(l){return this.keyHasChangedFor(l)||this.doesEleInvalidateKey(l)}},{key:"getCachesAt",value:function(l){var d=this.cachesByLvl,h=this.lvls,p=d.get(l);return p||(p=new Xi,d.set(l,p),h.push(l)),p}},{key:"getCache",value:function(l,d){return this.getCachesAt(d).get(l)}},{key:"get",value:function(l,d){var h=this.getKey(l),p=this.getCache(h,d);return null!=p&&this.updateKeyMappingFor(l),p}},{key:"getForCachedKey",value:function(l,d){var h=this.keyForId.get(l.id());return this.getCache(h,d)}},{key:"hasCache",value:function(l,d){return this.getCachesAt(d).has(l)}},{key:"has",value:function(l,d){var h=this.getKey(l);return this.hasCache(h,d)}},{key:"setCache",value:function(l,d,h){h.key=l,this.getCachesAt(d).set(l,h)}},{key:"set",value:function(l,d,h){var p=this.getKey(l);this.setCache(p,d,h),this.updateKeyMappingFor(l)}},{key:"deleteCache",value:function(l,d){this.getCachesAt(d).delete(l)}},{key:"delete",value:function(l,d){var h=this.getKey(l);this.deleteCache(h,d)}},{key:"invalidateKey",value:function(l){var d=this;this.lvls.forEach(function(h){return d.deleteCache(l,h)})}},{key:"invalidate",value:function(l){var d=l.id(),h=this.keyForId.get(d);this.deleteKeyMappingFor(l);var p=this.doesEleInvalidateKey(l);return p&&this.invalidateKey(h),p||0===this.getNumberOfIdsForKey(h)}}]),u}(),qu={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},jp=ni({getKey:null,doesEleInvalidateKey:bu,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:Js,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),Zl=function(o,l){var d=this;d.renderer=o,d.onDequeues=[];var h=jp(l);Yt(d,h),d.lookup=new Fw(h.getKey,h.doesEleInvalidateKey),d.setupDequeueing()},ai=Zl.prototype;ai.reasons=qu,ai.getTextureQueue=function(u){var o=this;return o.eleImgCaches=o.eleImgCaches||{},o.eleImgCaches[u]=o.eleImgCaches[u]||[]},ai.getRetiredTextureQueue=function(u){var l=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return l[u]=l[u]||[]},ai.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new M.default(function(l,d){return d.reqs-l.reqs})},ai.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},ai.getElement=function(u,o,l,d,h){var p=this,g=this.renderer,v=g.cy.zoom(),b=this.lookup;if(!o||0===o.w||0===o.h||isNaN(o.w)||isNaN(o.h)||!u.visible()||u.removed()||!p.allowEdgeTxrCaching&&u.isEdge()||!p.allowParentTxrCaching&&u.isParent())return null;if(null==d&&(d=Math.ceil(Hr(v*l))),d<-4)d=-4;else if(v>=7.99||d>3)return null;var y=Math.pow(2,d),D=o.h*y,x=o.w*y,_=g.eleTextBiggerThanMin(u,y);if(!this.isVisible(u,_))return null;var O,k=b.get(u,d);if(k&&k.invalidated&&(k.invalidated=!1,k.texture.invalidatedWidth-=k.width),k)return k;if(O=D<=25?25:D<=50?50:50*Math.ceil(D/50),D>1024||x>1024)return null;var V=p.getTextureQueue(O),W=V[V.length-2],Y=function(){return p.recycleTexture(O,x)||p.addTexture(O,x)};W||(W=V[V.length-1]),W||(W=Y()),W.width-W.usedWidth<x&&(W=Y());for(var Ce,te=function(Be){return Be&&Be.scaledLabelShown===_},ne=h&&h===qu.dequeue,se=h&&h===qu.highQuality,Ee=h&&h===qu.downscale,ae=d+1;ae<=3;ae++){var be=b.get(u,ae);if(be){Ce=be;break}}var de=Ce&&Ce.level===d+1?Ce:null,Ae=function(){W.context.drawImage(de.texture.canvas,de.x,0,de.width,de.height,W.usedWidth,0,x,D)};if(W.context.setTransform(1,0,0,1,0,0),W.context.clearRect(W.usedWidth,0,x,O),te(de))Ae();else if(te(Ce)){if(!se)return p.queueElement(u,Ce.level-1),Ce;for(var Me=Ce.level;Me>d;Me--)de=p.getElement(u,o,l,Me,qu.downscale);Ae()}else{var pe;if(!ne&&!se&&!Ee)for(var Le=d-1;Le>=-4;Le--){var Se=b.get(u,Le);if(Se){pe=Se;break}}if(te(pe))return p.queueElement(u,d),pe;W.context.translate(W.usedWidth,0),W.context.scale(y,y),this.drawElement(W.context,u,o,_,!1),W.context.scale(1/y,1/y),W.context.translate(-W.usedWidth,0)}return k={x:W.usedWidth,texture:W,level:d,scale:y,width:x,height:D,scaledLabelShown:_},W.usedWidth+=Math.ceil(x+8),W.eleCaches.push(k),b.set(u,d,k),p.checkTextureFullness(W),k},ai.invalidateElements=function(u){for(var o=0;o<u.length;o++)this.invalidateElement(u[o])},ai.invalidateElement=function(u){var o=this,l=o.lookup,d=[];if(l.isInvalid(u)){for(var p=-4;p<=3;p++){var g=l.getForCachedKey(u,p);g&&d.push(g)}if(l.invalidate(u))for(var b=0;b<d.length;b++){var y=d[b],D=y.texture;D.invalidatedWidth+=y.width,y.invalidated=!0,o.checkTextureUtility(D)}o.removeFromQueue(u)}},ai.checkTextureUtility=function(u){u.invalidatedWidth>=.2*u.width&&this.retireTexture(u)},ai.checkTextureFullness=function(u){var l=this.getTextureQueue(u.height);u.usedWidth/u.width>.8&&u.fullnessChecks>=10?Ho(l,u):u.fullnessChecks++},ai.retireTexture=function(u){var l=u.height,d=this.getTextureQueue(l),h=this.lookup;Ho(d,u),u.retired=!0;for(var p=u.eleCaches,g=0;g<p.length;g++){var v=p[g];h.deleteCache(v.key,v.level)}Tc(p),this.getRetiredTextureQueue(l).push(u)},ai.addTexture=function(u,o){var h={};return this.getTextureQueue(u).push(h),h.eleCaches=[],h.height=u,h.width=Math.max(1024,o),h.usedWidth=0,h.invalidatedWidth=0,h.fullnessChecks=0,h.canvas=this.renderer.makeOffscreenCanvas(h.width,h.height),h.context=h.canvas.getContext("2d"),h},ai.recycleTexture=function(u,o){for(var d=this.getTextureQueue(u),h=this.getRetiredTextureQueue(u),p=0;p<h.length;p++){var g=h[p];if(g.width>=o)return g.retired=!1,g.usedWidth=0,g.invalidatedWidth=0,g.fullnessChecks=0,Tc(g.eleCaches),g.context.setTransform(1,0,0,1,0,0),g.context.clearRect(0,0,g.width,g.height),Ho(h,g),d.push(g),g}},ai.queueElement=function(u,o){var d=this.getElementQueue(),h=this.getElementKeyToQueue(),p=this.getKey(u),g=h[p];if(g)g.level=Math.max(g.level,o),g.eles.merge(u),g.reqs++,d.updateItem(g);else{var v={eles:u.spawn().merge(u),level:o,reqs:1,key:p};d.push(v),h[p]=v}},ai.dequeue=function(u){for(var o=this,l=o.getElementQueue(),d=o.getElementKeyToQueue(),h=[],p=o.lookup,g=0;g<1&&l.size()>0;g++){var v=l.pop(),b=v.key,y=v.eles[0],D=p.hasCache(y,v.level);if(d[b]=null,!D){h.push(v);var x=o.getBoundingBox(y);o.getElement(y,x,u,v.level,qu.dequeue)}}return h},ai.removeFromQueue=function(u){var l=this.getElementQueue(),d=this.getElementKeyToQueue(),h=this.getKey(u),p=d[h];null!=p&&(1===p.eles.length?(p.reqs=yu,l.updateItem(p),l.pop(),d[h]=null):p.eles.unmerge(u))},ai.onDequeue=function(u){this.onDequeues.push(u)},ai.offDequeue=function(u){Ho(this.onDequeues,u)},ai.setupDequeueing=Nv_setupDequeueing({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(o,l,d){return o.dequeue(l,d)},onDeqd:function(o,l){for(var d=0;d<o.onDequeues.length;d++)(0,o.onDequeues[d])(l)},shouldRedraw:function(o,l,d,h){for(var p=0;p<l.length;p++)for(var g=l[p].eles,v=0;v<g.length;v++){var b=g[v].boundingBox();if(ks(b,h))return!0}return!1},priority:function(o){return o.renderer.beforeRenderPriorities.eleTxrDeq}});var Gv=function(o){var l=this,d=l.renderer=o,h=d.cy;l.layersByLevel={},l.firstGet=!0,l.lastInvalidationTime=Si()-500,l.skipping=!1,l.eleTxrDeqs=h.collection(),l.scheduleElementRefinement=T.default(function(){l.refineElementTextures(l.eleTxrDeqs),l.eleTxrDeqs.unmerge(l.eleTxrDeqs)},50),d.beforeRender(function(g,v){l.skipping=v-l.lastInvalidationTime<=250},d.beforeRenderPriorities.lyrTxrSkip),l.layersQueue=new M.default(function(v,b){return b.reqs-v.reqs}),l.setupDequeueing()},Ii=Gv.prototype,$v=0,Wv=Math.pow(2,53)-1;Ii.makeLayer=function(u,o){var l=Math.pow(2,o),d=Math.ceil(u.w*l),h=Math.ceil(u.h*l),p=this.renderer.makeOffscreenCanvas(d,h),g={id:$v=++$v%Wv,bb:u,level:o,width:d,height:h,canvas:p,context:p.getContext("2d"),eles:[],elesQueue:[],reqs:0},v=g.context,b=-g.bb.x1,y=-g.bb.y1;return v.scale(l,l),v.translate(b,y),g},Ii.getLayers=function(u,o,l){var d=this,g=d.renderer.cy.zoom(),v=d.firstGet;if(d.firstGet=!1,null==l)if((l=Math.ceil(Hr(g*o)))<-4)l=-4;else if(g>=3.99||l>2)return null;d.validateLayersElesOrdering(l,u);var x,k,b=d.layersByLevel,y=Math.pow(2,l),D=b[l]=b[l]||[];if(d.levelIsComplete(l,u))return D;!function(){var Ae=function(qe){if(d.validateLayersElesOrdering(qe,u),d.levelIsComplete(qe,u))return k=b[qe],!0},Me=function(qe){if(!k)for(var Be=l+qe;-4<=Be&&Be<=2&&!Ae(Be);Be+=qe);};Me(1),Me(-1);for(var pe=D.length-1;pe>=0;pe--){var Le=D[pe];Le.invalid&&Ho(D,Le)}}();var W=function(Ae){var Me=(Ae=Ae||{}).after;if(function(){if(!x){x=Er();for(var Ae=0;Ae<u.length;Ae++)En(x,u[Ae].boundingBox())}}(),x.w*y*(x.h*y)>16e6)return null;var Le=d.makeLayer(x,l);if(null!=Me){var Se=D.indexOf(Me)+1;D.splice(Se,0,Le)}else(void 0===Ae.insert||Ae.insert)&&D.unshift(Le);return Le};if(d.skipping&&!v)return null;for(var Y=null,te=u.length/1,ne=!v,se=0;se<u.length;se++){var Ee=u[se],Ce=Ee._private.rscratch,ae=Ce.imgLayerCaches=Ce.imgLayerCaches||{},be=ae[l];if(be)Y=be;else{if((!Y||Y.eles.length>=te||!bo(Y.bb,Ee.boundingBox()))&&!(Y=W({insert:!0,after:Y})))return null;k||ne?d.queueLayer(Y,Ee):d.drawEleInLayer(Y,Ee,l,o),Y.eles.push(Ee),ae[l]=Y}}return k||(ne?null:D)},Ii.getEleLevelForLayerLevel=function(u,o){return u},Ii.drawEleInLayer=function(u,o,l,d){var p=this.renderer,g=u.context,v=o.boundingBox();0===v.w||0===v.h||!o.visible()||(l=this.getEleLevelForLayerLevel(l,d),p.setImgSmoothing(g,!1),p.drawCachedElement(g,o,null,null,l,!0),p.setImgSmoothing(g,!0))},Ii.levelIsComplete=function(u,o){var d=this.layersByLevel[u];if(!d||0===d.length)return!1;for(var h=0,p=0;p<d.length;p++){var g=d[p];if(g.reqs>0||g.invalid)return!1;h+=g.eles.length}return h===o.length},Ii.validateLayersElesOrdering=function(u,o){var l=this.layersByLevel[u];if(l)for(var d=0;d<l.length;d++){for(var h=l[d],p=-1,g=0;g<o.length;g++)if(h.eles[0]===o[g]){p=g;break}if(p<0)this.invalidateLayer(h);else{var v=p;for(g=0;g<h.eles.length;g++)if(h.eles[g]!==o[v+g]){this.invalidateLayer(h);break}}}},Ii.updateElementsInLayers=function(u,o){for(var d=Qe(u[0]),h=0;h<u.length;h++)for(var p=d?null:u[h],g=d?u[h]:u[h].ele,v=g._private.rscratch,b=v.imgLayerCaches=v.imgLayerCaches||{},y=-4;y<=2;y++){var D=b[y];D&&(p&&this.getEleLevelForLayerLevel(D.level)!==p.level||o(D,g,p))}},Ii.haveLayers=function(){for(var o=!1,l=-4;l<=2;l++){var d=this.layersByLevel[l];if(d&&d.length>0){o=!0;break}}return o},Ii.invalidateElements=function(u){var o=this;0!==u.length&&(o.lastInvalidationTime=Si(),0!==u.length&&o.haveLayers()&&o.updateElementsInLayers(u,function(d,h,p){o.invalidateLayer(d)}))},Ii.invalidateLayer=function(u){if(this.lastInvalidationTime=Si(),!u.invalid){var o=u.level,l=u.eles;Ho(this.layersByLevel[o],u),u.elesQueue=[],u.invalid=!0,u.replacement&&(u.replacement.invalid=!0);for(var h=0;h<l.length;h++){var p=l[h]._private.rscratch.imgLayerCaches;p&&(p[o]=null)}}},Ii.refineElementTextures=function(u){var o=this;o.updateElementsInLayers(u,function(d,h,p){var g=d.replacement;if(g||((g=d.replacement=o.makeLayer(d.bb,d.level)).replaces=d,g.eles=d.eles),!g.reqs)for(var v=0;v<g.eles.length;v++)o.queueLayer(g,g.eles[v])})},Ii.enqueueElementRefinement=function(u){this.eleTxrDeqs.merge(u),this.scheduleElementRefinement()},Ii.queueLayer=function(u,o){var d=this.layersQueue,h=u.elesQueue,p=h.hasId=h.hasId||{};if(!u.replacement){if(o){if(p[o.id()])return;h.push(o),p[o.id()]=!0}u.reqs?(u.reqs++,d.updateItem(u)):(u.reqs=1,d.push(u))}},Ii.dequeue=function(u){for(var o=this,l=o.layersQueue,d=[],h=0;h<1&&0!==l.size();){var p=l.peek();if(p.replacement)l.pop();else if(p.replaces&&p!==p.replaces.replacement)l.pop();else if(p.invalid)l.pop();else{var g=p.elesQueue.shift();g&&(o.drawEleInLayer(p,g,p.level,u),h++),0===d.length&&d.push(!0),0===p.elesQueue.length&&(l.pop(),p.reqs=0,p.replaces&&o.applyLayerReplacement(p),o.requestRedraw())}}return d},Ii.applyLayerReplacement=function(u){var l=this.layersByLevel[u.level],d=u.replaces,h=l.indexOf(d);if(!(h<0||d.invalid)){l[h]=u;for(var p=0;p<u.eles.length;p++){var g=u.eles[p]._private,v=g.imgLayerCaches=g.imgLayerCaches||{};v&&(v[u.level]=u)}this.requestRedraw()}},Ii.requestRedraw=T.default(function(){var u=this.renderer;u.redrawHint("eles",!0),u.redrawHint("drag",!0),u.redraw()},100),Ii.setupDequeueing=Nv_setupDequeueing({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(o,l){return o.dequeue(l)},onDeqd:wu,shouldRedraw:Js,priority:function(o){return o.renderer.beforeRenderPriorities.lyrTxrDeq}});var qp,Sh={};function Yp(u,o){for(var l=0;l<o.length;l++){var d=o[l];u.lineTo(d.x,d.y)}}function $w(u,o,l){for(var d,h=0;h<o.length;h++){var p=o[h];0===h&&(d=p),u.lineTo(p.x,p.y)}u.quadraticCurveTo(l.x,l.y,d.x,d.y)}function qv(u,o,l){u.beginPath&&u.beginPath();for(var d=o,h=0;h<d.length;h++)u.lineTo((p=d[h]).x,p.y);var g=l,v=l[0];for(u.moveTo(v.x,v.y),h=1;h<g.length;h++){var p;u.lineTo((p=g[h]).x,p.y)}u.closePath&&u.closePath()}function Yv(u,o,l,d,h){u.beginPath&&u.beginPath(),u.arc(l,d,h,0,2*Math.PI,!1);var p=o,g=p[0];u.moveTo(g.x,g.y);for(var v=0;v<p.length;v++){var b=p[v];u.lineTo(b.x,b.y)}u.closePath&&u.closePath()}function Xv(u,o,l,d){u.arc(o,l,d,0,2*Math.PI,!1)}Sh.arrowShapeImpl=function(u){return(qp||(qp={polygon:Yp,"triangle-backcurve":$w,"triangle-tee":qv,"circle-triangle":Yv,"triangle-cross":qv,circle:Xv}))[u]};var Gi={drawElement:function(u,o,l,d,h,p){o.isNode()?this.drawNode(u,o,l,d,h,p):this.drawEdge(u,o,l,d,h,p)},drawElementOverlay:function(u,o){o.isNode()?this.drawNodeOverlay(u,o):this.drawEdgeOverlay(u,o)},drawElementUnderlay:function(u,o){o.isNode()?this.drawNodeUnderlay(u,o):this.drawEdgeUnderlay(u,o)},drawCachedElementPortion:function(u,o,l,d,h,p,g,v){var b=this,y=l.getBoundingBox(o);if(0!==y.w&&0!==y.h){var D=l.getElement(o,y,d,h,p);if(null!=D){var x=v(b,o);if(0===x)return;var Y,te,ne,se,Ee,be,_=g(b,o),k=y.x1,O=y.y1,V=y.w,W=y.h;if(0!==_){var Ce=l.getRotationPoint(o);u.translate(ne=Ce.x,se=Ce.y),u.rotate(_),(Ee=b.getImgSmoothing(u))||b.setImgSmoothing(u,!0);var ae=l.getRotationOffset(o);Y=ae.x,te=ae.y}else Y=k,te=O;1!==x&&(u.globalAlpha=(be=u.globalAlpha)*x),u.drawImage(D.texture.canvas,D.x,0,D.width,D.height,Y,te,V,W),1!==x&&(u.globalAlpha=be),0!==_&&(u.rotate(-_),u.translate(-ne,-se),Ee||b.setImgSmoothing(u,!1))}else l.drawElement(u,o)}}},Kv=function(){return 0},Qv=function(o,l){return o.getTextAngle(l,null)},Ww=function(o,l){return o.getTextAngle(l,"source")},J1=function(o,l){return o.getTextAngle(l,"target")},_h=function(o,l){return l.effectiveOpacity()},Xp=function(o,l){return l.pstyle("text-opacity").pfValue*l.effectiveOpacity()};Gi.drawCachedElement=function(u,o,l,d,h,p){var g=this,v=g.data,b=v.eleTxrCache,y=v.lblTxrCache,D=v.slbTxrCache,x=v.tlbTxrCache,_=o.boundingBox(),k=!0===p?b.reasons.highQuality:null;if(0!==_.w&&0!==_.h&&o.visible()&&(!d||ks(_,d))){var O=o.isEdge(),V=o.element()._private.rscratch.badLine;g.drawElementUnderlay(u,o),g.drawCachedElementPortion(u,o,b,l,h,k,Kv,_h),(!O||!V)&&g.drawCachedElementPortion(u,o,y,l,h,k,Qv,Xp),O&&!V&&(g.drawCachedElementPortion(u,o,D,l,h,k,Ww,Xp),g.drawCachedElementPortion(u,o,x,l,h,k,J1,Xp)),g.drawElementOverlay(u,o)}},Gi.drawElements=function(u,o){for(var d=0;d<o.length;d++)this.drawElement(u,o[d])},Gi.drawCachedElements=function(u,o,l,d){for(var p=0;p<o.length;p++)this.drawCachedElement(u,o[p],l,d)},Gi.drawCachedNodes=function(u,o,l,d){for(var p=0;p<o.length;p++){var g=o[p];g.isNode()&&this.drawCachedElement(u,g,l,d)}},Gi.drawLayeredElements=function(u,o,l,d){var p=this.data.lyrTxrCache.getLayers(o,l);if(p)for(var g=0;g<p.length;g++){var v=p[g],b=v.bb;0===b.w||0===b.h||u.drawImage(v.canvas,b.x1,b.y1,b.w,b.h)}else this.drawCachedElements(u,o,l,d)};var $o={drawEdge:function(u,o,l){var d=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],h=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],p=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],g=this,v=o._private.rscratch;if((!p||o.visible())&&!v.badLine&&null!=v.allpts&&!isNaN(v.allpts[0])){var b;l&&u.translate(-(b=l).x1,-b.y1);var y=p?o.pstyle("opacity").value:1,D=p?o.pstyle("line-opacity").value:1,x=o.pstyle("curve-style").value,_=o.pstyle("line-style").value,k=o.pstyle("width").pfValue,O=o.pstyle("line-cap").value,V=y*D,W=y*D,Y=function(){var pe=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V;"straight-triangle"===x?(g.eleStrokeStyle(u,o,pe),g.drawEdgeTrianglePath(o,u,v.allpts)):(u.lineWidth=k,u.lineCap=O,g.eleStrokeStyle(u,o,pe),g.drawEdgePath(o,u,v.allpts,_),u.lineCap="butt")},te=function(){h&&g.drawEdgeOverlay(u,o)},ne=function(){h&&g.drawEdgeUnderlay(u,o)},se=function(){var pe=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W;g.drawArrowheads(u,o,pe)},Ee=function(){g.drawElementText(u,o,null,d)};u.lineJoin="round";var Ce="yes"===o.pstyle("ghost").value;if(Ce){var ae=o.pstyle("ghost-offset-x").pfValue,be=o.pstyle("ghost-offset-y").pfValue,de=o.pstyle("ghost-opacity").value,Ae=V*de;u.translate(ae,be),Y(Ae),se(Ae),u.translate(-ae,-be)}ne(),Y(),se(),te(),Ee(),l&&u.translate(b.x1,b.y1)}}},Kp=function(o){if(!["overlay","underlay"].includes(o))throw new Error("Invalid state");return function(l,d){if(d.visible()){var h=d.pstyle("".concat(o,"-opacity")).value;if(0!==h){var p=this,g=p.usePaths(),v=d._private.rscratch,y=2*d.pstyle("".concat(o,"-padding")).pfValue,D=d.pstyle("".concat(o,"-color")).value;l.lineWidth=y,l.lineCap="self"!==v.edgeType||g?"round":"butt",p.colorStrokeStyle(l,D[0],D[1],D[2],h),p.drawEdgePath(d,l,v.allpts,"solid")}}}};$o.drawEdgeOverlay=Kp("overlay"),$o.drawEdgeUnderlay=Kp("underlay"),$o.drawEdgePath=function(u,o,l,d){var g,h=u._private.rscratch,p=o,v=!1,b=this.usePaths(),y=u.pstyle("line-dash-pattern").pfValue,D=u.pstyle("line-dash-offset").pfValue;if(b){var x=l.join("$");h.pathCacheKey&&h.pathCacheKey===x?(g=o=h.pathCache,v=!0):(g=o=new Path2D,h.pathCacheKey=x,h.pathCache=g)}if(p.setLineDash)switch(d){case"dotted":p.setLineDash([1,1]);break;case"dashed":p.setLineDash(y),p.lineDashOffset=D;break;case"solid":p.setLineDash([])}if(!v&&!h.badLine)switch(o.beginPath&&o.beginPath(),o.moveTo(l[0],l[1]),h.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var k=2;k+3<l.length;k+=4)o.quadraticCurveTo(l[k],l[k+1],l[k+2],l[k+3]);break;case"straight":case"segments":case"haystack":for(var O=2;O+1<l.length;O+=2)o.lineTo(l[O],l[O+1])}o=p,b?o.stroke(g):o.stroke(),o.setLineDash&&o.setLineDash([])},$o.drawEdgeTrianglePath=function(u,o,l){o.fillStyle=o.strokeStyle;for(var d=u.pstyle("width").pfValue,h=0;h+1<l.length;h+=2){var p=[l[h+2]-l[h],l[h+3]-l[h+1]],g=Math.sqrt(p[0]*p[0]+p[1]*p[1]),v=[p[1]/g,-p[0]/g],b=[v[0]*d/2,v[1]*d/2];o.beginPath(),o.moveTo(l[h]-b[0],l[h+1]-b[1]),o.lineTo(l[h]+b[0],l[h+1]+b[1]),o.lineTo(l[h+2],l[h+3]),o.closePath(),o.fill()}},$o.drawArrowheads=function(u,o,l){var d=o._private.rscratch,h="haystack"===d.edgeType;h||this.drawArrowhead(u,o,"source",d.arrowStartX,d.arrowStartY,d.srcArrowAngle,l),this.drawArrowhead(u,o,"mid-target",d.midX,d.midY,d.midtgtArrowAngle,l),this.drawArrowhead(u,o,"mid-source",d.midX,d.midY,d.midsrcArrowAngle,l),h||this.drawArrowhead(u,o,"target",d.arrowEndX,d.arrowEndY,d.tgtArrowAngle,l)},$o.drawArrowhead=function(u,o,l,d,h,p,g){if(!(isNaN(d)||null==d||isNaN(h)||null==h||isNaN(p)||null==p)){var v=this,b=o.pstyle(l+"-arrow-shape").value;if("none"!==b){var y="hollow"===o.pstyle(l+"-arrow-fill").value?"both":"filled",D=o.pstyle(l+"-arrow-fill").value,x=o.pstyle("width").pfValue,_=o.pstyle("opacity").value;void 0===g&&(g=_);var k=u.globalCompositeOperation;(1!==g||"hollow"===D)&&(u.globalCompositeOperation="destination-out",v.colorFillStyle(u,255,255,255,1),v.colorStrokeStyle(u,255,255,255,1),v.drawArrowShape(o,u,y,x,b,d,h,p),u.globalCompositeOperation=k);var O=o.pstyle(l+"-arrow-color").value;v.colorFillStyle(u,O[0],O[1],O[2],g),v.colorStrokeStyle(u,O[0],O[1],O[2],g),v.drawArrowShape(o,u,D,x,b,d,h,p)}}},$o.drawArrowShape=function(u,o,l,d,h,p,g,v){var x,b=this,y=this.usePaths()&&"triangle-cross"!==h,D=!1,_=o,k={x:p,y:g},O=u.pstyle("arrow-scale").value,V=this.getArrowWidth(d,O),W=b.arrowShapes[h];if(y){var Y=b.arrowPathCache=b.arrowPathCache||[],te=la(h),ne=Y[te];null!=ne?(x=o=ne,D=!0):(x=o=new Path2D,Y[te]=x)}D||(o.beginPath&&o.beginPath(),y?W.draw(o,1,0,{x:0,y:0},1):W.draw(o,V,v,k,d),o.closePath&&o.closePath()),o=_,y&&(o.translate(p,g),o.rotate(v),o.scale(V,V)),("filled"===l||"both"===l)&&(y?o.fill(x):o.fill()),("hollow"===l||"both"===l)&&(o.lineWidth=(W.matchEdgeWidth?d:1)/(y?V:1),o.lineJoin="miter",y?o.stroke(x):o.stroke()),y&&(o.scale(1/V,1/V),o.rotate(-v),o.translate(-p,-g))};var Mh={safeDrawImage:function(u,o,l,d,h,p,g,v,b,y){if(!(h<=0||p<=0||b<=0||y<=0))try{u.drawImage(o,l,d,h,p,g,v,b,y)}catch(D){tr(D)}},drawInscribedImage:function(u,o,l,d,h){var p=this,g=l.position(),v=g.x,b=g.y,y=l.cy().style(),D=y.getIndexedStyle.bind(y),x=D(l,"background-fit","value",d),_=D(l,"background-repeat","value",d),k=l.width(),O=l.height(),V=2*l.padding(),W=k+("inner"===D(l,"background-width-relative-to","value",d)?0:V),Y=O+("inner"===D(l,"background-height-relative-to","value",d)?0:V),te=l._private.rscratch,se="node"===D(l,"background-clip","value",d),Ee=D(l,"background-image-opacity","value",d)*h,Ce=D(l,"background-image-smoothing","value",d),ae=o.width||o.cachedW,be=o.height||o.cachedH;(null==ae||null==be)&&(document.body.appendChild(o),ae=o.cachedW=o.width||o.offsetWidth,be=o.cachedH=o.height||o.offsetHeight,document.body.removeChild(o));var de=ae,Ae=be;if("auto"!==D(l,"background-width","value",d)&&(de="%"===D(l,"background-width","units",d)?D(l,"background-width","pfValue",d)*W:D(l,"background-width","pfValue",d)),"auto"!==D(l,"background-height","value",d)&&(Ae="%"===D(l,"background-height","units",d)?D(l,"background-height","pfValue",d)*Y:D(l,"background-height","pfValue",d)),0!==de&&0!==Ae){if("contain"===x)de*=Me=Math.min(W/de,Y/Ae),Ae*=Me;else if("cover"===x){var Me;de*=Me=Math.max(W/de,Y/Ae),Ae*=Me}var pe=v-W/2,Le=D(l,"background-position-x","units",d),Se=D(l,"background-position-x","pfValue",d);pe+="%"===Le?(W-de)*Se:Se;var qe=D(l,"background-offset-x","units",d),Be=D(l,"background-offset-x","pfValue",d);pe+="%"===qe?(W-de)*Be:Be;var je=b-Y/2,Ke=D(l,"background-position-y","units",d),tt=D(l,"background-position-y","pfValue",d);je+="%"===Ke?(Y-Ae)*tt:tt;var at=D(l,"background-offset-y","units",d),et=D(l,"background-offset-y","pfValue",d);je+="%"===at?(Y-Ae)*et:et,te.pathCache&&(pe-=v,je-=b,v=0,b=0);var Je=u.globalAlpha;u.globalAlpha=Ee;var wt=p.getImgSmoothing(u),xt=!1;if("no"===Ce&&wt?(p.setImgSmoothing(u,!1),xt=!0):"yes"===Ce&&!wt&&(p.setImgSmoothing(u,!0),xt=!0),"no-repeat"===_)se&&(u.save(),te.pathCache?u.clip(te.pathCache):(p.nodeShapes[p.getNodeShape(l)].draw(u,v,b,W,Y),u.clip())),p.safeDrawImage(u,o,0,0,ae,be,pe,je,de,Ae),se&&u.restore();else{var yt=u.createPattern(o,_);u.fillStyle=yt,p.nodeShapes[p.getNodeShape(l)].draw(u,v,b,W,Y),u.translate(pe,je),u.fill(),u.translate(-pe,-je)}u.globalAlpha=Je,xt&&p.setImgSmoothing(u,wt)}}},xa={};function Jv(u,o,l,d,h){var p=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5;u.beginPath(),u.moveTo(o+p,l),u.lineTo(o+d-p,l),u.quadraticCurveTo(o+d,l,o+d,l+p),u.lineTo(o+d,l+h-p),u.quadraticCurveTo(o+d,l+h,o+d-p,l+h),u.lineTo(o+p,l+h),u.quadraticCurveTo(o,l+h,o,l+h-p),u.lineTo(o,l+p),u.quadraticCurveTo(o,l,o+p,l),u.closePath(),u.fill()}xa.eleTextBiggerThanMin=function(u,o){if(!o){var l=u.cy().zoom(),d=this.getPixelRatio(),h=Math.ceil(Hr(l*d));o=Math.pow(2,h)}return!(u.pstyle("font-size").pfValue*o<u.pstyle("min-zoomed-font-size").pfValue)},xa.drawElementText=function(u,o,l,d,h){var p=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],g=this;if(null==d){if(p&&!g.eleTextBiggerThanMin(o))return}else if(!1===d)return;if(o.isNode()){var v=o.pstyle("label");if(!v||!v.value)return;var b=g.getLabelJustification(o);u.textAlign=b,u.textBaseline="bottom"}else{var y=o.element()._private.rscratch.badLine,D=o.pstyle("label"),x=o.pstyle("source-label"),_=o.pstyle("target-label");if(y||(!D||!D.value)&&(!x||!x.value)&&(!_||!_.value))return;u.textAlign="center",u.textBaseline="bottom"}var O,k=!l;l&&u.translate(-(O=l).x1,-O.y1),null==h?(g.drawText(u,o,null,k,p),o.isEdge()&&(g.drawText(u,o,"source",k,p),g.drawText(u,o,"target",k,p))):g.drawText(u,o,h,k,p),l&&u.translate(O.x1,O.y1)},xa.getFontCache=function(u){var o;this.fontCaches=this.fontCaches||[];for(var l=0;l<this.fontCaches.length;l++)if((o=this.fontCaches[l]).context===u)return o;return this.fontCaches.push(o={context:u}),o},xa.setupTextStyle=function(u,o){var l=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],d=o.pstyle("font-style").strValue,h=o.pstyle("font-size").pfValue+"px",p=o.pstyle("font-family").strValue,g=o.pstyle("font-weight").strValue,v=l?o.effectiveOpacity()*o.pstyle("text-opacity").value:1,b=o.pstyle("text-outline-opacity").value*v,y=o.pstyle("color").value,D=o.pstyle("text-outline-color").value;u.font=d+" "+g+" "+h+" "+p,u.lineJoin="round",this.colorFillStyle(u,y[0],y[1],y[2],v),this.colorStrokeStyle(u,D[0],D[1],D[2],b)},xa.getTextAngle=function(u,o){var h=u._private.rscratch,g=u.pstyle((o?o+"-":"")+"text-rotation"),v=Zs(h,"labelAngle",o);return"autorotate"===g.strValue?u.isEdge()?v:0:"none"===g.strValue?0:g.pfValue},xa.drawText=function(u,o,l){var d=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],h=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],p=o._private,g=p.rscratch,v=h?o.effectiveOpacity():1;if(!h||0!==v&&0!==o.pstyle("text-opacity").value){"main"===l&&(l=null);var D,x,b=Zs(g,"labelX",l),y=Zs(g,"labelY",l),_=this.getLabelText(o,l);if(null!=_&&""!==_&&!isNaN(b)&&!isNaN(y)){this.setupTextStyle(u,o,h);var Ee,k=l?l+"-":"",O=Zs(g,"labelWidth",l),V=Zs(g,"labelHeight",l),W=o.pstyle(k+"text-margin-x").pfValue,Y=o.pstyle(k+"text-margin-y").pfValue,te=o.isEdge(),ne=o.pstyle("text-halign").value,se=o.pstyle("text-valign").value;switch(te&&(ne="center",se="center"),b+=W,y+=Y,0!==(Ee=d?this.getTextAngle(o,l):0)&&(u.translate(D=b,x=y),u.rotate(Ee),b=0,y=0),se){case"top":break;case"center":y+=V/2;break;case"bottom":y+=V}var Ce=o.pstyle("text-background-opacity").value,ae=o.pstyle("text-border-opacity").value,be=o.pstyle("text-border-width").pfValue,de=o.pstyle("text-background-padding").pfValue;if(Ce>0||be>0&&ae>0){var Ae=b-de;switch(ne){case"left":Ae-=O;break;case"center":Ae-=O/2}var Me=y-V-de,pe=O+2*de,Le=V+2*de;if(Ce>0){var Se=u.fillStyle,qe=o.pstyle("text-background-color").value;u.fillStyle="rgba("+qe[0]+","+qe[1]+","+qe[2]+","+Ce*v+")";var Be=o.pstyle("text-background-shape").strValue;0===Be.indexOf("round")?Jv(u,Ae,Me,pe,Le,2):u.fillRect(Ae,Me,pe,Le),u.fillStyle=Se}if(be>0&&ae>0){var je=u.strokeStyle,Ke=u.lineWidth,tt=o.pstyle("text-border-color").value,at=o.pstyle("text-border-style").value;if(u.strokeStyle="rgba("+tt[0]+","+tt[1]+","+tt[2]+","+ae*v+")",u.lineWidth=be,u.setLineDash)switch(at){case"dotted":u.setLineDash([1,1]);break;case"dashed":u.setLineDash([4,2]);break;case"double":u.lineWidth=be/4,u.setLineDash([]);break;case"solid":u.setLineDash([])}if(u.strokeRect(Ae,Me,pe,Le),"double"===at){var et=be/2;u.strokeRect(Ae+et,Me+et,pe-2*et,Le-2*et)}u.setLineDash&&u.setLineDash([]),u.lineWidth=Ke,u.strokeStyle=je}}var Je=2*o.pstyle("text-outline-width").pfValue;if(Je>0&&(u.lineWidth=Je),"wrap"===o.pstyle("text-wrap").value){var wt=Zs(g,"labelWrapCachedLines",l),xt=Zs(g,"labelLineHeight",l),yt=O/2,mt=this.getLabelJustification(o);switch("auto"===mt||("left"===ne?"left"===mt?b+=-O:"center"===mt&&(b+=-yt):"center"===ne?"left"===mt?b+=-yt:"right"===mt&&(b+=yt):"right"===ne&&("center"===mt?b+=yt:"right"===mt&&(b+=O))),se){case"top":case"center":case"bottom":y-=(wt.length-1)*xt}for(var Xe=0;Xe<wt.length;Xe++)Je>0&&u.strokeText(wt[Xe],b,y),u.fillText(wt[Xe],b,y),y+=xt}else Je>0&&u.strokeText(_,b,y),u.fillText(_,b,y);0!==Ee&&(u.rotate(-Ee),u.translate(-D,-x))}}};var Ea={drawNode:function(u,o,l){var v,b,d=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],h=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],p=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],g=this,y=o._private,D=y.rscratch,x=o.position();if(fe(x.x)&&fe(x.y)&&(!p||o.visible())){var O,Y,_=p?o.effectiveOpacity():1,k=g.usePaths(),V=!1,W=o.padding();v=o.width()+2*W,b=o.height()+2*W,l&&u.translate(-(Y=l).x1,-Y.y1);for(var te=o.pstyle("background-image"),ne=te.value,se=new Array(ne.length),Ee=new Array(ne.length),Ce=0,ae=0;ae<ne.length;ae++){var be=ne[ae],de=se[ae]=null!=be&&"none"!==be;if(de){var Ae=o.cy().style().getIndexedStyle(o,"background-image-crossorigin","value",ae);Ce++,Ee[ae]=g.getCachedImage(be,Ae,function(){y.backgroundTimestamp=Date.now(),o.emitAndNotify("background")})}}var Me=o.pstyle("background-blacken").value,pe=o.pstyle("border-width").pfValue,Le=o.pstyle("background-opacity").value*_,Se=o.pstyle("border-color").value,qe=o.pstyle("border-style").value,Be=o.pstyle("border-opacity").value*_;u.lineJoin="miter";var je=function(){var zt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le;g.eleFillStyle(u,o,zt)},Ke=function(){var zt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be;g.colorStrokeStyle(u,Se[0],Se[1],Se[2],zt)},tt=o.pstyle("shape").strValue,at=o.pstyle("shape-polygon-points").pfValue;if(k){u.translate(x.x,x.y);var et=g.nodePathCache=g.nodePathCache||[],Je=qd("polygon"===tt?tt+","+at.join(","):tt,""+b,""+v),wt=et[Je];null!=wt?(V=!0,D.pathCache=O=wt):(O=new Path2D,et[Je]=D.pathCache=O)}var xt=function(){if(!V){var zt=x;k&&(zt={x:0,y:0}),g.nodeShapes[g.getNodeShape(o)].draw(O||u,zt.x,zt.y,v,b)}k?u.fill(O):u.fill()},yt=function(){for(var zt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,nn=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Rn=y.backgrounding,Dn=0,cn=0;cn<Ee.length;cn++){var It=o.cy().style().getIndexedStyle(o,"background-image-containment","value",cn);nn&&"over"===It||!nn&&"inside"===It?Dn++:se[cn]&&Ee[cn].complete&&!Ee[cn].error&&(Dn++,g.drawInscribedImage(u,Ee[cn],o,cn,zt))}y.backgrounding=Dn!==Ce,Rn!==y.backgrounding&&o.updateStyle(!1)},mt=function(){var zt=arguments.length>0&&void 0!==arguments[0]&&arguments[0],nn=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_;g.hasPie(o)&&(g.drawPie(u,o,nn),zt&&(k||g.nodeShapes[g.getNodeShape(o)].draw(u,x.x,x.y,v,b)))},Xe=function(){var zt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,nn=(Me>0?Me:-Me)*zt,Rn=Me>0?0:255;0!==Me&&(g.colorFillStyle(u,Rn,Rn,Rn,nn),k?u.fill(O):u.fill())},Dt=function(){if(pe>0){if(u.lineWidth=pe,u.lineCap="butt",u.setLineDash)switch(qe){case"dotted":u.setLineDash([1,1]);break;case"dashed":u.setLineDash([4,2]);break;case"solid":case"double":u.setLineDash([])}if(k?u.stroke(O):u.stroke(),"double"===qe){u.lineWidth=pe/3;var zt=u.globalCompositeOperation;u.globalCompositeOperation="destination-out",k?u.stroke(O):u.stroke(),u.globalCompositeOperation=zt}u.setLineDash&&u.setLineDash([])}},Ct=function(){h&&g.drawNodeOverlay(u,o,x,v,b)},Pt=function(){h&&g.drawNodeUnderlay(u,o,x,v,b)},Bt=function(){g.drawElementText(u,o,null,d)},vn="yes"===o.pstyle("ghost").value;if(vn){var Cn=o.pstyle("ghost-offset-x").pfValue,Vt=o.pstyle("ghost-offset-y").pfValue,Lt=o.pstyle("ghost-opacity").value,ln=Lt*_;u.translate(Cn,Vt),je(Lt*Le),xt(),yt(ln,!0),Ke(Lt*Be),Dt(),mt(0!==Me||0!==pe),yt(ln,!1),Xe(ln),u.translate(-Cn,-Vt)}k&&u.translate(-x.x,-x.y),Pt(),k&&u.translate(x.x,x.y),je(),xt(),yt(_,!0),Ke(),Dt(),mt(0!==Me||0!==pe),yt(_,!1),Xe(),k&&u.translate(-x.x,-x.y),Bt(),Ct(),l&&u.translate(Y.x1,Y.y1)}}},fd=function(o){if(!["overlay","underlay"].includes(o))throw new Error("Invalid state");return function(l,d,h,p,g){if(d.visible()){var b=d.pstyle("".concat(o,"-padding")).pfValue,y=d.pstyle("".concat(o,"-opacity")).value,D=d.pstyle("".concat(o,"-color")).value,x=d.pstyle("".concat(o,"-shape")).value;if(y>0){if(h=h||d.position(),null==p||null==g){var _=d.padding();p=d.width()+2*_,g=d.height()+2*_}this.colorFillStyle(l,D[0],D[1],D[2],y),this.nodeShapes[x].draw(l,h.x,h.y,p+2*b,g+2*b),l.fill()}}}};Ea.drawNodeOverlay=fd("overlay"),Ea.drawNodeUnderlay=fd("underlay"),Ea.hasPie=function(u){return(u=u[0])._private.hasPie},Ea.drawPie=function(u,o,l,d){o=o[0],d=d||o.position();var h=o.cy().style(),p=o.pstyle("pie-size"),g=d.x,v=d.y,b=o.width(),y=o.height(),D=Math.min(b,y)/2,x=0;this.usePaths()&&(g=0,v=0),"%"===p.units?D*=p.pfValue:void 0!==p.pfValue&&(D=p.pfValue/2);for(var k=1;k<=h.pieBackgroundN;k++){var O=o.pstyle("pie-"+k+"-background-size").value,V=o.pstyle("pie-"+k+"-background-color").value,W=o.pstyle("pie-"+k+"-background-opacity").value*l,Y=O/100;Y+x>1&&(Y=1-x);var te=1.5*Math.PI+2*Math.PI*x,se=te+2*Math.PI*Y;0===O||x>=1||x+Y>1||(u.beginPath(),u.moveTo(g,v),u.arc(g,v,D,te,se),u.closePath(),this.colorFillStyle(u,V[0],V[1],V[2],W),u.fill(),x+=Y)}};for(var Ds={getPixelRatio:function(){var u=this.data.contexts[0];return null!=this.forcedPixelRatio?this.forcedPixelRatio:(window.devicePixelRatio||1)/(u.backingStorePixelRatio||u.webkitBackingStorePixelRatio||u.mozBackingStorePixelRatio||u.msBackingStorePixelRatio||u.oBackingStorePixelRatio||u.backingStorePixelRatio||1)},paintCache:function(u){for(var d,o=this.paintCaches=this.paintCaches||[],l=!0,h=0;h<o.length;h++)if((d=o[h]).context===u){l=!1;break}return l&&o.push(d={context:u}),d},createGradientStyleFor:function(u,o,l,d,h){var p,g=this.usePaths(),v=l.pstyle(o+"-gradient-stop-colors").value,b=l.pstyle(o+"-gradient-stop-positions").pfValue;if("radial-gradient"===d)if(l.isEdge()){var y=l.sourceEndpoint(),D=l.targetEndpoint(),x=l.midpoint(),_=Dr(y,x),k=Dr(D,x);p=u.createRadialGradient(x.x,x.y,0,x.x,x.y,Math.max(_,k))}else{var O=g?{x:0,y:0}:l.position(),V=l.paddedWidth(),W=l.paddedHeight();p=u.createRadialGradient(O.x,O.y,0,O.x,O.y,Math.max(V,W))}else if(l.isEdge()){var Y=l.sourceEndpoint(),te=l.targetEndpoint();p=u.createLinearGradient(Y.x,Y.y,te.x,te.y)}else{var ne=g?{x:0,y:0}:l.position(),Ce=l.paddedWidth()/2,ae=l.paddedHeight()/2;switch(l.pstyle("background-gradient-direction").value){case"to-bottom":p=u.createLinearGradient(ne.x,ne.y-ae,ne.x,ne.y+ae);break;case"to-top":p=u.createLinearGradient(ne.x,ne.y+ae,ne.x,ne.y-ae);break;case"to-left":p=u.createLinearGradient(ne.x+Ce,ne.y,ne.x-Ce,ne.y);break;case"to-right":p=u.createLinearGradient(ne.x-Ce,ne.y,ne.x+Ce,ne.y);break;case"to-bottom-right":case"to-right-bottom":p=u.createLinearGradient(ne.x-Ce,ne.y-ae,ne.x+Ce,ne.y+ae);break;case"to-top-right":case"to-right-top":p=u.createLinearGradient(ne.x-Ce,ne.y+ae,ne.x+Ce,ne.y-ae);break;case"to-bottom-left":case"to-left-bottom":p=u.createLinearGradient(ne.x+Ce,ne.y-ae,ne.x-Ce,ne.y+ae);break;case"to-top-left":case"to-left-top":p=u.createLinearGradient(ne.x+Ce,ne.y+ae,ne.x-Ce,ne.y-ae)}}if(!p)return null;for(var de=b.length===v.length,Ae=v.length,Me=0;Me<Ae;Me++)p.addColorStop(de?b[Me]:Me/(Ae-1),"rgba("+v[Me][0]+","+v[Me][1]+","+v[Me][2]+","+h+")");return p},gradientFillStyle:function(u,o,l,d){var h=this.createGradientStyleFor(u,"background",o,l,d);if(!h)return null;u.fillStyle=h},colorFillStyle:function(u,o,l,d,h){u.fillStyle="rgba("+o+","+l+","+d+","+h+")"},eleFillStyle:function(u,o,l){var d=o.pstyle("background-fill").value;if("linear-gradient"===d||"radial-gradient"===d)this.gradientFillStyle(u,o,d,l);else{var h=o.pstyle("background-color").value;this.colorFillStyle(u,h[0],h[1],h[2],l)}},gradientStrokeStyle:function(u,o,l,d){var h=this.createGradientStyleFor(u,"line",o,l,d);if(!h)return null;u.strokeStyle=h},colorStrokeStyle:function(u,o,l,d,h){u.strokeStyle="rgba("+o+","+l+","+d+","+h+")"},eleStrokeStyle:function(u,o,l){var d=o.pstyle("line-fill").value;if("linear-gradient"===d||"radial-gradient"===d)this.gradientStrokeStyle(u,o,d,l);else{var h=o.pstyle("line-color").value;this.colorStrokeStyle(u,h[0],h[1],h[2],l)}},matchCanvasSize:function(u){var o=this,l=o.data,d=o.findContainerClientCoords(),h=d[2],p=d[3],g=o.getPixelRatio();(u===o.data.bufferCanvases[o.MOTIONBLUR_BUFFER_NODE]||u===o.data.bufferCanvases[o.MOTIONBLUR_BUFFER_DRAG])&&(g=o.motionBlurPxRatio);var D,b=h*g,y=p*g;if(b!==o.canvasWidth||y!==o.canvasHeight){o.fontCaches=null;var x=l.canvasContainer;x.style.width=h+"px",x.style.height=p+"px";for(var _=0;_<o.CANVAS_LAYERS;_++)(D=l.canvases[_]).width=b,D.height=y,D.style.width=h+"px",D.style.height=p+"px";for(_=0;_<o.BUFFER_COUNT;_++)(D=l.bufferCanvases[_]).width=b,D.height=y,D.style.width=h+"px",D.style.height=p+"px";o.textureMult=1,g<=1&&(D=l.bufferCanvases[o.TEXTURE_BUFFER],o.textureMult=2,D.width=b*o.textureMult,D.height=y*o.textureMult),o.canvasWidth=b,o.canvasHeight=y}},renderTo:function(u,o,l,d){this.render({forcedContext:u,forcedZoom:o,forcedPan:l,drawAllLayers:!0,forcedPxRatio:d})},render:function(u){var o=(u=u||Ac()).forcedContext,l=u.drawAllLayers,d=u.drawOnlyNodeLayer,h=u.forcedZoom,p=u.forcedPan,g=this,v=void 0===u.forcedPxRatio?this.getPixelRatio():u.forcedPxRatio,b=g.cy,y=g.data,D=y.canvasNeedsRedraw,x=g.textureOnViewport&&!o&&(g.pinching||g.hoverData.dragging||g.swipePanning||g.data.wheelZooming),_=void 0!==u.motionBlur?u.motionBlur:g.motionBlur,k=g.motionBlurPxRatio,O=b.hasCompoundNodes(),V=g.hoverData.draggingEles,Y=_=_&&!o&&g.motionBlurEnabled&&!(g.hoverData.selecting||g.touchData.selecting);o||(g.prevPxRatio!==v&&(g.invalidateContainerClientCoordsCache(),g.matchCanvasSize(g.container),g.redrawHint("eles",!0),g.redrawHint("drag",!0)),g.prevPxRatio=v),!o&&g.motionBlurTimeout&&clearTimeout(g.motionBlurTimeout),_&&(null==g.mbFrames&&(g.mbFrames=0),g.mbFrames++,g.mbFrames<3&&(Y=!1),g.mbFrames>g.minMbLowQualFrames&&(g.motionBlurPxRatio=g.mbPxRBlurry)),g.clearingMotionBlur&&(g.motionBlurPxRatio=1),g.textureDrawLastFrame&&!x&&(D[g.NODE]=!0,D[g.SELECT_BOX]=!0);var te=b.style(),ne=b.zoom(),se=void 0!==h?h:ne,Ee=b.pan(),Ce={x:Ee.x,y:Ee.y},ae={zoom:ne,pan:{x:Ee.x,y:Ee.y}},be=g.prevViewport;!(void 0===be||ae.zoom!==be.zoom||ae.pan.x!==be.pan.x||ae.pan.y!==be.pan.y)&&!(V&&!O)&&(g.motionBlurPxRatio=1),p&&(Ce=p),se*=v,Ce.x*=v,Ce.y*=v;var Ae=g.getCachedZSortedEles();function Me(Vt,Lt,ln,Qt,zt){var nn=Vt.globalCompositeOperation;Vt.globalCompositeOperation="destination-out",g.colorFillStyle(Vt,255,255,255,g.motionBlurTransparency),Vt.fillRect(Lt,ln,Qt,zt),Vt.globalCompositeOperation=nn}function pe(Vt,Lt){var ln,Qt,zt,nn;g.clearingMotionBlur||Vt!==y.bufferContexts[g.MOTIONBLUR_BUFFER_NODE]&&Vt!==y.bufferContexts[g.MOTIONBLUR_BUFFER_DRAG]?(ln=Ce,Qt=se,zt=g.canvasWidth,nn=g.canvasHeight):(ln={x:Ee.x*k,y:Ee.y*k},Qt=ne*k,zt=g.canvasWidth*k,nn=g.canvasHeight*k),Vt.setTransform(1,0,0,1,0,0),"motionBlur"===Lt?Me(Vt,0,0,zt,nn):!o&&(void 0===Lt||Lt)&&Vt.clearRect(0,0,zt,nn),l||(Vt.translate(ln.x,ln.y),Vt.scale(Qt,Qt)),p&&Vt.translate(p.x,p.y),h&&Vt.scale(h,h)}if(x||(g.textureDrawLastFrame=!1),x){if(g.textureDrawLastFrame=!0,!g.textureCache){g.textureCache={},g.textureCache.bb=b.mutableElements().boundingBox(),g.textureCache.texture=g.data.bufferCanvases[g.TEXTURE_BUFFER];var Le=g.data.bufferContexts[g.TEXTURE_BUFFER];Le.setTransform(1,0,0,1,0,0),Le.clearRect(0,0,g.canvasWidth*g.textureMult,g.canvasHeight*g.textureMult),g.render({forcedContext:Le,drawOnlyNodeLayer:!0,forcedPxRatio:v*g.textureMult}),(ae=g.textureCache.viewport={zoom:b.zoom(),pan:b.pan(),width:g.canvasWidth,height:g.canvasHeight}).mpan={x:(0-ae.pan.x)/ae.zoom,y:(0-ae.pan.y)/ae.zoom}}D[g.DRAG]=!1,D[g.NODE]=!1;var qe=g.textureCache.texture;ae=g.textureCache.viewport,(Se=y.contexts[g.NODE]).setTransform(1,0,0,1,0,0),_?Me(Se,0,0,ae.width,ae.height):Se.clearRect(0,0,ae.width,ae.height);var Be=te.core("outside-texture-bg-color").value,je=te.core("outside-texture-bg-opacity").value;g.colorFillStyle(Se,Be[0],Be[1],Be[2],je),Se.fillRect(0,0,ae.width,ae.height),ne=b.zoom(),pe(Se,!1),Se.clearRect(ae.mpan.x,ae.mpan.y,ae.width/ae.zoom/v,ae.height/ae.zoom/v),Se.drawImage(qe,ae.mpan.x,ae.mpan.y,ae.width/ae.zoom/v,ae.height/ae.zoom/v)}else g.textureOnViewport&&!o&&(g.textureCache=null);var Ke=b.extent(),tt=g.pinching||g.hoverData.dragging||g.swipePanning||g.data.wheelZooming||g.hoverData.draggingEles||g.cy.animated(),at=g.hideEdgesOnViewport&&tt,et=[];if(et[g.NODE]=!D[g.NODE]&&_&&!g.clearedForMotionBlur[g.NODE]||g.clearingMotionBlur,et[g.NODE]&&(g.clearedForMotionBlur[g.NODE]=!0),et[g.DRAG]=!D[g.DRAG]&&_&&!g.clearedForMotionBlur[g.DRAG]||g.clearingMotionBlur,et[g.DRAG]&&(g.clearedForMotionBlur[g.DRAG]=!0),D[g.NODE]||l||d||et[g.NODE]){var Je=_&&!et[g.NODE]&&1!==k;pe(Se=o||(Je?g.data.bufferContexts[g.MOTIONBLUR_BUFFER_NODE]:y.contexts[g.NODE]),_&&!Je?"motionBlur":void 0),at?g.drawCachedNodes(Se,Ae.nondrag,v,Ke):g.drawLayeredElements(Se,Ae.nondrag,v,Ke),g.debug&&g.drawDebugPoints(Se,Ae.nondrag),!l&&!_&&(D[g.NODE]=!1)}if(!d&&(D[g.DRAG]||l||et[g.DRAG])&&(Je=_&&!et[g.DRAG]&&1!==k,pe(Se=o||(Je?g.data.bufferContexts[g.MOTIONBLUR_BUFFER_DRAG]:y.contexts[g.DRAG]),_&&!Je?"motionBlur":void 0),at?g.drawCachedNodes(Se,Ae.drag,v,Ke):g.drawCachedElements(Se,Ae.drag,v,Ke),g.debug&&g.drawDebugPoints(Se,Ae.drag),!l&&!_&&(D[g.DRAG]=!1)),g.showFps||!d&&D[g.SELECT_BOX]&&!l){var Se;if(pe(Se=o||y.contexts[g.SELECT_BOX]),1==g.selection[4]&&(g.hoverData.selecting||g.touchData.selecting)){ne=g.cy.zoom();var xt=te.core("selection-box-border-width").value/ne;Se.lineWidth=xt,Se.fillStyle="rgba("+te.core("selection-box-color").value[0]+","+te.core("selection-box-color").value[1]+","+te.core("selection-box-color").value[2]+","+te.core("selection-box-opacity").value+")",Se.fillRect(g.selection[0],g.selection[1],g.selection[2]-g.selection[0],g.selection[3]-g.selection[1]),xt>0&&(Se.strokeStyle="rgba("+te.core("selection-box-border-color").value[0]+","+te.core("selection-box-border-color").value[1]+","+te.core("selection-box-border-color").value[2]+","+te.core("selection-box-opacity").value+")",Se.strokeRect(g.selection[0],g.selection[1],g.selection[2]-g.selection[0],g.selection[3]-g.selection[1]))}if(y.bgActivePosistion&&!g.hoverData.selecting){ne=g.cy.zoom();var yt=y.bgActivePosistion;Se.fillStyle="rgba("+te.core("active-bg-color").value[0]+","+te.core("active-bg-color").value[1]+","+te.core("active-bg-color").value[2]+","+te.core("active-bg-opacity").value+")",Se.beginPath(),Se.arc(yt.x,yt.y,te.core("active-bg-size").pfValue/ne,0,2*Math.PI),Se.fill()}var mt=g.lastRedrawTime;if(g.showFps&&mt){mt=Math.round(mt);var Xe=Math.round(1e3/mt);Se.setTransform(1,0,0,1,0,0),Se.fillStyle="rgba(255, 0, 0, 0.75)",Se.strokeStyle="rgba(255, 0, 0, 0.75)",Se.lineWidth=1,Se.fillText("1 frame = "+mt+" ms = "+Xe+" fps",0,20),Se.strokeRect(0,30,250,20),Se.fillRect(0,30,250*Math.min(Xe/60,1),20)}l||(D[g.SELECT_BOX]=!1)}if(_&&1!==k){var Bt=y.contexts[g.DRAG],vn=g.data.bufferCanvases[g.MOTIONBLUR_BUFFER_DRAG],Cn=function(Lt,ln,Qt){Lt.setTransform(1,0,0,1,0,0),Qt||!Y?Lt.clearRect(0,0,g.canvasWidth,g.canvasHeight):Me(Lt,0,0,g.canvasWidth,g.canvasHeight),Lt.drawImage(ln,0,0,g.canvasWidth*k,g.canvasHeight*k,0,0,g.canvasWidth,g.canvasHeight)};(D[g.NODE]||et[g.NODE])&&(Cn(y.contexts[g.NODE],g.data.bufferCanvases[g.MOTIONBLUR_BUFFER_NODE],et[g.NODE]),D[g.NODE]=!1),(D[g.DRAG]||et[g.DRAG])&&(Cn(Bt,vn,et[g.DRAG]),D[g.DRAG]=!1)}g.prevViewport=ae,g.clearingMotionBlur&&(g.clearingMotionBlur=!1,g.motionBlurCleared=!0,g.motionBlur=!0),_&&(g.motionBlurTimeout=setTimeout(function(){g.motionBlurTimeout=null,g.clearedForMotionBlur[g.NODE]=!1,g.clearedForMotionBlur[g.DRAG]=!1,g.motionBlur=!1,g.clearingMotionBlur=!x,g.mbFrames=0,D[g.NODE]=!0,D[g.DRAG]=!0,g.redraw()},100)),o||b.emit("render")}},Wo={drawPolygonPath:function(u,o,l,d,h,p){var g=d/2,v=h/2;u.beginPath&&u.beginPath(),u.moveTo(o+g*p[0],l+v*p[1]);for(var b=1;b<p.length/2;b++)u.lineTo(o+g*p[2*b],l+v*p[2*b+1]);u.closePath()},drawRoundPolygonPath:function(u,o,l,d,h,p){var g=d/2,v=h/2,b=an(d,h);u.beginPath&&u.beginPath();for(var y=0;y<p.length/4;y++){var x,D;D=0===y?p.length-2:4*y-2,x=4*y+2;var _=o+g*p[4*y],k=l+v*p[4*y+1],V=b/Math.tan(Math.acos(-p[D]*p[x]-p[D+1]*p[x+1])/2),W=_-V*p[D],Y=k-V*p[D+1],te=_+V*p[x],ne=k+V*p[x+1];0===y?u.moveTo(W,Y):u.lineTo(W,Y),u.arcTo(_,k,te,ne,b)}u.closePath()},drawRoundRectanglePath:function(u,o,l,d,h){var p=d/2,g=h/2,v=Nc(d,h);u.beginPath&&u.beginPath(),u.moveTo(o,l-g),u.arcTo(o+p,l-g,o+p,l,v),u.arcTo(o+p,l+g,o,l+g,v),u.arcTo(o-p,l+g,o-p,l,v),u.arcTo(o-p,l-g,o,l-g,v),u.lineTo(o,l-g),u.closePath()},drawBottomRoundRectanglePath:function(u,o,l,d,h){var p=d/2,g=h/2,v=Nc(d,h);u.beginPath&&u.beginPath(),u.moveTo(o,l-g),u.lineTo(o+p,l-g),u.lineTo(o+p,l),u.arcTo(o+p,l+g,o,l+g,v),u.arcTo(o-p,l+g,o-p,l,v),u.lineTo(o-p,l-g),u.lineTo(o,l-g),u.closePath()},drawCutRectanglePath:function(u,o,l,d,h){var p=d/2,g=h/2;u.beginPath&&u.beginPath(),u.moveTo(o-p+8,l-g),u.lineTo(o+p-8,l-g),u.lineTo(o+p,l-g+8),u.lineTo(o+p,l+g-8),u.lineTo(o+p-8,l+g),u.lineTo(o-p+8,l+g),u.lineTo(o-p,l+g-8),u.lineTo(o-p,l-g+8),u.closePath()},drawBarrelPath:function(u,o,l,d,h){var p=d/2,g=h/2,v=o-p,b=o+p,y=l-g,D=l+g,x=Su(d,h),_=x.widthOffset,k=x.heightOffset,O=x.ctrlPtOffsetPct*_;u.beginPath&&u.beginPath(),u.moveTo(v,y+k),u.lineTo(v,D-k),u.quadraticCurveTo(v+O,D,v+_,D),u.lineTo(b-_,D),u.quadraticCurveTo(b-O,D,b,D-k),u.lineTo(b,y+k),u.quadraticCurveTo(b-O,y,b-_,y),u.lineTo(v+_,y),u.quadraticCurveTo(v+O,y,v,y+k),u.closePath()}},Ah=Math.sin(0),Xu=Math.cos(0),Jp={},Th={},Zv=Math.PI/40,Ku=0*Math.PI;Ku<2*Math.PI;Ku+=Zv)Jp[Ku]=Math.sin(Ku),Th[Ku]=Math.cos(Ku);Wo.drawEllipsePath=function(u,o,l,d,h){if(u.beginPath&&u.beginPath(),u.ellipse)u.ellipse(o,l,d/2,h/2,0,0,2*Math.PI);else for(var p,g,v=d/2,b=h/2,y=0*Math.PI;y<2*Math.PI;y+=Zv)p=o-v*Jp[y]*Ah+v*Th[y]*Xu,g=l+b*Th[y]*Ah+b*Jp[y]*Xu,0===y?u.moveTo(p,g):u.lineTo(p,g);u.closePath()};var pd={};function Zp(u){var o=u.indexOf(",");return u.substr(o+1)}function gd(u,o,l){var d=function(){return o.toDataURL(l,u.quality)};switch(u.output){case"blob-promise":return new jc(function(h,p){try{o.toBlob(function(g){null!=g?h(g):p(new Error("`canvas.toBlob()` sent a null value in its callback"))},l,u.quality)}catch(g){p(g)}});case"blob":return function ey(u,o){for(var l=atob(u),d=new ArrayBuffer(l.length),h=new Uint8Array(d),p=0;p<l.length;p++)h[p]=l.charCodeAt(p);return new Blob([d],{type:o})}(Zp(d()),l);case"base64":return Zp(d());default:return d()}}pd.createBuffer=function(u,o){var l=document.createElement("canvas");return l.width=u,l.height=o,[l,l.getContext("2d")]},pd.bufferCanvasImage=function(u){var o=this.cy,d=o.mutableElements().boundingBox(),h=this.findContainerClientCoords(),p=u.full?Math.ceil(d.w):h[2],g=u.full?Math.ceil(d.h):h[3],v=fe(u.maxWidth)||fe(u.maxHeight),b=this.getPixelRatio(),y=1;if(void 0!==u.scale)p*=u.scale,g*=u.scale,y=u.scale;else if(v){var D=1/0,x=1/0;fe(u.maxWidth)&&(D=y*u.maxWidth/p),fe(u.maxHeight)&&(x=y*u.maxHeight/g),p*=y=Math.min(D,x),g*=y}v||(p*=b,g*=b,y*=b);var _=document.createElement("canvas");_.width=p,_.height=g,_.style.width=p+"px",_.style.height=g+"px";var k=_.getContext("2d");if(p>0&&g>0){k.clearRect(0,0,p,g),k.globalCompositeOperation="source-over";var O=this.getCachedZSortedEles();if(u.full)k.translate(-d.x1*y,-d.y1*y),k.scale(y,y),this.drawElements(k,O),k.scale(1/y,1/y),k.translate(d.x1*y,d.y1*y);else{var V=o.pan(),W={x:V.x*y,y:V.y*y};y*=o.zoom(),k.translate(W.x,W.y),k.scale(y,y),this.drawElements(k,O),k.scale(1/y,1/y),k.translate(-W.x,-W.y)}u.bg&&(k.globalCompositeOperation="destination-over",k.fillStyle=u.bg,k.rect(0,0,p,g),k.fill())}return _},pd.png=function(u){return gd(u,this.bufferCanvasImage(u),"image/png")},pd.jpg=function(u){return gd(u,this.bufferCanvasImage(u),"image/jpeg")};var eu=ty,rr=ty.prototype;function ty(u){var o=this;o.data={canvases:new Array(rr.CANVAS_LAYERS),contexts:new Array(rr.CANVAS_LAYERS),canvasNeedsRedraw:new Array(rr.CANVAS_LAYERS),bufferCanvases:new Array(rr.BUFFER_COUNT),bufferContexts:new Array(rr.CANVAS_LAYERS)};var l="-webkit-tap-highlight-color",d="rgba(0,0,0,0)";o.data.canvasContainer=document.createElement("div");var h=o.data.canvasContainer.style;o.data.canvasContainer.style[l]=d,h.position="relative",h.zIndex="0",h.overflow="hidden";var p=u.cy.container();p.appendChild(o.data.canvasContainer),p.style[l]=d;var g={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};Q&&Q.userAgent.match(/msie|trident|edge/i)&&(g["-ms-touch-action"]="none",g["touch-action"]="none");for(var v=0;v<rr.CANVAS_LAYERS;v++){var b=o.data.canvases[v]=document.createElement("canvas");o.data.contexts[v]=b.getContext("2d"),Object.keys(g).forEach(function(mt){b.style[mt]=g[mt]}),b.style.position="absolute",b.setAttribute("data-id","layer"+v),b.style.zIndex=String(rr.CANVAS_LAYERS-v),o.data.canvasContainer.appendChild(b),o.data.canvasNeedsRedraw[v]=!1}for(o.data.topCanvas=o.data.canvases[0],o.data.canvases[rr.NODE].setAttribute("data-id","layer"+rr.NODE+"-node"),o.data.canvases[rr.SELECT_BOX].setAttribute("data-id","layer"+rr.SELECT_BOX+"-selectbox"),o.data.canvases[rr.DRAG].setAttribute("data-id","layer"+rr.DRAG+"-drag"),v=0;v<rr.BUFFER_COUNT;v++)o.data.bufferCanvases[v]=document.createElement("canvas"),o.data.bufferContexts[v]=o.data.bufferCanvases[v].getContext("2d"),o.data.bufferCanvases[v].style.position="absolute",o.data.bufferCanvases[v].setAttribute("data-id","buffer"+v),o.data.bufferCanvases[v].style.zIndex=String(-v-1),o.data.bufferCanvases[v].style.visibility="hidden";o.pathsEnabled=!0;var y=Er(),x=function(Xe){return{x:-Xe.w/2,y:-Xe.h/2}},Ee=function(Xe){return Xe.boundingBox(),Xe[0]._private.bodyBounds},Ce=function(Xe){return Xe.boundingBox(),Xe[0]._private.labelBounds.main||y},ae=function(Xe){return Xe.boundingBox(),Xe[0]._private.labelBounds.source||y},be=function(Xe){return Xe.boundingBox(),Xe[0]._private.labelBounds.target||y},de=function(Xe,Dt){return Dt},Me=function(Xe,Dt,Ct){var Pt=Xe?Xe+"-":"";return{x:Dt.x+Ct.pstyle(Pt+"text-margin-x").pfValue,y:Dt.y+Ct.pstyle(Pt+"text-margin-y").pfValue}},pe=function(Xe,Dt,Ct){var Pt=Xe[0]._private.rscratch;return{x:Pt[Dt],y:Pt[Ct]}},at=o.data.eleTxrCache=new Zl(o,{getKey:function(Xe){return Xe[0]._private.nodeKey},doesEleInvalidateKey:function(Xe){var Dt=Xe[0]._private;return!(Dt.oldBackgroundTimestamp===Dt.backgroundTimestamp)},drawElement:function(Xe,Dt,Ct,Pt,Bt){return o.drawElement(Xe,Dt,Ct,!1,!1,Bt)},getBoundingBox:Ee,getRotationPoint:function(Xe){return function(Xe){return{x:(Xe.x1+Xe.x2)/2,y:(Xe.y1+Xe.y2)/2}}(Ee(Xe))},getRotationOffset:function(Xe){return x(Ee(Xe))},allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),et=o.data.lblTxrCache=new Zl(o,{getKey:function(Xe){return Xe[0]._private.labelStyleKey},drawElement:function(Xe,Dt,Ct,Pt,Bt){return o.drawElementText(Xe,Dt,Ct,Pt,"main",Bt)},getBoundingBox:Ce,getRotationPoint:function(Xe){return Me("",pe(Xe,"labelX","labelY"),Xe)},getRotationOffset:function(Xe){var Dt=Ce(Xe),Ct=x(Ce(Xe));if(Xe.isNode()){switch(Xe.pstyle("text-halign").value){case"left":Ct.x=-Dt.w;break;case"right":Ct.x=0}switch(Xe.pstyle("text-valign").value){case"top":Ct.y=-Dt.h;break;case"bottom":Ct.y=0}}return Ct},isVisible:de}),Je=o.data.slbTxrCache=new Zl(o,{getKey:function(Xe){return Xe[0]._private.sourceLabelStyleKey},drawElement:function(Xe,Dt,Ct,Pt,Bt){return o.drawElementText(Xe,Dt,Ct,Pt,"source",Bt)},getBoundingBox:ae,getRotationPoint:function(Xe){return Me("source",pe(Xe,"sourceLabelX","sourceLabelY"),Xe)},getRotationOffset:function(Xe){return x(ae(Xe))},isVisible:de}),wt=o.data.tlbTxrCache=new Zl(o,{getKey:function(Xe){return Xe[0]._private.targetLabelStyleKey},drawElement:function(Xe,Dt,Ct,Pt,Bt){return o.drawElementText(Xe,Dt,Ct,Pt,"target",Bt)},getBoundingBox:be,getRotationPoint:function(Xe){return Me("target",pe(Xe,"targetLabelX","targetLabelY"),Xe)},getRotationOffset:function(Xe){return x(be(Xe))},isVisible:de}),xt=o.data.lyrTxrCache=new Gv(o);o.onUpdateEleCalcs(function(Xe,Dt){at.invalidateElements(Dt),et.invalidateElements(Dt),Je.invalidateElements(Dt),wt.invalidateElements(Dt),xt.invalidateElements(Dt);for(var Ct=0;Ct<Dt.length;Ct++){var Pt=Dt[Ct]._private;Pt.oldBackgroundTimestamp=Pt.backgroundTimestamp}});var yt=function(Xe){for(var Dt=0;Dt<Xe.length;Dt++)xt.enqueueElementRefinement(Xe[Dt].ele)};at.onDequeue(yt),et.onDequeue(yt),Je.onDequeue(yt),wt.onDequeue(yt)}rr.CANVAS_LAYERS=3,rr.SELECT_BOX=0,rr.DRAG=1,rr.NODE=2,rr.BUFFER_COUNT=3,rr.TEXTURE_BUFFER=0,rr.MOTIONBLUR_BUFFER_NODE=1,rr.MOTIONBLUR_BUFFER_DRAG=2,rr.redrawHint=function(u,o){var l=this;switch(u){case"eles":l.data.canvasNeedsRedraw[rr.NODE]=o;break;case"drag":l.data.canvasNeedsRedraw[rr.DRAG]=o;break;case"select":l.data.canvasNeedsRedraw[rr.SELECT_BOX]=o}};var Z1=typeof Path2D<"u";rr.path2dEnabled=function(u){if(void 0===u)return this.pathsEnabled;this.pathsEnabled=!!u},rr.usePaths=function(){return Z1&&this.pathsEnabled},rr.setImgSmoothing=function(u,o){null!=u.imageSmoothingEnabled?u.imageSmoothingEnabled=o:(u.webkitImageSmoothingEnabled=o,u.mozImageSmoothingEnabled=o,u.msImageSmoothingEnabled=o)},rr.getImgSmoothing=function(u){return null!=u.imageSmoothingEnabled?u.imageSmoothingEnabled:u.webkitImageSmoothingEnabled||u.mozImageSmoothingEnabled||u.msImageSmoothingEnabled},rr.makeOffscreenCanvas=function(u,o){var l;return"undefined"!==(typeof OffscreenCanvas>"u"?"undefined":ee(OffscreenCanvas))?l=new OffscreenCanvas(u,o):((l=document.createElement("canvas")).width=u,l.height=o),l},[Sh,Gi,$o,Mh,xa,Ea,Ds,Wo,pd,{nodeShapeImpl:function(u,o,l,d,h,p,g){switch(u){case"ellipse":return this.drawEllipsePath(o,l,d,h,p);case"polygon":return this.drawPolygonPath(o,l,d,h,p,g);case"round-polygon":return this.drawRoundPolygonPath(o,l,d,h,p,g);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(o,l,d,h,p);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(o,l,d,h,p);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(o,l,d,h,p);case"barrel":return this.drawBarrelPath(o,l,d,h,p)}}}].forEach(function(u){Yt(rr,u)});var eg=[{type:"layout",extensions:Dh},{type:"renderer",extensions:[{name:"null",impl:Op},{name:"base",impl:Fp},{name:"canvas",impl:eu}]}],ny={},tg={};function md(u,o,l){var d=l,h=function(be){tr("Can not register `"+o+"` for `"+u+"` since `"+be+"` already exists in the prototype and can not be overridden")};if("core"===u){if(ju.prototype[o])return h(o);ju.prototype[o]=l}else if("collection"===u){if(pi.prototype[o])return h(o);pi.prototype[o]=l}else if("layout"===u){for(var p=function(be){this.options=be,l.call(this,be),Te(this._private)||(this._private={}),this._private.cy=be.cy,this._private.listeners=[],this.createEmitter()},g=p.prototype=Object.create(l.prototype),v=[],b=0;b<v.length;b++){var y=v[b];g[y]=g[y]||function(){return this}}g.start&&!g.run?g.run=function(){return this.start(),this}:!g.start&&g.run&&(g.start=function(){return this.run(),this});var D=l.prototype.stop;g.stop=function(){var ae=this.options;if(ae&&ae.animate){var be=this.animations;if(be)for(var de=0;de<be.length;de++)be[de].stop()}return D?D.call(this):this.emit("layoutstop"),this},g.destroy||(g.destroy=function(){return this}),g.cy=function(){return this._private.cy};var x=function(be){return be._private.cy},_={addEventFields:function(be,de){de.layout=be,de.cy=x(be),de.target=be},bubble:function(){return!0},parent:function(be){return x(be)}};Yt(g,{createEmitter:function(){return this._private.emitter=new Jc(_,this),this},emitter:function(){return this._private.emitter},on:function(be,de){return this.emitter().on(be,de),this},one:function(be,de){return this.emitter().one(be,de),this},once:function(be,de){return this.emitter().one(be,de),this},removeListener:function(be,de){return this.emitter().removeListener(be,de),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(be,de){return this.emitter().emit(be,de),this}}),fr.eventAliasesOn(g),d=p}else if("renderer"===u&&"null"!==o&&"base"!==o){var k=kh("renderer","base"),O=k.prototype,V=l,W=l.prototype,Y=function(){k.apply(this,arguments),V.apply(this,arguments)},te=Y.prototype;for(var ne in O){var se=O[ne];if(null!=W[ne])return h(ne);te[ne]=se}for(var Ce in W)te[Ce]=W[Ce];O.clientFunctions.forEach(function(ae){te[ae]=te[ae]||function(){gr("Renderer does not implement `renderer."+ae+"()` on its prototype")}}),d=Y}else if("__proto__"===u||"constructor"===u||"prototype"===u)return gr(u+" is an illegal type to be registered, possibly lead to prototype pollutions");return vu({map:ny,keys:[u,o],value:d})}function kh(u,o){return Va({map:ny,keys:[u,o]})}function ry(u,o,l,d,h){return vu({map:tg,keys:[u,o,l,d],value:h})}function iy(u,o,l,d){return Va({map:tg,keys:[u,o,l,d]})}var Oh=function(){return 2===arguments.length?kh.apply(null,arguments):3===arguments.length?md.apply(null,arguments):4===arguments.length?iy.apply(null,arguments):5===arguments.length?ry.apply(null,arguments):void gr("Invalid extension access syntax")};ju.prototype.extension=Oh,eg.forEach(function(u){u.extensions.forEach(function(o){md(u.type,o.name,o.impl)})});var ul=function u(){if(!(this instanceof u))return new u;this.length=0},tu=ul.prototype;tu.instanceString=function(){return"stylesheet"},tu.selector=function(u){return this[this.length++]={selector:u,properties:[]},this},tu.css=function(u,o){var l=this.length-1;if(me(u))this[l].properties.push({name:u,value:o});else if(Te(u))for(var d=u,h=Object.keys(d),p=0;p<h.length;p++){var g=h[p],v=d[g];if(null!=v){var b=Qn.properties[g]||Qn.properties[Jt(g)];null!=b&&this[l].properties.push({name:b.name,value:v})}}return this},tu.style=tu.css,tu.generateStyle=function(u){var o=new Qn(u);return this.appendToStyle(o)},tu.appendToStyle=function(u){for(var o=0;o<this.length;o++){var l=this[o],h=l.properties;u.selector(l.selector);for(var p=0;p<h.length;p++){var g=h[p];u.css(g.name,g.value)}}return u};var nu=function(o){return void 0===o&&(o={}),Te(o)?new ju(o):me(o)?Oh.apply(Oh,arguments):void 0};nu.use=function(u){var o=Array.prototype.slice.call(arguments,1);return o.unshift(nu),u.apply(null,o),this},nu.warnings=function(u){return qf(u)},nu.version="3.23.0",nu.stylesheet=nu.Stylesheet=ul,Oe.exports=nu},5203:(Oe,Re,G)=>{Oe.exports=G(8732)},8732:function(Oe,Re){var G,$,P;(function(){var I,S,N,C,T,M,H,F,X,ee,z,q,oe,K,le;N=Math.floor,ee=Math.min,S=function(J,Ie){return J<Ie?-1:J>Ie?1:0},X=function(J,Ie,ce,U,L){var B;if(null==ce&&(ce=0),null==L&&(L=S),ce<0)throw new Error("lo must be non-negative");for(null==U&&(U=J.length);ce<U;)L(Ie,J[B=N((ce+U)/2)])<0?U=B:ce=B+1;return[].splice.apply(J,[ce,ce-ce].concat(Ie)),Ie},M=function(J,Ie,ce){return null==ce&&(ce=S),J.push(Ie),K(J,0,J.length-1,ce)},T=function(J,Ie){var ce,U;return null==Ie&&(Ie=S),ce=J.pop(),J.length?(U=J[0],J[0]=ce,le(J,0,Ie)):U=ce,U},F=function(J,Ie,ce){var U;return null==ce&&(ce=S),U=J[0],J[0]=Ie,le(J,0,ce),U},H=function(J,Ie,ce){var U;return null==ce&&(ce=S),J.length&&ce(J[0],Ie)<0&&(Ie=(U=[J[0],Ie])[0],J[0]=U[1],le(J,0,ce)),Ie},C=function(J,Ie){var U,B,ue,ge,ie;for(null==Ie&&(Ie=S),ge=[],U=0,B=(ue=function(){ie=[];for(var we=0,Pe=N(J.length/2);0<=Pe?we<Pe:we>Pe;0<=Pe?we++:we--)ie.push(we);return ie}.apply(this).reverse()).length;U<B;U++)ge.push(le(J,ue[U],Ie));return ge},oe=function(J,Ie,ce){var U;if(null==ce&&(ce=S),-1!==(U=J.indexOf(Ie)))return K(J,0,U,ce),le(J,U,ce)},z=function(J,Ie,ce){var L,B,Q,ue;if(null==ce&&(ce=S),!(L=J.slice(0,Ie)).length)return L;for(C(L,ce),B=0,Q=(ue=J.slice(Ie)).length;B<Q;B++)H(L,ue[B],ce);return L.sort(ce).reverse()},q=function(J,Ie,ce){var U,B,Q,ue,ge,ie,we,Pe,me;if(null==ce&&(ce=S),10*Ie<=J.length){if(!(Q=J.slice(0,Ie).sort(ce)).length)return Q;for(B=Q[Q.length-1],ue=0,ie=(we=J.slice(Ie)).length;ue<ie;ue++)ce(U=we[ue],B)<0&&(X(Q,U,0,null,ce),Q.pop(),B=Q[Q.length-1]);return Q}for(C(J,ce),me=[],ge=0,Pe=ee(Ie,J.length);0<=Pe?ge<Pe:ge>Pe;0<=Pe?++ge:--ge)me.push(T(J,ce));return me},K=function(J,Ie,ce,U){var L,B,Q;for(null==U&&(U=S),L=J[ce];ce>Ie&&U(L,B=J[Q=ce-1>>1])<0;)J[ce]=B,ce=Q;return J[ce]=L},le=function(J,Ie,ce){var U,L,B,Q,ue;for(null==ce&&(ce=S),L=J.length,ue=Ie,B=J[Ie],U=2*Ie+1;U<L;)(Q=U+1)<L&&!(ce(J[U],J[Q])<0)&&(U=Q),J[Ie]=J[U],U=2*(Ie=U)+1;return J[Ie]=B,K(J,ue,Ie,ce)},I=function(){function J(Ie){this.cmp=Ie??S,this.nodes=[]}return J.push=M,J.pop=T,J.replace=F,J.pushpop=H,J.heapify=C,J.updateItem=oe,J.nlargest=z,J.nsmallest=q,J.prototype.push=function(Ie){return M(this.nodes,Ie,this.cmp)},J.prototype.pop=function(){return T(this.nodes,this.cmp)},J.prototype.peek=function(){return this.nodes[0]},J.prototype.contains=function(Ie){return-1!==this.nodes.indexOf(Ie)},J.prototype.replace=function(Ie){return F(this.nodes,Ie,this.cmp)},J.prototype.pushpop=function(Ie){return H(this.nodes,Ie,this.cmp)},J.prototype.heapify=function(){return C(this.nodes,this.cmp)},J.prototype.updateItem=function(Ie){return oe(this.nodes,Ie,this.cmp)},J.prototype.clear=function(){return this.nodes=[]},J.prototype.empty=function(){return 0===this.nodes.length},J.prototype.size=function(){return this.nodes.length},J.prototype.clone=function(){var Ie;return(Ie=new J).nodes=this.nodes.slice(0),Ie},J.prototype.toArray=function(){return this.nodes.slice(0)},J.prototype.insert=J.prototype.push,J.prototype.top=J.prototype.peek,J.prototype.front=J.prototype.peek,J.prototype.has=J.prototype.contains,J.prototype.copy=J.prototype.clone,J}(),$=[],void 0===(P="function"==typeof(G=function(){return I})?G.apply(Re,$):G)||(Oe.exports=P)}).call(this)},4918:(Oe,Re,G)=>{"use strict";var $=G(9344).default;const{isArray:P,isObject:I,isString:S}=G(2353),{asArray:N}=G(4249),{prependBase:C}=G(4920),T=G(3327),M=G(9522);function F(ee){throw new T("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:ee})}function X({context:ee,base:z}){if(!ee)return;const q=ee["@context"];if(S(q))ee["@context"]=C(z,q);else if(P(q))for(let oe=0;oe<q.length;++oe){const K=q[oe];S(K)?q[oe]=C(z,K):I(K)&&X({context:{"@context":K},base:z})}else if(I(q))for(const oe in q)X({context:q[oe],base:z})}Oe.exports=class{constructor({sharedCache:z}){this.perOpCache=new Map,this.sharedCache=z}resolve({activeCtx:z,context:q,documentLoader:oe,base:K,cycles:le=new Set}){var J=this;return $(function*(){q&&I(q)&&q["@context"]&&(q=q["@context"]),q=N(q);const Ie=[];for(const ce of q){if(S(ce)){let B=J._get(ce);B||(B=yield J._resolveRemoteContext({activeCtx:z,url:ce,documentLoader:oe,base:K,cycles:le})),P(B)?Ie.push(...B):Ie.push(B);continue}if(null===ce){Ie.push(new M({document:null}));continue}I(ce)||F(q);const U=JSON.stringify(ce);let L=J._get(U);L||(L=new M({document:ce}),J._cacheResolvedContext({key:U,resolved:L,tag:"static"})),Ie.push(L)}return Ie})()}_get(z){let q=this.perOpCache.get(z);if(!q){const oe=this.sharedCache.get(z);oe&&(q=oe.get("static"),q&&this.perOpCache.set(z,q))}return q}_cacheResolvedContext({key:z,resolved:q,tag:oe}){if(this.perOpCache.set(z,q),void 0!==oe){let K=this.sharedCache.get(z);K||(K=new Map,this.sharedCache.set(z,K)),K.set(oe,q)}return q}_resolveRemoteContext({activeCtx:z,url:q,documentLoader:oe,base:K,cycles:le}){var J=this;return $(function*(){q=C(K,q);const{context:Ie,remoteDoc:ce}=yield J._fetchContext({activeCtx:z,url:q,documentLoader:oe,cycles:le});X({context:Ie,base:K=ce.documentUrl||q});const U=yield J.resolve({activeCtx:z,context:Ie,documentLoader:oe,base:K,cycles:le});return J._cacheResolvedContext({key:q,resolved:U,tag:ce.tag}),U})()}_fetchContext({activeCtx:z,url:q,documentLoader:oe,cycles:K}){return $(function*(){if(K.size>10)throw new T("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===z.processingMode?"loading remote context failed":"context overflow",max:10});if(K.has(q))throw new T("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===z.processingMode?"recursive context inclusion":"context overflow",url:q});let le,J;K.add(q);try{J=yield oe(q),le=J.document||null,S(le)&&(le=JSON.parse(le))}catch(Ie){throw new T("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:q,cause:Ie})}if(!I(le))throw new T("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:q});return le="@context"in le?{"@context":le["@context"]}:{"@context":{}},J.contextUrl&&(P(le["@context"])||(le["@context"]=[le["@context"]]),le["@context"].push(J.contextUrl)),{context:le,remoteDoc:J}})()}}},3327:Oe=>{"use strict";Oe.exports=class extends Error{constructor(G="An unspecified JSON-LD error occurred.",$="jsonld.Error",P={}){super(G),this.name=$,this.message=G,this.details=P}}},779:Oe=>{"use strict";Oe.exports=Re=>{class G{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(G,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(G.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:G}),G.compact=function($,P){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):Re.compact($,P)},G.expand=function($){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):Re.expand($)},G.flatten=function($){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):Re.flatten($)},G}},3865:(Oe,Re,G)=>{"use strict";Oe.exports=G(4308).NQuads},2210:(Oe,Re,G)=>{"use strict";var $=G(9344).default;Oe.exports=class{constructor(){this._requests={}}wrapLoader(I){const S=this;return S._loader=I,function(){return S.add.apply(S,arguments)}}add(I){var S=this;return $(function*(){let N=S._requests[I];if(N)return Promise.resolve(N);N=S._requests[I]=S._loader(I);try{return yield N}finally{delete S._requests[I]}})()}}},9522:(Oe,Re,G)=>{"use strict";const $=G(5943);Oe.exports=class{constructor({document:S}){this.document=S,this.cache=new $({max:10})}getProcessed(S){return this.cache.get(S)}setProcessed(S,N){this.cache.set(S,N)}}},9857:(Oe,Re,G)=>{"use strict";var $=G(9344).default;const P=G(3327),{isArray:I,isObject:S,isString:N,isUndefined:C}=G(2353),{isList:T,isValue:M,isGraph:H,isSimpleGraph:F,isSubjectReference:X}=G(9094),{expandIri:ee,getContextValue:z,isKeyword:q,process:oe,processingMode:K}=G(2134),{removeBase:le,prependBase:J}=G(4920),{REGEX_KEYWORD:Ie,addValue:ce,asArray:U,compareShortestLeast:L}=G(4249),B={};function ue(ge,ie,we){if("@nest"!==ee(ge,ie,{vocab:!0},we))throw new P("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}Oe.exports=B,B.compact=function(){var ge=$(function*({activeCtx:ie,activeProperty:we=null,element:Pe,options:me={}}){if(I(Pe)){let ze=[];for(let Te=0;Te<Pe.length;++Te){const ve=yield B.compact({activeCtx:ie,activeProperty:we,element:Pe[Te],options:me});null!==ve&&ze.push(ve)}return me.compactArrays&&1===ze.length&&0===(z(ie,we,"@container")||[]).length&&(ze=ze[0]),ze}const We=z(ie,we,"@context");if(C(We)||(ie=yield oe({activeCtx:ie,localCtx:We,propagate:!0,overrideProtected:!0,options:me})),S(Pe)){if(me.link&&"@id"in Pe&&me.link.hasOwnProperty(Pe["@id"])){const Qe=me.link[Pe["@id"]];for(let kt=0;kt<Qe.length;++kt)if(Qe[kt].expanded===Pe)return Qe[kt].compacted}if(M(Pe)||X(Pe)){const Qe=B.compactValue({activeCtx:ie,activeProperty:we,value:Pe,options:me});return me.link&&X(Pe)&&(me.link.hasOwnProperty(Pe["@id"])||(me.link[Pe["@id"]]=[]),me.link[Pe["@id"]].push({expanded:Pe,compacted:Qe})),Qe}if(T(Pe)&&(z(ie,we,"@container")||[]).includes("@list"))return B.compact({activeCtx:ie,activeProperty:we,element:Pe["@list"],options:me});const ze="@reverse"===we,Te={},ve=ie;!M(Pe)&&!X(Pe)&&(ie=ie.revertToPreviousContext());const fe=z(ve,we,"@context");C(fe)||(ie=yield oe({activeCtx:ie,localCtx:fe,propagate:!0,overrideProtected:!0,options:me})),me.link&&"@id"in Pe&&(me.link.hasOwnProperty(Pe["@id"])||(me.link[Pe["@id"]]=[]),me.link[Pe["@id"]].push({expanded:Pe,compacted:Te}));let Ze=Pe["@type"]||[];Ze.length>1&&(Ze=Array.from(Ze).sort());const $e=ie;for(const Qe of Ze){const kt=B.compactIri({activeCtx:$e,iri:Qe,relativeTo:{vocab:!0}}),ft=z(ve,kt,"@context");C(ft)||(ie=yield oe({activeCtx:ie,localCtx:ft,options:me,propagate:!1}))}const Ne=Object.keys(Pe).sort();for(const Qe of Ne){const kt=Pe[Qe];if("@id"!==Qe)if("@type"!==Qe)if("@reverse"!==Qe)if("@preserve"!==Qe)if("@index"!==Qe)if("@graph"!==Qe&&"@list"!==Qe&&"@included"!==Qe&&q(Qe)){const ft=B.compactIri({activeCtx:ie,iri:Qe,relativeTo:{vocab:!0}});ce(Te,ft,kt)}else{if(!I(kt))throw new P("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===kt.length){const ft=B.compactIri({activeCtx:ie,iri:Qe,value:kt,relativeTo:{vocab:!0},reverse:ze}),ot=ie.mappings.has(ft)?ie.mappings.get(ft)["@nest"]:null;let lt=Te;ot&&(ue(ie,ot,me),S(Te[ot])||(Te[ot]={}),lt=Te[ot]),ce(lt,ft,kt,{propertyIsArray:!0})}for(const ft of kt){const ot=B.compactIri({activeCtx:ie,iri:Qe,value:ft,relativeTo:{vocab:!0},reverse:ze}),lt=ie.mappings.has(ot)?ie.mappings.get(ot)["@nest"]:null;let Ge=Te;lt&&(ue(ie,lt,me),S(Te[lt])||(Te[lt]={}),Ge=Te[lt]);const De=z(ie,ot,"@container")||[],Fe=H(ft),ct=T(ft);let Mt;ct?Mt=ft["@list"]:Fe&&(Mt=ft["@graph"]);let dt=yield B.compact({activeCtx:ie,activeProperty:ot,element:ct||Fe?Mt:ft,options:me});if(ct){if(I(dt)||(dt=[dt]),De.includes("@list")){ce(Ge,ot,dt,{valueIsArray:!0,allowDuplicate:!0});continue}dt={[B.compactIri({activeCtx:ie,iri:"@list",relativeTo:{vocab:!0}})]:dt},"@index"in ft&&(dt[B.compactIri({activeCtx:ie,iri:"@index",relativeTo:{vocab:!0}})]=ft["@index"])}if(Fe)if(De.includes("@graph")&&(De.includes("@id")||De.includes("@index")&&F(ft))){let Ot;Ge.hasOwnProperty(ot)?Ot=Ge[ot]:Ge[ot]=Ot={};const Jt=(De.includes("@id")?ft["@id"]:ft["@index"])||B.compactIri({activeCtx:ie,iri:"@none",relativeTo:{vocab:!0}});ce(Ot,Jt,dt,{propertyIsArray:!me.compactArrays||De.includes("@set")})}else De.includes("@graph")&&F(ft)?(I(dt)&&dt.length>1&&(dt={"@included":dt}),ce(Ge,ot,dt,{propertyIsArray:!me.compactArrays||De.includes("@set")})):(I(dt)&&1===dt.length&&me.compactArrays&&(dt=dt[0]),dt={[B.compactIri({activeCtx:ie,iri:"@graph",relativeTo:{vocab:!0}})]:dt},"@id"in ft&&(dt[B.compactIri({activeCtx:ie,iri:"@id",relativeTo:{vocab:!0}})]=ft["@id"]),"@index"in ft&&(dt[B.compactIri({activeCtx:ie,iri:"@index",relativeTo:{vocab:!0}})]=ft["@index"]),ce(Ge,ot,dt,{propertyIsArray:!me.compactArrays||De.includes("@set")}));else if(De.includes("@language")||De.includes("@index")||De.includes("@id")||De.includes("@type")){let Ot,Jt;if(Ge.hasOwnProperty(ot)?Ot=Ge[ot]:Ge[ot]=Ot={},De.includes("@language"))M(dt)&&(dt=dt["@value"]),Jt=ft["@language"];else if(De.includes("@index")){const Tt=z(ie,ot,"@index")||"@index",en=B.compactIri({activeCtx:ie,iri:Tt,relativeTo:{vocab:!0}});if("@index"===Tt)Jt=ft["@index"],delete dt[en];else{let on;if([Jt,...on]=U(dt[Tt]||[]),N(Jt))switch(on.length){case 0:delete dt[Tt];break;case 1:dt[Tt]=on[0];break;default:dt[Tt]=on}else Jt=null}}else if(De.includes("@id")){const Tt=B.compactIri({activeCtx:ie,iri:"@id",relativeTo:{vocab:!0}});Jt=dt[Tt],delete dt[Tt]}else if(De.includes("@type")){const Tt=B.compactIri({activeCtx:ie,iri:"@type",relativeTo:{vocab:!0}});let en;switch([Jt,...en]=U(dt[Tt]||[]),en.length){case 0:delete dt[Tt];break;case 1:dt[Tt]=en[0];break;default:dt[Tt]=en}1===Object.keys(dt).length&&"@id"in ft&&(dt=yield B.compact({activeCtx:ie,activeProperty:ot,element:{"@id":ft["@id"]},options:me}))}Jt||(Jt=B.compactIri({activeCtx:ie,iri:"@none",relativeTo:{vocab:!0}})),ce(Ot,Jt,dt,{propertyIsArray:De.includes("@set")})}else{const Ot=!me.compactArrays||De.includes("@set")||De.includes("@list")||I(dt)&&0===dt.length||"@list"===Qe||"@graph"===Qe;ce(Ge,ot,dt,{propertyIsArray:Ot})}}}else{if((z(ie,we,"@container")||[]).includes("@index"))continue;const ot=B.compactIri({activeCtx:ie,iri:Qe,relativeTo:{vocab:!0}});ce(Te,ot,kt)}else{const ft=yield B.compact({activeCtx:ie,activeProperty:we,element:kt,options:me});I(ft)&&0===ft.length||ce(Te,Qe,ft)}else{const ft=yield B.compact({activeCtx:ie,activeProperty:"@reverse",element:kt,options:me});for(const ot in ft)if(ie.mappings.has(ot)&&ie.mappings.get(ot).reverse){const lt=ft[ot],De=(z(ie,ot,"@container")||[]).includes("@set")||!me.compactArrays;ce(Te,ot,lt,{propertyIsArray:De}),delete ft[ot]}if(Object.keys(ft).length>0){const ot=B.compactIri({activeCtx:ie,iri:Qe,relativeTo:{vocab:!0}});ce(Te,ot,ft)}}else{let ft=U(kt).map(Fe=>B.compactIri({activeCtx:ve,iri:Fe,relativeTo:{vocab:!0}}));1===ft.length&&(ft=ft[0]);const ot=B.compactIri({activeCtx:ie,iri:"@type",relativeTo:{vocab:!0}}),De=(z(ie,ot,"@container")||[]).includes("@set")&&K(ie,1.1)||I(ft)&&0===kt.length;ce(Te,ot,ft,{propertyIsArray:De})}else{let ft=U(kt).map(lt=>B.compactIri({activeCtx:ie,iri:lt,relativeTo:{vocab:!1},base:me.base}));1===ft.length&&(ft=ft[0]),Te[B.compactIri({activeCtx:ie,iri:"@id",relativeTo:{vocab:!0}})]=ft}}return Te}return Pe});return function(ie){return ge.apply(this,arguments)}}(),B.compactIri=({activeCtx:ge,iri:ie,value:we=null,relativeTo:Pe={vocab:!1},reverse:me=!1,base:We=null})=>{if(null===ie)return ie;ge.isPropertyTermScoped&&ge.previousContext&&(ge=ge.previousContext);const ze=ge.getInverse();if(q(ie)&&ie in ze&&"@none"in ze[ie]&&"@type"in ze[ie]["@none"]&&"@none"in ze[ie]["@none"]["@type"])return ze[ie]["@none"]["@type"]["@none"];if(Pe.vocab&&ie in ze){const $e=ge["@language"]||"@none",Ne=[];S(we)&&"@index"in we&&!("@graph"in we)&&Ne.push("@index","@index@set"),S(we)&&"@preserve"in we&&(we=we["@preserve"][0]),H(we)?("@index"in we&&Ne.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in we&&Ne.push("@graph@id","@graph@id@set"),Ne.push("@graph","@graph@set","@set"),"@index"in we||Ne.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in we||Ne.push("@graph@id","@graph@id@set")):S(we)&&!M(we)&&Ne.push("@id","@id@set","@type","@set@type");let Qe="@language",kt="@null";if(me)Qe="@type",kt="@reverse",Ne.push("@set");else if(T(we)){"@index"in we||Ne.push("@list");const ot=we["@list"];if(0===ot.length)Qe="@any",kt="@none";else{let lt=0===ot.length?$e:null,Ge=null;for(let De=0;De<ot.length;++De){const Fe=ot[De];let ct="@none",Mt="@none";if(M(Fe)?"@direction"in Fe?ct=`${(Fe["@language"]||"").toLowerCase()}_${Fe["@direction"]}`:"@language"in Fe?ct=Fe["@language"].toLowerCase():"@type"in Fe?Mt=Fe["@type"]:ct="@null":Mt="@id",null===lt?lt=ct:ct!==lt&&M(Fe)&&(lt="@none"),null===Ge?Ge=Mt:Mt!==Ge&&(Ge="@none"),"@none"===lt&&"@none"===Ge)break}lt=lt||"@none",Ge=Ge||"@none","@none"!==Ge?(Qe="@type",kt=Ge):kt=lt}}else{if(M(we))if("@language"in we&&!("@index"in we)){Ne.push("@language","@language@set"),kt=we["@language"];const ot=we["@direction"];ot&&(kt=`${kt}_${ot}`)}else"@direction"in we&&!("@index"in we)?kt=`_${we["@direction"]}`:"@type"in we&&(Qe="@type",kt=we["@type"]);else Qe="@type",kt="@id";Ne.push("@set")}Ne.push("@none"),S(we)&&!("@index"in we)&&Ne.push("@index","@index@set"),M(we)&&1===Object.keys(we).length&&Ne.push("@language","@language@set");const ft=function Q(ge,ie,we,Pe,me,We){null===We&&(We="@null");const ze=[];if(("@id"===We||"@reverse"===We)&&S(we)&&"@id"in we){"@reverse"===We&&ze.push("@reverse");const ve=B.compactIri({activeCtx:ge,iri:we["@id"],relativeTo:{vocab:!0}});ge.mappings.has(ve)&&ge.mappings.get(ve)&&ge.mappings.get(ve)["@id"]===we["@id"]?ze.push.apply(ze,["@vocab","@id"]):ze.push.apply(ze,["@id","@vocab"])}else{ze.push(We);const ve=ze.find(fe=>fe.includes("_"));ve&&ze.push(ve.replace(/^[^_]+_/,"_"))}ze.push("@none");const Te=ge.inverse[ie];for(const ve of Pe){if(!(ve in Te))continue;const fe=Te[ve][me];for(const Ze of ze)if(Ze in fe)return fe[Ze]}return null}(ge,ie,we,Ne,Qe,kt);if(null!==ft)return ft}if(Pe.vocab&&"@vocab"in ge){const $e=ge["@vocab"];if(0===ie.indexOf($e)&&ie!==$e){const Ne=ie.substr($e.length);if(!ge.mappings.has(Ne))return Ne}}let Te=null;const ve=[];let fe=ge.fastCurieMap;const Ze=ie.length-1;for(let $e=0;$e<Ze&&ie[$e]in fe;++$e)fe=fe[ie[$e]],""in fe&&ve.push(fe[""][0]);for(let $e=ve.length-1;$e>=0;--$e){const Ne=ve[$e],Qe=Ne.terms;for(const kt of Qe){const ft=kt+":"+ie.substr(Ne.iri.length);ge.mappings.get(kt)._prefix&&(!ge.mappings.has(ft)||null===we&&ge.mappings.get(ft)["@id"]===ie)&&(null===Te||L(ft,Te)<0)&&(Te=ft)}}if(null!==Te)return Te;for(const[$e,Ne]of ge.mappings)if(Ne&&Ne._prefix&&ie.startsWith($e+":"))throw new P(`Absolute IRI "${ie}" confused with prefix "${$e}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:ge});if(!Pe.vocab){if("@base"in ge){if(ge["@base"]){const $e=le(J(We,ge["@base"]),ie);return Ie.test($e)?`./${$e}`:$e}return ie}return le(We,ie)}return ie},B.compactValue=({activeCtx:ge,activeProperty:ie,value:we,options:Pe})=>{if(M(we)){const Te=z(ge,ie,"@type"),ve=z(ge,ie,"@language"),fe=z(ge,ie,"@direction"),Ze=z(ge,ie,"@container")||[],$e="@index"in we&&!Ze.includes("@index");if(!$e&&"@none"!==Te&&(we["@type"]===Te||"@language"in we&&we["@language"]===ve&&"@direction"in we&&we["@direction"]===fe||"@language"in we&&we["@language"]===ve||"@direction"in we&&we["@direction"]===fe))return we["@value"];const Ne=Object.keys(we).length,Qe=1===Ne||2===Ne&&"@index"in we&&!$e,kt="@language"in ge,ft=N(we["@value"]),ot=ge.mappings.has(ie)&&null===ge.mappings.get(ie)["@language"];if(Qe&&"@none"!==Te&&(!kt||!ft||ot))return we["@value"];const lt={};return $e&&(lt[B.compactIri({activeCtx:ge,iri:"@index",relativeTo:{vocab:!0}})]=we["@index"]),"@type"in we?lt[B.compactIri({activeCtx:ge,iri:"@type",relativeTo:{vocab:!0}})]=B.compactIri({activeCtx:ge,iri:we["@type"],relativeTo:{vocab:!0}}):"@language"in we&&(lt[B.compactIri({activeCtx:ge,iri:"@language",relativeTo:{vocab:!0}})]=we["@language"]),"@direction"in we&&(lt[B.compactIri({activeCtx:ge,iri:"@direction",relativeTo:{vocab:!0}})]=we["@direction"]),lt[B.compactIri({activeCtx:ge,iri:"@value",relativeTo:{vocab:!0}})]=we["@value"],lt}const me=ee(ge,ie,{vocab:!0},Pe),We=z(ge,ie,"@type"),ze=B.compactIri({activeCtx:ge,iri:we["@id"],relativeTo:{vocab:"@vocab"===We},base:Pe.base});return"@id"===We||"@vocab"===We||"@graph"===me?ze:{[B.compactIri({activeCtx:ge,iri:"@id",relativeTo:{vocab:!0}})]:ze}}},313:Oe=>{"use strict";const Re="http://www.w3.org/1999/02/22-rdf-syntax-ns#",G="http://www.w3.org/2001/XMLSchema#";Oe.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:Re,RDF_LIST:Re+"List",RDF_FIRST:Re+"first",RDF_REST:Re+"rest",RDF_NIL:Re+"nil",RDF_TYPE:Re+"type",RDF_PLAIN_LITERAL:Re+"PlainLiteral",RDF_XML_LITERAL:Re+"XMLLiteral",RDF_JSON_LITERAL:Re+"JSON",RDF_OBJECT:Re+"object",RDF_LANGSTRING:Re+"langString",XSD:G,XSD_BOOLEAN:G+"boolean",XSD_DOUBLE:G+"double",XSD_INTEGER:G+"integer",XSD_STRING:G+"string"}},2134:(Oe,Re,G)=>{"use strict";var $=G(9344).default;const P=G(4249),I=G(3327),{isArray:S,isObject:N,isString:C,isUndefined:T}=G(2353),{isAbsolute:M,isRelative:H,prependBase:F}=G(4920),{handleEvent:X}=G(5775),{REGEX_BCP47:ee,REGEX_KEYWORD:z,asArray:q,compareShortestLeast:oe}=G(4249),K=new Map,J={};function Ie(U,L,B,Q,ue,ge){if(null===L||!C(L)||J.isKeyword(L))return L;if(L.match(z))return null;if(Q&&Q.hasOwnProperty(L)&&!0!==ue.get(L)&&J.createTermDefinition({activeCtx:U,localCtx:Q,term:L,defined:ue,options:ge}),(B=B||{}).vocab){const we=U.mappings.get(L);if(null===we)return null;if(N(we)&&"@id"in we)return we["@id"]}const ie=L.indexOf(":");if(ie>0){const we=L.substr(0,ie),Pe=L.substr(ie+1);if("_"===we||0===Pe.indexOf("//"))return L;Q&&Q.hasOwnProperty(we)&&J.createTermDefinition({activeCtx:U,localCtx:Q,term:we,defined:ue,options:ge});const me=U.mappings.get(we);if(me&&me._prefix)return me["@id"]+Pe;if(M(L))return L}if(B.vocab&&"@vocab"in U)L=U["@vocab"]+L;else if(B.base){let we,Pe;"@base"in U?U["@base"]?(Pe=F(ge.base,U["@base"]),we=F(Pe,L)):(Pe=U["@base"],we=L):(Pe=ge.base,we=F(ge.base,L)),L=we}return L}function ce(U,L){if(!U||"object"!=typeof U||!L||"object"!=typeof L)return U===L;const B=Array.isArray(U);if(B!==Array.isArray(L))return!1;if(B){if(U.length!==L.length)return!1;for(let ge=0;ge<U.length;++ge)if(!ce(U[ge],L[ge]))return!1;return!0}const Q=Object.keys(U),ue=Object.keys(L);if(Q.length!==ue.length)return!1;for(const ge in U){let ie=U[ge],we=L[ge];if("@container"===ge&&Array.isArray(ie)&&Array.isArray(we)&&(ie=ie.slice().sort(),we=we.slice().sort()),!ce(ie,we))return!1}return!0}Oe.exports=J,J.process=function(){var U=$(function*({activeCtx:L,localCtx:B,options:Q,propagate:ue=!0,overrideProtected:ge=!1,cycles:ie=new Set}){if(N(B)&&"@context"in B&&S(B["@context"])&&(B=B["@context"]),0===q(B).length)return L;const Pe=[],me=[({event:ve,next:fe})=>{Pe.push(ve),fe()}];Q.eventHandler&&me.push(Q.eventHandler);const We=Q;Q={...Q,eventHandler:me};const ze=yield Q.contextResolver.resolve({activeCtx:L,context:B,documentLoader:Q.documentLoader,base:Q.base});N(ze[0].document)&&"boolean"==typeof ze[0].document["@propagate"]&&(ue=ze[0].document["@propagate"]);let Te=L;!ue&&!Te.previousContext&&(Te=Te.clone(),Te.previousContext=L);for(const ve of ze){let{document:fe}=ve;if(L=Te,null===fe){if(!ge&&0!==Object.keys(L.protected).length)throw new I("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});Te=L=J.getInitialContext(Q).clone();continue}const Ze=ve.getProcessed(L);if(Ze){if(We.eventHandler)for(const Ne of Ze.events)X({event:Ne,options:We});Te=L=Ze.context;continue}if(N(fe)&&"@context"in fe&&(fe=fe["@context"]),!N(fe))throw new I("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:fe});Te=Te.clone();const $e=new Map;if("@version"in fe){if(1.1!==fe["@version"])throw new I("Unsupported JSON-LD version: "+fe["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:fe});if(L.processingMode&&"json-ld-1.0"===L.processingMode)throw new I("@version: "+fe["@version"]+" not compatible with "+L.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:fe});Te.processingMode="json-ld-1.1",Te["@version"]=fe["@version"],$e.set("@version",!0)}if(Te.processingMode=Te.processingMode||L.processingMode,"@base"in fe){let Ne=fe["@base"];if(null!==Ne&&!M(Ne)){if(!H(Ne))throw new I('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:fe});Ne=F(Te["@base"],Ne)}Te["@base"]=Ne,$e.set("@base",!0)}if("@vocab"in fe){const Ne=fe["@vocab"];if(null===Ne)delete Te["@vocab"];else{if(!C(Ne))throw new I('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:fe});if(!M(Ne)&&J.processingMode(Te,1))throw new I('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:fe});{const Qe=Ie(Te,Ne,{vocab:!0,base:!0},void 0,void 0,Q);M(Qe)||Q.eventHandler&&X({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab:Qe}},options:Q}),Te["@vocab"]=Qe}}$e.set("@vocab",!0)}if("@language"in fe){const Ne=fe["@language"];if(null===Ne)delete Te["@language"];else{if(!C(Ne))throw new I('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:fe});Ne.match(ee)||Q.eventHandler&&X({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Ne}},options:Q}),Te["@language"]=Ne.toLowerCase()}$e.set("@language",!0)}if("@direction"in fe){const Ne=fe["@direction"];if("json-ld-1.0"===L.processingMode)throw new I("Invalid JSON-LD syntax; @direction not compatible with "+L.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:fe});if(null===Ne)delete Te["@direction"];else{if("ltr"!==Ne&&"rtl"!==Ne)throw new I('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:fe});Te["@direction"]=Ne}$e.set("@direction",!0)}if("@propagate"in fe){const Ne=fe["@propagate"];if("json-ld-1.0"===L.processingMode)throw new I("Invalid JSON-LD syntax; @propagate not compatible with "+L.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:fe});if("boolean"!=typeof Ne)throw new I("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:B});$e.set("@propagate",!0)}if("@import"in fe){const Ne=fe["@import"];if("json-ld-1.0"===L.processingMode)throw new I("Invalid JSON-LD syntax; @import not compatible with "+L.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:fe});if(!C(Ne))throw new I("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:B});const Qe=yield Q.contextResolver.resolve({activeCtx:L,context:Ne,documentLoader:Q.documentLoader,base:Q.base});if(1!==Qe.length)throw new I("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:B});const kt=Qe[0].getProcessed(L);if(kt)fe=kt;else{const ft=Qe[0].document;if("@import"in ft)throw new I("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:B});for(const ot in ft)fe.hasOwnProperty(ot)||(fe[ot]=ft[ot]);Qe[0].setProcessed(L,fe)}$e.set("@import",!0)}$e.set("@protected",fe["@protected"]||!1);for(const Ne in fe)if(J.createTermDefinition({activeCtx:Te,localCtx:fe,term:Ne,defined:$e,options:Q,overrideProtected:ge}),N(fe[Ne])&&"@context"in fe[Ne]){const Qe=fe[Ne]["@context"];let kt=!0;if(C(Qe)){const ft=F(Q.base,Qe);ie.has(ft)?kt=!1:ie.add(ft)}if(kt)try{yield J.process({activeCtx:Te.clone(),localCtx:fe[Ne]["@context"],overrideProtected:!0,options:Q,cycles:ie})}catch{throw new I("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:fe[Ne]["@context"],term:Ne})}}ve.setProcessed(L,{context:Te,events:Pe})}return Te});return function(L){return U.apply(this,arguments)}}(),J.createTermDefinition=({activeCtx:U,localCtx:L,term:B,defined:Q,options:ue,overrideProtected:ge=!1})=>{if(Q.has(B)){if(Q.get(B))return;throw new I("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:L,term:B})}let ie;if(Q.set(B,!1),L.hasOwnProperty(B)&&(ie=L[B]),"@type"===B&&N(ie)&&"@set"===(ie["@container"]||"@set")&&J.processingMode(U,1.1)){const ve=["@container","@id","@protected"],fe=Object.keys(ie);if(0===fe.length||fe.some(Ze=>!ve.includes(Ze)))throw new I("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:L,term:B})}else{if(J.isKeyword(B))throw new I("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:L,term:B});if(B.match(z))return void(ue.eventHandler&&X({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term:B}},options:ue}));if(""===B)throw new I("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:L})}const we=U.mappings.get(B);U.mappings.has(B)&&U.mappings.delete(B);let Pe=!1;if((C(ie)||null===ie)&&(Pe=!0,ie={"@id":ie}),!N(ie))throw new I("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:L});const me={};U.mappings.set(B,me),me.reverse=!1;const We=["@container","@id","@language","@reverse","@type"];J.processingMode(U,1.1)&&We.push("@context","@direction","@index","@nest","@prefix","@protected");for(const ve in ie)if(!We.includes(ve))throw new I("Invalid JSON-LD syntax; a term definition must not contain "+ve,"jsonld.SyntaxError",{code:"invalid term definition",context:L});const ze=B.indexOf(":");if(me._termHasColon=ze>0,"@reverse"in ie){if("@id"in ie)throw new I("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:L});if("@nest"in ie)throw new I("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:L});const ve=ie["@reverse"];if(!C(ve))throw new I("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:L});if(ve.match(z))return ue.eventHandler&&X({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse:ve}},options:ue}),void(we?U.mappings.set(B,we):U.mappings.delete(B));const fe=Ie(U,ve,{vocab:!0,base:!1},L,Q,ue);if(!M(fe))throw new I("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:L});me["@id"]=fe,me.reverse=!0}else if("@id"in ie){let ve=ie["@id"];if(ve&&!C(ve))throw new I("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:L});if(null===ve)me["@id"]=null;else{if(!J.isKeyword(ve)&&ve.match(z))return ue.eventHandler&&X({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:ve}},options:ue}),void(we?U.mappings.set(B,we):U.mappings.delete(B));if(ve!==B){if(ve=Ie(U,ve,{vocab:!0,base:!1},L,Q,ue),!M(ve)&&!J.isKeyword(ve))throw new I("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:L});if(B.match(/(?::[^:])|\//)&&Ie(U,B,{vocab:!0,base:!1},L,new Map(Q).set(B,!0),ue)!==ve)throw new I("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:L});me["@id"]=ve,me._prefix=Pe&&!me._termHasColon&&ve.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in me))if(me._termHasColon){const ve=B.substr(0,ze);if(L.hasOwnProperty(ve)&&J.createTermDefinition({activeCtx:U,localCtx:L,term:ve,defined:Q,options:ue}),U.mappings.has(ve)){const fe=B.substr(ze+1);me["@id"]=U.mappings.get(ve)["@id"]+fe}else me["@id"]=B}else if("@type"===B)me["@id"]=B;else{if(!("@vocab"in U))throw new I("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:L,term:B});me["@id"]=U["@vocab"]+B}if((!0===ie["@protected"]||!0===Q.get("@protected")&&!1!==ie["@protected"])&&(U.protected[B]=!0,me.protected=!0),Q.set(B,!0),"@type"in ie){let ve=ie["@type"];if(!C(ve))throw new I("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:L});if("@json"===ve||"@none"===ve){if(J.processingMode(U,1))throw new I(`Invalid JSON-LD syntax; an @context @type value must not be "${ve}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:L})}else if("@id"!==ve&&"@vocab"!==ve){if(ve=Ie(U,ve,{vocab:!0,base:!1},L,Q,ue),!M(ve))throw new I("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:L});if(0===ve.indexOf("_:"))throw new I("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:L})}me["@type"]=ve}if("@container"in ie){const ve=C(ie["@container"])?[ie["@container"]]:ie["@container"]||[],fe=["@list","@set","@index","@language"];let Ze=!0;const $e=ve.includes("@set");if(J.processingMode(U,1.1)){if(fe.push("@graph","@id","@type"),ve.includes("@list")){if(1!==ve.length)throw new I("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:L})}else if(ve.includes("@graph")){if(ve.some(Ne=>"@graph"!==Ne&&"@id"!==Ne&&"@index"!==Ne&&"@set"!==Ne))throw new I("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:L})}else Ze&=ve.length<=($e?2:1);if(ve.includes("@type")&&(me["@type"]=me["@type"]||"@id",!["@id","@vocab"].includes(me["@type"])))throw new I("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:L})}else Ze&=!S(ie["@container"]),Ze&=ve.length<=1;if(Ze&=ve.every(Ne=>fe.includes(Ne)),Ze&=!($e&&ve.includes("@list")),!Ze)throw new I("Invalid JSON-LD syntax; @context @container value must be one of the following: "+fe.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:L});if(me.reverse&&!ve.every(Ne=>["@index","@set"].includes(Ne)))throw new I("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:L});me["@container"]=ve}if("@index"in ie){if(!("@container"in ie)||!me["@container"].includes("@index"))throw new I(`Invalid JSON-LD syntax; @index without @index in @container: "${ie["@index"]}" on term "${B}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:L});if(!C(ie["@index"])||0===ie["@index"].indexOf("@"))throw new I(`Invalid JSON-LD syntax; @index must expand to an IRI: "${ie["@index"]}" on term "${B}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:L});me["@index"]=ie["@index"]}if("@context"in ie&&(me["@context"]=ie["@context"]),"@language"in ie&&!("@type"in ie)){let ve=ie["@language"];if(null!==ve&&!C(ve))throw new I("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:L});null!==ve&&(ve=ve.toLowerCase()),me["@language"]=ve}if("@prefix"in ie){if(B.match(/:|\//))throw new I("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:L});if(J.isKeyword(me["@id"]))throw new I("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:L});if("boolean"!=typeof ie["@prefix"])throw new I("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:L});me._prefix=!0===ie["@prefix"]}if("@direction"in ie){const ve=ie["@direction"];if(null!==ve&&"ltr"!==ve&&"rtl"!==ve)throw new I('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:L});me["@direction"]=ve}if("@nest"in ie){const ve=ie["@nest"];if(!C(ve)||"@nest"!==ve&&0===ve.indexOf("@"))throw new I("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:L});me["@nest"]=ve}const Te=me["@id"];if("@context"===Te||"@preserve"===Te)throw new I("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:L});if(we&&we.protected&&!ge&&(U.protected[B]=!0,me.protected=!0,!ce(we,me)))throw new I("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:L,term:B})},J.expandIri=(U,L,B,Q)=>Ie(U,L,B,void 0,void 0,Q),J.getInitialContext=U=>{const L=JSON.stringify({processingMode:U.processingMode}),B=K.get(L);if(B)return B;const Q={processingMode:U.processingMode,mappings:new Map,inverse:null,getInverse:function ue(){const me=this;if(me.inverse)return me.inverse;const We=me.inverse={},ze=me.fastCurieMap={},Te={},ve=(me["@language"]||"@none").toLowerCase(),fe=me["@direction"],Ze=me.mappings,$e=[...Ze.keys()].sort(oe);for(const Ne of $e){const Qe=Ze.get(Ne);if(null===Qe)continue;let kt=Qe["@container"]||"@none";if(kt=[].concat(kt).sort().join(""),null===Qe["@id"])continue;const ft=q(Qe["@id"]);for(const ot of ft){let lt=We[ot];const Ge=J.isKeyword(ot);if(lt)!Ge&&!Qe._termHasColon&&Te[ot].push(Ne);else if(We[ot]=lt={},!Ge&&!Qe._termHasColon){Te[ot]=[Ne];const De={iri:ot,terms:Te[ot]};ot[0]in ze?ze[ot[0]].push(De):ze[ot[0]]=[De]}if(lt[kt]||(lt[kt]={"@language":{},"@type":{},"@any":{}}),lt=lt[kt],ie(Ne,lt["@any"],"@none"),Qe.reverse)ie(Ne,lt["@type"],"@reverse");else if("@none"===Qe["@type"])ie(Ne,lt["@any"],"@none"),ie(Ne,lt["@language"],"@none"),ie(Ne,lt["@type"],"@none");else if("@type"in Qe)ie(Ne,lt["@type"],Qe["@type"]);else if("@language"in Qe&&"@direction"in Qe){const De=Qe["@language"],Fe=Qe["@direction"];ie(Ne,lt["@language"],De&&Fe?`${De}_${Fe}`.toLowerCase():De?De.toLowerCase():Fe?`_${Fe}`:"@null")}else"@language"in Qe?ie(Ne,lt["@language"],(Qe["@language"]||"@null").toLowerCase()):"@direction"in Qe?ie(Ne,lt["@language"],Qe["@direction"]?`_${Qe["@direction"]}`:"@none"):fe?(ie(Ne,lt["@language"],`_${fe}`),ie(Ne,lt["@language"],"@none"),ie(Ne,lt["@type"],"@none")):(ie(Ne,lt["@language"],ve),ie(Ne,lt["@language"],"@none"),ie(Ne,lt["@type"],"@none"))}}for(const Ne in ze)ge(ze,Ne,1);return We},clone:function we(){const me={};return me.mappings=P.clone(this.mappings),me.clone=this.clone,me.inverse=null,me.getInverse=this.getInverse,me.protected=P.clone(this.protected),this.previousContext&&(me.previousContext=this.previousContext.clone()),me.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(me["@base"]=this["@base"]),"@language"in this&&(me["@language"]=this["@language"]),"@vocab"in this&&(me["@vocab"]=this["@vocab"]),me},revertToPreviousContext:function Pe(){return this.previousContext?this.previousContext.clone():this},protected:{}};return 1e4===K.size&&K.clear(),K.set(L,Q),Q;function ge(me,We,ze){const Te=me[We],ve=me[We]={};let fe,Ze;for(const $e of Te)fe=$e.iri,Ze=ze>=fe.length?"":fe[ze],Ze in ve?ve[Ze].push($e):ve[Ze]=[$e];for(const $e in ve)""!==$e&&ge(ve,$e,ze+1)}function ie(me,We,ze){We.hasOwnProperty(ze)||(We[ze]=me)}},J.getContextValue=(U,L,B)=>{if(null===L)return"@context"===B?void 0:null;if(U.mappings.has(L)){const Q=U.mappings.get(L);if(T(B))return Q;if(Q.hasOwnProperty(B))return Q[B]}return"@language"===B&&B in U||"@direction"===B&&B in U?U[B]:"@context"!==B?null:void 0},J.processingMode=(U,L)=>L.toString()>="1.1"?!U.processingMode||U.processingMode>="json-ld-"+L.toString():"json-ld-1.0"===U.processingMode,J.isKeyword=U=>{if(!C(U)||"@"!==U[0])return!1;switch(U){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1}},8719:(Oe,Re,G)=>{"use strict";var $=G(9344).default;const{parseLinkHeader:P,buildHeaders:I}=G(4249),{LINK_HEADER_CONTEXT:S}=G(313),N=G(3327),C=G(2210),{prependBase:T}=G(4920),M=/(^|(\r\n))link:/i;function H(F,X,ee){const z=new(F=F||XMLHttpRequest);return new Promise((q,oe)=>{z.onload=()=>q(z),z.onerror=K=>oe(K),z.open("GET",X,!0);for(const K in ee)z.setRequestHeader(K,ee[K]);z.send()})}Oe.exports=({secure:F,headers:X={},xhr:ee}={headers:{}})=>{return X=I(X),(new C).wrapLoader(q);function q(K){return oe.apply(this,arguments)}function oe(){return(oe=$(function*(K){if(0!==K.indexOf("http:")&&0!==K.indexOf("https:"))throw new N('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:K});if(F&&0!==K.indexOf("https"))throw new N('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:K});let le;try{le=yield H(ee,K,X)}catch(L){throw new N("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:K,cause:L})}if(le.status>=400)throw new N("URL could not be dereferenced: "+le.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:K,httpStatusCode:le.status});let J={contextUrl:null,documentUrl:K,document:le.response},Ie=null;const ce=le.getResponseHeader("Content-Type");let U;if(M.test(le.getAllResponseHeaders())&&(U=le.getResponseHeader("Link")),U&&"application/ld+json"!==ce){const L=P(U),B=L[S];if(Array.isArray(B))throw new N("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:K});B&&(J.contextUrl=B.target),Ie=L.alternate,Ie&&"application/ld+json"==Ie.type&&!(ce||"").match(/^application\/(\w*\+)?json$/)&&(J=yield q(T(K,Ie.target)))}return J})).apply(this,arguments)}}},5775:(Oe,Re,G)=>{"use strict";const $=G(3327),{isArray:P}=G(2353),{asArray:I}=G(4249),S={};function N({event:T,handlers:M}){let H=!0;for(let F=0;H&&F<M.length;++F){H=!1;const X=M[F];if(P(X))H=N({event:T,handlers:X});else if("function"==typeof X)X({event:T,next:()=>{H=!0}});else{if("object"!=typeof X)throw new $("Invalid event handler.","jsonld.InvalidEventHandler",{event:T});T.code in X?X[T.code]({event:T,next:()=>{H=!0}}):H=!0}}return H}Oe.exports=S,S.defaultEventHandler=null,S.setupEventHandler=({options:T={}})=>{const M=[].concat(T.safe?S.safeEventHandler:[],T.eventHandler?I(T.eventHandler):[],S.defaultEventHandler?S.defaultEventHandler:[]);return 0===M.length?null:M},S.handleEvent=({event:T,options:M})=>{N({event:T,handlers:M.eventHandler})};const C=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference"]);S.safeEventHandler=function({event:M,next:H}){if("warning"===M.level&&C.has(M.code))throw new $("Safe mode validation error.","jsonld.ValidationError",{event:M});H()},S.logEventHandler=function({event:M,next:H}){console.log(`EVENT: ${M.message}`,{event:M}),H()},S.logWarningEventHandler=function({event:M,next:H}){"warning"===M.level&&console.warn(`WARNING: ${M.message}`,{event:M}),H()},S.unhandledEventHandler=function({event:M}){throw new $("No handler for event.","jsonld.UnhandledEvent",{event:M})},S.setDefaultEventHandler=function({eventHandler:T}={}){S.defaultEventHandler=T?I(T):null}},554:(Oe,Re,G)=>{"use strict";var $=G(9344).default;const P=G(3327),{isArray:I,isObject:S,isEmptyObject:N,isString:C,isUndefined:T}=G(2353),{isList:M,isValue:H,isGraph:F,isSubject:X}=G(9094),{expandIri:ee,getContextValue:z,isKeyword:q,process:oe,processingMode:K}=G(2134),{isAbsolute:le}=G(4920),{REGEX_BCP47:J,REGEX_KEYWORD:Ie,addValue:ce,asArray:U,getValues:L,validateTypeValue:B}=G(4249),{handleEvent:Q}=G(5775),ue={};function ge(ze){return ie.apply(this,arguments)}function ie(){return(ie=$(function*({activeCtx:ze,activeProperty:Te,expandedActiveProperty:ve,element:fe,expandedParent:Ze,options:$e={},insideList:Ne,typeKey:Qe,typeScopedContext:kt}){const ft=Object.keys(fe).sort(),ot=[];let lt;const Ge=fe[Qe]&&"@json"===ee(ze,I(fe[Qe])?fe[Qe][0]:fe[Qe],{vocab:!0},{...$e,typeExpansion:!0});for(const De of ft){let ct,Fe=fe[De];if("@context"===De)continue;const Mt=ee(ze,De,{vocab:!0},$e);if(null===Mt||!le(Mt)&&!q(Mt)){$e.eventHandler&&Q({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:De,expandedProperty:Mt}},options:$e});continue}if(q(Mt)){if("@reverse"===ve)throw new P("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:Fe});if(Mt in Ze&&"@included"!==Mt&&"@type"!==Mt)throw new P("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:Mt})}if("@id"===Mt){if(!C(Fe)){if(!$e.isFrame)throw new P('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:Fe});if(S(Fe)){if(!N(Fe))throw new P('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Fe})}else{if(!I(Fe))throw new P('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Fe});if(!Fe.every(Tt=>C(Tt)))throw new P('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Fe})}}ce(Ze,"@id",U(Fe).map(Tt=>{if(C(Tt)){const en=ee(ze,Tt,{base:!0},$e);return $e.eventHandler&&(null===en?Q(null===Tt?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:Tt}},options:$e}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:Tt}},options:$e}):le(en)||Q({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:Tt,expandedId:en}},options:$e})),en}return Tt}),{propertyIsArray:$e.isFrame});continue}if("@type"===Mt){S(Fe)&&(Fe=Object.fromEntries(Object.entries(Fe).map(([Tt,en])=>[ee(kt,Tt,{vocab:!0}),U(en).map(on=>ee(kt,on,{base:!0,vocab:!0},{...$e,typeExpansion:!0}))]))),B(Fe,$e.isFrame),ce(Ze,"@type",U(Fe).map(Tt=>{if(C(Tt)){const en=ee(kt,Tt,{base:!0,vocab:!0},{...$e,typeExpansion:!0});return"@json"!==en&&!le(en)&&$e.eventHandler&&Q({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:Tt}},options:$e}),en}return Tt}),{propertyIsArray:$e.isFrame});continue}if("@included"===Mt&&K(ze,1.1)){const Tt=U(yield ue.expand({activeCtx:ze,activeProperty:Te,element:Fe,options:$e}));if(!Tt.every(en=>X(en)))throw new P("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:Fe});ce(Ze,"@included",Tt,{propertyIsArray:!0});continue}if("@graph"===Mt&&!S(Fe)&&!I(Fe))throw new P('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:Fe});if("@value"===Mt){lt=Fe,Ge&&K(ze,1.1)?Ze["@value"]=Fe:ce(Ze,"@value",Fe,{propertyIsArray:$e.isFrame});continue}if("@language"===Mt){if(null===Fe)continue;if(!C(Fe)&&!$e.isFrame)throw new P('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:Fe});Fe=U(Fe).map(Tt=>C(Tt)?Tt.toLowerCase():Tt);for(const Tt of Fe)C(Tt)&&!Tt.match(J)&&$e.eventHandler&&Q({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Tt}},options:$e});ce(Ze,"@language",Fe,{propertyIsArray:$e.isFrame});continue}if("@direction"===Mt){if(!C(Fe)&&!$e.isFrame)throw new P('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:Fe});Fe=U(Fe);for(const Tt of Fe)if(C(Tt)&&"ltr"!==Tt&&"rtl"!==Tt)throw new P('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:Fe});ce(Ze,"@direction",Fe,{propertyIsArray:$e.isFrame});continue}if("@index"===Mt){if(!C(Fe))throw new P('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:Fe});ce(Ze,"@index",Fe);continue}if("@reverse"===Mt){if(!S(Fe))throw new P('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:Fe});if(ct=yield ue.expand({activeCtx:ze,activeProperty:"@reverse",element:Fe,options:$e}),"@reverse"in ct)for(const en in ct["@reverse"])ce(Ze,en,ct["@reverse"][en],{propertyIsArray:!0});let Tt=Ze["@reverse"]||null;for(const en in ct){if("@reverse"===en)continue;null===Tt&&(Tt=Ze["@reverse"]={}),ce(Tt,en,[],{propertyIsArray:!0});const on=ct[en];for(let Vn=0;Vn<on.length;++Vn){const cr=on[Vn];if(H(cr)||M(cr))throw new P('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:ct});ce(Tt,en,cr,{propertyIsArray:!0})}}continue}if("@nest"===Mt){ot.push(De);continue}let dt=ze;const Ot=z(ze,De,"@context");T(Ot)||(dt=yield oe({activeCtx:ze,localCtx:Ot,propagate:!0,overrideProtected:!0,options:$e}));const Jt=z(dt,De,"@container")||[];if(Jt.includes("@language")&&S(Fe))ct=Pe(dt,Fe,z(dt,De,"@direction"),$e);else if(Jt.includes("@index")&&S(Fe)){const Tt=Jt.includes("@graph"),en=z(dt,De,"@index")||"@index",on="@index"!==en&&ee(ze,en,{vocab:!0},$e);ct=yield me({activeCtx:dt,options:$e,activeProperty:De,value:Fe,asGraph:Tt,indexKey:en,propertyIndex:on})}else if(Jt.includes("@id")&&S(Fe)){const Tt=Jt.includes("@graph");ct=yield me({activeCtx:dt,options:$e,activeProperty:De,value:Fe,asGraph:Tt,indexKey:"@id"})}else if(Jt.includes("@type")&&S(Fe))ct=yield me({activeCtx:dt.revertToPreviousContext(),options:$e,activeProperty:De,value:Fe,asGraph:!1,indexKey:"@type"});else{const Tt="@list"===Mt;if(Tt||"@set"===Mt){let en=Te;Tt&&"@graph"===ve&&(en=null),ct=yield ue.expand({activeCtx:dt,activeProperty:en,element:Fe,options:$e,insideList:Tt})}else ct="@json"===z(ze,De,"@type")?{"@type":"@json","@value":Fe}:yield ue.expand({activeCtx:dt,activeProperty:De,element:Fe,options:$e,insideList:!1})}if(null!==ct||"@value"===Mt){if("@list"!==Mt&&!M(ct)&&Jt.includes("@list")&&(ct={"@list":U(ct)}),Jt.includes("@graph")&&!Jt.some(Tt=>"@id"===Tt||"@index"===Tt)&&(ct=U(ct).map(Tt=>({"@graph":U(Tt)}))),dt.mappings.has(De)&&dt.mappings.get(De).reverse){const Tt=Ze["@reverse"]=Ze["@reverse"]||{};ct=U(ct);for(let en=0;en<ct.length;++en){const on=ct[en];if(H(on)||M(on))throw new P('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:ct});ce(Tt,Mt,on,{propertyIsArray:!0})}continue}ce(Ze,Mt,ct,{propertyIsArray:!0})}}if("@value"in Ze&&("@json"!==Ze["@type"]||!K(ze,1.1))&&(S(lt)||I(lt))&&!$e.isFrame)throw new P('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:lt});for(const De of ot){const Fe=I(fe[De])?fe[De]:[fe[De]];for(const ct of Fe){if(!S(ct)||Object.keys(ct).some(Mt=>"@value"===ee(ze,Mt,{vocab:!0},$e)))throw new P("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:ct});yield ge({activeCtx:ze,activeProperty:Te,expandedActiveProperty:ve,element:ct,expandedParent:Ze,options:$e,insideList:Ne,typeScopedContext:kt,typeKey:Qe})}}})).apply(this,arguments)}function we({activeCtx:ze,activeProperty:Te,value:ve,options:fe}){if(null==ve)return null;const Ze=ee(ze,Te,{vocab:!0},fe);if("@id"===Ze)return ee(ze,ve,{base:!0},fe);if("@type"===Ze)return ee(ze,ve,{vocab:!0,base:!0},{...fe,typeExpansion:!0});const $e=z(ze,Te,"@type");if(("@id"===$e||"@graph"===Ze)&&C(ve)){const Qe=ee(ze,ve,{base:!0},fe);return null===Qe&&ve.match(Ie)&&fe.eventHandler&&Q({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:Te}},options:fe}),{"@id":Qe}}if("@vocab"===$e&&C(ve))return{"@id":ee(ze,ve,{vocab:!0,base:!0},fe)};if(q(Ze))return ve;const Ne={};if($e&&!["@id","@vocab","@none"].includes($e))Ne["@type"]=$e;else if(C(ve)){const Qe=z(ze,Te,"@language");null!==Qe&&(Ne["@language"]=Qe);const kt=z(ze,Te,"@direction");null!==kt&&(Ne["@direction"]=kt)}return["boolean","number","string"].includes(typeof ve)||(ve=ve.toString()),Ne["@value"]=ve,Ne}function Pe(ze,Te,ve,fe){const Ze=[],$e=Object.keys(Te).sort();for(const Ne of $e){const Qe=ee(ze,Ne,{vocab:!0},fe);let kt=Te[Ne];I(kt)||(kt=[kt]);for(const ft of kt){if(null===ft)continue;if(!C(ft))throw new P("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:Te});const ot={"@value":ft};"@none"!==Qe&&(Ne.match(J)||fe.eventHandler&&Q({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Ne}},options:fe}),ot["@language"]=Ne.toLowerCase()),ve&&(ot["@direction"]=ve),Ze.push(ot)}}return Ze}function me(ze){return We.apply(this,arguments)}function We(){return(We=$(function*({activeCtx:ze,options:Te,activeProperty:ve,value:fe,asGraph:Ze,indexKey:$e,propertyIndex:Ne}){const Qe=[],kt=Object.keys(fe).sort(),ft="@type"===$e;for(let ot of kt){if(ft){const De=z(ze,ot,"@context");T(De)||(ze=yield oe({activeCtx:ze,localCtx:De,propagate:!1,options:Te}))}let Ge,lt=fe[ot];I(lt)||(lt=[lt]),lt=yield ue.expand({activeCtx:ze,activeProperty:ve,element:lt,options:Te,insideList:!1,insideIndex:!0}),Ge=Ne?"@none"===ot?"@none":we({activeCtx:ze,activeProperty:$e,value:ot,options:Te}):ee(ze,ot,{vocab:!0},Te),"@id"===$e?ot=ee(ze,ot,{base:!0},Te):ft&&(ot=Ge);for(let De of lt){if(Ze&&!F(De)&&(De={"@graph":[De]}),"@type"===$e)"@none"===Ge||(De["@type"]=De["@type"]?[ot].concat(De["@type"]):[ot]);else{if(H(De)&&!["@language","@type","@index"].includes($e))throw new P(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${$e}".`,"jsonld.SyntaxError",{code:"invalid value object",value:De});Ne?"@none"!==Ge&&ce(De,Ne,Ge,{propertyIsArray:!0,prependValue:!0}):"@none"!==Ge&&!($e in De)&&(De[$e]=ot)}Qe.push(De)}}return Qe})).apply(this,arguments)}Oe.exports=ue,ue.expand=function(){var ze=$(function*({activeCtx:Te,activeProperty:ve=null,element:fe,options:Ze={},insideList:$e=!1,insideIndex:Ne=!1,typeScopedContext:Qe=null}){if(null==fe)return null;if("@default"===ve&&(Ze=Object.assign({},Ze,{isFrame:!1})),!I(fe)&&!S(fe))return $e||null!==ve&&"@graph"!==ee(Te,ve,{vocab:!0},Ze)?we({activeCtx:Te,activeProperty:ve,value:fe,options:Ze}):(Ze.eventHandler&&Q({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:fe}},options:Ze}),null);if(I(fe)){let ct=[];const Mt=z(Te,ve,"@container")||[];$e=$e||Mt.includes("@list");for(let dt=0;dt<fe.length;++dt){let Ot=yield ue.expand({activeCtx:Te,activeProperty:ve,element:fe[dt],options:Ze,insideIndex:Ne,typeScopedContext:Qe});$e&&I(Ot)&&(Ot={"@list":Ot}),null!==Ot&&(I(Ot)?ct=ct.concat(Ot):ct.push(Ot))}return ct}const kt=ee(Te,ve,{vocab:!0},Ze),ft=z(Te,ve,"@context");Qe=Qe||(Te.previousContext?Te:null);let ot=Object.keys(fe).sort(),lt=!Ne;if(lt&&Qe&&ot.length<=2&&!ot.includes("@context"))for(const ct of ot){const Mt=ee(Qe,ct,{vocab:!0},Ze);if("@value"===Mt){lt=!1,Te=Qe;break}if("@id"===Mt&&1===ot.length){lt=!1;break}}lt&&(Te=Te.revertToPreviousContext()),T(ft)||(Te=yield oe({activeCtx:Te,localCtx:ft,propagate:!0,overrideProtected:!0,options:Ze})),"@context"in fe&&(Te=yield oe({activeCtx:Te,localCtx:fe["@context"],options:Ze})),Qe=Te;let Ge=null;for(const ct of ot)if("@type"===ee(Te,ct,{vocab:!0},Ze)){Ge=Ge||ct;const dt=fe[ct],Ot=Array.isArray(dt)?dt.length>1?dt.slice().sort():dt:[dt];for(const Jt of Ot){const Tt=z(Qe,Jt,"@context");T(Tt)||(Te=yield oe({activeCtx:Te,localCtx:Tt,options:Ze,propagate:!1}))}}let De={};yield ge({activeCtx:Te,activeProperty:ve,expandedActiveProperty:kt,element:fe,expandedParent:De,options:Ze,insideList:$e,typeKey:Ge,typeScopedContext:Qe}),ot=Object.keys(De);let Fe=ot.length;if("@value"in De){if("@type"in De&&("@language"in De||"@direction"in De))throw new P('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:De});let ct=Fe-1;if("@type"in De&&(ct-=1),"@index"in De&&(ct-=1),"@language"in De&&(ct-=1),"@direction"in De&&(ct-=1),0!==ct)throw new P('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:De});const Mt=null===De["@value"]?[]:U(De["@value"]),dt=L(De,"@type");if(!K(Te,1.1)||!dt.includes("@json")||1!==dt.length)if(0===Mt.length)Ze.eventHandler&&Q({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:De}},options:Ze}),De=null;else{if(!Mt.every(Ot=>C(Ot)||N(Ot))&&"@language"in De)throw new P("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:De});if(!dt.every(Ot=>le(Ot)&&!(C(Ot)&&0===Ot.indexOf("_:"))||N(Ot)))throw new P('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:De})}}else if("@type"in De&&!I(De["@type"]))De["@type"]=[De["@type"]];else if("@set"in De||"@list"in De){if(Fe>1&&(2!==Fe||!("@index"in De)))throw new P('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:De});"@set"in De&&(De=De["@set"],ot=Object.keys(De),Fe=ot.length)}else 1===Fe&&"@language"in De&&(Ze.eventHandler&&Q({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:De}},options:Ze}),De=null);if(S(De)&&!Ze.keepFreeFloatingNodes&&!$e&&(null===ve||"@graph"===kt)&&(0===Fe||"@value"in De||"@list"in De||1===Fe&&"@id"in De)){if(Ze.eventHandler){let ct,Mt;0===Fe?(ct="empty object",Mt="Dropping empty object."):"@value"in De?(ct="object with only @value",Mt="Dropping object with only @value."):"@list"in De?(ct="object with only @list",Mt="Dropping object with only @list."):1===Fe&&"@id"in De&&(ct="object with only @id",Mt="Dropping object with only @id."),Q({event:{type:["JsonLdEvent"],code:ct,level:"warning",message:Mt,details:{value:De}},options:Ze})}De=null}return De});return function(Te){return ze.apply(this,arguments)}}()},7613:(Oe,Re,G)=>{"use strict";const{isSubjectReference:$}=G(9094),{createMergedNodeMap:P}=G(5057),I={};Oe.exports=I,I.flatten=S=>{const N=P(S),C=[],T=Object.keys(N).sort();for(let M=0;M<T.length;++M){const H=N[T[M]];$(H)||C.push(H)}return C}},1938:(Oe,Re,G)=>{"use strict";const{isKeyword:$}=G(2134),P=G(9094),I=G(2353),S=G(4249),N=G(4920),C=G(3327),{createNodeMap:T,mergeNodeMapGraphs:M}=G(5057),H={};function F(U){const L={};for(const B in U)void 0!==U[B]&&(L["@"+B]=[U[B]]);return[L]}function X(U,L,B){for(let Q=B.length-1;Q>=0;--Q){const ue=B[Q];if(ue.graph===L&&ue.subject["@id"]===U["@id"])return!0}return!1}function ee(U,L,B){const Q="@"+B;let ue=Q in U?U[Q][0]:L[B];if("embed"===B)if(!0===ue)ue="@once";else if(!1===ue)ue="@never";else if("@always"!==ue&&"@never"!==ue&&"@link"!==ue&&"@first"!==ue&&"@last"!==ue&&"@once"!==ue)throw new C("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:U});return ue}function z(U){if(!I.isArray(U)||1!==U.length||!I.isObject(U[0]))throw new C("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:U});if("@id"in U[0])for(const L of S.asArray(U[0]["@id"]))if(!I.isObject(L)&&!N.isAbsolute(L)||I.isString(L)&&0===L.indexOf("_:"))throw new C("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:U});if("@type"in U[0])for(const L of S.asArray(U[0]["@type"]))if(!I.isObject(L)&&!N.isAbsolute(L)||I.isString(L)&&0===L.indexOf("_:"))throw new C("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:U})}function oe(U,L,B,Q){let ue=!0,ge=!1;for(const ie in B){let we=!1;const Pe=S.getValues(L,ie),me=0===S.getValues(B,ie).length;if("@id"===ie){if(I.isEmptyObject(B["@id"][0]||{})?we=!0:B["@id"].length>=0&&(we=B["@id"].includes(Pe[0])),!Q.requireAll)return we}else if("@type"===ie){if(ue=!1,me){if(Pe.length>0)return!1;we=!0}else if(1===B["@type"].length&&I.isEmptyObject(B["@type"][0]))we=Pe.length>0;else for(const We of B["@type"])we=!(!I.isObject(We)||!("@default"in We))||we||Pe.some(ze=>ze===We);if(!Q.requireAll)return we}else{if($(ie))continue;{const We=S.getValues(B,ie)[0];let ze=!1;if(We&&(z([We]),ze="@default"in We),ue=!1,0===Pe.length&&ze)continue;if(Pe.length>0&&me)return!1;if(void 0===We){if(Pe.length>0)return!1;we=!0}else if(P.isList(We)){const Te=We["@list"][0];if(P.isList(Pe[0])){const ve=Pe[0]["@list"];P.isValue(Te)?we=ve.some(fe=>ce(Te,fe)):(P.isSubject(Te)||P.isSubjectReference(Te))&&(we=ve.some(fe=>Ie(U,Te,fe,Q)))}}else we=P.isValue(We)?Pe.some(Te=>ce(We,Te)):P.isSubjectReference(We)?Pe.some(Te=>Ie(U,We,Te,Q)):!!I.isObject(We)&&Pe.length>0}}if(!we&&Q.requireAll)return!1;ge=ge||we}return ue||ge}function K(U,L){const B=U.uniqueEmbeds[U.graph],Q=B[L],ue=Q.parent,ge=Q.property,ie={"@id":L};if(I.isArray(ue)){for(let Pe=0;Pe<ue.length;++Pe)if(S.compareValues(ue[Pe],ie)){ue[Pe]=ie;break}}else{const Pe=I.isArray(ue[ge]);S.removeValue(ue,ge,ie,{propertyIsArray:Pe}),S.addValue(ue,ge,ie,{propertyIsArray:Pe})}const we=Pe=>{const me=Object.keys(B);for(const We of me)We in B&&I.isObject(B[We].parent)&&B[We].parent["@id"]===Pe&&(delete B[We],we(We))};we(L)}function le(U,L){if(I.isArray(U))return U.map(B=>le(B,L));if(I.isObject(U)){if("@preserve"in U)return U["@preserve"][0];if(P.isValue(U))return U;if(P.isList(U))return U["@list"]=le(U["@list"],L),U;if("@id"in U){const B=U["@id"];if(L.link.hasOwnProperty(B)){const Q=L.link[B].indexOf(U);if(-1!==Q)return L.link[B][Q];L.link[B].push(U)}else L.link[B]=[U]}for(const B in U)"@id"===B&&L.bnodesToClear.includes(U[B])?delete U["@id"]:U[B]=le(U[B],L)}return U}function J(U,L,B){I.isObject(U)?S.addValue(U,L,B,{propertyIsArray:!0}):U.push(B)}function Ie(U,L,B,Q){if(!("@id"in B))return!1;const ue=U.subjects[B["@id"]];return ue&&oe(U,ue,L,Q)}function ce(U,L){const B=L["@value"],Q=L["@type"],ue=L["@language"],ge=U["@value"]?I.isArray(U["@value"])?U["@value"]:[U["@value"]]:[],ie=U["@type"]?I.isArray(U["@type"])?U["@type"]:[U["@type"]]:[],we=U["@language"]?I.isArray(U["@language"])?U["@language"]:[U["@language"]]:[];return 0===ge.length&&0===ie.length&&0===we.length||!(!ge.includes(B)&&!I.isEmptyObject(ge[0])||!(!Q&&0===ie.length||ie.includes(Q)||Q&&I.isEmptyObject(ie[0]))||!(!ue&&0===we.length||we.includes(ue)||ue&&I.isEmptyObject(we[0])))}Oe.exports=H,H.frameMergedOrDefault=(U,L,B)=>{const Q={options:B,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},ue=new S.IdentifierIssuer("_:b");T(U,Q.graphMap,"@default",ue),B.merged&&(Q.graphMap["@merged"]=M(Q.graphMap),Q.graph="@merged"),Q.subjects=Q.graphMap[Q.graph];const ge=[];return H.frame(Q,Object.keys(Q.subjects).sort(),L,ge),B.pruneBlankNodeIdentifiers&&(B.bnodesToClear=Object.keys(Q.bnodeMap).filter(ie=>1===Q.bnodeMap[ie].length)),B.link={},le(ge,B)},H.frame=(U,L,B,Q,ue=null)=>{z(B);const ge=U.options,ie={embed:ee(B=B[0],ge,"embed"),explicit:ee(B,ge,"explicit"),requireAll:ee(B,ge,"requireAll")};U.link.hasOwnProperty(U.graph)||(U.link[U.graph]={});const we=U.link[U.graph],Pe=function q(U,L,B,Q){const ue={};for(const ge of L){const ie=U.graphMap[U.graph][ge];oe(U,ie,B,Q)&&(ue[ge]=ie)}return ue}(U,L,B,ie),me=Object.keys(Pe).sort();for(const We of me){const ze=Pe[We];if(null===ue?U.uniqueEmbeds={[U.graph]:{}}:U.uniqueEmbeds[U.graph]=U.uniqueEmbeds[U.graph]||{},"@link"===ie.embed&&We in we){J(Q,ue,we[We]);continue}const Te={"@id":We};if(0===We.indexOf("_:")&&S.addValue(U.bnodeMap,We,Te,{propertyIsArray:!0}),we[We]=Te,("@first"===ie.embed||"@last"===ie.embed)&&U.is11)throw new C("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:B});if(U.embedded||!U.uniqueEmbeds[U.graph].hasOwnProperty(We)){if(U.embedded&&("@never"===ie.embed||X(ze,U.graph,U.subjectStack))){J(Q,ue,Te);continue}if(U.embedded&&("@first"==ie.embed||"@once"==ie.embed)&&U.uniqueEmbeds[U.graph].hasOwnProperty(We)){J(Q,ue,Te);continue}if("@last"===ie.embed&&We in U.uniqueEmbeds[U.graph]&&K(U,We),U.uniqueEmbeds[U.graph][We]={parent:Q,property:ue},U.subjectStack.push({subject:ze,graph:U.graph}),We in U.graphMap){let ve=!1,fe=null;"@graph"in B?(fe=B["@graph"][0],ve=!("@merged"===We||"@default"===We),I.isObject(fe)||(fe={})):(ve="@merged"!==U.graph,fe={}),ve&&H.frame({...U,graph:We,embedded:!1},Object.keys(U.graphMap[We]).sort(),[fe],Te,"@graph")}"@included"in B&&H.frame({...U,embedded:!1},L,B["@included"],Te,"@included");for(const ve of Object.keys(ze).sort())if($(ve)){if(Te[ve]=S.clone(ze[ve]),"@type"===ve)for(const fe of ze["@type"])0===fe.indexOf("_:")&&S.addValue(U.bnodeMap,fe,Te,{propertyIsArray:!0})}else if(!ie.explicit||ve in B)for(const fe of ze[ve]){const Ze=ve in B?B[ve]:F(ie);if(P.isList(fe)){const $e=B[ve]&&B[ve][0]&&B[ve][0]["@list"]?B[ve][0]["@list"]:F(ie),Ne={"@list":[]};J(Te,ve,Ne);const Qe=fe["@list"];for(const kt of Qe)P.isSubjectReference(kt)?H.frame({...U,embedded:!0},[kt["@id"]],$e,Ne,"@list"):J(Ne,"@list",S.clone(kt))}else P.isSubjectReference(fe)?H.frame({...U,embedded:!0},[fe["@id"]],Ze,Te,ve):ce(Ze[0],fe)&&J(Te,ve,S.clone(fe))}for(const ve of Object.keys(B).sort()){if("@type"===ve){if(!I.isObject(B[ve][0])||!("@default"in B[ve][0]))continue}else if($(ve))continue;const fe=B[ve][0]||{};if(!ee(fe,ge,"omitDefault")&&!(ve in Te)){let $e="@null";"@default"in fe&&($e=S.clone(fe["@default"])),I.isArray($e)||($e=[$e]),Te[ve]=[{"@preserve":$e}]}}for(const ve of Object.keys(B["@reverse"]||{}).sort()){const fe=B["@reverse"][ve];for(const Ze of Object.keys(U.subjects))S.getValues(U.subjects[Ze],ve).some(Ne=>Ne["@id"]===We)&&(Te["@reverse"]=Te["@reverse"]||{},S.addValue(Te["@reverse"],ve,[],{propertyIsArray:!0}),H.frame({...U,embedded:!0},[Ze],fe,Te["@reverse"][ve],ue))}J(Q,ue,Te),U.subjectStack.pop()}}},H.cleanupNull=(U,L)=>{if(I.isArray(U))return U.map(Q=>H.cleanupNull(Q,L)).filter(Q=>Q);if("@null"===U)return null;if(I.isObject(U)){if("@id"in U){const B=U["@id"];if(L.link.hasOwnProperty(B)){const Q=L.link[B].indexOf(U);if(-1!==Q)return L.link[B][Q];L.link[B].push(U)}else L.link[B]=[U]}for(const B in U)U[B]=H.cleanupNull(U[B],L)}return U}},2216:(Oe,Re,G)=>{"use strict";var $=G(9344).default;const P=G(3327),I=G(9094),S=G(2353),{REGEX_BCP47:N,addValue:C}=G(4249),{handleEvent:T}=G(5775),{RDF_LIST:M,RDF_FIRST:H,RDF_REST:F,RDF_NIL:X,RDF_TYPE:ee,RDF_JSON_LITERAL:z,XSD_BOOLEAN:q,XSD_DOUBLE:oe,XSD_INTEGER:K,XSD_STRING:le}=G(313),J={};function Ie(ce,U,L,B){if(ce.termType.endsWith("Node"))return{"@id":ce.value};const Q={"@value":ce.value};if(ce.language)ce.language.match(N)||B.eventHandler&&T({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:ce.language}},options:B}),Q["@language"]=ce.language;else{let ue=ce.datatype.value;if(ue||(ue=le),ue===z){ue="@json";try{Q["@value"]=JSON.parse(Q["@value"])}catch(ge){throw new P("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:Q["@value"],cause:ge})}}if(U){if(ue===q)"true"===Q["@value"]?Q["@value"]=!0:"false"===Q["@value"]&&(Q["@value"]=!1);else if(S.isNumeric(Q["@value"]))if(ue===K){const ge=parseInt(Q["@value"],10);ge.toFixed(0)===Q["@value"]&&(Q["@value"]=ge)}else ue===oe&&(Q["@value"]=parseFloat(Q["@value"]));[q,K,oe,le].includes(ue)||(Q["@type"]=ue)}else if("i18n-datatype"===L&&ue.startsWith("https://www.w3.org/ns/i18n#")){const[,ge,ie]=ue.split(/[#_]/);ge.length>0&&(Q["@language"]=ge,ge.match(N)||B.eventHandler&&T({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:ge}},options:B})),Q["@direction"]=ie}else ue!==le&&(Q["@type"]=ue)}return Q}Oe.exports=J,J.fromRDF=function(){var ce=$(function*(U,L){const B={},Q={"@default":B},ue={},{useRdfType:ge=!1,useNativeTypes:ie=!1,rdfDirection:we=null}=L;for(const We of U){const ze="DefaultGraph"===We.graph.termType?"@default":We.graph.value;ze in Q||(Q[ze]={}),"@default"!==ze&&!(ze in B)&&(B[ze]={"@id":ze});const Te=Q[ze],ve=We.subject.value,fe=We.predicate.value,Ze=We.object;ve in Te||(Te[ve]={"@id":ve});const $e=Te[ve],Ne=Ze.termType.endsWith("Node");if(Ne&&!(Ze.value in Te)&&(Te[Ze.value]={"@id":Ze.value}),fe===ee&&!ge&&Ne){C($e,"@type",Ze.value,{propertyIsArray:!0});continue}const Qe=Ie(Ze,ie,we,L);if(C($e,fe,Qe,{propertyIsArray:!0}),Ne)if(Ze.value===X){const kt=Te[Ze.value];"usages"in kt||(kt.usages=[]),kt.usages.push({node:$e,property:fe,value:Qe})}else ue[Ze.value]=!(Ze.value in ue)&&{node:$e,property:fe,value:Qe}}for(const We in Q){const ze=Q[We];if(!(X in ze))continue;const Te=ze[X];if(Te.usages){for(let ve of Te.usages){let fe=ve.node,Ze=ve.property,$e=ve.value;const Ne=[],Qe=[];let kt=Object.keys(fe).length;for(;Ze===F&&S.isObject(ue[fe["@id"]])&&S.isArray(fe[H])&&1===fe[H].length&&S.isArray(fe[F])&&1===fe[F].length&&(3===kt||4===kt&&S.isArray(fe["@type"])&&1===fe["@type"].length&&fe["@type"][0]===M)&&(Ne.push(fe[H][0]),Qe.push(fe["@id"]),ve=ue[fe["@id"]],fe=ve.node,Ze=ve.property,$e=ve.value,kt=Object.keys(fe).length,I.isBlankNode(fe)););delete $e["@id"],$e["@list"]=Ne.reverse();for(const ft of Qe)delete ze[ft]}delete Te.usages}}const Pe=[],me=Object.keys(B).sort();for(const We of me){const ze=B[We];if(We in Q){const Te=ze["@graph"]=[],ve=Q[We],fe=Object.keys(ve).sort();for(const Ze of fe){const $e=ve[Ze];I.isSubjectReference($e)||Te.push($e)}}I.isSubjectReference(ze)||Pe.push(ze)}return Pe});return function(U,L){return ce.apply(this,arguments)}}()},9094:(Oe,Re,G)=>{"use strict";const $=G(2353),P={};Oe.exports=P,P.isSubject=I=>!(!$.isObject(I)||"@value"in I||"@set"in I||"@list"in I)&&(Object.keys(I).length>1||!("@id"in I)),P.isSubjectReference=I=>$.isObject(I)&&1===Object.keys(I).length&&"@id"in I,P.isValue=I=>$.isObject(I)&&"@value"in I,P.isList=I=>$.isObject(I)&&"@list"in I,P.isGraph=I=>$.isObject(I)&&"@graph"in I&&1===Object.keys(I).filter(S=>"@id"!==S&&"@index"!==S).length,P.isSimpleGraph=I=>P.isGraph(I)&&!("@id"in I),P.isBlankNode=I=>{if($.isObject(I)){if("@id"in I){const S=I["@id"];return!$.isString(S)||0===S.indexOf("_:")}return 0===Object.keys(I).length||!("@value"in I||"@set"in I||"@list"in I)}return!1}},5049:(Oe,Re,G)=>{var $=G(9344).default;const P=G(4308),I=G(2363),S=G(4249),N=G(4918),C=S.IdentifierIssuer,T=G(3327),M=G(5943),H=G(3865),{expand:F}=G(554),{flatten:X}=G(7613),{fromRDF:ee}=G(2216),{toRDF:z}=G(5671),{frameMergedOrDefault:q,cleanupNull:oe}=G(1938),{isArray:K,isObject:le,isString:J}=G(2353),{isSubjectReference:Ie}=G(9094),{expandIri:ce,getInitialContext:U,process:L,processingMode:B}=G(2134),{compact:Q,compactIri:ue}=G(9857),{createNodeMap:ge,createMergedNodeMap:ie,mergeNodeMaps:we}=G(5057),{logEventHandler:Pe,logWarningEventHandler:me,safeEventHandler:We,setDefaultEventHandler:ze,setupEventHandler:Te,strictEventHandler:ve,unhandledEventHandler:fe}=G(5775),Ze=function(Ne){const Qe={},ft=new M({max:100});function ot(lt,{documentLoader:Ge=Ne.documentLoader,...De}){if(lt&&"compactionMap"in lt)throw new T('"compactionMap" not supported.',"jsonld.OptionsError");if(lt&&"expansionMap"in lt)throw new T('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader:Ge},De,lt,{eventHandler:Te({options:lt})})}return Ne.compact=function(){var lt=$(function*(Ge,De,Fe){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===De)throw new T("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===Ge)return null;let ct;(Fe=ot(Fe,{base:J(Ge)?Ge:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new C("_:b"),contextResolver:new N({sharedCache:ft})})).link&&(Fe.skipExpansion=!0),Fe.compactToRelative||delete Fe.base,ct=Fe.skipExpansion?Ge:yield Ne.expand(Ge,Fe);const Mt=yield Ne.processContext(U(Fe),De,Fe);let dt=yield Q({activeCtx:Mt,element:ct,options:Fe});Fe.compactArrays&&!Fe.graph&&K(dt)?1===dt.length?dt=dt[0]:0===dt.length&&(dt={}):Fe.graph&&le(dt)&&(dt=[dt]),le(De)&&"@context"in De&&(De=De["@context"]),De=S.clone(De),K(De)||(De=[De]);const Ot=De;De=[];for(let Tt=0;Tt<Ot.length;++Tt)(!le(Ot[Tt])||Object.keys(Ot[Tt]).length>0)&&De.push(Ot[Tt]);const Jt=De.length>0;if(1===De.length&&(De=De[0]),K(dt)){const Tt=ue({activeCtx:Mt,iri:"@graph",relativeTo:{vocab:!0}}),en=dt;dt={},Jt&&(dt["@context"]=De),dt[Tt]=en}else if(le(dt)&&Jt){const Tt=dt;dt={"@context":De};for(const en in Tt)dt[en]=Tt[en]}return dt});return function(Ge,De,Fe){return lt.apply(this,arguments)}}(),Ne.expand=function(){var lt=$(function*(Ge,De){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");const Fe={},ct=[];if("expandContext"in(De=ot(De,{keepFreeFloatingNodes:!1,contextResolver:new N({sharedCache:ft})}))){const Jt=S.clone(De.expandContext);Fe.expandContext=le(Jt)&&"@context"in Jt?Jt:{"@context":Jt},ct.push(Fe.expandContext)}let Mt;if(J(Ge)){const Jt=yield Ne.get(Ge,De);Mt=Jt.documentUrl,Fe.input=Jt.document,Jt.contextUrl&&(Fe.remoteContext={"@context":Jt.contextUrl},ct.push(Fe.remoteContext))}else Fe.input=S.clone(Ge);"base"in De||(De.base=Mt||"");let dt=U(De);for(const Jt of ct)dt=yield L({activeCtx:dt,localCtx:Jt,options:De});let Ot=yield F({activeCtx:dt,element:Fe.input,options:De});return le(Ot)&&"@graph"in Ot&&1===Object.keys(Ot).length?Ot=Ot["@graph"]:null===Ot&&(Ot=[]),K(Ot)||(Ot=[Ot]),Ot});return function(Ge,De){return lt.apply(this,arguments)}}(),Ne.flatten=function(){var lt=$(function*(Ge,De,Fe){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");De="function"==typeof De?null:De||null,Fe=ot(Fe,{base:J(Ge)?Ge:"",contextResolver:new N({sharedCache:ft})});const ct=yield Ne.expand(Ge,Fe),Mt=X(ct);return null===De?Mt:(Fe.graph=!0,Fe.skipExpansion=!0,yield Ne.compact(Mt,De,Fe))});return function(Ge,De,Fe){return lt.apply(this,arguments)}}(),Ne.frame=function(){var lt=$(function*(Ge,De,Fe){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(Fe=ot(Fe,{base:J(Ge)?Ge:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new N({sharedCache:ft})}),J(De)){const Vn=yield Ne.get(De,Fe);if(De=Vn.document,Vn.contextUrl){let cr=De["@context"];cr?K(cr)?cr.push(Vn.contextUrl):cr=[cr,Vn.contextUrl]:cr=Vn.contextUrl,De["@context"]=cr}}const ct=De&&De["@context"]||{},Mt=yield Ne.processContext(U(Fe),ct,Fe);Fe.hasOwnProperty("omitGraph")||(Fe.omitGraph=B(Mt,1.1)),Fe.hasOwnProperty("pruneBlankNodeIdentifiers")||(Fe.pruneBlankNodeIdentifiers=B(Mt,1.1));const dt=yield Ne.expand(Ge,Fe),Ot={...Fe};Ot.isFrame=!0,Ot.keepFreeFloatingNodes=!0;const Jt=yield Ne.expand(De,Ot),Tt=Object.keys(De).map(Vn=>ce(Mt,Vn,{vocab:!0}));Ot.merged=!Tt.includes("@graph"),Ot.is11=B(Mt,1.1);const en=q(dt,Jt,Ot);Ot.graph=!Fe.omitGraph,Ot.skipExpansion=!0,Ot.link={},Ot.framing=!0;let on=yield Ne.compact(en,ct,Ot);return Ot.link={},on=oe(on,Ot),on});return function(Ge,De,Fe){return lt.apply(this,arguments)}}(),Ne.link=function(){var lt=$(function*(Ge,De,Fe){const ct={};return De&&(ct["@context"]=De),ct["@embed"]="@link",Ne.frame(Ge,ct,Fe)});return function(Ge,De,Fe){return lt.apply(this,arguments)}}(),Ne.normalize=Ne.canonize=function(){var lt=$(function*(Ge,De){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(De=ot(De,{base:J(Ge)?Ge:null,algorithm:"URDNA2015",skipExpansion:!1,safe:!0,contextResolver:new N({sharedCache:ft})}))){if("application/n-quads"!==De.inputFormat&&"application/nquads"!==De.inputFormat)throw new T("Unknown canonicalization input format.","jsonld.CanonizeError");const Mt=H.parse(Ge);return P.canonize(Mt,De)}const Fe={...De};delete Fe.format,Fe.produceGeneralizedRdf=!1;const ct=yield Ne.toRDF(Ge,Fe);return P.canonize(ct,De)});return function(Ge,De){return lt.apply(this,arguments)}}(),Ne.fromRDF=function(){var lt=$(function*(Ge,De){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");De=ot(De,{format:J(Ge)?"application/n-quads":void 0});const{format:Fe}=De;let{rdfParser:ct}=De;if(Fe){if(ct=ct||Qe[Fe],!ct)throw new T("Unknown input format.","jsonld.UnknownFormat",{format:Fe})}else ct=()=>Ge;const Mt=yield ct(Ge);return ee(Mt,De)});return function(Ge,De){return lt.apply(this,arguments)}}(),Ne.toRDF=function(){var lt=$(function*(Ge,De){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let Fe;Fe=(De=ot(De,{base:J(Ge)?Ge:"",skipExpansion:!1,contextResolver:new N({sharedCache:ft})})).skipExpansion?Ge:yield Ne.expand(Ge,De);const ct=z(Fe,De);if(De.format){if("application/n-quads"===De.format||"application/nquads"===De.format)return H.serialize(ct);throw new T("Unknown output format.","jsonld.UnknownFormat",{format:De.format})}return ct});return function(Ge,De){return lt.apply(this,arguments)}}(),Ne.createNodeMap=function(){var lt=$(function*(Ge,De){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");De=ot(De,{base:J(Ge)?Ge:"",contextResolver:new N({sharedCache:ft})});const Fe=yield Ne.expand(Ge,De);return ie(Fe,De)});return function(Ge,De){return lt.apply(this,arguments)}}(),Ne.merge=function(){var lt=$(function*(Ge,De,Fe){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!K(Ge))throw new TypeError('Could not merge, "docs" must be an array.');De="function"==typeof De?null:De||null,Fe=ot(Fe,{contextResolver:new N({sharedCache:ft})});const ct=yield Promise.all(Ge.map(Vn=>{const cr={...Fe};return Ne.expand(Vn,cr)}));let Mt=!0;"mergeNodes"in Fe&&(Mt=Fe.mergeNodes);const dt=Fe.issuer||new C("_:b"),Ot={"@default":{}};for(let Vn=0;Vn<ct.length;++Vn){const cr=S.relabelBlankNodes(ct[Vn],{issuer:new C("_:b"+Vn+"-")}),lr=Mt||0===Vn?Ot:{"@default":{}};if(ge(cr,lr,"@default",dt),lr!==Ot)for(const $r in lr){const ti=lr[$r];if(!($r in Ot)){Ot[$r]=ti;continue}const ds=Ot[$r];for(const hs in ti)hs in ds||(ds[hs]=ti[hs])}}const Jt=we(Ot),Tt=[],en=Object.keys(Jt).sort();for(let Vn=0;Vn<en.length;++Vn){const cr=Jt[en[Vn]];Ie(cr)||Tt.push(cr)}return null===De?Tt:(Fe.graph=!0,Fe.skipExpansion=!0,yield Ne.compact(Tt,De,Fe))});return function(Ge,De,Fe){return lt.apply(this,arguments)}}(),Object.defineProperty(Ne,"documentLoader",{get:()=>Ne._documentLoader,set:lt=>Ne._documentLoader=lt}),Ne.documentLoader=function(){var lt=$(function*(Ge){throw new T("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:Ge})});return function(Ge){return lt.apply(this,arguments)}}(),Ne.get=function(){var lt=$(function*(Ge,De){let Fe;Fe="function"==typeof De.documentLoader?De.documentLoader:Ne.documentLoader;const ct=yield Fe(Ge);try{if(!ct.document)throw new T("No remote document found at the given URL.","jsonld.NullRemoteDocument");J(ct.document)&&(ct.document=JSON.parse(ct.document))}catch(Mt){throw new T("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:Mt,remoteDoc:ct})}return ct});return function(Ge,De){return lt.apply(this,arguments)}}(),Ne.processContext=function(){var lt=$(function*(Ge,De,Fe){return Fe=ot(Fe,{base:"",contextResolver:new N({sharedCache:ft})}),null===De?U(Fe):(De=S.clone(De),le(De)&&"@context"in De||(De={"@context":De}),L({activeCtx:Ge,localCtx:De,options:Fe}))});return function(Ge,De,Fe){return lt.apply(this,arguments)}}(),Ne.getContextValue=G(2134).getContextValue,Ne.documentLoaders={},Ne.useDocumentLoader=function(lt){if(!(lt in Ne.documentLoaders))throw new T('Unknown document loader type: "'+lt+'"',"jsonld.UnknownDocumentLoader",{type:lt});Ne.documentLoader=Ne.documentLoaders[lt].apply(Ne,Array.prototype.slice.call(arguments,1))},Ne.registerRDFParser=function(lt,Ge){Qe[lt]=Ge},Ne.unregisterRDFParser=function(lt){delete Qe[lt]},Ne.registerRDFParser("application/n-quads",H.parse),Ne.registerRDFParser("application/nquads",H.parse),Ne.url=G(4920),Ne.logEventHandler=Pe,Ne.logWarningEventHandler=me,Ne.safeEventHandler=We,Ne.setDefaultEventHandler=ze,Ne.strictEventHandler=ve,Ne.unhandledEventHandler=fe,Ne.util=S,Object.assign(Ne,S),Ne.promises=Ne,Ne.RequestQueue=G(2210),Ne.JsonLdProcessor=G(779)(Ne),I.setupGlobals(Ne),I.setupDocumentLoaders(Ne),Ne},$e=function(){return Ze(function(){return $e()})};Ze($e),Oe.exports=$e},5057:(Oe,Re,G)=>{"use strict";const{isKeyword:$}=G(2134),P=G(9094),I=G(2353),S=G(4249),N=G(3327),C={};Oe.exports=C,C.createMergedNodeMap=(T,M)=>{const H=(M=M||{}).issuer||new S.IdentifierIssuer("_:b"),F={"@default":{}};return C.createNodeMap(T,F,"@default",H),C.mergeNodeMaps(F)},C.createNodeMap=(T,M,H,F,X,ee)=>{if(I.isArray(T)){for(const K of T)C.createNodeMap(K,M,H,F,void 0,ee);return}if(!I.isObject(T))return void(ee&&ee.push(T));if(P.isValue(T)){if("@type"in T){let K=T["@type"];0===K.indexOf("_:")&&(T["@type"]=K=F.getId(K))}return void(ee&&ee.push(T))}if(ee&&P.isList(T)){const K=[];return C.createNodeMap(T["@list"],M,H,F,X,K),void ee.push({"@list":K})}if("@type"in T){const K=T["@type"];for(const le of K)0===le.indexOf("_:")&&F.getId(le)}I.isUndefined(X)&&(X=P.isBlankNode(T)?F.getId(T["@id"]):T["@id"]),ee&&ee.push({"@id":X});const z=M[H],q=z[X]=z[X]||{};q["@id"]=X;const oe=Object.keys(T).sort();for(let K of oe){if("@id"===K)continue;if("@reverse"===K){const J={"@id":X},Ie=T["@reverse"];for(const ce in Ie){const U=Ie[ce];for(const L of U){let B=L["@id"];P.isBlankNode(L)&&(B=F.getId(B)),C.createNodeMap(L,M,H,F,B),S.addValue(z[B],ce,J,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===K){X in M||(M[X]={}),C.createNodeMap(T[K],M,X,F);continue}if("@included"===K){C.createNodeMap(T[K],M,H,F);continue}if("@type"!==K&&$(K)){if("@index"===K&&K in q&&(T[K]!==q[K]||T[K]["@id"]!==q[K]["@id"]))throw new N("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:q});q[K]=T[K];continue}const le=T[K];if(0===K.indexOf("_:")&&(K=F.getId(K)),0!==le.length)for(let J of le)if("@type"===K&&(J=0===J.indexOf("_:")?F.getId(J):J),P.isSubject(J)||P.isSubjectReference(J)){if("@id"in J&&!J["@id"])continue;const Ie=P.isBlankNode(J)?F.getId(J["@id"]):J["@id"];S.addValue(q,K,{"@id":Ie},{propertyIsArray:!0,allowDuplicate:!1}),C.createNodeMap(J,M,H,F,Ie)}else if(P.isValue(J))S.addValue(q,K,J,{propertyIsArray:!0,allowDuplicate:!1});else if(P.isList(J)){const Ie=[];C.createNodeMap(J["@list"],M,H,F,X,Ie),J={"@list":Ie},S.addValue(q,K,J,{propertyIsArray:!0,allowDuplicate:!1})}else C.createNodeMap(J,M,H,F,X),S.addValue(q,K,J,{propertyIsArray:!0,allowDuplicate:!1});else S.addValue(q,K,[],{propertyIsArray:!0})}},C.mergeNodeMapGraphs=T=>{const M={};for(const H of Object.keys(T).sort())for(const F of Object.keys(T[H]).sort()){const X=T[H][F];F in M||(M[F]={"@id":F});const ee=M[F];for(const z of Object.keys(X).sort())if($(z)&&"@type"!==z)ee[z]=S.clone(X[z]);else for(const q of X[z])S.addValue(ee,z,S.clone(q),{propertyIsArray:!0,allowDuplicate:!1})}return M},C.mergeNodeMaps=T=>{const M=T["@default"],H=Object.keys(T).sort();for(const F of H){if("@default"===F)continue;const X=T[F];let ee=M[F];ee?"@graph"in ee||(ee["@graph"]=[]):M[F]=ee={"@id":F,"@graph":[]};const z=ee["@graph"];for(const q of Object.keys(X).sort()){const oe=X[q];P.isSubjectReference(oe)||z.push(oe)}}return M}},2363:(Oe,Re,G)=>{"use strict";const $=G(8719),P={};Oe.exports=P,P.setupDocumentLoaders=function(I){typeof XMLHttpRequest<"u"&&(I.documentLoaders.xhr=$,I.useDocumentLoader("xhr"))},P.setupGlobals=function(I){typeof globalThis.JsonLdProcessor>"u"&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:I.JsonLdProcessor})}},5671:(Oe,Re,G)=>{"use strict";const{createNodeMap:$}=G(5057),{isKeyword:P}=G(2134),I=G(9094),S=G(5423),N=G(2353),C=G(4249),{handleEvent:T}=G(5775),{RDF_FIRST:M,RDF_REST:H,RDF_NIL:F,RDF_TYPE:X,RDF_JSON_LITERAL:ee,RDF_LANGSTRING:z,XSD_BOOLEAN:q,XSD_DOUBLE:oe,XSD_INTEGER:K,XSD_STRING:le}=G(313),{isAbsolute:J}=G(4920),Ie={};function ce(B,Q,ue,ge,ie){const we=Object.keys(Q).sort();for(const Pe of we){const me=Q[Pe],We=Object.keys(me).sort();for(let ze of We){const Te=me[ze];if("@type"===ze)ze=X;else if(P(ze))continue;for(const ve of Te){const fe={termType:Pe.startsWith("_:")?"BlankNode":"NamedNode",value:Pe};if(!J(Pe)){ie.eventHandler&&T({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:Pe}},options:ie});continue}const Ze={termType:ze.startsWith("_:")?"BlankNode":"NamedNode",value:ze};if(!J(ze)){ie.eventHandler&&T({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:ze}},options:ie});continue}if("BlankNode"===Ze.termType&&!ie.produceGeneralizedRdf){ie.eventHandler&&T({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:ge.getOldIds().find(Ne=>ge.getId(Ne)===ze)}},options:ie});continue}const $e=L(ve,ge,B,ue,ie.rdfDirection,ie);$e&&B.push({subject:fe,predicate:Ze,object:$e,graph:ue})}}}}function L(B,Q,ue,ge,ie,we){const Pe={};if(I.isValue(B)){Pe.termType="Literal",Pe.value=void 0,Pe.datatype={termType:"NamedNode"};let me=B["@value"];const We=B["@type"]||null;"@json"===We?(Pe.value=S(me),Pe.datatype.value=ee):N.isBoolean(me)?(Pe.value=me.toString(),Pe.datatype.value=We||q):N.isDouble(me)||We===oe?(N.isDouble(me)||(me=parseFloat(me)),Pe.value=me.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),Pe.datatype.value=We||oe):N.isNumber(me)?(Pe.value=me.toFixed(0),Pe.datatype.value=We||K):"i18n-datatype"===ie&&"@direction"in B?(Pe.datatype.value="https://www.w3.org/ns/i18n#"+(B["@language"]||"")+`_${B["@direction"]}`,Pe.value=me):"@language"in B?(Pe.value=me,Pe.datatype.value=We||z,Pe.language=B["@language"]):(Pe.value=me,Pe.datatype.value=We||le)}else if(I.isList(B)){const me=function U(B,Q,ue,ge,ie,we){const Pe={termType:"NamedNode",value:M},me={termType:"NamedNode",value:H},We={termType:"NamedNode",value:F},ze=B.pop(),Te=ze?{termType:"BlankNode",value:Q.getId()}:We;let ve=Te;for(const fe of B){const Ze=L(fe,Q,ue,ge,ie,we),$e={termType:"BlankNode",value:Q.getId()};ue.push({subject:ve,predicate:Pe,object:Ze,graph:ge}),ue.push({subject:ve,predicate:me,object:$e,graph:ge}),ve=$e}if(ze){const fe=L(ze,Q,ue,ge,ie,we);ue.push({subject:ve,predicate:Pe,object:fe,graph:ge}),ue.push({subject:ve,predicate:me,object:We,graph:ge})}return Te}(B["@list"],Q,ue,ge,ie,we);Pe.termType=me.termType,Pe.value=me.value}else{const me=N.isObject(B)?B["@id"]:B;Pe.termType=me.startsWith("_:")?"BlankNode":"NamedNode",Pe.value=me}return"NamedNode"!==Pe.termType||J(Pe.value)?Pe:(we.eventHandler&&T({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:Pe.value}},options:we}),null)}Oe.exports=Ie,Ie.toRDF=(B,Q)=>{const ue=new C.IdentifierIssuer("_:b"),ge={"@default":{}};$(B,ge,"@default",ue);const ie=[],we=Object.keys(ge).sort();for(const Pe of we){let me;if("@default"===Pe)me={termType:"DefaultGraph",value:""};else{if(!J(Pe)){Q.eventHandler&&T({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:Pe}},options:Q});continue}me=Pe.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"},me.value=Pe}ce(ie,ge[Pe],me,ue,Q)}return ie}},2353:Oe=>{"use strict";const Re={};Oe.exports=Re,Re.isArray=Array.isArray,Re.isBoolean=G=>"boolean"==typeof G||"[object Boolean]"===Object.prototype.toString.call(G),Re.isDouble=G=>Re.isNumber(G)&&(-1!==String(G).indexOf(".")||Math.abs(G)>=1e21),Re.isEmptyObject=G=>Re.isObject(G)&&0===Object.keys(G).length,Re.isNumber=G=>"number"==typeof G||"[object Number]"===Object.prototype.toString.call(G),Re.isNumeric=G=>!isNaN(parseFloat(G))&&isFinite(G),Re.isObject=G=>"[object Object]"===Object.prototype.toString.call(G),Re.isString=G=>"string"==typeof G||"[object String]"===Object.prototype.toString.call(G),Re.isUndefined=G=>typeof G>"u"},4920:(Oe,Re,G)=>{"use strict";const $=G(2353),P={};Oe.exports=P,P.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},P.parse=(S,N)=>{const C={},T=P.parsers[N||"full"],M=T.regex.exec(S);let H=T.keys.length;for(;H--;)C[T.keys[H]]=void 0===M[H]?null:M[H];return("https"===C.scheme&&"443"===C.port||"http"===C.scheme&&"80"===C.port)&&(C.href=C.href.replace(":"+C.port,""),C.authority=C.authority.replace(":"+C.port,""),C.port=null),C.normalizedPath=P.removeDotSegments(C.path),C},P.prependBase=(S,N)=>{if(null===S||P.isAbsolute(N))return N;(!S||$.isString(S))&&(S=P.parse(S||""));const C=P.parse(N),T={protocol:S.protocol||""};if(null!==C.authority)T.authority=C.authority,T.path=C.path,T.query=C.query;else if(T.authority=S.authority,""===C.path)T.path=S.path,T.query=null!==C.query?C.query:S.query;else{if(0===C.path.indexOf("/"))T.path=C.path;else{let H=S.path;H=H.substr(0,H.lastIndexOf("/")+1),(H.length>0||S.authority)&&"/"!==H.substr(-1)&&(H+="/"),H+=C.path,T.path=H}T.query=C.query}""!==C.path&&(T.path=P.removeDotSegments(T.path));let M=T.protocol;return null!==T.authority&&(M+="//"+T.authority),M+=T.path,null!==T.query&&(M+="?"+T.query),null!==C.fragment&&(M+="#"+C.fragment),""===M&&(M="./"),M},P.removeBase=(S,N)=>{if(null===S)return N;(!S||$.isString(S))&&(S=P.parse(S||""));let C="";if(""!==S.href?C+=(S.protocol||"")+"//"+(S.authority||""):N.indexOf("//")&&(C+="//"),0!==N.indexOf(C))return N;const T=P.parse(N.substr(C.length)),M=S.normalizedPath.split("/"),H=T.normalizedPath.split("/"),F=T.fragment||T.query?0:1;for(;M.length>0&&H.length>F&&M[0]===H[0];)M.shift(),H.shift();let X="";if(M.length>0){M.pop();for(let ee=0;ee<M.length;++ee)X+="../"}return X+=H.join("/"),null!==T.query&&(X+="?"+T.query),null!==T.fragment&&(X+="#"+T.fragment),""===X&&(X="./"),X},P.removeDotSegments=S=>{if(0===S.length)return"";const N=S.split("/"),C=[];for(;N.length>0;){const T=N.shift(),M=0===N.length;"."!==T?".."!==T?C.push(T):(C.pop(),M&&C.push("")):M&&C.push("")}return"/"===S[0]&&C.length>0&&""!==C[0]&&C.unshift(""),1===C.length&&""===C[0]?"/":C.join("/")};const I=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;P.isAbsolute=S=>$.isString(S)&&I.test(S),P.isRelative=S=>$.isString(S)},4249:(Oe,Re,G)=>{"use strict";const $=G(9094),P=G(2353),I=G(4308).IdentifierIssuer,S=G(3327),C=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,T=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,M=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,F_headers_accept="application/ld+json, application/json",X={};function ee(z,q){if(P.isArray(q))for(let oe=0;oe<q.length;++oe)q[oe]=ee(z,q[oe]);else if($.isList(q))q["@list"]=ee(z,q["@list"]);else if(P.isObject(q)){$.isBlankNode(q)&&(q["@id"]=z.getId(q["@id"]));const oe=Object.keys(q).sort();for(let K=0;K<oe.length;++K){const le=oe[K];"@id"!==le&&(q[le]=ee(z,q[le]))}}return q}Oe.exports=X,X.IdentifierIssuer=I,X.REGEX_BCP47=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,X.REGEX_KEYWORD=/^@[a-zA-Z]+$/,X.clone=function(z){if(z&&"object"==typeof z){let q;if(P.isArray(z)){q=[];for(let oe=0;oe<z.length;++oe)q[oe]=X.clone(z[oe])}else if(z instanceof Map){q=new Map;for(const[oe,K]of z)q.set(oe,X.clone(K))}else if(z instanceof Set){q=new Set;for(const oe of z)q.add(X.clone(oe))}else if(P.isObject(z)){q={};for(const oe in z)q[oe]=X.clone(z[oe])}else q=z.toString();return q}return z},X.asArray=function(z){return Array.isArray(z)?z:[z]},X.buildHeaders=(z={})=>{if(Object.keys(z).some(oe=>"accept"===oe.toLowerCase()))throw new RangeError('Accept header may not be specified; only "'+F_headers_accept+'" is supported.');return Object.assign({Accept:F_headers_accept},z)},X.parseLinkHeader=z=>{const q={},oe=z.match(C);for(let K=0;K<oe.length;++K){let le=oe[K].match(T);if(!le)continue;const J={target:le[1]},Ie=le[2];for(;le=M.exec(Ie);)J[le[1]]=void 0===le[2]?le[3]:le[2];const ce=J.rel||"";Array.isArray(q[ce])?q[ce].push(J):q[ce]=q.hasOwnProperty(ce)?[q[ce],J]:J}return q},X.validateTypeValue=(z,q)=>{if(!(P.isString(z)||P.isArray(z)&&z.every(oe=>P.isString(oe)))){if(q&&P.isObject(z))switch(Object.keys(z).length){case 0:return;case 1:if("@default"in z&&X.asArray(z["@default"]).every(oe=>P.isString(oe)))return}throw new S('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:z})}},X.hasProperty=(z,q)=>{if(z.hasOwnProperty(q)){const oe=z[q];return!P.isArray(oe)||oe.length>0}return!1},X.hasValue=(z,q,oe)=>{if(X.hasProperty(z,q)){let K=z[q];const le=$.isList(K);if(P.isArray(K)||le){le&&(K=K["@list"]);for(let J=0;J<K.length;++J)if(X.compareValues(oe,K[J]))return!0}else if(!P.isArray(oe))return X.compareValues(oe,K)}return!1},X.addValue=(z,q,oe,K)=>{if("propertyIsArray"in(K=K||{})||(K.propertyIsArray=!1),"valueIsArray"in K||(K.valueIsArray=!1),"allowDuplicate"in K||(K.allowDuplicate=!0),"prependValue"in K||(K.prependValue=!1),K.valueIsArray)z[q]=oe;else if(P.isArray(oe)){0===oe.length&&K.propertyIsArray&&!z.hasOwnProperty(q)&&(z[q]=[]),K.prependValue&&(oe=oe.concat(z[q]),z[q]=[]);for(let le=0;le<oe.length;++le)X.addValue(z,q,oe[le],K)}else if(z.hasOwnProperty(q)){const le=!K.allowDuplicate&&X.hasValue(z,q,oe);!P.isArray(z[q])&&(!le||K.propertyIsArray)&&(z[q]=[z[q]]),le||(K.prependValue?z[q].unshift(oe):z[q].push(oe))}else z[q]=K.propertyIsArray?[oe]:oe},X.getValues=(z,q)=>[].concat(z[q]||[]),X.removeProperty=(z,q)=>{delete z[q]},X.removeValue=(z,q,oe,K)=>{"propertyIsArray"in(K=K||{})||(K.propertyIsArray=!1);const le=X.getValues(z,q).filter(J=>!X.compareValues(J,oe));0===le.length?X.removeProperty(z,q):z[q]=1!==le.length||K.propertyIsArray?le:le[0]},X.relabelBlankNodes=(z,q)=>ee((q=q||{}).issuer||new I("_:b"),z),X.compareValues=(z,q)=>!!(z===q||$.isValue(z)&&$.isValue(q)&&z["@value"]===q["@value"]&&z["@type"]===q["@type"]&&z["@language"]===q["@language"]&&z["@index"]===q["@index"])||!!(P.isObject(z)&&"@id"in z&&P.isObject(q)&&"@id"in q)&&z["@id"]===q["@id"],X.compareShortestLeast=(z,q)=>z.length<q.length?-1:q.length<z.length?1:z===q?0:z<q?-1:1},5943:(Oe,Re,G)=>{"use strict";const $=G(1245),P=Symbol("max"),I=Symbol("length"),S=Symbol("lengthCalculator"),N=Symbol("allowStale"),C=Symbol("maxAge"),T=Symbol("dispose"),M=Symbol("noDisposeOnSet"),H=Symbol("lruList"),F=Symbol("cache"),X=Symbol("updateAgeOnGet"),ee=()=>1,q=(ce,U,L)=>{const B=ce[F].get(U);if(B){const Q=B.value;if(oe(ce,Q)){if(le(ce,B),!ce[N])return}else L&&(ce[X]&&(B.value.now=Date.now()),ce[H].unshiftNode(B));return Q.value}},oe=(ce,U)=>{if(!U||!U.maxAge&&!ce[C])return!1;const L=Date.now()-U.now;return U.maxAge?L>U.maxAge:ce[C]&&L>ce[C]},K=ce=>{if(ce[I]>ce[P])for(let U=ce[H].tail;ce[I]>ce[P]&&null!==U;){const L=U.prev;le(ce,U),U=L}},le=(ce,U)=>{if(U){const L=U.value;ce[T]&&ce[T](L.key,L.value),ce[I]-=L.length,ce[F].delete(L.key),ce[H].removeNode(U)}};class J{constructor(U,L,B,Q,ue){this.key=U,this.value=L,this.length=B,this.now=Q,this.maxAge=ue||0}}const Ie=(ce,U,L,B)=>{let Q=L.value;oe(ce,Q)&&(le(ce,L),ce[N]||(Q=void 0)),Q&&U.call(B,Q.value,Q.key,ce)};Oe.exports=class z{constructor(U){if("number"==typeof U&&(U={max:U}),U||(U={}),U.max&&("number"!=typeof U.max||U.max<0))throw new TypeError("max must be a non-negative number");this[P]=U.max||1/0;const B=U.length||ee;if(this[S]="function"!=typeof B?ee:B,this[N]=U.stale||!1,U.maxAge&&"number"!=typeof U.maxAge)throw new TypeError("maxAge must be a number");this[C]=U.maxAge||0,this[T]=U.dispose,this[M]=U.noDisposeOnSet||!1,this[X]=U.updateAgeOnGet||!1,this.reset()}set max(U){if("number"!=typeof U||U<0)throw new TypeError("max must be a non-negative number");this[P]=U||1/0,K(this)}get max(){return this[P]}set allowStale(U){this[N]=!!U}get allowStale(){return this[N]}set maxAge(U){if("number"!=typeof U)throw new TypeError("maxAge must be a non-negative number");this[C]=U,K(this)}get maxAge(){return this[C]}set lengthCalculator(U){"function"!=typeof U&&(U=ee),U!==this[S]&&(this[S]=U,this[I]=0,this[H].forEach(L=>{L.length=this[S](L.value,L.key),this[I]+=L.length})),K(this)}get lengthCalculator(){return this[S]}get length(){return this[I]}get itemCount(){return this[H].length}rforEach(U,L){L=L||this;for(let B=this[H].tail;null!==B;){const Q=B.prev;Ie(this,U,B,L),B=Q}}forEach(U,L){L=L||this;for(let B=this[H].head;null!==B;){const Q=B.next;Ie(this,U,B,L),B=Q}}keys(){return this[H].toArray().map(U=>U.key)}values(){return this[H].toArray().map(U=>U.value)}reset(){this[T]&&this[H]&&this[H].length&&this[H].forEach(U=>this[T](U.key,U.value)),this[F]=new Map,this[H]=new $,this[I]=0}dump(){return this[H].map(U=>!oe(this,U)&&{k:U.key,v:U.value,e:U.now+(U.maxAge||0)}).toArray().filter(U=>U)}dumpLru(){return this[H]}set(U,L,B){if((B=B||this[C])&&"number"!=typeof B)throw new TypeError("maxAge must be a number");const Q=B?Date.now():0,ue=this[S](L,U);if(this[F].has(U)){if(ue>this[P])return le(this,this[F].get(U)),!1;const we=this[F].get(U).value;return this[T]&&(this[M]||this[T](U,we.value)),we.now=Q,we.maxAge=B,we.value=L,this[I]+=ue-we.length,we.length=ue,this.get(U),K(this),!0}const ge=new J(U,L,ue,Q,B);return ge.length>this[P]?(this[T]&&this[T](U,L),!1):(this[I]+=ge.length,this[H].unshift(ge),this[F].set(U,this[H].head),K(this),!0)}has(U){if(!this[F].has(U))return!1;const L=this[F].get(U).value;return!oe(this,L)}get(U){return q(this,U,!0)}peek(U){return q(this,U,!1)}pop(){const U=this[H].tail;return U?(le(this,U),U.value):null}del(U){le(this,this[F].get(U))}load(U){this.reset();const L=Date.now();for(let B=U.length-1;B>=0;B--){const Q=U[B],ue=Q.e||0;if(0===ue)this.set(Q.k,Q.v);else{const ge=ue-L;ge>0&&this.set(Q.k,Q.v,ge)}}}prune(){this[F].forEach((U,L)=>q(this,L,!1))}}},6023:Oe=>{"use strict";Oe.exports=function(Re){Re.prototype[Symbol.iterator]=function*(){for(let G=this.head;G;G=G.next)yield G.value}}},1245:(Oe,Re,G)=>{"use strict";function $(C){var T=this;if(T instanceof $||(T=new $),T.tail=null,T.head=null,T.length=0,C&&"function"==typeof C.forEach)C.forEach(function(F){T.push(F)});else if(arguments.length>0)for(var M=0,H=arguments.length;M<H;M++)T.push(arguments[M]);return T}function P(C,T,M){var H=T===C.head?new N(M,null,T,C):new N(M,T,T.next,C);return null===H.next&&(C.tail=H),null===H.prev&&(C.head=H),C.length++,H}function I(C,T){C.tail=new N(T,C.tail,null,C),C.head||(C.head=C.tail),C.length++}function S(C,T){C.head=new N(T,null,C.head,C),C.tail||(C.tail=C.head),C.length++}function N(C,T,M,H){if(!(this instanceof N))return new N(C,T,M,H);this.list=H,this.value=C,T?(T.next=this,this.prev=T):this.prev=null,M?(M.prev=this,this.next=M):this.next=null}Oe.exports=$,$.Node=N,$.create=$,$.prototype.removeNode=function(C){if(C.list!==this)throw new Error("removing node which does not belong to this list");var T=C.next,M=C.prev;return T&&(T.prev=M),M&&(M.next=T),C===this.head&&(this.head=T),C===this.tail&&(this.tail=M),C.list.length--,C.next=null,C.prev=null,C.list=null,T},$.prototype.unshiftNode=function(C){if(C!==this.head){C.list&&C.list.removeNode(C);var T=this.head;C.list=this,C.next=T,T&&(T.prev=C),this.head=C,this.tail||(this.tail=C),this.length++}},$.prototype.pushNode=function(C){if(C!==this.tail){C.list&&C.list.removeNode(C);var T=this.tail;C.list=this,C.prev=T,T&&(T.next=C),this.tail=C,this.head||(this.head=C),this.length++}},$.prototype.push=function(){for(var C=0,T=arguments.length;C<T;C++)I(this,arguments[C]);return this.length},$.prototype.unshift=function(){for(var C=0,T=arguments.length;C<T;C++)S(this,arguments[C]);return this.length},$.prototype.pop=function(){if(this.tail){var C=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,C}},$.prototype.shift=function(){if(this.head){var C=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,C}},$.prototype.forEach=function(C,T){T=T||this;for(var M=this.head,H=0;null!==M;H++)C.call(T,M.value,H,this),M=M.next},$.prototype.forEachReverse=function(C,T){T=T||this;for(var M=this.tail,H=this.length-1;null!==M;H--)C.call(T,M.value,H,this),M=M.prev},$.prototype.get=function(C){for(var T=0,M=this.head;null!==M&&T<C;T++)M=M.next;if(T===C&&null!==M)return M.value},$.prototype.getReverse=function(C){for(var T=0,M=this.tail;null!==M&&T<C;T++)M=M.prev;if(T===C&&null!==M)return M.value},$.prototype.map=function(C,T){T=T||this;for(var M=new $,H=this.head;null!==H;)M.push(C.call(T,H.value,this)),H=H.next;return M},$.prototype.mapReverse=function(C,T){T=T||this;for(var M=new $,H=this.tail;null!==H;)M.push(C.call(T,H.value,this)),H=H.prev;return M},$.prototype.reduce=function(C,T){var M,H=this.head;if(arguments.length>1)M=T;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");H=this.head.next,M=this.head.value}for(var F=0;null!==H;F++)M=C(M,H.value,F),H=H.next;return M},$.prototype.reduceReverse=function(C,T){var M,H=this.tail;if(arguments.length>1)M=T;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");H=this.tail.prev,M=this.tail.value}for(var F=this.length-1;null!==H;F--)M=C(M,H.value,F),H=H.prev;return M},$.prototype.toArray=function(){for(var C=new Array(this.length),T=0,M=this.head;null!==M;T++)C[T]=M.value,M=M.next;return C},$.prototype.toArrayReverse=function(){for(var C=new Array(this.length),T=0,M=this.tail;null!==M;T++)C[T]=M.value,M=M.prev;return C},$.prototype.slice=function(C,T){(T=T||this.length)<0&&(T+=this.length),(C=C||0)<0&&(C+=this.length);var M=new $;if(T<C||T<0)return M;C<0&&(C=0),T>this.length&&(T=this.length);for(var H=0,F=this.head;null!==F&&H<C;H++)F=F.next;for(;null!==F&&H<T;H++,F=F.next)M.push(F.value);return M},$.prototype.sliceReverse=function(C,T){(T=T||this.length)<0&&(T+=this.length),(C=C||0)<0&&(C+=this.length);var M=new $;if(T<C||T<0)return M;C<0&&(C=0),T>this.length&&(T=this.length);for(var H=this.length,F=this.tail;null!==F&&H>T;H--)F=F.prev;for(;null!==F&&H>C;H--,F=F.prev)M.push(F.value);return M},$.prototype.splice=function(C,T,...M){C>this.length&&(C=this.length-1),C<0&&(C=this.length+C);for(var H=0,F=this.head;null!==F&&H<C;H++)F=F.next;var X=[];for(H=0;F&&H<T;H++)X.push(F.value),F=this.removeNode(F);for(null===F&&(F=this.tail),F!==this.head&&F!==this.tail&&(F=F.prev),H=0;H<M.length;H++)F=P(this,F,M[H]);return X},$.prototype.reverse=function(){for(var C=this.head,T=this.tail,M=C;null!==M;M=M.prev){var H=M.prev;M.prev=M.next,M.next=H}return this.head=T,this.tail=C,this};try{G(6023)($)}catch{}},5982:function(Oe){Oe.exports=function(Re){var G={};function $(P){if(G[P])return G[P].exports;var I=G[P]={i:P,l:!1,exports:{}};return Re[P].call(I.exports,I,I.exports,$),I.l=!0,I.exports}return $.m=Re,$.c=G,$.i=function(P){return P},$.d=function(P,I,S){$.o(P,I)||Object.defineProperty(P,I,{configurable:!1,enumerable:!0,get:S})},$.n=function(P){var I=P&&P.__esModule?function(){return P.default}:function(){return P};return $.d(I,"a",I),I},$.o=function(P,I){return Object.prototype.hasOwnProperty.call(P,I)},$.p="",$($.s=26)}([function(Re,G,$){"use strict";function P(){}P.QUALITY=1,P.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,P.DEFAULT_INCREMENTAL=!1,P.DEFAULT_ANIMATION_ON_LAYOUT=!0,P.DEFAULT_ANIMATION_DURING_LAYOUT=!1,P.DEFAULT_ANIMATION_PERIOD=50,P.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,P.DEFAULT_GRAPH_MARGIN=15,P.NODE_DIMENSIONS_INCLUDE_LABELS=!1,P.SIMPLE_NODE_HALF_SIZE=(P.SIMPLE_NODE_SIZE=40)/2,P.EMPTY_COMPOUND_NODE_SIZE=40,P.MIN_EDGE_LENGTH=1,P.INITIAL_WORLD_BOUNDARY=(P.WORLD_BOUNDARY=1e6)/1e3,P.WORLD_CENTER_X=1200,P.WORLD_CENTER_Y=900,Re.exports=P},function(Re,G,$){"use strict";var P=$(2),I=$(8),S=$(9);function N(T,M,H){P.call(this,H),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=H,this.bendpoints=[],this.source=T,this.target=M}for(var C in N.prototype=Object.create(P.prototype),P)N[C]=P[C];N.prototype.getSource=function(){return this.source},N.prototype.getTarget=function(){return this.target},N.prototype.isInterGraph=function(){return this.isInterGraph},N.prototype.getLength=function(){return this.length},N.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},N.prototype.getBendpoints=function(){return this.bendpoints},N.prototype.getLca=function(){return this.lca},N.prototype.getSourceInLca=function(){return this.sourceInLca},N.prototype.getTargetInLca=function(){return this.targetInLca},N.prototype.getOtherEnd=function(T){if(this.source===T)return this.target;if(this.target===T)return this.source;throw"Node is not incident with this edge"},N.prototype.getOtherEndInGraph=function(T,M){for(var H=this.getOtherEnd(T),F=M.getGraphManager().getRoot();;){if(H.getOwner()==M)return H;if(H.getOwner()==F)break;H=H.getOwner().getParent()}return null},N.prototype.updateLength=function(){var T=new Array(4);this.isOverlapingSourceAndTarget=I.getIntersection(this.target.getRect(),this.source.getRect(),T),this.isOverlapingSourceAndTarget||(this.lengthX=T[0]-T[2],this.lengthY=T[1]-T[3],Math.abs(this.lengthX)<1&&(this.lengthX=S.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=S.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},N.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=S.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=S.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},Re.exports=N},function(Re,G,$){"use strict";Re.exports=function P(I){this.vGraphObject=I}},function(Re,G,$){"use strict";var P=$(2),I=$(10),S=$(13),N=$(0),C=$(16),T=$(4);function M(F,X,ee,z){null==ee&&null==z&&(z=X),P.call(this,z),null!=F.graphManager&&(F=F.graphManager),this.estimatedSize=I.MIN_VALUE,this.inclusionTreeDepth=I.MAX_VALUE,this.vGraphObject=z,this.edges=[],this.graphManager=F,this.rect=null!=ee&&null!=X?new S(X.x,X.y,ee.width,ee.height):new S}for(var H in M.prototype=Object.create(P.prototype),P)M[H]=P[H];M.prototype.getEdges=function(){return this.edges},M.prototype.getChild=function(){return this.child},M.prototype.getOwner=function(){return this.owner},M.prototype.getWidth=function(){return this.rect.width},M.prototype.setWidth=function(F){this.rect.width=F},M.prototype.getHeight=function(){return this.rect.height},M.prototype.setHeight=function(F){this.rect.height=F},M.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},M.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},M.prototype.getCenter=function(){return new T(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},M.prototype.getLocation=function(){return new T(this.rect.x,this.rect.y)},M.prototype.getRect=function(){return this.rect},M.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},M.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},M.prototype.setRect=function(F,X){this.rect.x=F.x,this.rect.y=F.y,this.rect.width=X.width,this.rect.height=X.height},M.prototype.setCenter=function(F,X){this.rect.x=F-this.rect.width/2,this.rect.y=X-this.rect.height/2},M.prototype.setLocation=function(F,X){this.rect.x=F,this.rect.y=X},M.prototype.moveBy=function(F,X){this.rect.x+=F,this.rect.y+=X},M.prototype.getEdgeListToNode=function(F){var X=[],z=this;return z.edges.forEach(function(q){if(q.target==F){if(q.source!=z)throw"Incorrect edge source!";X.push(q)}}),X},M.prototype.getEdgesBetween=function(F){var X=[],z=this;return z.edges.forEach(function(q){if(q.source!=z&&q.target!=z)throw"Incorrect edge source and/or target";(q.target==F||q.source==F)&&X.push(q)}),X},M.prototype.getNeighborsList=function(){var F=new Set,X=this;return X.edges.forEach(function(ee){if(ee.source==X)F.add(ee.target);else{if(ee.target!=X)throw"Incorrect incidency!";F.add(ee.source)}}),F},M.prototype.withChildren=function(){var F=new Set;if(F.add(this),null!=this.child)for(var z=this.child.getNodes(),q=0;q<z.length;q++)z[q].withChildren().forEach(function(oe){F.add(oe)});return F},M.prototype.getNoOfChildren=function(){var F=0;if(null==this.child)F=1;else for(var ee=this.child.getNodes(),z=0;z<ee.length;z++)F+=ee[z].getNoOfChildren();return 0==F&&(F=1),F},M.prototype.getEstimatedSize=function(){if(this.estimatedSize==I.MIN_VALUE)throw"assert failed";return this.estimatedSize},M.prototype.calcEstimatedSize=function(){return null==this.child?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},M.prototype.scatter=function(){var F,X,ee=-N.INITIAL_WORLD_BOUNDARY,z=N.INITIAL_WORLD_BOUNDARY;F=N.WORLD_CENTER_X+C.nextDouble()*(z-ee)+ee;var q=-N.INITIAL_WORLD_BOUNDARY,oe=N.INITIAL_WORLD_BOUNDARY;X=N.WORLD_CENTER_Y+C.nextDouble()*(oe-q)+q,this.rect.x=F,this.rect.y=X},M.prototype.updateBounds=function(){if(null==this.getChild())throw"assert failed";if(0!=this.getChild().getNodes().length){var F=this.getChild();if(F.updateBounds(!0),this.rect.x=F.getLeft(),this.rect.y=F.getTop(),this.setWidth(F.getRight()-F.getLeft()),this.setHeight(F.getBottom()-F.getTop()),N.NODE_DIMENSIONS_INCLUDE_LABELS){var X=F.getRight()-F.getLeft(),ee=F.getBottom()-F.getTop();this.labelWidth>X&&(this.rect.x-=(this.labelWidth-X)/2,this.setWidth(this.labelWidth)),this.labelHeight>ee&&("center"==this.labelPos?this.rect.y-=(this.labelHeight-ee)/2:"top"==this.labelPos&&(this.rect.y-=this.labelHeight-ee),this.setHeight(this.labelHeight))}}},M.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==I.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},M.prototype.transform=function(F){var X=this.rect.x;X>N.WORLD_BOUNDARY?X=N.WORLD_BOUNDARY:X<-N.WORLD_BOUNDARY&&(X=-N.WORLD_BOUNDARY);var ee=this.rect.y;ee>N.WORLD_BOUNDARY?ee=N.WORLD_BOUNDARY:ee<-N.WORLD_BOUNDARY&&(ee=-N.WORLD_BOUNDARY);var z=new T(X,ee),q=F.inverseTransformPoint(z);this.setLocation(q.x,q.y)},M.prototype.getLeft=function(){return this.rect.x},M.prototype.getRight=function(){return this.rect.x+this.rect.width},M.prototype.getTop=function(){return this.rect.y},M.prototype.getBottom=function(){return this.rect.y+this.rect.height},M.prototype.getParent=function(){return null==this.owner?null:this.owner.getParent()},Re.exports=M},function(Re,G,$){"use strict";function P(I,S){null==I&&null==S?(this.x=0,this.y=0):(this.x=I,this.y=S)}P.prototype.getX=function(){return this.x},P.prototype.getY=function(){return this.y},P.prototype.setX=function(I){this.x=I},P.prototype.setY=function(I){this.y=I},P.prototype.getDifference=function(I){return new DimensionD(this.x-I.x,this.y-I.y)},P.prototype.getCopy=function(){return new P(this.x,this.y)},P.prototype.translate=function(I){return this.x+=I.width,this.y+=I.height,this},Re.exports=P},function(Re,G,$){"use strict";var P=$(2),I=$(10),S=$(0),N=$(6),C=$(3),T=$(1),M=$(13),H=$(12),F=$(11);function X(z,q,oe){P.call(this,oe),this.estimatedSize=I.MIN_VALUE,this.margin=S.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=z,null!=q&&q instanceof N?this.graphManager=q:null!=q&&q instanceof Layout&&(this.graphManager=q.graphManager)}for(var ee in X.prototype=Object.create(P.prototype),P)X[ee]=P[ee];X.prototype.getNodes=function(){return this.nodes},X.prototype.getEdges=function(){return this.edges},X.prototype.getGraphManager=function(){return this.graphManager},X.prototype.getParent=function(){return this.parent},X.prototype.getLeft=function(){return this.left},X.prototype.getRight=function(){return this.right},X.prototype.getTop=function(){return this.top},X.prototype.getBottom=function(){return this.bottom},X.prototype.isConnected=function(){return this.isConnected},X.prototype.add=function(z,q,oe){if(null==q&&null==oe){var K=z;if(null==this.graphManager)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(K)>-1)throw"Node already in graph!";return K.owner=this,this.getNodes().push(K),K}var le=z;if(!(this.getNodes().indexOf(q)>-1&&this.getNodes().indexOf(oe)>-1))throw"Source or target not in graph!";if(q.owner!=oe.owner||q.owner!=this)throw"Both owners must be this graph!";return q.owner!=oe.owner?null:(le.source=q,le.target=oe,le.isInterGraph=!1,this.getEdges().push(le),q.edges.push(le),oe!=q&&oe.edges.push(le),le)},X.prototype.remove=function(z){var q=z;if(z instanceof C){if(null==q)throw"Node is null!";if(null==q.owner||q.owner!=this)throw"Owner graph is invalid!";if(null==this.graphManager)throw"Owner graph manager is invalid!";for(var oe=q.edges.slice(),le=oe.length,J=0;J<le;J++)(K=oe[J]).isInterGraph?this.graphManager.remove(K):K.source.owner.remove(K);if(-1==(Ie=this.nodes.indexOf(q)))throw"Node not in owner node list!";this.nodes.splice(Ie,1)}else if(z instanceof T){var K;if(null==(K=z))throw"Edge is null!";if(null==K.source||null==K.target)throw"Source and/or target is null!";if(null==K.source.owner||null==K.target.owner||K.source.owner!=this||K.target.owner!=this)throw"Source and/or target owner is invalid!";var Ie,ce=K.source.edges.indexOf(K),U=K.target.edges.indexOf(K);if(!(ce>-1&&U>-1))throw"Source and/or target doesn't know this edge!";if(K.source.edges.splice(ce,1),K.target!=K.source&&K.target.edges.splice(U,1),-1==(Ie=K.source.owner.getEdges().indexOf(K)))throw"Not in owner's edge list!";K.source.owner.getEdges().splice(Ie,1)}},X.prototype.updateLeftTop=function(){for(var oe,K,le,z=I.MAX_VALUE,q=I.MAX_VALUE,J=this.getNodes(),Ie=J.length,ce=0;ce<Ie;ce++){var U=J[ce];z>(oe=U.getTop())&&(z=oe),q>(K=U.getLeft())&&(q=K)}return z==I.MAX_VALUE?null:(le=null!=J[0].getParent().paddingLeft?J[0].getParent().paddingLeft:this.margin,this.left=q-le,this.top=z-le,new H(this.left,this.top))},X.prototype.updateBounds=function(z){for(var J,Ie,ce,U,L,q=I.MAX_VALUE,oe=-I.MAX_VALUE,K=I.MAX_VALUE,le=-I.MAX_VALUE,B=this.nodes,Q=B.length,ue=0;ue<Q;ue++){var ge=B[ue];z&&null!=ge.child&&ge.updateBounds(),q>(J=ge.getLeft())&&(q=J),oe<(Ie=ge.getRight())&&(oe=Ie),K>(ce=ge.getTop())&&(K=ce),le<(U=ge.getBottom())&&(le=U)}var ie=new M(q,K,oe-q,le-K);q==I.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),L=null!=B[0].getParent().paddingLeft?B[0].getParent().paddingLeft:this.margin,this.left=ie.x-L,this.right=ie.x+ie.width+L,this.top=ie.y-L,this.bottom=ie.y+ie.height+L},X.calculateBounds=function(z){for(var J,Ie,ce,U,q=I.MAX_VALUE,oe=-I.MAX_VALUE,K=I.MAX_VALUE,le=-I.MAX_VALUE,L=z.length,B=0;B<L;B++){var Q=z[B];q>(J=Q.getLeft())&&(q=J),oe<(Ie=Q.getRight())&&(oe=Ie),K>(ce=Q.getTop())&&(K=ce),le<(U=Q.getBottom())&&(le=U)}return new M(q,K,oe-q,le-K)},X.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},X.prototype.getEstimatedSize=function(){if(this.estimatedSize==I.MIN_VALUE)throw"assert failed";return this.estimatedSize},X.prototype.calcEstimatedSize=function(){for(var z=0,q=this.nodes,oe=q.length,K=0;K<oe;K++)z+=q[K].calcEstimatedSize();return this.estimatedSize=0==z?S.EMPTY_COMPOUND_NODE_SIZE:z/Math.sqrt(this.nodes.length),this.estimatedSize},X.prototype.updateConnected=function(){var z=this;if(0!=this.nodes.length){var le,J,q=new F,oe=new Set,K=this.nodes[0];for(K.withChildren().forEach(function(ue){q.push(ue),oe.add(ue)});0!==q.length;)for(var ce=(le=(K=q.shift()).getEdges()).length,U=0;U<ce;U++)null==(J=le[U].getOtherEndInGraph(K,this))||oe.has(J)||J.withChildren().forEach(function(ue){q.push(ue),oe.add(ue)});if(this.isConnected=!1,oe.size>=this.nodes.length){var Q=0;oe.forEach(function(ue){ue.owner==z&&Q++}),Q==this.nodes.length&&(this.isConnected=!0)}}else this.isConnected=!0},Re.exports=X},function(Re,G,$){"use strict";var P,I=$(1);function S(N){P=$(5),this.layout=N,this.graphs=[],this.edges=[]}S.prototype.addRoot=function(){var N=this.layout.newGraph(),C=this.layout.newNode(null),T=this.add(N,C);return this.setRootGraph(T),this.rootGraph},S.prototype.add=function(N,C,T,M,H){if(null==T&&null==M&&null==H){if(null==N)throw"Graph is null!";if(null==C)throw"Parent node is null!";if(this.graphs.indexOf(N)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(N),null!=N.parent)throw"Already has a parent!";if(null!=C.child)throw"Already has a child!";return N.parent=C,C.child=N,N}H=T,T=N;var F=(M=C).getOwner(),X=H.getOwner();if(null==F||F.getGraphManager()!=this)throw"Source not in this graph mgr!";if(null==X||X.getGraphManager()!=this)throw"Target not in this graph mgr!";if(F==X)return T.isInterGraph=!1,F.add(T,M,H);if(T.isInterGraph=!0,T.source=M,T.target=H,this.edges.indexOf(T)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(T),null==T.source||null==T.target)throw"Edge source and/or target is null!";if(-1!=T.source.edges.indexOf(T)||-1!=T.target.edges.indexOf(T))throw"Edge already in source and/or target incidency list!";return T.source.edges.push(T),T.target.edges.push(T),T},S.prototype.remove=function(N){if(N instanceof P){var C=N;if(C.getGraphManager()!=this)throw"Graph not in this graph mgr";if(C!=this.rootGraph&&(null==C.parent||C.parent.graphManager!=this))throw"Invalid parent node!";for(var M,T=[],H=(T=T.concat(C.getEdges())).length,F=0;F<H;F++)C.remove(M=T[F]);var X=[];for(H=(X=X.concat(C.getNodes())).length,F=0;F<H;F++)C.remove(X[F]);C==this.rootGraph&&this.setRootGraph(null);var z=this.graphs.indexOf(C);this.graphs.splice(z,1),C.parent=null}else if(N instanceof I){if(null==(M=N))throw"Edge is null!";if(!M.isInterGraph)throw"Not an inter-graph edge!";if(null==M.source||null==M.target)throw"Source and/or target is null!";if(-1==M.source.edges.indexOf(M)||-1==M.target.edges.indexOf(M))throw"Source and/or target doesn't know this edge!";if(z=M.source.edges.indexOf(M),M.source.edges.splice(z,1),z=M.target.edges.indexOf(M),M.target.edges.splice(z,1),null==M.source.owner||null==M.source.owner.getGraphManager())throw"Edge owner graph or owner graph manager is null!";if(-1==M.source.owner.getGraphManager().edges.indexOf(M))throw"Not in owner graph manager's edge list!";z=M.source.owner.getGraphManager().edges.indexOf(M),M.source.owner.getGraphManager().edges.splice(z,1)}},S.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},S.prototype.getGraphs=function(){return this.graphs},S.prototype.getAllNodes=function(){if(null==this.allNodes){for(var N=[],C=this.getGraphs(),T=C.length,M=0;M<T;M++)N=N.concat(C[M].getNodes());this.allNodes=N}return this.allNodes},S.prototype.resetAllNodes=function(){this.allNodes=null},S.prototype.resetAllEdges=function(){this.allEdges=null},S.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},S.prototype.getAllEdges=function(){if(null==this.allEdges){for(var N=[],C=this.getGraphs(),M=0;M<C.length;M++)N=N.concat(C[M].getEdges());N=N.concat(this.edges),this.allEdges=N}return this.allEdges},S.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},S.prototype.setAllNodesToApplyGravitation=function(N){if(null!=this.allNodesToApplyGravitation)throw"assert failed";this.allNodesToApplyGravitation=N},S.prototype.getRoot=function(){return this.rootGraph},S.prototype.setRootGraph=function(N){if(N.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=N,null==N.parent&&(N.parent=this.layout.newNode("Root node"))},S.prototype.getLayout=function(){return this.layout},S.prototype.isOneAncestorOfOther=function(N,C){if(null==N||null==C)throw"assert failed";if(N==C)return!0;for(var M,T=N.getOwner();null!=(M=T.getParent());){if(M==C)return!0;if(null==(T=M.getOwner()))break}for(T=C.getOwner();null!=(M=T.getParent());){if(M==N)return!0;if(null==(T=M.getOwner()))break}return!1},S.prototype.calcLowestCommonAncestors=function(){for(var N,C,T,M,H,F=this.getAllEdges(),X=F.length,ee=0;ee<X;ee++)if(C=(N=F[ee]).source,T=N.target,N.lca=null,N.sourceInLca=C,N.targetInLca=T,C!=T){for(M=C.getOwner();null==N.lca;){for(N.targetInLca=T,H=T.getOwner();null==N.lca;){if(H==M){N.lca=H;break}if(H==this.rootGraph)break;if(null!=N.lca)throw"assert failed";N.targetInLca=H.getParent(),H=N.targetInLca.getOwner()}if(M==this.rootGraph)break;null==N.lca&&(N.sourceInLca=M.getParent(),M=N.sourceInLca.getOwner())}if(null==N.lca)throw"assert failed"}else N.lca=C.getOwner()},S.prototype.calcLowestCommonAncestor=function(N,C){if(N==C)return N.getOwner();for(var T=N.getOwner();null!=T;){for(var M=C.getOwner();null!=M;){if(M==T)return M;M=M.getParent().getOwner()}T=T.getParent().getOwner()}return T},S.prototype.calcInclusionTreeDepths=function(N,C){null==N&&null==C&&(N=this.rootGraph,C=1);for(var T,M=N.getNodes(),H=M.length,F=0;F<H;F++)(T=M[F]).inclusionTreeDepth=C,null!=T.child&&this.calcInclusionTreeDepths(T.child,C+1)},S.prototype.includesInvalidEdge=function(){for(var N,C=this.edges.length,T=0;T<C;T++)if(this.isOneAncestorOfOther((N=this.edges[T]).source,N.target))return!0;return!1},Re.exports=S},function(Re,G,$){"use strict";var P=$(0);function I(){}for(var S in P)I[S]=P[S];I.MAX_ITERATIONS=2500,I.DEFAULT_EDGE_LENGTH=50,I.DEFAULT_SPRING_STRENGTH=.45,I.DEFAULT_REPULSION_STRENGTH=4500,I.DEFAULT_GRAVITY_STRENGTH=.4,I.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,I.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,I.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,I.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,I.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,I.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,I.COOLING_ADAPTATION_FACTOR=.33,I.ADAPTATION_LOWER_NODE_LIMIT=1e3,I.ADAPTATION_UPPER_NODE_LIMIT=5e3,I.MAX_NODE_DISPLACEMENT=3*(I.MAX_NODE_DISPLACEMENT_INCREMENTAL=100),I.MIN_REPULSION_DIST=I.DEFAULT_EDGE_LENGTH/10,I.CONVERGENCE_CHECK_PERIOD=100,I.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,I.MIN_EDGE_LENGTH=1,I.GRID_CALCULATION_CHECK_PERIOD=10,Re.exports=I},function(Re,G,$){"use strict";var P=$(12);function I(){}I.calcSeparationAmount=function(S,N,C,T){if(!S.intersects(N))throw"assert failed";var M=new Array(2);this.decideDirectionsForOverlappingNodes(S,N,M),C[0]=Math.min(S.getRight(),N.getRight())-Math.max(S.x,N.x),C[1]=Math.min(S.getBottom(),N.getBottom())-Math.max(S.y,N.y),S.getX()<=N.getX()&&S.getRight()>=N.getRight()?C[0]+=Math.min(N.getX()-S.getX(),S.getRight()-N.getRight()):N.getX()<=S.getX()&&N.getRight()>=S.getRight()&&(C[0]+=Math.min(S.getX()-N.getX(),N.getRight()-S.getRight())),S.getY()<=N.getY()&&S.getBottom()>=N.getBottom()?C[1]+=Math.min(N.getY()-S.getY(),S.getBottom()-N.getBottom()):N.getY()<=S.getY()&&N.getBottom()>=S.getBottom()&&(C[1]+=Math.min(S.getY()-N.getY(),N.getBottom()-S.getBottom()));var H=Math.abs((N.getCenterY()-S.getCenterY())/(N.getCenterX()-S.getCenterX()));N.getCenterY()===S.getCenterY()&&N.getCenterX()===S.getCenterX()&&(H=1);var F=H*C[0],X=C[1]/H;C[0]<X?X=C[0]:F=C[1],C[0]=-1*M[0]*(X/2+T),C[1]=-1*M[1]*(F/2+T)},I.decideDirectionsForOverlappingNodes=function(S,N,C){C[0]=S.getCenterX()<N.getCenterX()?-1:1,C[1]=S.getCenterY()<N.getCenterY()?-1:1},I.getIntersection2=function(S,N,C){var T=S.getCenterX(),M=S.getCenterY(),H=N.getCenterX(),F=N.getCenterY();if(S.intersects(N))return C[0]=T,C[1]=M,C[2]=H,C[3]=F,!0;var X=S.getX(),ee=S.getY(),z=S.getRight(),q=S.getX(),oe=S.getBottom(),K=S.getRight(),le=S.getWidthHalf(),J=S.getHeightHalf(),Ie=N.getX(),ce=N.getY(),U=N.getRight(),L=N.getX(),B=N.getBottom(),Q=N.getRight(),ue=N.getWidthHalf(),ge=N.getHeightHalf(),ie=!1,we=!1;if(T===H){if(M>F)return C[0]=T,C[1]=ee,C[2]=H,C[3]=B,!1;if(M<F)return C[0]=T,C[1]=oe,C[2]=H,C[3]=ce,!1}else if(M===F){if(T>H)return C[0]=X,C[1]=M,C[2]=U,C[3]=F,!1;if(T<H)return C[0]=z,C[1]=M,C[2]=Ie,C[3]=F,!1}else{var Pe=S.height/S.width,me=N.height/N.width,We=(F-M)/(H-T),ze=void 0,Te=void 0,fe=void 0,$e=void 0;if(-Pe===We?T>H?(C[0]=q,C[1]=oe,ie=!0):(C[0]=z,C[1]=ee,ie=!0):Pe===We&&(T>H?(C[0]=X,C[1]=ee,ie=!0):(C[0]=K,C[1]=oe,ie=!0)),-me===We?H>T?(C[2]=L,C[3]=B,we=!0):(C[2]=U,C[3]=ce,we=!0):me===We&&(H>T?(C[2]=Ie,C[3]=ce,we=!0):(C[2]=Q,C[3]=B,we=!0)),ie&&we)return!1;if(T>H?M>F?(ze=this.getCardinalDirection(Pe,We,4),Te=this.getCardinalDirection(me,We,2)):(ze=this.getCardinalDirection(-Pe,We,3),Te=this.getCardinalDirection(-me,We,1)):M>F?(ze=this.getCardinalDirection(-Pe,We,1),Te=this.getCardinalDirection(-me,We,3)):(ze=this.getCardinalDirection(Pe,We,2),Te=this.getCardinalDirection(me,We,4)),!ie)switch(ze){case 1:fe=ee,C[0]=T+-J/We,C[1]=fe;break;case 2:fe=M+le*We,C[0]=K,C[1]=fe;break;case 3:fe=oe,C[0]=T+J/We,C[1]=fe;break;case 4:fe=M+-le*We,C[0]=q,C[1]=fe}if(!we)switch(Te){case 1:$e=ce,C[2]=H+-ge/We,C[3]=$e;break;case 2:$e=F+ue*We,C[2]=Q,C[3]=$e;break;case 3:$e=B,C[2]=H+ge/We,C[3]=$e;break;case 4:$e=F+-ue*We,C[2]=L,C[3]=$e}}return!1},I.getCardinalDirection=function(S,N,C){return S>N?C:1+C%4},I.getIntersection=function(S,N,C,T){if(null==T)return this.getIntersection2(S,N,C);var J,Ie,ce,U,L,B,Q,M=S.x,H=S.y,F=N.x,X=N.y,ee=C.x,z=C.y,q=T.x,oe=T.y;return L=F*H-M*X,B=q*z-ee*oe,0==(Q=(J=X-H)*(U=ee-q)-(Ie=oe-z)*(ce=M-F))?null:new P((ce*B-U*L)/Q,(Ie*L-J*B)/Q)},I.angleOfVector=function(S,N,C,T){var M=void 0;return S!==C?(M=Math.atan((T-N)/(C-S)),C<S?M+=Math.PI:T<N&&(M+=this.TWO_PI)):M=T<N?this.ONE_AND_HALF_PI:this.HALF_PI,M},I.doIntersect=function(S,N,C,T){var M=S.x,H=S.y,F=N.x,X=N.y,ee=C.x,z=C.y,q=T.x,oe=T.y,K=(F-M)*(oe-z)-(q-ee)*(X-H);if(0===K)return!1;var le=((oe-z)*(q-M)+(ee-q)*(oe-H))/K,J=((H-X)*(q-M)+(F-M)*(oe-H))/K;return 0<le&&le<1&&0<J&&J<1},I.HALF_PI=.5*Math.PI,I.ONE_AND_HALF_PI=1.5*Math.PI,I.TWO_PI=2*Math.PI,I.THREE_PI=3*Math.PI,Re.exports=I},function(Re,G,$){"use strict";function P(){}P.sign=function(I){return I>0?1:I<0?-1:0},P.floor=function(I){return I<0?Math.ceil(I):Math.floor(I)},P.ceil=function(I){return I<0?Math.floor(I):Math.ceil(I)},Re.exports=P},function(Re,G,$){"use strict";function P(){}P.MAX_VALUE=2147483647,P.MIN_VALUE=-2147483648,Re.exports=P},function(Re,G,$){"use strict";var P=function(){function M(H,F){for(var X=0;X<F.length;X++){var ee=F[X];ee.enumerable=ee.enumerable||!1,ee.configurable=!0,"value"in ee&&(ee.writable=!0),Object.defineProperty(H,ee.key,ee)}}return function(H,F,X){return F&&M(H.prototype,F),X&&M(H,X),H}}();var S=function(H){return{value:H,next:null,prev:null}},N=function(H,F,X,ee){return null!==H?H.next=F:ee.head=F,null!==X?X.prev=F:ee.tail=F,F.prev=H,F.next=X,ee.length++,F},C=function(H,F){var X=H.prev,ee=H.next;return null!==X?X.next=ee:F.head=ee,null!==ee?ee.prev=X:F.tail=X,H.prev=H.next=null,F.length--,H},T=function(){function M(H){var F=this;(function I(M,H){if(!(M instanceof H))throw new TypeError("Cannot call a class as a function")})(this,M),this.length=0,this.head=null,this.tail=null,H?.forEach(function(X){return F.push(X)})}return P(M,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(F,X){return N(X.prev,S(F),X,this)}},{key:"insertAfter",value:function(F,X){return N(X,S(F),X.next,this)}},{key:"insertNodeBefore",value:function(F,X){return N(X.prev,F,X,this)}},{key:"insertNodeAfter",value:function(F,X){return N(X,F,X.next,this)}},{key:"push",value:function(F){return N(this.tail,S(F),null,this)}},{key:"unshift",value:function(F){return N(null,S(F),this.head,this)}},{key:"remove",value:function(F){return C(F,this)}},{key:"pop",value:function(){return C(this.tail,this).value}},{key:"popNode",value:function(){return C(this.tail,this)}},{key:"shift",value:function(){return C(this.head,this).value}},{key:"shiftNode",value:function(){return C(this.head,this)}},{key:"get_object_at",value:function(F){if(F<=this.length()){for(var X=1,ee=this.head;X<F;)ee=ee.next,X++;return ee.value}}},{key:"set_object_at",value:function(F,X){if(F<=this.length()){for(var ee=1,z=this.head;ee<F;)z=z.next,ee++;z.value=X}}}]),M}();Re.exports=T},function(Re,G,$){"use strict";function P(I,S,N){this.x=null,this.y=null,null==I&&null==S&&null==N?(this.x=0,this.y=0):"number"==typeof I&&"number"==typeof S&&null==N?(this.x=I,this.y=S):"Point"==I.constructor.name&&null==S&&null==N&&(this.x=(N=I).x,this.y=N.y)}P.prototype.getX=function(){return this.x},P.prototype.getY=function(){return this.y},P.prototype.getLocation=function(){return new P(this.x,this.y)},P.prototype.setLocation=function(I,S,N){"Point"==I.constructor.name&&null==S&&null==N?this.setLocation((N=I).x,N.y):"number"==typeof I&&"number"==typeof S&&null==N&&(parseInt(I)==I&&parseInt(S)==S?this.move(I,S):(this.x=Math.floor(I+.5),this.y=Math.floor(S+.5)))},P.prototype.move=function(I,S){this.x=I,this.y=S},P.prototype.translate=function(I,S){this.x+=I,this.y+=S},P.prototype.equals=function(I){return"Point"==I.constructor.name?this.x==I.x&&this.y==I.y:this==I},P.prototype.toString=function(){return(new P).constructor.name+"[x="+this.x+",y="+this.y+"]"},Re.exports=P},function(Re,G,$){"use strict";function P(I,S,N,C){this.x=0,this.y=0,this.width=0,this.height=0,null!=I&&null!=S&&null!=N&&null!=C&&(this.x=I,this.y=S,this.width=N,this.height=C)}P.prototype.getX=function(){return this.x},P.prototype.setX=function(I){this.x=I},P.prototype.getY=function(){return this.y},P.prototype.setY=function(I){this.y=I},P.prototype.getWidth=function(){return this.width},P.prototype.setWidth=function(I){this.width=I},P.prototype.getHeight=function(){return this.height},P.prototype.setHeight=function(I){this.height=I},P.prototype.getRight=function(){return this.x+this.width},P.prototype.getBottom=function(){return this.y+this.height},P.prototype.intersects=function(I){return!(this.getRight()<I.x||this.getBottom()<I.y||I.getRight()<this.x||I.getBottom()<this.y)},P.prototype.getCenterX=function(){return this.x+this.width/2},P.prototype.getMinX=function(){return this.getX()},P.prototype.getMaxX=function(){return this.getX()+this.width},P.prototype.getCenterY=function(){return this.y+this.height/2},P.prototype.getMinY=function(){return this.getY()},P.prototype.getMaxY=function(){return this.getY()+this.height},P.prototype.getWidthHalf=function(){return this.width/2},P.prototype.getHeightHalf=function(){return this.height/2},Re.exports=P},function(Re,G,$){"use strict";var P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S};function I(){}I.lastID=0,I.createID=function(S){return I.isPrimitive(S)?S:(null!=S.uniqueID||(S.uniqueID=I.getString(),I.lastID++),S.uniqueID)},I.getString=function(S){return null==S&&(S=I.lastID),"Object#"+S},I.isPrimitive=function(S){var N=typeof S>"u"?"undefined":P(S);return null==S||"object"!=N&&"function"!=N},Re.exports=I},function(Re,G,$){"use strict";function P(ee){if(Array.isArray(ee)){for(var z=0,q=Array(ee.length);z<ee.length;z++)q[z]=ee[z];return q}return Array.from(ee)}var I=$(0),S=$(6),N=$(3),C=$(1),T=$(5),M=$(4),H=$(17),F=$(27);function X(ee){F.call(this),this.layoutQuality=I.QUALITY,this.createBendsAsNeeded=I.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=I.DEFAULT_INCREMENTAL,this.animationOnLayout=I.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=I.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=I.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=I.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new S(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,null!=ee&&(this.isRemoteUse=ee)}X.RANDOM_SEED=1,(X.prototype=Object.create(F.prototype)).getGraphManager=function(){return this.graphManager},X.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},X.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},X.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},X.prototype.newGraphManager=function(){var ee=new S(this);return this.graphManager=ee,ee},X.prototype.newGraph=function(ee){return new T(null,this.graphManager,ee)},X.prototype.newNode=function(ee){return new N(this.graphManager,ee)},X.prototype.newEdge=function(ee){return new C(null,null,ee)},X.prototype.checkLayoutSuccess=function(){return null==this.graphManager.getRoot()||0==this.graphManager.getRoot().getNodes().length||this.graphManager.includesInvalidEdge()},X.prototype.runLayout=function(){var ee;return this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters(),ee=!this.checkLayoutSuccess()&&this.layout(),"during"!==I.ANIMATE&&(ee&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,ee)},X.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},X.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var z=this.graphManager.getAllEdges(),q=0;q<z.length;q++);var K=this.graphManager.getRoot().getNodes();for(q=0;q<K.length;q++);this.update(this.graphManager.getRoot())}},X.prototype.update=function(ee){if(null==ee)this.update2();else if(ee instanceof N){var z=ee;if(null!=z.getChild())for(var q=z.getChild().getNodes(),oe=0;oe<q.length;oe++)update(q[oe]);null!=z.vGraphObject&&z.vGraphObject.update(z)}else ee instanceof C?null!=ee.vGraphObject&&ee.vGraphObject.update(ee):ee instanceof T&&null!=ee.vGraphObject&&ee.vGraphObject.update(ee)},X.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=I.QUALITY,this.animationDuringLayout=I.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=I.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=I.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=I.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=I.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=I.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},X.prototype.transform=function(ee){if(null==ee)this.transform(new M(0,0));else{var z=new H,q=this.graphManager.getRoot().updateLeftTop();if(null!=q){z.setWorldOrgX(ee.x),z.setWorldOrgY(ee.y),z.setDeviceOrgX(q.x),z.setDeviceOrgY(q.y);for(var oe=this.getAllNodes(),le=0;le<oe.length;le++)oe[le].transform(z)}}},X.prototype.positionNodesRandomly=function(ee){if(null==ee)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var z,q,oe=ee.getNodes(),K=0;K<oe.length;K++)null==(q=(z=oe[K]).getChild())||0==q.getNodes().length?z.scatter():(this.positionNodesRandomly(q),z.updateBounds())},X.prototype.getFlatForest=function(){for(var ee=[],z=!0,q=this.graphManager.getRoot().getNodes(),oe=!0,K=0;K<q.length;K++)null!=q[K].getChild()&&(oe=!1);if(!oe)return ee;var le=new Set,J=[],Ie=new Map,ce=[];for(ce=ce.concat(q);ce.length>0&&z;){for(J.push(ce[0]);J.length>0&&z;){var U=J[0];J.splice(0,1),le.add(U);var L=U.getEdges();for(K=0;K<L.length;K++){var B=L[K].getOtherEnd(U);if(Ie.get(U)!=B){if(le.has(B)){z=!1;break}J.push(B),Ie.set(B,U)}}}if(z){var Q=[].concat(P(le));for(ee.push(Q),K=0;K<Q.length;K++){var ge=ce.indexOf(Q[K]);ge>-1&&ce.splice(ge,1)}le=new Set,Ie=new Map}else ee=[]}return ee},X.prototype.createDummyNodesForBendpoints=function(ee){for(var z=[],q=ee.source,oe=this.graphManager.calcLowestCommonAncestor(ee.source,ee.target),K=0;K<ee.bendpoints.length;K++){var le=this.newNode(null);le.setRect(new Point(0,0),new Dimension(1,1)),oe.add(le);var J=this.newEdge(null);this.graphManager.add(J,q,le),z.add(le),q=le}return J=this.newEdge(null),this.graphManager.add(J,q,ee.target),this.edgeToDummyNodes.set(ee,z),ee.isInterGraph()?this.graphManager.remove(ee):oe.remove(ee),z},X.prototype.createBendpointsFromDummyNodes=function(){var ee=[];ee=ee.concat(this.graphManager.getAllEdges()),ee=[].concat(P(this.edgeToDummyNodes.keys())).concat(ee);for(var z=0;z<ee.length;z++){var q=ee[z];if(q.bendpoints.length>0){for(var oe=this.edgeToDummyNodes.get(q),K=0;K<oe.length;K++){var le=oe[K],J=new M(le.getCenterX(),le.getCenterY()),Ie=q.bendpoints.get(K);Ie.x=J.x,Ie.y=J.y,le.getOwner().remove(le)}this.graphManager.add(q,q.source,q.target)}}},X.transform=function(ee,z,q,oe){if(null!=q&&null!=oe){var K=z;return ee<=50?K-=(z-z/q)/50*(50-ee):K+=(z*oe-z)/50*(ee-50),K}var Ie,ce;return ee<=50?(Ie=9*z/500,ce=z/10):(Ie=9*z/50,ce=-8*z),Ie*ee+ce},X.findCenterOfTree=function(ee){var z=[];z=z.concat(ee);var q=[],oe=new Map,K=!1,le=null;(1==z.length||2==z.length)&&(K=!0,le=z[0]);for(var J=0;J<z.length;J++){var ce=(Ie=z[J]).getNeighborsList().size;oe.set(Ie,Ie.getNeighborsList().size),1==ce&&q.push(Ie)}var U=[];for(U=U.concat(q);!K;){var L=[];for(L=L.concat(U),U=[],J=0;J<z.length;J++){var Ie,B=z.indexOf(Ie=z[J]);B>=0&&z.splice(B,1),Ie.getNeighborsList().forEach(function(ie){if(q.indexOf(ie)<0){var Pe=oe.get(ie)-1;1==Pe&&U.push(ie),oe.set(ie,Pe)}})}q=q.concat(U),(1==z.length||2==z.length)&&(K=!0,le=z[0])}return le},X.prototype.setGraphManager=function(ee){this.graphManager=ee},Re.exports=X},function(Re,G,$){"use strict";function P(){}P.seed=1,P.x=0,P.nextDouble=function(){return(P.x=1e4*Math.sin(P.seed++))-Math.floor(P.x)},Re.exports=P},function(Re,G,$){"use strict";var P=$(4);function I(S,N){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}I.prototype.getWorldOrgX=function(){return this.lworldOrgX},I.prototype.setWorldOrgX=function(S){this.lworldOrgX=S},I.prototype.getWorldOrgY=function(){return this.lworldOrgY},I.prototype.setWorldOrgY=function(S){this.lworldOrgY=S},I.prototype.getWorldExtX=function(){return this.lworldExtX},I.prototype.setWorldExtX=function(S){this.lworldExtX=S},I.prototype.getWorldExtY=function(){return this.lworldExtY},I.prototype.setWorldExtY=function(S){this.lworldExtY=S},I.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},I.prototype.setDeviceOrgX=function(S){this.ldeviceOrgX=S},I.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},I.prototype.setDeviceOrgY=function(S){this.ldeviceOrgY=S},I.prototype.getDeviceExtX=function(){return this.ldeviceExtX},I.prototype.setDeviceExtX=function(S){this.ldeviceExtX=S},I.prototype.getDeviceExtY=function(){return this.ldeviceExtY},I.prototype.setDeviceExtY=function(S){this.ldeviceExtY=S},I.prototype.transformX=function(S){var N=0,C=this.lworldExtX;return 0!=C&&(N=this.ldeviceOrgX+(S-this.lworldOrgX)*this.ldeviceExtX/C),N},I.prototype.transformY=function(S){var N=0,C=this.lworldExtY;return 0!=C&&(N=this.ldeviceOrgY+(S-this.lworldOrgY)*this.ldeviceExtY/C),N},I.prototype.inverseTransformX=function(S){var N=0,C=this.ldeviceExtX;return 0!=C&&(N=this.lworldOrgX+(S-this.ldeviceOrgX)*this.lworldExtX/C),N},I.prototype.inverseTransformY=function(S){var N=0,C=this.ldeviceExtY;return 0!=C&&(N=this.lworldOrgY+(S-this.ldeviceOrgY)*this.lworldExtY/C),N},I.prototype.inverseTransformPoint=function(S){return new P(this.inverseTransformX(S.x),this.inverseTransformY(S.y))},Re.exports=I},function(Re,G,$){"use strict";var I=$(15),S=$(7),N=$(0),C=$(8),T=$(9);function M(){I.call(this),this.useSmartIdealEdgeLengthCalculation=S.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.idealEdgeLength=S.DEFAULT_EDGE_LENGTH,this.springConstant=S.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=S.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=S.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=S.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=S.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=S.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*S.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=S.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=S.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=S.MAX_ITERATIONS}for(var H in M.prototype=Object.create(I.prototype),I)M[H]=I[H];M.prototype.initParameters=function(){I.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=S.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},M.prototype.calcIdealEdgeLengths=function(){for(var F,X,ee,z,q,oe,K=this.getGraphManager().getAllEdges(),le=0;le<K.length;le++)(F=K[le]).idealLength=this.idealEdgeLength,F.isInterGraph&&(ee=F.getSource(),z=F.getTarget(),q=F.getSourceInLca().getEstimatedSize(),oe=F.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(F.idealLength+=q+oe-2*N.SIMPLE_NODE_SIZE),X=F.getLca().getInclusionTreeDepth(),F.idealLength+=S.DEFAULT_EDGE_LENGTH*S.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(ee.getInclusionTreeDepth()+z.getInclusionTreeDepth()-2*X))},M.prototype.initSpringEmbedder=function(){var F=this.getAllNodes().length;this.incremental?(F>S.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*S.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(F-S.ADAPTATION_LOWER_NODE_LIMIT)/(S.ADAPTATION_UPPER_NODE_LIMIT-S.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-S.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=S.MAX_NODE_DISPLACEMENT_INCREMENTAL):(this.coolingFactor=F>S.ADAPTATION_LOWER_NODE_LIMIT?Math.max(S.COOLING_ADAPTATION_FACTOR,1-(F-S.ADAPTATION_LOWER_NODE_LIMIT)/(S.ADAPTATION_UPPER_NODE_LIMIT-S.ADAPTATION_LOWER_NODE_LIMIT)*(1-S.COOLING_ADAPTATION_FACTOR)):1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=S.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(5*this.getAllNodes().length,this.maxIterations),this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},M.prototype.calcSpringForces=function(){for(var X,F=this.getAllEdges(),ee=0;ee<F.length;ee++)this.calcSpringForce(X=F[ee],X.idealLength)},M.prototype.calcRepulsionForces=function(){var ee,z,q,oe,le,F=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],X=arguments.length>1&&void 0!==arguments[1]&&arguments[1],K=this.getAllNodes();if(this.useFRGridVariant)for(this.totalIterations%S.GRID_CALCULATION_CHECK_PERIOD==1&&F&&this.updateGrid(),le=new Set,ee=0;ee<K.length;ee++)this.calculateRepulsionForceOfANode(q=K[ee],le,F,X),le.add(q);else for(ee=0;ee<K.length;ee++)for(q=K[ee],z=ee+1;z<K.length;z++)oe=K[z],q.getOwner()==oe.getOwner()&&this.calcRepulsionForce(q,oe)},M.prototype.calcGravitationalForces=function(){for(var X=this.getAllNodesToApplyGravitation(),ee=0;ee<X.length;ee++)this.calcGravitationalForce(X[ee])},M.prototype.moveNodes=function(){for(var F=this.getAllNodes(),ee=0;ee<F.length;ee++)F[ee].move()},M.prototype.calcSpringForce=function(F,X){var q,oe,K,le,ee=F.getSource(),z=F.getTarget();if(this.uniformLeafNodeSizes&&null==ee.getChild()&&null==z.getChild())F.updateLengthSimple();else if(F.updateLength(),F.isOverlapingSourceAndTarget)return;0!=(q=F.getLength())&&(le=(oe=this.springConstant*(q-X))*(F.lengthY/q),ee.springForceX+=K=oe*(F.lengthX/q),ee.springForceY+=le,z.springForceX-=K,z.springForceY-=le)},M.prototype.calcRepulsionForce=function(F,X){var K,le,J,Ie,ce,U,L,ee=F.getRect(),z=X.getRect(),q=new Array(2),oe=new Array(4);if(ee.intersects(z)){C.calcSeparationAmount(ee,z,q,S.DEFAULT_EDGE_LENGTH/2),L=2*q[1];var B=F.noOfChildren*X.noOfChildren/(F.noOfChildren+X.noOfChildren);F.repulsionForceX-=B*(U=2*q[0]),F.repulsionForceY-=B*L,X.repulsionForceX+=B*U,X.repulsionForceY+=B*L}else this.uniformLeafNodeSizes&&null==F.getChild()&&null==X.getChild()?(K=z.getCenterX()-ee.getCenterX(),le=z.getCenterY()-ee.getCenterY()):(C.getIntersection(ee,z,oe),K=oe[2]-oe[0],le=oe[3]-oe[1]),Math.abs(K)<S.MIN_REPULSION_DIST&&(K=T.sign(K)*S.MIN_REPULSION_DIST),Math.abs(le)<S.MIN_REPULSION_DIST&&(le=T.sign(le)*S.MIN_REPULSION_DIST),J=K*K+le*le,Ie=Math.sqrt(J),L=(ce=this.repulsionConstant*F.noOfChildren*X.noOfChildren/J)*le/Ie,F.repulsionForceX-=U=ce*K/Ie,F.repulsionForceY-=L,X.repulsionForceX+=U,X.repulsionForceY+=L},M.prototype.calcGravitationalForce=function(F){var X,ee,z,q,oe,K,le,J;ee=((X=F.getOwner()).getRight()+X.getLeft())/2,z=(X.getTop()+X.getBottom())/2,q=F.getCenterX()-ee,oe=F.getCenterY()-z,K=Math.abs(q)+F.getWidth()/2,le=Math.abs(oe)+F.getHeight()/2,F.getOwner()==this.graphManager.getRoot()?(K>(J=X.getEstimatedSize()*this.gravityRangeFactor)||le>J)&&(F.gravitationForceX=-this.gravityConstant*q,F.gravitationForceY=-this.gravityConstant*oe):(K>(J=X.getEstimatedSize()*this.compoundGravityRangeFactor)||le>J)&&(F.gravitationForceX=-this.gravityConstant*q*this.compoundGravityConstant,F.gravitationForceY=-this.gravityConstant*oe*this.compoundGravityConstant)},M.prototype.isConverged=function(){var F,X=!1;return this.totalIterations>this.maxIterations/3&&(X=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),F=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,F||X},M.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},M.prototype.calcNoOfChildrenForAllNodes=function(){for(var F,X=this.graphManager.getAllNodes(),ee=0;ee<X.length;ee++)(F=X[ee]).noOfChildren=F.getNoOfChildren()},M.prototype.calcGrid=function(F){var X,ee;X=parseInt(Math.ceil((F.getRight()-F.getLeft())/this.repulsionRange)),ee=parseInt(Math.ceil((F.getBottom()-F.getTop())/this.repulsionRange));for(var z=new Array(X),q=0;q<X;q++)z[q]=new Array(ee);for(q=0;q<X;q++)for(var oe=0;oe<ee;oe++)z[q][oe]=new Array;return z},M.prototype.addNodeToGrid=function(F,X,ee){var z,q,oe,K;z=parseInt(Math.floor((F.getRect().x-X)/this.repulsionRange)),q=parseInt(Math.floor((F.getRect().width+F.getRect().x-X)/this.repulsionRange)),oe=parseInt(Math.floor((F.getRect().y-ee)/this.repulsionRange)),K=parseInt(Math.floor((F.getRect().height+F.getRect().y-ee)/this.repulsionRange));for(var le=z;le<=q;le++)for(var J=oe;J<=K;J++)this.grid[le][J].push(F),F.setGridCoordinates(z,q,oe,K)},M.prototype.updateGrid=function(){var F,ee=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),F=0;F<ee.length;F++)this.addNodeToGrid(ee[F],this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},M.prototype.calculateRepulsionForceOfANode=function(F,X,ee,z){if(this.totalIterations%S.GRID_CALCULATION_CHECK_PERIOD==1&&ee||z){var q=new Set;F.surrounding=new Array;for(var oe,K=this.grid,le=F.startX-1;le<F.finishX+2;le++)for(var J=F.startY-1;J<F.finishY+2;J++)if(!(le<0||J<0||le>=K.length||J>=K[0].length))for(var Ie=0;Ie<K[le][J].length;Ie++)if(oe=K[le][J][Ie],F.getOwner()==oe.getOwner()&&F!=oe&&!X.has(oe)&&!q.has(oe)){var ce=Math.abs(F.getCenterX()-oe.getCenterX())-(F.getWidth()/2+oe.getWidth()/2),U=Math.abs(F.getCenterY()-oe.getCenterY())-(F.getHeight()/2+oe.getHeight()/2);ce<=this.repulsionRange&&U<=this.repulsionRange&&q.add(oe)}F.surrounding=[].concat(function P(F){if(Array.isArray(F)){for(var X=0,ee=Array(F.length);X<F.length;X++)ee[X]=F[X];return ee}return Array.from(F)}(q))}for(le=0;le<F.surrounding.length;le++)this.calcRepulsionForce(F,F.surrounding[le])},M.prototype.calcRepulsionRange=function(){return 0},Re.exports=M},function(Re,G,$){"use strict";var P=$(1),I=$(7);function S(C,T,M){P.call(this,C,T,M),this.idealLength=I.DEFAULT_EDGE_LENGTH}for(var N in S.prototype=Object.create(P.prototype),P)S[N]=P[N];Re.exports=S},function(Re,G,$){"use strict";var P=$(3);function I(N,C,T,M){P.call(this,N,C,T,M),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}for(var S in I.prototype=Object.create(P.prototype),P)I[S]=P[S];I.prototype.setGridCoordinates=function(N,C,T,M){this.startX=N,this.finishX=C,this.startY=T,this.finishY=M},Re.exports=I},function(Re,G,$){"use strict";function P(I,S){this.width=0,this.height=0,null!==I&&null!==S&&(this.height=S,this.width=I)}P.prototype.getWidth=function(){return this.width},P.prototype.setWidth=function(I){this.width=I},P.prototype.getHeight=function(){return this.height},P.prototype.setHeight=function(I){this.height=I},Re.exports=P},function(Re,G,$){"use strict";var P=$(14);function I(){this.map={},this.keys=[]}I.prototype.put=function(S,N){var C=P.createID(S);this.contains(C)||(this.map[C]=N,this.keys.push(S))},I.prototype.contains=function(S){return P.createID(S),null!=this.map[S]},I.prototype.get=function(S){var N=P.createID(S);return this.map[N]},I.prototype.keySet=function(){return this.keys},Re.exports=I},function(Re,G,$){"use strict";var P=$(14);function I(){this.set={}}I.prototype.add=function(S){var N=P.createID(S);this.contains(N)||(this.set[N]=S)},I.prototype.remove=function(S){delete this.set[P.createID(S)]},I.prototype.clear=function(){this.set={}},I.prototype.contains=function(S){return this.set[P.createID(S)]==S},I.prototype.isEmpty=function(){return 0===this.size()},I.prototype.size=function(){return Object.keys(this.set).length},I.prototype.addAllTo=function(S){for(var N=Object.keys(this.set),C=N.length,T=0;T<C;T++)S.push(this.set[N[T]])},I.prototype.size=function(){return Object.keys(this.set).length},I.prototype.addAll=function(S){for(var N=S.length,C=0;C<N;C++)this.add(S[C])},Re.exports=I},function(Re,G,$){"use strict";var P=function(){function C(T,M){for(var H=0;H<M.length;H++){var F=M[H];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(T,F.key,F)}}return function(T,M,H){return M&&C(T.prototype,M),H&&C(T,H),T}}();var S=$(11),N=function(){function C(T,M){(function I(C,T){if(!(C instanceof T))throw new TypeError("Cannot call a class as a function")})(this,C),(null!==M||void 0!==M)&&(this.compareFunction=this._defaultCompareFunction);var H;H=T instanceof S?T.size():T.length,this._quicksort(T,0,H-1)}return P(C,[{key:"_quicksort",value:function(M,H,F){if(H<F){var X=this._partition(M,H,F);this._quicksort(M,H,X),this._quicksort(M,X+1,F)}}},{key:"_partition",value:function(M,H,F){for(var X=this._get(M,H),ee=H,z=F;;){for(;this.compareFunction(X,this._get(M,z));)z--;for(;this.compareFunction(this._get(M,ee),X);)ee++;if(!(ee<z))return z;this._swap(M,ee,z),ee++,z--}}},{key:"_get",value:function(M,H){return M instanceof S?M.get_object_at(H):M[H]}},{key:"_set",value:function(M,H,F){M instanceof S?M.set_object_at(H,F):M[H]=F}},{key:"_swap",value:function(M,H,F){var X=this._get(M,H);this._set(M,H,this._get(M,F)),this._set(M,F,X)}},{key:"_defaultCompareFunction",value:function(M,H){return H>M}}]),C}();Re.exports=N},function(Re,G,$){"use strict";var P=function(){function N(C,T){for(var M=0;M<T.length;M++){var H=T[M];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(C,H.key,H)}}return function(C,T,M){return T&&N(C.prototype,T),M&&N(C,M),C}}();function I(N,C){if(!(N instanceof C))throw new TypeError("Cannot call a class as a function")}var S=function(){function N(C,T){var M=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,H=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,F=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;I(this,N),this.sequence1=C,this.sequence2=T,this.match_score=M,this.mismatch_penalty=H,this.gap_penalty=F,this.iMax=C.length+1,this.jMax=T.length+1,this.grid=new Array(this.iMax);for(var X=0;X<this.iMax;X++){this.grid[X]=new Array(this.jMax);for(var ee=0;ee<this.jMax;ee++)this.grid[X][ee]=0}this.tracebackGrid=new Array(this.iMax);for(var z=0;z<this.iMax;z++){this.tracebackGrid[z]=new Array(this.jMax);for(var q=0;q<this.jMax;q++)this.tracebackGrid[z][q]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return P(N,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var T=1;T<this.jMax;T++)this.grid[0][T]=this.grid[0][T-1]+this.gap_penalty,this.tracebackGrid[0][T]=[!1,!1,!0];for(var M=1;M<this.iMax;M++)this.grid[M][0]=this.grid[M-1][0]+this.gap_penalty,this.tracebackGrid[M][0]=[!1,!0,!1];for(var H=1;H<this.iMax;H++)for(var F=1;F<this.jMax;F++){var q=[this.sequence1[H-1]===this.sequence2[F-1]?this.grid[H-1][F-1]+this.match_score:this.grid[H-1][F-1]+this.mismatch_penalty,this.grid[H-1][F]+this.gap_penalty,this.grid[H][F-1]+this.gap_penalty],oe=this.arrayAllMaxIndexes(q);this.grid[H][F]=q[oe[0]],this.tracebackGrid[H][F]=[oe.includes(0),oe.includes(1),oe.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var T=[];for(T.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});T[0];){var M=T[0],H=this.tracebackGrid[M.pos[0]][M.pos[1]];H[0]&&T.push({pos:[M.pos[0]-1,M.pos[1]-1],seq1:this.sequence1[M.pos[0]-1]+M.seq1,seq2:this.sequence2[M.pos[1]-1]+M.seq2}),H[1]&&T.push({pos:[M.pos[0]-1,M.pos[1]],seq1:this.sequence1[M.pos[0]-1]+M.seq1,seq2:"-"+M.seq2}),H[2]&&T.push({pos:[M.pos[0],M.pos[1]-1],seq1:"-"+M.seq1,seq2:this.sequence2[M.pos[1]-1]+M.seq2}),0===M.pos[0]&&0===M.pos[1]&&this.alignments.push({sequence1:M.seq1,sequence2:M.seq2}),T.shift()}return this.alignments}},{key:"getAllIndexes",value:function(T,M){for(var H=[],F=-1;-1!==(F=T.indexOf(M,F+1));)H.push(F);return H}},{key:"arrayAllMaxIndexes",value:function(T){return this.getAllIndexes(T,Math.max.apply(null,T))}}]),N}();Re.exports=S},function(Re,G,$){"use strict";var P=function(){};P.FDLayout=$(18),P.FDLayoutConstants=$(7),P.FDLayoutEdge=$(19),P.FDLayoutNode=$(20),P.DimensionD=$(21),P.HashMap=$(22),P.HashSet=$(23),P.IGeometry=$(8),P.IMath=$(9),P.Integer=$(10),P.Point=$(12),P.PointD=$(4),P.RandomSeed=$(16),P.RectangleD=$(13),P.Transform=$(17),P.UniqueIDGeneretor=$(14),P.Quicksort=$(24),P.LinkedList=$(11),P.LGraphObject=$(2),P.LGraph=$(5),P.LEdge=$(1),P.LGraphManager=$(6),P.LNode=$(3),P.Layout=$(15),P.LayoutConstants=$(0),P.NeedlemanWunsch=$(25),Re.exports=P},function(Re,G,$){"use strict";function P(){this.listeners=[]}var I=P.prototype;I.addListener=function(S,N){this.listeners.push({event:S,callback:N})},I.removeListener=function(S,N){for(var C=this.listeners.length;C>=0;C--){var T=this.listeners[C];T.event===S&&T.callback===N&&this.listeners.splice(C,1)}},I.emit=function(S,N){for(var C=0;C<this.listeners.length;C++){var T=this.listeners[C];S===T.event&&T.callback(N)}},Re.exports=P}])},4994:(Oe,Re,G)=>{var $=G(4312),P=G(6421),I=G(5764),S=G(8685),N=G(6676);function C(T){var M=-1,H=null==T?0:T.length;for(this.clear();++M<H;){var F=T[M];this.set(F[0],F[1])}}C.prototype.clear=$,C.prototype.delete=P,C.prototype.get=I,C.prototype.has=S,C.prototype.set=N,Oe.exports=C},9215:(Oe,Re,G)=>{var $=G(1840),P=G(4378),I=G(4981),S=G(7343),N=G(8895);function C(T){var M=-1,H=null==T?0:T.length;for(this.clear();++M<H;){var F=T[M];this.set(F[0],F[1])}}C.prototype.clear=$,C.prototype.delete=P,C.prototype.get=I,C.prototype.has=S,C.prototype.set=N,Oe.exports=C},1501:(Oe,Re,G)=>{var I=G(3436)(G(2119),"Map");Oe.exports=I},9850:(Oe,Re,G)=>{var $=G(638),P=G(1184),I=G(866),S=G(3771),N=G(1772);function C(T){var M=-1,H=null==T?0:T.length;for(this.clear();++M<H;){var F=T[M];this.set(F[0],F[1])}}C.prototype.clear=$,C.prototype.delete=P,C.prototype.get=I,C.prototype.has=S,C.prototype.set=N,Oe.exports=C},443:(Oe,Re,G)=>{var $=G(2119);Oe.exports=$.Symbol},4633:Oe=>{Oe.exports=function Re(G,$){for(var P=-1,I=null==G?0:G.length,S=Array(I);++P<I;)S[P]=$(G[P],P,G);return S}},9719:(Oe,Re,G)=>{var $=G(5683),P=G(217),S=Object.prototype.hasOwnProperty;Oe.exports=function N(C,T,M){var H=C[T];(!S.call(C,T)||!P(H,M)||void 0===M&&!(T in C))&&$(C,T,M)}},3503:(Oe,Re,G)=>{var $=G(217);Oe.exports=function P(I,S){for(var N=I.length;N--;)if($(I[N][0],S))return N;return-1}},5683:(Oe,Re,G)=>{var $=G(6713);Oe.exports=function P(I,S,N){"__proto__"==S&&$?$(I,S,{configurable:!0,enumerable:!0,value:N,writable:!0}):I[S]=N}},5456:(Oe,Re,G)=>{var $=G(6884),P=G(8533);Oe.exports=function I(S,N){for(var C=0,T=(N=$(N,S)).length;null!=S&&C<T;)S=S[P(N[C++])];return C&&C==T?S:void 0}},3337:(Oe,Re,G)=>{var $=G(443),P=G(1318),I=G(2902),C=$?$.toStringTag:void 0;Oe.exports=function T(M){return null==M?void 0===M?"[object Undefined]":"[object Null]":C&&C in Object(M)?P(M):I(M)}},7304:(Oe,Re,G)=>{var $=G(5946),P=G(1943),I=G(5940),S=G(2827),C=/^\[object .+?Constructor\]$/,X=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");Oe.exports=function ee(z){return!(!I(z)||P(z))&&($(z)?X:C).test(S(z))}},5963:(Oe,Re,G)=>{var $=G(9719),P=G(6884),I=G(8442),S=G(5940),N=G(8533);Oe.exports=function C(T,M,H,F){if(!S(T))return T;for(var X=-1,ee=(M=P(M,T)).length,z=ee-1,q=T;null!=q&&++X<ee;){var oe=N(M[X]),K=H;if("__proto__"===oe||"constructor"===oe||"prototype"===oe)return T;if(X!=z){var le=q[oe];void 0===(K=F?F(le,oe,q):void 0)&&(K=S(le)?le:I(M[X+1])?[]:{})}$(q,oe,K),q=q[oe]}return T}},3935:(Oe,Re,G)=>{var $=G(443),P=G(4633),I=G(1503),S=G(4129),C=$?$.prototype:void 0,T=C?C.toString:void 0;Oe.exports=function M(H){if("string"==typeof H)return H;if(I(H))return P(H,M)+"";if(S(H))return T?T.call(H):"";var F=H+"";return"0"==F&&1/H==-1/0?"-0":F}},3348:(Oe,Re,G)=>{var $=G(2760),P=/^\s+/;Oe.exports=function I(S){return S&&S.slice(0,$(S)+1).replace(P,"")}},6884:(Oe,Re,G)=>{var $=G(1503),P=G(5352),I=G(2855),S=G(3943);Oe.exports=function N(C,T){return $(C)?C:P(C,T)?[C]:I(S(C))}},9454:Oe=>{Oe.exports=function Re(G,$){var P=-1,I=G.length;for($||($=Array(I));++P<I;)$[P]=G[P];return $}},4610:(Oe,Re,G)=>{var $=G(2119);Oe.exports=$["__core-js_shared__"]},6713:(Oe,Re,G)=>{var $=G(3436),P=function(){try{var I=$(Object,"defineProperty");return I({},"",{}),I}catch{}}();Oe.exports=P},9122:Oe=>{var Re="object"==typeof global&&global&&global.Object===Object&&global;Oe.exports=Re},4537:(Oe,Re,G)=>{var $=G(3819);Oe.exports=function P(I,S){var N=I.__data__;return $(S)?N["string"==typeof S?"string":"hash"]:N.map}},3436:(Oe,Re,G)=>{var $=G(7304),P=G(1990);Oe.exports=function I(S,N){var C=P(S,N);return $(C)?C:void 0}},1318:(Oe,Re,G)=>{var $=G(443),P=Object.prototype,I=P.hasOwnProperty,S=P.toString,N=$?$.toStringTag:void 0;Oe.exports=function C(T){var M=I.call(T,N),H=T[N];try{T[N]=void 0;var F=!0}catch{}var X=S.call(T);return F&&(M?T[N]=H:delete T[N]),X}},1990:Oe=>{Oe.exports=function Re(G,$){return G?.[$]}},4312:(Oe,Re,G)=>{var $=G(862);Oe.exports=function P(){this.__data__=$?$(null):{},this.size=0}},6421:Oe=>{Oe.exports=function Re(G){var $=this.has(G)&&delete this.__data__[G];return this.size-=$?1:0,$}},5764:(Oe,Re,G)=>{var $=G(862),S=Object.prototype.hasOwnProperty;Oe.exports=function N(C){var T=this.__data__;if($){var M=T[C];return"__lodash_hash_undefined__"===M?void 0:M}return S.call(T,C)?T[C]:void 0}},8685:(Oe,Re,G)=>{var $=G(862),I=Object.prototype.hasOwnProperty;Oe.exports=function S(N){var C=this.__data__;return $?void 0!==C[N]:I.call(C,N)}},6676:(Oe,Re,G)=>{var $=G(862);Oe.exports=function I(S,N){var C=this.__data__;return this.size+=this.has(S)?0:1,C[S]=$&&void 0===N?"__lodash_hash_undefined__":N,this}},8442:Oe=>{var G=/^(?:0|[1-9]\d*)$/;Oe.exports=function $(P,I){var S=typeof P;return!!(I=I??9007199254740991)&&("number"==S||"symbol"!=S&&G.test(P))&&P>-1&&P%1==0&&P<I}},5352:(Oe,Re,G)=>{var $=G(1503),P=G(4129),I=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,S=/^\w*$/;Oe.exports=function N(C,T){if($(C))return!1;var M=typeof C;return!("number"!=M&&"symbol"!=M&&"boolean"!=M&&null!=C&&!P(C))||S.test(C)||!I.test(C)||null!=T&&C in Object(T)}},3819:Oe=>{Oe.exports=function Re(G){var $=typeof G;return"string"==$||"number"==$||"symbol"==$||"boolean"==$?"__proto__"!==G:null===G}},1943:(Oe,Re,G)=>{var S,$=G(4610),P=(S=/[^.]+$/.exec($&&$.keys&&$.keys.IE_PROTO||""))?"Symbol(src)_1."+S:"";Oe.exports=function I(S){return!!P&&P in S}},1840:Oe=>{Oe.exports=function Re(){this.__data__=[],this.size=0}},4378:(Oe,Re,G)=>{var $=G(3503),I=Array.prototype.splice;Oe.exports=function S(N){var C=this.__data__,T=$(C,N);return!(T<0||(T==C.length-1?C.pop():I.call(C,T,1),--this.size,0))}},4981:(Oe,Re,G)=>{var $=G(3503);Oe.exports=function P(I){var S=this.__data__,N=$(S,I);return N<0?void 0:S[N][1]}},7343:(Oe,Re,G)=>{var $=G(3503);Oe.exports=function P(I){return $(this.__data__,I)>-1}},8895:(Oe,Re,G)=>{var $=G(3503);Oe.exports=function P(I,S){var N=this.__data__,C=$(N,I);return C<0?(++this.size,N.push([I,S])):N[C][1]=S,this}},638:(Oe,Re,G)=>{var $=G(4994),P=G(9215),I=G(1501);Oe.exports=function S(){this.size=0,this.__data__={hash:new $,map:new(I||P),string:new $}}},1184:(Oe,Re,G)=>{var $=G(4537);Oe.exports=function P(I){var S=$(this,I).delete(I);return this.size-=S?1:0,S}},866:(Oe,Re,G)=>{var $=G(4537);Oe.exports=function P(I){return $(this,I).get(I)}},3771:(Oe,Re,G)=>{var $=G(4537);Oe.exports=function P(I){return $(this,I).has(I)}},1772:(Oe,Re,G)=>{var $=G(4537);Oe.exports=function P(I,S){var N=$(this,I),C=N.size;return N.set(I,S),this.size+=N.size==C?0:1,this}},719:(Oe,Re,G)=>{var $=G(535);Oe.exports=function I(S){var N=$(S,function(T){return 500===C.size&&C.clear(),T}),C=N.cache;return N}},862:(Oe,Re,G)=>{var P=G(3436)(Object,"create");Oe.exports=P},2902:Oe=>{var G=Object.prototype.toString;Oe.exports=function $(P){return G.call(P)}},2119:(Oe,Re,G)=>{var $=G(9122),P="object"==typeof self&&self&&self.Object===Object&&self,I=$||P||Function("return this")();Oe.exports=I},2855:(Oe,Re,G)=>{var $=G(719),P=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,I=/\\(\\)?/g,S=$(function(N){var C=[];return 46===N.charCodeAt(0)&&C.push(""),N.replace(P,function(T,M,H,F){C.push(H?F.replace(I,"$1"):M||T)}),C});Oe.exports=S},8533:(Oe,Re,G)=>{var $=G(4129);Oe.exports=function I(S){if("string"==typeof S||$(S))return S;var N=S+"";return"0"==N&&1/S==-1/0?"-0":N}},2827:Oe=>{var G=Function.prototype.toString;Oe.exports=function $(P){if(null!=P){try{return G.call(P)}catch{}try{return P+""}catch{}}return""}},2760:Oe=>{var Re=/\s/;Oe.exports=function G($){for(var P=$.length;P--&&Re.test($.charAt(P)););return P}},406:(Oe,Re,G)=>{var $=G(5940),P=G(1710),I=G(1467),N=Math.max,C=Math.min;Oe.exports=function T(M,H,F){var X,ee,z,q,oe,K,le=0,J=!1,Ie=!1,ce=!0;if("function"!=typeof M)throw new TypeError("Expected a function");function U(me){var We=X,ze=ee;return X=ee=void 0,le=me,q=M.apply(ze,We)}function L(me){return le=me,oe=setTimeout(ue,H),J?U(me):q}function Q(me){var We=me-K;return void 0===K||We>=H||We<0||Ie&&me-le>=z}function ue(){var me=P();if(Q(me))return ge(me);oe=setTimeout(ue,function B(me){var Te=H-(me-K);return Ie?C(Te,z-(me-le)):Te}(me))}function ge(me){return oe=void 0,ce&&X?U(me):(X=ee=void 0,q)}function Pe(){var me=P(),We=Q(me);if(X=arguments,ee=this,K=me,We){if(void 0===oe)return L(K);if(Ie)return clearTimeout(oe),oe=setTimeout(ue,H),U(K)}return void 0===oe&&(oe=setTimeout(ue,H)),q}return H=I(H)||0,$(F)&&(J=!!F.leading,z=(Ie="maxWait"in F)?N(I(F.maxWait)||0,H):z,ce="trailing"in F?!!F.trailing:ce),Pe.cancel=function ie(){void 0!==oe&&clearTimeout(oe),le=0,X=K=ee=oe=void 0},Pe.flush=function we(){return void 0===oe?q:ge(P())},Pe}},217:Oe=>{Oe.exports=function Re(G,$){return G===$||G!=G&&$!=$}},8817:(Oe,Re,G)=>{var $=G(5456);Oe.exports=function P(I,S,N){var C=null==I?void 0:$(I,S);return void 0===C?N:C}},1503:Oe=>{Oe.exports=Array.isArray},5946:(Oe,Re,G)=>{var $=G(3337),P=G(5940);Oe.exports=function T(M){if(!P(M))return!1;var H=$(M);return"[object Function]"==H||"[object GeneratorFunction]"==H||"[object AsyncFunction]"==H||"[object Proxy]"==H}},5940:Oe=>{Oe.exports=function Re(G){var $=typeof G;return null!=G&&("object"==$||"function"==$)}},2671:Oe=>{Oe.exports=function Re(G){return null!=G&&"object"==typeof G}},4129:(Oe,Re,G)=>{var $=G(3337),P=G(2671);Oe.exports=function S(N){return"symbol"==typeof N||P(N)&&"[object Symbol]"==$(N)}},535:(Oe,Re,G)=>{var $=G(9850);function I(S,N){if("function"!=typeof S||null!=N&&"function"!=typeof N)throw new TypeError("Expected a function");var C=function(){var T=arguments,M=N?N.apply(this,T):T[0],H=C.cache;if(H.has(M))return H.get(M);var F=S.apply(this,T);return C.cache=H.set(M,F)||H,F};return C.cache=new(I.Cache||$),C}I.Cache=$,Oe.exports=I},1710:(Oe,Re,G)=>{var $=G(2119);Oe.exports=function(){return $.Date.now()}},4793:(Oe,Re,G)=>{var $=G(5963);Oe.exports=function P(I,S,N){return null==I?I:$(I,S,N)}},1467:(Oe,Re,G)=>{var $=G(3348),P=G(5940),I=G(4129),N=/^[-+]0x[0-9a-f]+$/i,C=/^0b[01]+$/i,T=/^0o[0-7]+$/i,M=parseInt;Oe.exports=function H(F){if("number"==typeof F)return F;if(I(F))return NaN;if(P(F)){var X="function"==typeof F.valueOf?F.valueOf():F;F=P(X)?X+"":X}if("string"!=typeof F)return 0===F?F:+F;F=$(F);var ee=C.test(F);return ee||T.test(F)?M(F.slice(2),ee?2:8):N.test(F)?NaN:+F}},4152:(Oe,Re,G)=>{var $=G(4633),P=G(9454),I=G(1503),S=G(4129),N=G(2855),C=G(8533),T=G(3943);Oe.exports=function M(H){return I(H)?$(H,C):S(H)?[H]:P(N(T(H)))}},3943:(Oe,Re,G)=>{var $=G(3935);Oe.exports=function P(I){return null==I?"":$(I)}},4308:(Oe,Re,G)=>{Oe.exports=G(1358)},4512:Oe=>{"use strict";Oe.exports=class QL{constructor(G,$=new Map,P=0){this.prefix=G,this._existing=$,this.counter=P}clone(){const{prefix:G,_existing:$,counter:P}=this;return new QL(G,new Map($),P)}getId(G){const $=G&&this._existing.get(G);if($)return $;const P=this.prefix+this.counter;return this.counter++,G&&this._existing.set(G,P),P}hasId(G){return this._existing.has(G)}getOldIds(){return[...this._existing.keys()]}}},7510:(Oe,Re,G)=>{"use strict";var $=G(9344).default;G(6563);const P=self.crypto||self.msCrypto;Oe.exports=class{constructor(S){if(!P||!P.subtle)throw new Error("crypto.subtle not found.");if("sha256"===S)this.algorithm={name:"SHA-256"};else{if("sha1"!==S)throw new Error(`Unsupported algorithm "${S}".`);this.algorithm={name:"SHA-1"}}this._content=""}update(S){this._content+=S}digest(){var S=this;return $(function*(){const N=(new TextEncoder).encode(S._content),C=new Uint8Array(yield P.subtle.digest(S.algorithm,N));let T="";for(let M=0;M<C.length;++M)T+=C[M].toString(16).padStart(2,"0");return T})()}}},5090:Oe=>{"use strict";const $="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",P="http://www.w3.org/2001/XMLSchema#string",I="NamedNode",S="BlankNode",N="Literal",C="DefaultGraph",T={};function M(z,q){return z.subject.termType===q.subject.termType&&z.object.termType===q.object.termType&&z.subject.value===q.subject.value&&z.predicate.value===q.predicate.value&&z.object.value===q.object.value&&(z.object.termType!==N||z.object.datatype.termType===q.object.datatype.termType&&z.object.language===q.object.language&&z.object.datatype.value===q.object.datatype.value)}(()=>{const z="(?:<([^:]+:[^>]*)>)",oe="A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_",K=oe+"0-9-\xb7\u0300-\u036f\u203f-\u2040",J="(_:(?:["+oe+"0-9])(?:(?:["+K+".])*(?:["+K+"]))?)",B="[ \\t]+",Q="[ \\t]*",ue="(?:"+z+"|"+J+")"+B,ge=z+B,ie="(?:"+z+"|"+J+'|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^'+z+")|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))"+Q,we="(?:\\.|(?:(?:"+z+"|"+J+")"+Q+"\\.))";T.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,T.empty=new RegExp("^"+Q+"$"),T.quad=new RegExp("^"+Q+ue+ge+ie+we+Q+"$")})(),Oe.exports=class qb{static parse(q){const oe=[],K={},le=q.split(T.eoln);let J=0;for(const Ie of le){if(J++,T.empty.test(Ie))continue;const ce=Ie.match(T.quad);if(null===ce)throw new Error("N-Quads parse error on line "+J+".");const U={subject:null,predicate:null,object:null,graph:null};if(U.subject=void 0!==ce[1]?{termType:I,value:ce[1]}:{termType:S,value:ce[2]},U.predicate={termType:I,value:ce[3]},void 0!==ce[4]?U.object={termType:I,value:ce[4]}:void 0!==ce[5]?U.object={termType:S,value:ce[5]}:(U.object={termType:N,value:void 0,datatype:{termType:I}},void 0!==ce[7]?U.object.datatype.value=ce[7]:void 0!==ce[8]?(U.object.datatype.value=$,U.object.language=ce[8]):U.object.datatype.value=P,U.object.value=ce[6].replace(X,function(q,oe,K,le){if(oe)switch(oe){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(K)return String.fromCharCode(parseInt(K,16));if(le)throw new Error("Unsupported U escape")})),U.graph=void 0!==ce[9]?{termType:I,value:ce[9]}:void 0!==ce[10]?{termType:S,value:ce[10]}:{termType:C,value:""},U.graph.value in K){let L=!0;const B=K[U.graph.value];for(const Q of B)if(M(Q,U)){L=!1;break}L&&(B.push(U),oe.push(U))}else K[U.graph.value]=[U],oe.push(U)}return oe}static serialize(q){Array.isArray(q)||(q=qb.legacyDatasetToQuads(q));const oe=[];for(const K of q)oe.push(qb.serializeQuad(K));return oe.sort().join("")}static serializeQuadComponents(q,oe,K,le){let J="";return J+=q.termType===I?`<${q.value}>`:`${q.value}`,J+=` <${oe.value}> `,K.termType===I?J+=`<${K.value}>`:K.termType===S?J+=K.value:(J+=`"${function F(z){return z.replace(H,function(q){switch(q){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}})}(K.value)}"`,K.datatype.value===$?K.language&&(J+=`@${K.language}`):K.datatype.value!==P&&(J+=`^^<${K.datatype.value}>`)),le.termType===I?J+=` <${le.value}>`:le.termType===S&&(J+=` ${le.value}`),J+=" .\n",J}static serializeQuad(q){return qb.serializeQuadComponents(q.subject,q.predicate,q.object,q.graph)}static legacyDatasetToQuads(q){const oe=[],K={"blank node":S,IRI:I,literal:N};for(const le in q)q[le].forEach(Ie=>{const ce={};for(const U in Ie){const L=Ie[U],B={termType:K[L.type],value:L.value};B.termType===N&&(B.datatype={termType:I},"datatype"in L&&(B.datatype.value=L.datatype),"language"in L?("datatype"in L||(B.datatype.value=$),B.language=L.language):"datatype"in L||(B.datatype.value=P)),ce[U]=B}ce.graph="@default"===le?{termType:C,value:""}:{termType:le.startsWith("_:")?S:I,value:le},oe.push(ce)});return oe}};const H=/["\\\n\r]/g,X=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g},5067:Oe=>{"use strict";Oe.exports=class{constructor(G){this.current=G.sort(),this.done=!1,this.dir=new Map;for(let $=0;$<G.length;++$)this.dir.set(G[$],!0)}hasNext(){return!this.done}next(){const{current:G,dir:$}=this,P=G.slice();let I=null,S=0;const N=G.length;for(let C=0;C<N;++C){const T=G[C],M=$.get(T);(null===I||T>I)&&(M&&C>0&&T>G[C-1]||!M&&C<N-1&&T>G[C+1])&&(I=T,S=C)}if(null===I)this.done=!0;else{const C=$.get(I)?S-1:S+1;G[S]=G[C],G[C]=I;for(const T of G)T>I&&$.set(T,!$.get(T))}return P}}},4103:(Oe,Re,G)=>{"use strict";var $=G(9344).default;const P=G(4512),I=G(7510),S=G(5067),N=G(5090);function C(T,M){return T.hash<M.hash?-1:T.hash>M.hash?1:0}Oe.exports=class{constructor({createMessageDigest:M=(()=>new I("sha256")),maxDeepIterations:H=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new P("_:c14n"),this.createMessageDigest=M,this.maxDeepIterations=H,this.quads=null,this.deepIterations=null}main(M){var H=this;return $(function*(){H.deepIterations=new Map,H.quads=M;for(const K of M)H._addBlankNodeQuadInfo({quad:K,component:K.subject}),H._addBlankNodeQuadInfo({quad:K,component:K.object}),H._addBlankNodeQuadInfo({quad:K,component:K.graph});const F=new Map,X=[...H.blankNodeInfo.keys()];let ee=0;for(const K of X)++ee%100==0&&(yield H._yield()),yield H._hashAndTrackBlankNode({id:K,hashToBlankNodes:F});const z=[...F.keys()].sort(),q=[];for(const K of z){const le=F.get(K);le.length>1?q.push(le):H.canonicalIssuer.getId(le[0])}for(const K of q){const le=[];for(const J of K){if(H.canonicalIssuer.hasId(J))continue;const Ie=new P("_:b");Ie.getId(J);const ce=yield H.hashNDegreeQuads(J,Ie);le.push(ce)}le.sort(C);for(const J of le){const Ie=J.issuer.getOldIds();for(const ce of Ie)H.canonicalIssuer.getId(ce)}}const oe=[];for(const K of H.quads){const le=N.serializeQuadComponents(H._componentWithCanonicalId(K.subject),K.predicate,H._componentWithCanonicalId(K.object),H._componentWithCanonicalId(K.graph));oe.push(le)}return oe.sort(),oe.join("")})()}hashFirstDegreeQuads(M){var H=this;return $(function*(){const F=[],X=H.blankNodeInfo.get(M),ee=X.quads;for(const q of ee){const oe={subject:null,predicate:q.predicate,object:null,graph:null};oe.subject=H.modifyFirstDegreeComponent(M,q.subject,"subject"),oe.object=H.modifyFirstDegreeComponent(M,q.object,"object"),oe.graph=H.modifyFirstDegreeComponent(M,q.graph,"graph"),F.push(N.serializeQuad(oe))}F.sort();const z=H.createMessageDigest();for(const q of F)z.update(q);return X.hash=yield z.digest(),X.hash})()}hashRelatedBlankNode(M,H,F,X){var ee=this;return $(function*(){let z;z=ee.canonicalIssuer.hasId(M)?ee.canonicalIssuer.getId(M):F.hasId(M)?F.getId(M):ee.blankNodeInfo.get(M).hash;const q=ee.createMessageDigest();return q.update(X),"g"!==X&&q.update(ee.getRelatedPredicate(H)),q.update(z),q.digest()})()}hashNDegreeQuads(M,H){var F=this;return $(function*(){const X=F.deepIterations.get(M)||0;if(X>F.maxDeepIterations)throw new Error(`Maximum deep iterations (${F.maxDeepIterations}) exceeded.`);F.deepIterations.set(M,X+1);const ee=F.createMessageDigest(),z=yield F.createHashToRelated(M,H),q=[...z.keys()].sort();for(const oe of q){ee.update(oe);let le,K="";const J=new S(z.get(oe));let Ie=0;for(;J.hasNext();){const ce=J.next();++Ie%3==0&&(yield F._yield());let U=H.clone(),L="";const B=[];let Q=!1;for(const ue of ce)if(F.canonicalIssuer.hasId(ue)?L+=F.canonicalIssuer.getId(ue):(U.hasId(ue)||B.push(ue),L+=U.getId(ue)),0!==K.length&&L>K){Q=!0;break}if(!Q){for(const ue of B){const ge=yield F.hashNDegreeQuads(ue,U);if(L+=U.getId(ue),L+=`<${ge.hash}>`,U=ge.issuer,0!==K.length&&L>K){Q=!0;break}}Q||(0===K.length||L<K)&&(K=L,le=U)}}ee.update(K),H=le}return{hash:yield ee.digest(),issuer:H}})()}modifyFirstDegreeComponent(M,H){return"BlankNode"!==H.termType?H:{termType:"BlankNode",value:H.value===M?"_:a":"_:z"}}getRelatedPredicate(M){return`<${M.predicate.value}>`}createHashToRelated(M,H){var F=this;return $(function*(){const X=new Map,ee=F.blankNodeInfo.get(M).quads;let z=0;for(const q of ee)++z%100==0&&(yield F._yield()),yield Promise.all([F._addRelatedBlankNodeHash({quad:q,component:q.subject,position:"s",id:M,issuer:H,hashToRelated:X}),F._addRelatedBlankNodeHash({quad:q,component:q.object,position:"o",id:M,issuer:H,hashToRelated:X}),F._addRelatedBlankNodeHash({quad:q,component:q.graph,position:"g",id:M,issuer:H,hashToRelated:X})]);return X})()}_hashAndTrackBlankNode({id:M,hashToBlankNodes:H}){var F=this;return $(function*(){const X=yield F.hashFirstDegreeQuads(M),ee=H.get(X);ee?ee.push(M):H.set(X,[M])})()}_addBlankNodeQuadInfo({quad:M,component:H}){if("BlankNode"!==H.termType)return;const F=H.value,X=this.blankNodeInfo.get(F);X?X.quads.add(M):this.blankNodeInfo.set(F,{quads:new Set([M]),hash:null})}_addRelatedBlankNodeHash({quad:M,component:H,position:F,id:X,issuer:ee,hashToRelated:z}){var q=this;return $(function*(){if("BlankNode"!==H.termType||H.value===X)return;const oe=H.value,K=yield q.hashRelatedBlankNode(oe,M,ee,F),le=z.get(K);le?le.push(oe):z.set(K,[oe])})()}_componentWithCanonicalId(M){return"BlankNode"!==M.termType||M.value.startsWith(this.canonicalIssuer.prefix)?M:{termType:"BlankNode",value:this.canonicalIssuer.getId(M.value)}}_yield(){return $(function*(){return new Promise(M=>setImmediate(M))})()}}},526:(Oe,Re,G)=>{"use strict";const $=G(4512),P=G(7510),I=G(5067),S=G(5090);function N(C,T){return C.hash<T.hash?-1:C.hash>T.hash?1:0}Oe.exports=class{constructor({createMessageDigest:T=(()=>new P("sha256")),maxDeepIterations:M=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new $("_:c14n"),this.createMessageDigest=T,this.maxDeepIterations=M,this.quads=null,this.deepIterations=null}main(T){this.deepIterations=new Map,this.quads=T;for(const z of T)this._addBlankNodeQuadInfo({quad:z,component:z.subject}),this._addBlankNodeQuadInfo({quad:z,component:z.object}),this._addBlankNodeQuadInfo({quad:z,component:z.graph});const M=new Map,H=[...this.blankNodeInfo.keys()];for(const z of H)this._hashAndTrackBlankNode({id:z,hashToBlankNodes:M});const F=[...M.keys()].sort(),X=[];for(const z of F){const q=M.get(z);q.length>1?X.push(q):this.canonicalIssuer.getId(q[0])}for(const z of X){const q=[];for(const oe of z){if(this.canonicalIssuer.hasId(oe))continue;const K=new $("_:b");K.getId(oe);const le=this.hashNDegreeQuads(oe,K);q.push(le)}q.sort(N);for(const oe of q){const K=oe.issuer.getOldIds();for(const le of K)this.canonicalIssuer.getId(le)}}const ee=[];for(const z of this.quads){const q=S.serializeQuadComponents(this._componentWithCanonicalId({component:z.subject}),z.predicate,this._componentWithCanonicalId({component:z.object}),this._componentWithCanonicalId({component:z.graph}));ee.push(q)}return ee.sort(),ee.join("")}hashFirstDegreeQuads(T){const M=[],H=this.blankNodeInfo.get(T),F=H.quads;for(const ee of F){const z={subject:null,predicate:ee.predicate,object:null,graph:null};z.subject=this.modifyFirstDegreeComponent(T,ee.subject,"subject"),z.object=this.modifyFirstDegreeComponent(T,ee.object,"object"),z.graph=this.modifyFirstDegreeComponent(T,ee.graph,"graph"),M.push(S.serializeQuad(z))}M.sort();const X=this.createMessageDigest();for(const ee of M)X.update(ee);return H.hash=X.digest(),H.hash}hashRelatedBlankNode(T,M,H,F){let X;X=this.canonicalIssuer.hasId(T)?this.canonicalIssuer.getId(T):H.hasId(T)?H.getId(T):this.blankNodeInfo.get(T).hash;const ee=this.createMessageDigest();return ee.update(F),"g"!==F&&ee.update(this.getRelatedPredicate(M)),ee.update(X),ee.digest()}hashNDegreeQuads(T,M){const H=this.deepIterations.get(T)||0;if(H>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(T,H+1);const F=this.createMessageDigest(),X=this.createHashToRelated(T,M),ee=[...X.keys()].sort();for(const z of ee){F.update(z);let oe,q="";const K=new I(X.get(z));for(;K.hasNext();){const le=K.next();let J=M.clone(),Ie="";const ce=[];let U=!1;for(const L of le)if(this.canonicalIssuer.hasId(L)?Ie+=this.canonicalIssuer.getId(L):(J.hasId(L)||ce.push(L),Ie+=J.getId(L)),0!==q.length&&Ie>q){U=!0;break}if(!U){for(const L of ce){const B=this.hashNDegreeQuads(L,J);if(Ie+=J.getId(L),Ie+=`<${B.hash}>`,J=B.issuer,0!==q.length&&Ie>q){U=!0;break}}U||(0===q.length||Ie<q)&&(q=Ie,oe=J)}}F.update(q),M=oe}return{hash:F.digest(),issuer:M}}modifyFirstDegreeComponent(T,M){return"BlankNode"!==M.termType?M:{termType:"BlankNode",value:M.value===T?"_:a":"_:z"}}getRelatedPredicate(T){return`<${T.predicate.value}>`}createHashToRelated(T,M){const H=new Map,F=this.blankNodeInfo.get(T).quads;for(const X of F)this._addRelatedBlankNodeHash({quad:X,component:X.subject,position:"s",id:T,issuer:M,hashToRelated:H}),this._addRelatedBlankNodeHash({quad:X,component:X.object,position:"o",id:T,issuer:M,hashToRelated:H}),this._addRelatedBlankNodeHash({quad:X,component:X.graph,position:"g",id:T,issuer:M,hashToRelated:H});return H}_hashAndTrackBlankNode({id:T,hashToBlankNodes:M}){const H=this.hashFirstDegreeQuads(T),F=M.get(H);F?F.push(T):M.set(H,[T])}_addBlankNodeQuadInfo({quad:T,component:M}){if("BlankNode"!==M.termType)return;const H=M.value,F=this.blankNodeInfo.get(H);F?F.quads.add(T):this.blankNodeInfo.set(H,{quads:new Set([T]),hash:null})}_addRelatedBlankNodeHash({quad:T,component:M,position:H,id:F,issuer:X,hashToRelated:ee}){if("BlankNode"!==M.termType||M.value===F)return;const z=M.value,q=this.hashRelatedBlankNode(z,T,X,H),oe=ee.get(q);oe?oe.push(z):ee.set(q,[z])}_componentWithCanonicalId({component:T}){return"BlankNode"!==T.termType||T.value.startsWith(this.canonicalIssuer.prefix)?T:{termType:"BlankNode",value:this.canonicalIssuer.getId(T.value)}}}},1359:(Oe,Re,G)=>{"use strict";var $=G(9344).default;const P=G(7510),I=G(4103);Oe.exports=class extends I{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new P("sha1")}modifyFirstDegreeComponent(N,C,T){return"BlankNode"!==C.termType?C:"graph"===T?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:C.value===N?"_:a":"_:z"}}getRelatedPredicate(N){return N.predicate.value}createHashToRelated(N,C){var T=this;return $(function*(){const M=new Map,H=T.blankNodeInfo.get(N).quads;let F=0;for(const X of H){let ee,z;if("BlankNode"===X.subject.termType&&X.subject.value!==N)z=X.subject.value,ee="p";else{if("BlankNode"!==X.object.termType||X.object.value===N)continue;z=X.object.value,ee="r"}++F%100==0&&(yield T._yield());const q=yield T.hashRelatedBlankNode(z,X,C,ee),oe=M.get(q);oe?oe.push(z):M.set(q,[z])}return M})()}}},7492:(Oe,Re,G)=>{"use strict";const $=G(7510),P=G(526);Oe.exports=class extends P{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new $("sha1")}modifyFirstDegreeComponent(S,N,C){return"BlankNode"!==N.termType?N:"graph"===C?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:N.value===S?"_:a":"_:z"}}getRelatedPredicate(S){return S.predicate.value}createHashToRelated(S,N){const C=new Map,T=this.blankNodeInfo.get(S).quads;for(const M of T){let H,F;if("BlankNode"===M.subject.termType&&M.subject.value!==S)F=M.subject.value,H="p";else{if("BlankNode"!==M.object.termType||M.object.value===S)continue;F=M.object.value,H="r"}const X=this.hashRelatedBlankNode(F,M,N,H),ee=C.get(X);ee?ee.push(F):C.set(X,[F])}return C}}},1358:(Oe,Re,G)=>{"use strict";var $=G(9344).default;const P=G(4103),I=G(1359),S=G(526),N=G(7492);let C;try{C=G(7670)}catch{}Re.NQuads=G(5090),Re.IdentifierIssuer=G(4512),Re._rdfCanonizeNative=function(T){return T&&(C=T),C},Re.canonize=function(){var T=$(function*(M,H){if(Array.isArray(M)||(M=Re.NQuads.legacyDatasetToQuads(M)),H.useNative){if(!C)throw new Error("rdf-canonize-native not available");if(H.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return new Promise((F,X)=>C.canonize(M,H,(ee,z)=>ee?X(ee):F(z)))}if("URDNA2015"===H.algorithm)return new P(H).main(M);if("URGNA2012"===H.algorithm){if(H.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new I(H).main(M)}throw"algorithm"in H?new Error("Invalid RDF Dataset Canonicalization algorithm: "+H.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")});return function(M,H){return T.apply(this,arguments)}}(),Re._canonizeSync=function(T,M){if(Array.isArray(T)||(T=Re.NQuads.legacyDatasetToQuads(T)),M.useNative){if(!C)throw new Error("rdf-canonize-native not available");if(M.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return C.canonizeSync(T,M)}if("URDNA2015"===M.algorithm)return new S(M).main(T);if("URGNA2012"===M.algorithm){if(M.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new N(M).main(T)}throw"algorithm"in M?new Error("Invalid RDF Dataset Canonicalization algorithm: "+M.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}},6563:function(){!function(Oe,Re){"use strict";if(!Oe.setImmediate){var S,G=1,$={},P=!1,I=Oe.document,oe=Object.getPrototypeOf&&Object.getPrototypeOf(Oe);oe=oe&&oe.setTimeout?oe:Oe,"[object process]"==={}.toString.call(Oe.process)?function H(){S=function(K){process.nextTick(function(){M(K)})}}():function F(){if(Oe.postMessage&&!Oe.importScripts){var K=!0,le=Oe.onmessage;return Oe.onmessage=function(){K=!1},Oe.postMessage("","*"),Oe.onmessage=le,K}}()?function X(){var K="setImmediate$"+Math.random()+"$",le=function(J){J.source===Oe&&"string"==typeof J.data&&0===J.data.indexOf(K)&&M(+J.data.slice(K.length))};Oe.addEventListener?Oe.addEventListener("message",le,!1):Oe.attachEvent("onmessage",le),S=function(J){Oe.postMessage(K+J,"*")}}():Oe.MessageChannel?function ee(){var K=new MessageChannel;K.port1.onmessage=function(le){M(le.data)},S=function(le){K.port2.postMessage(le)}}():I&&"onreadystatechange"in I.createElement("script")?function z(){var K=I.documentElement;S=function(le){var J=I.createElement("script");J.onreadystatechange=function(){M(le),J.onreadystatechange=null,K.removeChild(J),J=null},K.appendChild(J)}}():function q(){S=function(K){setTimeout(M,0,K)}}(),oe.setImmediate=function N(K){"function"!=typeof K&&(K=new Function(""+K));for(var le=new Array(arguments.length-1),J=0;J<le.length;J++)le[J]=arguments[J+1];var Ie={callback:K,args:le};return $[G]=Ie,S(G),G++},oe.clearImmediate=C}function C(K){delete $[K]}function M(K){if(P)setTimeout(M,0,K);else{var le=$[K];if(le){P=!0;try{!function T(K){var le=K.callback,J=K.args;switch(J.length){case 0:le();break;case 1:le(J[0]);break;case 2:le(J[0],J[1]);break;case 3:le(J[0],J[1],J[2]);break;default:le.apply(void 0,J)}}(le)}finally{C(K),P=!1}}}}}(typeof self>"u"?typeof global>"u"?this:global:self)},7670:()=>{},9344:Oe=>{function Re($,P,I,S,N,C,T){try{var M=$[C](T),H=M.value}catch(F){return void I(F)}M.done?P(H):Promise.resolve(H).then(S,N)}Oe.exports=function G($){return function(){var P=this,I=arguments;return new Promise(function(S,N){var C=$.apply(P,I);function T(H){Re(C,S,N,T,M,"next",H)}function M(H){Re(C,S,N,T,M,"throw",H)}T(void 0)})}},Oe.exports.__esModule=!0,Oe.exports.default=Oe.exports}},Oe=>{Oe(Oe.s=8884)}]);
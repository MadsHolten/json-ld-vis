(self.webpackChunkjson_ld_vis=self.webpackChunkjson_ld_vis||[]).push([[179],{4856:(Pe,Ne,$)=>{"use strict";function G(n){return"function"==typeof n}function N(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const I=N(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function C(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class P{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(G(r))try{r()}catch(o){e=o instanceof I?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{M(o)}catch(a){e=e??[],a instanceof I?e=[...e,...a.errors]:e.push(a)}}if(e)throw new I(e)}}add(e){var t;if(e&&e!==this)if(this.closed)M(e);else{if(e instanceof P){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&C(t,e)}remove(e){const{_finalizers:t}=this;t&&C(t,e),e instanceof P&&e._removeParent(this)}}P.EMPTY=(()=>{const n=new P;return n.closed=!0,n})();const D=P.EMPTY;function T(n){return n instanceof P||n&&"closed"in n&&G(n.remove)&&G(n.add)&&G(n.unsubscribe)}function M(n){G(n)?n():n.unsubscribe()}const z={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},B={setTimeout(n,e,...t){const{delegate:r}=B;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=B;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function K(n){B.setTimeout(()=>{const{onUnhandledError:e}=z;if(!e)throw n;e(n)})}function te(){}const j=Q("C",void 0,void 0);function Q(n,e,t){return{kind:n,value:e,error:t}}let ce=null;function ee(n){if(z.useDeprecatedSynchronousErrorHandling){const e=!ce;if(e&&(ce={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=ce;if(ce=null,t)throw r}}else n()}class de extends P{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,T(e)&&e.add(this)):this.destination=xe}static create(e,t,r){return new J(e,t,r)}next(e){this.isStopped?oe(function ae(n){return Q("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?oe(function q(n){return Q("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?oe(j,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const U=Function.prototype.bind;function L(n,e){return U.call(n,e)}class V{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){ue(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){ue(r)}else ue(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ue(t)}}}class J extends de{constructor(e,t,r){let i;if(super(),G(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&z.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&L(e.next,o),error:e.error&&L(e.error,o),complete:e.complete&&L(e.complete,o)}):i=e}this.destination=new V(i)}}function ue(n){z.useDeprecatedSynchronousErrorHandling?function Re(n){z.useDeprecatedSynchronousErrorHandling&&ce&&(ce.errorThrown=!0,ce.error=n)}(n):K(n)}function oe(n,e){const{onStoppedNotification:t}=z;t&&B.setTimeout(()=>t(n,e))}const xe={closed:!0,next:te,error:function ve(n){throw n},complete:te},Le="function"==typeof Symbol&&Symbol.observable||"@@observable";function ye(n){return n}let ke=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const o=function nt(n){return n&&n instanceof de||function pe(n){return n&&G(n.next)&&G(n.error)&&G(n.complete)}(n)&&T(n)}(t)?t:new J(t,r,i);return ee(()=>{const{operator:a,source:u}=this;o.add(a?a.call(o,u):u?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=be(r))((i,o)=>{const a=new J({next:u=>{try{t(u)}catch(h){o(h),a.unsubscribe()}},error:o,complete:i});this.subscribe(a)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Le](){return this}pipe(...t){return function ze(n){return 0===n.length?ye:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}(t)(this)}toPromise(t){return new(t=be(t))((r,i)=>{let o;this.subscribe(a=>o=a,a=>i(a),()=>r(o))})}}return n.create=e=>new n(e),n})();function be(n){var e;return null!==(e=n??z.Promise)&&void 0!==e?e:Promise}const We=N(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Ie=(()=>{class n extends ke{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new Je(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new We}next(t){ee(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){ee(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ee(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:o}=this;return r||i?D:(this.currentObservers=null,o.push(t),new P(()=>{this.currentObservers=null,C(o,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){const t=new ke;return t.source=this,t}}return n.create=(e,t)=>new Je(e,t),n})();class Je extends Ie{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:D}}function pt(n){return e=>{if(function Pt(n){return G(n?.lift)}(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function at(n,e,t,r,i){return new ut(n,e,t,r,i)}class ut extends de{constructor(e,t,r,i,o,a){super(e),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=t?function(u){try{t(u)}catch(h){e.error(h)}}:super._next,this._error=i?function(u){try{i(u)}catch(h){e.error(h)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function $e(n,e){return pt((t,r)=>{let i=0;t.subscribe(at(r,o=>{r.next(n.call(e,o,i++))}))})}function jn(n){return this instanceof jn?(this.v=n,this):new jn(n)}function ed(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(n,e||[]),o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(k){r[k]&&(i[k]=function(F){return new Promise(function(Y,ie){o.push([k,F,Y,ie])>1||u(k,F)})})}function u(k,F){try{!function h(k){k.value instanceof jn?Promise.resolve(k.value.v).then(m,v):x(o[0][2],k)}(r[k](F))}catch(Y){x(o[0][3],Y)}}function m(k){u("next",k)}function v(k){u("throw",k)}function x(k,F){k(F),o.shift(),o.length&&u(o[0][0],o[0][1])}}function Ca(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function Ao(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(a){return new Promise(function(u,h){!function i(o,a,u,h){Promise.resolve(h).then(function(m){o({value:m,done:u})},a)}(u,h,(a=n[o](a)).done,a.value)})}}}const Si=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function na(n){return G(n?.then)}function Ma(n){return G(n[Le])}function ra(n){return Symbol.asyncIterator&&G(n?.[Symbol.asyncIterator])}function td(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const ul=function cl(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Rh(n){return G(n?.[ul])}function ps(n){return ed(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield jn(t.read());if(i)return yield jn(void 0);yield yield jn(r)}}finally{t.releaseLock()}})}function gs(n){return G(n?.getReader)}function lo(n){if(n instanceof ke)return n;if(null!=n){if(Ma(n))return function Aa(n){return new ke(e=>{const t=n[Le]();if(G(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Si(n))return function Ph(n){return new ke(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(na(n))return function Nh(n){return new ke(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,K)})}(n);if(ra(n))return rd(n);if(Rh(n))return function nd(n){return new ke(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(gs(n))return function Tp(n){return rd(ps(n))}(n)}throw td(n)}function rd(n){return new ke(e=>{(function Uc(n,e){var t,r,i,o;return function _r(n,e,t,r){return new(t||(t=Promise))(function(o,a){function u(v){try{m(r.next(v))}catch(x){a(x)}}function h(v){try{m(r.throw(v))}catch(x){a(x)}}function m(v){v.done?o(v.value):function i(o){return o instanceof t?o:new t(function(a){a(o)})}(v.value).then(u,h)}m((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=Ca(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(a){i={error:a}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function ms(n,e,t,r=0,i=!1){const o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Ta(n,e,t=1/0){return G(e)?Ta((r,i)=>$e((o,a)=>e(r,o,i,a))(lo(n(r,i))),t):("number"==typeof e&&(t=e),pt((r,i)=>function Gc(n,e,t,r,i,o,a,u){const h=[];let m=0,v=0,x=!1;const k=()=>{x&&!h.length&&!m&&e.complete()},F=ie=>m<r?Y(ie):h.push(ie),Y=ie=>{o&&e.next(ie),m++;let me=!1;lo(t(ie,v++)).subscribe(at(e,Oe=>{i?.(Oe),o?F(Oe):e.next(Oe)},()=>{me=!0},void 0,()=>{if(me)try{for(m--;h.length&&m<r;){const Oe=h.shift();a?ms(e,a,()=>Y(Oe)):Y(Oe)}k()}catch(Oe){e.error(Oe)}}))};return n.subscribe(at(e,F,()=>{x=!0,k()})),()=>{u?.()}}(r,i,n,t)))}function $c(n=1/0){return Ta(ye,n)}const Sr=new ke(n=>n.complete());function id(n){return n&&G(n.schedule)}function Oo(n){return n[n.length-1]}function Lh(n){return G(Oo(n))?n.pop():void 0}function dl(n){return id(Oo(n))?n.pop():void 0}function od(n,e=0){return pt((t,r)=>{t.subscribe(at(r,i=>ms(r,n,()=>r.next(i),e),()=>ms(r,n,()=>r.complete(),e),i=>ms(r,n,()=>r.error(i),e)))})}function yi(n,e=0){return pt((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function ys(n,e){if(!n)throw new Error("Iterable cannot be null");return new ke(t=>{ms(t,e,()=>{const r=n[Symbol.asyncIterator]();ms(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function hl(n,e){return e?function co(n,e){if(null!=n){if(Ma(n))return function ia(n,e){return lo(n).pipe(yi(e),od(e))}(n,e);if(Si(n))return function Cv(n,e){return new ke(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(na(n))return function sd(n,e){return lo(n).pipe(yi(e),od(e))}(n,e);if(ra(n))return ys(n,e);if(Rh(n))return function vs(n,e){return new ke(t=>{let r;return ms(t,e,()=>{r=n[ul](),ms(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(a){return void t.error(a)}o?t.complete():t.next(i)},0,!0)}),()=>G(r?.return)&&r.return()})}(n,e);if(gs(n))return function Fh(n,e){return ys(ps(n),e)}(n,e)}throw td(n)}(n,e):lo(n)}function Bh(...n){const e=dl(n),t=function Ip(n,e){return"number"==typeof Oo(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?lo(r[0]):$c(t)(hl(r,e)):Sr}function ka(n={}){const{connector:e=(()=>new Ie),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let a,u,h,m=0,v=!1,x=!1;const k=()=>{u?.unsubscribe(),u=void 0},F=()=>{k(),a=h=void 0,v=x=!1},Y=()=>{const ie=a;F(),ie?.unsubscribe()};return pt((ie,me)=>{m++,!x&&!v&&k();const Oe=h=h??e();me.add(()=>{m--,0===m&&!x&&!v&&(u=fl(Y,i))}),Oe.subscribe(me),!a&&m>0&&(a=new J({next:Ke=>Oe.next(Ke),error:Ke=>{x=!0,k(),u=fl(F,t,Ke),Oe.error(Ke)},complete:()=>{v=!0,k(),u=fl(F,r),Oe.complete()}}),lo(ie).subscribe(a))})(o)}}function fl(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new J({next:()=>{r.unsubscribe(),n()}});return lo(e(...t)).subscribe(r)}function yr(n){for(let e in n)if(n[e]===yr)return e;throw Error("Could not find renamed property on target object.")}function Me(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function we(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(we).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Ue(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const bt=yr({__forward_ref__:yr});function lt(n){return n.__forward_ref__=lt,n.toString=function(){return we(this())},n}function dt(n){return function Jt(n){return"function"==typeof n&&n.hasOwnProperty(bt)&&n.__forward_ref__===lt}(n)?n():n}function Bt(n){return n&&!!n.\u0275providers}const gn="https://g.co/ng/security#xss";class Ye extends Error{constructor(e,t){super(function er(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}(e,t)),this.code=e}}function Wt(n){return"string"==typeof n?n:null==n?"":String(n)}function Yn(n,e){throw new Ye(-201,!1)}function bi(n,e){null==n&&function _n(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function nn(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function gr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Is(n){return Xo(n,Ia)||Xo(n,qc)}function Xo(n,e){return n.hasOwnProperty(e)?n[e]:null}function Os(n){return n&&(n.hasOwnProperty(ld)||n.hasOwnProperty(Op))?n[ld]:null}const Ia=yr({\u0275prov:yr}),ld=yr({\u0275inj:yr}),qc=yr({ngInjectableDef:yr}),Op=yr({ngInjectorDef:yr});var bn=(()=>((bn=bn||{})[bn.Default=0]="Default",bn[bn.Host=1]="Host",bn[bn.Self=2]="Self",bn[bn.SkipSelf=4]="SkipSelf",bn[bn.Optional=8]="Optional",bn))();let cd;function Mr(n){const e=cd;return cd=n,e}function Ko(n,e,t){const r=Is(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&bn.Optional?null:void 0!==e?e:void Yn(we(n))}const Er=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),_s={},Pa="__NG_DI_FLAG__",Ro="ngTempTokenPath",Hh=/\n/gm,Zi="__source";let Yc;function vl(n){const e=Yc;return Yc=n,e}function dd(n,e=bn.Default){if(void 0===Yc)throw new Ye(-203,!1);return null===Yc?Ko(n,void 0,e):Yc.get(n,e&bn.Optional?null:void 0,e)}function St(n,e=bn.Default){return(function Rp(){return cd}()||dd)(dt(n),e)}function Rs(n,e=bn.Default){return St(n,Xc(e))}function Xc(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Np(n){const e=[];for(let t=0;t<n.length;t++){const r=dt(n[t]);if(Array.isArray(r)){if(0===r.length)throw new Ye(900,!1);let i,o=bn.Default;for(let a=0;a<r.length;a++){const u=r[a],h=Mv(u);"number"==typeof h?-1===h?i=u.token:o|=h:i=u}e.push(St(i,o))}else e.push(St(r))}return e}function hd(n,e){return n[Pa]=e,n.prototype[Pa]=e,n}function Mv(n){return n[Pa]}function Zo(n){return{toString:n}.toString()}var Ps=(()=>((Ps=Ps||{})[Ps.OnPush=0]="OnPush",Ps[Ps.Default=1]="Default",Ps))(),Ns=(()=>{return(n=Ns||(Ns={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Ns;var n})();const Na={},mr=[],fd=yr({\u0275cmp:yr}),Lp=yr({\u0275dir:yr}),Fp=yr({\u0275pipe:yr}),La=yr({\u0275fac:yr}),pd=yr({__NG_ELEMENT_ID__:yr});let f_=0;function Qi(n){return Zo(()=>{const t=!0===n.standalone,r={},i={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Ps.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||mr,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Ns.Emulated,id:"c"+f_++,styles:n.styles||mr,_:null,setInput:null,schemas:n.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},o=n.dependencies,a=n.features;return i.inputs=Bp(n.inputs,r),i.outputs=Bp(n.outputs),a&&a.forEach(u=>u(i)),i.directiveDefs=o?()=>("function"==typeof o?o():o).map(Ov).filter(Rv):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(Mi).filter(Rv):null,i})}function Ov(n){return nr(n)||ci(n)}function Rv(n){return null!==n}function ei(n){return Zo(()=>({type:n.type,bootstrap:n.bootstrap||mr,declarations:n.declarations||mr,imports:n.imports||mr,exports:n.exports||mr,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Bp(n,e){if(null==n)return Na;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),t[i]=r,e&&(e[i]=o)}return t}const fn=Qi;function nr(n){return n[fd]||null}function ci(n){return n[Lp]||null}function Mi(n){return n[Fp]||null}function Qo(n){return Array.isArray(n)&&"object"==typeof n[1]}function Es(n){return Array.isArray(n)&&!0===n[1]}function jp(n){return 0!=(4&n.flags)}function yd(n){return n.componentOffset>-1}function $h(n){return 1==(1&n.flags)}function No(n){return null!==n.template}function m_(n){return 0!=(256&n[2])}function oa(n,e){return n.hasOwnProperty(La)?n[La]:null}class lr{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Vn(){return Qt}function Qt(n){return n.type.prototype.ngOnChanges&&(n.setInput=C_),Gp}function Gp(){const n=jv(this),e=n?.current;if(e){const t=n.previous;if(t===Na)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function C_(n,e,t,r){const i=this.declaredInputs[t],o=jv(n)||function tu(n,e){return n[zv]=e}(n,{previous:Na,current:null}),a=o.current||(o.current={}),u=o.previous,h=u[i];a[i]=new lr(h&&h.currentValue,e,u===Na),n[r]=e}Vn.ngInherit=!0;const zv="__ngSimpleChanges__";function jv(n){return n[zv]||null}function zi(n){for(;Array.isArray(n);)n=n[0];return n}function wd(n,e){return zi(e[n])}function Jo(n,e){return zi(e[n.index])}function Wh(n,e){return n.data[e]}function rr(n,e){const t=e[n];return Qo(t)?t:t[0]}function qh(n){return 64==(64&n[2])}function wl(n,e){return null==e?null:n[e]}function Fa(n){n[18]=0}function aa(n,e){n[5]+=e;let t=n,r=n[3];for(;null!==r&&(1===e&&1===t[5]||-1===e&&0===t[5]);)r[5]+=e,t=r,r=r[3]}const yn={lFrame:Jv(null),bindingsEnabled:!0};function qv(){return yn.bindingsEnabled}function At(){return yn.lFrame.lView}function Un(){return yn.lFrame.tView}function Bs(n){return yn.lFrame.contextLView=n,n[8]}function Lo(n){return yn.lFrame.contextLView=null,n}function Tr(){let n=qp();for(;null!==n&&64===n.type;)n=n.parent;return n}function qp(){return yn.lFrame.currentTNode}function Vs(n,e){const t=yn.lFrame;t.currentTNode=n,t.isParent=e}function Yp(){return yn.lFrame.isParent}function _l(){yn.lFrame.isParent=!1}function El(){return yn.lFrame.bindingIndex++}function Kv(n,e){const t=yn.lFrame;t.bindingIndex=t.bindingRootIndex=n,Yh(e)}function Yh(n){yn.lFrame.currentDirectiveIndex=n}function Zv(){return yn.lFrame.currentQueryIndex}function ac(n){yn.lFrame.currentQueryIndex=n}function Cd(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function Kp(n,e,t){if(t&bn.SkipSelf){let i=e,o=n;for(;!(i=i.parent,null!==i||t&bn.Host||(i=Cd(o),null===i||(o=o[15],10&i.type))););if(null===i)return!1;e=i,n=o}const r=yn.lFrame=Qv();return r.currentTNode=e,r.lView=n,!0}function Zp(n){const e=Qv(),t=n[1];yn.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Qv(){const n=yn.lFrame,e=null===n?null:n.child;return null===e?Jv(n):e}function Jv(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function ey(){const n=yn.lFrame;return yn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const ty=ey;function Qp(){const n=ey();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function fo(){return yn.lFrame.selectedIndex}function Dl(n){yn.lFrame.selectedIndex=n}function Yr(){const n=yn.lFrame;return Wh(n.tView,n.selectedIndex)}function Zh(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const o=n.data[t].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:u,ngAfterViewInit:h,ngAfterViewChecked:m,ngOnDestroy:v}=o;a&&(n.contentHooks||(n.contentHooks=[])).push(-t,a),u&&((n.contentHooks||(n.contentHooks=[])).push(t,u),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,u)),h&&(n.viewHooks||(n.viewHooks=[])).push(-t,h),m&&((n.viewHooks||(n.viewHooks=[])).push(t,m),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,m)),null!=v&&(n.destroyHooks||(n.destroyHooks=[])).push(t,v)}}function Md(n,e,t){Td(n,e,3,t)}function Ad(n,e,t,r){(3&n[2])===t&&Td(n,e,t,r)}function eg(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function Td(n,e,t,r){const o=r??-1,a=e.length-1;let u=0;for(let h=void 0!==r?65535&n[18]:0;h<a;h++)if("number"==typeof e[h+1]){if(u=e[h],null!=r&&u>=r)break}else e[h]<0&&(n[18]+=65536),(u<o||-1==o)&&(Cl(n,t,e,h),n[18]=(4294901760&n[18])+h+2),h++}function Cl(n,e,t,r){const i=t[r]<0,o=t[r+1],u=n[i?-t[r]:t[r]];if(i){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{o.call(u)}finally{}}}else try{o.call(u)}finally{}}class iu{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function su(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const o=t[r++],a=t[r++],u=t[r++];n.setAttribute(e,a,u,o)}else{const o=i,a=t[++r];sy(o)?n.setProperty(e,o,a):n.setAttribute(e,o,a),r++}}return r}function oy(n){return 3===n||4===n||6===n}function sy(n){return 64===n.charCodeAt(0)}function Sl(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||tg(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function tg(n,e,t,r,i){let o=0,a=n.length;if(-1===e)a=-1;else for(;o<n.length;){const u=n[o++];if("number"==typeof u){if(u===e){a=-1;break}if(u>e){a=o-1;break}}}for(;o<n.length;){const u=n[o];if("number"==typeof u)break;if(u===t){if(null===r)return void(null!==i&&(n[o+1]=i));if(r===n[o+1])return void(n[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==a&&(n.splice(a,0,e),o=a+1),n.splice(o++,0,t),null!==r&&n.splice(o++,0,r),null!==i&&n.splice(o++,0,i)}function kd(n){return-1!==n}function cc(n){return 32767&n}function au(n,e){let t=function ji(n){return n>>16}(n),r=e;for(;t>0;)r=r[15],t--;return r}let Id=!0;function Va(n){const e=Id;return Id=n,e}let N_=0;const Ui={};function Ha(n,e){const t=ng(n,e);if(-1!==t)return t;const r=e[1];r.firstCreatePass&&(n.injectorIndex=e.length,Ai(r.data,n),Ai(e,null),Ai(r.blueprint,null));const i=Qh(n,e),o=n.injectorIndex;if(kd(i)){const a=cc(i),u=au(i,e),h=u[1].data;for(let m=0;m<8;m++)e[o+m]=u[a+m]|h[a+m]}return e[o+8]=i,o}function Ai(n,e){n.push(0,0,0,0,0,0,0,0,e)}function ng(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Qh(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=sg(i),null===r)return-1;if(t++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function Jh(n,e,t){!function cy(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(pd)&&(r=t[pd]),null==r&&(r=t[pd]=N_++);const i=255&r;e.data[n+(i>>5)]|=1<<i}(n,e,t)}function rg(n,e,t){if(t&bn.Optional||void 0!==n)return n;Yn()}function ig(n,e,t,r){if(t&bn.Optional&&void 0===r&&(r=null),!(t&(bn.Self|bn.Host))){const i=n[9],o=Mr(void 0);try{return i?i.get(e,r,t&bn.Optional):Ko(e,r,t&bn.Optional)}finally{Mr(o)}}return rg(r,0,t)}function Ti(n,e,t,r=bn.Default,i){if(null!==n){if(1024&e[2]){const a=function F_(n,e,t,r,i){let o=n,a=e;for(;null!==o&&null!==a&&1024&a[2]&&!(256&a[2]);){const u=kr(o,a,t,r|bn.Self,Ui);if(u!==Ui)return u;let h=o.parent;if(!h){const m=a[21];if(m){const v=m.get(t,Ui,r);if(v!==Ui)return v}h=sg(a),a=a[15]}o=h}return i}(n,e,t,r,Ui);if(a!==Ui)return a}const o=kr(n,e,t,r,Ui);if(o!==Ui)return o}return ig(e,t,r,i)}function kr(n,e,t,r,i){const o=function Rr(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(pd)?n[pd]:void 0;return"number"==typeof e?e>=0?255&e:lu:e}(t);if("function"==typeof o){if(!Kp(e,n,r))return r&bn.Host?rg(i,0,r):ig(e,t,r,i);try{const a=o(r);if(null!=a||r&bn.Optional)return a;Yn()}finally{ty()}}else if("number"==typeof o){let a=null,u=ng(n,e),h=-1,m=r&bn.Host?e[16][6]:null;for((-1===u||r&bn.SkipSelf)&&(h=-1===u?Qh(n,e):e[u+8],-1!==h&&og(r,!1)?(a=e[1],u=cc(h),e=au(h,e)):u=-1);-1!==u;){const v=e[1];if(Od(o,u,v.data)){const x=L_(u,e,t,a,r,m);if(x!==Ui)return x}h=e[u+8],-1!==h&&og(r,e[1].data[u+8]===m)&&Od(o,u,e)?(a=v,u=cc(h),e=au(h,e)):u=-1}}return i}function L_(n,e,t,r,i,o){const a=e[1],u=a.data[n+8],v=ef(u,a,t,null==r?yd(u)&&Id:r!=a&&0!=(3&u.type),i&bn.Host&&o===u);return null!==v?uc(e,a,v,u):Ui}function ef(n,e,t,r,i){const o=n.providerIndexes,a=e.data,u=1048575&o,h=n.directiveStart,v=o>>20,k=i?u+v:n.directiveEnd;for(let F=r?u:u+v;F<k;F++){const Y=a[F];if(F<h&&t===Y||F>=h&&Y.type===t)return F}if(i){const F=a[h];if(F&&No(F)&&F.type===t)return h}return null}function uc(n,e,t,r){let i=n[t];const o=e.data;if(function O_(n){return n instanceof iu}(i)){const a=i;a.resolving&&function Ir(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Ye(-200,`Circular dependency in DI detected for ${n}${t}`)}(function qt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Wt(n)}(o[t]));const u=Va(a.canSeeViewProviders);a.resolving=!0;const h=a.injectImpl?Mr(a.injectImpl):null;Kp(n,r,bn.Default);try{i=n[t]=a.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&function ry(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const a=Qt(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,a),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,a)}i&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,i),o&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o))}(t,o[t],e)}finally{null!==h&&Mr(h),Va(u),a.resolving=!1,ty()}}return i}function Od(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function og(n,e){return!(n&bn.Self||n&bn.Host&&e)}class dc{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Ti(this._tNode,this._lView,e,Xc(r),t)}}function lu(){return new dc(Tr(),At())}function sg(n){const e=n[1],t=e.type;return 2===t?e.declTNode:1===t?n[6]:null}function Rd(n){return function uy(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const o=t[i];if(oy(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(o===e)return t[i+1];i+=2}}}return null}(Tr(),n)}const za="__parameters__";function du(n,e,t){return Zo(()=>{const r=function uu(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const a=new i(...o);return u.annotation=a,u;function u(h,m,v){const x=h.hasOwnProperty(za)?h[za]:Object.defineProperty(h,za,{value:[]})[za];for(;x.length<=v;)x.push(null);return(x[v]=x[v]||[]).push(a),h}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}class Gt{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=nn({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function zs(n,e){n.forEach(t=>Array.isArray(t)?zs(t,e):e(t))}function hu(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function gc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Nd(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}function Fo(n,e,t){let r=mc(n,e);return r>=0?n[1|r]=t:(r=~r,function hy(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function ug(n,e){const t=mc(n,e);if(t>=0)return n[1|t]}function mc(n,e){return function py(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const o=r+(i-r>>1),a=n[o<<t];if(e===a)return o<<t;a>e?i=o:r=o+1}return~(i<<t)}(n,e,1)}const cf=hd(du("Inject",n=>({token:n})),-1),Ml=hd(du("Optional"),8),Ld=hd(du("SkipSelf"),4);var ni=(()=>((ni=ni||{})[ni.Important=1]="Important",ni[ni.DashCase=2]="DashCase",ni))();const Tl=new Map;let bg=0;const xg="__ngContext__";function ro(n,e){Qo(e)?(n[xg]=e[20],function nx(n){Tl.set(n[20],n)}(e)):n[xg]=e}function bc(n,e){return undefined(n,e)}function jd(n){const e=n[3];return Es(e)?e[3]:e}function Dg(n){return Oy(n[13])}function Cg(n){return Oy(n[4])}function Oy(n){for(;null!==n&&!Es(n);)n=n[4];return n}function yu(n,e,t,r,i){if(null!=r){let o,a=!1;Es(r)?o=r:Qo(r)&&(a=!0,r=r[0]);const u=zi(r);0===n&&null!==t?null==i?zy(e,t,u):io(e,t,u,i||null,!0):1===n&&null!==t?io(e,t,u,i||null,!0):2===n?function ca(n,e,t){const r=mf(n,e);r&&function dx(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,u,a):3===n&&e.destroyNode(u),null!=o&&function Gy(n,e,t,r,i){const o=t[7];o!==zi(t)&&yu(e,n,r,o,i);for(let u=10;u<t.length;u++){const h=t[u];bu(h[1],h,n,e,r,o)}}(e,n,o,t,i)}}function Mg(n,e,t){return n.createElement(e,t)}function Fy(n,e){const t=n[9],r=t.indexOf(e),i=e[3];512&e[2]&&(e[2]&=-513,aa(i,-1)),t.splice(r,1)}function gf(n,e){if(n.length<=10)return;const t=10+e,r=n[t];if(r){const i=r[17];null!==i&&i!==n&&Fy(i,r),e>0&&(n[t-1][4]=r[4]);const o=gc(n,10+e);!function Py(n,e){bu(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const a=o[19];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function Ag(n,e){if(!(128&e[2])){const t=e[11];t.destroyNode&&bu(n,e,t,3,null,null),function Ny(n){let e=n[13];if(!e)return Tg(n[1],n);for(;e;){let t=null;if(Qo(e))t=e[13];else{const r=e[10];r&&(t=r)}if(!t){for(;e&&!e[4]&&e!==n;)Qo(e)&&Tg(e[1],e),e=e[3];null===e&&(e=n),Qo(e)&&Tg(e[1],e),t=e&&e[4]}e=t}}(e)}}function Tg(n,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function By(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof iu)){const o=t[r+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){const u=i[o[a]],h=o[a+1];try{h.call(u)}finally{}}else try{o.call(i)}finally{}}}}(n,e),function ux(n,e){const t=n.cleanup,r=e[7];let i=-1;if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const a=t[o+3];a>=0?r[i=a]():r[i=-a].unsubscribe(),o+=2}else{const a=r[i=t[o+1]];t[o].call(a)}if(null!==r){for(let o=i+1;o<r.length;o++)(0,r[o])();e[7]=null}}(n,e),1===e[1].type&&e[11].destroy();const t=e[17];if(null!==t&&Es(e[3])){t!==e[3]&&Fy(t,e);const r=e[19];null!==r&&r.detachView(n)}!function hf(n){Tl.delete(n[20])}(e)}}function Vy(n,e,t){return function Hy(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[0];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=n.data[r.directiveStart+i];if(o===Ns.None||o===Ns.Emulated)return null}return Jo(r,t)}}(n,e.parent,t)}function io(n,e,t,r,i){n.insertBefore(e,t,r,i)}function zy(n,e,t){n.appendChild(e,t)}function jy(n,e,t,r,i){null!==r?io(n,e,t,r,i):zy(n,e,t)}function mf(n,e){return n.parentNode(e)}function la(n,e,t){return vf(n,e,t)}let Wd,Ng,vf=function Ig(n,e,t){return 40&n.type?Jo(n,t):null};function Ga(n,e,t,r){const i=Vy(n,r,e),o=e[11],u=la(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(t))for(let h=0;h<t.length;h++)jy(o,i,t[h],u,!1);else jy(o,i,t,u,!1)}function Gd(n,e){if(null!==e){const t=e.type;if(3&t)return Jo(e,n);if(4&t)return Og(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Gd(n,r);{const i=n[e.index];return Es(i)?Og(-1,i):zi(i)}}if(32&t)return bc(e,n)()||zi(n[e.index]);{const r=Bo(n,e);return null!==r?Array.isArray(r)?r[0]:Gd(jd(n[16]),r):Gd(n,e.next)}}return null}function Bo(n,e){return null!==e?n[16][6].projection[e.projection]:null}function Og(n,e){const t=10+n+1;if(t<e.length){const r=e[t],i=r[1].firstChild;if(null!==i)return Gd(r,i)}return e[7]}function yf(n,e,t,r,i,o,a){for(;null!=t;){const u=r[t.index],h=t.type;if(a&&0===e&&(u&&ro(zi(u),r),t.flags|=2),32!=(32&t.flags))if(8&h)yf(n,e,t.child,r,i,o,!1),yu(e,n,i,u,o);else if(32&h){const m=bc(t,r);let v;for(;v=m();)yu(e,n,i,v,o);yu(e,n,i,u,o)}else 16&h?bf(n,e,r,t,i,o):yu(e,n,i,u,o);t=a?t.projectionNext:t.next}}function bu(n,e,t,r,i,o){yf(t,r,n.firstChild,e,i,o,!1)}function bf(n,e,t,r,i,o){const a=t[16],h=a[6].projection[r.projection];if(Array.isArray(h))for(let m=0;m<h.length;m++)yu(e,n,i,h[m],o);else yf(n,e,h,a[3],i,o,!0)}function $y(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Pg(n,e,t){const{mergedAttrs:r,classes:i,styles:o}=t;null!==r&&su(n,e,r),null!==i&&$y(n,e,i),null!==o&&function $d(n,e,t){n.setAttribute(e,"style",t)}(n,e,o)}function wc(n){return function wf(){if(void 0===Wd&&(Wd=null,Er.trustedTypes))try{Wd=Er.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Wd}()?.createHTML(n)||n}class kl{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${gn})`}}class _c extends kl{getTypeName(){return"HTML"}}class fx extends kl{getTypeName(){return"Style"}}class xc extends kl{getTypeName(){return"Script"}}class c extends kl{getTypeName(){return"URL"}}class s extends kl{getTypeName(){return"ResourceURL"}}function l(n){return n instanceof kl?n.changingThisBreaksApplicationSecurity:n}function d(n,e){const t=function f(n){return n instanceof kl&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${gn})`)}return t===e}class E{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(wc(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class S{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const r=this.inertDocument.createElement("body");t.appendChild(r)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=wc(e),t;const r=this.inertDocument.createElement("body");return r.innerHTML=wc(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(r),r}stripCustomNsAttrs(e){const t=e.attributes;for(let i=t.length-1;0<i;i--){const a=t.item(i).name;("xmlns:ns1"===a||0===a.indexOf("ns1:"))&&e.removeAttribute(a)}let r=e.firstChild;for(;r;)r.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(r),r=r.nextSibling}}const R=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function H(n){return(n=String(n)).match(R)?n:"unsafe:"+n}function W(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function X(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const ne=W("area,br,col,hr,img,wbr"),re=W("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),se=W("rp,rt"),_e=X(ne,X(re,W("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),X(se,W("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),X(se,re)),he=W("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ge=X(he,W("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),W("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Fe=W("script,style,template");class Se{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let i=this.checkClobberedElement(t,t.nextSibling);if(i){t=i;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!_e.hasOwnProperty(t))return this.sanitizedSomething=!0,!Fe.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let i=0;i<r.length;i++){const o=r.item(i),a=o.name,u=a.toLowerCase();if(!ge.hasOwnProperty(u)){this.sanitizedSomething=!0;continue}let h=o.value;he[u]&&(h=H(h)),this.buf.push(" ",a,'="',je(h),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();_e.hasOwnProperty(t)&&!ne.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(je(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const Xe=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ve=/([^\#-~ |!])/g;function je(n){return n.replace(/&/g,"&amp;").replace(Xe,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(Ve,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Qe;function it(n,e){let t=null;try{Qe=Qe||function _(n){const e=new S(n);return function O(){try{return!!(new window.DOMParser).parseFromString(wc(""),"text/html")}catch{return!1}}()?new E(e):e}(n);let r=e?String(e):"";t=Qe.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=t.innerHTML,t=Qe.getInertBodyElement(r)}while(r!==o);return wc((new Se).sanitizeChildren(ct(t)||t))}finally{if(t){const r=ct(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function ct(n){return"content"in n&&function rt(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var tt=(()=>((tt=tt||{})[tt.NONE=0]="NONE",tt[tt.HTML=1]="HTML",tt[tt.STYLE=2]="STYLE",tt[tt.SCRIPT=3]="SCRIPT",tt[tt.URL=4]="URL",tt[tt.RESOURCE_URL=5]="RESOURCE_URL",tt))();const Ft=new Gt("ENVIRONMENT_INITIALIZER"),pn=new Gt("INJECTOR",-1),en=new Gt("INJECTOR_DEF_TYPES");class jt{get(e,t=_s){if(t===_s){const r=new Error(`NullInjectorError: No provider for ${we(e)}!`);throw r.name="NullInjectorError",r}return t}}function Hn(...n){return{\u0275providers:An(0,n),\u0275fromNgModule:!0}}function An(n,...e){const t=[],r=new Set;let i;return zs(e,o=>{const a=o;Rt(a,t,[],r)&&(i||(i=[]),i.push(a))}),void 0!==i&&mn(i,t),t}function mn(n,e){for(let t=0;t<n.length;t++){const{providers:i}=n[t];st(i,o=>{e.push(o)})}}function Rt(n,e,t,r){if(!(n=dt(n)))return!1;let i=null,o=Os(n);const a=!o&&nr(n);if(o||a){if(a&&!a.standalone)return!1;i=n}else{const h=n.ngModule;if(o=Os(h),!o)return!1;i=h}const u=r.has(i);if(a){if(u)return!1;if(r.add(i),a.dependencies){const h="function"==typeof a.dependencies?a.dependencies():a.dependencies;for(const m of h)Rt(m,e,t,r)}}else{if(!o)return!1;{if(null!=o.imports&&!u){let m;r.add(i);try{zs(o.imports,v=>{Rt(v,e,t,r)&&(m||(m=[]),m.push(v))})}finally{}void 0!==m&&mn(m,e)}if(!u){const m=oa(i)||(()=>new i);e.push({provide:i,useFactory:m,deps:mr},{provide:en,useValue:i,multi:!0},{provide:Ft,useValue:()=>St(i),multi:!0})}const h=o.providers;null==h||u||st(h,v=>{e.push(v)})}}return i!==n&&void 0!==n.providers}function st(n,e){for(let t of n)Bt(t)&&(t=t.\u0275providers),Array.isArray(t)?st(t,e):e(t)}const It=yr({provide:String,useValue:yr});function gt(n){return null!==n&&"object"==typeof n&&It in n}function Tt(n){return"function"==typeof n}const Gn=new Gt("Set Injector scope."),fr={},Nn={};let cr;function Dn(){return void 0===cr&&(cr=new jt),cr}class Sn{}class Xr extends Sn{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ol(e,a=>this.processProvider(a)),this.records.set(pn,Wi(void 0,this)),i.has("environment")&&this.records.set(Sn,Wi(void 0,this));const o=this.records.get(Gn);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(en.multi,mr,bn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=vl(this),r=Mr(void 0);try{return e()}finally{vl(t),Mr(r)}}get(e,t=_s,r=bn.Default){this.assertNotDestroyed(),r=Xc(r);const i=vl(this),o=Mr(void 0);try{if(!(r&bn.SkipSelf)){let u=this.records.get(e);if(void 0===u){const h=function Il(n){return"function"==typeof n||"object"==typeof n&&n instanceof Gt}(e)&&Is(e);u=h&&this.injectableDefInScope(h)?Wi(Ei(e),fr):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&bn.Self?Dn():this.parent).get(e,t=r&bn.Optional&&t===_s?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Ro]=a[Ro]||[]).unshift(we(e)),i)throw a;return function Kc(n,e,t,r){const i=n[Ro];throw e[Zi]&&i.unshift(e[Zi]),n.message=function Av(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=we(e);if(Array.isArray(e))i=e.map(we).join(" -> ");else if("object"==typeof e){let o=[];for(let a in e)if(e.hasOwnProperty(a)){let u=e[a];o.push(a+":"+("string"==typeof u?JSON.stringify(u):we(u)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(Hh,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Ro]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Mr(o),vl(i)}}resolveInjectorInitializers(){const e=vl(this),t=Mr(void 0);try{const r=this.get(Ft.multi,mr,bn.Self);for(const i of r)i()}finally{vl(e),Mr(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(we(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ye(205,!1)}processProvider(e){let t=Tt(e=dt(e))?e:dt(e&&e.provide);const r=function Us(n){return gt(n)?Wi(void 0,n.useValue):Wi(Oi(n),fr)}(e);if(Tt(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=Wi(void 0,fr,!0),i.factory=()=>Np(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===fr&&(t.value=Nn,t.value=t.factory()),"object"==typeof t.value&&t.value&&function $a(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=dt(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function Ei(n){const e=Is(n),t=null!==e?e.factory:oa(n);if(null!==t)return t;if(n instanceof Gt)throw new Ye(204,!1);if(n instanceof Function)return function js(n){const e=n.length;if(e>0)throw Nd(e,"?"),new Ye(204,!1);const t=function ws(n){const e=n&&(n[Ia]||n[qc]);if(e){const t=function Wc(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new Ye(204,!1)}function Oi(n,e,t){let r;if(Tt(n)){const i=dt(n);return oa(i)||Ei(i)}if(gt(n))r=()=>dt(n.useValue);else if(function Tn(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Np(n.deps||[]));else if(function vt(n){return!(!n||!n.useExisting)}(n))r=()=>St(dt(n.useExisting));else{const i=dt(n&&(n.useClass||n.provide));if(!function mo(n){return!!n.deps}(n))return oa(i)||Ei(i);r=()=>new i(...Np(n.deps))}return r}function Wi(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Ol(n,e){for(const t of n)Array.isArray(t)?Ol(t,e):t&&Bt(t)?Ol(t.\u0275providers,e):e(t)}class Ec{}class Dc{}class oo{resolveComponentFactory(e){throw function Ef(n){const e=Error(`No component factory found for ${we(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let Ri=(()=>{class n{}return n.NULL=new oo,n})();function Df(){return vo(Tr(),At())}function vo(n,e){return new br(Jo(n,e))}let br=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=Df,n})();function px(n){return n instanceof br?n.nativeElement:n}class Yd{}let Wa=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function gx(){const n=At(),t=rr(Tr().index,n);return(Qo(t)?t:n)[11]}(),n})(),mx=(()=>{class n{}return n.\u0275prov=nn({token:n,providedIn:"root",factory:()=>null}),n})();class _u{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const vx=new _u("15.1.5"),Cc={};function Sf(n){return n.ngOriginalError}class ua{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Sf(e);for(;t&&Sf(t);)t=Sf(t);return t||null}}function xu(n){return n.ownerDocument.defaultView}function rs(n){return n.ownerDocument}function cM(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}const uM="ng-template";function DV(n,e,t){let r=0;for(;r<n.length;){let i=n[r++];if(t&&"class"===i){if(i=n[r],-1!==cM(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function dM(n){return 4===n.type&&n.value!==uM}function CV(n,e,t){return e===(4!==n.type||t?n.value:uM)}function SV(n,e,t){let r=4;const i=n.attrs||[],o=function TV(n){for(let e=0;e<n.length;e++)if(oy(n[e]))return e;return n.length}(i);let a=!1;for(let u=0;u<e.length;u++){const h=e[u];if("number"!=typeof h){if(!a)if(4&r){if(r=2|1&r,""!==h&&!CV(n,h,t)||""===h&&1===e.length){if(qa(r))return!1;a=!0}}else{const m=8&r?h:e[++u];if(8&r&&null!==n.attrs){if(!DV(n.attrs,m,t)){if(qa(r))return!1;a=!0}continue}const x=MV(8&r?"class":h,i,dM(n),t);if(-1===x){if(qa(r))return!1;a=!0;continue}if(""!==m){let k;k=x>o?"":i[x+1].toLowerCase();const F=8&r?k:null;if(F&&-1!==cM(F,m,0)||2&r&&m!==k){if(qa(r))return!1;a=!0}}}}else{if(!a&&!qa(r)&&!qa(h))return!1;if(a&&qa(h))continue;a=!1,r=h|1&r}}return qa(r)||a}function qa(n){return 0==(1&n)}function MV(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){const a=e[i];if(a===n)return i;if(3===a||6===a)o=!0;else{if(1===a||2===a){let u=e[++i];for(;"string"==typeof u;)u=e[++i];continue}if(4===a)break;if(0===a){i+=4;continue}}i+=o?1:2}return-1}return function kV(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function hM(n,e,t=!1){for(let r=0;r<e.length;r++)if(SV(n,e[r],t))return!0;return!1}function IV(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function fM(n,e){return n?":not("+e.trim()+")":e}function OV(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let a=n[t];if("string"==typeof a)if(2&r){const u=n[++t];i+="["+a+(u.length>0?'="'+u+'"':"")+"]"}else 8&r?i+="."+a:4&r&&(i+=" "+a);else""!==i&&!qa(a)&&(e+=fM(o,i),i=""),r=a,o=o||!qa(r);t++}return""!==i&&(e+=fM(o,i)),e}const On={};function di(n){pM(Un(),At(),fo()+n,!1)}function pM(n,e,t,r){if(!r)if(3==(3&e[2])){const o=n.preOrderCheckHooks;null!==o&&Md(e,o,t)}else{const o=n.preOrderHooks;null!==o&&Ad(e,o,0,t)}Dl(t)}function yM(n,e=null,t=null,r){const i=function bM(n,e=null,t=null,r,i=new Set){const o=[t||mr,Hn(n)];return r=r||("object"==typeof n?void 0:we(n)),new Xr(o,e||Dn(),r||null,i)}(n,e,t,r);return i.resolveInjectorInitializers(),i}let Ya=(()=>{class n{static create(t,r){if(Array.isArray(t))return yM({name:""},r,t,"");{const i=t.name??"";return yM({name:i},t.parent,t.providers,i)}}}return n.THROW_IF_NOT_FOUND=_s,n.NULL=new jt,n.\u0275prov=nn({token:n,providedIn:"any",factory:()=>St(pn)}),n.__NG_ELEMENT_ID__=-1,n})();function et(n,e=bn.Default){const t=At();return null===t?St(n,e):Ti(Tr(),t,dt(n),e)}function Qy(){throw new Error("invalid")}function SM(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const o=t[r+1];if(-1!==o){const a=n.data[o];ac(t[r]),a.contentQueries(2,e[o],o)}}}function Jy(n,e,t,r,i,o,a,u,h,m,v){const x=e.blueprint.slice();return x[0]=i,x[2]=76|r,(null!==v||n&&1024&n[2])&&(x[2]|=1024),Fa(x),x[3]=x[15]=n,x[8]=t,x[10]=a||n&&n[10],x[11]=u||n&&n[11],x[12]=h||n&&n[12]||null,x[9]=m||n&&n[9]||null,x[6]=o,x[20]=function Cy(){return bg++}(),x[21]=v,x[16]=2==e.type?n[16]:x,x}function Tf(n,e,t,r,i){let o=n.data[e];if(null===o)o=function Dx(n,e,t,r,i){const o=qp(),a=Yp(),h=n.data[e]=function iH(n,e,t,r,i,o){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,a?o:o&&o.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=h),null!==o&&(a?null==o.child&&null!==h.parent&&(o.child=h):null===o.next&&(o.next=h)),h}(n,e,t,r,i),function Xv(){return yn.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=t,o.value=r,o.attrs=i;const a=function ru(){const n=yn.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();o.injectorIndex=null===a?-1:a.injectorIndex}return Vs(o,!0),o}function Bg(n,e,t,r){if(0===t)return-1;const i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Cx(n,e,t){Zp(e);try{const r=n.viewQuery;null!==r&&Nx(1,r,t);const i=n.template;null!==i&&MM(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&SM(n,e),n.staticViewQueries&&Nx(2,n.viewQuery,t);const o=n.components;null!==o&&function tH(n,e){for(let t=0;t<e.length;t++)EH(n,e[t])}(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[2]&=-5,Qp()}}function e0(n,e,t,r){const i=e[2];if(128!=(128&i)){Zp(e);try{Fa(e),function Ed(n){return yn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&MM(n,e,t,2,r);const a=3==(3&i);if(a){const m=n.preOrderCheckHooks;null!==m&&Md(e,m,null)}else{const m=n.preOrderHooks;null!==m&&Ad(e,m,0,null),eg(e,0)}if(function _H(n){for(let e=Dg(n);null!==e;e=Cg(e)){if(!e[2])continue;const t=e[9];for(let r=0;r<t.length;r++){const i=t[r];512&i[2]||aa(i[3],1),i[2]|=512}}}(e),function wH(n){for(let e=Dg(n);null!==e;e=Cg(e))for(let t=10;t<e.length;t++){const r=e[t],i=r[1];qh(r)&&e0(i,r,i.template,r[8])}}(e),null!==n.contentQueries&&SM(n,e),a){const m=n.contentCheckHooks;null!==m&&Md(e,m)}else{const m=n.contentHooks;null!==m&&Ad(e,m,1),eg(e,1)}!function JV(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)Dl(~i);else{const o=i,a=t[++r],u=t[++r];Kv(a,o),u(2,e[o])}}}finally{Dl(-1)}}(n,e);const u=n.components;null!==u&&function eH(n,e){for(let t=0;t<e.length;t++)xH(n,e[t])}(e,u);const h=n.viewQuery;if(null!==h&&Nx(2,h,r),a){const m=n.viewCheckHooks;null!==m&&Md(e,m)}else{const m=n.viewHooks;null!==m&&Ad(e,m,2),eg(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,aa(e[3],-1))}finally{Qp()}}}function MM(n,e,t,r,i){const o=fo(),a=2&r;try{Dl(-1),a&&e.length>22&&pM(n,e,22,!1),t(r,i)}finally{Dl(o)}}function Sx(n,e,t){if(jp(e)){const i=e.directiveEnd;for(let o=e.directiveStart;o<i;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}}function Mx(n,e,t){qv()&&(function uH(n,e,t,r){const i=t.directiveStart,o=t.directiveEnd;yd(t)&&function vH(n,e,t){const r=Jo(e,n),i=AM(t),o=n[10],a=t0(n,Jy(n,i,null,t.onPush?32:16,r,e,o,o.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Ha(t,e),ro(r,e);const a=t.initialInputs;for(let u=i;u<o;u++){const h=n.data[u],m=uc(e,n,u,t);ro(m,e),null!==a&&yH(0,u-i,m,h,0,a),No(h)&&(rr(t.index,e)[8]=uc(e,n,u,t))}}(n,e,t,Jo(t,e)),64==(64&t.flags)&&PM(n,e,t))}function Ax(n,e,t=Jo){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const a=r[o+1],u=-1===a?t(e,n):n[a];n[i++]=u}}}function AM(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Tx(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function Tx(n,e,t,r,i,o,a,u,h,m){const v=22+r,x=v+i,k=function nH(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:On);return t}(v,x),F="function"==typeof m?m():m;return k[1]={type:n,blueprint:k,template:t,queries:null,viewQuery:u,declTNode:e,data:k.slice().fill(null,v),bindingStartIndex:v,expandoStartIndex:x,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:h,consts:F,incompleteFirstPass:!1}}function TM(n,e,t,r){const i=LM(e);null===t?i.push(r):(i.push(t),n.firstCreatePass&&FM(n).push(r,i.length-1))}function kM(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const o=n[i];null===r?IM(t,e,i,o):r.hasOwnProperty(i)&&IM(t,e,r[i],o)}return t}function IM(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function $s(n,e,t,r,i,o,a,u){const h=Jo(e,t);let v,m=e.inputs;!u&&null!=m&&(v=m[r])?(Lx(n,t,v,r,i),yd(e)&&OM(t,e.index)):3&e.type&&(r=function sH(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=a?a(i,e.value||"",r):i,o.setProperty(h,r,i))}function OM(n,e){const t=rr(e,n);16&t[2]||(t[2]|=32)}function kx(n,e,t,r){let i=!1;if(qv()){const o=null===r?null:{"":-1},a=function hH(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let o=0;o<t.length;o++){const a=t[o];if(hM(e,a.selectors,!1))if(r||(r=[]),No(a))if(null!==a.findHostDirectiveDefs){const u=[];i=i||new Map,a.findHostDirectiveDefs(a,u,i),r.unshift(...u,a),Ix(n,e,u.length)}else r.unshift(a),Ix(n,e,0);else i=i||new Map,a.findHostDirectiveDefs?.(a,r,i),r.push(a)}return null===r?null:[r,i]}(n,t);let u,h;null===a?u=h=null:[u,h]=a,null!==u&&(i=!0,RM(n,e,t,u,o,h)),o&&function fH(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const o=t[e[i+1]];if(null==o)throw new Ye(-301,!1);r.push(e[i],o)}}}(t,r,o)}return t.mergedAttrs=Sl(t.mergedAttrs,t.attrs),i}function RM(n,e,t,r,i,o){for(let m=0;m<r.length;m++)Jh(Ha(t,e),n,r[m].type);!function gH(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let m=0;m<r.length;m++){const v=r[m];v.providersResolver&&v.providersResolver(v)}let a=!1,u=!1,h=Bg(n,e,r.length,null);for(let m=0;m<r.length;m++){const v=r[m];t.mergedAttrs=Sl(t.mergedAttrs,v.hostAttrs),mH(n,t,e,h,v),pH(h,v,i),null!==v.contentQueries&&(t.flags|=4),(null!==v.hostBindings||null!==v.hostAttrs||0!==v.hostVars)&&(t.flags|=64);const x=v.type.prototype;!a&&(x.ngOnChanges||x.ngOnInit||x.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!u&&(x.ngOnChanges||x.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),u=!0),h++}!function oH(n,e,t){const i=e.directiveEnd,o=n.data,a=e.attrs,u=[];let h=null,m=null;for(let v=e.directiveStart;v<i;v++){const x=o[v],k=t?t.get(x):null,Y=k?k.outputs:null;h=kM(x.inputs,v,h,k?k.inputs:null),m=kM(x.outputs,v,m,Y);const ie=null===h||null===a||dM(e)?null:bH(h,v,a);u.push(ie)}null!==h&&(h.hasOwnProperty("class")&&(e.flags|=8),h.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=u,e.inputs=h,e.outputs=m}(n,t,o)}function PM(n,e,t){const r=t.directiveStart,i=t.directiveEnd,o=t.index,a=function Dd(){return yn.lFrame.currentDirectiveIndex}();try{Dl(o);for(let u=r;u<i;u++){const h=n.data[u],m=e[u];Yh(u),(null!==h.hostBindings||0!==h.hostVars||null!==h.hostAttrs)&&dH(h,m)}}finally{Dl(-1),Yh(a)}}function dH(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Ix(n,e,t){e.componentOffset=t,(n.components||(n.components=[])).push(e.index)}function pH(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;No(e)&&(t[""]=n)}}function mH(n,e,t,r,i){n.data[r]=i;const o=i.factory||(i.factory=oa(i.type)),a=new iu(o,No(i),et);n.blueprint[r]=a,t[r]=a,function lH(n,e,t,r,i){const o=i.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const u=~e.index;(function cH(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=u&&a.push(u),a.push(t,r,o)}}(n,e,r,Bg(n,t,i.hostVars,On),i)}function Pl(n,e,t,r,i,o){const a=Jo(n,e);!function Ox(n,e,t,r,i,o,a){if(null==o)n.removeAttribute(e,i,t);else{const u=null==a?Wt(o):a(o,r||"",i);n.setAttribute(e,i,u,t)}}(e[11],a,o,n.value,t,r,i)}function yH(n,e,t,r,i,o){const a=o[e];if(null!==a){const u=r.setInput;for(let h=0;h<a.length;){const m=a[h++],v=a[h++],x=a[h++];null!==u?r.setInput(t,x,m,v):t[v]=x}}}function bH(n,e,t){let r=null,i=0;for(;i<t.length;){const o=t[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(n.hasOwnProperty(o)){null===r&&(r=[]);const a=n[o];for(let u=0;u<a.length;u+=2)if(a[u]===e){r.push(o,a[u+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function NM(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null]}function xH(n,e){const t=rr(e,n);if(qh(t)){const r=t[1];48&t[2]?e0(r,t,r.template,t[8]):t[5]>0&&Rx(t)}}function Rx(n){for(let r=Dg(n);null!==r;r=Cg(r))for(let i=10;i<r.length;i++){const o=r[i];if(qh(o))if(512&o[2]){const a=o[1];e0(a,o,a.template,o[8])}else o[5]>0&&Rx(o)}const t=n[1].components;if(null!==t)for(let r=0;r<t.length;r++){const i=rr(t[r],n);qh(i)&&i[5]>0&&Rx(i)}}function EH(n,e){const t=rr(e,n),r=t[1];(function DH(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(r,t),Cx(r,t,t[8])}function t0(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function Px(n){for(;n;){n[2]|=32;const e=jd(n);if(m_(n)&&!e)return n;n=e}return null}function n0(n,e,t,r=!0){const i=e[10];i.begin&&i.begin();try{e0(n,e,n.template,t)}catch(a){throw r&&VM(e,a),a}finally{i.end&&i.end()}}function Nx(n,e,t){ac(0),e(n,t)}function LM(n){return n[7]||(n[7]=[])}function FM(n){return n.cleanup||(n.cleanup=[])}function VM(n,e){const t=n[9],r=t?t.get(ua,null):null;r&&r.handleError(e)}function Lx(n,e,t,r,i){for(let o=0;o<t.length;){const a=t[o++],u=t[o++],h=e[a],m=n.data[a];null!==m.setInput?m.setInput(h,i,r,u):h[u]=i}}function r0(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(null!==e)for(let a=0;a<e.length;a++){const u=e[a];"number"==typeof u?o=u:1==o?i=Ue(i,u):2==o&&(r=Ue(r,u+": "+e[++a]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function o0(n,e,t,r,i=!1){for(;null!==t;){const o=e[t.index];if(null!==o&&r.push(zi(o)),Es(o))for(let u=10;u<o.length;u++){const h=o[u],m=h[1].firstChild;null!==m&&o0(h[1],h,m,r)}const a=t.type;if(8&a)o0(n,e,t.child,r);else if(32&a){const u=bc(t,e);let h;for(;h=u();)r.push(h)}else if(16&a){const u=Bo(e,t);if(Array.isArray(u))r.push(...u);else{const h=jd(e[16]);o0(h[1],h,u,r,!0)}}t=i?t.projectionNext:t.next}return r}class Vg{get rootNodes(){const e=this._lView,t=e[1];return o0(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Es(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(gf(e,r),gc(t,r))}this._attachedToViewContainer=!1}Ag(this._lView[1],this._lView)}onDestroy(e){TM(this._lView[1],this._lView,null,e)}markForCheck(){Px(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){n0(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ye(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function cx(n,e){bu(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Ye(902,!1);this._appRef=e}}class CH extends Vg{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;n0(e[1],e,e[8],!1)}checkNoChanges(){}get context(){return null}}class HM extends Ri{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=nr(e);return new Hg(t,this.ngModule)}}function zM(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class MH{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Xc(r);const i=this.injector.get(e,Cc,r);return i!==Cc||t===Cc?i:this.parentInjector.get(e,t,r)}}class Hg extends Dc{get inputs(){return zM(this.componentDef.inputs)}get outputs(){return zM(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function RV(n){return n.map(OV).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=(i=i||this.ngModule)instanceof Sn?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const a=o?new MH(e,o):e,u=a.get(Yd,null);if(null===u)throw new Ye(407,!1);const h=a.get(mx,null),m=u.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",x=r?function rH(n,e,t){return n.selectRootElement(e,t===Ns.ShadowDom)}(m,r,this.componentDef.encapsulation):Mg(m,v,function SH(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(v)),k=this.componentDef.onPush?288:272,F=Tx(0,null,null,1,0,null,null,null,null,null),Y=Jy(null,F,null,k,null,null,u,m,h,a,null);let ie,me;Zp(Y);try{const Oe=this.componentDef;let Ke,Ge=null;Oe.findHostDirectiveDefs?(Ke=[],Ge=new Map,Oe.findHostDirectiveDefs(Oe,Ke,Ge),Ke.push(Oe)):Ke=[Oe];const ot=function TH(n,e){const t=n[1];return n[22]=e,Tf(t,22,2,"#host",null)}(Y,x),wt=function kH(n,e,t,r,i,o,a,u){const h=i[1];!function IH(n,e,t,r){for(const i of n)e.mergedAttrs=Sl(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(r0(e,e.mergedAttrs,!0),null!==t&&Pg(r,t,e))}(r,n,e,a);const m=o.createRenderer(e,t),v=Jy(i,AM(t),null,t.onPush?32:16,i[n.index],n,o,m,u||null,null,null);return h.firstCreatePass&&Ix(h,n,r.length-1),t0(i,v),i[n.index]=v}(ot,x,Oe,Ke,Y,u,m);me=Wh(F,22),x&&function RH(n,e,t,r){if(r)su(n,t,["ng-version",vx.full]);else{const{attrs:i,classes:o}=function PV(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let o=n[r];if("string"==typeof o)2===i?""!==o&&e.push(o,n[++r]):8===i&&t.push(o);else{if(!qa(i))break;i=o}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&su(n,t,i),o&&o.length>0&&$y(n,t,o.join(" "))}}(m,Oe,x,r),void 0!==t&&function PH(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const o=t[i];r.push(null!=o?Array.from(o):null)}}(me,this.ngContentSelectors,t),ie=function OH(n,e,t,r,i,o){const a=Tr(),u=i[1],h=Jo(a,i);RM(u,i,a,t,null,r);for(let v=0;v<t.length;v++)ro(uc(i,u,a.directiveStart+v,a),i);PM(u,i,a),h&&ro(h,i);const m=uc(i,u,a.directiveStart+a.componentOffset,a);if(n[8]=i[8]=m,null!==o)for(const v of o)v(m,e);return Sx(u,a,n),m}(wt,Oe,Ke,Ge,Y,[NH]),Cx(F,Y,null)}finally{Qp()}return new AH(this.componentType,ie,vo(me,Y),Y,me)}}class AH extends Ec{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=t,this.hostView=this.changeDetectorRef=new CH(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){const o=this._rootLView;Lx(o[1],o,i,e,t),OM(o,this._tNode.index)}}get injector(){return new dc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function NH(){const n=Tr();Zh(At()[1],n)}function Fn(n){let e=function jM(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(No(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Ye(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const a=n;a.inputs=Fx(n.inputs),a.declaredInputs=Fx(n.declaredInputs),a.outputs=Fx(n.outputs);const u=i.hostBindings;u&&VH(n,u);const h=i.viewQuery,m=i.contentQueries;if(h&&FH(n,h),m&&BH(n,m),Me(n.inputs,i.inputs),Me(n.declaredInputs,i.declaredInputs),Me(n.outputs,i.outputs),No(i)&&i.data.animation){const v=n.data;v.animation=(v.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let a=0;a<o.length;a++){const u=o[a];u&&u.ngInherit&&u(n),u===Fn&&(t=!1)}}e=Object.getPrototypeOf(e)}!function LH(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Sl(i.hostAttrs,t=Sl(t,i.hostAttrs))}}(r)}function Fx(n){return n===Na?{}:n===mr?[]:n}function FH(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function BH(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,o)=>{e(r,i,o),t(r,i,o)}:e}function VH(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}let s0=null;function Kd(){if(!s0){const n=Er.Symbol;if(n&&n.iterator)s0=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const r=e[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(s0=r)}}}return s0}function a0(n){return!!Bx(n)&&(Array.isArray(n)||!(n instanceof Map)&&Kd()in n)}function Bx(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Vo(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Ho(n,e,t,r){const i=At();return Vo(i,El(),e)&&(Un(),Pl(Yr(),i,n,e,t,r)),Ho}function Vf(n,e,t,r,i,o,a,u){const h=At(),m=Un(),v=n+22,x=m.firstCreatePass?function XH(n,e,t,r,i,o,a,u,h){const m=e.consts,v=Tf(e,n,4,a||null,wl(m,u));kx(e,t,v,wl(m,h)),Zh(e,v);const x=v.tViews=Tx(2,v,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,m);return null!==e.queries&&(e.queries.template(e,v),x.queries=e.queries.embeddedTView(v)),v}(v,m,h,e,t,r,i,o,a):m.data[v];Vs(x,!1);const k=h[11].createComment("");Ga(m,h,k,x),ro(k,h),t0(h,h[v]=NM(k,h,k,x)),$h(x)&&Mx(m,h,x),null!=a&&Ax(h,x,u)}function ri(n,e,t){const r=At();return Vo(r,El(),e)&&$s(Un(),Yr(),r,n,e,r[11],t,!1),ri}function Vx(n,e,t,r,i){const a=i?"class":"style";Lx(n,t,e.inputs[a],a,r)}function wr(n,e,t,r){const i=At(),o=Un(),a=22+n,u=i[11],h=i[a]=Mg(u,e,function Kh(){return yn.lFrame.currentNamespace}()),m=o.firstCreatePass?function ZH(n,e,t,r,i,o,a){const u=e.consts,m=Tf(e,n,2,i,wl(u,o));return kx(e,t,m,wl(u,a)),null!==m.attrs&&r0(m,m.attrs,!1),null!==m.mergedAttrs&&r0(m,m.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,m),m}(a,o,i,0,e,t,r):o.data[a];return Vs(m,!0),Pg(u,h,m),32!=(32&m.flags)&&Ga(o,i,h,m),0===function Wp(){return yn.lFrame.elementDepthCount}()&&ro(h,i),function $v(){yn.lFrame.elementDepthCount++}(),$h(m)&&(Mx(o,i,m),Sx(o,m,i)),null!==r&&Ax(i,m),wr}function Vr(){let n=Tr();Yp()?_l():(n=n.parent,Vs(n,!1));const e=n;!function Wv(){yn.lFrame.elementDepthCount--}();const t=Un();return t.firstCreatePass&&(Zh(t,n),jp(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function iy(n){return 0!=(8&n.flags)}(e)&&Vx(t,e,At(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function dr(n){return 0!=(16&n.flags)}(e)&&Vx(t,e,At(),e.stylesWithoutHost,!1),Vr}function zo(n,e,t,r){return wr(n,e,t,r),Vr(),zo}function jg(){return At()}function c0(n){return!!n&&"function"==typeof n.then}const iA=function rA(n){return!!n&&"function"==typeof n.subscribe};function jr(n,e,t,r){const i=At(),o=Un(),a=Tr();return function sA(n,e,t,r,i,o,a){const u=$h(r),m=n.firstCreatePass&&FM(n),v=e[8],x=LM(e);let k=!0;if(3&r.type||a){const ie=Jo(r,e),me=a?a(ie):ie,Oe=x.length,Ke=a?ot=>a(zi(ot[r.index])):r.index;let Ge=null;if(!a&&u&&(Ge=function JH(n,e,t,r){const i=n.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const a=i[o];if(a===t&&i[o+1]===r){const u=e[7],h=i[o+2];return u.length>h?u[h]:null}"string"==typeof a&&(o+=2)}return null}(n,e,i,r.index)),null!==Ge)(Ge.__ngLastListenerFn__||Ge).__ngNextListenerFn__=o,Ge.__ngLastListenerFn__=o,k=!1;else{o=lA(r,e,v,o,!1);const ot=t.listen(me,i,o);x.push(o,ot),m&&m.push(i,Ke,Oe,Oe+1)}}else o=lA(r,e,v,o,!1);const F=r.outputs;let Y;if(k&&null!==F&&(Y=F[i])){const ie=Y.length;if(ie)for(let me=0;me<ie;me+=2){const wt=e[Y[me]][Y[me+1]].subscribe(o),Et=x.length;x.push(o,wt),m&&m.push(i,r.index,Et,-(Et+1))}}}(o,i,i[11],a,n,e,r),jr}function aA(n,e,t,r){try{return!1!==t(r)}catch(i){return VM(n,i),!1}}function lA(n,e,t,r,i){return function o(a){if(a===Function)return r;Px(n.componentOffset>-1?rr(n.index,e):e);let h=aA(e,0,r,a),m=o.__ngNextListenerFn__;for(;m;)h=aA(e,0,m,a)&&h,m=m.__ngNextListenerFn__;return i&&!1===h&&(a.preventDefault(),a.returnValue=!1),h}}function yo(n=1){return function T_(n){return(yn.lFrame.contextLView=function k_(n,e){for(;n>0;)e=e[15],n--;return e}(n,yn.lFrame.contextLView))[8]}(n)}function ez(n,e){let t=null;const r=function AV(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?hM(n,o,!0):IV(r,o))return i}else t=i}return t}function Eu(n){const e=At()[16][6];if(!e.projection){const r=e.projection=Nd(n?n.length:1,null),i=r.slice();let o=e.child;for(;null!==o;){const a=n?ez(o,n):0;null!==a&&(i[a]?i[a].projectionNext=o:r[a]=o,i[a]=o),o=o.next}}}function Ws(n,e=0,t){const r=At(),i=Un(),o=Tf(i,22+n,16,null,t||null);null===o.projection&&(o.projection=e),_l(),32!=(32&o.flags)&&function Rg(n,e,t){bf(e[11],0,e,t,Vy(n,t,e),la(t.parent||e[6],t,e))}(i,r,o)}function u0(n,e){return n<<17|e<<2}function Du(n){return n>>17&32767}function Ux(n){return 2|n}function Qd(n){return(131068&n)>>2}function Gx(n,e){return-131069&n|e<<2}function $x(n){return 1|n}function yA(n,e,t,r,i){const o=n[t+1],a=null===e;let u=r?Du(o):Qd(o),h=!1;for(;0!==u&&(!1===h||a);){const v=n[u+1];sz(n[u],e)&&(h=!0,n[u+1]=r?$x(v):Ux(v)),u=r?Du(v):Qd(v)}h&&(n[t+1]=r?Ux(o):$x(o))}function sz(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&mc(n,e)>=0}function Jd(n,e,t){return Xa(n,e,t,!1),Jd}function bo(n,e){return Xa(n,e,null,!0),bo}function Xa(n,e,t,r){const i=At(),o=Un(),a=function Ba(n){const e=yn.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);o.firstUpdatePass&&function SA(n,e,t,r){const i=n.data;if(null===i[t+1]){const o=i[fo()],a=function CA(n,e){return e>=n.expandoStartIndex}(n,t);(function kA(n,e){return 0!=(n.flags&(e?8:16))})(o,r)&&null===e&&!a&&(e=!1),e=function gz(n,e,t,r){const i=function Xh(n){const e=yn.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=Ug(t=Wx(null,n,e,t,r),e.attrs,r),o=null);else{const a=e.directiveStylingLast;if(-1===a||n[a]!==i)if(t=Wx(i,n,e,t,r),null===o){let h=function mz(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Qd(r))return n[Du(r)]}(n,e,r);void 0!==h&&Array.isArray(h)&&(h=Wx(null,n,e,h[1],r),h=Ug(h,e.attrs,r),function vz(n,e,t,r){n[Du(t?e.classBindings:e.styleBindings)]=r}(n,e,r,h))}else o=function yz(n,e,t){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Ug(r,n[o].hostAttrs,t);return Ug(r,e.attrs,t)}(n,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),t}(i,o,e,r),function iz(n,e,t,r,i,o){let a=o?e.classBindings:e.styleBindings,u=Du(a),h=Qd(a);n[r]=t;let v,m=!1;if(Array.isArray(t)?(v=t[1],(null===v||mc(t,v)>0)&&(m=!0)):v=t,i)if(0!==h){const k=Du(n[u+1]);n[r+1]=u0(k,u),0!==k&&(n[k+1]=Gx(n[k+1],r)),n[u+1]=function nz(n,e){return 131071&n|e<<17}(n[u+1],r)}else n[r+1]=u0(u,0),0!==u&&(n[u+1]=Gx(n[u+1],r)),u=r;else n[r+1]=u0(h,0),0===u?u=r:n[h+1]=Gx(n[h+1],r),h=r;m&&(n[r+1]=Ux(n[r+1])),yA(n,v,r,!0),yA(n,v,r,!1),function oz(n,e,t,r,i){const o=i?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof e&&mc(o,e)>=0&&(t[r+1]=$x(t[r+1]))}(e,v,n,r,o),a=u0(u,h),o?e.classBindings=a:e.styleBindings=a}(i,o,e,t,a,r)}}(o,n,a,r),e!==On&&Vo(i,a,e)&&function AA(n,e,t,r,i,o,a,u){if(!(3&e.type))return;const h=n.data,m=h[u+1],v=function rz(n){return 1==(1&n)}(m)?TA(h,e,t,i,Qd(m),a):void 0;d0(v)||(d0(o)||function tz(n){return 2==(2&n)}(m)&&(o=TA(h,null,t,i,u,a)),function wu(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=-1===r.indexOf("-")?void 0:ni.DashCase;null==i?n.removeStyle(t,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=ni.Important),n.setStyle(t,r,i,o))}}(r,a,wd(fo(),t),i,o))}(o,o.data[fo()],i,i[11],n,i[a+1]=function _z(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=we(l(n)))),n}(e,t),r,a)}function Wx(n,e,t,r,i){let o=null;const a=t.directiveEnd;let u=t.directiveStylingLast;for(-1===u?u=t.directiveStart:u++;u<a&&(o=e[u],r=Ug(r,o.hostAttrs,i),o!==n);)u++;return null!==n&&(t.directiveStylingLast=u),r}function Ug(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?i=a:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Fo(n,a,!!t||e[++o]))}return void 0===n?null:n}function TA(n,e,t,r,i,o){const a=null===e;let u;for(;i>0;){const h=n[i],m=Array.isArray(h),v=m?h[1]:h,x=null===v;let k=t[i+1];k===On&&(k=x?mr:void 0);let F=x?ug(k,r):v===r?k:void 0;if(m&&!d0(F)&&(F=ug(h,r)),d0(F)&&(u=F,a))return u;const Y=n[i+1];i=a?Du(Y):Qd(Y)}if(null!==e){let h=o?e.residualClasses:e.residualStyles;null!=h&&(u=ug(h,r))}return u}function d0(n){return void 0!==n}function eh(n,e=""){const t=At(),r=Un(),i=n+22,o=r.firstCreatePass?Tf(r,i,1,e,null):r.data[i],a=t[i]=function Sg(n,e){return n.createText(e)}(t[11],e);Ga(r,t,a,o),Vs(o,!1)}function Gg(n){return qx("",n,""),Gg}function qx(n,e,t){const r=At(),i=function If(n,e,t,r){return Vo(n,El(),t)?e+Wt(t)+r:On}(r,n,e,t);return i!==On&&function Mc(n,e,t){const r=wd(e,n);!function Ry(n,e,t){n.setValue(e,t)}(n[11],r,t)}(r,fo(),i),qx}function Yx(n,e,t){const r=At();return Vo(r,El(),e)&&$s(Un(),Yr(),r,n,e,r[11],t,!0),Yx}const jf="en-US";let ZA=jf;function Zx(n,e,t,r,i){if(n=dt(n),Array.isArray(n))for(let o=0;o<n.length;o++)Zx(n[o],e,t,r,i);else{const o=Un(),a=At();let u=Tt(n)?n:dt(n.provide),h=Oi(n);const m=Tr(),v=1048575&m.providerIndexes,x=m.directiveStart,k=m.providerIndexes>>20;if(Tt(n)||!n.multi){const F=new iu(h,i,et),Y=Jx(u,e,i?v:v+k,x);-1===Y?(Jh(Ha(m,a),o,u),Qx(o,n,e.length),e.push(u),m.directiveStart++,m.directiveEnd++,i&&(m.providerIndexes+=1048576),t.push(F),a.push(F)):(t[Y]=F,a[Y]=F)}else{const F=Jx(u,e,v+k,x),Y=Jx(u,e,v,v+k),me=Y>=0&&t[Y];if(i&&!me||!i&&!(F>=0&&t[F])){Jh(Ha(m,a),o,u);const Oe=function H5(n,e,t,r,i){const o=new iu(n,t,et);return o.multi=[],o.index=e,o.componentProviders=0,xT(o,i,r&&!t),o}(i?V5:B5,t.length,i,r,h);!i&&me&&(t[Y].providerFactory=Oe),Qx(o,n,e.length,0),e.push(u),m.directiveStart++,m.directiveEnd++,i&&(m.providerIndexes+=1048576),t.push(Oe),a.push(Oe)}else Qx(o,n,F>-1?F:Y,xT(t[i?Y:F],h,!i&&r));!i&&r&&me&&t[Y].componentProviders++}}}function Qx(n,e,t,r){const i=Tt(e),o=function rn(n){return!!n.useClass}(e);if(i||o){const h=(o?dt(e.useClass):e).prototype.ngOnDestroy;if(h){const m=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const v=m.indexOf(t);-1===v?m.push(t,[r,h]):m[v+1].push(r,h)}else m.push(t,h)}}}function xT(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Jx(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function B5(n,e,t,r){return eE(this.multi,[])}function V5(n,e,t,r){const i=this.multi;let o;if(this.providerFactory){const a=this.providerFactory.componentProviders,u=uc(t,t[1],this.providerFactory.index,r);o=u.slice(0,a),eE(i,o);for(let h=a;h<u.length;h++)o.push(u[h])}else o=[],eE(i,o);return o}function eE(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Hr(n,e=[]){return t=>{t.providersResolver=(r,i)=>function F5(n,e,t){const r=Un();if(r.firstCreatePass){const i=No(n);Zx(t,r.data,r.blueprint,i,!0),Zx(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class Uf{}class U5 extends Uf{constructor(e,t,r){super(),this.componentFactoryResolver=new HM(this),this.instance=null;const i=new Xr([...e,{provide:Uf,useValue:this},{provide:Ri,useValue:this.componentFactoryResolver}],t||Dn(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function DT(n,e,t=null){return new U5(n,e,t).injector}let G5=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const r=An(0,t.type),i=r.length>0?DT([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,i)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=nn({token:n,providedIn:"environment",factory:()=>new n(St(Sn))}),n})();function nh(n){n.getStandaloneInjector=e=>e.get(G5).getOrCreateStandaloneInjector(n)}function IT(n,e,t,r){return function OT(n,e,t,r,i,o){const a=e+t;return Vo(n,a,i)?function Nl(n,e,t){return n[e]=t}(n,a+1,o?r.call(o,i):r(i)):function Kg(n,e){const t=n[e];return t===On?void 0:t}(n,a+1)}(At(),function ui(){const n=yn.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}(),n,e,t,r)}function rE(n){return e=>{setTimeout(n,void 0,e)}}const Pr=class m3 extends Ie{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,o=t||(()=>null),a=r;if(e&&"object"==typeof e){const h=e;i=h.next?.bind(h),o=h.error?.bind(h),a=h.complete?.bind(h)}this.__isAsync&&(o=rE(o),i&&(i=rE(i)),a&&(a=rE(a)));const u=super.subscribe({next:i,error:o,complete:a});return e instanceof P&&e.add(u),u}};function v3(){return this._results[Kd()]()}class iE{get changes(){return this._changes||(this._changes=new Pr)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Kd(),r=iE.prototype;r[t]||(r[t]=v3)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const i=function Ii(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function B_(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Ac=(()=>{class n{}return n.__NG_ELEMENT_ID__=w3,n})();const y3=Ac,b3=class extends y3{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(e,t){const r=this._declarationTContainer.tViews,i=Jy(this._declarationLView,r,e,16,null,r.declTNode,null,null,null,null,t||null);i[17]=this._declarationLView[this._declarationTContainer.index];const a=this._declarationLView[19];return null!==a&&(i[19]=a.createEmbeddedView(r)),Cx(r,i,e),new Vg(i)}};function w3(){return m0(Tr(),At())}function m0(n,e){return 4&n.type?new b3(e,n,vo(n,e)):null}let Za=(()=>{class n{}return n.__NG_ELEMENT_ID__=_3,n})();function _3(){return VT(Tr(),At())}const x3=Za,FT=class extends x3{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return vo(this._hostTNode,this._hostLView)}get injector(){return new dc(this._hostTNode,this._hostLView)}get parentInjector(){const e=Qh(this._hostTNode,this._hostLView);if(kd(e)){const t=au(e,this._hostLView),r=cc(e);return new dc(t[1].data[r+8],t)}return new dc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=BT(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const a=e.createEmbeddedView(t||{},o);return this.insert(a,i),a}createComponent(e,t,r,i,o){const a=e&&!function Pd(n){return"function"==typeof n}(e);let u;if(a)u=t;else{const x=t||{};u=x.index,r=x.injector,i=x.projectableNodes,o=x.environmentInjector||x.ngModuleRef}const h=a?e:new Hg(nr(e)),m=r||this.parentInjector;if(!o&&null==h.ngModule){const k=(a?m:this.parentInjector).get(Sn,null);k&&(o=k)}const v=h.create(m,i,void 0,o);return this.insert(v.hostView,u),v}insert(e,t){const r=e._lView,i=r[1];if(function A_(n){return Es(n[3])}(r)){const v=this.indexOf(e);if(-1!==v)this.detach(v);else{const x=r[3],k=new FT(x,x[6],x[3]);k.detach(k.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;!function $i(n,e,t,r){const i=10+r,o=t.length;r>0&&(t[i-1][4]=e),r<o-10?(e[4]=t[i],hu(t,10+r,e)):(t.push(e),e[4]=null),e[3]=t;const a=e[17];null!==a&&t!==a&&function Ly(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(a,e);const u=e[19];null!==u&&u.insertView(n),e[2]|=64}(i,r,a,o);const u=Og(o,a),h=r[11],m=mf(h,a[7]);return null!==m&&function lx(n,e,t,r,i,o){r[0]=i,r[6]=e,bu(n,r,t,1,i,o)}(i,a[6],h,r,m,u),e.attachToViewContainerRef(),hu(oE(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=BT(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=gf(this._lContainer,t);r&&(gc(oE(this._lContainer),t),Ag(r[1],r))}detach(e){const t=this._adjustIndex(e,-1),r=gf(this._lContainer,t);return r&&null!=gc(oE(this._lContainer),t)?new Vg(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function BT(n){return n[8]}function oE(n){return n[8]||(n[8]=[])}function VT(n,e){let t;const r=e[n.index];if(Es(r))t=r;else{let i;if(8&n.type)i=zi(r);else{const o=e[11];i=o.createComment("");const a=Jo(n,e);io(o,mf(o,a),i,function kg(n,e){return n.nextSibling(e)}(o,a),!1)}e[n.index]=t=NM(r,e,i,n),t0(e,t)}return new FT(t,n,e)}class sE{constructor(e){this.queryList=e,this.matches=null}clone(){return new sE(this.queryList)}setDirty(){this.queryList.setDirty()}}class aE{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){const a=t.getByIndex(o);i.push(this.queries[a.indexInDeclarationView].clone())}return new aE(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==$T(e,t).matches&&this.queries[t].setDirty()}}class HT{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class lE{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,null!==t?t.push(o):t=[o])}return null!==t?new lE(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class cE{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new cE(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];this.matchTNodeWithReadOption(e,t,E3(t,o)),this.matchTNodeWithReadOption(e,t,ef(t,e,o,!1,!1))}else r===Ac?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,ef(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===br||i===Za||i===Ac&&4&t.type)this.addMatch(t.index,-2);else{const o=ef(t,e,i,!1,!1);null!==o&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function E3(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function C3(n,e,t,r){return-1===t?function D3(n,e){return 11&n.type?vo(n,e):4&n.type?m0(n,e):null}(e,n):-2===t?function S3(n,e,t){return t===br?vo(e,n):t===Ac?m0(e,n):t===Za?VT(e,n):void 0}(n,e,r):uc(n,n[1],t,e)}function zT(n,e,t,r){const i=e[19].queries[r];if(null===i.matches){const o=n.data,a=t.matches,u=[];for(let h=0;h<a.length;h+=2){const m=a[h];u.push(m<0?null:C3(e,o[m],a[h+1],t.metadata.read))}i.matches=u}return i.matches}function uE(n,e,t,r){const i=n.queries.getByIndex(t),o=i.matches;if(null!==o){const a=zT(n,e,i,t);for(let u=0;u<o.length;u+=2){const h=o[u];if(h>0)r.push(a[u/2]);else{const m=o[u+1],v=e[-h];for(let x=10;x<v.length;x++){const k=v[x];k[17]===k[3]&&uE(k[1],k,m,r)}if(null!==v[9]){const x=v[9];for(let k=0;k<x.length;k++){const F=x[k];uE(F[1],F,m,r)}}}}}return r}function Tc(n){const e=At(),t=Un(),r=Zv();ac(r+1);const i=$T(t,r);if(n.dirty&&function Br(n){return 4==(4&n[2])}(e)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const o=i.crossesNgTemplate?uE(t,e,r,[]):zT(t,e,i,r);n.reset(o,px),n.notifyOnChanges()}return!0}return!1}function Cu(n,e,t){const r=Un();r.firstCreatePass&&(GT(r,new HT(n,e,t),-1),2==(2&e)&&(r.staticViewQueries=!0)),UT(r,At(),e)}function kc(){return function M3(n,e){return n[19].queries[e].queryList}(At(),Zv())}function UT(n,e,t){const r=new iE(4==(4&t));TM(n,e,r,r.destroy),null===e[19]&&(e[19]=new aE),e[19].queries.push(new sE(r))}function GT(n,e,t){null===n.queries&&(n.queries=new lE),n.queries.track(new cE(e,t))}function $T(n,e){return n.queries.getByIndex(e)}function y0(...n){}const uk=new Gt("Application Initializer");let b0=(()=>{class n{constructor(t){this.appInits=t,this.resolve=y0,this.reject=y0,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const o=this.appInits[i]();if(c0(o))t.push(o);else if(iA(o)){const a=new Promise((u,h)=>{o.subscribe({complete:u,error:h})});t.push(a)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(St(uk,8))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const w0=new Gt("AppId",{providedIn:"root",factory:function dk(){return`${gE()}${gE()}${gE()}`}});function gE(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const hk=new Gt("Platform Initializer"),mE=new Gt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),X3=new Gt("appBootstrapListener"),Ic=new Gt("AnimationModuleType"),Bl=new Gt("LocaleId",{providedIn:"root",factory:()=>Rs(Bl,bn.Optional|bn.SkipSelf)||function K3(){return typeof $localize<"u"&&$localize.locale||jf}()}),tj=(()=>Promise.resolve(0))();class Kn{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Pr(!1),this.onMicrotaskEmpty=new Pr(!1),this.onStable=new Pr(!1),this.onError=new Pr(!1),typeof Zone>"u")throw new Ye(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function nj(){let n=Er.requestAnimationFrame,e=Er.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function oj(n){const e=()=>{!function ij(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Er,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,bE(n),n.isCheckStableRunning=!0,yE(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),bE(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,o,a,u)=>{try{return gk(n),t.invokeTask(i,o,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),mk(n)}},onInvoke:(t,r,i,o,a,u,h)=>{try{return gk(n),t.invoke(i,o,a,u,h)}finally{n.shouldCoalesceRunChangeDetection&&e(),mk(n)}},onHasTask:(t,r,i,o)=>{t.hasTask(i,o),r===i&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,bE(n),yE(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,i,o)=>(t.handleError(i,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Kn.isInAngularZone())throw new Ye(909,!1)}static assertNotInAngularZone(){if(Kn.isInAngularZone())throw new Ye(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+i,e,rj,y0,y0);try{return o.runTask(a,t,r)}finally{o.cancelTask(a)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const rj={};function yE(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function bE(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function gk(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function mk(n){n._nesting--,yE(n)}class sj{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Pr,this.onMicrotaskEmpty=new Pr,this.onStable=new Pr,this.onError=new Pr}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const vk=new Gt("");let Su=null;const EE=new Gt("PlatformDestroyListeners");function hj(n){const{rootComponent:e,appProviders:t,platformProviders:r}=n,i=function dj(n=[]){if(Su)return Su;const e=function wk(n=[],e){return Ya.create({name:e,providers:[{provide:Gn,useValue:"platform"},{provide:EE,useValue:new Set([()=>Su=null])},...n]})}(n);return Su=e,function bk(n){const e=n.get(hk,null);e&&e.forEach(t=>t())}(e),e}(r),o=function Ek(n,e){let t;return t="noop"===n?new sj:("zone.js"===n?void 0:n)||new Kn(e),t}("zone.js",function xk(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}());return o.run(()=>{const u=DT([{provide:Kn,useValue:o},...t||[]],i,"Environment Injector"),h=u.get(ua,null);let m;o.runOutsideAngular(()=>{m=o.onError.subscribe({next:k=>{h.handleError(k)}})});const v=()=>u.destroy(),x=i.get(EE);return x.add(v),u.onDestroy(()=>{m.unsubscribe(),x.delete(v)}),function Dk(n,e,t){try{const r=t();return c0(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(h,o,()=>{const k=u.get(b0);return k.runInitializers(),k.donePromise.then(()=>{!function QA(n){bi(n,"Expected localeId to be defined"),"string"==typeof n&&(ZA=n.toLowerCase().replace(/_/g,"-"))}(u.get(Bl,jf)||jf);const Y=u.get(Jg);return void 0!==e&&Y.bootstrap(e),Y})})})}let Jg=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(t,r,i){this._zone=t,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new ke(u=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{u.next(this._stable),u.complete()})}),a=new ke(u=>{let h;this._zone.runOutsideAngular(()=>{h=this._zone.onStable.subscribe(()=>{Kn.assertNotInAngularZone(),function vE(n){typeof Zone>"u"?tj.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,u.next(!0))})})});const m=this._zone.onUnstable.subscribe(()=>{Kn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{u.next(!1)}))});return()=>{h.unsubscribe(),m.unsubscribe()}});this.isStable=Bh(o,a.pipe(ka()))}bootstrap(t,r){const i=t instanceof Dc;if(!this._injector.get(b0).done)throw!i&&function gd(n){const e=nr(n)||ci(n)||Mi(n);return null!==e&&e.standalone}(t),new Ye(405,false);let a;a=i?t:this._injector.get(Ri).resolveComponentFactory(t),this.componentTypes.push(a.componentType);const u=function cj(n){return n.isBoundToModule}(a)?void 0:this._injector.get(Uf),m=a.create(Ya.NULL,[],r||a.selector,u),v=m.location.nativeElement,x=m.injector.get(vk,null);return x?.registerApplication(v),m.onDestroy(()=>{this.detachView(m.hostView),x0(this.components,m),x?.unregisterApplication(v)}),this._loadComponent(m),m}tick(){if(this._runningTick)throw new Ye(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;x0(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(X3,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>x0(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Ye(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(St(Kn),St(Sn),St(ua))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function x0(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let rh=(()=>{class n{}return n.__NG_ELEMENT_ID__=gj,n})();function gj(n){return function mj(n,e,t){if(yd(n)&&!t){const r=rr(n.index,e);return new Vg(r,r)}return 47&n.type?new Vg(e[16],e):null}(Tr(),At(),16==(16&n))}class kk{constructor(){}supports(e){return a0(e)}create(e){return new xj(e)}}const _j=(n,e)=>e;class xj{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||_j}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){const a=!r||t&&t.currentIndex<Ok(r,i,o)?t:r,u=Ok(a,i,o),h=a.currentIndex;if(a===r)i--,r=r._nextRemoved;else if(t=t._next,null==a.previousIndex)i++;else{o||(o=[]);const m=u-i,v=h-i;if(m!=v){for(let k=0;k<m;k++){const F=k<o.length?o[k]:o[k]=0,Y=F+k;v<=Y&&Y<m&&(o[k]=F+1)}o[a.previousIndex]=v-m}}u!==h&&e(a,u,h)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!a0(e))throw new Ye(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,o,a,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let u=0;u<this.length;u++)o=e[u],a=this._trackByFn(u,o),null!==t&&Object.is(t.trackById,a)?(r&&(t=this._verifyReinsertion(t,o,a,u)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,a,u),r=!0),t=t._next}else i=0,function WH(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Kd()]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,u=>{a=this._trackByFn(i,u),null!==t&&Object.is(t.trackById,a)?(r&&(t=this._verifyReinsertion(t,u,a,i)),Object.is(t.item,u)||this._addIdentityChange(t,u)):(t=this._mismatch(t,u,a,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Ej(t,r),o,i),e}_verifyReinsertion(e,t,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,o=e._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Ik),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ik),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Ej{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Dj{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class Ik{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new Dj,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ok(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class Rk{constructor(){}supports(e){return e instanceof Map||Bx(e)}create(){return new Cj}}class Cj{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Bx(e)))throw new Ye(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const o=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const o=i._prev,a=i._next;return o&&(o._next=a),a&&(a._prev=o),i._next=null,i._prev=null,i}const r=new Sj(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class Sj{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Pk(){return new C0([new kk])}let C0=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||Pk()),deps:[[n,new Ld,new Ml]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new Ye(901,!1)}}return n.\u0275prov=nn({token:n,providedIn:"root",factory:Pk}),n})();function Nk(){return new em([new Rk])}let em=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||Nk()),deps:[[n,new Ld,new Ml]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new Ye(901,!1)}}return n.\u0275prov=nn({token:n,providedIn:"root",factory:Nk}),n})(),kE=null;function Vl(){return kE}class Ij{}const or=new Gt("DocumentToken");let Lk=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=nn({token:n,factory:function(){return function Oj(){return St(Fk)}()},providedIn:"platform"}),n})(),Fk=(()=>{class n extends Lk{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Vl().getBaseHref(this._doc)}onPopState(t){const r=Vl().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Vl().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){Bk()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){Bk()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(St(or))},n.\u0275prov=nn({token:n,factory:function(){return function Rj(){return new Fk(St(or))}()},providedIn:"platform"}),n})();function Bk(){return!!window.history.pushState}function Vk(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Hk(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function oh(n){return n&&"?"!==n[0]?"?"+n:n}let IE=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=nn({token:n,factory:function(){return Rs(Nj)},providedIn:"root"}),n})();const Pj=new Gt("appBaseHref");let Nj=(()=>{class n extends IE{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Rs(or).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Vk(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+oh(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const a=this.prepareExternalUrl(i+oh(o));this._platformLocation.pushState(t,r,a)}replaceState(t,r,i,o){const a=this.prepareExternalUrl(i+oh(o));this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(St(Lk),St(Pj,8))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),zk=(()=>{class n{constructor(t){this._subject=new Pr,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Bj(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Hk(jk(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+oh(r))}normalize(t){return n.stripTrailingSlash(function Fj(n,e){return n&&new RegExp(`^${n}([/;?#]|$)`).test(e)?e.substring(n.length):e}(this._basePath,jk(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+oh(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+oh(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=oh,n.joinWithSlash=Vk,n.stripTrailingSlash=Hk,n.\u0275fac=function(t){return new(t||n)(St(IE))},n.\u0275prov=nn({token:n,factory:function(){return function Lj(){return new zk(St(IE))}()},providedIn:"root"}),n})();function jk(n){return n.replace(/\/index.html$/,"")}const zE=/\s+/,Zk=[];let Qk=(()=>{class n{constructor(t,r,i,o){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=o,this.initialClasses=Zk,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(zE):Zk}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(zE):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,Boolean(t[r]));this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(zE).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(et(C0),et(em),et(br),et(Wa))},n.\u0275dir=fn({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class E4{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let jE=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,a)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new E4(i.item,this._ngForOf,-1,-1),null===a?void 0:a);else if(null==a)r.remove(null===o?void 0:o);else if(null!==o){const u=r.get(o);r.move(u,a),tI(u,i)}});for(let i=0,o=r.length;i<o;i++){const u=r.get(i).context;u.index=i,u.count=o,u.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{tI(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(et(Za),et(Ac),et(C0))},n.\u0275dir=fn({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function tI(n,e){n.context.$implicit=e.item}let UE=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new C4,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){nI("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){nI("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(et(Za),et(Ac))},n.\u0275dir=fn({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class C4{constructor(){this.$implicit=null,this.ngIf=null}}function nI(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${we(e)}'.`)}let Mu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=gr({}),n})();const oI="browser";class AU extends Ij{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ZE extends AU{static makeCurrent(){!function kj(n){kE||(kE=n)}(new ZE)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function TU(){return im=im||document.querySelector("base"),im?im.getAttribute("href"):null}();return null==t?null:function kU(n){L0=L0||document.createElement("a"),L0.setAttribute("href",n);const e=L0.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){im=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function _4(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let L0,im=null,PU=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})();const F0=new Gt("EventManagerPlugins");let B0=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const a=i[o];if(a.supports(t))return this._eventNameToPlugin.set(t,a),a}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(St(F0),St(Kn))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})();class dI{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=Vl().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let hI=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})(),om=(()=>{class n extends hI{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(o=>{const a=this._doc.createElement("style");a.textContent=o,i.push(r.appendChild(a))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(fI),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(fI))}}return n.\u0275fac=function(t){return new(t||n)(St(or))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})();function fI(n){Vl().remove(n)}const QE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},JE=/%COMP%/g;function eD(n,e){return e.flat(100).map(t=>t.replace(JE,n))}function mI(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let V0=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new tD(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case Ns.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new HU(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case Ns.ShadowDom:return new zU(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=eD(r.id,r.styles);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(St(B0),St(om),St(w0))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})();class tD{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(QE[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(yI(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(yI(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=QE[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=QE[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ni.DashCase|ni.Important)?e.style.setProperty(t,r,i&ni.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ni.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,mI(r)):this.eventManager.addEventListener(e,t,mI(r))}}function yI(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class HU extends tD{constructor(e,t,r,i){super(e),this.component=r;const o=eD(i+"-"+r.id,r.styles);t.addStyles(o),this.contentAttr=function FU(n){return"_ngcontent-%COMP%".replace(JE,n)}(i+"-"+r.id),this.hostAttr=function BU(n){return"_nghost-%COMP%".replace(JE,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class zU extends tD{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=eD(i.id,i.styles);for(let a=0;a<o.length;a++){const u=document.createElement("style");u.textContent=o[a],this.shadowRoot.appendChild(u)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}const bI=["alt","control","meta","shift"],UU={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},GU={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};function _I(n){return{appProviders:[...JU,...n?.providers??[]],platformProviders:KU}}const KU=[{provide:mE,useValue:oI},{provide:hk,useValue:function qU(){ZE.makeCurrent()},multi:!0},{provide:or,useFactory:function XU(){return function qy(n){Ng=n}(document),document},deps:[]}],JU=[{provide:Gn,useValue:"root"},{provide:ua,useFactory:function YU(){return new ua},deps:[]},{provide:F0,useClass:(()=>{class n extends dI{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(St(or))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})(),multi:!0,deps:[or,Kn,mE]},{provide:F0,useClass:(()=>{class n extends dI{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const o=n.parseEventName(r),a=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Vl().onAndCancel(t,o.domEventName,a))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let a="",u=r.indexOf("code");if(u>-1&&(r.splice(u,1),a="code."),bI.forEach(m=>{const v=r.indexOf(m);v>-1&&(r.splice(v,1),a+=m+".")}),a+=o,0!=r.length||0===o.length)return null;const h={};return h.domEventName=i,h.fullKey=a,h}static matchEventFullKeyCode(t,r){let i=UU[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),bI.forEach(a=>{a!==i&&(0,GU[a])(t)&&(o+=a+".")}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(St(or))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})(),multi:!0,deps:[or]},{provide:V0,useClass:V0,deps:[B0,om,w0]},{provide:Yd,useExisting:V0},{provide:hI,useExisting:om},{provide:om,useClass:om,deps:[or]},{provide:B0,useClass:B0,deps:[F0,Kn]},{provide:class tU{},useClass:PU,deps:[]},[]];typeof window<"u"&&window;let rD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=nn({token:n,factory:function(t){let r=null;return r=t?new(t||n):St(DI),r},providedIn:"root"}),n})(),DI=(()=>{class n extends rD{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case tt.NONE:return r;case tt.HTML:return d(r,"HTML")?l(r):it(this._doc,String(r)).toString();case tt.STYLE:return d(r,"Style")?l(r):r;case tt.SCRIPT:if(d(r,"Script"))return l(r);throw new Error("unsafe value used in a script context");case tt.URL:return d(r,"URL")?l(r):H(String(r));case tt.RESOURCE_URL:if(d(r,"ResourceURL"))return l(r);throw new Error(`unsafe value used in a resource URL context (see ${gn})`);default:throw new Error(`Unexpected SecurityContext ${t} (see ${gn})`)}}bypassSecurityTrustHtml(t){return function p(n){return new _c(n)}(t)}bypassSecurityTrustStyle(t){return function g(n){return new fx(n)}(t)}bypassSecurityTrustScript(t){return function y(n){return new xc(n)}(t)}bypassSecurityTrustUrl(t){return function w(n){return new c(n)}(t)}bypassSecurityTrustResourceUrl(t){return function b(n){return new s(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(St(or))},n.\u0275prov=nn({token:n,factory:function(t){let r=null;return r=t?new t:function lG(n){return new DI(n.get(or))}(St(Ya)),r},providedIn:"root"}),n})();function CI(n,e,t,r,i,o,a){try{var u=n[o](a),h=u.value}catch(m){return void t(m)}u.done?e(h):Promise.resolve(h).then(r,i)}function sh(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var o=n.apply(e,t);function a(h){CI(o,r,i,a,u,"next",h)}function u(h){CI(o,r,i,a,u,"throw",h)}a(void 0)})}}class cG extends P{constructor(e,t){super()}schedule(e,t=0){return this}}const H0={setInterval(n,e,...t){const{delegate:r}=H0;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=H0;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class iD extends cG{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return H0.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&H0.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,C(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const SI={now:()=>(SI.delegate||Date).now(),delegate:void 0};class sm{constructor(e,t=sm.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}sm.now=SI.now;class oD extends sm{constructor(e,t=sm.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const sD=new oD(iD),uG=sD;function aD(n,e=sD){return pt((t,r)=>{let i=null,o=null,a=null;const u=()=>{if(i){i.unsubscribe(),i=null;const m=o;o=null,r.next(m)}};function h(){const m=a+n,v=e.now();if(v<m)return i=this.schedule(void 0,m-v),void r.add(i);u()}t.subscribe(at(r,m=>{o=m,a=e.now(),i||(i=e.schedule(h,n),r.add(i))},()=>{u(),r.complete()},void 0,()=>{o=i=null}))})}const dG=["gutterEls"];function hG(n,e){if(1&n){const t=jg();wr(0,"div",2,3),jr("keydown",function(i){Bs(t);const o=yo().index;return Lo(yo().startKeyboardDrag(i,2*o+1,o+1))})("mousedown",function(i){Bs(t);const o=yo().index;return Lo(yo().startMouseDrag(i,2*o+1,o+1))})("touchstart",function(i){Bs(t);const o=yo().index;return Lo(yo().startMouseDrag(i,2*o+1,o+1))})("mouseup",function(i){Bs(t);const o=yo().index;return Lo(yo().clickGutter(i,o+1))})("touchend",function(i){Bs(t);const o=yo().index;return Lo(yo().clickGutter(i,o+1))}),zo(2,"div",4),Vr()}if(2&n){const t=yo(),r=t.index,i=t.$implicit,o=yo();Jd("flex-basis",o.gutterSize,"px")("order",2*r+1),Ho("aria-label",o.gutterAriaLabel)("aria-orientation",o.direction)("aria-valuemin",i.minSize)("aria-valuemax",i.maxSize)("aria-valuenow",i.size)("aria-valuetext",o.getAriaAreaSizeText(i.size))}}function fG(n,e){1&n&&Vf(0,hG,3,10,"div",1),2&n&&ri("ngIf",!1===e.last)}const pG=["*"];function am(n){if(void 0!==n.changedTouches&&n.changedTouches.length>0)return{x:n.changedTouches[0].clientX,y:n.changedTouches[0].clientY};if(void 0!==n.clientX&&void 0!==n.clientY)return{x:n.clientX,y:n.clientY};if(void 0!==n.currentTarget){const e=n.currentTarget;return{x:e.offsetLeft,y:e.offsetTop}}return null}function MI(n,e,t){return Math.abs(n.x-e.x)<=t&&Math.abs(n.y-e.y)<=t}function AI(n,e){const t=n.nativeElement.getBoundingClientRect();return"horizontal"===e?t.width:t.height}function lm(n){return"boolean"==typeof n?n:"false"!==n}function Tu(n,e){return null==n?e:(n=Number(n),!isNaN(n)&&n>=0?n:e)}function TI(n,e){if("percent"===n){const t=e.reduce((r,i)=>null!==i?r+i:r,0);return e.every(r=>null!==r)&&t>99.9&&t<100.1}if("pixel"===n)return 1===e.filter(t=>null===t).length}function z0(n){return null===n.size?null:!0===n.component.lockSize?n.size:null===n.component.minSize?null:n.component.minSize>n.size?n.size:n.component.minSize}function j0(n){return null===n.size?null:!0===n.component.lockSize?n.size:null===n.component.maxSize?null:n.component.maxSize<n.size?n.size:n.component.maxSize}function Wf(n,e,t,r){return e.reduce((i,o)=>{const a=function mG(n,e,t,r){return 0===t?{areaSnapshot:e,pixelAbsorb:0,percentAfterAbsorption:e.sizePercentAtStart,pixelRemain:0}:0===e.sizePixelAtStart&&t<0?{areaSnapshot:e,pixelAbsorb:0,percentAfterAbsorption:0,pixelRemain:t}:"percent"===n?function vG(n,e,t){const i=(n.sizePixelAtStart+e)/t*100;if(e>0){if(null!==n.area.maxSize&&i>n.area.maxSize){const o=n.area.maxSize/100*t;return{areaSnapshot:n,pixelAbsorb:o,percentAfterAbsorption:n.area.maxSize,pixelRemain:n.sizePixelAtStart+e-o}}return{areaSnapshot:n,pixelAbsorb:e,percentAfterAbsorption:i>100?100:i,pixelRemain:0}}if(e<0){if(null!==n.area.minSize&&i<n.area.minSize){const o=n.area.minSize/100*t;return{areaSnapshot:n,pixelAbsorb:o,percentAfterAbsorption:n.area.minSize,pixelRemain:n.sizePixelAtStart+e-o}}return i<0?{areaSnapshot:n,pixelAbsorb:-n.sizePixelAtStart,percentAfterAbsorption:0,pixelRemain:e+n.sizePixelAtStart}:{areaSnapshot:n,pixelAbsorb:e,percentAfterAbsorption:i,pixelRemain:0}}}(e,t,r):"pixel"===n?function yG(n,e,t){const r=n.sizePixelAtStart+e;return e>0?null!==n.area.maxSize&&r>n.area.maxSize?{areaSnapshot:n,pixelAbsorb:n.area.maxSize-n.sizePixelAtStart,percentAfterAbsorption:-1,pixelRemain:r-n.area.maxSize}:{areaSnapshot:n,pixelAbsorb:e,percentAfterAbsorption:-1,pixelRemain:0}:e<0?null!==n.area.minSize&&r<n.area.minSize?{areaSnapshot:n,pixelAbsorb:n.area.minSize+e-r,percentAfterAbsorption:-1,pixelRemain:r-n.area.minSize}:r<0?{areaSnapshot:n,pixelAbsorb:-n.sizePixelAtStart,percentAfterAbsorption:-1,pixelRemain:e+n.sizePixelAtStart}:{areaSnapshot:n,pixelAbsorb:e,percentAfterAbsorption:-1,pixelRemain:0}:void 0}(e,t):void 0}(n,o,i.remain,r);return i.list.push(a),i.remain=a.pixelRemain,i},{remain:t,list:[]})}function kI(n,e){"percent"===n?e.areaSnapshot.area.size=e.percentAfterAbsorption:"pixel"===n&&null!==e.areaSnapshot.area.size&&(e.areaSnapshot.area.size=e.areaSnapshot.sizePixelAtStart+e.pixelAbsorb)}const bG=new Gt("angular-split-global-config");let lD,II=(()=>{class n{set direction(t){this._direction="vertical"===t?"vertical":"horizontal",this.renderer.addClass(this.elRef.nativeElement,`as-${this._direction}`),this.renderer.removeClass(this.elRef.nativeElement,"as-"+("vertical"===this._direction?"horizontal":"vertical")),this.build(!1,!1)}get direction(){return this._direction}set unit(t){this._unit="pixel"===t?"pixel":"percent",this.renderer.addClass(this.elRef.nativeElement,`as-${this._unit}`),this.renderer.removeClass(this.elRef.nativeElement,"as-"+("pixel"===this._unit?"percent":"pixel")),this.build(!1,!0)}get unit(){return this._unit}set gutterSize(t){this._gutterSize=Tu(t,11),this.build(!1,!1)}get gutterSize(){return this._gutterSize}set gutterStep(t){this._gutterStep=Tu(t,1)}get gutterStep(){return this._gutterStep}set restrictMove(t){this._restrictMove=lm(t)}get restrictMove(){return this._restrictMove}set useTransition(t){this._useTransition=lm(t),this._useTransition?this.renderer.addClass(this.elRef.nativeElement,"as-transition"):this.renderer.removeClass(this.elRef.nativeElement,"as-transition")}get useTransition(){return this._useTransition}set disabled(t){this._disabled=lm(t),this._disabled?this.renderer.addClass(this.elRef.nativeElement,"as-disabled"):this.renderer.removeClass(this.elRef.nativeElement,"as-disabled")}get disabled(){return this._disabled}set dir(t){this._dir="rtl"===t?"rtl":"ltr",this.renderer.setAttribute(this.elRef.nativeElement,"dir",this._dir)}get dir(){return this._dir}set gutterDblClickDuration(t){this._gutterDblClickDuration=Tu(t,0)}get gutterDblClickDuration(){return this._gutterDblClickDuration}get transitionEnd(){return new ke(t=>this.transitionEndSubscriber=t).pipe(aD(20))}constructor(t,r,i,o,a){this.ngZone=t,this.elRef=r,this.cdRef=i,this.renderer=o,this.gutterClickDeltaPx=2,this._config={direction:"horizontal",unit:"percent",gutterSize:11,gutterStep:1,restrictMove:!1,useTransition:!1,disabled:!1,dir:"ltr",gutterDblClickDuration:0},this.dragStart=new Pr(!1),this.dragEnd=new Pr(!1),this.gutterClick=new Pr(!1),this.gutterDblClick=new Pr(!1),this.dragProgressSubject=new Ie,this.dragProgress$=this.dragProgressSubject.asObservable(),this.isDragging=!1,this.isWaitingClear=!1,this.isWaitingInitialMove=!1,this.dragListeners=[],this.snapshot=null,this.startPoint=null,this.endPoint=null,this.displayedAreas=[],this.hiddenAreas=[],this._clickTimeout=null,this.direction=this._direction,this._config=a?Object.assign(this._config,a):this._config,Object.keys(this._config).forEach(u=>{this[u]=this._config[u]})}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>{setTimeout(()=>this.renderer.addClass(this.elRef.nativeElement,"as-init"))})}getNbGutters(){return 0===this.displayedAreas.length?0:this.displayedAreas.length-1}addArea(t){const r={component:t,order:0,size:0,minSize:null,maxSize:null,sizeBeforeCollapse:null,gutterBeforeCollapse:0};!0===t.visible?(this.displayedAreas.push(r),this.build(!0,!0)):this.hiddenAreas.push(r)}removeArea(t){if(this.displayedAreas.some(r=>r.component===t)){const r=this.displayedAreas.find(i=>i.component===t);this.displayedAreas.splice(this.displayedAreas.indexOf(r),1),this.build(!0,!0)}else if(this.hiddenAreas.some(r=>r.component===t)){const r=this.hiddenAreas.find(i=>i.component===t);this.hiddenAreas.splice(this.hiddenAreas.indexOf(r),1)}}updateArea(t,r,i){!0===t.visible&&this.build(r,i)}showArea(t){const r=this.hiddenAreas.find(o=>o.component===t);if(void 0===r)return;const i=this.hiddenAreas.splice(this.hiddenAreas.indexOf(r),1);this.displayedAreas.push(...i),this.build(!0,!0)}hideArea(t){const r=this.displayedAreas.find(o=>o.component===t);if(void 0===r)return;const i=this.displayedAreas.splice(this.displayedAreas.indexOf(r),1);i.forEach(o=>{o.order=0,o.size=0}),this.hiddenAreas.push(...i),this.build(!0,!0)}getVisibleAreaSizes(){return this.displayedAreas.map(t=>null===t.size?"*":t.size)}setVisibleAreaSizes(t){if(t.length!==this.displayedAreas.length)return!1;const r=t.map(o=>Tu(o,null));return!1!==TI(this.unit,r)&&(this.displayedAreas.forEach((o,a)=>o.component._size=r[a]),this.build(!1,!0),!0)}build(t,r){if(this.stopDragging(),!0===t&&(this.displayedAreas.every(i=>null!==i.component.order)&&this.displayedAreas.sort((i,o)=>i.component.order-o.component.order),this.displayedAreas.forEach((i,o)=>{i.order=2*o,i.component.setStyleOrder(i.order)})),!0===r){const i=TI(this.unit,this.displayedAreas.map(o=>o.component.size));switch(this.unit){case"percent":{const o=100/this.displayedAreas.length;this.displayedAreas.forEach(a=>{a.size=i?a.component.size:o,a.minSize=z0(a),a.maxSize=j0(a)});break}case"pixel":if(i)this.displayedAreas.forEach(o=>{o.size=o.component.size,o.minSize=z0(o),o.maxSize=j0(o)});else{const o=this.displayedAreas.filter(a=>null===a.component.size);if(0===o.length&&this.displayedAreas.length>0)this.displayedAreas.forEach((a,u)=>{a.size=0===u?null:a.component.size,a.minSize=0===u?null:z0(a),a.maxSize=0===u?null:j0(a)});else if(o.length>1){let a=!1;this.displayedAreas.forEach(u=>{null===u.component.size?!1===a?(u.size=null,u.minSize=null,u.maxSize=null,a=!0):(u.size=100,u.minSize=null,u.maxSize=null):(u.size=u.component.size,u.minSize=z0(u),u.maxSize=j0(u))})}}}}this.refreshStyleSizes(),this.cdRef.markForCheck()}refreshStyleSizes(){if("percent"===this.unit)if(1===this.displayedAreas.length)this.displayedAreas[0].component.setStyleFlex(0,0,"100%",!1,!1);else{const t=this.getNbGutters()*this.gutterSize;this.displayedAreas.forEach(r=>{r.component.setStyleFlex(0,0,`calc( ${r.size}% - ${r.size/100*t}px )`,null!==r.minSize&&r.minSize===r.size,null!==r.maxSize&&r.maxSize===r.size)})}else"pixel"===this.unit&&this.displayedAreas.forEach(t=>{null===t.size?t.component.setStyleFlex(1,1,1===this.displayedAreas.length?"100%":"auto",!1,!1):1===this.displayedAreas.length?t.component.setStyleFlex(0,0,"100%",!1,!1):t.component.setStyleFlex(0,0,`${t.size}px`,null!==t.minSize&&t.minSize===t.size,null!==t.maxSize&&t.maxSize===t.size)})}clickGutter(t,r){const i=am(t);this.startPoint&&MI(this.startPoint,i,this.gutterClickDeltaPx)&&(!this.isDragging||this.isWaitingInitialMove)&&(null!==this._clickTimeout?(window.clearTimeout(this._clickTimeout),this._clickTimeout=null,this.notify("dblclick",r),this.stopDragging()):this._clickTimeout=window.setTimeout(()=>{this._clickTimeout=null,this.notify("click",r),this.stopDragging()},this.gutterDblClickDuration))}startKeyboardDrag(t,r,i){if(!0===this.disabled||!0===this.isWaitingClear)return;const o=function gG(n,e){if("horizontal"===e)switch(n.key){case"ArrowLeft":case"ArrowRight":case"PageUp":case"PageDown":break;default:return null}if("vertical"===e)switch(n.key){case"ArrowUp":case"ArrowDown":case"PageUp":case"PageDown":break;default:return null}const t=n.currentTarget,r="PageUp"===n.key||"PageDown"===n.key?500:50;let i=t.offsetLeft,o=t.offsetTop;switch(n.key){case"ArrowLeft":i-=r;break;case"ArrowRight":i+=r;break;case"ArrowUp":o-=r;break;case"ArrowDown":o+=r;break;case"PageUp":"vertical"===e?o-=r:i+=r;break;case"PageDown":"vertical"===e?o+=r:i-=r;break;default:return null}return{x:i,y:o}}(t,this.direction);null!==o&&(this.endPoint=o,this.startPoint=am(t),t.preventDefault(),t.stopPropagation(),this.setupForDragEvent(r,i),this.startDragging(),this.drag(),this.stopDragging())}startMouseDrag(t,r,i){t.preventDefault(),t.stopPropagation(),this.startPoint=am(t),null!==this.startPoint&&!0!==this.disabled&&!0!==this.isWaitingClear&&(this.setupForDragEvent(r,i),this.dragListeners.push(this.renderer.listen("document","mouseup",this.stopDragging.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchend",this.stopDragging.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchcancel",this.stopDragging.bind(this))),this.ngZone.runOutsideAngular(()=>{this.dragListeners.push(this.renderer.listen("document","mousemove",this.mouseDragEvent.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchmove",this.mouseDragEvent.bind(this)))}),this.startDragging())}setupForDragEvent(t,r){this.snapshot={gutterNum:r,lastSteppedOffset:0,allAreasSizePixel:AI(this.elRef,this.direction)-this.getNbGutters()*this.gutterSize,allInvolvedAreasSizePercent:100,areasBeforeGutter:[],areasAfterGutter:[]},this.displayedAreas.forEach(i=>{const o={area:i,sizePixelAtStart:AI(i.component.elRef,this.direction),sizePercentAtStart:"percent"===this.unit?i.size:-1};i.order<t?!0===this.restrictMove?this.snapshot.areasBeforeGutter=[o]:this.snapshot.areasBeforeGutter.unshift(o):i.order>t&&(!0===this.restrictMove?0===this.snapshot.areasAfterGutter.length&&(this.snapshot.areasAfterGutter=[o]):this.snapshot.areasAfterGutter.push(o))}),this.snapshot.allInvolvedAreasSizePercent=[...this.snapshot.areasBeforeGutter,...this.snapshot.areasAfterGutter].reduce((i,o)=>i+o.sizePercentAtStart,0)}startDragging(){this.displayedAreas.forEach(t=>t.component.lockEvents()),this.isDragging=!0,this.isWaitingInitialMove=!0}mouseDragEvent(t){t.preventDefault(),t.stopPropagation();const r=am(t);null!==this._clickTimeout&&!MI(this.startPoint,r,this.gutterClickDeltaPx)&&(window.clearTimeout(this._clickTimeout),this._clickTimeout=null),!1!==this.isDragging&&(this.endPoint=am(t),null!==this.endPoint&&this.drag())}drag(){if(this.isWaitingInitialMove){if(this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y)return;this.ngZone.run(()=>{this.isWaitingInitialMove=!1,this.renderer.addClass(this.elRef.nativeElement,"as-dragging"),this.renderer.addClass(this.gutterEls.toArray()[this.snapshot.gutterNum-1].nativeElement,"as-dragged"),this.notify("start",this.snapshot.gutterNum)})}let t="horizontal"===this.direction?this.startPoint.x-this.endPoint.x:this.startPoint.y-this.endPoint.y;"rtl"===this.dir&&"horizontal"===this.direction&&(t=-t);const r=Math.round(t/this.gutterStep)*this.gutterStep;if(r===this.snapshot.lastSteppedOffset)return;this.snapshot.lastSteppedOffset=r;let i=Wf(this.unit,this.snapshot.areasBeforeGutter,-r,this.snapshot.allAreasSizePixel),o=Wf(this.unit,this.snapshot.areasAfterGutter,r,this.snapshot.allAreasSizePixel);if(0!==i.remain&&0!==o.remain?Math.abs(i.remain)===Math.abs(o.remain)||(Math.abs(i.remain)>Math.abs(o.remain)?o=Wf(this.unit,this.snapshot.areasAfterGutter,r+i.remain,this.snapshot.allAreasSizePixel):i=Wf(this.unit,this.snapshot.areasBeforeGutter,-(r-o.remain),this.snapshot.allAreasSizePixel)):0!==i.remain?o=Wf(this.unit,this.snapshot.areasAfterGutter,r+i.remain,this.snapshot.allAreasSizePixel):0!==o.remain&&(i=Wf(this.unit,this.snapshot.areasBeforeGutter,-(r-o.remain),this.snapshot.allAreasSizePixel)),"percent"===this.unit){const a=[...i.list,...o.list],u=a.find(h=>0!==h.percentAfterAbsorption&&h.percentAfterAbsorption!==h.areaSnapshot.area.minSize&&h.percentAfterAbsorption!==h.areaSnapshot.area.maxSize);u&&(u.percentAfterAbsorption=this.snapshot.allInvolvedAreasSizePercent-a.filter(h=>h!==u).reduce((h,m)=>h+m.percentAfterAbsorption,0))}i.list.forEach(a=>kI(this.unit,a)),o.list.forEach(a=>kI(this.unit,a)),this.refreshStyleSizes(),this.notify("progress",this.snapshot.gutterNum)}stopDragging(t){if(t&&(t.preventDefault(),t.stopPropagation()),!1!==this.isDragging){for(this.displayedAreas.forEach(r=>r.component.unlockEvents());this.dragListeners.length>0;){const r=this.dragListeners.pop();r&&r()}this.isDragging=!1,!1===this.isWaitingInitialMove&&this.notify("end",this.snapshot.gutterNum),this.renderer.removeClass(this.elRef.nativeElement,"as-dragging"),this.renderer.removeClass(this.gutterEls.toArray()[this.snapshot.gutterNum-1].nativeElement,"as-dragged"),this.snapshot=null,this.isWaitingClear=!0,this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.startPoint=null,this.endPoint=null,this.isWaitingClear=!1})})}}notify(t,r){const i=this.getVisibleAreaSizes();"start"===t?this.dragStart.emit({gutterNum:r,sizes:i}):"end"===t?this.dragEnd.emit({gutterNum:r,sizes:i}):"click"===t?this.gutterClick.emit({gutterNum:r,sizes:i}):"dblclick"===t?this.gutterDblClick.emit({gutterNum:r,sizes:i}):"transitionEnd"===t?this.transitionEndSubscriber&&this.ngZone.run(()=>this.transitionEndSubscriber.next(i)):"progress"===t&&this.dragProgressSubject.next({gutterNum:r,sizes:i})}ngOnDestroy(){this.stopDragging()}collapseArea(t,r,i){const o=this.displayedAreas.find(h=>h.component===t);if(void 0===o)return;const a="right"===i?1:-1;o.sizeBeforeCollapse||(o.sizeBeforeCollapse=o.size,o.gutterBeforeCollapse=a),o.size=r;const u=this.gutterEls.find(h=>h.nativeElement.style.order===`${o.order+a}`);u&&this.renderer.addClass(u.nativeElement,"as-split-gutter-collapsed"),this.updateArea(t,!1,!1)}expandArea(t){const r=this.displayedAreas.find(o=>o.component===t);if(void 0===r||!r.sizeBeforeCollapse)return;r.size=r.sizeBeforeCollapse,r.sizeBeforeCollapse=null;const i=this.gutterEls.find(o=>o.nativeElement.style.order===`${r.order+r.gutterBeforeCollapse}`);i&&this.renderer.removeClass(i.nativeElement,"as-split-gutter-collapsed"),this.updateArea(t,!1,!1)}getAriaAreaSizeText(t){return null===t?null:t.toFixed(0)+" "+this.unit}}return n.\u0275fac=function(t){return new(t||n)(et(Kn),et(br),et(rh),et(Wa),et(bG,8))},n.\u0275cmp=Qi({type:n,selectors:[["as-split"]],viewQuery:function(t,r){if(1&t&&Cu(dG,5),2&t){let i;Tc(i=kc())&&(r.gutterEls=i)}},inputs:{direction:"direction",unit:"unit",gutterSize:"gutterSize",gutterStep:"gutterStep",restrictMove:"restrictMove",useTransition:"useTransition",disabled:"disabled",dir:"dir",gutterDblClickDuration:"gutterDblClickDuration",gutterClickDeltaPx:"gutterClickDeltaPx",gutterAriaLabel:"gutterAriaLabel"},outputs:{transitionEnd:"transitionEnd",dragStart:"dragStart",dragEnd:"dragEnd",gutterClick:"gutterClick",gutterDblClick:"gutterDblClick"},exportAs:["asSplit"],ngContentSelectors:pG,decls:2,vars:1,consts:[["ngFor","",3,"ngForOf"],["role","slider","tabindex","0","class","as-split-gutter",3,"flex-basis","order","keydown","mousedown","touchstart","mouseup","touchend",4,"ngIf"],["role","slider","tabindex","0",1,"as-split-gutter",3,"keydown","mousedown","touchstart","mouseup","touchend"],["gutterEls",""],[1,"as-split-gutter-icon"]],template:function(t,r){1&t&&(Eu(),Ws(0),Vf(1,fG,1,1,"ng-template",0)),2&t&&(di(1),ri("ngForOf",r.displayedAreas))},dependencies:[jE,UE],styles:["[_nghost-%COMP%]{display:flex;flex-wrap:nowrap;justify-content:flex-start;align-items:stretch;overflow:hidden;width:100%;height:100%}[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{border:none;flex-grow:0;flex-shrink:0;background-color:#eee;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%] > .as-split-gutter.as-split-gutter-collapsed[_ngcontent-%COMP%]{flex-basis:1px!important;pointer-events:none}[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%] > .as-split-gutter-icon[_ngcontent-%COMP%]{width:100%;height:100%;background-position:center center;background-repeat:no-repeat}[_nghost-%COMP%]    >.as-split-area{flex-grow:0;flex-shrink:0;overflow-x:hidden;overflow-y:auto}[_nghost-%COMP%]    >.as-split-area.as-hidden{flex:0 1 0px!important;overflow-x:hidden;overflow-y:hidden}.as-horizontal[_nghost-%COMP%]{flex-direction:row}.as-horizontal[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{flex-direction:row;cursor:col-resize;height:100%}.as-horizontal[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%] > .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==)}.as-horizontal[_nghost-%COMP%]    >.as-split-area{height:100%}.as-vertical[_nghost-%COMP%]{flex-direction:column}.as-vertical[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{flex-direction:column;cursor:row-resize;width:100%}.as-vertical[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]   .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAFCAMAAABl/6zIAAAABlBMVEUAAADMzMzIT8AyAAAAAXRSTlMAQObYZgAAABRJREFUeAFjYGRkwIMJSeMHlBkOABP7AEGzSuPKAAAAAElFTkSuQmCC)}.as-vertical[_nghost-%COMP%]    >.as-split-area{width:100%}.as-vertical[_nghost-%COMP%]    >.as-split-area.as-hidden{max-width:0}.as-disabled[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{cursor:default}.as-disabled[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]   .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==)}.as-transition.as-init[_nghost-%COMP%]:not(.as-dragging) > .as-split-gutter[_ngcontent-%COMP%], .as-transition.as-init[_nghost-%COMP%]:not(.as-dragging)    >.as-split-area{transition:flex-basis .3s}"],changeDetection:0}),n})(),wG=(()=>{class n{set order(t){this._order=Tu(t,null),this.split.updateArea(this,!0,!1)}get order(){return this._order}set size(t){this._size=Tu(t,null),this.split.updateArea(this,!1,!0)}get size(){return this._size}set minSize(t){this._minSize=Tu(t,null),this.split.updateArea(this,!1,!0)}get minSize(){return this._minSize}set maxSize(t){this._maxSize=Tu(t,null),this.split.updateArea(this,!1,!0)}get maxSize(){return this._maxSize}set lockSize(t){this._lockSize=lm(t),this.split.updateArea(this,!1,!0)}get lockSize(){return this._lockSize}set visible(t){this._visible=lm(t),this._visible?(this.split.showArea(this),this.renderer.removeClass(this.elRef.nativeElement,"as-hidden")):(this.split.hideArea(this),this.renderer.addClass(this.elRef.nativeElement,"as-hidden"))}get visible(){return this._visible}constructor(t,r,i,o){this.ngZone=t,this.elRef=r,this.renderer=i,this.split=o,this._order=null,this._size=null,this._minSize=null,this._maxSize=null,this._lockSize=!1,this._visible=!0,this.lockListeners=[],this.renderer.addClass(this.elRef.nativeElement,"as-split-area")}ngOnInit(){this.split.addArea(this),this.ngZone.runOutsideAngular(()=>{this.transitionListener=this.renderer.listen(this.elRef.nativeElement,"transitionend",t=>{"flex-basis"===t.propertyName&&this.split.notify("transitionEnd",-1)})})}setStyleOrder(t){this.renderer.setStyle(this.elRef.nativeElement,"order",t)}setStyleFlex(t,r,i,o,a){this.renderer.setStyle(this.elRef.nativeElement,"flex-grow",t),this.renderer.setStyle(this.elRef.nativeElement,"flex-shrink",r),this.renderer.setStyle(this.elRef.nativeElement,"flex-basis",i),!0===o?this.renderer.addClass(this.elRef.nativeElement,"as-min"):this.renderer.removeClass(this.elRef.nativeElement,"as-min"),!0===a?this.renderer.addClass(this.elRef.nativeElement,"as-max"):this.renderer.removeClass(this.elRef.nativeElement,"as-max")}lockEvents(){this.ngZone.runOutsideAngular(()=>{this.lockListeners.push(this.renderer.listen(this.elRef.nativeElement,"selectstart",()=>!1)),this.lockListeners.push(this.renderer.listen(this.elRef.nativeElement,"dragstart",()=>!1))})}unlockEvents(){for(;this.lockListeners.length>0;){const t=this.lockListeners.pop();t&&t()}}ngOnDestroy(){this.unlockEvents(),this.transitionListener&&this.transitionListener(),this.split.removeArea(this)}collapse(t=0,r="right"){this.split.collapseArea(this,t,r)}expand(){this.split.expandArea(this)}}return n.\u0275fac=function(t){return new(t||n)(et(Kn),et(br),et(Wa),et(II))},n.\u0275dir=fn({type:n,selectors:[["as-split-area"],["","as-split-area",""]],inputs:{order:"order",size:"size",minSize:"minSize",maxSize:"maxSize",lockSize:"lockSize",visible:"visible"},exportAs:["asSplitArea"]}),n})(),_G=(()=>{class n{static forRoot(){return console.warn("AngularSplitModule.forRoot() is deprecated and will be removed in v6"),{ngModule:n,providers:[]}}static forChild(){return console.warn("AngularSplitModule.forChild() is deprecated and will be removed in v6"),{ngModule:n,providers:[]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=gr({imports:[Mu]}),n})();try{lD=typeof Intl<"u"&&Intl.v8BreakIterator}catch{lD=!1}let cm,U0,ah,cD,jo=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function J4(n){return n===oI}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!lD)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(St(mE))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function um(n){return function xG(){if(null==cm&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>cm=!0}))}finally{cm=cm||!1}return cm}()?n:!!n.capture}function RI(){if(null==ah){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return ah=!1,ah;if("scrollBehavior"in document.documentElement.style)ah=!0;else{const n=Element.prototype.scrollTo;ah=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return ah}function dm(){if("object"!=typeof document||!document)return 0;if(null==U0){const n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const t=document.createElement("div"),r=t.style;r.width="2px",r.height="1px",n.appendChild(t),document.body.appendChild(n),U0=0,0===n.scrollLeft&&(n.scrollLeft=1,U0=0===n.scrollLeft?1:2),n.remove()}return U0}function ku(n){return n.composedPath?n.composedPath()[0]:n.target}function uD(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}class PI extends Ie{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function Iu(...n){return hl(n,dl(n))}function dD(n,e){return pt((t,r)=>{let i=0;t.subscribe(at(r,o=>n.call(e,o,i++)&&r.next(o)))})}function NI(n){return dD((e,t)=>n<=t)}function RG(n,e){return n===e}function qs(n){return pt((e,t)=>{lo(n).subscribe(at(t,()=>t.complete(),te)),!t.closed&&e.subscribe(t)})}function Pc(n){return null!=n&&"false"!=`${n}`}function hD(n,e=0){return function PG(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function G0(n){return Array.isArray(n)?n:[n]}function Fi(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Yf(n){return n instanceof br?n.nativeElement:n}let NG=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),LG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=gr({providers:[NG]}),n})();const{isArray:FG}=Array,{getPrototypeOf:BG,prototype:VG,keys:HG}=Object;function LI(n){if(1===n.length){const e=n[0];if(FG(e))return{args:e,keys:null};if(function zG(n){return n&&"object"==typeof n&&BG(n)===VG}(e)){const t=HG(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:jG}=Array;function fD(n){return $e(e=>function UG(n,e){return jG(e)?n(...e):n(e)}(n,e))}function FI(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function BI(n,e,t){n?ms(t,n,e):e()}function pD(...n){return function WG(){return $c(1)}()(hl(n,dl(n)))}function $0(n){return n<=0?()=>Sr:pt((e,t)=>{let r=0;e.subscribe(at(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function VI(...n){const e=dl(n);return pt((t,r)=>{(e?pD(n,t,e):pD(n,t)).subscribe(r)})}const HI=new Set;let Xf,qG=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):XG}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function YG(n){if(!HI.has(n))try{Xf||(Xf=document.createElement("style"),Xf.setAttribute("type","text/css"),document.head.appendChild(Xf)),Xf.sheet&&(Xf.sheet.insertRule(`@media ${n} {body{ }}`,0),HI.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(St(jo))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function XG(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let KG=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new Ie}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return zI(G0(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let o=function GG(...n){const e=dl(n),t=Lh(n),{args:r,keys:i}=LI(n);if(0===r.length)return hl([],e);const o=new ke(function $G(n,e,t=ye){return r=>{BI(e,()=>{const{length:i}=n,o=new Array(i);let a=i,u=i;for(let h=0;h<i;h++)BI(e,()=>{const m=hl(n[h],e);let v=!1;m.subscribe(at(r,x=>{o[h]=x,v||(v=!0,u--),u||r.next(t(o.slice()))},()=>{--a||r.complete()}))},r)},r)}}(r,e,i?a=>FI(i,a):ye));return t?o.pipe(fD(t)):o}(zI(G0(t)).map(a=>this._registerQuery(a).observable));return o=pD(o.pipe($0(1)),o.pipe(NI(1),aD(0))),o.pipe($e(a=>{const u={matches:!1,breakpoints:{}};return a.forEach(({matches:h,query:m})=>{u.matches=u.matches||h,u.breakpoints[m]=h}),u}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),o={observable:new ke(a=>{const u=h=>this._zone.run(()=>a.next(h));return r.addListener(u),()=>{r.removeListener(u)}}).pipe(VI(r),$e(({matches:a})=>({query:t,matches:a})),qs(this._destroySubject)),mql:r};return this._queries.set(t,o),o}}return n.\u0275fac=function(t){return new(t||n)(St(qG),St(Kn))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function zI(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function W0(n,e){return(n.getAttribute(e)||"").match(/\S+/g)||[]}const UI="cdk-describedby-message",q0="cdk-describedby-host";let gD=0,JG=(()=>{class n{constructor(t,r){this._platform=r,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+gD++,this._document=t,this._id=Rs(w0)+"-"+gD++}describe(t,r,i){if(!this._canBeDescribed(t,r))return;const o=mD(r,i);"string"!=typeof r?(GI(r,this._id),this._messageRegistry.set(o,{messageElement:r,referenceCount:0})):this._messageRegistry.has(o)||this._createMessageElement(r,i),this._isElementDescribedByMessage(t,o)||this._addMessageReference(t,o)}removeDescription(t,r,i){if(!r||!this._isElementNode(t))return;const o=mD(r,i);if(this._isElementDescribedByMessage(t,o)&&this._removeMessageReference(t,o),"string"==typeof r){const a=this._messageRegistry.get(o);a&&0===a.referenceCount&&this._deleteMessageElement(o)}0===this._messagesContainer?.childNodes.length&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){const t=this._document.querySelectorAll(`[${q0}="${this._id}"]`);for(let r=0;r<t.length;r++)this._removeCdkDescribedByReferenceIds(t[r]),t[r].removeAttribute(q0);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(t,r){const i=this._document.createElement("div");GI(i,this._id),i.textContent=t,r&&i.setAttribute("role",r),this._createMessagesContainer(),this._messagesContainer.appendChild(i),this._messageRegistry.set(mD(t,r),{messageElement:i,referenceCount:0})}_deleteMessageElement(t){this._messageRegistry.get(t)?.messageElement?.remove(),this._messageRegistry.delete(t)}_createMessagesContainer(){if(this._messagesContainer)return;const t="cdk-describedby-message-container",r=this._document.querySelectorAll(`.${t}[platform="server"]`);for(let o=0;o<r.length;o++)r[o].remove();const i=this._document.createElement("div");i.style.visibility="hidden",i.classList.add(t),i.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&i.setAttribute("platform","server"),this._document.body.appendChild(i),this._messagesContainer=i}_removeCdkDescribedByReferenceIds(t){const r=W0(t,"aria-describedby").filter(i=>0!=i.indexOf(UI));t.setAttribute("aria-describedby",r.join(" "))}_addMessageReference(t,r){const i=this._messageRegistry.get(r);(function ZG(n,e,t){const r=W0(n,e);r.some(i=>i.trim()==t.trim())||(r.push(t.trim()),n.setAttribute(e,r.join(" ")))})(t,"aria-describedby",i.messageElement.id),t.setAttribute(q0,this._id),i.referenceCount++}_removeMessageReference(t,r){const i=this._messageRegistry.get(r);i.referenceCount--,function QG(n,e,t){const i=W0(n,e).filter(o=>o!=t.trim());i.length?n.setAttribute(e,i.join(" ")):n.removeAttribute(e)}(t,"aria-describedby",i.messageElement.id),t.removeAttribute(q0)}_isElementDescribedByMessage(t,r){const i=W0(t,"aria-describedby"),o=this._messageRegistry.get(r),a=o&&o.messageElement.id;return!!a&&-1!=i.indexOf(a)}_canBeDescribed(t,r){if(!this._isElementNode(t))return!1;if(r&&"object"==typeof r)return!0;const i=null==r?"":`${r}`.trim(),o=t.getAttribute("aria-label");return!(!i||o&&o.trim()===i)}_isElementNode(t){return t.nodeType===this._document.ELEMENT_NODE}}return n.\u0275fac=function(t){return new(t||n)(St(or),St(jo))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function mD(n,e){return"string"==typeof n?`${e||""}/${n}`:n}function GI(n,e){n.id||(n.id=`${UI}-${e}-${gD++}`)}function WI(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function qI(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const o$=new Gt("cdk-input-modality-detector-options"),s$={ignoreKeys:[18,17,224,91,16]},Kf=um({passive:!0,capture:!0});let a$=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,r,i,o){this._platform=t,this._mostRecentTarget=null,this._modality=new PI(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(u=>u===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=ku(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<650||(this._modality.next(WI(a)?"keyboard":"mouse"),this._mostRecentTarget=ku(a))},this._onTouchstart=a=>{qI(a)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=ku(a))},this._options={...s$,...o},this.modalityDetected=this._modality.pipe(NI(1)),this.modalityChanged=this.modalityDetected.pipe(function OG(n,e=ye){return n=n??RG,pt((t,r)=>{let i,o=!0;t.subscribe(at(r,a=>{const u=e(a);(o||!n(i,u))&&(o=!1,i=u,r.next(a))}))})}()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,Kf),i.addEventListener("mousedown",this._onMousedown,Kf),i.addEventListener("touchstart",this._onTouchstart,Kf)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Kf),document.removeEventListener("mousedown",this._onMousedown,Kf),document.removeEventListener("touchstart",this._onTouchstart,Kf))}}return n.\u0275fac=function(t){return new(t||n)(St(jo),St(Kn),St(or),St(o$,8))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const c$=new Gt("cdk-focus-monitor-default-options"),Y0=um({passive:!0,capture:!0});let vD=(()=>{class n{constructor(t,r,i,o,a){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Ie,this._rootNodeFocusAndBlurListener=u=>{for(let m=ku(u);m;m=m.parentElement)"focus"===u.type?this._onFocus(u,m):this._onBlur(u,m)},this._document=o,this._detectionMode=a?.detectionMode||0}monitor(t,r=!1){const i=Yf(t);if(!this._platform.isBrowser||1!==i.nodeType)return Iu(null);const o=function DG(n){if(function EG(){if(null==cD){const n=typeof document<"u"?document.head:null;cD=!(!n||!n.createShadowRoot&&!n.attachShadow)}return cD}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(i)||this._getDocument(),a=this._elementInfo.get(i);if(a)return r&&(a.checkChildren=!0),a.subject;const u={checkChildren:r,subject:new Ie,rootNode:o};return this._elementInfo.set(i,u),this._registerGlobalListeners(u),u.subject}stopMonitoring(t){const r=Yf(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const o=Yf(t);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([u,h])=>this._originChanged(u,r,h)):(this._setOrigin(r),"function"==typeof o.focus&&o.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),o=ku(t);!i||!i.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,Y0),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,Y0)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(qs(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Y0),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Y0),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,o)=>{(o===t||i.checkChildren&&o.contains(t))&&r.push([o,i])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if("mouse"!==i||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const o=t.labels;if(o)for(let a=0;a<o.length;a++)if(o[a].contains(r))return!0;return!1}}return n.\u0275fac=function(t){return new(t||n)(St(Kn),St(jo),St(a$),St(or,8),St(c$,8))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const XI="cdk-high-contrast-black-on-white",KI="cdk-high-contrast-white-on-black",yD="cdk-high-contrast-active";let ZI=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=Rs(KG).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,o=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(yD,XI,KI),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(yD,XI):2===r&&t.add(yD,KI)}}}return n.\u0275fac=function(t){return new(t||n)(St(jo),St(or))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),u$=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(St(ZI))},n.\u0275mod=ei({type:n}),n.\u0275inj=gr({imports:[LG]}),n})();const d$=new Gt("cdk-dir-doc",{providedIn:"root",factory:function h$(){return Rs(or)}}),f$=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let hm=(()=>{class n{constructor(t){this.value="ltr",this.change=new Pr,t&&(this.value=function p$(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?f$.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(St(d$,8))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),fm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=gr({}),n})();const m$=new Gt("mat-sanity-checks",{providedIn:"root",factory:function g$(){return!0}});let pa=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!uD()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(St(ZI),St(m$,8),St(or))},n.\u0275mod=ei({type:n}),n.\u0275inj=gr({imports:[fm,fm]}),n})();function eO(n){return class extends n{get disabled(){return this._disabled}set disabled(e){this._disabled=Pc(e)}constructor(...e){super(...e),this._disabled=!1}}}function X0(n,e){return class extends n{get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}constructor(...t){super(...t),this.defaultColor=e,this.color=e}}}function tO(n){return class extends n{get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Pc(e)}constructor(...e){super(...e),this._disableRipple=!1}}}function v$(n,e=0){return class extends n{get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?hD(t):this.defaultTabIndex}constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}}}class b${constructor(e,t,r,i=!1){this._renderer=e,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const nO=um({passive:!0,capture:!0});class w${constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=ku(e);t&&this._events.get(e.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(o=>o.handleEvent(e))})}}addHandler(e,t,r,i){const o=this._events.get(t);if(o){const a=o.get(r);a?a.add(i):o.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,nO)})}removeHandler(e,t,r){const i=this._events.get(e);if(!i)return;const o=i.get(t);o&&(o.delete(r),0===o.size&&i.delete(t),0===i.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,nO)))}}const rO={enterDuration:225,exitDuration:150},iO=um({passive:!0,capture:!0}),oO=["mousedown","touchstart"],sO=["mouseup","mouseleave","touchend","touchcancel"];class gm{constructor(e,t,r,i){this._target=e,this._ngZone=t,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=Yf(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...rO,...r.animation};r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const a=r.radius||function x$(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),u=e-i.left,h=t-i.top,m=o.enterDuration,v=document.createElement("div");v.classList.add("mat-ripple-element"),v.style.left=u-a+"px",v.style.top=h-a+"px",v.style.height=2*a+"px",v.style.width=2*a+"px",null!=r.color&&(v.style.backgroundColor=r.color),v.style.transitionDuration=`${m}ms`,this._containerElement.appendChild(v);const x=window.getComputedStyle(v),F=x.transitionDuration,Y="none"===x.transitionProperty||"0s"===F||"0s, 0s"===F||0===i.width&&0===i.height,ie=new b$(this,v,r,Y);v.style.transform="scale3d(1, 1, 1)",ie.state=0,r.persistent||(this._mostRecentTransientRipple=ie);let me=null;return!Y&&(m||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Oe=()=>this._finishRippleTransition(ie),Ke=()=>this._destroyRipple(ie);v.addEventListener("transitionend",Oe),v.addEventListener("transitioncancel",Ke),me={onTransitionEnd:Oe,onTransitionCancel:Ke}}),this._activeRipples.set(ie,me),(Y||!m)&&this._finishRippleTransition(ie),ie}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,r={...rO,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Yf(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,oO.forEach(r=>{gm._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{sO.forEach(t=>{this._triggerElement.addEventListener(t,this,iO)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=WI(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!qI(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(oO.forEach(t=>gm._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&sO.forEach(t=>e.removeEventListener(t,this,iO)))}}gm._eventManager=new w$;const E$=new Gt("mat-ripple-global-options");let K0=(()=>{class n{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,r,i,o,a){this._elementRef=t,this._animationMode=a,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new gm(this,r,t,i)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,{...this.rippleConfig,...i}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return n.\u0275fac=function(t){return new(t||n)(et(br),et(Kn),et(jo),et(E$,8),et(Ic,8))},n.\u0275dir=fn({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&bo("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),aO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=gr({imports:[pa,pa]}),n})();function bD(n,e,t){const r=G(n)||e||t?{next:n,error:e,complete:t}:n;return r?pt((i,o)=>{var a;null===(a=r.subscribe)||void 0===a||a.call(r);let u=!0;i.subscribe(at(o,h=>{var m;null===(m=r.next)||void 0===m||m.call(r,h),o.next(h)},()=>{var h;u=!1,null===(h=r.complete)||void 0===h||h.call(r),o.complete()},h=>{var m;u=!1,null===(m=r.error)||void 0===m||m.call(r,h),o.error(h)},()=>{var h,m;u&&(null===(h=r.unsubscribe)||void 0===h||h.call(r)),null===(m=r.finalize)||void 0===m||m.call(r)}))}):ye}function cO(n){return pt((e,t)=>{let o,r=null,i=!1;r=e.subscribe(at(t,void 0,void 0,a=>{o=lo(n(a,cO(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}class wD{}class Ou{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),o=i.toLowerCase(),a=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(a):this.headers.set(o,[a])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ou?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Ou;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Ou?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const o=e.value;if(o){let a=this.headers.get(t);if(!a)return;a=a.filter(u=>-1===o.indexOf(u)),0===a.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,a)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class M${encodeKey(e){return dO(e)}encodeValue(e){return dO(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const T$=/%(\d[a-f0-9])/gi,k$={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function dO(n){return encodeURIComponent(n).replace(T$,(e,t)=>k$[t]??e)}function Z0(n){return`${n}`}class Ru{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new M$,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function A$(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[a,u]=-1==o?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],h=t.get(a)||[];h.push(u),t.set(a,h)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(Z0):[Z0(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Ru({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Z0(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(Z0(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class I${constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function hO(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function fO(n){return typeof Blob<"u"&&n instanceof Blob}function pO(n){return typeof FormData<"u"&&n instanceof FormData}class mm{constructor(e,t,r,i){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function O$(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new Ou),this.context||(this.context=new I$),this.params){const a=this.params.toString();if(0===a.length)this.urlWithParams=t;else{const u=t.indexOf("?");this.urlWithParams=t+(-1===u?"?":u<t.length-1?"&":"")+a}}else this.params=new Ru,this.urlWithParams=t}serializeBody(){return null===this.body?null:hO(this.body)||fO(this.body)||pO(this.body)||function R$(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ru?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||pO(this.body)?null:fO(this.body)?this.body.type||null:hO(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ru?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,u=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let h=e.headers||this.headers,m=e.params||this.params;const v=e.context??this.context;return void 0!==e.setHeaders&&(h=Object.keys(e.setHeaders).reduce((x,k)=>x.set(k,e.setHeaders[k]),h)),e.setParams&&(m=Object.keys(e.setParams).reduce((x,k)=>x.set(k,e.setParams[k]),m)),new mm(t,r,o,{params:m,headers:h,context:v,reportProgress:u,responseType:i,withCredentials:a})}}var wo=(()=>((wo=wo||{})[wo.Sent=0]="Sent",wo[wo.UploadProgress=1]="UploadProgress",wo[wo.ResponseHeader=2]="ResponseHeader",wo[wo.DownloadProgress=3]="DownloadProgress",wo[wo.Response=4]="Response",wo[wo.User=5]="User",wo))();class P${constructor(e,t=200,r="OK"){this.headers=e.headers||new Ou,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class _D extends P${constructor(e={}){super(e),this.type=wo.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new _D({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function xD(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let ED=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof mm)o=t;else{let h,m;h=i.headers instanceof Ou?i.headers:new Ou(i.headers),i.params&&(m=i.params instanceof Ru?i.params:new Ru({fromObject:i.params})),o=new mm(t,r,void 0!==i.body?i.body:null,{headers:h,context:i.context,params:m,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const a=Iu(o).pipe(function S$(n,e){return G(e)?Ta(n,e,1):Ta(n,1)}(h=>this.handler.handle(h)));if(t instanceof mm||"events"===i.observe)return a;const u=a.pipe(dD(h=>h instanceof _D));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return u.pipe($e(h=>{if(null!==h.body&&!(h.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return h.body}));case"blob":return u.pipe($e(h=>{if(null!==h.body&&!(h.body instanceof Blob))throw new Error("Response is not a Blob.");return h.body}));case"text":return u.pipe($e(h=>{if(null!==h.body&&"string"!=typeof h.body)throw new Error("Response is not a string.");return h.body}));default:return u.pipe($e(h=>h.body))}case"response":return u;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Ru).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,xD(i,r))}post(t,r,i={}){return this.request("POST",t,xD(i,r))}put(t,r,i={}){return this.request("PUT",t,xD(i,r))}}return n.\u0275fac=function(t){return new(t||n)(St(wD))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})();const q$=["*"];let J0;function vm(n){return function Y$(){if(void 0===J0&&(J0=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(J0=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return J0}()?.createHTML(n)||n}function xO(n){return Error(`Unable to find icon with the name "${n}"`)}function EO(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function DO(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class lh{constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let eb=(()=>{class n{constructor(t,r,i,o){this._httpClient=t,this._sanitizer=r,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,o){return this._addSvgIconConfig(t,r,new lh(i,null,o))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,o){const a=this._sanitizer.sanitize(tt.HTML,i);if(!a)throw DO(i);const u=vm(a);return this._addSvgIconConfig(t,r,new lh("",u,o))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new lh(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const o=this._sanitizer.sanitize(tt.HTML,r);if(!o)throw DO(r);const a=vm(o);return this._addSvgIconSetConfig(t,new lh("",a,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(tt.RESOURCE_URL,t);if(!r)throw EO(t);const i=this._cachedIconsByUrl.get(r);return i?Iu(tb(i)):this._loadSvgIconFromConfig(new lh(t,null)).pipe(bD(o=>this._cachedIconsByUrl.set(r,o)),$e(o=>tb(o)))}getNamedSvgIcon(t,r=""){const i=CO(r,t);let o=this._svgIconConfigs.get(i);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(r,t),o)return this._svgIconConfigs.set(i,o),this._getSvgFromConfig(o);const a=this._iconSetConfigs.get(r);return a?this._getSvgFromIconSetConfigs(t,a):function D$(n,e){const t=G(n)?n:()=>n,r=i=>i.error(t());return new ke(e?i=>e.schedule(r,0,i):r)}(xO(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Iu(tb(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe($e(r=>tb(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?Iu(i):function lO(...n){const e=Lh(n),{args:t,keys:r}=LI(n),i=new ke(o=>{const{length:a}=t;if(!a)return void o.complete();const u=new Array(a);let h=a,m=a;for(let v=0;v<a;v++){let x=!1;lo(t[v]).subscribe(at(o,k=>{x||(x=!0,m--),u[v]=k},()=>h--,void 0,()=>{(!h||!x)&&(m||o.next(r?FI(r,u):u),o.complete())}))}});return e?i.pipe(fD(e)):i}(r.filter(a=>!a.svgText).map(a=>this._loadSvgIconSetFromConfig(a).pipe(cO(u=>{const m=`Loading icon set URL: ${this._sanitizer.sanitize(tt.RESOURCE_URL,a.url)} failed: ${u.message}`;return this._errorHandler.handleError(new Error(m)),Iu(null)})))).pipe($e(()=>{const a=this._extractIconWithNameFromAnySet(t,r);if(!a)throw xO(t);return a}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const o=r[i];if(o.svgText&&o.svgText.toString().indexOf(t)>-1){const a=this._svgElementFromConfig(o),u=this._extractSvgIconFromSet(a,t,o.options);if(u)return u}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(bD(r=>t.svgText=r),$e(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Iu(null):this._fetchIcon(t).pipe(bD(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const o=t.querySelector(`[id="${r}"]`);if(!o)return null;const a=o.cloneNode(!0);if(a.removeAttribute("id"),"svg"===a.nodeName.toLowerCase())return this._setSvgAttributes(a,i);if("symbol"===a.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(a),i);const u=this._svgElementFromString(vm("<svg></svg>"));return u.appendChild(a),this._setSvgAttributes(u,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString(vm("<svg></svg>")),i=t.attributes;for(let o=0;o<i.length;o++){const{name:a,value:u}=i[o];"id"!==a&&r.setAttribute(a,u)}for(let o=0;o<t.childNodes.length;o++)t.childNodes[o].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[o].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){const{url:r,options:i}=t,o=i?.withCredentials??!1;if(!this._httpClient)throw function X$(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const a=this._sanitizer.sanitize(tt.RESOURCE_URL,r);if(!a)throw EO(r);const u=this._inProgressUrlFetches.get(a);if(u)return u;const h=this._httpClient.get(a,{responseType:"text",withCredentials:o}).pipe($e(m=>vm(m)),function C$(n){return pt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>this._inProgressUrlFetches.delete(a)),ka());return this._inProgressUrlFetches.set(a,h),h}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(CO(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const o=this._resolvers[i](r,t);if(o)return Z$(o)?new lh(o.url,null,o.options):new lh(o,null)}}}return n.\u0275fac=function(t){return new(t||n)(St(ED,8),St(rD),St(or,8),St(ua))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function tb(n){return n.cloneNode(!0)}function CO(n,e){return n+":"+e}function Z$(n){return!(!n.url||!n.options)}const Q$=X0(class{constructor(n){this._elementRef=n}}),J$=new Gt("MAT_ICON_DEFAULT_OPTIONS"),e8=new Gt("mat-icon-location",{providedIn:"root",factory:function t8(){const n=Rs(or),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),SO=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],n8=SO.map(n=>`[${n}]`).join(", "),r8=/^url\(['"]?#(.*?)['"]?\)$/;let MO=(()=>{class n extends Q${get inline(){return this._inline}set inline(t){this._inline=Pc(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}constructor(t,r,i,o,a,u){super(t),this._iconRegistry=r,this._location=o,this._errorHandler=a,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=P.EMPTY,u&&(u.color&&(this.color=this.defaultColor=u.color),u.fontSet&&(this.fontSet=u.fontSet)),i||t.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>t.classList.remove(i)),r.forEach(i=>t.classList.add(i)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,o)=>{i.forEach(a=>{o.setAttribute(a.name,`url('${t}#${a.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(n8),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<r.length;o++)SO.forEach(a=>{const u=r[o],h=u.getAttribute(a),m=h?h.match(r8):null;if(m){let v=i.get(u);v||(v=[],i.set(u,v)),v.push({name:a,value:m[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe($0(1)).subscribe(o=>this._setSvgElement(o),o=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${o.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(et(br),et(eb),Rd("aria-hidden"),et(e8),et(ua),et(J$,8))},n.\u0275cmp=Qi({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(t,r){2&t&&(Ho("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),bo("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Fn],ngContentSelectors:q$,decls:1,vars:0,template:function(t,r){1&t&&(Eu(),Ws(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),CD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=gr({imports:[pa,pa]}),n})();class Jf{}Jf.\u0275fac=function(e){return new(e||Jf)},Jf.\u0275mod=ei({type:Jf}),Jf.\u0275inj=gr({imports:[Mu,CD]});class SD{constructor(){this.displayContextMenu=!0,this.contextMenuCommands=new i8,this.individualCSS={"background-color":"rgb(64,153,218)",color:"#333","border-color":"#bbb","border-width":3,"border-opacity":.5},this.classNodeCSS={"background-color":"rgb(238, 75, 43)",color:"#333"},this.literalNodeCSS={"background-color":"white",color:"#333",opacity:1,width:"data(width)",shape:"rectangle","border-color":"#bbb","border-width":3,"border-opacity":.5}}}class i8{constructor(){this.nodes=[{id:"copyURI",visible:!0,enabled:!0,label:"Copy"},{id:"search",visible:!0,enabled:!0,label:"Search"},{id:"focus",visible:!0,enabled:!0,label:"Focus"},{id:"expandInbound",visible:!0,enabled:!0,label:"+inbound"},{id:"expandOutbound",visible:!0,enabled:!0,label:"+outbound"}],this.edges=[{id:"copyURI",visible:!0,enabled:!0,label:"Copy"},{id:"search",visible:!0,enabled:!0,label:"Search"}],this.canvas=[]}}class o8{constructor(e,t,r){this.resourceURI=e,this.commandId=t,this.contextCategory=r}}var ep=(()=>{return(n=ep||(ep={})).CANVAS="CANVAS",n.EDGE="EDGE",n.NODE="NODE",ep;var n})();const MD=new SD;MD.contextMenuCommands.nodes=[{id:"copyURI",visible:!0,enabled:!0,label:"Copy"}],MD.contextMenuCommands.edges=[{id:"copyURI",visible:!0,enabled:!0,label:"Copy"}];var s8=$(6864),nb=$.n(s8),a8=$(3811),l8=$.n(a8),c8=$(1212),u8=$.n(c8),d8=$(5791),h8=$.n(d8);nb().use(l8()),nb().use(u8()),nb().use(h8());class ch{constructor(){this.contextMenuClick$=new Ie,this.settings=new SD}build(e,t,r){this.settings=r,this.initCytoscape(e,t),r.displayContextMenu&&this.setupContextMenus(),this.setupHoverEvents()}addElements(e){null!=this.cy&&(this.cy.add(e),this.updateLayout())}contextMenuClick(){return this.contextMenuClick$.asObservable()}getCytoscape(){return this.cy}initCytoscape(e,t){this.cy=nb()({container:e,wheelSensitivity:.5,elements:t,style:[{selector:"node",style:{content:"data(name)","text-valign":"center",color:"#ccc"}},{selector:"node.individual",style:{width:"data(size)",height:"data(size)",...this.settings.individualCSS}},{selector:"node.class",style:{width:"data(size)",height:"data(size)",...this.settings.classNodeCSS}},{selector:"node.literal",style:{content:"data(name)",...this.settings.literalNodeCSS}},{selector:":selected",style:{"border-width":3,"border-color":"#333"}},{selector:"edge",style:{content:"data(name)","curve-style":"bezier",opacity:.666,"target-arrow-shape":"triangle"}},{selector:".faded",style:{opacity:.25,"text-opacity":0}}]}),this.updateLayout()}updateLayout(){null!=this.cy&&this.cy.layout({name:"cose-bilkent",quality:"default",nodeDimensionsIncludeLabels:!1,refresh:30,fit:!0,padding:100,randomize:!0,nodeRepulsion:4500,idealEdgeLength:200,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",animationDuration:500,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.5}).run()}setupContextMenus(){if(null==this.cy)return;const e=[this.settings.contextMenuCommands.nodes,this.settings.contextMenuCommands.edges,this.settings.contextMenuCommands.canvas],t=[ep.NODE,ep.EDGE,ep.CANVAS],r=["node","edge","core"];for(const i in e){const o=t[i],a=r[i],u=[];e[i].forEach(h=>{h.visible&&u.push({content:h.label,enabled:h.enabled,select:m=>{console.log(m);const x=m.json().data?.uri;if(void 0===x)return;const k=new o8(x,h.id,o);this.contextMenuClick$.next(k)}})}),u.length&&this.cy.cxtmenu({selector:a,commands:u})}}setupHoverEvents(){if(null==this.cy)return;let e=this.cy.collection();this.cy.nodes().on("click",function(t){const r=t.target;console.log(r),e=e.union(r)}),this.cy.nodes().unbind("mouseover"),this.cy.nodes().bind("mouseover",t=>{this.dimAllButNeighbors(t.target)}),this.cy.nodes().unbind("mouseout"),this.cy.nodes().bind("mouseout",()=>{this.unDimAll()})}unDimAll(){null!=this.cy&&this.cy.elements().forEach(e=>{e.removeClass("faded")})}dimAllButNeighbors(e){if(null==this.cy)return;const t=e.neighborhood().map(r=>r.id());this.cy.elements().forEach(r=>{t.includes(r.id())||r.id()===e.id()?r.removeClass("faded"):r.addClass("faded")})}}ch.\u0275fac=function(e){return new(e||ch)},ch.\u0275prov=nn({token:ch,factory:ch.\u0275fac,providedIn:"root"});var rb,AO=$(5049),f8=new Uint8Array(16);function p8(){if(!rb&&!(rb=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return rb(f8)}const g8=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,v8=function m8(n){return"string"==typeof n&&g8.test(n)};for(var _o=[],AD=0;AD<256;++AD)_o.push((AD+256).toString(16).substr(1));const _8=function w8(n,e,t){var r=(n=n||{}).random||(n.rng||p8)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){t=t||0;for(var i=0;i<16;++i)e[t+i]=r[i];return e}return function y8(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(_o[n[e+0]]+_o[n[e+1]]+_o[n[e+2]]+_o[n[e+3]]+"-"+_o[n[e+4]]+_o[n[e+5]]+"-"+_o[n[e+6]]+_o[n[e+7]]+"-"+_o[n[e+8]]+_o[n[e+9]]+"-"+_o[n[e+10]]+_o[n[e+11]]+_o[n[e+12]]+_o[n[e+13]]+_o[n[e+14]]+_o[n[e+15]]).toLowerCase();if(!v8(t))throw TypeError("Stringified UUID is invalid");return t}(r)};class tp{constructor(){this.nodes=[],this.edges=[],this.seenNodes=[],this.resourceLabels={},this.knownPrefixes={schema:"http://schema.org/"}}buildElementData(e,t="en"){var r=this;return sh(function*(){return"http://schema.org/"==e["@context"]&&(e["@context"]="https://schema.org/"),r.context={...e["@context"],...r.knownPrefixes},r.nodes=[],r.edges=[],r.seenNodes=[],r.resourceLabels={},(yield(0,AO.toRDF)(e)).forEach(o=>r.processQuad(o)),r.nodes=r.appendNames(r.nodes,t),r.edges=r.appendNames(r.edges,t),{nodes:r.nodes,edges:r.edges}})()}appendElementData(e,t="en"){var r=this;return sh(function*(){return(yield(0,AO.toRDF)(e)).forEach(o=>r.processQuad(o)),r.nodes=r.appendNames(r.nodes,t),r.edges=r.appendNames(r.edges,t),{nodes:r.nodes,edges:r.edges}})()}processQuad(e){const t=e.subject.value;let r=e.predicate.value,i=e.object.value;if("http://www.w3.org/2004/02/skos/core#prefLabel"===r||"http://www.w3.org/2000/01/rdf-schema#label"===r)return void(Object.keys(this.resourceLabels).includes(t)?this.resourceLabels[t].push(e.object):this.resourceLabels[t]=[e.object]);"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"===r&&(r="a"),this.appendNamedNode(t);const o=e.object.termType;"Literal"===o?i=this.appendLiteralNode(i):"BlankNode"===o?this.appendNamedNode(i,"individual"):"NamedNode"===o?this.appendNamedNode(i,"a"===r?"class":"individual"):console.warn("Unknown term type "+o),this.appendEdge(t,r,i)}appendNames(e,t="en"){return e.map(r=>{const i=this.resourceLabels[r.data.id];if(Array.isArray(i))1===i.length?r.data.name=i[0].value:console.log("MORE THAN ONE LABEL NOT YET SUPPORTED");else{if("class"===r.classes){if(null==r.data.uri)return r;r.data.name=this.getIdFromURI(r.data.uri)}if("edge"===r.classes){if(null==r.data.uri)return r;r.data.name=this.getIdFromURI(r.data.uri)}}return void 0!==r.data.size&&""!=r.data.name&&(r.data.size=70),r})}appendNamedNode(e,t="individual"){if(this.seenNodes.includes(e)){if("class"===t){const r=this.nodes.find(i=>i.data.id===e);null!=r&&(r.classes=t)}}else this.nodes.push({data:{id:e,uri:e,name:"",size:40},classes:t}),this.seenNodes.push(e)}appendLiteralNode(e){""===e&&(e="-");const t=this.camelize(e);return this.seenNodes.includes(t)||(this.nodes.push({data:{id:t,name:e,width:10*e.length+"px"},classes:"literal"}),this.seenNodes.push(t)),t}appendEdge(e,t,r){this.edges.push({data:{id:_8(),source:e,target:r,name:this.appendPrefix(t),uri:t},classes:"edge"})}appendPrefix(e){const t=Object.keys(this.context),r=Object.values(this.context);for(const i in r){const o=r[i];if(e.startsWith(o)){e=e.replace(o,`${t[i]}:`);break}}return e}camelize(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,function(t,r){return 0===r?t.toLowerCase():t.toUpperCase()}).replace(/\s+/g,"")}getIdFromURI(e){return e.includes("#")?e.split("#")[1]:e.split("/").pop()??e}}tp.\u0275fac=function(e){return new(e||tp)},tp.\u0275prov=nn({token:tp,factory:tp.\u0275fac,providedIn:"root"});class x8{constructor(e,t){this.newRect=e,this.oldRect=t,this.isFirst=null==t}}class ym{constructor(e,t){this.element=e,this.zone=t,this.resized=new Pr,this.observer=new ResizeObserver(r=>this.zone.run(()=>this.observe(r)))}ngOnInit(){this.observer.observe(this.element.nativeElement)}ngOnDestroy(){this.observer.disconnect()}observe(e){const t=e[0],r=new x8(t.contentRect,this.oldRect);this.oldRect=t.contentRect,this.resized.emit(r)}}ym.\u0275fac=function(e){return new(e||ym)(et(br),et(Kn))},ym.\u0275dir=fn({type:ym,selectors:[["","imPoc1Resized",""]],outputs:{resized:"resized"},standalone:!0});const E8=["cy"];class bm{set content(e){if(e){if(this.canvas=e.nativeElement,null==this.canvas||null==this.elementData)return;this.rdfGraphService.build(this.canvas,this.elementData,this.settings)}}constructor(e,t){this.rdfGraphService=e,this.jsonLDProcessingService=t,this.settings=new SD,this.clickedContextMenu=new Pr}ngOnInit(){this.rdfGraphService.contextMenuClick().subscribe(e=>{e&&this.clickedContextMenu.emit(e),"copyURI"===e?.commandId&&navigator.clipboard.writeText(e.resourceURI??"")})}ngOnChanges(){var e=this;return sh(function*(){e.elementData=yield e.jsonLDProcessingService.buildElementData(e.data),null!=e.canvas&&null!=e.elementData&&e.rdfGraphService.build(e.canvas,e.elementData,e.settings)})()}ngAfterViewInit(){null!=this.canvas&&null!=this.elementData&&this.rdfGraphService.build(this.canvas,this.elementData,this.settings)}append(e){var t=this;return sh(function*(){if(null==t.canvas)return;const r=yield t.jsonLDProcessingService.buildElementData(e);t.rdfGraphService.addElements(r)})()}getCytoscape(){return this.rdfGraphService.getCytoscape()}onResized(){null==this.canvas||null==this.elementData||(this.canvas.innerHTML="",this.rdfGraphService.build(this.canvas,this.elementData,this.settings))}}bm.\u0275fac=function(e){return new(e||bm)(et(ch),et(tp))},bm.\u0275cmp=Qi({type:bm,selectors:[["im-poc1-rdf-graph"]],viewQuery:function(e,t){if(1&e&&Cu(E8,5),2&e){let r;Tc(r=kc())&&(t.content=r.first)}},inputs:{data:"data",settings:"settings"},outputs:{clickedContextMenu:"clickedContextMenu"},features:[Vn],decls:2,vars:0,consts:[["id","graph-canvas","imPoc1Resized","",3,"resized"],["cy",""]],template:function(e,t){1&e&&(wr(0,"div",0,1),jr("resized",function(){return t.onResized()}),Vr())},dependencies:[ym],styles:["#graph-canvas[_ngcontent-%COMP%]{height:100%;width:100%}  .node-hover-div{font-size:.6em}"]});class wm{constructor(){this.settings=MD}onContextMenuClick(e){console.log(e)}}wm.\u0275fac=function(e){return new(e||wm)},wm.\u0275cmp=Qi({type:wm,selectors:[["im-poc1-graph"]],inputs:{data:"data"},standalone:!0,features:[nh],decls:1,vars:2,consts:[[3,"data","settings","clickedContextMenu"]],template:function(e,t){1&e&&(wr(0,"im-poc1-rdf-graph",0),jr("clickedContextMenu",function(i){return t.onContextMenuClick(i)}),Vr()),2&e&&ri("data",t.data)("settings",t.settings)},dependencies:[Mu,Jf,bm],encapsulation:2});class Cr{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,r){let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(t,this.length,i,1),Hl.from(i,this.length-(t-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let r=[];return this.decompose(e,t,r,0),Hl.from(r,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new _m(this),o=new _m(e);for(let a=t,u=t;;){if(i.next(a),o.next(a),a=0,i.lineBreak!=o.lineBreak||i.done!=o.done||i.value!=o.value)return!1;if(u+=i.value.length,i.done||u>=r)return!0}}iter(e=1){return new _m(this,e)}iterRange(e,t=this.length){return new kO(this,e,t)}iterLines(e,t){let r;if(null==e)r=this.iter();else{null==t&&(t=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new IO(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(0==e.length)throw new RangeError("A document must have at least one line");return 1!=e.length||e[0]?e.length<=32?new Ci(e):Hl.from(Ci.split(e,[])):Cr.empty}}class Ci extends Cr{constructor(e,t=function D8(n){let e=-1;for(let t of n)e+=t.length+1;return e}(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,r,i){for(let o=0;;o++){let a=this.text[o],u=i+a.length;if((t?r:u)>=e)return new C8(i,u,r,a);i=u+1,r++}}decompose(e,t,r,i){let o=e<=0&&t>=this.length?this:new Ci(TO(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(1&i){let a=r.pop(),u=ib(o.text,a.text.slice(),0,o.length);if(u.length<=32)r.push(new Ci(u,a.length+o.length));else{let h=u.length>>1;r.push(new Ci(u.slice(0,h)),new Ci(u.slice(h)))}}else r.push(o)}replace(e,t,r){if(!(r instanceof Ci))return super.replace(e,t,r);let i=ib(this.text,ib(r.text,TO(this.text,0,e)),t),o=this.length+r.length-(t-e);return i.length<=32?new Ci(i,o):Hl.from(Ci.split(i,[]),o)}sliceString(e,t=this.length,r="\n"){let i="";for(let o=0,a=0;o<=t&&a<this.text.length;a++){let u=this.text[a],h=o+u.length;o>e&&a&&(i+=r),e<h&&t>o&&(i+=u.slice(Math.max(0,e-o),t-o)),o=h+1}return i}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let r=[],i=-1;for(let o of e)r.push(o),i+=o.length+1,32==r.length&&(t.push(new Ci(r,i)),r=[],i=-1);return i>-1&&t.push(new Ci(r,i)),t}}class Hl extends Cr{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,t,r,i){for(let o=0;;o++){let a=this.children[o],u=i+a.length,h=r+a.lines-1;if((t?h:u)>=e)return a.lineInner(e,t,r,i);i=u+1,r=h+1}}decompose(e,t,r,i){for(let o=0,a=0;a<=t&&o<this.children.length;o++){let u=this.children[o],h=a+u.length;if(e<=h&&t>=a){let m=i&((a<=e?1:0)|(h>=t?2:0));a>=e&&h<=t&&!m?r.push(u):u.decompose(e-a,t-a,r,m)}a=h+1}}replace(e,t,r){if(r.lines<this.lines)for(let i=0,o=0;i<this.children.length;i++){let a=this.children[i],u=o+a.length;if(e>=o&&t<=u){let h=a.replace(e-o,t-o,r),m=this.lines-a.lines+h.lines;if(h.lines<m>>4&&h.lines>m>>6){let v=this.children.slice();return v[i]=h,new Hl(v,this.length-(t-e)+r.length)}return super.replace(o,u,h)}o=u+1}return super.replace(e,t,r)}sliceString(e,t=this.length,r="\n"){let i="";for(let o=0,a=0;o<this.children.length&&a<=t;o++){let u=this.children[o],h=a+u.length;a>e&&o&&(i+=r),e<h&&t>a&&(i+=u.sliceString(e-a,t-a,r)),a=h+1}return i}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Hl))return 0;let r=0,[i,o,a,u]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=t,o+=t){if(i==a||o==u)return r;let h=this.children[i],m=e.children[o];if(h!=m)return r+h.scanIdentical(m,t);r+=h.length+1}}static from(e,t=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let F of e)r+=F.lines;if(r<32){let F=[];for(let Y of e)Y.flatten(F);return new Ci(F,t)}let i=Math.max(32,r>>5),o=i<<1,a=i>>1,u=[],h=0,m=-1,v=[];function x(F){let Y;if(F.lines>o&&F instanceof Hl)for(let ie of F.children)x(ie);else F.lines>a&&(h>a||!h)?(k(),u.push(F)):F instanceof Ci&&h&&(Y=v[v.length-1])instanceof Ci&&F.lines+Y.lines<=32?(h+=F.lines,m+=F.length+1,v[v.length-1]=new Ci(Y.text.concat(F.text),Y.length+1+F.length)):(h+F.lines>i&&k(),h+=F.lines,m+=F.length+1,v.push(F))}function k(){0!=h&&(u.push(1==v.length?v[0]:Hl.from(v,m)),m=-1,h=v.length=0)}for(let F of e)x(F);return k(),1==u.length?u[0]:new Hl(u,t)}}function ib(n,e,t=0,r=1e9){for(let i=0,o=0,a=!0;o<n.length&&i<=r;o++){let u=n[o],h=i+u.length;h>=t&&(h>r&&(u=u.slice(0,r-i)),i<t&&(u=u.slice(t-i)),a?(e[e.length-1]+=u,a=!1):e.push(u)),i=h+1}return e}function TO(n,e,t){return ib(n,[""],e,t)}Cr.empty=new Ci([""],0);class _m{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Ci?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],o=this.offsets[r],a=o>>1;if(a==(t>0?i instanceof Ci?i.text.length:i.children.length:0)){if(0==r)return this.done=!0,this.value="",this;t>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&o)==(t>0?0:1)){if(this.offsets[r]+=t,0==e)return this.lineBreak=!0,this.value="\n",this;e--}else if(i instanceof Ci){let h=i.text[a+(t<0?-1:0)];if(this.offsets[r]+=t,h.length>Math.max(0,e))return this.value=0==e?h:t>0?h.slice(e):h.slice(0,h.length-e),this;e-=h.length}else{let h=i.children[a+(t<0?-1:0)];e>h.length?(e-=h.length,this.offsets[r]+=t):(t<0&&this.offsets[r]--,this.nodes.push(h),this.offsets.push(t>0?1:(h instanceof Ci?h.text.length:h.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class kO{constructor(e,t,r){this.value="",this.done=!1,this.cursor=new _m(e,t>r?-1:1),this.pos=t>r?e.length:0,this.from=Math.min(t,r),this.to=Math.max(t,r)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let r=t<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*t,this.value=i.length<=r?i:t<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class IO{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:r,value:i}=this.inner.next(e);return t?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Cr.prototype[Symbol.iterator]=function(){return this.iter()},_m.prototype[Symbol.iterator]=kO.prototype[Symbol.iterator]=IO.prototype[Symbol.iterator]=function(){return this});class C8{constructor(e,t,r,i){this.from=e,this.to=t,this.number=r,this.text=i}get length(){return this.to-this.from}}let np="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(n=>n?parseInt(n,36):1);for(let n=1;n<np.length;n++)np[n]+=np[n-1];function S8(n){for(let e=1;e<np.length;e+=2)if(np[e]>n)return np[e-1]<=n;return!1}function OO(n){return n>=127462&&n<=127487}function ss(n,e,t=!0,r=!0){return(t?PO:M8)(n,e,r)}function PO(n,e,t){if(e==n.length)return e;e&&NO(n.charCodeAt(e))&&LO(n.charCodeAt(e-1))&&e--;let r=xo(n,e);for(e+=ga(r);e<n.length;){let i=xo(n,e);if(8205==r||8205==i||t&&S8(i))e+=ga(i),r=i;else{if(!OO(i))break;{let o=0,a=e-2;for(;a>=0&&OO(xo(n,a));)o++,a-=2;if(o%2==0)break;e+=2}}}return e}function M8(n,e,t){for(;e>0;){let r=PO(n,e-2,t);if(r<e)return r;e--}return 0}function NO(n){return n>=56320&&n<57344}function LO(n){return n>=55296&&n<56320}function xo(n,e){let t=n.charCodeAt(e);if(!LO(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return NO(r)?r-56320+(t-55296<<10)+65536:t}function TD(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n)))}function ga(n){return n<65536?1:2}const kD=/\r\n?|\n/;var as=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(as||(as={}));class zl{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t+1];e+=r<0?this.sections[t]:r}return e}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(e){for(let t=0,r=0,i=0;t<this.sections.length;){let o=this.sections[t++],a=this.sections[t++];a<0?(e(r,i,o),i+=o):i+=a,r+=o}}iterChangedRanges(e,t=!1){ID(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];i<0?e.push(r,i):e.push(i,r)}return new zl(e)}composeDesc(e){return this.empty?e:e.empty?this:FO(this,e)}mapDesc(e,t=!1){return e.empty?this:OD(this,e,t)}mapPos(e,t=-1,r=as.Simple){let i=0,o=0;for(let a=0;a<this.sections.length;){let u=this.sections[a++],h=this.sections[a++],m=i+u;if(h<0){if(m>e)return o+(e-i);o+=u}else{if(r!=as.Simple&&m>=e&&(r==as.TrackDel&&i<e&&m>e||r==as.TrackBefore&&i<e||r==as.TrackAfter&&m>e))return null;if(m>e||m==e&&t<0&&!u)return e==i||t<0?o:o+h;o+=h}i=m}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return o}touchesRange(e,t=e){for(let r=0,i=0;r<this.sections.length&&i<=t;){let u=i+this.sections[r++];if(this.sections[r++]>=0&&i<=t&&u>=e)return!(i<e&&u>t)||"cover";i=u}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>"number"!=typeof t))throw new RangeError("Invalid JSON representation of ChangeDesc");return new zl(e)}static create(e){return new zl(e)}}class Xi extends zl{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return ID(this,(t,r,i,o,a)=>e=e.replace(i,i+(r-t),a),!1),e}mapDesc(e,t=!1){return OD(this,e,t,!0)}invert(e){let t=this.sections.slice(),r=[];for(let i=0,o=0;i<t.length;i+=2){let a=t[i],u=t[i+1];if(u>=0){t[i]=u,t[i+1]=a;let h=i>>1;for(;r.length<h;)r.push(Cr.empty);r.push(a?e.slice(o,o+a):Cr.empty)}o+=a}return new Xi(t,r)}compose(e){return this.empty?e:e.empty?this:FO(this,e,!0)}map(e,t=!1){return e.empty?this:OD(this,e,t,!0)}iterChanges(e,t=!1){ID(this,e,t)}get desc(){return zl.create(this.sections)}filter(e){let t=[],r=[],i=[],o=new xm(this);e:for(let a=0,u=0;;){let h=a==e.length?1e9:e[a++];for(;u<h||u==h&&0==o.len;){if(o.done)break e;let v=Math.min(o.len,h-u);Uo(i,v,-1);let x=-1==o.ins?-1:0==o.off?o.ins:0;Uo(t,v,x),x>0&&Pu(r,t,o.text),o.forward(v),u+=v}let m=e[a++];for(;u<m;){if(o.done)break e;let v=Math.min(o.len,m-u);Uo(t,v,-1),Uo(i,v,-1==o.ins?-1:0==o.off?o.ins:0),o.forward(v),u+=v}}return{changes:new Xi(t,r),filtered:zl.create(i)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t],i=this.sections[t+1];e.push(i<0?r:0==i?[r]:[r].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,r){let i=[],o=[],a=0,u=null;function h(v=!1){if(!v&&!i.length)return;a<t&&Uo(i,t-a,-1);let x=new Xi(i,o);u=u?u.compose(x.map(u)):x,i=[],o=[],a=0}return function m(v){if(Array.isArray(v))for(let x of v)m(x);else if(v instanceof Xi){if(v.length!=t)throw new RangeError(`Mismatched change set length (got ${v.length}, expected ${t})`);h(),u=u?u.compose(v.map(u)):v}else{let{from:x,to:k=x,insert:F}=v;if(x>k||x<0||k>t)throw new RangeError(`Invalid change range ${x} to ${k} (in doc of length ${t})`);let Y=F?"string"==typeof F?Cr.of(F.split(r||kD)):F:Cr.empty,ie=Y.length;if(x==k&&0==ie)return;x<a&&h(),x>a&&Uo(i,x-a,-1),Uo(i,k-x,ie),Pu(o,i,Y),a=k}}(e),h(!u),u}static empty(e){return new Xi(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],r=[];for(let i=0;i<e.length;i++){let o=e[i];if("number"==typeof o)t.push(o,-1);else{if(!Array.isArray(o)||"number"!=typeof o[0]||o.some((a,u)=>u&&"string"!=typeof a))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==o.length)t.push(o[0],0);else{for(;r.length<i;)r.push(Cr.empty);r[i]=Cr.of(o.slice(1)),t.push(o[0],r[i].length)}}}return new Xi(t,r)}static createSet(e,t){return new Xi(e,t)}}function Uo(n,e,t,r=!1){if(0==e&&t<=0)return;let i=n.length-2;i>=0&&t<=0&&t==n[i+1]?n[i]+=e:0==e&&0==n[i]?n[i+1]+=t:r?(n[i]+=e,n[i+1]+=t):n.push(e,t)}function Pu(n,e,t){if(0==t.length)return;let r=e.length-2>>1;if(r<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<r;)n.push(Cr.empty);n.push(t)}}function ID(n,e,t){let r=n.inserted;for(let i=0,o=0,a=0;a<n.sections.length;){let u=n.sections[a++],h=n.sections[a++];if(h<0)i+=u,o+=u;else{let m=i,v=o,x=Cr.empty;for(;m+=u,v+=h,h&&r&&(x=x.append(r[a-2>>1])),!(t||a==n.sections.length||n.sections[a+1]<0);)u=n.sections[a++],h=n.sections[a++];e(i,m,o,v,x),i=m,o=v}}}function OD(n,e,t,r=!1){let i=[],o=r?[]:null,a=new xm(n),u=new xm(e);for(let h=-1;;)if(-1==a.ins&&-1==u.ins){let m=Math.min(a.len,u.len);Uo(i,m,-1),a.forward(m),u.forward(m)}else if(u.ins>=0&&(a.ins<0||h==a.i||0==a.off&&(u.len<a.len||u.len==a.len&&!t))){let m=u.len;for(Uo(i,u.ins,-1);m;){let v=Math.min(a.len,m);a.ins>=0&&h<a.i&&a.len<=v&&(Uo(i,0,a.ins),o&&Pu(o,i,a.text),h=a.i),a.forward(v),m-=v}u.next()}else{if(!(a.ins>=0)){if(a.done&&u.done)return o?Xi.createSet(i,o):zl.create(i);throw new Error("Mismatched change set lengths")}{let m=0,v=a.len;for(;v;)if(-1==u.ins){let x=Math.min(v,u.len);m+=x,v-=x,u.forward(x)}else{if(!(0==u.ins&&u.len<v))break;v-=u.len,u.next()}Uo(i,m,h<a.i?a.ins:0),o&&h<a.i&&Pu(o,i,a.text),h=a.i,a.forward(a.len-v)}}}function FO(n,e,t=!1){let r=[],i=t?[]:null,o=new xm(n),a=new xm(e);for(let u=!1;;){if(o.done&&a.done)return i?Xi.createSet(r,i):zl.create(r);if(0==o.ins)Uo(r,o.len,0,u),o.next();else if(0!=a.len||a.done){if(o.done||a.done)throw new Error("Mismatched change set lengths");{let h=Math.min(o.len2,a.len),m=r.length;if(-1==o.ins){let v=-1==a.ins?-1:a.off?0:a.ins;Uo(r,h,v,u),i&&v&&Pu(i,r,a.text)}else-1==a.ins?(Uo(r,o.off?0:o.len,h,u),i&&Pu(i,r,o.textBit(h))):(Uo(r,o.off?0:o.len,a.off?0:a.ins,u),i&&!a.off&&Pu(i,r,a.text));u=(o.ins>h||a.ins>=0&&a.len>h)&&(u||r.length>m),o.forward2(h),a.forward(h)}}else Uo(r,0,a.ins,u),i&&Pu(i,r,a.text),a.next()}}class xm{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Cr.empty:e[t]}textBit(e){let{inserted:t}=this.set,r=this.i-2>>1;return r>=t.length&&!e?Cr.empty:t[r].slice(this.off,null==e?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){-1==this.ins?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class uh{constructor(e,t,r){this.from=e,this.to=t,this.flags=r}get anchor(){return 16&this.flags?this.to:this.from}get head(){return 16&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 4&this.flags?-1:8&this.flags?1:0}get bidiLevel(){let e=3&this.flags;return 3==e?null:e}get goalColumn(){let e=this.flags>>5;return 33554431==e?void 0:e}map(e,t=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,t):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new uh(r,i,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return Ct.range(e,t);let r=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return Ct.range(this.anchor,r)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||"number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid JSON representation for SelectionRange");return Ct.range(e.anchor,e.head)}static create(e,t,r){return new uh(e,t,r)}}class Ct{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:Ct.create(this.ranges.map(r=>r.map(e,t)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new Ct([this.main],0)}addRange(e,t=!0){return Ct.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let r=this.ranges.slice();return r[t]=e,Ct.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||"number"!=typeof e.main||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Ct(e.ranges.map(t=>uh.fromJSON(t)),e.main)}static single(e,t=e){return new Ct([Ct.range(e,t)],0)}static create(e,t=0){if(0==e.length)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let o=e[i];if(o.empty?o.from<=r:o.from<r)return Ct.normalized(e.slice(),t);r=o.to}return new Ct(e,t)}static cursor(e,t=0,r,i){return uh.create(e,e,(0==t?0:t<0?4:8)|(null==r?3:Math.min(2,r))|(i??33554431)<<5)}static range(e,t,r,i){let o=(r??33554431)<<5|(null==i?3:Math.min(2,i));return t<e?uh.create(t,e,24|o):uh.create(e,t,(t>e?4:0)|o)}static normalized(e,t=0){let r=e[t];e.sort((i,o)=>i.from-o.from),t=e.indexOf(r);for(let i=1;i<e.length;i++){let o=e[i],a=e[i-1];if(o.empty?o.from<=a.to:o.from<a.to){let u=a.from,h=Math.max(o.to,a.to);i<=t&&t--,e.splice(--i,2,o.anchor>o.head?Ct.range(h,u):Ct.range(u,h))}}return new Ct(e,t)}}function BO(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let RD=0;class ln{constructor(e,t,r,i,o){this.combine=e,this.compareInput=t,this.compare=r,this.isStatic=i,this.id=RD++,this.default=e([]),this.extensions="function"==typeof o?o(this):o}static define(e={}){return new ln(e.combine||(t=>t),e.compareInput||((t,r)=>t===r),e.compare||(e.combine?(t,r)=>t===r:PD),!!e.static,e.enables)}of(e){return new ob([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new ob(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new ob(e,this,2,t)}from(e,t){return t||(t=r=>r),this.compute([e],r=>t(r.field(e)))}}function PD(n,e){return n==e||n.length==e.length&&n.every((t,r)=>t===e[r])}class ob{constructor(e,t,r,i){this.dependencies=e,this.facet=t,this.type=r,this.value=i,this.id=RD++}dynamicSlot(e){var t;let r=this.value,i=this.facet.compareInput,o=this.id,a=e[o]>>1,u=2==this.type,h=!1,m=!1,v=[];for(let x of this.dependencies)"doc"==x?h=!0:"selection"==x?m=!0:1&(null!==(t=e[x.id])&&void 0!==t?t:1)||v.push(e[x.id]);return{create:x=>(x.values[a]=r(x),1),update(x,k){if(h&&k.docChanged||m&&(k.docChanged||k.selection)||ND(x,v)){let F=r(x);if(u?!VO(F,x.values[a],i):!i(F,x.values[a]))return x.values[a]=F,1}return 0},reconfigure:(x,k)=>{let F,Y=k.config.address[o];if(null!=Y){let ie=lb(k,Y);if(this.dependencies.every(me=>me instanceof ln?k.facet(me)===x.facet(me):!(me instanceof Bi)||k.field(me,!1)==x.field(me,!1))||(u?VO(F=r(x),ie,i):i(F=r(x),ie)))return x.values[a]=ie,0}else F=r(x);return x.values[a]=F,1}}}}function VO(n,e,t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!t(n[r],e[r]))return!1;return!0}function ND(n,e){let t=!1;for(let r of e)1&Dm(n,r)&&(t=!0);return t}function A8(n,e,t){let r=t.map(h=>n[h.id]),i=t.map(h=>h.type),o=r.filter(h=>!(1&h)),a=n[e.id]>>1;function u(h){let m=[];for(let v=0;v<r.length;v++){let x=lb(h,r[v]);if(2==i[v])for(let k of x)m.push(k);else m.push(x)}return e.combine(m)}return{create(h){for(let m of r)Dm(h,m);return h.values[a]=u(h),1},update(h,m){if(!ND(h,o))return 0;let v=u(h);return e.compare(v,h.values[a])?0:(h.values[a]=v,1)},reconfigure(h,m){let v=ND(h,r),x=m.config.facets[e.id],k=m.facet(e);if(x&&!v&&PD(t,x))return h.values[a]=k,0;let F=u(h);return e.compare(F,k)?(h.values[a]=k,0):(h.values[a]=F,1)}}}const HO=ln.define({static:!0});class Bi{constructor(e,t,r,i,o){this.id=e,this.createF=t,this.updateF=r,this.compareF=i,this.spec=o,this.provides=void 0}static define(e){let t=new Bi(RD++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){return(e.facet(HO).find(r=>r.field==this)?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:r=>(r.values[t]=this.create(r),1),update:(r,i)=>{let o=r.values[t],a=this.updateF(o,i);return this.compareF(o,a)?0:(r.values[t]=a,1)},reconfigure:(r,i)=>null!=i.config.address[this.id]?(r.values[t]=i.field(this),0):(r.values[t]=this.create(r),1)}}init(e){return[this,HO.of({field:this,create:e})]}get extension(){return this}}function Em(n){return e=>new zO(e,n)}const hh={highest:Em(0),high:Em(1),default:Em(2),low:Em(3),lowest:Em(4)};class zO{constructor(e,t){this.inner=e,this.prec=t}}class sb{of(e){return new LD(this,e)}reconfigure(e){return sb.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class LD{constructor(e,t){this.compartment=e,this.inner=t}}class ab{constructor(e,t,r,i,o,a){for(this.base=e,this.compartments=t,this.dynamicSlots=r,this.address=i,this.staticValues=o,this.facets=a,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return null==t?e.default:this.staticValues[t>>1]}static resolve(e,t,r){let i=[],o=Object.create(null),a=new Map;for(let k of function T8(n,e,t){let r=[[],[],[],[],[]],i=new Map;return function o(a,u){let h=i.get(a);if(null!=h){if(h<=u)return;let m=r[h].indexOf(a);m>-1&&r[h].splice(m,1),a instanceof LD&&t.delete(a.compartment)}if(i.set(a,u),Array.isArray(a))for(let m of a)o(m,u);else if(a instanceof LD){if(t.has(a.compartment))throw new RangeError("Duplicate use of compartment in extensions");let m=e.get(a.compartment)||a.inner;t.set(a.compartment,m),o(m,u)}else if(a instanceof zO)o(a.inner,a.prec);else if(a instanceof Bi)r[u].push(a),a.provides&&o(a.provides,u);else if(a instanceof ob)r[u].push(a),a.facet.extensions&&o(a.facet.extensions,2);else{let m=a.extension;if(!m)throw new Error(`Unrecognized extension value in extension set (${a}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(m,u)}}(n,2),r.reduce((a,u)=>a.concat(u))}(e,t,a))k instanceof Bi?i.push(k):(o[k.facet.id]||(o[k.facet.id]=[])).push(k);let u=Object.create(null),h=[],m=[];for(let k of i)u[k.id]=m.length<<1,m.push(F=>k.slot(F));let v=r?.config.facets;for(let k in o){let F=o[k],Y=F[0].facet,ie=v&&v[k]||[];if(F.every(me=>0==me.type))if(u[Y.id]=h.length<<1|1,PD(ie,F))h.push(r.facet(Y));else{let me=Y.combine(F.map(Oe=>Oe.value));h.push(r&&Y.compare(me,r.facet(Y))?r.facet(Y):me)}else{for(let me of F)0==me.type?(u[me.id]=h.length<<1|1,h.push(me.value)):(u[me.id]=m.length<<1,m.push(Oe=>me.dynamicSlot(Oe)));u[Y.id]=m.length<<1,m.push(me=>A8(me,Y,F))}}let x=m.map(k=>k(u));return new ab(e,a,x,u,h,o)}}function Dm(n,e){if(1&e)return 2;let t=e>>1,r=n.status[t];if(4==r)throw new Error("Cyclic dependency between fields and/or facets");if(2&r)return r;n.status[t]=4;let i=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|i}function lb(n,e){return 1&e?n.config.staticValues[e>>1]:n.values[e>>1]}const jO=ln.define(),UO=ln.define({combine:n=>n.some(e=>e),static:!0}),GO=ln.define({combine:n=>n.length?n[0]:void 0,static:!0}),$O=ln.define(),WO=ln.define(),qO=ln.define(),YO=ln.define({combine:n=>!!n.length&&n[0]});class Nc{constructor(e,t){this.type=e,this.value=t}static define(){return new k8}}class k8{of(e){return new Nc(this,e)}}class I8{constructor(e){this.map=e}of(e){return new Qn(this,e)}}let Qn=(()=>{class n{constructor(t,r){this.type=t,this.value=r}map(t){let r=this.type.map(this.value,t);return void 0===r?void 0:r==this.value?this:new n(this.type,r)}is(t){return this.type==t}static define(t={}){return new I8(t.map||(r=>r))}static mapEffects(t,r){if(!t.length)return t;let i=[];for(let o of t){let a=o.map(r);a&&i.push(a)}return i}}return n.reconfigure=n.define(),n.appendConfig=n.define(),n})(),jl=(()=>{class n{constructor(t,r,i,o,a,u){this.startState=t,this.changes=r,this.selection=i,this.effects=o,this.annotations=a,this.scrollIntoView=u,this._doc=null,this._state=null,i&&BO(i,r.newLength),a.some(h=>h.type==n.time)||(this.annotations=a.concat(n.time.of(Date.now())))}static create(t,r,i,o,a,u){return new n(t,r,i,o,a,u)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(t){for(let r of this.annotations)if(r.type==t)return r.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(t){let r=this.annotation(n.userEvent);return!(!r||!(r==t||r.length>t.length&&r.slice(0,t.length)==t&&"."==r[t.length]))}}return n.time=Nc.define(),n.userEvent=Nc.define(),n.addToHistory=Nc.define(),n.remote=Nc.define(),n})();function O8(n,e){let t=[];for(let r=0,i=0;;){let o,a;if(r<n.length&&(i==e.length||e[i]>=n[r]))o=n[r++],a=n[r++];else{if(!(i<e.length))return t;o=e[i++],a=e[i++]}!t.length||t[t.length-1]<o?t.push(o,a):t[t.length-1]<a&&(t[t.length-1]=a)}}function XO(n,e,t){var r;let i,o,a;return t?(i=e.changes,o=Xi.empty(e.changes.length),a=n.changes.compose(e.changes)):(i=e.changes.map(n.changes),o=n.changes.mapDesc(e.changes,!0),a=n.changes.compose(i)),{changes:a,selection:e.selection?e.selection.map(o):null===(r=n.selection)||void 0===r?void 0:r.map(i),effects:Qn.mapEffects(n.effects,i).concat(Qn.mapEffects(e.effects,o)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function FD(n,e,t){let r=e.selection,i=rp(e.annotations);return e.userEvent&&(i=i.concat(jl.userEvent.of(e.userEvent))),{changes:e.changes instanceof Xi?e.changes:Xi.of(e.changes||[],t,n.facet(GO)),selection:r&&(r instanceof Ct?r:Ct.single(r.anchor,r.head)),effects:rp(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function KO(n,e,t){let r=FD(n,e.length?e[0]:{},n.doc.length);e.length&&!1===e[0].filter&&(t=!1);for(let o=1;o<e.length;o++){!1===e[o].filter&&(t=!1);let a=!!e[o].sequential;r=XO(r,FD(n,e[o],a?r.changes.newLength:n.doc.length),a)}let i=jl.create(n,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return function P8(n){let e=n.startState,t=e.facet(qO),r=n;for(let i=t.length-1;i>=0;i--){let o=t[i](n);o&&Object.keys(o).length&&(r=XO(r,FD(e,o,n.changes.newLength),!0))}return r==n?n:jl.create(e,n.changes,n.selection,r.effects,r.annotations,r.scrollIntoView)}(t?function R8(n){let e=n.startState,t=!0;for(let i of e.facet($O)){let o=i(n);if(!1===o){t=!1;break}Array.isArray(o)&&(t=!0===t?o:O8(t,o))}if(!0!==t){let i,o;if(!1===t)o=n.changes.invertedDesc,i=Xi.empty(e.doc.length);else{let a=n.changes.filter(t);i=a.changes,o=a.filtered.mapDesc(a.changes).invertedDesc}n=jl.create(e,i,n.selection&&n.selection.map(o),Qn.mapEffects(n.effects,o),n.annotations,n.scrollIntoView)}let r=e.facet(WO);for(let i=r.length-1;i>=0;i--){let o=r[i](n);n=o instanceof jl?o:Array.isArray(o)&&1==o.length&&o[0]instanceof jl?o[0]:KO(e,rp(o),!1)}return n}(i):i)}const N8=[];function rp(n){return null==n?N8:Array.isArray(n)?n:[n]}var ii=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(ii||(ii={}));const L8=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let BD;try{BD=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}let ls=(()=>{class n{constructor(t,r,i,o,a,u){this.config=t,this.doc=r,this.selection=i,this.values=o,this.status=t.statusTemplate.slice(),this.computeSlot=a,u&&(u._state=this);for(let h=0;h<this.config.dynamicSlots.length;h++)Dm(this,h<<1);this.computeSlot=null}field(t,r=!0){let i=this.config.address[t.id];if(null!=i)return Dm(this,i),lb(this,i);if(r)throw new RangeError("Field is not present in this state")}update(...t){return KO(this,t,!0)}applyTransaction(t){let a,r=this.config,{base:i,compartments:o}=r;for(let u of t.effects)u.is(sb.reconfigure)?(r&&(o=new Map,r.compartments.forEach((h,m)=>o.set(m,h)),r=null),o.set(u.value.compartment,u.value.extension)):u.is(Qn.reconfigure)?(r=null,i=u.value):u.is(Qn.appendConfig)&&(r=null,i=rp(i).concat(u.value));r?a=t.startState.values.slice():(r=ab.resolve(i,o,this),a=new n(r,this.doc,this.selection,r.dynamicSlots.map(()=>null),(h,m)=>m.reconfigure(h,this),null).values),new n(r,t.newDoc,t.newSelection,a,(u,h)=>h.update(u,t),t)}replaceSelection(t){return"string"==typeof t&&(t=this.toText(t)),this.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:t},range:Ct.cursor(r.from+t.length)}))}changeByRange(t){let r=this.selection,i=t(r.ranges[0]),o=this.changes(i.changes),a=[i.range],u=rp(i.effects);for(let h=1;h<r.ranges.length;h++){let m=t(r.ranges[h]),v=this.changes(m.changes),x=v.map(o);for(let F=0;F<h;F++)a[F]=a[F].map(x);let k=o.mapDesc(v,!0);a.push(m.range.map(k)),o=o.compose(x),u=Qn.mapEffects(u,x).concat(Qn.mapEffects(rp(m.effects),k))}return{changes:o,selection:Ct.create(a,r.mainIndex),effects:u}}changes(t=[]){return t instanceof Xi?t:Xi.of(t,this.doc.length,this.facet(n.lineSeparator))}toText(t){return Cr.of(t.split(this.facet(n.lineSeparator)||kD))}sliceDoc(t=0,r=this.doc.length){return this.doc.sliceString(t,r,this.lineBreak)}facet(t){let r=this.config.address[t.id];return null==r?t.default:(Dm(this,r),lb(this,r))}toJSON(t){let r={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(t)for(let i in t){let o=t[i];o instanceof Bi&&null!=this.config.address[o.id]&&(r[i]=o.spec.toJSON(this.field(t[i]),this))}return r}static fromJSON(t,r={},i){if(!t||"string"!=typeof t.doc)throw new RangeError("Invalid JSON representation for EditorState");let o=[];if(i)for(let a in i)if(Object.prototype.hasOwnProperty.call(t,a)){let u=i[a],h=t[a];o.push(u.init(m=>u.spec.fromJSON(h,m)))}return n.create({doc:t.doc,selection:Ct.fromJSON(t.selection),extensions:r.extensions?o.concat([r.extensions]):o})}static create(t={}){let r=ab.resolve(t.extensions||[],new Map),i=t.doc instanceof Cr?t.doc:Cr.of((t.doc||"").split(r.staticFacet(n.lineSeparator)||kD)),o=t.selection?t.selection instanceof Ct?t.selection:Ct.single(t.selection.anchor,t.selection.head):Ct.single(0);return BO(o,i.length),r.staticFacet(UO)||(o=o.asSingle()),new n(r,i,o,r.dynamicSlots.map(()=>null),(a,u)=>u.create(a),null)}get tabSize(){return this.facet(n.tabSize)}get lineBreak(){return this.facet(n.lineSeparator)||"\n"}get readOnly(){return this.facet(YO)}phrase(t,...r){for(let i of this.facet(n.phrases))if(Object.prototype.hasOwnProperty.call(i,t)){t=i[t];break}return r.length&&(t=t.replace(/\$(\$|\d*)/g,(i,o)=>{if("$"==o)return"$";let a=+(o||1);return!a||a>r.length?i:r[a-1]})),t}languageDataAt(t,r,i=-1){let o=[];for(let a of this.facet(jO))for(let u of a(this,r,i))Object.prototype.hasOwnProperty.call(u,t)&&o.push(u[t]);return o}charCategorizer(t){return function B8(n){return e=>{if(!/\S/.test(e))return ii.Space;if(function F8(n){if(BD)return BD.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||L8.test(t)))return!0}return!1}(e))return ii.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return ii.Word;return ii.Other}}(this.languageDataAt("wordChars",t).join(""))}wordAt(t){let{text:r,from:i,length:o}=this.doc.lineAt(t),a=this.charCategorizer(t),u=t-i,h=t-i;for(;u>0;){let m=ss(r,u,!1);if(a(r.slice(m,u))!=ii.Word)break;u=m}for(;h<o;){let m=ss(r,h);if(a(r.slice(h,m))!=ii.Word)break;h=m}return u==h?null:Ct.range(u+i,h+i)}}return n.allowMultipleSelections=UO,n.tabSize=ln.define({combine:e=>e.length?e[0]:4}),n.lineSeparator=GO,n.readOnly=YO,n.phrases=ln.define({compare(e,t){let r=Object.keys(e),i=Object.keys(t);return r.length==i.length&&r.every(o=>e[o]==t[o])}}),n.languageData=jO,n.changeFilter=$O,n.transactionFilter=WO,n.transactionExtender=qO,n})();function tl(n,e,t={}){let r={};for(let i of n)for(let o of Object.keys(i)){let a=i[o],u=r[o];if(void 0===u)r[o]=a;else if(u!==a&&void 0!==a){if(!Object.hasOwnProperty.call(t,o))throw new Error("Config merge conflict for field "+o);r[o]=t[o](u,a)}}for(let i in e)void 0===r[i]&&(r[i]=e[i]);return r}sb.reconfigure=Qn.define();class fh{eq(e){return this==e}range(e,t=e){return Cm.create(e,t,this)}}fh.prototype.startSide=fh.prototype.endSide=0,fh.prototype.point=!1,fh.prototype.mapMode=as.TrackDel;class Cm{constructor(e,t,r){this.from=e,this.to=t,this.value=r}static create(e,t,r){return new Cm(e,t,r)}}function VD(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class HD{constructor(e,t,r,i){this.from=e,this.to=t,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,t,r,i=0){let o=r?this.to:this.from;for(let a=i,u=o.length;;){if(a==u)return a;let h=a+u>>1,m=o[h]-e||(r?this.value[h].endSide:this.value[h].startSide)-t;if(h==a)return m>=0?a:u;m>=0?u=h:a=h+1}}between(e,t,r,i){for(let o=this.findIndex(t,-1e9,!0),a=this.findIndex(r,1e9,!1,o);o<a;o++)if(!1===i(this.from[o]+e,this.to[o]+e,this.value[o]))return!1}map(e,t){let r=[],i=[],o=[],a=-1,u=-1;for(let h=0;h<this.value.length;h++){let k,F,m=this.value[h],v=this.from[h]+e,x=this.to[h]+e;if(v==x){let Y=t.mapPos(v,m.startSide,m.mapMode);if(null==Y||(k=F=Y,m.startSide!=m.endSide&&(F=t.mapPos(v,m.endSide),F<k)))continue}else if(k=t.mapPos(v,m.startSide),F=t.mapPos(x,m.endSide),k>F||k==F&&m.startSide>0&&m.endSide<=0)continue;(F-k||m.endSide-m.startSide)<0||(a<0&&(a=k),m.point&&(u=Math.max(u,F-k)),r.push(m),i.push(k-a),o.push(F-a))}return{mapped:r.length?new HD(i,o,r,u):null,pos:a}}}let fi=(()=>{class n{constructor(t,r,i,o){this.chunkPos=t,this.chunk=r,this.nextLayer=i,this.maxPoint=o}static create(t,r,i,o){return new n(t,r,i,o)}get length(){let t=this.chunk.length-1;return t<0?0:Math.max(this.chunkEnd(t),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let t=this.nextLayer.size;for(let r of this.chunk)t+=r.value.length;return t}chunkEnd(t){return this.chunkPos[t]+this.chunk[t].length}update(t){let{add:r=[],sort:i=!1,filterFrom:o=0,filterTo:a=this.length}=t,u=t.filter;if(0==r.length&&!u)return this;if(i&&(r=r.slice().sort(VD)),this.isEmpty)return r.length?n.of(r):this;let h=new QO(this,null,-1).goto(0),m=0,v=[],x=new Nu;for(;h.value||m<r.length;)if(m<r.length&&(h.from-r[m].from||h.startSide-r[m].value.startSide)>=0){let k=r[m++];x.addInner(k.from,k.to,k.value)||v.push(k)}else 1==h.rangeIndex&&h.chunkIndex<this.chunk.length&&(m==r.length||this.chunkEnd(h.chunkIndex)<r[m].from)&&(!u||o>this.chunkEnd(h.chunkIndex)||a<this.chunkPos[h.chunkIndex])&&x.addChunk(this.chunkPos[h.chunkIndex],this.chunk[h.chunkIndex])?h.nextChunk():((!u||o>h.to||a<h.from||u(h.from,h.to,h.value))&&(x.addInner(h.from,h.to,h.value)||v.push(Cm.create(h.from,h.to,h.value))),h.next());return x.finishInner(this.nextLayer.isEmpty&&!v.length?n.empty:this.nextLayer.update({add:v,filter:u,filterFrom:o,filterTo:a}))}map(t){if(t.empty||this.isEmpty)return this;let r=[],i=[],o=-1;for(let u=0;u<this.chunk.length;u++){let h=this.chunkPos[u],m=this.chunk[u],v=t.touchesRange(h,h+m.length);if(!1===v)o=Math.max(o,m.maxPoint),r.push(m),i.push(t.mapPos(h));else if(!0===v){let{mapped:x,pos:k}=m.map(h,t);x&&(o=Math.max(o,x.maxPoint),r.push(x),i.push(k))}}let a=this.nextLayer.map(t);return 0==r.length?a:new n(i,r,a||n.empty,o)}between(t,r,i){if(!this.isEmpty){for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],u=this.chunk[o];if(r>=a&&t<=a+u.length&&!1===u.between(a,t-a,r-a,i))return}this.nextLayer.between(t,r,i)}}iter(t=0){return Sm.from([this]).goto(t)}get isEmpty(){return this.nextLayer==this}static iter(t,r=0){return Sm.from(t).goto(r)}static compare(t,r,i,o,a=-1){let u=t.filter(k=>k.maxPoint>0||!k.isEmpty&&k.maxPoint>=a),h=r.filter(k=>k.maxPoint>0||!k.isEmpty&&k.maxPoint>=a),m=ZO(u,h,i),v=new Mm(u,m,a),x=new Mm(h,m,a);i.iterGaps((k,F,Y)=>JO(v,k,x,F,Y,o)),i.empty&&0==i.length&&JO(v,0,x,0,0,o)}static eq(t,r,i=0,o){null==o&&(o=999999999);let a=t.filter(x=>!x.isEmpty&&r.indexOf(x)<0),u=r.filter(x=>!x.isEmpty&&t.indexOf(x)<0);if(a.length!=u.length)return!1;if(!a.length)return!0;let h=ZO(a,u),m=new Mm(a,h,0).goto(i),v=new Mm(u,h,0).goto(i);for(;;){if(m.to!=v.to||!jD(m.active,v.active)||m.point&&(!v.point||!m.point.eq(v.point)))return!1;if(m.to>o)return!0;m.next(),v.next()}}static spans(t,r,i,o,a=-1){let u=new Mm(t,null,a).goto(r),h=r,m=u.openStart;for(;;){let v=Math.min(u.to,i);if(u.point){let x=u.activeForPoint(u.to),k=u.pointFrom<r?x.length+1:Math.min(x.length,m);o.point(h,v,u.point,x,k,u.pointRank),m=Math.min(u.openEnd(v),x.length)}else v>h&&(o.span(h,v,u.active,m),m=u.openEnd(v));if(u.to>i)return m+(u.point&&u.to>i?1:0);h=u.to,u.next()}}static of(t,r=!1){let i=new Nu;for(let o of t instanceof Cm?[t]:r?function V8(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let r=n[t];if(VD(e,r)>0)return n.slice().sort(VD);e=r}return n}(t):t)i.add(o.from,o.to,o.value);return i.finish()}}return n.empty=new n([],[],null,-1),n})();fi.empty.nextLayer=fi.empty;class Nu{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new HD(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,t,r){this.addInner(e,t,r)||(this.nextLayer||(this.nextLayer=new Nu)).add(e,t,r)}addInner(e,t,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(i<0||(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=t,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),0))}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let r=t.value.length-1;return this.last=t.value[r],this.lastFrom=t.from[r]+e,this.lastTo=t.to[r]+e,!0}finish(){return this.finishInner(fi.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return e;let t=fi.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function ZO(n,e,t){let r=new Map;for(let o of n)for(let a=0;a<o.chunk.length;a++)o.chunk[a].maxPoint<=0&&r.set(o.chunk[a],o.chunkPos[a]);let i=new Set;for(let o of e)for(let a=0;a<o.chunk.length;a++){let u=r.get(o.chunk[a]);null!=u&&(t?t.mapPos(u):u)==o.chunkPos[a]&&!t?.touchesRange(u,u+o.chunk[a].length)&&i.add(o.chunk[a])}return i}class QO{constructor(e,t,r,i=0){this.layer=e,this.skip=t,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex];if(this.from=e+t.from[this.rangeIndex],this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Sm{constructor(e){this.heap=e}static from(e,t=null,r=-1){let i=[];for(let o=0;o<e.length;o++)for(let a=e[o];!a.isEmpty;a=a.nextLayer)a.maxPoint>=r&&i.push(new QO(a,t,r,o));return 1==i.length?i[0]:new Sm(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let r of this.heap)r.goto(e,t);for(let r=this.heap.length>>1;r>=0;r--)zD(this.heap,r);return this.next(),this}forward(e,t){for(let r of this.heap)r.forward(e,t);for(let r=this.heap.length>>1;r>=0;r--)zD(this.heap,r);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),zD(this.heap,0)}}}function zD(n,e){for(let t=n[e];;){let r=1+(e<<1);if(r>=n.length)break;let i=n[r];if(r+1<n.length&&i.compare(n[r+1])>=0&&(i=n[r+1],r++),t.compare(i)<0)break;n[r]=t,n[e]=i,e=r}}class Mm{constructor(e,t,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Sm.from(e,t,r)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){cb(this.active,e),cb(this.activeTo,e),cb(this.activeRank,e),this.minActive=eR(this.active,this.activeTo)}addActive(e){let t=0,{value:r,to:i,rank:o}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=o;)t++;ub(this.active,t,r),ub(this.activeTo,t,i),ub(this.activeRank,t,o),e&&ub(e,t,this.cursor.from),this.minActive=eR(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&cb(r,i)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let o=this.cursor.value;if(o.point){if(!(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(r),this.cursor.next()}}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&t.push(this.active[r]);return t.reverse()}openEnd(e){let t=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)t++;return t}}function JO(n,e,t,r,i,o){n.goto(e),t.goto(r);let a=r+i,u=r,h=r-e;for(;;){let m=n.to+h-t.to||n.endSide-t.endSide,v=m<0?n.to+h:t.to,x=Math.min(v,a);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&jD(n.activeForPoint(n.to+h),t.activeForPoint(t.to))||o.comparePoint(u,x,n.point,t.point):x>u&&!jD(n.active,t.active)&&o.compareRange(u,x,n.active,t.active),v>a)break;u=v,m<=0&&n.next(),m>=0&&t.next()}}function jD(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function cb(n,e){for(let t=e,r=n.length-1;t<r;t++)n[t]=n[t+1];n.pop()}function ub(n,e,t){for(let r=n.length-1;r>=e;r--)n[r+1]=n[r];n[e]=t}function eR(n,e){let t=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||n[i].endSide-n[t].endSide)<0&&(t=i,r=e[i]);return t}function Am(n,e,t=n.length){let r=0;for(let i=0;i<t;)9==n.charCodeAt(i)?(r+=e-r%e,i++):(r++,i=ss(n,i));return r}function UD(n,e,t,r){for(let i=0,o=0;;){if(o>=e)return i;if(i==n.length)break;o+=9==n.charCodeAt(i)?t-o%t:1,i=ss(n,i)}return!0===r?-1:n.length}const tR=typeof Symbol>"u"?"__\u037c":Symbol.for("\u037c"),$D=typeof Symbol>"u"?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),nR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Lu{constructor(e,t){this.rules=[];let{finish:r}=t||{};function i(a){return/^@/.test(a)?[a]:a.split(/,\s*/)}function o(a,u,h,m){let v=[],x=/^@(\w+)\b/.exec(a[0]),k=x&&"keyframes"==x[1];if(x&&null==u)return h.push(a[0]+";");for(let F in u){let Y=u[F];if(/&/.test(F))o(F.split(/,\s*/).map(ie=>a.map(me=>ie.replace(/&/,me))).reduce((ie,me)=>ie.concat(me)),Y,h);else if(Y&&"object"==typeof Y){if(!x)throw new RangeError("The value of a property ("+F+") should be a primitive value.");o(i(F),Y,v,k)}else null!=Y&&v.push(F.replace(/_.*/,"").replace(/[A-Z]/g,ie=>"-"+ie.toLowerCase())+": "+Y+";")}(v.length||k)&&h.push((!r||x||m?a:a.map(r)).join(", ")+" {"+v.join(" ")+"}")}for(let a in e)o(i(a),e[a],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let e=nR[tR]||1;return nR[tR]=e+1,"\u037c"+e.toString(36)}static mount(e,t){(e[$D]||new H8(e)).mount(Array.isArray(t)?t:[t])}}let db=null;class H8{constructor(e){if(!e.head&&e.adoptedStyleSheets&&typeof CSSStyleSheet<"u"){if(db)return e.adoptedStyleSheets=[db.sheet,...e.adoptedStyleSheets],e[$D]=db;this.sheet=new CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],db=this}else{this.styleTag=(e.ownerDocument||e).createElement("style");let t=e.head||e;t.insertBefore(this.styleTag,t.firstChild)}this.modules=[],e[$D]=this}mount(e){let t=this.sheet,r=0,i=0;for(let o=0;o<e.length;o++){let a=e[o],u=this.modules.indexOf(a);if(u<i&&u>-1&&(this.modules.splice(u,1),i--,u=-1),-1==u){if(this.modules.splice(i++,0,a),t)for(let h=0;h<a.rules.length;h++)t.insertRule(a.rules[h],r++)}else{for(;i<u;)r+=this.modules[i++].rules.length;r+=a.rules.length,i++}}if(!t){let o="";for(let a=0;a<this.modules.length;a++)o+=this.modules[a].getRules()+"\n";this.styleTag.textContent=o}}}for(var Fu={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Tm={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},rR=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent),z8=(typeof navigator<"u"&&/Gecko\/\d+/.test(navigator.userAgent),typeof navigator<"u"&&/Mac/.test(navigator.platform)),j8=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),U8=z8||rR&&+rR[1]<57,Eo=0;Eo<10;Eo++)Fu[48+Eo]=Fu[96+Eo]=String(Eo);for(Eo=1;Eo<=24;Eo++)Fu[Eo+111]="F"+Eo;for(Eo=65;Eo<=90;Eo++)Fu[Eo]=String.fromCharCode(Eo+32),Tm[Eo]=String.fromCharCode(Eo);for(var WD in Fu)Tm.hasOwnProperty(WD)||(Tm[WD]=Fu[WD]);function hb(n){let e;return e=11==n.nodeType?n.getSelection?n:n.ownerDocument:n,e.getSelection()}function ip(n,e){return!!e&&(n==e||n.contains(1!=e.nodeType?e.parentNode:e))}function fb(n,e){if(!e.anchorNode)return!1;try{return ip(n,e.anchorNode)}catch{return!1}}function km(n){return 3==n.nodeType?sp(n,0,n.nodeValue.length).getClientRects():1==n.nodeType?n.getClientRects():[]}function pb(n,e,t,r){return!!t&&(iR(n,e,t,r,-1)||iR(n,e,t,r,1))}function gb(n){for(var e=0;;e++)if(!(n=n.previousSibling))return e}function iR(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:Im(n))){if("DIV"==n.nodeName)return!1;let o=n.parentNode;if(!o||1!=o.nodeType)return!1;e=gb(n)+(i<0?0:1),n=o}else{if(1!=n.nodeType)return!1;if(1==(n=n.childNodes[e+(i<0?-1:0)]).nodeType&&"false"==n.contentEditable)return!1;e=i<0?Im(n):0}}}function Im(n){return 3==n.nodeType?n.nodeValue.length:n.childNodes.length}const oR={left:0,right:0,top:0,bottom:0};function qD(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function W8(n){return{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}class X8{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,t,r,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=r,this.focusOffset=i}}let aR,op=null;function sR(n){if(n.setActive)return n.setActive();if(op)return n.focus(op);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(null==op?{get preventScroll(){return op={preventScroll:!0},!0}}:void 0),!op){op=!1;for(let t=0;t<e.length;){let r=e[t++],i=e[t++],o=e[t++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=o&&(r.scrollLeft=o)}}}function sp(n,e,t=e){let r=aR||(aR=document.createRange());return r.setEnd(n,t),r.setStart(n,e),r}function ap(n,e,t){let r={key:e,code:e,keyCode:t,which:t,cancelable:!0},i=new KeyboardEvent("keydown",r);i.synthetic=!0,n.dispatchEvent(i);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,n.dispatchEvent(o),i.defaultPrevented||o.defaultPrevented}function lR(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}class Do{constructor(e,t,r=!0){this.node=e,this.offset=t,this.precise=r}static before(e,t){return new Do(e.parentNode,gb(e),t)}static after(e,t){return new Do(e.parentNode,gb(e)+1,t)}}const YD=[];class Kr{constructor(){this.parent=null,this.dom=null,this.dirty=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let r of this.children){if(r==e)return t;t+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,t){return null}sync(e,t){if(2&this.dirty){let o,r=this.dom,i=null;for(let a of this.children){if(a.dirty){if(!a.dom&&(o=i?i.nextSibling:r.firstChild)){let u=Kr.get(o);(!u||!u.parent&&u.canReuseDOM(a))&&a.reuseDOM(o)}a.sync(e,t),a.dirty=0}if(o=i?i.nextSibling:r.firstChild,t&&!t.written&&t.node==r&&o!=a.dom&&(t.written=!0),a.dom.parentNode==r)for(;o&&o!=a.dom;)o=cR(o);else r.insertBefore(a.dom,o);i=a.dom}for(o=i?i.nextSibling:r.firstChild,o&&t&&t.node==r&&(t.written=!0);o;)o=cR(o)}else if(1&this.dirty)for(let r of this.children)r.dirty&&(r.sync(e,t),r.dirty=0)}reuseDOM(e){}localPosFromDOM(e,t){let r;if(e==this.dom)r=this.dom.childNodes[t];else{let i=0==Im(e)?0:0==t?-1:1;for(;;){let o=e.parentNode;if(o==this.dom)break;0==i&&o.firstChild!=o.lastChild&&(i=e==o.firstChild?-1:1),e=o}r=i<0?e:e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!Kr.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,o=0;;i++){let a=this.children[i];if(a.dom==r)return o;o+=a.length+a.breakAfter}}domBoundsAround(e,t,r=0){let i=-1,o=-1,a=-1,u=-1;for(let h=0,m=r,v=r;h<this.children.length;h++){let x=this.children[h],k=m+x.length;if(m<e&&k>t)return x.domBoundsAround(e,t,m);if(k>=e&&-1==i&&(i=h,o=m),m>t&&x.dom.parentNode==this.dom){a=h,u=v;break}v=k,m=k+x.breakAfter}return{from:o,to:u<0?r+this.length:u,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:a<this.children.length&&a>=0?this.children[a].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),1&t.dirty)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,r=YD){this.markDirty();for(let i=e;i<t;i++){let o=this.children[i];o.parent==this&&o.destroy()}this.children.splice(e,t-e,...r);for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new uR(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,r,i,o,a){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor}getSide(){return 0}destroy(){this.parent=null}}function cR(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}Kr.prototype.breakAfter=0;class uR{constructor(e,t,r){this.children=e,this.pos=t,this.i=r,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function dR(n,e,t,r,i,o,a,u,h){let{children:m}=n,v=m.length?m[e]:null,x=o.length?o[o.length-1]:null,k=x?x.breakAfter:a;if(!(e==r&&v&&!a&&!k&&o.length<2&&v.merge(t,i,o.length?x:null,0==t,u,h))){if(r<m.length){let F=m[r];F&&i<F.length?(e==r&&(F=F.split(i),i=0),!k&&x&&F.merge(0,i,x,!0,0,h)?o[o.length-1]=F:(i&&F.merge(0,i,null,!1,0,h),o.push(F))):F?.breakAfter&&(x?x.breakAfter=1:a=1),r++}for(v&&(v.breakAfter=a,t>0&&(!a&&o.length&&v.merge(t,v.length,o[0],!1,u,0)?v.breakAfter=o.shift().breakAfter:(t<v.length||v.children.length&&0==v.children[v.children.length-1].length)&&v.merge(t,v.length,null,!1,u,0),e++));e<r&&o.length;)if(m[r-1].become(o[o.length-1]))r--,o.pop(),h=o.length?0:u;else{if(!m[e].become(o[0]))break;e++,o.shift(),u=o.length?0:h}!o.length&&e&&r<m.length&&!m[e-1].breakAfter&&m[r].merge(0,0,m[e-1],!1,u,h)&&e--,(e<r||o.length)&&n.replaceChildren(e,r,o)}}function hR(n,e,t,r,i,o){let a=n.childCursor(),{i:u,off:h}=a.findPos(t,1),{i:m,off:v}=a.findPos(e,-1),x=e-t;for(let k of r)x+=k.length;n.length+=x,dR(n,m,v,u,h,r,0,i,o)}let Ys=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},XD=typeof document<"u"?document:{documentElement:{style:{}}};const KD=/Edge\/(\d+)/.exec(Ys.userAgent),fR=/MSIE \d/.test(Ys.userAgent),ZD=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ys.userAgent),mb=!!(fR||ZD||KD),pR=!mb&&/gecko\/(\d+)/i.test(Ys.userAgent),QD=!mb&&/Chrome\/(\d+)/.exec(Ys.userAgent),gR="webkitFontSmoothing"in XD.documentElement.style,mR=!mb&&/Apple Computer/.test(Ys.vendor),vR=mR&&(/Mobile\/\w+/.test(Ys.userAgent)||Ys.maxTouchPoints>2);var un={mac:vR||/Mac/.test(Ys.platform),windows:/Win/.test(Ys.platform),linux:/Linux|X11/.test(Ys.platform),ie:mb,ie_version:fR?XD.documentMode||6:ZD?+ZD[1]:KD?+KD[1]:0,gecko:pR,gecko_version:pR?+(/Firefox\/(\d+)/.exec(Ys.userAgent)||[0,0])[1]:0,chrome:!!QD,chrome_version:QD?+QD[1]:0,ios:vR,android:/Android\b/.test(Ys.userAgent),webkit:gR,safari:mR,webkit_version:gR?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=XD.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class Bu extends Kr{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){3==e.nodeType&&this.createDOM(e)}merge(e,t,r){return(!r||r instanceof Bu&&!(this.length-(t-e)+r.length>256))&&(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Bu(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new Do(this.dom,e)}domBoundsAround(e,t,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return JD(this.dom,e,t)}}class Ul extends Kr{constructor(e,t=[],r=0){super(),this.mark=e,this.children=t,this.length=r;for(let i of t)i.setParent(this)}setAttrs(e){if(lR(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e,t){this.dom?4&this.dirty&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,r,i,o,a){return!(r&&(!(r instanceof Ul&&r.mark.eq(this.mark))||e&&o<=0||t<this.length&&a<=0)||(hR(this,e,t,r?r.children:[],o-1,a-1),this.markDirty(),0))}split(e){let t=[],r=0,i=-1,o=0;for(let u of this.children){let h=r+u.length;h>e&&t.push(r<e?u.split(e-r):u),i<0&&r>=e&&(i=o),r=h,o++}let a=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new Ul(this.mark,t,a)}domAtPos(e){return wR(this,e)}coordsAt(e,t){return xR(this,e,t)}}function JD(n,e,t){let r=n.nodeValue.length;e>r&&(e=r);let i=e,o=e,a=0;0==e&&t<0||e==r&&t>=0?un.chrome||un.gecko||(e?(i--,a=1):o<r&&(o++,a=-1)):t<0?i--:o<r&&o++;let u=sp(n,i,o).getClientRects();if(!u.length)return oR;let h=u[(a?a<0:t>=0)?0:u.length-1];return un.safari&&!a&&0==h.width&&(h=Array.prototype.find.call(u,m=>m.width)||h),a?qD(h,a<0):h||null}class Vu extends Kr{constructor(e,t,r){super(),this.widget=e,this.length=t,this.side=r,this.prevWidget=null}static create(e,t,r){return new(e.customView||Vu)(e,t,r)}split(e){let t=Vu.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,r,i,o,a){return!(r&&(!(r instanceof Vu&&this.widget.compare(r.widget))||e>0&&o<=0||t<this.length&&a<=0)||(this.length=e+(r?r.length:0)+(this.length-t),0))}become(e){return e.length==this.length&&e instanceof Vu&&e.side==this.side&&this.widget.constructor==e.widget.constructor&&(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(0==this.length)return Cr.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,r=t&&t.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):Cr.empty}domAtPos(e){return(this.length?0==e:this.side>0)?Do.before(this.dom):Do.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let r=this.dom.getClientRects(),i=null;if(!r.length)return oR;for(let o=e>0?r.length-1:0;i=r[o],!(e>0?0==o:o==r.length-1||i.top<i.bottom);o+=e>0?-1:1);return this.length?i:qD(i,this.side>0)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class yR extends Vu{domAtPos(e){let{topView:t,text:r}=this.widget;return t?eC(e,0,t,r,(i,o)=>i.domAtPos(o),i=>new Do(r,Math.min(i,r.nodeValue.length))):new Do(r,Math.min(e,r.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){let{topView:r,text:i}=this.widget;return r?bR(e,t,r,i):Math.min(t,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){let{topView:r,text:i}=this.widget;return r?eC(e,t,r,i,(o,a,u)=>o.coordsAt(a,u),(o,a)=>JD(i,o,a)):JD(i,e,t)}destroy(){var e;super.destroy(),null===(e=this.widget.topView)||void 0===e||e.destroy()}get isEditable(){return!0}canReuseDOM(){return!0}}function eC(n,e,t,r,i,o){if(t instanceof Ul){for(let a=t.dom.firstChild;a;a=a.nextSibling){let u=Kr.get(a);if(!u)return o(n,e);let h=ip(a,r),m=u.length+(h?r.nodeValue.length:0);if(n<m||n==m&&u.getSide()<=0)return h?eC(n,e,u,r,i,o):i(u,n,e);n-=m}return i(t,t.length,-1)}return t.dom==r?o(n,e):i(t,n,e)}function bR(n,e,t,r){if(t instanceof Ul){let i=0;for(let o of t.children){let a=ip(o.dom,r);if(ip(o.dom,n))return i+(a?bR(n,e,o,r):o.localPosFromDOM(n,e));i+=a?r.nodeValue.length:o.length}}else if(t.dom==r)return Math.min(e,r.nodeValue.length);return t.localPosFromDOM(n,e)}class ph extends Kr{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof ph&&e.side==this.side}split(){return new ph(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Do.before(this.dom):Do.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){let t=this.dom.getBoundingClientRect(),r=function J8(n,e){let t=n.parent,r=t?t.children.indexOf(n):-1;for(;t&&r>=0;)if(e<0?r>0:r<t.children.length){let i=t.children[r+e];if(i instanceof Bu){let o=i.coordsAt(e<0?i.length:0,e);if(o)return o}r+=e}else{if(!(t instanceof Ul&&t.parent)){let i=t.dom.lastChild;if(i&&"BR"==i.nodeName)return i.getClientRects()[0];break}r=t.parent.children.indexOf(t)+(e<0?0:1),t=t.parent}}(this,this.side>0?-1:1);return r&&r.top<t.bottom&&r.bottom>t.top?{left:t.left,right:t.right,top:r.top,bottom:r.bottom}:t}get overrideDOMText(){return Cr.empty}get isHidden(){return!0}}function wR(n,e){let t=n.dom,{children:r}=n,i=0;for(let o=0;i<r.length;i++){let a=r[i],u=o+a.length;if(!(u==o&&a.getSide()<=0)){if(e>o&&e<u&&a.dom.parentNode==t)return a.domAtPos(e-o);if(e<=o)break;o=u}}for(let o=i;o>0;o--){let a=r[o-1];if(a.dom.parentNode==t)return a.domAtPos(a.length)}for(let o=i;o<r.length;o++){let a=r[o];if(a.dom.parentNode==t)return a.domAtPos(0)}return new Do(t,0)}function _R(n,e,t){let r,{children:i}=n;t>0&&e instanceof Ul&&i.length&&(r=i[i.length-1])instanceof Ul&&r.mark.eq(e.mark)?_R(r,e.children[0],t-1):(i.push(e),e.setParent(n)),n.length+=e.length}function xR(n,e,t){let r=null,i=-1,o=null,a=-1;!function u(m,v){for(let x=0,k=0;x<m.children.length&&k<=v;x++){let F=m.children[x],Y=k+F.length;Y>=v&&(F.children.length?u(F,v-k):(!o||o instanceof ph&&t>0)&&(Y>v||k==Y&&F.getSide()>0)?(o=F,a=v-k):(k<v||k==Y&&F.getSide()<0)&&(r=F,i=v-k)),k=Y}}(n,e);let h=(t<0?r:o)||r||o;return h?h.coordsAt(Math.max(0,h==r?i:a),t):function eW(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=km(e);return t[t.length-1]||null}(n)}function tC(n,e){for(let t in n)"class"==t&&e.class?e.class+=" "+n.class:"style"==t&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}function nC(n,e){if(n==e)return!0;if(!n||!e)return!1;let t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i of t)if(-1==r.indexOf(i)||n[i]!==e[i])return!1;return!0}function rC(n,e,t){let r=null;if(e)for(let i in e)t&&i in t||n.removeAttribute(r=i);if(t)for(let i in t)e&&e[i]==t[i]||n.setAttribute(r=i,t[i]);return!!r}Bu.prototype.children=Vu.prototype.children=ph.prototype.children=YD;class Lc{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}get isHidden(){return!1}destroy(e){}}var zr=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(zr||(zr={}));class dn extends fh{constructor(e,t,r,i){super(),this.startSide=e,this.endSide=t,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new vb(e)}static widget(e){let t=e.side||0,r=!!e.block;return t+=r?t>0?3e8:-4e8:t>0?1e8:-1e8,new gh(e,t,t,r,e.widget||null,!1)}static replace(e){let r,i,t=!!e.block;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:o,end:a}=ER(e,t);r=(o?t?-3e8:-1:5e8)-1,i=1+(a?t?2e8:1:-6e8)}return new gh(e,r,i,t,e.widget||null,!0)}static line(e){return new Om(e)}static set(e,t=!1){return fi.of(e,t)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}dn.none=fi.empty;class vb extends dn{constructor(e){let{start:t,end:r}=ER(e);super(t?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof vb&&this.tagName==e.tagName&&this.class==e.class&&nC(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}vb.prototype.point=!1;class Om extends dn{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Om&&this.spec.class==e.spec.class&&nC(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Om.prototype.mapMode=as.TrackBefore,Om.prototype.point=!0;class gh extends dn{constructor(e,t,r,i,o,a){super(t,r,o,e),this.block=i,this.isReplace=a,this.mapMode=i?t<=0?as.TrackBefore:as.TrackAfter:as.TrackDel}get type(){return this.startSide<this.endSide?zr.WidgetRange:this.startSide<=0?zr.WidgetBefore:zr.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof gh&&function tW(n,e){return n==e||!!(n&&e&&n.compare(e))}(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}function ER(n,e=!1){let{inclusiveStart:t,inclusiveEnd:r}=n;return null==t&&(t=n.inclusive),null==r&&(r=n.inclusive),{start:t??e,end:r??e}}function iC(n,e,t,r=0){let i=t.length-1;i>=0&&t[i]+r>=n?t[i]=Math.max(t[i],e):t.push(n,e)}gh.prototype.point=!0;class cs extends Kr{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,r,i,o,a){if(r){if(!(r instanceof cs))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),hR(this,e,t,r?r.children:[],o,a),!0}split(e){let t=new cs;if(t.breakAfter=this.breakAfter,0==this.length)return t;let{i:r,off:i}=this.childPos(e);i&&(t.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let o=r;o<this.children.length;o++)t.append(this.children[o],0);for(;r>0&&0==this.children[r-1].length;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){nC(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){_R(this,e,t)}addLineDeco(e){let t=e.spec.attributes,r=e.spec.class;t&&(this.attrs=tC(t,this.attrs||{})),r&&(this.attrs=tC({class:r},this.attrs||{}))}domAtPos(e){return wR(this,e)}reuseDOM(e){"DIV"==e.nodeName&&(this.setDOM(e),this.dirty|=6)}sync(e,t){var r;this.dom?4&this.dirty&&(lR(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(rC(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let i=this.dom.lastChild;for(;i&&Kr.get(i)instanceof Ul;)i=i.lastChild;if(!(i&&this.length&&("BR"==i.nodeName||0!=(null===(r=Kr.get(i))||void 0===r?void 0:r.isEditable)||un.ios&&this.children.some(o=>o instanceof Bu)))){let o=document.createElement("BR");o.cmIgnore=!0,this.dom.appendChild(o)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let t,e=0;for(let r of this.children){if(!(r instanceof Bu)||/[^ -~]/.test(r.text))return null;let i=km(r.dom);if(1!=i.length)return null;e+=i[0].width,t=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let r=xR(this,e,t);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,o=r.bottom-r.top;if(Math.abs(o-i.lineHeight)<2&&i.textHeight<o){let a=(o-i.textHeight)/2;return{top:r.top+a,bottom:r.bottom-a,left:r.left,right:r.left}}}return r}become(e){return!1}get type(){return zr.Text}static find(e,t){for(let r=0,i=0;r<e.children.length;r++){let o=e.children[r],a=i+o.length;if(a>=t){if(o instanceof cs)return o;if(a>t)break}i=a+o.breakAfter}return null}}class mh extends Kr{constructor(e,t,r){super(),this.widget=e,this.length=t,this.type=r,this.breakAfter=0,this.prevWidget=null}merge(e,t,r,i,o,a){return!(r&&(!(r instanceof mh&&this.widget.compare(r.widget))||e>0&&o<=0||t<this.length&&a<=0)||(this.length=e+(r?r.length:0)+(this.length-t),0))}domAtPos(e){return 0==e?Do.before(this.dom):Do.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let r=new mh(this.widget,t,this.type);return r.breakAfter=this.breakAfter,r}get children(){return YD}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Cr.empty}domBoundsAround(){return null}become(e){return e instanceof mh&&e.type==this.type&&e.widget.constructor==this.widget.constructor&&(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class oC{constructor(e,t,r,i){this.doc=e,this.pos=t,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof mh&&e.type==zr.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new cs),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(yb(new ph(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(e,t,r){for(;e>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:a,done:u}=this.cursor.next(this.skip);if(this.skip=0,u)throw new Error("Ran out of text content when drawing inline views");if(a){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}this.text=o,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-r)),this.getLine().append(yb(new Bu(this.text.slice(this.textOff,this.textOff+i)),t),r),this.atCursorPos=!0,this.textOff+=i,e-=i,r=0}}span(e,t,r,i){this.buildText(t-e,r,i),this.pos=t,this.openStart<0&&(this.openStart=i)}point(e,t,r,i,o,a){if(this.disallowBlockEffectsFor[a]&&r instanceof gh){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let u=t-e;if(r instanceof gh)if(r.block){let{type:h}=r;h==zr.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new mh(r.widget||new DR("div"),u,h))}else{let h=Vu.create(r.widget||new DR("span"),u,u?0:r.startSide),m=this.atCursorPos&&!h.isEditable&&o<=i.length&&(e<t||r.startSide>0),v=!h.isEditable&&(e<t||o>i.length||r.startSide<=0),x=this.getLine();2==this.pendingBuffer&&!m&&!h.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),m&&(x.append(yb(new ph(1),i),o),o=i.length+Math.max(0,o-i.length)),x.append(yb(h,i),o),this.atCursorPos=v,this.pendingBuffer=v?e<t||o>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);u&&(this.textOff+u<=this.text.length?this.textOff+=u:(this.skip+=u-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=o)}static build(e,t,r,i,o){let a=new oC(e,t,r,o);return a.openEnd=fi.spans(i,t,r,a),a.openStart<0&&(a.openStart=a.openEnd),a.finish(a.openEnd),a}}function yb(n,e){for(let t of e)n=new Ul(t,[n],n.length);return n}class DR extends Lc{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}const CR=ln.define(),SR=ln.define(),MR=ln.define(),AR=ln.define(),sC=ln.define(),TR=ln.define(),kR=ln.define(),IR=ln.define({combine:n=>n.some(e=>e)}),OR=ln.define({combine:n=>n.some(e=>e)});class bb{constructor(e,t="nearest",r="nearest",i=5,o=5){this.range=e,this.y=t,this.x=r,this.yMargin=i,this.xMargin=o}map(e){return e.empty?this:new bb(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const RR=Qn.define({map:(n,e)=>n.map(e)});function Xs(n,e,t){let r=n.facet(AR);r.length?r[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const wb=ln.define({combine:n=>!n.length||n[0]});let nW=0;const Rm=ln.define();class _i{constructor(e,t,r,i){this.id=e,this.create=t,this.domEventHandlers=r,this.extension=i(this)}static define(e,t){const{eventHandlers:r,provide:i,decorations:o}=t||{};return new _i(nW++,e,r,a=>{let u=[Rm.of(a)];return o&&u.push(Pm.of(h=>{let m=h.plugin(a);return m?o(m):dn.none})),i&&u.push(i(a)),u})}static fromClass(e,t){return _i.define(r=>new e(r),t)}}class aC{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(r){if(Xs(t.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Xs(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(null!==(t=this.value)&&void 0!==t&&t.destroy)try{this.value.destroy()}catch(r){Xs(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const PR=ln.define(),_b=ln.define(),Pm=ln.define(),NR=ln.define(),LR=ln.define(),Nm=ln.define();class nl{constructor(e,t,r,i){this.fromA=e,this.toA=t,this.fromB=r,this.toB=i}join(e){return new nl(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,r=this;for(;t>0;t--){let i=e[t-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(t-1,1)}}return e.splice(t,0,r),e}static extendWithRanges(e,t){if(0==t.length)return e;let r=[];for(let i=0,o=0,a=0,u=0;;i++){let h=i==e.length?null:e[i],m=a-u,v=h?h.fromB:1e9;for(;o<t.length&&t[o]<v;){let k=t[o+1],F=Math.max(u,t[o]),Y=Math.min(v,k);if(F<=Y&&new nl(F+m,Y+m,F,Y).addToSet(r),k>v)break;o+=2}if(!h)return r;new nl(h.fromA,h.toA,h.fromB,h.toB).addToSet(r),a=h.toA,u=h.toB}}}class xb{constructor(e,t,r){this.view=e,this.state=t,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=Xi.empty(this.startState.doc.length);for(let o of r)this.changes=this.changes.compose(o.changes);let i=[];this.changes.iterChangedRanges((o,a,u,h)=>i.push(new nl(o,a,u,h))),this.changedRanges=i}static create(e,t,r){return new xb(e,t,r)}get viewportChanged(){return(4&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(10&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return 0==this.flags&&0==this.transactions.length}}var pi=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(pi||(pi={}));const lC=pi.LTR,rW=pi.RTL;function FR(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const iW=FR("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),oW=FR("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),cC=Object.create(null),Gl=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);cC[e]=t,cC[t]=-e}function sW(n){return n<=247?iW[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?oW[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8203?256:64336<=n&&n<=65023?4:8204==n?256:1}const aW=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class lp{constructor(e,t,r){this.from=e,this.to=t,this.level=r}get dir(){return this.level%2?rW:lC}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,r,i){let o=-1;for(let a=0;a<e.length;a++){let u=e[a];if(u.from<=t&&u.to>=t){if(u.level==r)return a;(o<0||(0!=i?i<0?u.from<t:u.to>t:e[o].level>u.level))&&(o=a)}}if(o<0)throw new RangeError("Index out of range");return o}}const gi=[];function VR(n){return[new lp(0,n,0)]}let HR="";function zR(n,e,t,r,i){var o;let a=r.head-n.from,u=-1;if(0==a){if(!i||!n.length)return null;e[0].level!=t&&(a=e[0].side(!1,t),u=0)}else if(a==n.length){if(i)return null;let k=e[e.length-1];k.level!=t&&(a=k.side(!0,t),u=e.length-1)}u<0&&(u=lp.find(e,a,null!==(o=r.bidiLevel)&&void 0!==o?o:-1,r.assoc));let h=e[u];a==h.side(i,t)&&(h=e[u+=i?1:-1],a=h.side(!i,t));let m=i==(h.dir==t),v=ss(n.text,a,m);if(HR=n.text.slice(Math.min(a,v),Math.max(a,v)),v!=h.side(i,t))return Ct.cursor(v+n.from,m?-1:1,h.level);let x=u==(i?e.length-1:0)?null:e[u+(i?1:-1)];return x||h.level==t?x&&x.level<h.level?Ct.cursor(x.side(!i,t)+n.from,i?1:-1,x.level):Ct.cursor(v+n.from,i?-1:1,h.level):Ct.cursor(i?n.to:n.from,i?-1:1,t)}class jR{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(ls.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+="\uffff"}readRange(e,t){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i),this.readNode(i);let o=i.nextSibling;if(o==t)break;let a=Kr.get(i),u=Kr.get(o);(a&&u?a.breakAfter:(a?a.breakAfter:UR(i))||UR(o)&&("BR"!=i.nodeName||i.cmIgnore))&&this.lineBreak(),i=o}return this.findPointBefore(r,t),this}readTextNode(e){let t=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,t.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let u,o=-1,a=1;if(this.lineSeparator?(o=t.indexOf(this.lineSeparator,r),a=this.lineSeparator.length):(u=i.exec(t))&&(o=u.index,a=u[0].length),this.append(t.slice(r,o<0?t.length:o)),o<0)break;if(this.lineBreak(),a>1)for(let h of this.points)h.node==e&&h.pos>this.text.length&&(h.pos-=a-1);r=o+a}}readNode(e){if(e.cmIgnore)return;let t=Kr.get(e),r=t&&t.overrideDOMText;if(null!=r){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else 3==e.nodeType?this.readTextNode(e):"BR"==e.nodeName?e.nextSibling&&this.lineBreak():1==e.nodeType&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==t&&(r.pos=this.text.length)}findPointInside(e,t){for(let r of this.points)(3==e.nodeType?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+Math.min(t,r.offset))}}function UR(n){return 1==n.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}class GR{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class $R extends Kr{constructor(e){super(),this.view=e,this.compositionDeco=dn.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new cs],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new nl(0,0,0,e.state.doc.length)],0)}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every(({fromA:a,toA:u})=>u<this.minWidthFrom||a>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=dn.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=function cW(n,e){let t=qR(n);if(!t)return dn.none;let{from:r,to:i,node:o,text:a}=t,u=e.mapPos(r,1),h=Math.max(u,e.mapPos(i,-1)),{state:m}=n,v=3==o.nodeType?o.nodeValue:new jR([],m).readRange(o.firstChild,null).text;if(h-u<v.length)if(m.doc.sliceString(u,Math.min(m.doc.length,u+v.length),"\uffff")==v)h=u+v.length;else{if(m.doc.sliceString(Math.max(0,h-v.length),h,"\uffff")!=v)return dn.none;u=h-v.length}else if(m.doc.sliceString(u,h,"\uffff")!=v)return dn.none;let x=Kr.get(o);return x instanceof yR?x=x.widget.topView:x&&(x.parent=null),dn.set(dn.replace({widget:new uW(o,a,x),inclusive:!0}).range(u,h))}(this.view,e.changes)),(un.ie||un.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=function fW(n,e,t){let r=new hW;return fi.compare(n,e,t,r),r.changes}(this.decorations,this.updateDeco(),e.changes);return t=nl.extendWithRanges(t,o),(0!=this.dirty||0!=t.length)&&(this.updateInner(t,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=un.chrome||un.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.dirty=0,o&&(o.written||r.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""});let i=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof mh&&o.widget instanceof WR&&i.push(o.dom);r.updateGaps(i)}updateChildren(e,t){let r=this.childCursor(t);for(let i=e.length-1;;i--){let o=i>=0?e[i]:null;if(!o)break;let{fromA:a,toA:u,fromB:h,toB:m}=o,{content:v,breakAtStart:x,openStart:k,openEnd:F}=oC.build(this.view.state.doc,h,m,this.decorations,this.dynamicDecorationMap),{i:Y,off:ie}=r.findPos(u,1),{i:me,off:Oe}=r.findPos(a,-1);dR(this,me,Oe,Y,ie,v,x,k,F)}}updateSelection(e=!1,t=!1){if((e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange(),!t&&!this.mayControlSelection())return;let r=this.forceSelection;this.forceSelection=!1;let i=this.view.state.selection.main,o=this.domAtPos(i.anchor),a=i.empty?o:this.domAtPos(i.head);if(un.gecko&&i.empty&&!this.compositionDeco.size&&function lW(n){return 1==n.node.nodeType&&n.node.firstChild&&(0==n.offset||"false"==n.node.childNodes[n.offset-1].contentEditable)&&(n.offset==n.node.childNodes.length||"false"==n.node.childNodes[n.offset].contentEditable)}(o)){let h=document.createTextNode("");this.view.observer.ignore(()=>o.node.insertBefore(h,o.node.childNodes[o.offset]||null)),o=a=new Do(h,0),r=!0}let u=this.view.observer.selectionRange;(r||!u.focusNode||!pb(o.node,o.offset,u.anchorNode,u.anchorOffset)||!pb(a.node,a.offset,u.focusNode,u.focusOffset))&&(this.view.observer.ignore(()=>{un.android&&un.chrome&&this.dom.contains(u.focusNode)&&function pW(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(1==t.nodeType&&"false"==t.contentEditable)return!0;return!1}(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let h=hb(this.view.root);if(h)if(i.empty){if(un.gecko){let m=function dW(n,e){return 1!=n.nodeType?0:(e&&"false"==n.childNodes[e-1].contentEditable?1:0)|(e<n.childNodes.length&&"false"==n.childNodes[e].contentEditable?2:0)}(o.node,o.offset);if(m&&3!=m){let v=YR(o.node,o.offset,1==m?1:-1);v&&(o=new Do(v,1==m?0:v.nodeValue.length))}}h.collapse(o.node,o.offset),null!=i.bidiLevel&&null!=u.cursorBidiLevel&&(u.cursorBidiLevel=i.bidiLevel)}else if(h.extend){h.collapse(o.node,o.offset);try{h.extend(a.node,a.offset)}catch{}}else{let m=document.createRange();i.anchor>i.head&&([o,a]=[a,o]),m.setEnd(a.node,a.offset),m.setStart(o.node,o.offset),h.removeAllRanges(),h.addRange(m)}}),this.view.observer.setSelectionRange(o,a)),this.impreciseAnchor=o.precise?null:new Do(u.anchorNode,u.anchorOffset),this.impreciseHead=a.precise?null:new Do(u.focusNode,u.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let{view:e}=this,t=e.state.selection.main,r=hb(e.root),{anchorNode:i,anchorOffset:o}=e.observer.selectionRange;if(!(r&&t.empty&&t.assoc&&r.modify))return;let a=cs.find(this,t.head);if(!a)return;let u=a.posAtStart;if(t.head==u||t.head==u+a.length)return;let h=this.coordsAt(t.head,-1),m=this.coordsAt(t.head,1);if(!h||!m||h.bottom>m.top)return;let v=this.domAtPos(t.head+t.assoc);r.collapse(v.node,v.offset),r.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let x=e.observer.selectionRange;e.docView.posFromDOM(x.anchorNode,x.anchorOffset)!=t.from&&r.collapse(i,o)}mayControlSelection(){let e=this.view.root.activeElement;return e==this.dom||fb(this.dom,this.view.observer.selectionRange)&&!(e&&this.dom.contains(e))}nearest(e){for(let t=e;t;){let r=Kr.get(t);if(r&&r.rootView==this)return r;t=t.parentNode}return null}posFromDOM(e,t){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,t)+r.posAtStart}domAtPos(e){let{i:t,off:r}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let i=this.children[t];if(r<i.length||i instanceof cs)break;t++,r=0}return this.children[t].domAtPos(r)}coordsAt(e,t){for(let r=this.length,i=this.children.length-1;;i--){let o=this.children[i],a=r-o.breakAfter-o.length;if(e>a||e==a&&o.type!=zr.WidgetBefore&&o.type!=zr.WidgetAfter&&(!i||2==t||this.children[i-1].breakAfter||this.children[i-1].type==zr.WidgetBefore&&t>-2))return o.coordsAt(e-a,t);r=a}}measureVisibleLineHeights(e){let t=[],{from:r,to:i}=e,o=this.view.contentDOM.clientWidth,a=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,u=-1,h=this.view.textDirection==pi.LTR;for(let m=0,v=0;v<this.children.length;v++){let x=this.children[v],k=m+x.length;if(k>i)break;if(m>=r){let F=x.dom.getBoundingClientRect();if(t.push(F.height),a){let Y=x.dom.lastChild,ie=Y?km(Y):[];if(ie.length){let me=ie[ie.length-1],Oe=h?me.right-F.left:F.right-me.left;Oe>u&&(u=Oe,this.minWidth=o,this.minWidthFrom=m,this.minWidthTo=k)}}}m=k+x.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return"rtl"==getComputedStyle(this.children[t].dom).direction?pi.RTL:pi.LTR}measureTextSize(){for(let o of this.children)if(o instanceof cs){let a=o.measureTextSize();if(a)return a}let t,r,i,e=document.createElement("div");return e.className="cm-line",e.style.width="99999px",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let o=km(e.firstChild)[0];t=e.getBoundingClientRect().height,r=o?o.width/27:7,i=o?o.height:t,e.remove()}),{lineHeight:t,charWidth:r,textHeight:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new uR(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let r=0,i=0;;i++){let o=i==t.viewports.length?null:t.viewports[i],a=o?o.from-1:this.length;if(a>r){let u=t.lineBlockAt(a).bottom-t.lineBlockAt(r).top;e.push(dn.replace({widget:new WR(u),block:!0,inclusive:!0,isBlockGap:!0}).range(r,a))}if(!o)break;r=o.to+1}return dn.set(e)}updateDeco(){let e=this.view.state.facet(Pm).map((t,r)=>(this.dynamicDecorationMap[r]="function"==typeof t)?t(this.view):t);for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let i,{range:t}=e,r=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1);if(!r)return;!t.empty&&(i=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let o=0,a=0,u=0,h=0;for(let v of this.view.state.facet(LR).map(x=>x(this.view)))if(v){let{left:x,right:k,top:F,bottom:Y}=v;null!=x&&(o=Math.max(o,x)),null!=k&&(a=Math.max(a,k)),null!=F&&(u=Math.max(u,F)),null!=Y&&(h=Math.max(h,Y))}!function q8(n,e,t,r,i,o,a,u){let h=n.ownerDocument,m=h.defaultView||window;for(let v=n;v;)if(1==v.nodeType){let x,k=v==h.body;if(k)x=W8(m);else{if(v.scrollHeight<=v.clientHeight&&v.scrollWidth<=v.clientWidth){v=v.assignedSlot||v.parentNode;continue}let ie=v.getBoundingClientRect();x={left:ie.left,right:ie.left+v.clientWidth,top:ie.top,bottom:ie.top+v.clientHeight}}let F=0,Y=0;if("nearest"==i)e.top<x.top?(Y=-(x.top-e.top+a),t>0&&e.bottom>x.bottom+Y&&(Y=e.bottom-x.bottom+Y+a)):e.bottom>x.bottom&&(Y=e.bottom-x.bottom+a,t<0&&e.top-Y<x.top&&(Y=-(x.top+Y-e.top+a)));else{let ie=e.bottom-e.top,me=x.bottom-x.top;Y=("center"==i&&ie<=me?e.top+ie/2-me/2:"start"==i||"center"==i&&t<0?e.top-a:e.bottom-me+a)-x.top}if("nearest"==r?e.left<x.left?(F=-(x.left-e.left+o),t>0&&e.right>x.right+F&&(F=e.right-x.right+F+o)):e.right>x.right&&(F=e.right-x.right+o,t<0&&e.left<x.left+F&&(F=-(x.left+F-e.left+o))):F=("center"==r?e.left+(e.right-e.left)/2-(x.right-x.left)/2:"start"==r==u?e.left-o:e.right-(x.right-x.left)+o)-x.left,F||Y)if(k)m.scrollBy(F,Y);else{let ie=0,me=0;if(Y){let Oe=v.scrollTop;v.scrollTop+=Y,me=v.scrollTop-Oe}if(F){let Oe=v.scrollLeft;v.scrollLeft+=F,ie=v.scrollLeft-Oe}e={left:e.left-ie,top:e.top-me,right:e.right-ie,bottom:e.bottom-me},ie&&Math.abs(ie-F)<1&&(r="nearest"),me&&Math.abs(me-Y)<1&&(i="nearest")}if(k)break;v=v.assignedSlot||v.parentNode}else{if(11!=v.nodeType)break;v=v.host}}(this.view.scrollDOM,{left:r.left-o,top:r.top-u,right:r.right+a,bottom:r.bottom+h},t.head<t.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==pi.LTR)}}class WR extends Lc{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function qR(n){let e=n.observer.selectionRange,t=e.focusNode&&YR(e.focusNode,e.focusOffset,0);if(!t)return null;let r=n.docView.nearest(t);if(!r)return null;if(r instanceof cs){let i=t;for(;i.parentNode!=r.dom;)i=i.parentNode;let o=i.previousSibling;for(;o&&!Kr.get(o);)o=o.previousSibling;let a=o?Kr.get(o).posAtEnd:r.posAtStart;return{from:a,to:a,node:i,text:t}}{for(;;){let{parent:o}=r;if(!o)return null;if(o instanceof cs)break;r=o}let i=r.posAtStart;return{from:i,to:i+r.length,node:r.dom,text:t}}}class uW extends Lc{constructor(e,t,r){super(),this.top=e,this.text=t,this.topView=r}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return yR}}function YR(n,e,t){if(t<=0)for(let r=n,i=e;;){if(3==r.nodeType)return r;if(!(1==r.nodeType&&i>0))break;r=r.childNodes[i-1],i=Im(r)}if(t>=0)for(let r=n,i=e;;){if(3==r.nodeType)return r;if(!(1==r.nodeType&&i<r.childNodes.length&&t>=0))break;r=r.childNodes[i],i=0}return null}class hW{constructor(){this.changes=[]}compareRange(e,t){iC(e,t,this.changes)}comparePoint(e,t){iC(e,t,this.changes)}}function mW(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function vW(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function uC(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function XR(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function KR(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function dC(n,e,t){let r,i,o,a,h,m,v,x,u=!1;for(let Y=n.firstChild;Y;Y=Y.nextSibling){let ie=km(Y);for(let me=0;me<ie.length;me++){let Oe=ie[me];i&&uC(i,Oe)&&(Oe=XR(KR(Oe,i.bottom),i.top));let Ke=mW(e,Oe),Ge=vW(t,Oe);if(0==Ke&&0==Ge)return 3==Y.nodeType?ZR(Y,e,t):dC(Y,e,t);if(!r||a>Ge||a==Ge&&o>Ke){r=Y,i=Oe,o=Ke,a=Ge;let ot=Ge?t<Oe.top?-1:1:Ke?e<Oe.left?-1:1:0;u=!ot||(ot>0?me<ie.length-1:me>0)}0==Ke?t>Oe.bottom&&(!v||v.bottom<Oe.bottom)?(h=Y,v=Oe):t<Oe.top&&(!x||x.top>Oe.top)&&(m=Y,x=Oe):v&&uC(v,Oe)?v=KR(v,Oe.bottom):x&&uC(x,Oe)&&(x=XR(x,Oe.top))}}if(v&&v.bottom>=t?(r=h,i=v):x&&x.top<=t&&(r=m,i=x),!r)return{node:n,offset:0};let k=Math.max(i.left,Math.min(i.right,e));return 3==r.nodeType?ZR(r,k,t):u&&"false"!=r.contentEditable?dC(r,k,t):{node:n,offset:Array.prototype.indexOf.call(n.childNodes,r)+(e>=(i.left+i.right)/2?1:0)}}function ZR(n,e,t){let r=n.nodeValue.length,i=-1,o=1e9,a=0;for(let u=0;u<r;u++){let h=sp(n,u,u+1).getClientRects();for(let m=0;m<h.length;m++){let v=h[m];if(v.top==v.bottom)continue;a||(a=e-v.left);let x=(v.top>t?v.top-t:t-v.bottom)-1;if(v.left-1<=e&&v.right+1>=e&&x<o){let k=e>=(v.left+v.right)/2,F=k;if((un.chrome||un.gecko)&&sp(n,u).getBoundingClientRect().left==v.right&&(F=!k),x<=0)return{node:n,offset:u+(F?1:0)};i=u+(F?1:0),o=x}}}return{node:n,offset:i>-1?i:a>0?n.nodeValue.length:0}}function QR(n,e,t,r=-1){var i,o;let h,a=n.contentDOM.getBoundingClientRect(),u=a.top+n.viewState.paddingTop,{docHeight:m}=n.viewState,{x:v,y:x}=e,k=x-u;if(k<0)return 0;if(k>m)return n.state.doc.length;for(let ot=n.defaultLineHeight/2,wt=!1;h=n.elementAtHeight(k),h.type!=zr.Text;)for(;k=r>0?h.bottom+ot:h.top-ot,!(k>=0&&k<=m);){if(wt)return t?null:0;wt=!0,r=-r}x=u+k;let F=h.from;if(F<n.viewport.from)return 0==n.viewport.from?0:t?null:JR(n,a,h,v,x);if(F>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:JR(n,a,h,v,x);let Y=n.dom.ownerDocument,ie=n.root.elementFromPoint?n.root:Y,me=ie.elementFromPoint(v,x);me&&!n.contentDOM.contains(me)&&(me=null),me||(v=Math.max(a.left+1,Math.min(a.right-1,v)),me=ie.elementFromPoint(v,x),me&&!n.contentDOM.contains(me)&&(me=null));let Oe,Ke=-1;if(me&&0!=(null===(i=n.docView.nearest(me))||void 0===i?void 0:i.isEditable))if(Y.caretPositionFromPoint){let ot=Y.caretPositionFromPoint(v,x);ot&&({offsetNode:Oe,offset:Ke}=ot)}else if(Y.caretRangeFromPoint){let ot=Y.caretRangeFromPoint(v,x);ot&&(({startContainer:Oe,startOffset:Ke}=ot),(!n.contentDOM.contains(Oe)||un.safari&&function yW(n,e,t){let r;if(3!=n.nodeType||e!=(r=n.nodeValue.length))return!1;for(let i=n.nextSibling;i;i=i.nextSibling)if(1!=i.nodeType||"BR"!=i.nodeName)return!1;return sp(n,r-1,r).getBoundingClientRect().left>t}(Oe,Ke,v)||un.chrome&&function bW(n,e,t){if(0!=e)return!1;for(let i=n;;){let o=i.parentNode;if(!o||1!=o.nodeType||o.firstChild!=i)return!1;if(o.classList.contains("cm-line"))break;i=o}return t-(1==n.nodeType?n.getBoundingClientRect():sp(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect()).left>5}(Oe,Ke,v))&&(Oe=void 0))}if(!Oe||!n.docView.dom.contains(Oe)){let ot=cs.find(n.docView,F);if(!ot)return k>h.top+h.height/2?h.to:h.from;({node:Oe,offset:Ke}=dC(ot.dom,v,x))}let Ge=n.docView.nearest(Oe);if(!Ge)return null;if(Ge.isWidget&&1==(null===(o=Ge.dom)||void 0===o?void 0:o.nodeType)){let ot=Ge.dom.getBoundingClientRect();return e.y<ot.top||e.y<=ot.bottom&&e.x<=(ot.left+ot.right)/2?Ge.posAtStart:Ge.posAtEnd}return Ge.localPosFromDOM(Oe,Ke)+Ge.posAtStart}function JR(n,e,t,r,i){let o=Math.round((r-e.left)*n.defaultCharacterWidth);n.lineWrapping&&t.height>1.5*n.defaultLineHeight&&(o+=Math.floor((i-t.top)/n.defaultLineHeight)*n.viewState.heightOracle.lineLength);let a=n.state.sliceDoc(t.from,t.to);return t.from+UD(a,o,n.state.tabSize)}function eP(n,e,t,r){let i=n.state.doc.lineAt(e.head),o=n.bidiSpans(i),a=n.textDirectionAt(i.from);for(let u=e,h=null;;){let m=zR(i,o,a,u,t),v=HR;if(!m){if(i.number==(t?n.state.doc.lines:1))return u;v="\n",i=n.state.doc.line(i.number+(t?1:-1)),o=n.bidiSpans(i),m=Ct.cursor(t?i.from:i.to)}if(h){if(!h(v))return u}else{if(!r)return m;h=r(v)}u=m}}function hC(n,e,t){let r=n.state.facet(NR).map(i=>i(n));for(;;){let i=!1;for(let o of r)o.between(t.from-1,t.from+1,(a,u,h)=>{t.from>a&&t.from<u&&(t=e.head>t.from?Ct.cursor(a,1):Ct.cursor(u,-1),i=!0)});if(!i)return t}}class EW{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null;let t=(r,i)=>{this.ignoreDuringComposition(i)||"keydown"==i.type&&this.keydown(e,i)||(this.mustFlushObserver(i)&&e.observer.forceFlush(),this.runCustomHandlers(i.type,e,i)?i.preventDefault():r(e,i))};for(let r in Ki){let i=Ki[r];e.contentDOM.addEventListener(r,o=>{rP(e,o)&&t(i,o)},fC[r]),this.registeredEvents.push(r)}e.scrollDOM.addEventListener("mousedown",r=>{if(r.target==e.scrollDOM&&r.clientY>e.contentDOM.getBoundingClientRect().bottom&&(t(Ki.mousedown,r),!r.defaultPrevented&&2==r.button)){let i=e.contentDOM.style.minHeight;e.contentDOM.style.minHeight="100%",setTimeout(()=>e.contentDOM.style.minHeight=i,200)}}),un.chrome&&102==un.chrome_version&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,un.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,t){var r;let i;this.customHandlers=[];for(let o of t)if(i=null===(r=o.update(e).spec)||void 0===r?void 0:r.domEventHandlers){this.customHandlers.push({plugin:o.value,handlers:i});for(let a in i)this.registeredEvents.indexOf(a)<0&&"scroll"!=a&&(this.registeredEvents.push(a),e.contentDOM.addEventListener(a,u=>{rP(e,u)&&this.runCustomHandlers(a,e,u)&&u.preventDefault()}))}}runCustomHandlers(e,t,r){for(let i of this.customHandlers){let o=i.handlers[e];if(o)try{if(o.call(i.plugin,r,t)||r.defaultPrevented)return!0}catch(a){Xs(t.state,a)}}return!1}runScrollHandlers(e,t){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let r of this.customHandlers){let i=r.handlers.scroll;if(i)try{i.call(r.plugin,t,e)}catch(o){Xs(e.state,o)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),9==t.keyCode&&Date.now()<this.lastEscPress+2e3)return!0;if(un.android&&un.chrome&&!t.synthetic&&(13==t.keyCode||8==t.keyCode))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let r;return!(!un.ios||t.synthetic||t.altKey||t.metaKey||!((r=tP.find(i=>i.keyCode==t.keyCode))&&!t.ctrlKey||DW.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)||(this.pendingIOSKey=r||t,setTimeout(()=>this.flushIOSKey(e),250),0))}flushIOSKey(e){let t=this.pendingIOSKey;return!!t&&(this.pendingIOSKey=void 0,ap(e.contentDOM,t.key,t.keyCode))}ignoreDuringComposition(e){return!!/^key/.test(e.type)&&(this.composing>0||!!(un.safari&&!un.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))}mustFlushObserver(e){return"keydown"==e.type&&229!=e.keyCode}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const tP=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],DW="dthko",nP=[16,17,18,20,91,92,224,225];function Db(n){return.7*Math.max(0,n)+8}class CW{constructor(e,t,r,i){this.view=e,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParent=function Y8(n){let e=n.ownerDocument;for(let t=n.parentNode;t&&t!=e.body;)if(1==t.nodeType){if(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth)return t;t=t.assignedSlot||t.parentNode}else{if(11!=t.nodeType)break;t=t.host}return null}(e.contentDOM);let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(ls.allowMultipleSelections)&&function SW(n,e){let t=n.state.facet(CR);return t.length?t[0](e):un.mac?e.metaKey:e.ctrlKey}(e,t),this.dragMove=function MW(n,e){let t=n.state.facet(SR);return t.length?t[0](e):un.mac?!e.altKey:!e.ctrlKey}(e,t),this.dragging=!(!function AW(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let r=hb(n.root);if(!r||0==r.rangeCount)return!0;let i=r.getRangeAt(0).getClientRects();for(let o=0;o<i.length;o++){let a=i[o];if(a.left<=e.clientX&&a.right>=e.clientX&&a.top<=e.clientY&&a.bottom>=e.clientY)return!0}return!1}(e,t)||1!=fP(t))&&null}start(e){!1===this.dragging&&(e.preventDefault(),this.select(e))}move(e){var t;if(0==e.buttons)return this.destroy();if(!1!==this.dragging)return;this.select(this.lastEvent=e);let r=0,i=0,o=(null===(t=this.scrollParent)||void 0===t?void 0:t.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight};e.clientX<=o.left+6?r=-Db(o.left-e.clientX):e.clientX>=o.right-6&&(r=Db(e.clientX-o.right)),e.clientY<=o.top+6?i=-Db(o.top-e.clientY):e.clientY>=o.bottom-6&&(i=Db(e.clientY-o.bottom)),this.setScrollSpeed(r,i)}up(e){null==this.dragging&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),!1===this.dragging&&this.select(this.lastEvent)}select(e){let t=this.style.get(e,this.extend,this.multiple);(this.mustSelect||!t.eq(this.view.state.selection)||t.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:t,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function rP(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let r,t=e.target;t!=n.contentDOM;t=t.parentNode)if(!t||11==t.nodeType||(r=Kr.get(t))&&r.ignoreEvent(e))return!1;return!0}const Ki=Object.create(null),fC=Object.create(null),iP=un.ie&&un.ie_version<15||un.ios&&un.webkit_version<604;function oP(n,e){let r,{state:t}=n,i=1,o=t.toText(e),a=o.lines==t.selection.ranges.length;if(null!=pC&&t.selection.ranges.every(h=>h.empty)&&pC==o.toString()){let h=-1;r=t.changeByRange(m=>{let v=t.doc.lineAt(m.from);if(v.from==h)return{range:m};h=v.from;let x=t.toText((a?o.line(i++).text:e)+t.lineBreak);return{changes:{from:v.from,insert:x},range:Ct.cursor(m.from+x.length)}})}else r=a?t.changeByRange(h=>{let m=o.line(i++);return{changes:{from:h.from,to:h.to,insert:m.text},range:Ct.cursor(h.from+m.length)}}):t.replaceSelection(o);n.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}function sP(n,e,t,r){if(1==r)return Ct.cursor(e,t);if(2==r)return function gW(n,e,t=1){let r=n.charCategorizer(e),i=n.doc.lineAt(e),o=e-i.from;if(0==i.length)return Ct.cursor(e);0==o?t=1:o==i.length&&(t=-1);let a=o,u=o;t<0?a=ss(i.text,o,!1):u=ss(i.text,o);let h=r(i.text.slice(a,u));for(;a>0;){let m=ss(i.text,a,!1);if(r(i.text.slice(m,a))!=h)break;a=m}for(;u<i.length;){let m=ss(i.text,u);if(r(i.text.slice(u,m))!=h)break;u=m}return Ct.range(a+i.from,u+i.from)}(n.state,e,t);{let i=cs.find(n.docView,e),o=n.state.doc.lineAt(i?i.posAtEnd:e),u=i?i.posAtEnd:o.to;return u<n.state.doc.length&&u==o.to&&u++,Ct.range(i?i.posAtStart:o.from,u)}}Ki.keydown=(n,e)=>{n.inputState.setSelectionOrigin("select"),27==e.keyCode?n.inputState.lastEscPress=Date.now():nP.indexOf(e.keyCode)<0&&(n.inputState.lastEscPress=0)},Ki.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")},Ki.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")},fC.touchstart=fC.touchmove={passive:!0},Ki.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return;let t=null;for(let r of n.state.facet(MR))if(t=r(n,e),t)break;if(!t&&0==e.button&&(t=function OW(n,e){let t=cP(n,e),r=fP(e),i=n.state.selection;return{update(o){o.docChanged&&(t.pos=o.changes.mapPos(t.pos),i=i.map(o.changes))},get(o,a,u){let m,h=cP(n,o),v=sP(n,h.pos,h.bias,r);if(t.pos!=h.pos&&!a){let x=sP(n,t.pos,t.bias,r),k=Math.min(x.from,v.from),F=Math.max(x.to,v.to);v=k<v.from?Ct.range(k,F):Ct.range(F,k)}return a?i.replaceRange(i.main.extend(v.from,v.to)):u&&1==r&&i.ranges.length>1&&(m=function RW(n,e){for(let t=0;t<n.ranges.length;t++){let{from:r,to:i}=n.ranges[t];if(r<=e&&i>=e)return Ct.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}(i,h.pos))?m:u?i.addRange(v):Ct.create([v])}}}(n,e)),t){let r=n.root.activeElement!=n.contentDOM;n.inputState.startMouseSelection(new CW(n,e,t,r)),r&&n.observer.ignore(()=>sR(n.contentDOM)),n.inputState.mouseSelection&&n.inputState.mouseSelection.start(e)}};let aP=(n,e)=>n>=e.top&&n<=e.bottom,lP=(n,e,t)=>aP(e,t)&&n>=t.left&&n<=t.right;function kW(n,e,t,r){let i=cs.find(n.docView,e);if(!i)return 1;let o=e-i.posAtStart;if(0==o)return 1;if(o==i.length)return-1;let a=i.coordsAt(o,-1);if(a&&lP(t,r,a))return-1;let u=i.coordsAt(o,1);return u&&lP(t,r,u)?1:a&&aP(r,a)?-1:1}function cP(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:kW(n,t,e.clientX,e.clientY)}}const IW=un.ie&&un.ie_version<=11;let uP=null,dP=0,hP=0;function fP(n){if(!IW)return n.detail;let e=uP,t=hP;return uP=n,hP=Date.now(),dP=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(dP+1)%3:1}function pP(n,e,t,r){if(!t)return;let i=n.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:o}=n.inputState,a=r&&o&&o.dragging&&o.dragMove?{from:o.dragging.from,to:o.dragging.to}:null,u={from:i,insert:t},h=n.state.changes(a?[a,u]:u);n.focus(),n.dispatch({changes:h,selection:{anchor:h.mapPos(i,-1),head:h.mapPos(i,1)},userEvent:a?"move.drop":"input.drop"})}Ki.dragstart=(n,e)=>{let{selection:{main:t}}=n.state,{mouseSelection:r}=n.inputState;r&&(r.dragging=t),e.dataTransfer&&(e.dataTransfer.setData("Text",n.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove")},Ki.drop=(n,e)=>{if(!e.dataTransfer)return;if(n.state.readOnly)return e.preventDefault();let t=e.dataTransfer.files;if(t&&t.length){e.preventDefault();let r=Array(t.length),i=0,o=()=>{++i==t.length&&pP(n,e,r.filter(a=>null!=a).join(n.state.lineBreak),!1)};for(let a=0;a<t.length;a++){let u=new FileReader;u.onerror=o,u.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(u.result)||(r[a]=u.result),o()},u.readAsText(t[a])}}else pP(n,e,e.dataTransfer.getData("Text"),!0)},Ki.paste=(n,e)=>{if(n.state.readOnly)return e.preventDefault();n.observer.flush();let t=iP?null:e.clipboardData;t?(oP(n,t.getData("text/plain")||t.getData("text/uri-text")),e.preventDefault()):function TW(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),oP(n,t.value)},50)}(n)};let pC=null;Ki.copy=Ki.cut=(n,e)=>{let{text:t,ranges:r,linewise:i}=function NW(n){let e=[],t=[],r=!1;for(let i of n.selection.ranges)i.empty||(e.push(n.sliceDoc(i.from,i.to)),t.push(i));if(!e.length){let i=-1;for(let{from:o}of n.selection.ranges){let a=n.doc.lineAt(o);a.number>i&&(e.push(a.text),t.push({from:a.from,to:Math.min(n.doc.length,a.to+1)})),i=a.number}r=!0}return{text:e.join(n.lineBreak),ranges:t,linewise:r}}(n.state);if(!t&&!i)return;pC=i?t:null;let o=iP?null:e.clipboardData;o?(e.preventDefault(),o.clearData(),o.setData("text/plain",t)):function PW(n,e){let t=n.dom.parentNode;if(!t)return;let r=t.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),n.focus()},50)}(n,t),"cut"==e.type&&!n.state.readOnly&&n.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})};const gP=Nc.define();function mP(n,e){let t=[];for(let r of n.facet(kR)){let i=r(n,e);i&&t.push(i)}return t?n.update({effects:t,annotations:gP.of(!0)}):null}function vP(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=mP(n.state,e);t?n.dispatch(t):n.update([])}},10)}Ki.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),vP(n)},Ki.blur=n=>{n.observer.clearSelectionRange(),vP(n)},Ki.compositionstart=Ki.compositionupdate=n=>{null==n.inputState.compositionFirstChange&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0)},Ki.compositionend=n=>{n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,un.chrome&&un.android&&n.observer.flushSoon(),setTimeout(()=>{n.inputState.composing<0&&n.docView.compositionDeco.size&&n.update([])},50)},Ki.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()},Ki.beforeinput=(n,e)=>{var t;let r;if(un.chrome&&un.android&&(r=tP.find(i=>i.inputType==e.inputType))&&(n.observer.delayAndroidKey(r.key,r.keyCode),"Backspace"==r.key||"Delete"==r.key)){let i=(null===(t=window.visualViewport)||void 0===t?void 0:t.height)||0;setTimeout(()=>{var o;((null===(o=window.visualViewport)||void 0===o?void 0:o.height)||0)>i+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}};const yP=["pre-wrap","normal","pre-line","break-spaces"];class bP{constructor(e){this.lineWrapping=e,this.doc=Cr.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let r=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((t-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return yP.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(10*i)]||(t=!0,this.heightSamples[Math.floor(10*i)]=!0)}return t}refresh(e,t,r,i,o,a){let u=yP.indexOf(e)>-1,h=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=u;if(this.lineWrapping=u,this.lineHeight=t,this.charWidth=r,this.textHeight=i,this.lineLength=o,h){this.heightSamples={};for(let m=0;m<a.length;m++){let v=a[m];v<0?m++:this.heightSamples[Math.floor(10*v)]=!0}}return h}}class wP{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Fc{constructor(e,t,r,i,o){this.from=e,this.length=t,this.top=r,this.height=i,this.type=o}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let t=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new Fc(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Gr=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(Gr||(Gr={}));const Cb=.001;class Go{constructor(e,t,r=2){this.length=e,this.height=t,this.flags=r}get outdated(){return(2&this.flags)>0}set outdated(e){this.flags=(e?2:0)|-3&this.flags}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>Cb&&(e.heightChanged=!0),this.height=t)}replace(e,t,r){return Go.of(r)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,r,i){let o=this,a=r.doc;for(let u=i.length-1;u>=0;u--){let{fromA:h,toA:m,fromB:v,toB:x}=i[u],k=o.lineAt(h,Gr.ByPosNoHeight,r.setDoc(t),0,0),F=k.to>=m?k:o.lineAt(m,Gr.ByPosNoHeight,r,0,0);for(x+=F.to-m,m=F.to;u>0&&k.from<=i[u-1].toA;)h=i[u-1].fromA,v=i[u-1].fromB,u--,h<k.from&&(k=o.lineAt(h,Gr.ByPosNoHeight,r,0,0));v+=k.from-h,h=k.from;let Y=gC.build(r.setDoc(a),e,v,x);o=o.replace(h,m,Y)}return o.updateHeight(r,0)}static empty(){return new Ks(0,0)}static of(e){if(1==e.length)return e[0];let t=0,r=e.length,i=0,o=0;for(;;)if(t==r)if(i>2*o){let u=e[t-1];u.break?e.splice(--t,1,u.left,null,u.right):e.splice(--t,1,u.left,u.right),r+=1+u.break,i-=u.size}else{if(!(o>2*i))break;{let u=e[r];u.break?e.splice(r,1,u.left,null,u.right):e.splice(r,1,u.left,u.right),r+=2+u.break,o-=u.size}}else if(i<o){let u=e[t++];u&&(i+=u.size)}else{let u=e[--r];u&&(o+=u.size)}let a=0;return null==e[t-1]?(a=1,t--):null==e[t]&&(a=1,r++),new LW(Go.of(e.slice(0,t)),a,Go.of(e.slice(r)))}}Go.prototype.size=1;class _P extends Go{constructor(e,t,r){super(e,t),this.type=r}blockAt(e,t,r,i){return new Fc(i,this.length,r,this.height,this.type)}lineAt(e,t,r,i,o){return this.blockAt(0,r,i,o)}forEachLine(e,t,r,i,o,a){e<=o+this.length&&t>=o&&a(this.blockAt(0,r,i,o))}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more&&this.setHeight(e,i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Ks extends _P{constructor(e,t){super(e,t,zr.Text),this.collapsed=0,this.widgetHeight=0}replace(e,t,r){let i=r[0];return 1==r.length&&(i instanceof Ks||i instanceof Co&&4&i.flags)&&Math.abs(this.length-i.length)<10?(i instanceof Co?i=new Ks(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Go.of(r)}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more?this.setHeight(e,i.heights[i.index++]):(r||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Co extends Go{constructor(e){super(e,0)}heightMetrics(e,t){let a,r=e.doc.lineAt(t).number,i=e.doc.lineAt(t+this.length).number,o=i-r+1,u=0;if(e.lineWrapping){let h=Math.min(this.height,e.lineHeight*o);a=h/o,u=(this.height-h)/(this.length-o-1)}else a=this.height/o;return{firstLine:r,lastLine:i,perLine:a,perChar:u}}blockAt(e,t,r,i){let{firstLine:o,lastLine:a,perLine:u,perChar:h}=this.heightMetrics(t,i);if(t.lineWrapping){let m=i+Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length),v=t.doc.lineAt(m),x=u+v.length*h,k=Math.max(r,e-x/2);return new Fc(v.from,v.length,k,x,zr.Text)}{let m=Math.max(0,Math.min(a-o,Math.floor((e-r)/u))),{from:v,length:x}=t.doc.line(o+m);return new Fc(v,x,r+u*m,u,zr.Text)}}lineAt(e,t,r,i,o){if(t==Gr.ByHeight)return this.blockAt(e,r,i,o);if(t==Gr.ByPosNoHeight){let{from:F,to:Y}=r.doc.lineAt(e);return new Fc(F,Y-F,0,0,zr.Text)}let{firstLine:a,perLine:u,perChar:h}=this.heightMetrics(r,o),m=r.doc.lineAt(e),v=u+m.length*h,x=m.number-a;return new Fc(m.from,m.length,Math.max(i,Math.min(i+u*x+h*(m.from-o-x),i+this.height-v)),v,zr.Text)}forEachLine(e,t,r,i,o,a){e=Math.max(e,o),t=Math.min(t,o+this.length);let{firstLine:u,perLine:h,perChar:m}=this.heightMetrics(r,o);for(let v=e,x=i;v<=t;){let k=r.doc.lineAt(v);if(v==e){let Y=k.number-u;x+=h*Y+m*(e-o-Y)}let F=h+m*k.length;a(new Fc(k.from,k.length,x,F,zr.Text)),x+=F,v=k.to+1}}replace(e,t,r){let i=this.length-t;if(i>0){let o=r[r.length-1];o instanceof Co?r[r.length-1]=new Co(o.length+i):r.push(null,new Co(i-1))}if(e>0){let o=r[0];o instanceof Co?r[0]=new Co(e+o.length):r.unshift(new Co(e-1),null)}return Go.of(r)}decomposeLeft(e,t){t.push(new Co(e-1),null)}decomposeRight(e,t){t.push(null,new Co(this.length-e-1))}updateHeight(e,t=0,r=!1,i){let o=t+this.length;if(i&&i.from<=t+this.length&&i.more){let a=[],u=Math.max(t,i.from),h=-1;for(i.from>t&&a.push(new Co(i.from-t-1).updateHeight(e,t));u<=o&&i.more;){let v=e.doc.lineAt(u).length;a.length&&a.push(null);let x=i.heights[i.index++];-1==h?h=x:Math.abs(x-h)>=Cb&&(h=-2);let k=new Ks(v,x);k.outdated=!1,a.push(k),u+=v+1}u<=o&&a.push(null,new Co(o-u).updateHeight(e,u));let m=Go.of(a);return(h<0||Math.abs(m.height-this.height)>=Cb||Math.abs(h-this.heightMetrics(e,t).perLine)>=Cb)&&(e.heightChanged=!0),m}return(r||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class LW extends Go{constructor(e,t,r){super(e.length+t+r.length,e.height+r.height,t|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return 1&this.flags}blockAt(e,t,r,i){let o=r+this.left.height;return e<o?this.left.blockAt(e,t,r,i):this.right.blockAt(e,t,o,i+this.left.length+this.break)}lineAt(e,t,r,i,o){let a=i+this.left.height,u=o+this.left.length+this.break,h=t==Gr.ByHeight?e<a:e<u,m=h?this.left.lineAt(e,t,r,i,o):this.right.lineAt(e,t,r,a,u);if(this.break||(h?m.to<u:m.from>u))return m;let v=t==Gr.ByPosNoHeight?Gr.ByPosNoHeight:Gr.ByPos;return h?m.join(this.right.lineAt(u,v,r,a,u)):this.left.lineAt(u,v,r,i,o).join(m)}forEachLine(e,t,r,i,o,a){let u=i+this.left.height,h=o+this.left.length+this.break;if(this.break)e<h&&this.left.forEachLine(e,t,r,i,o,a),t>=h&&this.right.forEachLine(e,t,r,u,h,a);else{let m=this.lineAt(h,Gr.ByPos,r,i,o);e<m.from&&this.left.forEachLine(e,m.from-1,r,i,o,a),m.to>=e&&m.from<=t&&a(m),t>m.to&&this.right.forEachLine(m.to+1,t,r,u,h,a)}}replace(e,t,r){let i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,r));let o=[];e>0&&this.decomposeLeft(e,o);let a=o.length;for(let u of r)o.push(u);if(e>0&&xP(o,a-1),t<this.length){let u=o.length;this.decomposeRight(t,o),xP(o,u)}return Go.of(o)}decomposeLeft(e,t){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(r++,e>=r&&t.push(null)),e>r&&this.right.decomposeLeft(e-r,t)}decomposeRight(e,t){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<r&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Go.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,r=!1,i){let{left:o,right:a}=this,u=t+o.length+this.break,h=null;return i&&i.from<=t+o.length&&i.more?h=o=o.updateHeight(e,t,r,i):o.updateHeight(e,t,r),i&&i.from<=u+a.length&&i.more?h=a=a.updateHeight(e,u,r,i):a.updateHeight(e,u,r),h?this.balanced(o,a):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function xP(n,e){let t,r;null==n[e]&&(t=n[e-1])instanceof Co&&(r=n[e+1])instanceof Co&&n.splice(e-1,3,new Co(t.length+1+r.length))}class gC{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let r=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof Ks?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new Ks(r-this.pos,-1)),this.writtenTo=r,t>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,r){if(e<t||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0;i<0&&(i=this.oracle.lineHeight);let o=t-e;r.block?this.addBlock(new _P(o,i,r.type)):(o||i>=5)&&this.addLineDeco(i,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Ks(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let r=new Co(t-e);return this.oracle.doc.lineAt(e).to==t&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Ks)return e;let t=new Ks(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine(),e.type==zr.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=zr.WidgetBefore&&(this.covering=e)}addLineDeco(e,t){let r=this.ensureLine();r.length+=t,r.collapsed+=t,r.widgetHeight=Math.max(r.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}finish(e){let t=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||t instanceof Ks||this.isCovered?(this.writtenTo<this.pos||null==t)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new Ks(0,-1));let r=e;for(let i of this.nodes)i instanceof Ks&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,t,r,i){let o=new gC(r,e);return fi.spans(t,r,i,o,0),o.finish(r)}}class VW{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,r,i){(e<t||r&&r.heightRelevant||i&&i.heightRelevant)&&iC(e,t,this.changes,5)}}function HW(n,e){let t=n.getBoundingClientRect(),r=n.ownerDocument,i=r.defaultView||window,o=Math.max(0,t.left),a=Math.min(i.innerWidth,t.right),u=Math.max(0,t.top),h=Math.min(i.innerHeight,t.bottom);for(let m=n.parentNode;m&&m!=r.body;)if(1==m.nodeType){let v=m,x=window.getComputedStyle(v);if((v.scrollHeight>v.clientHeight||v.scrollWidth>v.clientWidth)&&"visible"!=x.overflow){let k=v.getBoundingClientRect();o=Math.max(o,k.left),a=Math.min(a,k.right),u=Math.max(u,k.top),h=m==n.parentNode?k.bottom:Math.min(h,k.bottom)}m="absolute"==x.position||"fixed"==x.position?v.offsetParent:v.parentNode}else{if(11!=m.nodeType)break;m=m.host}return{left:o-t.left,right:Math.max(o,a)-t.left,top:u-(t.top+e),bottom:Math.max(u,h)-(t.top+e)}}function zW(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class mC{constructor(e,t,r){this.from=e,this.to=t,this.size=r}static same(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=t[r];if(i.from!=o.from||i.to!=o.to||i.size!=o.size)return!1}return!0}draw(e){return dn.replace({widget:new jW(this.size,e)}).range(this.from,this.to)}}class jW extends Lc{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class EP{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scaler=DP,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=pi.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(_b).some(r=>"function"!=typeof r&&"cm-lineWrapping"==r.class);this.heightOracle=new bP(t),this.stateDeco=e.facet(Pm).filter(r=>"function"!=typeof r),this.heightMap=Go.empty().applyChanges(this.stateDeco,Cr.empty,this.heightOracle.setDoc(e.doc),[new nl(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=dn.set(this.lineGaps.map(r=>r.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let r=0;r<=1;r++){let i=r?t.head:t.anchor;if(!e.some(({from:o,to:a})=>i>=o&&i<=a)){let{from:o,to:a}=this.lineBlockAt(i);e.push(new Sb(o,a))}}this.viewports=e.sort((r,i)=>r.from-i.from),this.scaler=this.heightMap.height<=7e6?DP:new $W(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(1==this.scaler.scale?e:Lm(e,this.scaler))})}update(e,t=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(Pm).filter(m=>"function"!=typeof m);let o=nl.extendWithRanges(e.changedRanges,function BW(n,e,t){let r=new VW;return fi.compare(n,e,t,r,0),r.changes}(r,this.stateDeco,e?e.changes:Xi.empty(this.state.doc.length))),a=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),this.heightMap.height!=a&&(e.flags|=2);let u=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<u.from||t.range.head>u.to)||!this.viewportIsAppropriate(u))&&(u=this.getViewport(0,t));let h=!e.changes.empty||2&e.flags||u.from!=this.viewport.from||u.to!=this.viewport.to;this.viewport=u,this.updateForViewport(),h&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(OR)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,r=window.getComputedStyle(t),i=this.heightOracle,o=r.whiteSpace;this.defaultTextDirection="rtl"==r.direction?pi.RTL:pi.LTR;let a=this.heightOracle.mustRefreshForWrapping(o),u=t.getBoundingClientRect(),h=a||this.mustMeasureContent||this.contentDOMHeight!=u.height;this.contentDOMHeight=u.height,this.mustMeasureContent=!1;let m=0,v=0,x=parseInt(r.paddingTop)||0,k=parseInt(r.paddingBottom)||0;(this.paddingTop!=x||this.paddingBottom!=k)&&(this.paddingTop=x,this.paddingBottom=k,m|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(h=!0),this.editorWidth=e.scrollDOM.clientWidth,m|=8);let F=(this.printing?zW:HW)(t,this.paddingTop),Y=F.top-this.pixelViewport.top,ie=F.bottom-this.pixelViewport.bottom;this.pixelViewport=F;let me=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(me!=this.inView&&(this.inView=me,me&&(h=!0)),!this.inView&&!this.scrollTarget)return 0;let Oe=u.width;if((this.contentDOMWidth!=Oe||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=u.width,this.editorHeight=e.scrollDOM.clientHeight,m|=8),h){let Ge=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(Ge)&&(a=!0),a||i.lineWrapping&&Math.abs(Oe-this.contentDOMWidth)>i.charWidth){let{lineHeight:ot,charWidth:wt,textHeight:Et}=e.docView.measureTextSize();a=ot>0&&i.refresh(o,ot,wt,Et,Oe/wt,Ge),a&&(e.docView.minWidth=0,m|=8)}Y>0&&ie>0?v=Math.max(Y,ie):Y<0&&ie<0&&(v=Math.min(Y,ie)),i.heightChanged=!1;for(let ot of this.viewports){let wt=ot.from==this.viewport.from?Ge:e.docView.measureVisibleLineHeights(ot);this.heightMap=(a?Go.empty().applyChanges(this.stateDeco,Cr.empty,this.heightOracle,[new nl(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,a,new wP(ot.from,wt))}i.heightChanged&&(m|=2)}let Ke=!this.viewportIsAppropriate(this.viewport,v)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return Ke&&(this.viewport=this.getViewport(v,this.scrollTarget)),this.updateForViewport(),(2&m||Ke)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(a?[]:this.lineGaps,e)),m|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),m}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,o=this.heightOracle,{visibleTop:a,visibleBottom:u}=this,h=new Sb(i.lineAt(a-1e3*r,Gr.ByHeight,o,0,0).from,i.lineAt(u+1e3*(1-r),Gr.ByHeight,o,0,0).to);if(t){let{head:m}=t.range;if(m<h.from||m>h.to){let k,v=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),x=i.lineAt(m,Gr.ByPos,o,0,0);k="center"==t.y?(x.top+x.bottom)/2-v/2:"start"==t.y||"nearest"==t.y&&m<h.from?x.top:x.bottom-v,h=new Sb(i.lineAt(k-500,Gr.ByHeight,o,0,0).from,i.lineAt(k+v+500,Gr.ByHeight,o,0,0).to)}}return h}mapViewport(e,t){let r=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new Sb(this.heightMap.lineAt(r,Gr.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,Gr.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,Gr.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(t,Gr.ByPos,this.heightOracle,0,0),{visibleTop:a,visibleBottom:u}=this;return(0==e||i<=a-Math.max(10,Math.min(-r,250)))&&(t==this.state.doc.length||o>=u+Math.max(10,Math.min(r,250)))&&i>a-2e3&&o<u+2e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let r=[];for(let i of e)t.touchesRange(i.from,i.to)||r.push(new mC(t.mapPos(i.from),t.mapPos(i.to),i.size));return r}ensureLineGaps(e,t){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,o=i>>1,a=i<<1;if(this.defaultTextDirection!=pi.LTR&&!r)return[];let u=[],h=(m,v,x,k)=>{if(v-m<o)return;let F=this.state.selection.main,Y=[F.from];F.empty||Y.push(F.to);for(let me of Y)if(me>m&&me<v)return h(m,me-10,x,k),void h(me+10,v,x,k);let ie=function GW(n,e){for(let t of n)if(e(t))return t}(e,me=>me.from>=x.from&&me.to<=x.to&&Math.abs(me.from-m)<o&&Math.abs(me.to-v)<o&&!Y.some(Oe=>me.from<Oe&&me.to>Oe));if(!ie){if(v<x.to&&t&&r&&t.visibleRanges.some(me=>me.from<=v&&me.to>=v)){let me=t.moveToLineBoundary(Ct.cursor(v),!1,!0).head;me>m&&(v=me)}ie=new mC(m,v,this.gapSize(x,m,v,k))}u.push(ie)};for(let m of this.viewportLines){if(m.length<a)continue;let v=UW(m.from,m.to,this.stateDeco);if(v.total<a)continue;let k,F,x=this.scrollTarget?this.scrollTarget.range.head:null;if(r){let ie,me,Y=i/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=x){let Oe=Ab(v,x),Ke=((this.visibleBottom-this.visibleTop)/2+Y)/m.height;ie=Oe-Ke,me=Oe+Ke}else ie=(this.visibleTop-m.top-Y)/m.height,me=(this.visibleBottom-m.top+Y)/m.height;k=Mb(v,ie),F=Mb(v,me)}else{let me,Oe,Y=v.total*this.heightOracle.charWidth,ie=i*this.heightOracle.charWidth;if(null!=x){let Ke=Ab(v,x),Ge=((this.pixelViewport.right-this.pixelViewport.left)/2+ie)/Y;me=Ke-Ge,Oe=Ke+Ge}else me=(this.pixelViewport.left-ie)/Y,Oe=(this.pixelViewport.right+ie)/Y;k=Mb(v,me),F=Mb(v,Oe)}k>m.from&&h(m.from,k,m,v),F<m.to&&h(F,m.to,m,v)}return u}gapSize(e,t,r,i){let o=Ab(i,r)-Ab(i,t);return this.heightOracle.lineWrapping?e.height*o:i.total*this.heightOracle.charWidth*o}updateLineGaps(e){mC.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=dn.set(e.map(t=>t.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];fi.spans(e,this.viewport.from,this.viewport.to,{span(i,o){t.push({from:i,to:o})},point(){}},20);let r=t.length!=this.visibleRanges.length||this.visibleRanges.some((i,o)=>i.from!=t[o].from||i.to!=t[o].to);return this.visibleRanges=t,r?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Lm(this.heightMap.lineAt(e,Gr.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return Lm(this.heightMap.lineAt(this.scaler.fromDOM(e),Gr.ByHeight,this.heightOracle,0,0),this.scaler)}elementAtHeight(e){return Lm(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Sb{constructor(e,t){this.from=e,this.to=t}}function UW(n,e,t){let r=[],i=n,o=0;return fi.spans(t,n,e,{span(){},point(a,u){a>i&&(r.push({from:i,to:a}),o+=a-i),i=u}},20),i<e&&(r.push({from:i,to:e}),o+=e-i),{total:o,ranges:r}}function Mb({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let r=Math.floor(n*t);for(let i=0;;i++){let{from:o,to:a}=e[i],u=a-o;if(r<=u)return o+r;r-=u}}function Ab(n,e){let t=0;for(let{from:r,to:i}of n.ranges){if(e<=i){t+=e-r;break}t+=i-r}return t/n.total}const DP={toDOM:n=>n,fromDOM:n=>n,scale:1};class $W{constructor(e,t,r){let i=0,o=0,a=0;this.viewports=r.map(({from:u,to:h})=>{let m=t.lineAt(u,Gr.ByPos,e,0,0).top,v=t.lineAt(h,Gr.ByPos,e,0,0).bottom;return i+=v-m,{from:u,to:h,top:m,bottom:v,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(t.height-i);for(let u of this.viewports)u.domTop=a+(u.top-o)*this.scale,a=u.domBottom=u.domTop+(u.bottom-u.top),o=u.bottom}toDOM(e){for(let t=0,r=0,i=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.top)return i+(e-r)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);r=o.bottom,i=o.domBottom}}fromDOM(e){for(let t=0,r=0,i=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.domTop)return r+(e-i)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);r=o.bottom,i=o.domBottom}}}function Lm(n,e){if(1==e.scale)return n;let t=e.toDOM(n.top),r=e.toDOM(n.bottom);return new Fc(n.from,n.length,t,r-t,Array.isArray(n.type)?n.type.map(i=>Lm(i,e)):n.type)}const Tb=ln.define({combine:n=>n.join(" ")}),vC=ln.define({combine:n=>n.indexOf(!0)>-1}),yC=Lu.newName(),CP=Lu.newName(),SP=Lu.newName(),MP={"&light":"."+CP,"&dark":"."+SP};function bC(n,e,t){return new Lu(e,{finish:r=>/&/.test(r)?r.replace(/&\w*/,i=>{if("&"==i)return n;if(!t||!t[i])throw new RangeError(`Unsupported selector: ${i}`);return t[i]}):n+" "+r})}const WW=bC("."+yC,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},MP);class qW{constructor(e,t,r,i){this.typeOver=i,this.bounds=null,this.text="";let{impreciseHead:o,impreciseAnchor:a}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,r,0))){let u=o||a?[]:function XW(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:o}=n.observer.selectionRange;return t&&(e.push(new GR(t,r)),(i!=t||o!=r)&&e.push(new GR(i,o))),e}(e),h=new jR(u,e.state);h.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=h.text,this.newSel=function KW(n,e){if(0==n.length)return null;let t=n[0].pos,r=2==n.length?n[1].pos:t;return t>-1&&r>-1?Ct.single(t+e,r+e):null}(u,this.bounds.from)}else{let u=e.observer.selectionRange,h=o&&o.node==u.focusNode&&o.offset==u.focusOffset||!ip(e.contentDOM,u.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(u.focusNode,u.focusOffset),m=a&&a.node==u.anchorNode&&a.offset==u.anchorOffset||!ip(e.contentDOM,u.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(u.anchorNode,u.anchorOffset);this.newSel=Ct.single(m,h)}}}function AP(n,e){let t,{newSel:r}=e,i=n.state.selection.main;if(e.bounds){let{from:o,to:a}=e.bounds,u=i.from,h=null;(8===n.inputState.lastKeyCode&&n.inputState.lastKeyTime>Date.now()-100||un.android&&e.text.length<a-o)&&(u=i.to,h="end");let m=function YW(n,e,t,r){let i=Math.min(n.length,e.length),o=0;for(;o<i&&n.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==i&&n.length==e.length)return null;let a=n.length,u=e.length;for(;a>0&&u>0&&n.charCodeAt(a-1)==e.charCodeAt(u-1);)a--,u--;return"end"==r&&(t-=a+Math.max(0,o-Math.min(a,u))-o),a<o&&n.length<e.length?(o-=t<=o&&t>=a?o-t:0,u=o+(u-a),a=o):u<o&&(o-=t<=o&&t>=u?o-t:0,a=o+(a-u),u=o),{from:o,toA:a,toB:u}}(n.state.doc.sliceString(o,a,"\uffff"),e.text,u-o,h);m&&(un.chrome&&13==n.inputState.lastKeyCode&&m.toB==m.from+2&&"\uffff\uffff"==e.text.slice(m.from,m.toB)&&m.toB--,t={from:o+m.from,to:o+m.toA,insert:Cr.of(e.text.slice(m.from,m.toB).split("\uffff"))})}else r&&(!n.hasFocus&&n.state.facet(wb)||r.main.eq(i))&&(r=null);if(!t&&!r)return!1;if(!t&&e.typeOver&&!i.empty&&r&&r.main.empty?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,i.to)}:t&&t.from>=i.from&&t.to<=i.to&&(t.from!=i.from||t.to!=i.to)&&i.to-i.from-(t.to-t.from)<=4?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,i.to))}:(un.mac||un.android)&&t&&t.from==t.to&&t.from==i.head-1&&/^\. ?$/.test(t.insert.toString())&&"off"==n.contentDOM.getAttribute("autocorrect")?(r&&2==t.insert.length&&(r=Ct.single(r.main.anchor-1,r.main.head-1)),t={from:i.from,to:i.to,insert:Cr.of([" "])}):un.chrome&&t&&t.from==t.to&&t.from==i.head&&"\n "==t.insert.toString()&&n.lineWrapping&&(r&&(r=Ct.single(r.main.anchor-1,r.main.head-1)),t={from:i.from,to:i.to,insert:Cr.of([" "])}),t){let o=n.state;if(un.ios&&n.inputState.flushIOSKey(n)||un.android&&(t.from==i.from&&t.to==i.to&&1==t.insert.length&&2==t.insert.lines&&ap(n.contentDOM,"Enter",13)||t.from==i.from-1&&t.to==i.to&&0==t.insert.length&&ap(n.contentDOM,"Backspace",8)||t.from==i.from&&t.to==i.to+1&&0==t.insert.length&&ap(n.contentDOM,"Delete",46)))return!0;let u,a=t.insert.toString();if(n.state.facet(TR).some(m=>m(n,t.from,t.to,a)))return!0;if(n.inputState.composing>=0&&n.inputState.composing++,t.from>=i.from&&t.to<=i.to&&t.to-t.from>=(i.to-i.from)/3&&(!r||r.main.empty&&r.main.from==t.from+t.insert.length)&&n.inputState.composing<0){let m=i.from<t.from?o.sliceDoc(i.from,t.from):"",v=i.to>t.to?o.sliceDoc(t.to,i.to):"";u=o.replaceSelection(n.state.toText(m+t.insert.sliceString(0,void 0,n.state.lineBreak)+v))}else{let m=o.changes(t),v=r&&r.main.to<=m.newLength?r.main:void 0;if(o.selection.ranges.length>1&&n.inputState.composing>=0&&t.to<=i.to&&t.to>=i.to-10){let x=n.state.sliceDoc(t.from,t.to),k=qR(n)||n.state.doc.lineAt(i.head),F=i.to-t.to,Y=i.to-i.from;u=o.changeByRange(ie=>{if(ie.from==i.from&&ie.to==i.to)return{changes:m,range:v||ie.map(m)};let me=ie.to-F,Oe=me-x.length;if(ie.to-ie.from!=Y||n.state.sliceDoc(Oe,me)!=x||k&&ie.to>=k.from&&ie.from<=k.to)return{range:ie};let Ke=o.changes({from:Oe,to:me,insert:t.insert}),Ge=ie.to-i.to;return{changes:Ke,range:v?Ct.range(Math.max(0,v.anchor+Ge),Math.max(0,v.head+Ge)):ie.map(Ke)}})}else u={changes:m,selection:v&&o.selection.replaceRange(v)}}let h="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,h+=".compose",n.inputState.compositionFirstChange&&(h+=".start",n.inputState.compositionFirstChange=!1)),n.dispatch(u,{scrollIntoView:!0,userEvent:h}),!0}if(r&&!r.main.eq(i)){let o=!1,a="select";return n.inputState.lastSelectionTime>Date.now()-50&&("select"==n.inputState.lastSelectionOrigin&&(o=!0),a=n.inputState.lastSelectionOrigin),n.dispatch({selection:r,scrollIntoView:o,userEvent:a}),!0}return!1}const ZW={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},wC=un.ie&&un.ie_version<=11;class QW{constructor(e){this.view=e,this.active=!1,this.selectionRange=new X8,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let r of t)this.queue.push(r);(un.ie&&un.ie_version<=11||un.ios&&e.composing)&&t.some(r=>"childList"==r.type&&r.removedNodes.length||"characterData"==r.type&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),wC&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver(()=>{var t;(null===(t=this.view.docView)||void 0===t?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(e.contentDOM)),this.addWindowListeners(this.win=e.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,r)=>t!=e[r]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(wb)?r.root.activeElement!=this.dom:!fb(r.dom,i))return;let o=i.anchorNode&&r.docView.nearest(i.anchorNode);o&&o.ignoreEvent(e)?t||(this.selectionChanged=!1):(un.ie&&un.ie_version<=11||un.android&&un.chrome)&&!r.state.selection.main.empty&&i.focusNode&&pb(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=un.safari&&11==e.root.nodeType&&function $8(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}(this.dom.ownerDocument)==this.dom&&function JW(n){let e=null;function t(h){h.preventDefault(),h.stopImmediatePropagation(),e=h.getTargetRanges()[0]}if(n.contentDOM.addEventListener("beforeinput",t,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",t,!0),!e)return null;let r=e.startContainer,i=e.startOffset,o=e.endContainer,a=e.endOffset,u=n.docView.domAtPos(n.state.selection.main.anchor);return pb(u.node,u.offset,o,a)&&([r,i,o,a]=[o,a,r,i]),{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:a}}(this.view)||hb(e.root);if(!t||this.selectionRange.eq(t))return!1;let r=fb(this.dom,t);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&function Z8(n,e){let t=e.focusNode,r=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=r)return!1;for(;;)if(r){if(1!=t.nodeType)return!1;let i=t.childNodes[r-1];"false"==i.contentEditable?r--:(t=i,r=Im(t))}else{if(t==n)return!0;r=gb(t),t=t.parentNode}}(this.dom,t)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(t),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let r=this.dom;r;)if(1==r.nodeType)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(r),r=r.assignedSlot||r.parentNode;else{if(11!=r.nodeType)break;r=r.host}if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=t)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,ZW),wC&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),wC&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var r;this.delayedAndroidKey||(this.flushingAndroidKey=this.view.win.requestAnimationFrame(()=>{let o=this.delayedAndroidKey;o&&(this.clearDelayedAndroidKey(),!this.flush()&&o.force&&ap(this.dom,o.key,o.keyCode))})),(!this.delayedAndroidKey||"Enter"==e)&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!(null===(r=this.delayedAndroidKey)||void 0===r||!r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,r=-1,i=!1;for(let o of e){let a=this.readMutation(o);a&&(a.typeOver&&(i=!0),-1==t?({from:t,to:r}=a):(t=Math.min(a.from,t),r=Math.max(a.to,r)))}return{from:t,to:r,typeOver:i}}readChange(){let{from:e,to:t,typeOver:r}=this.processRecords(),i=this.selectionChanged&&fb(this.dom,this.selectionRange);return e<0&&!i?null:(e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new qW(this.view,e,t,r))}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return!1;let r=this.view.state,i=AP(this.view,t);return this.view.state==r&&this.view.update([]),i}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty("attributes"==e.type),"attributes"==e.type&&(t.dirty|=4),"childList"==e.type){let r=TP(t,e.previousSibling||e.target.previousSibling,-1),i=TP(t,e.nextSibling||e.target.nextSibling,1);return{from:r?t.posAfter(r):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}return"characterData"==e.type?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,t,r,i;this.stop(),null===(e=this.intersection)||void 0===e||e.disconnect(),null===(t=this.gapIntersection)||void 0===t||t.disconnect(),null===(r=this.resizeScroll)||void 0===r||r.disconnect(),null===(i=this.resizeContent)||void 0===i||i.disconnect();for(let o of this.scrollTargets)o.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function TP(n,e,t){for(;e;){let r=Kr.get(e);if(r&&r.parent==n)return r;let i=e.parentNode;e=i!=n.dom?i:t>0?e.nextSibling:e.previousSibling}return null}let Rn=(()=>{class n{constructor(t={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=t.dispatch||(r=>this.update([r])),this.dispatch=this.dispatch.bind(this),this._root=t.root||function K8(n){for(;n;){if(n&&(9==n.nodeType||11==n.nodeType&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}(t.parent)||document,this.viewState=new EP(t.state||ls.create(t)),this.plugins=this.state.facet(Rm).map(r=>new aC(r));for(let r of this.plugins)r.update(this);this.observer=new QW(this),this.inputState=new EW(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new $R(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),t.parent&&t.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...t){this._dispatch(1==t.length&&t[0]instanceof jl?t[0]:this.state.update(...t))}update(t){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let o,r=!1,i=!1,a=this.state;for(let F of t){if(F.startState!=a)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");a=F.state}if(this.destroyed)return void(this.viewState.state=a);let u=this.hasFocus,h=0,m=null;t.some(F=>F.annotation(gP))?(this.inputState.notifiedFocused=u,h=1):u!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=u,m=mP(a,u),m||(h=1));let v=this.observer.delayedAndroidKey,x=null;if(v?(this.observer.clearDelayedAndroidKey(),x=this.observer.readChange(),(x&&!this.state.doc.eq(a.doc)||!this.state.selection.eq(a.selection))&&(x=null)):this.observer.clear(),a.facet(ls.phrases)!=this.state.facet(ls.phrases))return this.setState(a);o=xb.create(this,a,t),o.flags|=h;let k=this.viewState.scrollTarget;try{this.updateState=2;for(let F of t){if(k&&(k=k.map(F.changes)),F.scrollIntoView){let{main:Y}=F.state.selection;k=new bb(Y.empty?Y:Ct.cursor(Y.head,Y.head>Y.anchor?-1:1))}for(let Y of F.effects)Y.is(RR)&&(k=Y.value)}this.viewState.update(o,k),this.bidiCache=kb.update(this.bidiCache,o.changes),o.empty||(this.updatePlugins(o),this.inputState.update(o)),r=this.docView.update(o),this.state.facet(Nm)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(t),this.docView.updateSelection(r,t.some(F=>F.isUserEvent("select.pointer")))}finally{this.updateState=0}if(o.startState.facet(Tb)!=o.state.facet(Tb)&&(this.viewState.mustMeasureContent=!0),(r||i||k||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!o.empty)for(let F of this.state.facet(sC))F(o);(m||x)&&Promise.resolve().then(()=>{m&&this.state==m.startState&&this.dispatch(m),x&&!AP(this,x)&&v.force&&ap(this.contentDOM,v.key,v.keyCode)})}setState(t){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=t);this.updateState=2;let r=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new EP(t),this.plugins=t.facet(Rm).map(i=>new aC(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView=new $R(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}r&&this.focus(),this.requestMeasure()}updatePlugins(t){let r=t.startState.facet(Rm),i=t.state.facet(Rm);if(r!=i){let o=[];for(let a of i){let u=r.indexOf(a);if(u<0)o.push(new aC(a));else{let h=this.plugins[u];h.mustUpdate=t,o.push(h)}}for(let a of this.plugins)a.mustUpdate!=t&&a.destroy(this);this.plugins=o,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let o of this.plugins)o.mustUpdate=t;for(let o=0;o<this.plugins.length;o++)this.plugins[o].update(this)}measure(t=!0){if(this.destroyed)return;this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,t&&this.observer.forceFlush();let r=null,{scrollHeight:i,scrollTop:o,clientHeight:a}=this.scrollDOM,u=o>i-a-4?i:o;try{for(let h=0;;h++){this.updateState=1;let m=this.viewport,v=this.viewState.lineBlockAtHeight(u),x=this.viewState.measure(this);if(!x&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(h>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let k=[];4&x||([this.measureRequests,k]=[k,this.measureRequests]);let F=k.map(Oe=>{try{return Oe.read(this)}catch(Ke){return Xs(this.state,Ke),kP}}),Y=xb.create(this,this.state,[]),ie=!1,me=!1;Y.flags|=x,r?r.flags|=x:r=Y,this.updateState=2,Y.empty||(this.updatePlugins(Y),this.inputState.update(Y),this.updateAttrs(),ie=this.docView.update(Y));for(let Oe=0;Oe<k.length;Oe++)if(F[Oe]!=kP)try{let Ke=k[Oe];Ke.write&&Ke.write(F[Oe],this)}catch(Ke){Xs(this.state,Ke)}if(this.viewState.editorHeight)if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,me=!0;else{let Oe=this.viewState.lineBlockAt(v.from).top-v.top;(Oe>1||Oe<-1)&&(this.scrollDOM.scrollTop+=Oe,me=!0)}if(ie&&this.docView.updateSelection(!0),this.viewport.from==m.from&&this.viewport.to==m.to&&!me&&0==this.measureRequests.length)break}}finally{this.updateState=0,this.measureScheduled=-1}if(r&&!r.empty)for(let h of this.state.facet(sC))h(r)}get themeClasses(){return yC+" "+(this.state.facet(vC)?SP:CP)+" "+this.state.facet(Tb)}updateAttrs(){let t=IP(this,PR,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),r={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(wb)?"true":"false",class:"cm-content",style:`${un.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(r["aria-readonly"]="true"),IP(this,_b,r);let i=this.observer.ignore(()=>{let o=rC(this.contentDOM,this.contentAttrs,r),a=rC(this.dom,this.editorAttrs,t);return o||a});return this.editorAttrs=t,this.contentAttrs=r,i}showAnnouncements(t){let r=!0;for(let i of t)for(let o of i.effects)o.is(n.announce)&&(r&&(this.announceDOM.textContent=""),r=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=o.value)}mountStyles(){this.styleModules=this.state.facet(Nm),Lu.mount(this.root,this.styleModules.concat(WW).reverse())}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(t){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),t){if(this.measureRequests.indexOf(t)>-1)return;if(null!=t.key)for(let r=0;r<this.measureRequests.length;r++)if(this.measureRequests[r].key===t.key)return void(this.measureRequests[r]=t);this.measureRequests.push(t)}}plugin(t){let r=this.pluginMap.get(t);return(void 0===r||r&&r.spec!=t)&&this.pluginMap.set(t,r=this.plugins.find(i=>i.spec==t)||null),r&&r.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(t){return this.readMeasured(),this.viewState.elementAtHeight(t)}lineBlockAtHeight(t){return this.readMeasured(),this.viewState.lineBlockAtHeight(t)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(t){return this.viewState.lineBlockAt(t)}get contentHeight(){return this.viewState.contentHeight}moveByChar(t,r,i){return hC(this,t,eP(this,t,r,i))}moveByGroup(t,r){return hC(this,t,eP(this,t,r,i=>function _W(n,e,t){let r=n.state.charCategorizer(e),i=r(t);return o=>{let a=r(o);return i==ii.Space&&(i=a),i==a}}(this,t.head,i)))}moveToLineBoundary(t,r,i=!0){return function wW(n,e,t,r){let i=n.state.doc.lineAt(e.head),o=r&&n.lineWrapping?n.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head):null;if(o){let h=n.dom.getBoundingClientRect(),m=n.textDirectionAt(i.from),v=n.posAtCoords({x:t==(m==pi.LTR)?h.right-1:h.left+1,y:(o.top+o.bottom)/2});if(null!=v)return Ct.cursor(v,t?-1:1)}let a=cs.find(n.docView,e.head);return Ct.cursor(a?t?a.posAtEnd:a.posAtStart:t?i.to:i.from,t?-1:1)}(this,t,r,i)}moveVertically(t,r,i){return hC(this,t,function xW(n,e,t,r){let i=e.head,o=t?1:-1;if(i==(t?n.state.doc.length:0))return Ct.cursor(i,e.assoc);let u,a=e.goalColumn,h=n.contentDOM.getBoundingClientRect(),m=n.coordsAtPos(i),v=n.documentTop;if(m)null==a&&(a=m.left-h.left),u=o<0?m.top:m.bottom;else{let F=n.viewState.lineBlockAt(i);null==a&&(a=Math.min(h.right-h.left,n.defaultCharacterWidth*(i-F.from))),u=(o<0?F.top:F.bottom)+v}let x=h.left+a,k=r??n.defaultLineHeight>>1;for(let F=0;;F+=10){let Y=u+(k+F)*o,ie=QR(n,{x,y:Y},!1,o);if(Y<h.top||Y>h.bottom||(o<0?ie<i:ie>i))return Ct.cursor(ie,e.assoc,void 0,a)}}(this,t,r,i))}domAtPos(t){return this.docView.domAtPos(t)}posAtDOM(t,r=0){return this.docView.posFromDOM(t,r)}posAtCoords(t,r=!0){return this.readMeasured(),QR(this,t,r)}coordsAtPos(t,r=1){this.readMeasured();let i=this.docView.coordsAt(t,r);if(!i||i.left==i.right)return i;let o=this.state.doc.lineAt(t),a=this.bidiSpans(o);return qD(i,a[lp.find(a,t-o.from,-1,r)].dir==pi.LTR==r>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(t){return!this.state.facet(IR)||t<this.viewport.from||t>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(t))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(t){if(t.length>e6)return VR(t.length);let r=this.textDirectionAt(t.from);for(let o of this.bidiCache)if(o.from==t.from&&o.dir==r)return o.order;let i=function BR(n,e){let t=n.length,r=e==lC?1:2,i=e==lC?2:1;if(!n||1==r&&!aW.test(n))return VR(t);for(let a=0,u=r,h=r;a<t;a++){let m=sW(n.charCodeAt(a));512==m?m=u:8==m&&4==h&&(m=16),gi[a]=4==m?2:m,7&m&&(h=m),u=m}for(let a=0,u=r,h=r;a<t;a++){let m=gi[a];if(128==m)a<t-1&&u==gi[a+1]&&24&u?m=gi[a]=u:gi[a]=256;else if(64==m){let v=a+1;for(;v<t&&64==gi[v];)v++;let x=a&&8==u||v<t&&8==gi[v]?1==h?1:8:256;for(let k=a;k<v;k++)gi[k]=x;a=v-1}else 8==m&&1==h&&(gi[a]=1);u=m,7&m&&(h=m)}for(let m,v,x,a=0,u=0,h=0;a<t;a++)if(v=cC[m=n.charCodeAt(a)])if(v<0){for(let k=u-3;k>=0;k-=3)if(Gl[k+1]==-v){let F=Gl[k+2],Y=2&F?r:4&F?1&F?i:r:0;Y&&(gi[a]=gi[Gl[k]]=Y),u=k;break}}else{if(189==Gl.length)break;Gl[u++]=a,Gl[u++]=m,Gl[u++]=h}else if(2==(x=gi[a])||1==x){let k=x==r;h=k?0:1;for(let F=u-3;F>=0;F-=3){let Y=Gl[F+2];if(2&Y)break;if(k)Gl[F+2]|=2;else{if(4&Y)break;Gl[F+2]|=4}}}for(let a=0;a<t;a++)if(256==gi[a]){let u=a+1;for(;u<t&&256==gi[u];)u++;let h=1==(a?gi[a-1]:r),v=h==(1==(u<t?gi[u]:r))?h?1:2:r;for(let x=a;x<u;x++)gi[x]=v;a=u-1}let o=[];if(1==r)for(let a=0;a<t;){let u=a,h=1!=gi[a++];for(;a<t&&h==(1!=gi[a]);)a++;if(h)for(let m=a;m>u;){let v=m,x=2!=gi[--m];for(;m>u&&x==(2!=gi[m-1]);)m--;o.push(new lp(m,v,x?2:1))}else o.push(new lp(u,a,0))}else for(let a=0;a<t;){let u=a,h=2==gi[a++];for(;a<t&&h==(2==gi[a]);)a++;o.push(new lp(u,a,h?1:2))}return o}(t.text,r);return this.bidiCache.push(new kb(t.from,t.to,r,i)),i}get hasFocus(){var t;return(this.dom.ownerDocument.hasFocus()||un.safari&&(null===(t=this.inputState)||void 0===t?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{sR(this.contentDOM),this.docView.updateSelection()})}setRoot(t){this._root!=t&&(this._root=t,this.observer.setWindow((9==t.nodeType?t:t.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let t of this.plugins)t.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(t,r={}){return RR.of(new bb("number"==typeof t?Ct.cursor(t):t,r.y,r.x,r.yMargin,r.xMargin))}static domEventHandlers(t){return _i.define(()=>({}),{eventHandlers:t})}static theme(t,r){let i=Lu.newName(),o=[Tb.of(i),Nm.of(bC(`.${i}`,t))];return r&&r.dark&&o.push(vC.of(!0)),o}static baseTheme(t){return hh.lowest(Nm.of(bC("."+yC,t,MP)))}static findFromDOM(t){var r;let i=t.querySelector(".cm-content");return(null===(r=(i&&Kr.get(i)||Kr.get(t))?.rootView)||void 0===r?void 0:r.view)||null}}return n.styleModule=Nm,n.inputHandler=TR,n.focusChangeEffect=kR,n.perLineTextDirection=IR,n.exceptionSink=AR,n.updateListener=sC,n.editable=wb,n.mouseSelectionStyle=MR,n.dragMovesSelection=SR,n.clickAddsSelectionRange=CR,n.decorations=Pm,n.atomicRanges=NR,n.scrollMargins=LR,n.darkTheme=vC,n.contentAttributes=_b,n.editorAttributes=PR,n.lineWrapping=n.contentAttributes.of({class:"cm-lineWrapping"}),n.announce=Qn.define(),n})();const e6=4096,kP={};class kb{constructor(e,t,r,i){this.from=e,this.to=t,this.dir=r,this.order=i}static update(e,t){if(t.empty)return e;let r=[],i=e.length?e[e.length-1].dir:pi.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let a=e[o];a.dir==i&&!t.touchesRange(a.from,a.to)&&r.push(new kb(t.mapPos(a.from,1),t.mapPos(a.to,-1),a.dir,a.order))}return r}}function IP(n,e,t){for(let r=n.state.facet(e),i=r.length-1;i>=0;i--){let o=r[i],a="function"==typeof o?o(n):o;a&&tC(a,t)}return t}const t6=un.mac?"mac":un.windows?"win":un.linux?"linux":"key";function Ib(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),!1!==t&&e.shiftKey&&(n="Shift-"+n),n}const Ob=ln.define({enables:hh.default(Rn.domEventHandlers({keydown:(n,e)=>PP(RP(e.state),n,e,"editor")}))}),OP=new WeakMap;function RP(n){let e=n.facet(Ob),t=OP.get(e);return t||OP.set(e,t=function s6(n,e=t6){let t=Object.create(null),r=Object.create(null),i=(a,u)=>{let h=r[a];if(null==h)r[a]=u;else if(h!=u)throw new Error("Key binding "+a+" is used both as a regular binding and as a multi-stroke prefix")},o=(a,u,h,m)=>{var v,x;let k=t[a]||(t[a]=Object.create(null)),F=u.split(/ (?!$)/).map(me=>function n6(n,e){const t=n.split(/-(?!$)/);let i,o,a,u,r=t[t.length-1];"Space"==r&&(r=" ");for(let h=0;h<t.length-1;++h){const m=t[h];if(/^(cmd|meta|m)$/i.test(m))u=!0;else if(/^a(lt)?$/i.test(m))i=!0;else if(/^(c|ctrl|control)$/i.test(m))o=!0;else if(/^s(hift)?$/i.test(m))a=!0;else{if(!/^mod$/i.test(m))throw new Error("Unrecognized modifier name: "+m);"mac"==e?u=!0:o=!0}}return i&&(r="Alt-"+r),o&&(r="Ctrl-"+r),u&&(r="Meta-"+r),a&&(r="Shift-"+r),r}(me,e));for(let me=1;me<F.length;me++){let Oe=F.slice(0,me).join(" ");i(Oe,!0),k[Oe]||(k[Oe]={preventDefault:!0,run:[Ke=>{let Ge=zu={view:Ke,prefix:Oe,scope:a};return setTimeout(()=>{zu==Ge&&(zu=null)},4e3),!0}]})}let Y=F.join(" ");i(Y,!1);let ie=k[Y]||(k[Y]={preventDefault:!1,run:(null===(x=null===(v=k._any)||void 0===v?void 0:v.run)||void 0===x?void 0:x.slice())||[]});h&&ie.run.push(h),m&&(ie.preventDefault=!0)};for(let a of n){let u=a.scope?a.scope.split(" "):["editor"];if(a.any)for(let m of u){let v=t[m]||(t[m]=Object.create(null));v._any||(v._any={preventDefault:!1,run:[]});for(let x in v)v[x].run.push(a.any)}let h=a[e]||a.key;if(h)for(let m of u)o(m,h,a.run,a.preventDefault),a.shift&&o(m,"Shift-"+h,a.shift,a.preventDefault)}return t}(e.reduce((r,i)=>r.concat(i),[]))),t}let zu=null;function PP(n,e,t,r){let i=function G8(n){var t=!(U8&&(n.ctrlKey||n.altKey||n.metaKey)||j8&&n.shiftKey&&n.key&&1==n.key.length||"Unidentified"==n.key)&&n.key||(n.shiftKey?Tm:Fu)[n.keyCode]||n.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(e),a=ga(xo(i,0))==i.length&&" "!=i,u="",h=!1;zu&&zu.view==t&&zu.scope==r&&(u=zu.prefix+" ",(h=nP.indexOf(e.keyCode)<0)&&(zu=null));let k,F,m=new Set,v=Y=>{if(Y){for(let ie of Y.run)if(!m.has(ie)&&(m.add(ie),ie(t,e)))return!0;Y.preventDefault&&(h=!0)}return!1},x=n[r];if(x){if(v(x[u+Ib(i,e,!a)]))return!0;if(a&&(e.altKey||e.metaKey||e.ctrlKey)&&!(un.windows&&e.ctrlKey&&e.altKey)&&(k=Fu[e.keyCode])&&k!=i){if(v(x[u+Ib(k,e,!0)]))return!0;if(e.shiftKey&&(F=Tm[e.keyCode])!=i&&F!=k&&v(x[u+Ib(F,e,!1)]))return!0}else if(a&&e.shiftKey&&v(x[u+Ib(i,e,!0)]))return!0;if(v(x._any))return!0}return h}class Fm{constructor(e,t,r,i,o){this.className=e,this.left=t,this.top=r,this.width=i,this.height=o}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className==this.className&&(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",null!=this.width&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,r){if(r.empty){let i=e.coordsAtPos(r.head,r.assoc||1);if(!i)return[];let o=NP(e);return[new Fm(t,i.left-o.left,i.top-o.top,null,i.bottom-i.top)]}return function a6(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let r=Math.max(t.from,n.viewport.from),i=Math.min(t.to,n.viewport.to),o=n.textDirection==pi.LTR,a=n.contentDOM,u=a.getBoundingClientRect(),h=NP(n),m=a.querySelector(".cm-line"),v=m&&window.getComputedStyle(m),x=u.left+(v?parseInt(v.paddingLeft)+Math.min(0,parseInt(v.textIndent)):0),k=u.right-(v?parseInt(v.paddingRight):0),F=FP(n,r),Y=FP(n,i),ie=F.type==zr.Text?F:null,me=Y.type==zr.Text?Y:null;if(n.lineWrapping&&(ie&&(ie=LP(n,r,ie)),me&&(me=LP(n,i,me))),ie&&me&&ie.from==me.from)return Ke(Ge(t.from,t.to,ie));{let wt=ie?Ge(t.from,null,ie):ot(F,!1),Et=me?Ge(null,t.to,me):ot(Y,!0),Kt=[];return(ie||F).to<(me||Y).from-1?Kt.push(Oe(x,wt.bottom,k,Et.top)):wt.bottom<Et.top&&n.elementAtHeight((wt.bottom+Et.top)/2).type==zr.Text&&(wt.bottom=Et.top=(wt.bottom+Et.top)/2),Ke(wt).concat(Kt).concat(Ke(Et))}function Oe(wt,Et,Kt,sr){return new Fm(e,wt-h.left,Et-h.top-.01,Kt-wt,sr-Et+.01)}function Ke({top:wt,bottom:Et,horizontal:Kt}){let sr=[];for(let Cn=0;Cn<Kt.length;Cn+=2)sr.push(Oe(Kt[Cn],wt,Kt[Cn+1],Et));return sr}function Ge(wt,Et,Kt){let sr=1e9,Cn=-1e9,Mn=[];function Nr(Mo,Vi,Ut,sn,an){let vn=n.coordsAtPos(Mo,Mo==Kt.to?-2:2),Jn=n.coordsAtPos(Ut,Ut==Kt.from?2:-2);sr=Math.min(vn.top,Jn.top,sr),Cn=Math.max(vn.bottom,Jn.bottom,Cn),an==pi.LTR?Mn.push(o&&Vi?x:vn.left,o&&sn?k:Jn.right):Mn.push(!o&&sn?x:Jn.left,!o&&Vi?k:vn.right)}let Zr=wt??Kt.from,si=Et??Kt.to;for(let Mo of n.visibleRanges)if(Mo.to>Zr&&Mo.from<si)for(let Vi=Math.max(Mo.from,Zr),Ut=Math.min(Mo.to,si);;){let sn=n.state.doc.lineAt(Vi);for(let an of n.bidiSpans(sn)){let vn=an.from+sn.from,Jn=an.to+sn.from;if(vn>=Ut)break;Jn>Vi&&Nr(Math.max(vn,Vi),null==wt&&vn<=Zr,Math.min(Jn,Ut),null==Et&&Jn>=si,an.dir)}if(Vi=sn.to+1,Vi>=Ut)break}return 0==Mn.length&&Nr(Zr,null==wt,si,null==Et,n.textDirection),{top:sr,bottom:Cn,horizontal:Mn}}function ot(wt,Et){let Kt=u.top+(Et?wt.top:wt.bottom);return{top:Kt,bottom:Kt,horizontal:[]}}}(e,t,r)}}function NP(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==pi.LTR?e.left:e.right-n.scrollDOM.clientWidth)-n.scrollDOM.scrollLeft,top:e.top-n.scrollDOM.scrollTop}}function LP(n,e,t){let r=Ct.cursor(e);return{from:Math.max(t.from,n.moveToLineBoundary(r,!1,!0).from),to:Math.min(t.to,n.moveToLineBoundary(r,!0,!0).from),type:zr.Text}}function FP(n,e){let t=n.lineBlockAt(e);if(Array.isArray(t.type))for(let r of t.type)if(r.to>e||r.to==e&&(r.to==t.to||r.type==zr.Text))return r;return t}class c6{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(Rb)!=e.state.facet(Rb)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&e.view.requestMeasure(this.measureReq)}setOrder(e){let t=0,r=e.facet(Rb);for(;t<r.length&&r[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}draw(e){if(e.length!=this.drawn.length||e.some((t,r)=>!function l6(n,e){return n.constructor==e.constructor&&n.eq(e)}(t,this.drawn[r]))){let t=this.dom.firstChild,r=0;for(let i of e)i.update&&t&&i.constructor&&this.drawn[r].constructor&&i.update(t,this.drawn[r])?(t=t.nextSibling,r++):this.dom.insertBefore(i.draw(),t);for(;t;){let i=t.nextSibling;t.remove(),t=i}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Rb=ln.define();function BP(n){return[_i.define(e=>new c6(e,n)),Rb.of(n)]}const VP=!un.ios,Bm=ln.define({combine:n=>tl(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})});function u6(n={}){return[Bm.of(n),d6,h6,f6,OR.of(!0)]}function HP(n){return n.startState.facet(Bm)!=n.state.facet(Bm)}const d6=BP({above:!0,markers(n){let{state:e}=n,t=e.facet(Bm),r=[];for(let i of e.selection.ranges){let o=i==e.selection.main;if(i.empty?!o||VP:t.drawRangeCursor){let a=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",u=i.empty?i:Ct.cursor(i.head,i.head>i.anchor?-1:1);for(let h of Fm.forRange(n,a,u))r.push(h)}}return r},update(n,e){n.transactions.some(r=>r.selection)&&(e.style.animationName="cm-blink"==e.style.animationName?"cm-blink2":"cm-blink");let t=HP(n);return t&&zP(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){zP(e.state,n)},class:"cm-cursorLayer"});function zP(n,e){e.style.animationDuration=n.facet(Bm).cursorBlinkRate+"ms"}const h6=BP({above:!1,markers:n=>n.state.selection.ranges.map(e=>e.empty?[]:Fm.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t)),update:(n,e)=>n.docChanged||n.selectionSet||n.viewportChanged||HP(n),class:"cm-selectionLayer"}),jP={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};VP&&(jP[".cm-line"].caretColor="transparent !important");const f6=hh.highest(Rn.theme(jP)),UP=Qn.define({map:(n,e)=>null==n?null:e.mapPos(n)}),Vm=Bi.define({create:()=>null,update:(n,e)=>(null!=n&&(n=e.changes.mapPos(n)),e.effects.reduce((t,r)=>r.is(UP)?r.value:t,n))}),p6=_i.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(Vm);null==t?null!=this.cursor&&(null===(e=this.cursor)||void 0===e||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(Vm)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let n=this.view.state.field(Vm),e=null!=n&&this.view.coordsAtPos(n);if(!e)return null;let t=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-t.left+this.view.scrollDOM.scrollLeft,top:e.top-t.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(n){this.cursor&&(n?(this.cursor.style.left=n.left+"px",this.cursor.style.top=n.top+"px",this.cursor.style.height=n.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(Vm)!=n&&this.view.dispatch({effects:UP.of(n)})}},{eventHandlers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function GP(n,e,t,r,i){e.lastIndex=0;for(let u,o=n.iterRange(t,r),a=t;!o.next().done;a+=o.value.length)if(!o.lineBreak)for(;u=e.exec(o.value);)i(a+u.index,u)}class _C{constructor(e){const{regexp:t,decoration:r,decorate:i,boundary:o,maxLength:a=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,i)this.addMatch=(u,h,m,v)=>i(v,m,m+u[0].length,u,h);else if("function"==typeof r)this.addMatch=(u,h,m,v)=>{let x=r(u,h,m);x&&v(m,m+u[0].length,x)};else{if(!r)throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.addMatch=(u,h,m,v)=>v(m,m+u[0].length,r)}this.boundary=o,this.maxLength=a}createDeco(e){let t=new Nu,r=t.add.bind(t);for(let{from:i,to:o}of function m6(n,e){let t=n.visibleRanges;if(1==t.length&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let r=[];for(let{from:i,to:o}of t)i=Math.max(n.state.doc.lineAt(i).from,i-e),o=Math.min(n.state.doc.lineAt(o).to,o+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=o:r.push({from:i,to:o});return r}(e,this.maxLength))GP(e.state.doc,this.regexp,i,o,(a,u)=>this.addMatch(u,e,a,r));return t.finish()}updateDeco(e,t){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((o,a,u,h)=>{h>e.view.viewport.from&&u<e.view.viewport.to&&(r=Math.min(u,r),i=Math.max(h,i))}),e.viewportChanged||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,t.map(e.changes),r,i):t}updateRange(e,t,r,i){for(let o of e.visibleRanges){let a=Math.max(o.from,r),u=Math.min(o.to,i);if(u>a){let h=e.state.doc.lineAt(a),m=h.to<u?e.state.doc.lineAt(u):h,v=Math.max(o.from,h.from),x=Math.min(o.to,m.to);if(this.boundary){for(;a>h.from;a--)if(this.boundary.test(h.text[a-1-h.from])){v=a;break}for(;u<m.to;u++)if(this.boundary.test(m.text[u-m.from])){x=u;break}}let F,k=[],Y=(ie,me,Oe)=>k.push(Oe.range(ie,me));if(h==m)for(this.regexp.lastIndex=v-h.from;(F=this.regexp.exec(h.text))&&F.index<x-h.from;)this.addMatch(F,e,F.index+h.from,Y);else GP(e.state.doc,this.regexp,v,x,(ie,me)=>this.addMatch(me,e,ie,Y));t=t.update({filterFrom:v,filterTo:x,filter:(ie,me)=>ie<v||me>x,add:k})}}return t}}const xC=null!=/x/.unicode?"gu":"g",v6=new RegExp("[\0-\b\n-\x1f\x7f-\x9f\xad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]",xC),y6={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let EC=null;const Pb=ln.define({combine(n){let e=tl(n,{render:null,specialChars:v6,addSpecialChars:null});return(e.replaceTabs=!function b6(){var n;if(null==EC&&typeof document<"u"&&document.body){let e=document.body.style;EC=null!=(null!==(n=e.tabSize)&&void 0!==n?n:e.MozTabSize)}return EC||!1}())&&(e.specialChars=new RegExp("\t|"+e.specialChars.source,xC)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,xC)),e}});function w6(n={}){return[Pb.of(n),$P||($P=_i.fromClass(class{constructor(n){this.view=n,this.decorations=dn.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(Pb)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new _C({regexp:n.specialChars,decoration:(e,t,r)=>{let{doc:i}=t.state,o=xo(e[0],0);if(9==o){let a=i.lineAt(r),u=t.state.tabSize,h=Am(a.text,u,r-a.from);return dn.replace({widget:new C6((u-h%u)*this.view.defaultCharacterWidth)})}return this.decorationCache[o]||(this.decorationCache[o]=dn.replace({widget:new D6(n,o)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(Pb);n.startState.facet(Pb)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))]}let $P=null;class D6 extends Lc{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=function E6(n){return n>=32?"\u2022":10==n?"\u2424":String.fromCharCode(9216+n)}(this.code),r=e.state.phrase("Control character")+" "+(y6[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,t);if(i)return i;let o=document.createElement("span");return o.textContent=t,o.title=r,o.setAttribute("aria-label",r),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class C6 extends Lc{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="\t",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}const M6=dn.line({class:"cm-activeLine"}),A6=_i.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let r of n.state.selection.ranges){let i=n.lineBlockAt(r.head);i.from>e&&(t.push(M6.range(i.from)),e=i.from)}return dn.set(t)}},{decorations:n=>n.decorations});function qP(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),r=n.state.doc.lineAt(t),i=t-r.from,o=i>2e3?-1:i==r.length?function I6(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}(n,e.clientX):Am(r.text,n.state.tabSize,t-r.from);return{line:r.number,col:o,off:i}}function R6(n){let e=n?.eventFilter||(t=>t.altKey&&0==t.button);return Rn.mouseSelectionStyle.of((t,r)=>e(r)?function O6(n,e){let t=qP(n,e),r=n.state.selection;return t?{update(i){if(i.docChanged){let o=i.changes.mapPos(i.startState.doc.line(t.line).from),a=i.state.doc.lineAt(o);t={line:a.number,col:t.col,off:Math.min(t.off,a.length)},r=r.map(i.changes)}},get(i,o,a){let u=qP(n,i);if(!u)return r;let h=function k6(n,e,t){let r=Math.min(e.line,t.line),i=Math.max(e.line,t.line),o=[];if(e.off>2e3||t.off>2e3||e.col<0||t.col<0){let a=Math.min(e.off,t.off),u=Math.max(e.off,t.off);for(let h=r;h<=i;h++){let m=n.doc.line(h);m.length<=u&&o.push(Ct.range(m.from+a,m.to+u))}}else{let a=Math.min(e.col,t.col),u=Math.max(e.col,t.col);for(let h=r;h<=i;h++){let m=n.doc.line(h),v=UD(m.text,a,n.tabSize,!0);if(v<0)o.push(Ct.cursor(m.to));else{let x=UD(m.text,u,n.tabSize);o.push(Ct.range(m.from+v,m.from+x))}}}return o}(n.state,t,u);return h.length?Ct.create(a?h.concat(r.ranges):h):r}}:null}(t,r):null)}const P6={Alt:[18,n=>n.altKey],Control:[17,n=>n.ctrlKey],Shift:[16,n=>n.shiftKey],Meta:[91,n=>n.metaKey]},N6={style:"cursor: crosshair"};function L6(n={}){let[e,t]=P6[n.key||"Alt"],r=_i.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventHandlers:{keydown(i){this.set(i.keyCode==e||t(i))},keyup(i){(i.keyCode==e||!t(i))&&this.set(!1)},mousemove(i){this.set(t(i))}}});return[r,Rn.contentAttributes.of(i=>{var o;return null!==(o=i.plugin(r))&&void 0!==o&&o.isDown?N6:null})]}const Nb="-10000px";class YP{constructor(e,t,r){this.facet=t,this.createTooltipView=r,this.input=e.state.facet(t),this.tooltips=this.input.filter(i=>i),this.tooltipViews=this.tooltips.map(r)}update(e){var t;let r=e.state.facet(this.facet),i=r.filter(a=>a);if(r===this.input){for(let a of this.tooltipViews)a.update&&a.update(e);return!1}let o=[];for(let a=0;a<i.length;a++){let u=i[a],h=-1;if(u){for(let m=0;m<this.tooltips.length;m++){let v=this.tooltips[m];v&&v.create==u.create&&(h=m)}if(h<0)o[a]=this.createTooltipView(u);else{let m=o[a]=this.tooltipViews[h];m.update&&m.update(e)}}}for(let a of this.tooltipViews)o.indexOf(a)<0&&(a.dom.remove(),null===(t=a.destroy)||void 0===t||t.call(a));return this.input=r,this.tooltips=i,this.tooltipViews=o,!0}}function F6(n){let{win:e}=n;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const Lb=ln.define({combine:n=>{var e,t,r;return{position:un.ios?"absolute":(null===(e=n.find(i=>i.position))||void 0===e?void 0:e.position)||"fixed",parent:(null===(t=n.find(i=>i.parent))||void 0===t?void 0:t.parent)||null,tooltipSpace:(null===(r=n.find(i=>i.tooltipSpace))||void 0===r?void 0:r.tooltipSpace)||F6}}}),XP=new WeakMap,CC=_i.fromClass(class{constructor(n){this.view=n,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(Lb);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new YP(n,Fb,t=>this.createTooltip(t)),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n);e&&this.observeIntersection();let t=e||n.geometryChanged,r=n.state.facet(Lb);if(r.position!=this.position){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;t=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n){let e=n.create(this.view);if(e.dom.classList.add("cm-tooltip"),n.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let t=document.createElement("div");t.className="cm-tooltip-arrow",e.dom.appendChild(t)}return e.dom.style.position=this.position,e.dom.style.top=Nb,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var n,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let t of this.manager.tooltipViews)t.dom.remove(),null===(n=t.destroy)||void 0===n||n.call(t);null===(e=this.intersectionObserver)||void 0===e||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=this.view.dom.getBoundingClientRect();return{editor:n,parent:this.parent?this.container.getBoundingClientRect():n,pos:this.manager.tooltips.map((e,t)=>{let r=this.manager.tooltipViews[t];return r.getCoords?r.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(Lb).tooltipSpace(this.view)}}writeMeasure(n){var e;let{editor:t,space:r}=n,i=[];for(let o=0;o<this.manager.tooltips.length;o++){let a=this.manager.tooltips[o],u=this.manager.tooltipViews[o],{dom:h}=u,m=n.pos[o],v=n.size[o];if(!m||m.bottom<=Math.max(t.top,r.top)||m.top>=Math.min(t.bottom,r.bottom)||m.right<Math.max(t.left,r.left)-.1||m.left>Math.min(t.right,r.right)+.1){h.style.top=Nb;continue}let x=a.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,k=x?7:0,F=v.right-v.left,Y=null!==(e=XP.get(u))&&void 0!==e?e:v.bottom-v.top,ie=u.offset||V6,me=this.view.textDirection==pi.LTR,Oe=v.width>r.right-r.left?me?r.left:r.right-v.width:me?Math.min(m.left-(x?14:0)+ie.x,r.right-F):Math.max(r.left,m.left-F+(x?14:0)-ie.x),Ke=!!a.above;!a.strictSide&&(Ke?m.top-(v.bottom-v.top)-ie.y<r.top:m.bottom+(v.bottom-v.top)+ie.y>r.bottom)&&Ke==r.bottom-m.bottom>m.top-r.top&&(Ke=!Ke);let Ge=(Ke?m.top-r.top:r.bottom-m.bottom)-k;if(Ge<Y&&!1!==u.resize){if(Ge<this.view.defaultLineHeight){h.style.top=Nb;continue}XP.set(u,Y),h.style.height=(Y=Ge)+"px"}else h.style.height&&(h.style.height="");let ot=Ke?m.top-Y-k-ie.y:m.bottom+k+ie.y,wt=Oe+F;if(!0!==u.overlap)for(let Et of i)Et.left<wt&&Et.right>Oe&&Et.top<ot+Y&&Et.bottom>ot&&(ot=Ke?Et.top-Y-2-k:Et.bottom+k+2);"absolute"==this.position?(h.style.top=ot-n.parent.top+"px",h.style.left=Oe-n.parent.left+"px"):(h.style.top=ot+"px",h.style.left=Oe+"px"),x&&(x.style.left=m.left+(me?ie.x:-ie.x)-(Oe+14-7)+"px"),!0!==u.overlap&&i.push({left:Oe,top:ot,right:wt,bottom:ot+Y}),h.classList.toggle("cm-tooltip-above",Ke),h.classList.toggle("cm-tooltip-below",!Ke),u.positioned&&u.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=Nb}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),V6={x:0,y:0},Fb=ln.define({enables:[CC,Rn.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}})]}),Hm=ln.define();class SC{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new YP(e,Hm,t=>this.createHostedView(t))}static create(e){return new SC(e)}createHostedView(e){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}}const H6=Fb.compute([Hm],n=>{let e=n.facet(Hm).filter(t=>t);return 0===e.length?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.filter(t=>null!=t.end).map(t=>t.end)),create:SC.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class z6{constructor(e,t,r,i,o){this.view=e,this.source=t,this.field=r,this.setHover=i,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,t=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(null==t)return;let r=this.view.coordsAtPos(t);if(null==r||e.y<r.top||e.y>r.bottom||e.x<r.left-this.view.defaultCharacterWidth||e.x>r.right+this.view.defaultCharacterWidth)return;let i=this.view.bidiSpans(this.view.state.doc.lineAt(t)).find(u=>u.from<=t&&u.to>=t),o=i&&i.dir==pi.RTL?-1:1,a=this.source(this.view,t,e.x<r.left?-o:o);if(a?.then){let u=this.pending={pos:t};a.then(h=>{this.pending==u&&(this.pending=null,h&&this.view.dispatch({effects:this.setHover.of(h)}))},h=>Xs(this.view.state,h,"hover tooltip"))}else a&&this.view.dispatch({effects:this.setHover.of(a)})}mousemove(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let r=this.active;if(r&&!KP(this.lastMove.target)||this.pending){let{pos:i}=r||this.pending,o=null!==(t=r?.end)&&void 0!==t?t:i;(i==o?this.view.posAtCoords(this.lastMove)!=i:!function j6(n,e,t,r,i,o){let a=document.createRange(),u=n.domAtPos(e),h=n.domAtPos(t);a.setEnd(h.node,h.offset),a.setStart(u.node,u.offset);let m=a.getClientRects();a.detach();for(let v=0;v<m.length;v++){let x=m[v];if(Math.max(x.top-i,i-x.bottom,x.left-r,r-x.right)<=o)return!0}return!1}(this.view,i,o,e.clientX,e.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!KP(e.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function KP(n){for(let e=n;e;e=e.parentNode)if(1==e.nodeType&&e.classList.contains("cm-tooltip"))return!0;return!1}function U6(n,e={}){let t=Qn.define(),r=Bi.define({create:()=>null,update(i,o){if(i&&(e.hideOnChange&&(o.docChanged||o.selection)||e.hideOn&&e.hideOn(o,i)))return null;if(i&&o.docChanged){let a=o.changes.mapPos(i.pos,-1,as.TrackDel);if(null==a)return null;let u=Object.assign(Object.create(null),i);u.pos=a,null!=i.end&&(u.end=o.changes.mapPos(i.end)),i=u}for(let a of o.effects)a.is(t)&&(i=a.value),a.is($6)&&(i=null);return i},provide:i=>Hm.from(i)});return[r,_i.define(i=>new z6(i,n,r,t,e.hoverTime||300)),H6]}const $6=Qn.define(),MC=ln.define({combine(n){let e,t;for(let r of n)e=e||r.topContainer,t=t||r.bottomContainer;return{topContainer:e,bottomContainer:t}}});function zm(n,e){let t=n.plugin(ZP),r=t?t.specs.indexOf(e):-1;return r>-1?t.panels[r]:null}const ZP=_i.fromClass(class{constructor(n){this.input=n.state.facet(jm),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(MC);this.top=new Bb(n,!0,e.topContainer),this.bottom=new Bb(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(MC);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Bb(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Bb(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(jm);if(t!=this.input){let r=t.filter(h=>h),i=[],o=[],a=[],u=[];for(let h of r){let v,m=this.specs.indexOf(h);m<0?(v=h(n.view),u.push(v)):(v=this.panels[m],v.update&&v.update(n)),i.push(v),(v.top?o:a).push(v)}this.specs=r,this.panels=i,this.top.sync(o),this.bottom.sync(a);for(let h of u)h.dom.classList.add("cm-panel"),h.mount&&h.mount()}else for(let r of this.panels)r.update&&r.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>Rn.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class Bb{constructor(e,t,r){this.view=e,this.top=t,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=QP(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=QP(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function QP(n){let e=n.nextSibling;return n.remove(),e}const jm=ln.define({enables:ZP});class $l extends fh{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}$l.prototype.elementClass="",$l.prototype.toDOM=void 0,$l.prototype.mapMode=as.TrackBefore,$l.prototype.startSide=$l.prototype.endSide=-1,$l.prototype.point=!0;const Vb=ln.define(),W6={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>fi.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Um=ln.define();function JP(n){return[eN(),Um.of(Object.assign(Object.assign({},W6),n))]}const AC=ln.define({combine:n=>n.some(e=>e)});function eN(n){let e=[q6];return n&&!1===n.fixed&&e.push(AC.of(!0)),e}const q6=_i.fromClass(class{constructor(n){this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=n.state.facet(Um).map(e=>new rN(n,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!n.state.facet(AC),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,r=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(r<.8*(t.to-t.from))}n.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(AC)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&this.dom.remove();let t=fi.iter(this.view.state.facet(Vb),this.view.viewport.from),r=[],i=this.gutters.map(o=>new Y6(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks){let a;if(Array.isArray(o.type)){for(let u of o.type)if(u.type==zr.Text){a=u;break}}else a=o.type==zr.Text?o:void 0;if(a){r.length&&(r=[]),nN(t,r,o.from);for(let u of i)u.line(this.view,a,r)}}for(let o of i)o.finish();n&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(n){let e=n.startState.facet(Um),t=n.state.facet(Um),r=n.docChanged||n.heightChanged||n.viewportChanged||!fi.eq(n.startState.facet(Vb),n.state.facet(Vb),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let i of this.gutters)i.update(n)&&(r=!0);else{r=!0;let i=[];for(let o of t){let a=e.indexOf(o);a<0?i.push(new rN(this.view,o)):(this.gutters[a].update(n),i.push(this.gutters[a]))}for(let o of this.gutters)o.dom.remove(),i.indexOf(o)<0&&o.destroy();for(let o of i)this.dom.appendChild(o.dom);this.gutters=i}return r}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove()}},{provide:n=>Rn.scrollMargins.of(e=>{let t=e.plugin(n);return t&&0!=t.gutters.length&&t.fixed?e.textDirection==pi.LTR?{left:t.dom.offsetWidth}:{right:t.dom.offsetWidth}:null})});function tN(n){return Array.isArray(n)?n:[n]}function nN(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class Y6{constructor(e,t,r){this.gutter=e,this.height=r,this.i=0,this.cursor=fi.iter(e.markers,t.from)}line(e,t,r){let i=[];nN(this.cursor,i,t.from),r.length&&(i=i.concat(r));let o=this.gutter.config.lineMarker(e,t,i);o&&i.unshift(o);let a=this.gutter;if(0==i.length&&!a.config.renderEmptyElements)return;let u=t.top-this.height;if(this.i==a.elements.length){let h=new iN(e,t.height,u,i);a.elements.push(h),a.dom.appendChild(h.dom)}else a.elements[this.i].update(e,t.height,u,i);this.height=t.bottom,this.i++}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class rN{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in t.domEventHandlers)this.dom.addEventListener(r,i=>{let a,o=i.target;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let h=o.getBoundingClientRect();a=(h.top+h.bottom)/2}else a=i.clientY;let u=e.lineBlockAtHeight(a-e.documentTop);t.domEventHandlers[r](e,u,i)&&i.preventDefault()});this.markers=tN(t.markers(e)),t.initialSpacer&&(this.spacer=new iN(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=tN(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!fi.eq(this.markers,t,r.from,r.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)}destroy(){for(let e of this.elements)e.destroy()}}class iN{constructor(e,t,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,r,i)}update(e,t,r,i){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),function X6(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,t){let r="cm-gutterElement",i=this.dom.firstChild;for(let o=0,a=0;;){let u=a,h=o<t.length?t[o++]:null,m=!1;if(h){let v=h.elementClass;v&&(r+=" "+v);for(let x=a;x<this.markers.length;x++)if(this.markers[x].compare(h)){u=x,m=!0;break}}else u=this.markers.length;for(;a<u;){let v=this.markers[a++];if(v.toDOM){v.destroy(i);let x=i.nextSibling;i.remove(),i=x}}if(!h)break;h.toDOM&&(m?i=i.nextSibling:this.dom.insertBefore(h.toDOM(e),i)),m&&a++}this.dom.className=r,this.markers=t}destroy(){this.setMarkers(null,[])}}const K6=ln.define(),cp=ln.define({combine:n=>tl(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let r=Object.assign({},e);for(let i in t){let o=r[i],a=t[i];r[i]=o?(u,h,m)=>o(u,h,m)||a(u,h,m):a}return r}})});class TC extends $l{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function kC(n,e){return n.state.facet(cp).formatNumber(e,n.state)}const Z6=Um.compute([cp],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers:e=>e.state.facet(K6),lineMarker:(e,t,r)=>r.some(i=>i.toDOM)?null:new TC(kC(e,e.state.doc.lineAt(t.from).number)),lineMarkerChange:e=>e.startState.facet(cp)!=e.state.facet(cp),initialSpacer:e=>new TC(kC(e,oN(e.state.doc.lines))),updateSpacer(e,t){let r=kC(t.view,oN(t.view.state.doc.lines));return r==e.number?e:new TC(r)},domEventHandlers:n.facet(cp).domEventHandlers}));function Q6(n={}){return[cp.of(n),eN(),Z6]}function oN(n){let e=9;for(;e<n;)e=10*e+9;return e}const J6=new class extends $l{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},e9=Vb.compute(["selection"],n=>{let e=[],t=-1;for(let r of n.selection.ranges){let i=n.doc.lineAt(r.head).from;i>t&&(t=i,e.push(J6.range(i)))}return fi.of(e)}),lN=1024;let o9=0;class ma{constructor(e,t){this.from=e,this.to=t}}class zn{constructor(e={}){this.id=o9++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=us.match(e)),t=>{let r=e(t);return void 0===r?null:[this,r]}}}zn.closedBy=new zn({deserialize:n=>n.split(" ")}),zn.openedBy=new zn({deserialize:n=>n.split(" ")}),zn.group=new zn({deserialize:n=>n.split(" ")}),zn.contextHash=new zn({perNode:!0}),zn.lookAhead=new zn({perNode:!0}),zn.mounted=new zn({perNode:!0});const a9=Object.create(null);class us{constructor(e,t,r,i=0){this.name=e,this.props=t,this.id=r,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):a9,i=new us(e.name||"",t,e.id,(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0));if(e.props)for(let o of e.props)if(Array.isArray(o)||(o=o(i)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[o[0].id]=o[1]}return i}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(zn.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let i of r.split(" "))t[i]=e[r];return r=>{for(let i=r.prop(zn.group),o=-1;o<(i?i.length:0);o++){let a=t[o<0?r.name:i[o]];if(a)return a}}}}us.none=new us("",Object.create(null),0,8);class Hb{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let r of this.types){let i=null;for(let o of e){let a=o(r);a&&(i||(i=Object.assign({},r.props)),i[a[0].id]=a[1])}t.push(i?new us(r.name,i,r.id,r.flags):r)}return new Hb(t)}}const zb=new WeakMap,cN=new WeakMap;var oi=(()=>{return(n=oi||(oi={}))[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays",oi;var n})();class mi{constructor(e,t,r,i,o){if(this.type=e,this.children=t,this.positions=r,this.length=i,this.props=null,o&&o.length){this.props=Object.create(null);for(let[a,u]of o)this.props["number"==typeof a?a:a.id]=u}}toString(){let e=this.prop(zn.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let r of this.children){let i=r.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Gm(this.topNode,e)}cursorAt(e,t=0,r=0){let i=zb.get(this)||this.topNode,o=new Gm(i);return o.moveTo(e,t),zb.set(this,o._tree),o}get topNode(){return new va(this,0,0,null)}resolve(e,t=0){let r=up(zb.get(this)||this.topNode,e,t,!1);return zb.set(this,r),r}resolveInner(e,t=0){let r=up(cN.get(this)||this.topNode,e,t,!0);return cN.set(this,r),r}iterate(e){let{enter:t,leave:r,from:i=0,to:o=this.length}=e;for(let a=this.cursor((e.mode||0)|oi.IncludeAnonymous);;){let u=!1;if(a.from<=o&&a.to>=i&&(a.type.isAnonymous||!1!==t(a))){if(a.firstChild())continue;u=!0}for(;u&&r&&!a.type.isAnonymous&&r(a),!a.nextSibling();){if(!a.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:RC(us.none,this.children,this.positions,0,this.children.length,0,this.length,(t,r,i)=>new mi(this.type,t,r,i,this.propValues),e.makeTree||((t,r,i)=>new mi(us.none,t,r,i)))}static build(e){return function c9(n){var e;let{buffer:t,nodeSet:r,maxBufferLength:i=lN,reused:o=[],minRepeatType:a=r.types.length}=n,u=Array.isArray(t)?new IC(t,t.length):t,h=r.types,m=0,v=0;function x(ot,wt,Et,Kt,sr){let{id:Cn,start:Mn,end:Nr,size:Zr}=u,si=v;for(;Zr<0;){if(u.next(),-1==Zr)return Et.push(o[Cn]),void Kt.push(Mn-ot);if(-3==Zr)return void(m=Cn);if(-4==Zr)return void(v=Cn);throw new RangeError(`Unrecognized record size: ${Zr}`)}let Vi,Ut,Mo=h[Cn],sn=Mn-ot;if(Nr-Mn<=i&&(Ut=function ie(ot,wt){let Et=u.fork(),Kt=0,sr=0,Cn=0,Mn=Et.end-i,Nr={size:0,start:0,skip:0};e:for(let Zr=Et.pos-ot;Et.pos>Zr;){let si=Et.size;if(Et.id==wt&&si>=0){Nr.size=Kt,Nr.start=sr,Nr.skip=Cn,Cn+=4,Kt+=4,Et.next();continue}let Mo=Et.pos-si;if(si<0||Mo<Zr||Et.start<Mn)break;let Vi=Et.id>=a?4:0,Ut=Et.start;for(Et.next();Et.pos>Mo;){if(Et.size<0){if(-3!=Et.size)break e;Vi+=4}else Et.id>=a&&(Vi+=4);Et.next()}sr=Ut,Kt+=si,Cn+=Vi}return(wt<0||Kt==ot)&&(Nr.size=Kt,Nr.start=sr,Nr.skip=Cn),Nr.size>4?Nr:void 0}(u.pos-wt,sr))){let an=new Uint16Array(Ut.size-Ut.skip),vn=u.pos-Ut.size,Jn=an.length;for(;u.pos>vn;)Jn=me(Ut.start,an,Jn);Vi=new vh(an,Nr-Ut.start,r),sn=Ut.start-ot}else{let an=u.pos-Zr;u.next();let vn=[],Jn=[],ao=Cn>=a?Cn:-1,Hi=0,ta=Nr;for(;u.pos>an;)ao>=0&&u.id==ao&&u.size>=0?(u.end<=ta-i&&(F(vn,Jn,Mn,Hi,u.end,ta,ao,si),Hi=vn.length,ta=u.end),u.next()):x(Mn,an,vn,Jn,ao);if(ao>=0&&Hi>0&&Hi<vn.length&&F(vn,Jn,Mn,Hi,Mn,ta,ao,si),vn.reverse(),Jn.reverse(),ao>-1&&Hi>0){let Wr=function k(ot){return(wt,Et,Kt)=>{let Mn,Nr,sr=0,Cn=wt.length-1;if(Cn>=0&&(Mn=wt[Cn])instanceof mi){if(!Cn&&Mn.type==ot&&Mn.length==Kt)return Mn;(Nr=Mn.prop(zn.lookAhead))&&(sr=Et[Cn]+Mn.length+Nr)}return Y(ot,wt,Et,Kt,sr)}}(Mo);Vi=RC(Mo,vn,Jn,0,vn.length,0,Nr-Mn,Wr,Wr)}else Vi=Y(Mo,vn,Jn,Nr-Mn,si-Nr)}Et.push(Vi),Kt.push(sn)}function F(ot,wt,Et,Kt,sr,Cn,Mn,Nr){let Zr=[],si=[];for(;ot.length>Kt;)Zr.push(ot.pop()),si.push(wt.pop()+Et-sr);ot.push(Y(r.types[Mn],Zr,si,Cn-sr,Nr-Cn)),wt.push(sr-Et)}function Y(ot,wt,Et,Kt,sr=0,Cn){if(m){let Mn=[zn.contextHash,m];Cn=Cn?[Mn].concat(Cn):[Mn]}if(sr>25){let Mn=[zn.lookAhead,sr];Cn=Cn?[Mn].concat(Cn):[Mn]}return new mi(ot,wt,Et,Kt,Cn)}function me(ot,wt,Et){let{id:Kt,start:sr,end:Cn,size:Mn}=u;if(u.next(),Mn>=0&&Kt<a){let Nr=Et;if(Mn>4){let Zr=u.pos-(Mn-4);for(;u.pos>Zr;)Et=me(ot,wt,Et)}wt[--Et]=Nr,wt[--Et]=Cn-ot,wt[--Et]=sr-ot,wt[--Et]=Kt}else-3==Mn?m=Kt:-4==Mn&&(v=Kt);return Et}let Oe=[],Ke=[];for(;u.pos>0;)x(n.start||0,n.bufferStart||0,Oe,Ke,-1);let Ge=null!==(e=n.length)&&void 0!==e?e:Oe.length?Ke[0]+Oe[0].length:0;return new mi(h[n.topID],Oe.reverse(),Ke.reverse(),Ge)}(e)}}mi.empty=new mi(us.none,[],[],0);class IC{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new IC(this.buffer,this.index)}}class vh{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return us.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let r=this.buffer[e+3],i=this.set.types[this.buffer[e]],o=i.name;if(/\W/.test(o)&&!i.isError&&(o=JSON.stringify(o)),r==(e+=4))return o;let a=[];for(;e<r;)a.push(this.childString(e)),e=this.buffer[e+3];return o+"("+a.join(",")+")"}findChild(e,t,r,i,o){let{buffer:a}=this,u=-1;for(let h=e;h!=t&&!(uN(o,i,a[h+1],a[h+2])&&(u=h,r>0));h=a[h+3]);return u}slice(e,t,r){let i=this.buffer,o=new Uint16Array(t-e),a=0;for(let u=e,h=0;u<t;){o[h++]=i[u++],o[h++]=i[u++]-r;let m=o[h++]=i[u++]-r;o[h++]=i[u++]-e,a=Math.max(a,m)}return new vh(o,a,this.set)}}function uN(n,e,t,r){switch(n){case-2:return t<e;case-1:return r>=e&&t<e;case 0:return t<e&&r>e;case 1:return t<=e&&r>e;case 2:return r>e;case 4:return!0}}function dN(n,e){let t=n.childBefore(e);for(;t;){let r=t.lastChild;if(!r||r.to!=t.to)break;r.type.isError&&r.from==r.to?(n=t,t=r.prevSibling):t=r}return n}function up(n,e,t,r){for(var i;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let a=!r&&n instanceof va&&n.index<0?null:n.parent;if(!a)return n;n=a}let o=r?0:oi.IgnoreOverlays;if(r)for(let a=n,u=a.parent;u;a=u,u=a.parent)a instanceof va&&a.index<0&&(null===(i=u.enter(e,t,o))||void 0===i?void 0:i.from)!=a.from&&(n=u);for(;;){let a=n.enter(e,t,o);if(!a)return n;n=a}}class va{constructor(e,t,r,i){this._tree=e,this.from=t,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,i,o=0){for(let a=this;;){for(let{children:u,positions:h}=a._tree,m=t>0?u.length:-1;e!=m;e+=t){let v=u[e],x=h[e]+a.from;if(uN(i,r,x,x+v.length))if(v instanceof vh){if(o&oi.ExcludeBuffers)continue;let k=v.findChild(0,v.buffer.length,t,r-x,i);if(k>-1)return new Wl(new l9(a,v,e,x),null,k)}else if(o&oi.IncludeAnonymous||!v.type.isAnonymous||OC(v)){let k;if(!(o&oi.IgnoreMounts)&&v.props&&(k=v.prop(zn.mounted))&&!k.overlay)return new va(k.tree,x,e,a);let F=new va(v,x,e,a);return o&oi.IncludeAnonymous||!F.type.isAnonymous?F:F.nextChild(t<0?v.children.length-1:0,t,r,i)}}if(o&oi.IncludeAnonymous||!a.type.isAnonymous||(e=a.index>=0?a.index+t:t<0?-1:a._parent._tree.children.length,a=a._parent,!a))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,r=0){let i;if(!(r&oi.IgnoreOverlays)&&(i=this._tree.prop(zn.mounted))&&i.overlay){let o=e-this.from;for(let{from:a,to:u}of i.overlay)if((t>0?a<=o:a<o)&&(t<0?u>=o:u>o))return new va(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new Gm(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return up(this,e,t,!1)}resolveInner(e,t=0){return up(this,e,t,!0)}enterUnfinishedNodesBefore(e){return dN(this,e)}getChild(e,t=null,r=null){let i=jb(this,e,t,r);return i.length?i[0]:null}getChildren(e,t=null,r=null){return jb(this,e,t,r)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return Ub(this,e)}}function jb(n,e,t,r){let i=n.cursor(),o=[];if(!i.firstChild())return o;if(null!=t)for(;!i.type.is(t);)if(!i.nextSibling())return o;for(;;){if(null!=r&&i.type.is(r))return o;if(i.type.is(e)&&o.push(i.node),!i.nextSibling())return null==r?o:[]}}function Ub(n,e,t=e.length-1){for(let r=n.parent;t>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[t]&&e[t]!=r.name)return!1;t--}}return!0}class l9{constructor(e,t,r,i){this.parent=e,this.buffer=t,this.index=r,this.start=i}}class Wl{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,r){this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,t,r){let{buffer:i}=this.context,o=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,r);return o<0?null:new Wl(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,r=0){if(r&oi.ExcludeBuffers)return null;let{buffer:i}=this.context,o=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return o<0?null:new Wl(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Wl(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Wl(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new Gm(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,i=this.index+4,o=r.buffer[this.index+3];return o>i&&(e.push(r.slice(i,o,r.buffer[this.index+1])),t.push(0)),new mi(this.type,e,t,this.to-this.from)}resolve(e,t=0){return up(this,e,t,!1)}resolveInner(e,t=0){return up(this,e,t,!0)}enterUnfinishedNodesBefore(e){return dN(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,r=null){let i=jb(this,e,t,r);return i.length?i[0]:null}getChildren(e,t=null,r=null){return jb(this,e,t,r)}get node(){return this}matchContext(e){return Ub(this,e)}}class Gm{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof va)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return!!e&&(e instanceof va?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:i}=this.buffer,o=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,r);return!(o<0)&&(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?!(r&oi.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&oi.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&oi.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{let i=t.buffer[this.index+3];if(i<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(i.buffer.buffer[o+3]<this.index)return!1;({index:t,parent:r}=i)}else({index:t,_parent:r}=this._tree);for(;r;({index:t,_parent:r}=r))if(t>-1)for(let o=t+e,a=e<0?-1:r._tree.children.length;o!=a;o+=e){let u=r._tree.children[o];if(this.mode&oi.IncludeAnonymous||u instanceof vh||!u.type.isAnonymous||OC(u))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,o=this.stack.length;o>=0;){for(let a=e;a;a=a._parent)if(a.index==i){if(i==this.index)return a;t=a,r=o+1;break e}i=this.stack[--o]}for(let i=r;i<this.stack.length;i++)t=new Wl(this.buffer,t,this.stack[i]);return this.bufferNode=new Wl(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let i=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;i&&t&&t(this),i=this.type.isAnonymous,!this.nextSibling();){if(!r)return;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return Ub(this.node,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let i=e.length-1,o=this.stack.length-1;i>=0;o--){if(o<0)return Ub(this.node,e,i);let a=r[t.buffer[this.stack[o]]];if(!a.isAnonymous){if(e[i]&&e[i]!=a.name)return!1;i--}}return!0}}function OC(n){return n.children.some(e=>e instanceof vh||!e.type.isAnonymous||OC(e))}const hN=new WeakMap;function Gb(n,e){if(!n.isAnonymous||e instanceof vh||e.type!=n)return 1;let t=hN.get(e);if(null==t){t=1;for(let r of e.children){if(r.type!=n||!(r instanceof mi)){t=1;break}t+=Gb(n,r)}hN.set(e,t)}return t}function RC(n,e,t,r,i,o,a,u,h){let m=0;for(let Y=r;Y<i;Y++)m+=Gb(n,e[Y]);let v=Math.ceil(1.5*m/8),x=[],k=[];return function F(Y,ie,me,Oe,Ke){for(let Ge=me;Ge<Oe;){let ot=Ge,wt=ie[Ge],Et=Gb(n,Y[Ge]);for(Ge++;Ge<Oe;Ge++){let Kt=Gb(n,Y[Ge]);if(Et+Kt>=v)break;Et+=Kt}if(Ge==ot+1){if(Et>v){let Kt=Y[ot];F(Kt.children,Kt.positions,0,Kt.children.length,ie[ot]+Ke);continue}x.push(Y[ot])}else x.push(RC(n,Y,ie,ot,Ge,wt,ie[Ge-1]+Y[Ge-1].length-wt,null,h));k.push(wt+Ke-o)}}(e,t,r,i,0),(u||h)(x,k,a)}class Bc{constructor(e,t,r,i,o=!1,a=!1){this.from=e,this.to=t,this.tree=r,this.offset=i,this.open=(o?1:0)|(a?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(e,t=[],r=!1){let i=[new Bc(0,e.length,e,0,!1,r)];for(let o of t)o.to>e.length&&i.push(o);return i}static applyChanges(e,t,r=128){if(!t.length)return e;let i=[],o=1,a=e.length?e[0]:null;for(let u=0,h=0,m=0;;u++){let v=u<t.length?t[u]:null,x=v?v.fromA:1e9;if(x-h>=r)for(;a&&a.from<x;){let k=a;if(h>=k.from||x<=k.to||m){let F=Math.max(k.from,h)-m,Y=Math.min(k.to,x)-m;k=F>=Y?null:new Bc(F,Y,k.tree,k.offset+m,u>0,!!v)}if(k&&i.push(k),a.to>x)break;a=o<e.length?e[o++]:null}if(!v)break;h=v.toA,m=v.toA-v.toB}return i}}class fN{startParse(e,t,r){return"string"==typeof e&&(e=new u9(e)),r=r?r.length?r.map(i=>new ma(i.from,i.to)):[new ma(0,0)]:[new ma(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let i=this.startParse(e,t,r);for(;;){let o=i.advance();if(o)return o}}}class u9{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new zn({perNode:!0});class $b{constructor(e,t,r,i,o,a,u,h,m,v=0,x){this.p=e,this.stack=t,this.state=r,this.reducePos=i,this.pos=o,this.score=a,this.buffer=u,this.bufferBase=h,this.curContext=m,this.lookAhead=v,this.parent=x}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,r=0){let i=e.parser.context;return new $b(e,[],t,r,r,0,[],0,i?new bN(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let r=e>>19,i=65535&e,{parser:o}=this.p,a=o.dynamicPrecedence(i);if(a&&(this.score+=a),0==r)return this.pushState(o.getGoto(this.state,i,!0),this.reducePos),i<o.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,4,!0),void this.reduceContext(i,this.reducePos);let u=this.stack.length-3*(r-1)-(262144&e?6:0),h=u?this.stack[u-2]:this.p.ranges[0].from,m=this.reducePos-h;m>=2e3&&(null===(t=this.p.parser.nodeSet.types[i])||void 0===t||!t.isAnonymous)&&(h==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=m):this.p.lastBigReductionSize<m&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=h,this.p.lastBigReductionSize=m));let x=this.bufferBase+this.buffer.length-(u?this.stack[u-1]:0);if(i<o.minRepeatTerm||131072&e){let k=o.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,h,k,x+4,!0)}for(this.state=262144&e?this.stack[u]:o.getGoto(this.stack[u-3],i,!0);this.stack.length>u;)this.stack.pop();this.reduceContext(i,h)}storeNode(e,t,r,i=4,o=!1){if(0==e&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let a=this,u=this.buffer.length;if(0==u&&a.parent&&(u=a.bufferBase-a.parent.bufferBase,a=a.parent),u>0&&0==a.buffer[u-4]&&a.buffer[u-1]>-1){if(t==r)return;if(a.buffer[u-2]>=t)return void(a.buffer[u-2]=r)}}if(o&&this.pos!=r){let a=this.buffer.length;if(a>0&&0!=this.buffer[a-4])for(;a>0&&this.buffer[a-2]>r;)this.buffer[a]=this.buffer[a-4],this.buffer[a+1]=this.buffer[a-3],this.buffer[a+2]=this.buffer[a-2],this.buffer[a+3]=this.buffer[a-1],a-=4,i>4&&(i-=4);this.buffer[a]=e,this.buffer[a+1]=t,this.buffer[a+2]=r,this.buffer[a+3]=i}else this.buffer.push(e,t,r,i)}shift(e,t,r){let i=this.pos;if(131072&e)this.pushState(65535&e,this.pos);else if(262144&e)this.pos=r,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,r,4);else{let o=e,{parser:a}=this.p;(r>this.pos||t<=a.maxNode)&&(this.pos=r,a.stateFlag(o,1)||(this.reducePos=r)),this.pushState(o,i),this.shiftContext(t,i),t<=a.maxNode&&this.buffer.push(t,i,r,4)}}apply(e,t,r){65536&e?this.reduce(e):this.shift(e,t,r)}useNode(e,t){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(t,i),this.buffer.push(r,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let r=e.buffer.slice(t),i=e.bufferBase+t;for(;e&&i==e.bufferBase;)e=e.parent;return new $b(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,r?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new v9(this);;){let r=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(0==r)return!1;if(!(65536&r))return!0;t.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let i=[];for(let a,o=0;o<t.length;o+=2)(a=t[o+1])!=this.state&&this.p.parser.hasAction(a,e)&&i.push(t[o],a);if(this.stack.length<120)for(let o=0;i.length<8&&o<t.length;o+=2){let a=t[o+1];i.some((u,h)=>1&h&&u==a)||i.push(t[o],a)}t=i}let r=[];for(let i=0;i<t.length&&r.length<4;i+=2){let o=t[i+1];if(o==this.state)continue;let a=this.split();a.pushState(o,this.pos),a.storeNode(0,a.pos,a.pos,4,!0),a.shiftContext(t[i],this.pos),a.score-=200,r.push(a)}return r}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if(!(65536&e))return!1;let{parser:t}=this.p;if(!t.validAction(this.state,e)){let o=this.stack.length-3*(e>>19);if(o<0||t.getGoto(this.stack[o],65535&e,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:e}=this.p;return 65535==e.data[e.stateSlot(this.state,1)]&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||-3!=this.buffer[e])&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||-4!=this.buffer[e])&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new bN(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class bN{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class v9{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=65535&e,r=e>>19;0==r?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(r-1);let i=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=i}}class Wb{constructor(e,t,r){this.stack=e,this.pos=t,this.index=r,this.buffer=e.buffer,0==this.index&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new Wb(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;null!=e&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new Wb(this.stack,this.pos,this.index)}}function $m(n,e=Uint16Array){if("string"!=typeof n)return n;let t=null;for(let r=0,i=0;r<n.length;){let o=0;for(;;){let a=n.charCodeAt(r++),u=!1;if(126==a){o=65535;break}a>=92&&a--,a>=34&&a--;let h=a-32;if(h>=46&&(h-=46,u=!0),o+=h,u)break;o*=46}t?t[i++]=o:t=new e(o)}return t}class qb{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const wN=new qb;class y9{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=wN,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let r=this.range,i=this.rangeIndex,o=this.pos+e;for(;o<r.from;){if(!i)return null;let a=this.ranges[--i];o-=r.from-a.to,r=a}for(;t<0?o>r.to:o>=r.to;){if(i==this.ranges.length-1)return null;let a=this.ranges[++i];o+=a.from-r.to,r=a}return o}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let r,i,t=this.chunkOff+e;if(t>=0&&t<this.chunk.length)r=this.pos+e,i=this.chunk.charCodeAt(t);else{let o=this.resolveOffset(e,1);if(null==o)return-1;if(r=o,r>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let a=this.rangeIndex,u=this.range;for(;u.to<=r;)u=this.ranges[++a];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>u.to&&(this.chunk2=this.chunk2.slice(0,u.to-r)),i=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),i}acceptToken(e,t=0){let r=t?this.resolveOffset(t,-1):this.pos;if(null==r||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos);this.chunk=this.pos+e.length>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.next=this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?-1:this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=wN,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let r="";for(let i of this.ranges){if(i.from>=t)break;i.to>e&&(r+=this.input.read(Math.max(i.from,e),Math.min(i.to,t)))}return r}}class dp{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:r}=t.p;!function _N(n,e,t,r,i,o){let a=0,u=1<<r,{dialect:h}=t.p.parser;e:for(;u&n[a];){let m=n[a+1];for(let F=a+3;F<m;F+=2)if((n[F+1]&u)>0){let Y=n[F];if(h.allows(Y)&&(-1==e.token.value||e.token.value==Y||w9(Y,e.token.value,i,o))){e.acceptToken(Y);break}}let v=e.next,x=0,k=n[a+2];if(!(e.next<0&&k>x&&65535==n[m+3*k-3]&&65535==n[m+3*k-3])){for(;x<k;){let F=x+k>>1,Y=m+F+(F<<1);if(v<n[Y])k=F;else{if(!(v>=(n[Y+1]||65536))){a=n[Y+2],e.advance();continue e}x=F+1}}break}a=n[m+3*k-1]}}(this.data,e,t,this.id,r.data,r.tokenPrecTable)}}function xN(n,e,t){for(let i,r=e;65535!=(i=n[r]);r++)if(i==t)return r-e;return-1}function w9(n,e,t,r){let i=xN(t,r,e);return i<0||xN(t,r,n)<i}dp.prototype.contextual=dp.prototype.fallback=dp.prototype.extend=!1,dp.prototype.fallback=dp.prototype.extend=!1;const rl=typeof process<"u"&&process.env&&/\bparse\b/.test(process.env.LOG);let NC=null;function EN(n,e,t){let r=n.cursor(oi.IncludeAnonymous);for(r.moveTo(e);;)if(!(t<0?r.childBefore(e):r.childAfter(e)))for(;;){if((t<0?r.to<e:r.from>e)&&!r.type.isError)return t<0?Math.max(0,Math.min(r.to-1,e-25)):Math.min(n.length,Math.max(r.from+1,e+25));if(t<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return t<0?0:n.length}}class _9{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?EN(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?EN(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let r=this.trees[t],i=this.index[t];if(i==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let o=r.children[i],a=this.start[t]+r.positions[i];if(a>e)return this.nextStart=a,null;if(o instanceof mi){if(a==e){if(a<this.safeFrom)return null;let u=a+o.length;if(u<=this.safeTo){let h=o.prop(zn.lookAhead);if(!h||u+h<this.fragment.to)return o}}this.index[t]++,a+o.length>=Math.max(this.safeFrom,e)&&(this.trees.push(o),this.start.push(a),this.index.push(0))}else this.index[t]++,this.nextStart=a+o.length}}}class x9{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(r=>new qb)}getActions(e){let t=0,r=null,{parser:i}=e.p,{tokenizers:o}=i,a=i.stateSlot(e.state,3),u=e.curContext?e.curContext.hash:0,h=0;for(let m=0;m<o.length;m++){if(!(1<<m&a))continue;let v=o[m],x=this.tokens[m];if((!r||v.fallback)&&((v.contextual||x.start!=e.pos||x.mask!=a||x.context!=u)&&(this.updateCachedToken(x,v,e),x.mask=a,x.context=u),x.lookAhead>x.end+25&&(h=Math.max(x.lookAhead,h)),0!=x.value)){let k=t;if(x.extended>-1&&(t=this.addActions(e,x.extended,x.end,t)),t=this.addActions(e,x.value,x.end,t),!v.extend&&(r=x,t>k))break}}for(;this.actions.length>t;)this.actions.pop();return h&&e.setLookAhead(h),!r&&e.pos==this.stream.end&&(r=new qb,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,t=this.addActions(e,r.value,r.end,t)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new qb,{pos:r,p:i}=e;return t.start=r,t.end=Math.min(r+1,i.stream.end),t.value=r==i.stream.end?i.parser.eofTerm:0,t}updateCachedToken(e,t,r){let i=this.stream.clipPos(r.pos);if(t.token(this.stream.reset(i,e),r),e.value>-1){let{parser:o}=r.p;for(let a=0;a<o.specialized.length;a++)if(o.specialized[a]==e.value){let u=o.specializers[a](this.stream.read(e.start,e.end),r);if(u>=0&&r.p.parser.dialect.allows(u>>1)){1&u?e.extended=u>>1:e.value=u>>1;break}}}else e.value=0,e.end=this.stream.clipPos(i+1)}putAction(e,t,r,i){for(let o=0;o<i;o+=3)if(this.actions[o]==e)return i;return this.actions[i++]=e,this.actions[i++]=t,this.actions[i++]=r,i}addActions(e,t,r,i){let{state:o}=e,{parser:a}=e.p,{data:u}=a;for(let h=0;h<2;h++)for(let m=a.stateSlot(o,h?2:1);;m+=3){if(65535==u[m]){if(1!=u[m+1]){0==i&&2==u[m+1]&&(i=this.putAction(Vc(u,m+2),t,r,i));break}m=Vc(u,m+2)}u[m]==t&&(i=this.putAction(Vc(u,m+1),t,r,i))}return i}}class E9{constructor(e,t,r,i){this.parser=e,this.input=t,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new y9(t,i),this.tokens=new x9(e,this.stream),this.topTerm=e.top[1];let{from:o}=i[0];this.stacks=[$b.start(this,e.top[0],o)],this.fragments=r.length&&this.stream.end-o>4*e.bufferLength?new _9(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let i,o,e=this.stacks,t=this.minStackPos,r=this.stacks=[];if(this.bigReductionCount>300&&1==e.length){let[a]=e;for(;a.forceReduce()&&a.stack.length&&a.stack[a.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let a=0;a<e.length;a++){let u=e[a];for(;;){if(this.tokens.mainToken=null,u.pos>t)r.push(u);else{if(this.advanceStack(u,r,e))continue;{i||(i=[],o=[]),i.push(u);let h=this.tokens.getMainToken(u);o.push(h.value,h.end)}}break}}if(!r.length){let a=i&&function C9(n){let e=null;for(let t of n){let r=t.p.stoppedAt;(t.pos==t.p.stream.end||null!=r&&t.pos>r)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}(i);if(a)return this.stackToTree(a);if(this.parser.strict)throw rl&&i&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&i){let a=null!=this.stoppedAt&&i[0].pos>this.stoppedAt?i[0]:this.runRecovery(i,o,r);if(a)return this.stackToTree(a.forceAll())}if(this.recovering){let a=1==this.recovering?1:3*this.recovering;if(r.length>a)for(r.sort((u,h)=>h.score-u.score);r.length>a;)r.pop();r.some(u=>u.reducePos>t)&&this.recovering--}else if(r.length>1){e:for(let a=0;a<r.length-1;a++){let u=r[a];for(let h=a+1;h<r.length;h++){let m=r[h];if(u.sameState(m)||u.buffer.length>500&&m.buffer.length>500){if(!((u.score-m.score||u.buffer.length-m.buffer.length)>0)){r.splice(a--,1);continue e}r.splice(h--,1)}}}r.length>12&&r.splice(12,r.length-12)}this.minStackPos=r[0].pos;for(let a=1;a<r.length;a++)r[a].pos<this.minStackPos&&(this.minStackPos=r[a].pos);return null}stopAt(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,r){let i=e.pos,{parser:o}=this,a=rl?this.stackID(e)+" -> ":"";if(null!=this.stoppedAt&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let m=e.curContext&&e.curContext.tracker.strict,v=m?e.curContext.hash:0;for(let x=this.fragments.nodeAt(i);x;){let k=this.parser.nodeSet.types[x.type.id]==x.type?o.getGoto(e.state,x.type.id):-1;if(k>-1&&x.length&&(!m||(x.prop(zn.contextHash)||0)==v))return e.useNode(x,k),rl&&console.log(a+this.stackID(e)+` (via reuse of ${o.getName(x.type.id)})`),!0;if(!(x instanceof mi)||0==x.children.length||x.positions[0]>0)break;let F=x.children[0];if(!(F instanceof mi&&0==x.positions[0]))break;x=F}}let u=o.stateSlot(e.state,4);if(u>0)return e.reduce(u),rl&&console.log(a+this.stackID(e)+` (via always-reduce ${o.getName(65535&u)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let h=this.tokens.getActions(e);for(let m=0;m<h.length;){let v=h[m++],x=h[m++],k=h[m++],F=m==h.length||!r,Y=F?e:e.split();if(Y.apply(v,x,k),rl&&console.log(a+this.stackID(Y)+` (via ${65536&v?`reduce of ${o.getName(65535&v)}`:"shift"} for ${o.getName(x)} @ ${i}${Y==e?"":", split"})`),F)return!0;Y.pos>i?t.push(Y):r.push(Y)}return!1}advanceFully(e,t){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return DN(e,t),!0}}runRecovery(e,t,r){let i=null,o=!1;for(let a=0;a<e.length;a++){let u=e[a],h=t[a<<1],m=t[1+(a<<1)],v=rl?this.stackID(u)+" -> ":"";if(u.deadEnd&&(o||(o=!0,u.restart(),rl&&console.log(v+this.stackID(u)+" (restarted)"),this.advanceFully(u,r))))continue;let x=u.split(),k=v;for(let F=0;x.forceReduce()&&F<10&&(rl&&console.log(k+this.stackID(x)+" (via force-reduce)"),!this.advanceFully(x,r));F++)rl&&(k=this.stackID(x)+" -> ");for(let F of u.recoverByInsert(h))rl&&console.log(v+this.stackID(F)+" (via recover-insert)"),this.advanceFully(F,r);this.stream.end>u.pos?(m==u.pos&&(m++,h=0),u.recoverByDelete(h,m),rl&&console.log(v+this.stackID(u)+` (via recover-delete ${this.parser.getName(h)})`),DN(u,r)):(!i||i.score<u.score)&&(i=u)}return i}stackToTree(e){return e.close(),mi.build({buffer:Wb.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(NC||(NC=new WeakMap)).get(e);return t||NC.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function DN(n,e){for(let t=0;t<e.length;t++){let r=e[t];if(r.pos==n.pos&&r.sameState(n))return void(e[t].score<n.score&&(e[t]=n))}e.push(n)}class D9{constructor(e,t,r){this.source=e,this.flags=t,this.disabled=r}allows(e){return!this.disabled||0==this.disabled[e]}}class Yb extends fN{constructor(e){if(super(),this.wrappers=[],14!=e.version)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let u=0;u<e.repeatNodeCount;u++)t.push("");let r=Object.keys(e.topRules).map(u=>e.topRules[u][1]),i=[];for(let u=0;u<t.length;u++)i.push([]);function o(u,h,m){i[u].push([h,h.deserialize(String(m))])}if(e.nodeProps)for(let u of e.nodeProps){let h=u[0];"string"==typeof h&&(h=zn[h]);for(let m=1;m<u.length;){let v=u[m++];if(v>=0)o(v,h,u[m++]);else{let x=u[m+-v];for(let k=-v;k>0;k--)o(u[m++],h,x);m++}}}this.nodeSet=new Hb(t.map((u,h)=>us.define({name:h>=this.minRepeatTerm?void 0:u,id:h,props:i[h],top:r.indexOf(h)>-1,error:0==h,skipped:e.skippedNodes&&e.skippedNodes.indexOf(h)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=lN;let a=$m(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let u=0;u<this.specializerSpecs.length;u++)this.specialized[u]=this.specializerSpecs[u].term;this.specializers=this.specializerSpecs.map(CN),this.states=$m(e.states,Uint32Array),this.data=$m(e.stateData),this.goto=$m(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(u=>"number"==typeof u?new dp(a,u):u),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,r){let i=new E9(this,e,t,r);for(let o of this.wrappers)i=o(i,e,t,r);return i}getGoto(e,t,r=!1){let i=this.goto;if(t>=i[0])return-1;for(let o=i[t+1];;){let a=i[o++],u=1&a,h=i[o++];if(u&&r)return h;for(let m=o+(a>>1);o<m;o++)if(i[o]==e)return h;if(u)return-1}}hasAction(e,t){let r=this.data;for(let i=0;i<2;i++)for(let a,o=this.stateSlot(e,i?2:1);;o+=3){if(65535==(a=r[o])){if(1!=r[o+1]){if(2==r[o+1])return Vc(r,o+2);break}a=r[o=Vc(r,o+2)]}if(a==t||0==a)return Vc(r,o+1)}return 0}stateSlot(e,t){return this.states[6*e+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){if(t==this.stateSlot(e,4))return!0;for(let r=this.stateSlot(e,1);;r+=3){if(65535==this.data[r]){if(1!=this.data[r+1])return!1;r=Vc(this.data,r+2)}if(t==Vc(this.data,r+1))return!0}}nextStates(e){let t=[];for(let r=this.stateSlot(e,1);;r+=3){if(65535==this.data[r]){if(1!=this.data[r+1])break;r=Vc(this.data,r+2)}if(!(1&this.data[r+2])){let i=this.data[r+1];t.some((o,a)=>1&a&&o==i)||t.push(this.data[r],i)}}return t}configure(e){let t=Object.assign(Object.create(Yb.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=r}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(r=>{let i=e.tokenizers.find(o=>o.from==r);return i?i.to:r})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((r,i)=>{let o=e.specializers.find(u=>u.from==r.external);if(!o)return r;let a=Object.assign(Object.assign({},r),{external:o.to});return t.specializers[i]=CN(a),a})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),null!=e.strict&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),null!=e.bufferLength&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return null==t?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),r=t.map(()=>!1);if(e)for(let o of e.split(" ")){let a=t.indexOf(o);a>=0&&(r[a]=!0)}let i=null;for(let o=0;o<t.length;o++)if(!r[o])for(let u,a=this.dialects[t[o]];65535!=(u=this.data[a++]);)(i||(i=new Uint8Array(this.maxTerm+1)))[u]=1;return new D9(e,r,i)}static deserialize(e){return new Yb(e)}}function Vc(n,e){return n[e]|n[e+1]<<16}function CN(n){if(n.external){let e=n.extend?1:0;return(t,r)=>n.external(t,r)<<1|e}return n.get}let S9=0;class ql{constructor(e,t,r){this.set=e,this.base=t,this.modified=r,this.id=S9++}static define(e){if(e?.base)throw new Error("Can not derive from a modified tag");let t=new ql([],null,[]);if(t.set.push(t),e)for(let r of e.set)t.set.push(r);return t}static defineModifier(){let e=new Xb;return t=>t.modified.indexOf(e)>-1?t:Xb.get(t.base||t,t.modified.concat(e).sort((r,i)=>r.id-i.id))}}let M9=0;class Xb{constructor(){this.instances=[],this.id=M9++}static get(e,t){if(!t.length)return e;let r=t[0].instances.find(u=>u.base==e&&function A9(n,e){return n.length==e.length&&n.every((t,r)=>t==e[r])}(t,u.modified));if(r)return r;let i=[],o=new ql(i,e,t);for(let u of t)u.instances.push(o);let a=function T9(n){let e=[[]];for(let t=0;t<n.length;t++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(n[t]));return e.sort((t,r)=>r.length-t.length)}(t);for(let u of e.set)if(!u.modified.length)for(let h of a)i.push(Xb.get(u,h));return o}}function SN(n){let e=Object.create(null);for(let t in n){let r=n[t];Array.isArray(r)||(r=[r]);for(let i of t.split(" "))if(i){let o=[],a=2,u=i;for(let x=0;;){if("..."==u&&x>0&&x+3==i.length){a=1;break}let k=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(u);if(!k)throw new RangeError("Invalid path: "+i);if(o.push("*"==k[0]?"":'"'==k[0][0]?JSON.parse(k[0]):k[0]),x+=k[0].length,x==i.length)break;let F=i[x++];if(x==i.length&&"!"==F){a=0;break}if("/"!=F)throw new RangeError("Invalid path: "+i);u=i.slice(x)}let h=o.length-1,m=o[h];if(!m)throw new RangeError("Invalid path: "+i);let v=new Kb(r,a,h>0?o.slice(0,h):null);e[m]=v.sort(e[m])}}return MN.add(e)}const MN=new zn;class Kb{constructor(e,t,r,i){this.tags=e,this.mode=t,this.context=r,this.next=i}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function AN(n,e){let t=Object.create(null);for(let o of n)if(Array.isArray(o.tag))for(let a of o.tag)t[a.id]=o.class;else t[o.tag.id]=o.class;let{scope:r,all:i=null}=e||{};return{style:o=>{let a=i;for(let u of o)for(let h of u.set){let m=t[h.id];if(m){a=a?a+" "+m:m;break}}return a},scope:r}}function I9(n,e,t,r=0,i=n.length){let o=new O9(r,Array.isArray(e)?e:[e],t);o.highlightRange(n.cursor(),r,i,"",o.highlighters),o.flush(i)}Kb.empty=new Kb([],2,null);class O9{constructor(e,t,r){this.at=e,this.highlighters=t,this.span=r,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,r,i,o){let{type:a,from:u,to:h}=e;if(u>=r||h<=t)return;a.isTop&&(o=this.highlighters.filter(F=>!F.scope||F.scope(a)));let m=i,v=function R9(n){let e=n.type.prop(MN);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}(e)||Kb.empty,x=function k9(n,e){let t=null;for(let r of n){let i=r.style(e);i&&(t=t?t+" "+i:i)}return t}(o,v.tags);if(x&&(m&&(m+=" "),m+=x,1==v.mode&&(i+=(i?" ":"")+x)),this.startSpan(e.from,m),v.opaque)return;let k=e.tree&&e.tree.prop(zn.mounted);if(k&&k.overlay){let F=e.node.enter(k.overlay[0].from+u,1),Y=this.highlighters.filter(me=>!me.scope||me.scope(k.tree.type)),ie=e.firstChild();for(let me=0,Oe=u;;me++){let Ke=me<k.overlay.length?k.overlay[me]:null,Ge=Ke?Ke.from+u:h,ot=Math.max(t,Oe),wt=Math.min(r,Ge);if(ot<wt&&ie)for(;e.from<wt&&(this.highlightRange(e,ot,wt,i,o),this.startSpan(Math.min(wt,e.to),m),!(e.to>=Ge)&&e.nextSibling()););if(!Ke||Ge>r)break;Oe=Ke.to+u,Oe>t&&(this.highlightRange(F.cursor(),Math.max(t,Ke.from+u),Math.min(r,Oe),i,Y),this.startSpan(Oe,m))}ie&&e.parent()}else if(e.firstChild()){do{if(!(e.to<=t)){if(e.from>=r)break;this.highlightRange(e,t,r,i,o),this.startSpan(Math.min(r,e.to),m)}}while(e.nextSibling());e.parent()}}}const $t=ql.define,Zb=$t(),ju=$t(),TN=$t(ju),kN=$t(ju),Uu=$t(),Qb=$t(Uu),FC=$t(Uu),Yl=$t(),yh=$t(Yl),Xl=$t(),Kl=$t(),BC=$t(),Wm=$t(BC),Jb=$t(),He={comment:Zb,lineComment:$t(Zb),blockComment:$t(Zb),docComment:$t(Zb),name:ju,variableName:$t(ju),typeName:TN,tagName:$t(TN),propertyName:kN,attributeName:$t(kN),className:$t(ju),labelName:$t(ju),namespace:$t(ju),macroName:$t(ju),literal:Uu,string:Qb,docString:$t(Qb),character:$t(Qb),attributeValue:$t(Qb),number:FC,integer:$t(FC),float:$t(FC),bool:$t(Uu),regexp:$t(Uu),escape:$t(Uu),color:$t(Uu),url:$t(Uu),keyword:Xl,self:$t(Xl),null:$t(Xl),atom:$t(Xl),unit:$t(Xl),modifier:$t(Xl),operatorKeyword:$t(Xl),controlKeyword:$t(Xl),definitionKeyword:$t(Xl),moduleKeyword:$t(Xl),operator:Kl,derefOperator:$t(Kl),arithmeticOperator:$t(Kl),logicOperator:$t(Kl),bitwiseOperator:$t(Kl),compareOperator:$t(Kl),updateOperator:$t(Kl),definitionOperator:$t(Kl),typeOperator:$t(Kl),controlOperator:$t(Kl),punctuation:BC,separator:$t(BC),bracket:Wm,angleBracket:$t(Wm),squareBracket:$t(Wm),paren:$t(Wm),brace:$t(Wm),content:Yl,heading:yh,heading1:$t(yh),heading2:$t(yh),heading3:$t(yh),heading4:$t(yh),heading5:$t(yh),heading6:$t(yh),contentSeparator:$t(Yl),list:$t(Yl),quote:$t(Yl),emphasis:$t(Yl),strong:$t(Yl),link:$t(Yl),monospace:$t(Yl),strikethrough:$t(Yl),inserted:$t(),deleted:$t(),changed:$t(),invalid:$t(),meta:Jb,documentMeta:$t(Jb),annotation:$t(Jb),processingInstruction:$t(Jb),definition:ql.defineModifier(),constant:ql.defineModifier(),function:ql.defineModifier(),standard:ql.defineModifier(),local:ql.defineModifier(),special:ql.defineModifier()},P9=(AN([{tag:He.link,class:"tok-link"},{tag:He.heading,class:"tok-heading"},{tag:He.emphasis,class:"tok-emphasis"},{tag:He.strong,class:"tok-strong"},{tag:He.keyword,class:"tok-keyword"},{tag:He.atom,class:"tok-atom"},{tag:He.bool,class:"tok-bool"},{tag:He.url,class:"tok-url"},{tag:He.labelName,class:"tok-labelName"},{tag:He.inserted,class:"tok-inserted"},{tag:He.deleted,class:"tok-deleted"},{tag:He.literal,class:"tok-literal"},{tag:He.string,class:"tok-string"},{tag:He.number,class:"tok-number"},{tag:[He.regexp,He.escape,He.special(He.string)],class:"tok-string2"},{tag:He.variableName,class:"tok-variableName"},{tag:He.local(He.variableName),class:"tok-variableName tok-local"},{tag:He.definition(He.variableName),class:"tok-variableName tok-definition"},{tag:He.special(He.variableName),class:"tok-variableName2"},{tag:He.definition(He.propertyName),class:"tok-propertyName tok-definition"},{tag:He.typeName,class:"tok-typeName"},{tag:He.namespace,class:"tok-namespace"},{tag:He.className,class:"tok-className"},{tag:He.macroName,class:"tok-macroName"},{tag:He.propertyName,class:"tok-propertyName"},{tag:He.operator,class:"tok-operator"},{tag:He.comment,class:"tok-comment"},{tag:He.meta,class:"tok-meta"},{tag:He.invalid,class:"tok-invalid"},{tag:He.punctuation,class:"tok-punctuation"}]),SN({String:He.string,Number:He.number,"True False":He.bool,PropertyName:He.propertyName,Null:He.null,",":He.separator,"[ ]":He.squareBracket,"{ }":He.brace})),N9=Yb.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#CjOOQO'#Cp'#CpQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CrOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59U,59UO!iQPO,59UOVQPO,59QOqQPO'#CkO!nQPO,59^OOQO1G.k1G.kOVQPO'#ClO!vQPO,59aOOQO1G.p1G.pOOQO1G.l1G.lOOQO,59V,59VOOQO-E6i-E6iOOQO,59W,59WOOQO-E6j-E6j",stateData:"#O~OcOS~OQSORSOSSOTSOWQO]ROePO~OVXOeUO~O[[O~PVOg^O~Oh_OVfX~OVaO~OhbO[iX~O[dO~Oh_OVfa~OhbO[ia~O",goto:"!kjPPPPPPkPPkqwPPk{!RPPP!XP!ePP!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:"\u26a0 JsonText True False Null Number String } { Object Property PropertyName ] [ Array",maxTerm:25,nodeProps:[["openedBy",7,"{",12,"["],["closedBy",8,"}",13,"]"]],propSources:[P9],skippedNodes:[0],repeatNodeCount:2,tokenData:"(p~RaXY!WYZ!W]^!Wpq!Wrs!]|}$i}!O$n!Q!R$w!R![&V![!]&h!}#O&m#P#Q&r#Y#Z&w#b#c'f#h#i'}#o#p(f#q#r(k~!]Oc~~!`Upq!]qr!]rs!rs#O!]#O#P!w#P~!]~!wOe~~!zXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#g~#jR!Q![#s!c!i#s#T#Z#s~#vR!Q![$P!c!i$P#T#Z$P~$SR!Q![$]!c!i$]#T#Z$]~$`R!Q![!]!c!i!]#T#Z!]~$nOh~~$qQ!Q!R$w!R![&V~$|RT~!O!P%V!g!h%k#X#Y%k~%YP!Q![%]~%bRT~!Q![%]!g!h%k#X#Y%k~%nR{|%w}!O%w!Q![%}~%zP!Q![%}~&SPT~!Q![%}~&[ST~!O!P%V!Q![&V!g!h%k#X#Y%k~&mOg~~&rO]~~&wO[~~&zP#T#U&}~'QP#`#a'T~'WP#g#h'Z~'^P#X#Y'a~'fOR~~'iP#i#j'l~'oP#`#a'r~'uP#`#a'x~'}OS~~(QP#f#g(T~(WP#i#j(Z~(^P#X#Y(a~(fOQ~~(kOW~~(pOV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0});var VC;const bh=new zn;const L9=new zn;let ya=(()=>{class n{constructor(t,r,i=[],o=""){this.data=t,this.name=o,ls.prototype.hasOwnProperty("tree")||Object.defineProperty(ls.prototype,"tree",{get(){return so(this)}}),this.parser=r,this.extension=[Gu.of(this),ls.languageData.of((a,u,h)=>{let m=ON(a,u,h),v=m.type.prop(bh);if(!v)return[];let x=a.facet(v),k=m.type.prop(L9);if(k){let F=m.resolve(u-m.from,h);for(let Y of k)if(Y.test(F,a)){let ie=a.facet(Y.facet);return"replace"==Y.type?ie:ie.concat(x)}}return x})].concat(i)}isActiveAt(t,r,i=-1){return ON(t,r,i).type.prop(bh)==this.data}findRegions(t){let r=t.facet(Gu);if(r?.data==this.data)return[{from:0,to:t.doc.length}];if(!r||!r.allowsNesting)return[];let i=[],o=(a,u)=>{if(a.prop(bh)==this.data)return void i.push({from:u,to:u+a.length});let h=a.prop(zn.mounted);if(h){if(h.tree.prop(bh)==this.data){if(h.overlay)for(let m of h.overlay)i.push({from:m.from+u,to:m.to+u});else i.push({from:u,to:u+a.length});return}if(h.overlay){let m=i.length;if(o(h.tree,h.overlay[0].from+u),i.length>m)return}}for(let m=0;m<a.children.length;m++){let v=a.children[m];v instanceof mi&&o(v,a.positions[m]+u)}};return o(so(t),0),i}get allowsNesting(){return!0}}return n.setState=Qn.define(),n})();function ON(n,e,t){let r=n.facet(Gu),i=so(n).topNode;if(!r||r.allowsNesting)for(let o=i;o;o=o.enter(e,t,oi.ExcludeBuffers))o.type.isTop&&(i=o);return i}class ew extends ya{constructor(e,t,r){super(e,t,[],r),this.parser=t}static define(e){let t=function IN(n){return ln.define({combine:n?e=>e.concat(n):void 0})}(e.languageData);return new ew(t,e.parser.configure({props:[bh.add(r=>r.isTop?t:void 0)]}),e.name)}configure(e,t){return new ew(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function so(n){let e=n.field(ya.state,!1);return e?e.tree:mi.empty}class B9{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let r=this.cursorPos-this.string.length;return e<r||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-r,t-r)}}let qm=null;class hp{constructor(e,t,r=[],i,o,a,u,h){this.parser=e,this.state=t,this.fragments=r,this.tree=i,this.treeLen=o,this.viewport=a,this.skipped=u,this.scheduleOn=h,this.parse=null,this.tempSkipped=[]}static create(e,t,r){return new hp(e,t,[],mi.empty,0,r,[],null)}startParse(){return this.parser.startParse(new B9(this.state.doc),this.fragments)}work(e,t){return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=mi.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if("number"==typeof e){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),null!=t&&(null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i){if(this.fragments=this.withoutTempSkipped(Bc.addTree(i,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(r=this.parse.stoppedAt)&&void 0!==r?r:this.state.doc.length,this.tree=i,this.parse=null,!(this.treeLen<(t??this.state.doc.length)))return!0;this.parse=this.startParse()}if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Bc.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=qm;qm=this;try{return e()}finally{qm=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=RN(e,t.from,t.to);return e}changes(e,t){let{fragments:r,tree:i,treeLen:o,viewport:a,skipped:u}=this;if(this.takeTree(),!e.empty){let h=[];if(e.iterChangedRanges((m,v,x,k)=>h.push({fromA:m,toA:v,fromB:x,toB:k})),r=Bc.applyChanges(r,h),i=mi.empty,o=0,a={from:e.mapPos(a.from,-1),to:e.mapPos(a.to,1)},this.skipped.length){u=[];for(let m of this.skipped){let v=e.mapPos(m.from,1),x=e.mapPos(m.to,-1);v<x&&u.push({from:v,to:x})}}}return new hp(this.parser,t,r,i,o,a,u,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:o}=this.skipped[r];i<e.to&&o>e.from&&(this.fragments=RN(this.fragments,i,o),this.skipped.splice(r--,1))}return!(this.skipped.length>=t||(this.reset(),0))}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends fN{createParse(t,r,i){let o=i[0].from,a=i[i.length-1].to;return{parsedPos:o,advance(){let h=qm;if(h){for(let m of i)h.tempSkipped.push(m);e&&(h.scheduleOn=h.scheduleOn?Promise.all([h.scheduleOn,e]):e)}return this.parsedPos=a,new mi(us.none,[],[],a-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}static get(){return qm}}function RN(n,e,t){return Bc.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class fp{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,r)||t.takeTree(),new fp(t)}static init(e){let t=Math.min(3e3,e.doc.length),r=hp.create(e.facet(Gu).parser,e,{from:0,to:t});return r.work(20,t)||r.takeTree(),new fp(r)}}ya.state=Bi.define({create:fp.init,update(n,e){for(let t of e.effects)if(t.is(ya.setState))return t.value;return e.startState.facet(Gu)!=e.state.facet(Gu)?fp.init(e.state):n.apply(e)}});let PN=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(PN=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const HC=typeof navigator<"u"&&null!==(VC=navigator.scheduling)&&void 0!==VC&&VC.isInputPending?()=>navigator.scheduling.isInputPending():null,NN=_i.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(ya.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(ya.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=PN(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,o=r.field(ya.state);if(o.tree==o.context.tree&&o.context.isDone(i+1e5))return;let a=Date.now()+Math.min(this.chunkBudget,100,e&&!HC?Math.max(25,e.timeRemaining()-5):1e9),u=o.context.treeLen<i&&r.doc.length>i+1e3,h=o.context.work(()=>HC&&HC()||Date.now()>a,i+(u?0:1e5));this.chunkBudget-=Date.now()-t,(h||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:ya.setState.of(new fp(o.context))})),this.chunkBudget>0&&!(h&&!u)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Xs(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Gu=ln.define({combine:n=>n.length?n[0]:null,enables:n=>[ya.state,NN,Rn.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class V9{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const FN=ln.define(),zC=ln.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function wh(n){let e=n.facet(zC);return 9==e.charCodeAt(0)?n.tabSize*e.length:e.length}function pp(n,e){let t="",r=n.tabSize,i=n.facet(zC)[0];if("\t"==i){for(;e>=r;)t+="\t",e-=r;i=" "}for(let o=0;o<e;o++)t+=i;return t}function tw(n,e){n instanceof ls&&(n=new Ym(n));for(let r of n.state.facet(FN)){let i=r(n,e);if(void 0!==i)return i}let t=so(n.state);return t?function H9(n,e,t){return VN(e.resolveInner(t).enterUnfinishedNodesBefore(t),t,n)}(n,t,e):null}class Ym{constructor(e,t={}){this.state=e,this.options=t,this.unit=wh(e)}lineAt(e,t=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:o}=this.options;return null!=i&&i>=r.from&&i<=r.to?o&&i==e?{text:"",from:e}:(t<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,t);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,t=1){let{text:r,from:i}=this.lineAt(e,t),o=this.countColumn(r,e-i),a=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return a>-1&&(o+=a-this.countColumn(r,r.search(/\S|$/))),o}countColumn(e,t=e.length){return Am(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:r,from:i}=this.lineAt(e,t),o=this.options.overrideIndentation;if(o){let a=o(i);if(a>-1)return a}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const BN=new zn;function j9(n){let e=n.type.prop(BN);if(e)return e;let r,t=n.firstChild;if(t&&(r=t.type.prop(zn.closedBy))){let i=n.lastChild,o=i&&r.indexOf(i.name)>-1;return a=>function HN(n,e,t,r,i){let o=n.textAfter,a=o.match(/^\s*/)[0].length,u=r&&o.slice(a,a+r.length)==r||i==n.pos+a,h=e?function $9(n){let e=n.node,t=e.childAfter(e.from),r=e.lastChild;if(!t)return null;let i=n.options.simulateBreak,o=n.state.doc.lineAt(t.from),a=null==i||i<=o.from?o.to:Math.min(o.to,i);for(let u=t.to;;){let h=e.childAfter(u);if(!h||h==r)return null;if(!h.type.isSkipped)return h.from<a?t:null;u=h.to}}(n):null;return h?n.column(u?h.from:h.to):n.baseIndent+(u?0:n.unit*t)}(a,!0,1,void 0,o&&!function z9(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}(a)?i.from:void 0)}return null==n.parent?U9:null}function VN(n,e,t){for(;n;n=n.parent){let r=j9(n);if(r)return r(jC.create(t,e,n))}return null}function U9(){return 0}class jC extends Ym{constructor(e,t,r){super(e.state,e.options),this.base=e,this.pos=t,this.node=r}static create(e,t,r){return new jC(e,t,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let t=this.node.resolve(e.from);for(;t.parent&&t.parent.from==t.from;)t=t.parent;if(G9(t,this.node))break;e=this.state.doc.lineAt(t.from)}return this.lineIndent(e.from)}continue(){let e=this.node.parent;return e?VN(e,this.pos,this.base):0}}function G9(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function zN({except:n,units:e=1}={}){return t=>{let r=n&&n.test(t.textAfter);return t.baseIndent+(r?0:e*t.unit)}}const Y9=ln.define(),jN=new zn;function Z9(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function Xm(n,e,t){for(let r of n.facet(Y9)){let i=r(n,e,t);if(i)return i}return function K9(n,e,t){let r=so(n);if(r.length<t)return null;let o=null;for(let a=r.resolveInner(t,1);a;a=a.parent){if(a.to<=t||a.from>t)continue;if(o&&a.from<e)break;let u=a.type.prop(jN);if(u&&(a.to<r.length-50||r.length==n.doc.length||!Z9(a))){let h=u(a,n);h&&h.from<=t&&h.from>=e&&h.to>t&&(o=h)}}return o}(n,e,t)}function UN(n,e){let t=e.mapPos(n.from,1),r=e.mapPos(n.to,-1);return t>=r?void 0:{from:t,to:r}}const Km=Qn.define({map:UN}),gp=Qn.define({map:UN});function UC(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(r=>r.from<=t&&r.to>=t)||e.push(n.lineBlockAt(t));return e}const $u=Bi.define({create:()=>dn.none,update(n,e){n=n.map(e.changes);for(let t of e.effects)t.is(Km)&&!Q9(n,t.value.from,t.value.to)?n=n.update({add:[WN.range(t.value.from,t.value.to)]}):t.is(gp)&&(n=n.update({filter:(r,i)=>t.value.from!=r||t.value.to!=i,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:r}=e.selection.main;n.between(r,r,(i,o)=>{i<r&&o>r&&(t=!0)}),t&&(n=n.update({filterFrom:r,filterTo:r,filter:(i,o)=>o<=r||i>=r}))}return n},provide:n=>Rn.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(r,i)=>{t.push(r,i)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let r=n[t++],i=n[t++];if("number"!=typeof r||"number"!=typeof i)throw new RangeError("Invalid JSON for fold state");e.push(WN.range(r,i))}return dn.set(e,!0)}});function Zm(n,e,t){var r;let i=null;return null===(r=n.field($u,!1))||void 0===r||r.between(e,t,(o,a)=>{(!i||i.from>o)&&(i={from:o,to:a})}),i}function Q9(n,e,t){let r=!1;return n.between(e,e,(i,o)=>{i==e&&o==t&&(r=!0)}),r}function GC(n,e){return n.field($u,!1)?e:e.concat(Qn.appendConfig.of($N()))}function nw(n,e,t=!0){let r=n.state.doc.lineAt(e.from).number,i=n.state.doc.lineAt(e.to).number;return Rn.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${r} ${n.state.phrase("to")} ${i}.`)}const iq=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:n=>{for(let e of UC(n)){let t=Xm(n.state,e.from,e.to);if(t)return n.dispatch({effects:GC(n.state,[Km.of(t),nw(n,t)])}),!0}return!1}},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:n=>{if(!n.state.field($u,!1))return!1;let e=[];for(let t of UC(n)){let r=Zm(n.state,t.from,t.to);r&&e.push(gp.of(r),nw(n,r,!1))}return e.length&&n.dispatch({effects:e}),e.length>0}},{key:"Ctrl-Alt-[",run:n=>{let{state:e}=n,t=[];for(let r=0;r<e.doc.length;){let i=n.lineBlockAt(r),o=Xm(e,i.from,i.to);o&&t.push(Km.of(o)),r=(o?n.lineBlockAt(o.to):i).to+1}return t.length&&n.dispatch({effects:GC(n.state,t)}),!!t.length}},{key:"Ctrl-Alt-]",run:n=>{let e=n.state.field($u,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(r,i)=>{t.push(gp.of({from:r,to:i}))}),n.dispatch({effects:t}),!0}}],oq={placeholderDOM:null,placeholderText:"\u2026"},GN=ln.define({combine:n=>tl(n,oq)});function $N(n){let e=[$u,lq];return n&&e.push(GN.of(n)),e}const WN=dn.replace({widget:new class extends Lc{toDOM(n){let{state:e}=n,t=e.facet(GN),r=o=>{let a=n.lineBlockAt(n.posAtDOM(o.target)),u=Zm(n.state,a.from,a.to);u&&n.dispatch({effects:gp.of(u)}),o.preventDefault()};if(t.placeholderDOM)return t.placeholderDOM(n,r);let i=document.createElement("span");return i.textContent=t.placeholderText,i.setAttribute("aria-label",e.phrase("folded code")),i.title=e.phrase("unfold"),i.className="cm-foldPlaceholder",i.onclick=r,i}}}),sq={openText:"\u2304",closedText:"\u203a",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class $C extends $l{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function aq(n={}){let e=Object.assign(Object.assign({},sq),n),t=new $C(e,!0),r=new $C(e,!1),i=_i.fromClass(class{constructor(a){this.from=a.viewport.from,this.markers=this.buildMarkers(a)}update(a){(a.docChanged||a.viewportChanged||a.startState.facet(Gu)!=a.state.facet(Gu)||a.startState.field($u,!1)!=a.state.field($u,!1)||so(a.startState)!=so(a.state)||e.foldingChanged(a))&&(this.markers=this.buildMarkers(a.view))}buildMarkers(a){let u=new Nu;for(let h of a.viewportLineBlocks){let m=Zm(a.state,h.from,h.to)?r:Xm(a.state,h.from,h.to)?t:null;m&&u.add(h.from,h.from,m)}return u.finish()}}),{domEventHandlers:o}=e;return[i,JP({class:"cm-foldGutter",markers(a){var u;return(null===(u=a.plugin(i))||void 0===u?void 0:u.markers)||fi.empty},initialSpacer:()=>new $C(e,!1),domEventHandlers:Object.assign(Object.assign({},o),{click:(a,u,h)=>{if(o.click&&o.click(a,u,h))return!0;let m=Zm(a.state,u.from,u.to);if(m)return a.dispatch({effects:gp.of(m)}),!0;let v=Xm(a.state,u.from,u.to);return!!v&&(a.dispatch({effects:Km.of(v)}),!0)}})}),$N()]}const lq=Rn.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class mp{constructor(e,t){let r;function i(u){let h=Lu.newName();return(r||(r=Object.create(null)))["."+h]=u,h}this.specs=e;const o="string"==typeof t.all?t.all:t.all?i(t.all):void 0,a=t.scope;this.scope=a instanceof ya?u=>u.prop(bh)==a.data:a?u=>u==a:void 0,this.style=AN(e.map(u=>({tag:u.tag,class:u.class||i(Object.assign({},u,{tag:null}))})),{all:o}).style,this.module=r?new Lu(r):null,this.themeType=t.themeType}static define(e,t){return new mp(e,t||{})}}const WC=ln.define(),qN=ln.define({combine:n=>n.length?[n[0]]:null});function rw(n){let e=n.facet(WC);return e.length?e:n.facet(qN)}function qC(n,e){let r,t=[uq];return n instanceof mp&&(n.module&&t.push(Rn.styleModule.of(n.module)),r=n.themeType),t.push(e?.fallback?qN.of(n):r?WC.computeN([Rn.darkTheme],i=>i.facet(Rn.darkTheme)==("dark"==r)?[n]:[]):WC.of(n)),t}class cq{constructor(e){this.markCache=Object.create(null),this.tree=so(e.state),this.decorations=this.buildDeco(e,rw(e.state))}update(e){let t=so(e.state),r=rw(e.state),i=r!=rw(e.startState);t.length<e.view.viewport.to&&!i&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,r))}buildDeco(e,t){if(!t||!this.tree.length)return dn.none;let r=new Nu;for(let{from:i,to:o}of e.visibleRanges)I9(this.tree,t,(a,u,h)=>{r.add(a,u,this.markCache[h]||(this.markCache[h]=dn.mark({class:h})))},i,o);return r.finish()}}const uq=hh.high(_i.fromClass(cq,{decorations:n=>n.decorations})),dq=mp.define([{tag:He.meta,color:"#404740"},{tag:He.link,textDecoration:"underline"},{tag:He.heading,textDecoration:"underline",fontWeight:"bold"},{tag:He.emphasis,fontStyle:"italic"},{tag:He.strong,fontWeight:"bold"},{tag:He.strikethrough,textDecoration:"line-through"},{tag:He.keyword,color:"#708"},{tag:[He.atom,He.bool,He.url,He.contentSeparator,He.labelName],color:"#219"},{tag:[He.literal,He.inserted],color:"#164"},{tag:[He.string,He.deleted],color:"#a11"},{tag:[He.regexp,He.escape,He.special(He.string)],color:"#e40"},{tag:He.definition(He.variableName),color:"#00f"},{tag:He.local(He.variableName),color:"#30a"},{tag:[He.typeName,He.namespace],color:"#085"},{tag:He.className,color:"#167"},{tag:[He.special(He.variableName),He.macroName],color:"#256"},{tag:He.definition(He.propertyName),color:"#00c"},{tag:He.comment,color:"#940"},{tag:He.invalid,color:"#f00"}]),hq=Rn.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),KN=ln.define({combine:n=>tl(n,{afterCursor:!0,brackets:"()[]{}",maxScanDistance:1e4,renderMatch:gq})}),fq=dn.mark({class:"cm-matchingBracket"}),pq=dn.mark({class:"cm-nonmatchingBracket"});function gq(n){let e=[],t=n.matched?fq:pq;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const mq=[Bi.define({create:()=>dn.none,update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],r=e.state.facet(KN);for(let i of e.state.selection.ranges){if(!i.empty)continue;let o=Zl(e.state,i.head,-1,r)||i.head>0&&Zl(e.state,i.head-1,1,r)||r.afterCursor&&(Zl(e.state,i.head,1,r)||i.head<e.state.doc.length&&Zl(e.state,i.head+1,-1,r));o&&(t=t.concat(r.renderMatch(o,e.state)))}return dn.set(t,!0)},provide:n=>Rn.decorations.from(n)}),hq];function vq(n={}){return[KN.of(n),mq]}const yq=new zn;function YC(n,e,t){let r=n.prop(e<0?zn.openedBy:zn.closedBy);if(r)return r;if(1==n.name.length){let i=t.indexOf(n.name);if(i>-1&&i%2==(e<0?1:0))return[t[i+e]]}return null}function XC(n){let e=n.type.prop(yq);return e?e(n.node):n}function Zl(n,e,t,r={}){let i=r.maxScanDistance||1e4,o=r.brackets||"()[]{}",a=so(n),u=a.resolveInner(e,t);for(let h=u;h;h=h.parent){let m=YC(h.type,t,o);if(m&&h.from<h.to){let v=XC(h);if(v&&(t>0?e>=v.from&&e<v.to:e>v.from&&e<=v.to))return bq(0,0,t,h,v,m,o)}}return function wq(n,e,t,r,i,o,a){let u=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),h=a.indexOf(u);if(h<0||h%2==0!=t>0)return null;let m={from:t<0?e-1:e,to:t>0?e+1:e},v=n.doc.iterRange(e,t>0?n.doc.length:0),x=0;for(let k=0;!v.next().done&&k<=o;){let F=v.value;t<0&&(k+=F.length);let Y=e+k*t;for(let ie=t>0?0:F.length-1,me=t>0?F.length:-1;ie!=me;ie+=t){let Oe=a.indexOf(F[ie]);if(!(Oe<0||r.resolveInner(Y+ie,1).type!=i))if(Oe%2==0==t>0)x++;else{if(1==x)return{start:m,end:{from:Y+ie,to:Y+ie+1},matched:Oe>>1==h>>1};x--}}t>0&&(k+=F.length)}return v.done?{start:m,matched:!1}:null}(n,e,t,a,u.type,i,o)}function bq(n,e,t,r,i,o,a){let h={from:i.from,to:i.to},m=0,v=r.parent?.cursor();if(v&&(t<0?v.childBefore(r.from):v.childAfter(r.to)))do{if(t<0?v.to<=r.from:v.from>=r.to){if(0==m&&o.indexOf(v.type.name)>-1&&v.from<v.to){let x=XC(v);return{start:h,end:x?{from:x.from,to:x.to}:void 0,matched:!0}}if(YC(v.type,t,a))m++;else if(YC(v.type,-t,a)){if(0==m){let x=XC(v);return{start:h,end:x&&x.from<x.to?{from:x.from,to:x.to}:void 0,matched:!1}}m--}}}while(t<0?v.prevSibling():v.nextSibling());return{start:h,matched:!1}}const ZC=Object.create(null),Qm=[us.none],rL=[],iL=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])iL[n]=sL(ZC,e);function QC(n,e){rL.indexOf(n)>-1||(rL.push(n),console.warn(e))}function sL(n,e){let t=null;for(let o of e.split(".")){let a=n[o]||He[o];a?"function"==typeof a?t?t=a(t):QC(o,`Modifier ${o} used at start of tag`):t?QC(o,`Tag ${o} used as modifier`):t=a:QC(o,`Unknown highlighting tag ${o}`)}if(!t)return 0;let r=e.replace(/ /g,"_"),i=us.define({id:Qm.length,name:r,props:[SN({[r]:t})]});return Qm.push(i),i.id}const kq=ew.define({name:"json",parser:N9.configure({props:[BN.add({Object:zN({except:/^\s*\}/}),Array:zN({except:/^\s*\]/})}),jN.add({"Object Array":function X9(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function $r(){var n=arguments[0];"string"==typeof n&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&"object"==typeof t&&null==t.nodeType&&!Array.isArray(t)){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=t[r];"string"==typeof i?n.setAttribute(r,i):null!=i&&(n[r]=i)}e++}for(;e<arguments.length;e++)aL(n,arguments[e]);return n}function aL(n,e){if("string"==typeof e)n.appendChild(document.createTextNode(e));else if(null!=e)if(null!=e.nodeType)n.appendChild(e);else{if(!Array.isArray(e))throw new RangeError("Unsupported child node: "+e);for(var t=0;t<e.length;t++)aL(n,e[t])}}class Oq{constructor(e,t,r){this.from=e,this.to=t,this.diagnostic=r}}class _h{constructor(e,t,r){this.diagnostics=e,this.panel=t,this.selected=r}static init(e,t,r){let i=e,o=r.facet(xh).markerFilter;o&&(i=o(i));let a=dn.set(i.map(u=>u.from==u.to||u.from==u.to-1&&r.doc.lineAt(u.from).to==u.from?dn.widget({widget:new Vq(u),diagnostic:u}).range(u.from):dn.mark({attributes:{class:"cm-lintRange cm-lintRange-"+u.severity},diagnostic:u}).range(u.from,u.to)),!0);return new _h(a,t,vp(a))}}function vp(n,e=null,t=0){let r=null;return n.between(t,1e9,(i,o,{spec:a})=>{if(!e||a.diagnostic==e)return r=new Oq(i,o,a.diagnostic),!1}),r}function lL(n,e){return!(!n.effects.some(t=>t.is(iw))&&!n.changes.touchesRange(e.pos))}function cL(n,e){return n.field(ds,!1)?e:e.concat(Qn.appendConfig.of([ds,Rn.decorations.compute([ds],t=>{let{selected:r,panel:i}=t.field(ds);return r&&i&&r.from!=r.to?dn.set([Pq.range(r.from,r.to)]):dn.none}),U6(Nq,{hideOn:lL}),Hq]))}const iw=Qn.define(),JC=Qn.define(),uL=Qn.define(),ds=Bi.define({create:()=>new _h(dn.none,null,null),update(n,e){if(e.docChanged){let t=n.diagnostics.map(e.changes),r=null;if(n.selected){let i=e.changes.mapPos(n.selected.from,1);r=vp(t,n.selected.diagnostic,i)||vp(t,null,i)}n=new _h(t,n.panel,r)}for(let t of e.effects)t.is(iw)?n=_h.init(t.value,n.panel,e.state):t.is(JC)?n=new _h(n.diagnostics,t.value?ow.open:null,n.selected):t.is(uL)&&(n=new _h(n.diagnostics,n.panel,t.value));return n},provide:n=>[jm.from(n,e=>e.panel),Rn.decorations.from(n,e=>e.diagnostics)]}),Pq=dn.mark({class:"cm-lintRange cm-lintRange-active"});function Nq(n,e,t){let{diagnostics:r}=n.state.field(ds),i=[],o=2e8,a=0;r.between(e-(t<0?1:0),e+(t>0?1:0),(h,m,{spec:v})=>{e>=h&&e<=m&&(h==m||(e>h||t>0)&&(e<m||t<0))&&(i.push(v.diagnostic),o=Math.min(h,o),a=Math.max(m,a))});let u=n.state.facet(xh).tooltipFilter;return u&&(i=u(i)),i.length?{pos:o,end:a,above:n.state.doc.lineAt(o).to<a,create:()=>({dom:dL(n,i)})}:null}function dL(n,e){return $r("ul",{class:"cm-tooltip-lint"},e.map(t=>gL(n,t,!1)))}const hL=n=>{let e=n.state.field(ds,!1);return!(!e||!e.panel||(n.dispatch({effects:JC.of(!1)}),0))},Fq=[{key:"Mod-Shift-m",run:n=>{let e=n.state.field(ds,!1);(!e||!e.panel)&&n.dispatch({effects:cL(n.state,[JC.of(!0)])});let t=zm(n,ow.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},preventDefault:!0},{key:"F8",run:n=>{let e=n.state.field(ds,!1);if(!e)return!1;let t=n.state.selection.main,r=e.diagnostics.iter(t.to+1);return!(!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==t.from&&r.to==t.to)||(n.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),0))}}],xh=ln.define({combine:n=>Object.assign({sources:n.map(e=>e.source)},tl(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,t)=>e?t?r=>e(r)||t(r):e:t})),enables:_i.fromClass(class{constructor(n){this.view=n,this.timeout=-1,this.set=!0;let{delay:e}=n.state.facet(xh);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let n=Date.now();if(n<this.lintTime-10)setTimeout(this.run,this.lintTime-n);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(xh);Promise.all(t.map(r=>Promise.resolve(r(this.view)))).then(r=>{let i=r.reduce((o,a)=>o.concat(a));this.view.state.doc==e.doc&&this.view.dispatch(function Rq(n,e){return{effects:cL(n,[iw.of(e)])}}(this.view.state,i))},r=>{Xs(this.view.state,r)})}}update(n){let e=n.state.facet(xh);(n.docChanged||e!=n.startState.facet(xh)||e.needsRefresh&&e.needsRefresh(n))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}})});function pL(n){let e=[];if(n)e:for(let{name:t}of n){for(let r=0;r<t.length;r++){let i=t[r];if(/[a-zA-Z]/.test(i)&&!e.some(o=>o.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function gL(n,e,t){var r;let i=t?pL(e.actions):[];return $r("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},$r("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),null===(r=e.actions)||void 0===r?void 0:r.map((o,a)=>{let u=!1,h=k=>{if(k.preventDefault(),u)return;u=!0;let F=vp(n.state.field(ds).diagnostics,e);F&&o.apply(n,F.from,F.to)},{name:m}=o,v=i[a]?m.indexOf(i[a]):-1,x=v<0?m:[m.slice(0,v),$r("u",m.slice(v,v+1)),m.slice(v+1)];return $r("button",{type:"button",class:"cm-diagnosticAction",onclick:h,onmousedown:h,"aria-label":` Action: ${m}${v<0?"":` (access key "${i[a]})"`}.`},x)}),e.source&&$r("div",{class:"cm-diagnosticSource"},e.source))}class Vq extends Lc{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return $r("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class mL{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=gL(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class ow{constructor(e){this.view=e,this.items=[],this.list=$r("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:i=>{if(27==i.keyCode)hL(this.view),this.view.focus();else if(38==i.keyCode||33==i.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==i.keyCode||34==i.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==i.keyCode)this.moveSelection(0);else if(35==i.keyCode)this.moveSelection(this.items.length-1);else if(13==i.keyCode)this.view.focus();else{if(!(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0))return;{let{diagnostic:o}=this.items[this.selectedIndex],a=pL(o.actions);for(let u=0;u<a.length;u++)if(a[u].toUpperCase().charCodeAt(0)==i.keyCode){let h=vp(this.view.state.field(ds).diagnostics,o);h&&o.actions[u].apply(e,h.from,h.to)}}}i.preventDefault()},onclick:i=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(i.target)&&this.moveSelection(o)}}),this.dom=$r("div",{class:"cm-panel-lint"},this.list,$r("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>hL(this.view)},"\xd7")),this.update()}get selectedIndex(){let e=this.view.state.field(ds).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(ds),r=0,i=!1,o=null;for(e.between(0,this.view.state.doc.length,(a,u,{spec:h})=>{let v,m=-1;for(let x=r;x<this.items.length;x++)if(this.items[x].diagnostic==h.diagnostic){m=x;break}m<0?(v=new mL(this.view,h.diagnostic),this.items.splice(r,0,v),i=!0):(v=this.items[m],m>r&&(this.items.splice(r,m-r),i=!0)),t&&v.diagnostic==t.diagnostic?v.dom.hasAttribute("aria-selected")||(v.dom.setAttribute("aria-selected","true"),o=v):v.dom.hasAttribute("aria-selected")&&v.dom.removeAttribute("aria-selected"),r++});r<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();0==this.items.length&&(this.items.push(new mL(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:u})=>{a.top<u.top?this.list.scrollTop-=u.top-a.top:a.bottom>u.bottom&&(this.list.scrollTop+=a.bottom-u.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function t(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)t();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let r=vp(this.view.state.field(ds).diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:uL.of(r)})}static open(e){return new ow(e)}}function eS(n){return function sw(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const Hq=Rn.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:eS("#d11")},".cm-lintRange-warning":{backgroundImage:eS("orange")},".cm-lintRange-info":{backgroundImage:eS("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function nS(n,e){return({state:t,dispatch:r})=>{if(t.readOnly)return!1;let i=n(e,t);return!!i&&(r(t.update(i)),!0)}}const Yq=nS(Jq,0),Xq=nS(bL,0),Kq=nS((n,e)=>bL(n,e,function Qq(n){let e=[];for(let t of n.selection.ranges){let r=n.doc.lineAt(t.from),i=t.to<=r.to?r:n.doc.lineAt(t.to),o=e.length-1;o>=0&&e[o].to>r.from?e[o].to=i.to:e.push({from:r.from,to:i.to})}return e}(e)),0);function rS(n,e){let t=n.languageDataAt("commentTokens",e);return t.length?t[0]:{}}function bL(n,e,t=e.selection.ranges){let r=t.map(o=>rS(e,o.from).block);if(!r.every(o=>o))return null;let i=t.map((o,a)=>function Zq(n,{open:e,close:t},r,i){let v,x,o=n.sliceDoc(r-50,r),a=n.sliceDoc(i,i+50),u=/\s*$/.exec(o)[0].length,h=/^\s*/.exec(a)[0].length,m=o.length-u;if(o.slice(m-e.length,m)==e&&a.slice(h,h+t.length)==t)return{open:{pos:r-u,margin:u&&1},close:{pos:i+h,margin:h&&1}};i-r<=100?v=x=n.sliceDoc(r,i):(v=n.sliceDoc(r,r+50),x=n.sliceDoc(i-50,i));let k=/^\s*/.exec(v)[0].length,F=/\s*$/.exec(x)[0].length,Y=x.length-F-t.length;return v.slice(k,k+e.length)==e&&x.slice(Y,Y+t.length)==t?{open:{pos:r+k+e.length,margin:/\s/.test(v.charAt(k+e.length))?1:0},close:{pos:i-F-t.length,margin:/\s/.test(x.charAt(Y-1))?1:0}}:null}(e,r[a],o.from,o.to));if(2!=n&&!i.every(o=>o))return{changes:e.changes(t.map((o,a)=>i[a]?[]:[{from:o.from,insert:r[a].open+" "},{from:o.to,insert:" "+r[a].close}]))};if(1!=n&&i.some(o=>o)){let o=[];for(let u,a=0;a<i.length;a++)if(u=i[a]){let h=r[a],{open:m,close:v}=u;o.push({from:m.pos-h.open.length,to:m.pos+m.margin},{from:v.pos-v.margin,to:v.pos+h.close.length})}return{changes:o}}return null}function Jq(n,e,t=e.selection.ranges){let r=[],i=-1;for(let{from:o,to:a}of t){let u=r.length,h=1e9,m=rS(e,o).line;if(m){for(let v=o;v<=a;){let x=e.doc.lineAt(v);if(x.from>i&&(o==a||a>x.from)){i=x.from;let k=/^\s*/.exec(x.text)[0].length,F=k==x.length,Y=x.text.slice(k,k+m.length)==m?k:-1;k<x.text.length&&k<h&&(h=k),r.push({line:x,comment:Y,token:m,indent:k,empty:F,single:!1})}v=x.to+1}if(h<1e9)for(let v=u;v<r.length;v++)r[v].indent<r[v].line.text.length&&(r[v].indent=h);r.length==u+1&&(r[u].single=!0)}}if(2!=n&&r.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:u,token:h,indent:m,empty:v,single:x}of r)(x||!v)&&o.push({from:u.from+m,insert:h+" "});let a=e.changes(o);return{changes:a,selection:e.selection.map(a,1)}}if(1!=n&&r.some(o=>o.comment>=0)){let o=[];for(let{line:a,comment:u,token:h}of r)if(u>=0){let m=a.from+u,v=m+h.length;" "==a.text[v-a.from]&&v++,o.push({from:m,to:v})}return{changes:o}}return null}const iS=Nc.define(),eY=Nc.define(),tY=ln.define(),wL=ln.define({combine:n=>tl(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(r,i)=>e(r,i)||t(r,i)})}),oS=Bi.define({create:()=>lS.empty,update(n,e){let t=e.state.facet(wL),r=e.annotation(iS);if(r){let h=e.docChanged?Ct.single(function nY(n){let e=0;return n.iterChangedRanges((t,r)=>e=r),e}(e.changes)):void 0,m=As.fromTransaction(e,h),v=r.side,x=0==v?n.undone:n.done;return x=m?cw(x,x.length,t.minDepth,m):EL(x,e.startState.selection),new lS(0==v?r.rest:x,0==v?x:r.rest)}let i=e.annotation(eY);if(("full"==i||"before"==i)&&(n=n.isolate()),!1===e.annotation(jl.addToHistory))return e.changes.empty?n:n.addMapping(e.changes.desc);let o=As.fromTransaction(e),a=e.annotation(jl.time),u=e.annotation(jl.userEvent);return o?n=n.addChanges(o,a,u,t,e):e.selection&&(n=n.addSelection(e.startState.selection,a,u,t.newGroupDelay)),("full"==i||"after"==i)&&(n=n.isolate()),n},toJSON:n=>({done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}),fromJSON:n=>new lS(n.done.map(As.fromJSON),n.undone.map(As.fromJSON))});function rY(n={}){return[oS,wL.of(n),Rn.domEventHandlers({beforeinput(e,t){let r="historyUndo"==e.inputType?_L:"historyRedo"==e.inputType?sS:null;return!!r&&(e.preventDefault(),r(t))}})]}function lw(n,e){return function({state:t,dispatch:r}){if(!e&&t.readOnly)return!1;let i=t.field(oS,!1);if(!i)return!1;let o=i.pop(n,t,e);return!!o&&(r(o),!0)}}const _L=lw(0,!1),sS=lw(1,!1),iY=lw(0,!0),oY=lw(1,!0);class As{constructor(e,t,r,i,o){this.changes=e,this.effects=t,this.mapped=r,this.startSelection=i,this.selectionsAfter=o}setSelAfter(e){return new As(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,r;return{changes:null===(e=this.changes)||void 0===e?void 0:e.toJSON(),mapped:null===(t=this.mapped)||void 0===t?void 0:t.toJSON(),startSelection:null===(r=this.startSelection)||void 0===r?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new As(e.changes&&Xi.fromJSON(e.changes),[],e.mapped&&zl.fromJSON(e.mapped),e.startSelection&&Ct.fromJSON(e.startSelection),e.selectionsAfter.map(Ct.fromJSON))}static fromTransaction(e,t){let r=ba;for(let i of e.startState.facet(tY)){let o=i(e);o.length&&(r=r.concat(o))}return!r.length&&e.changes.empty?null:new As(e.changes.invert(e.startState.doc),r,void 0,t||e.startState.selection,ba)}static selection(e){return new As(void 0,ba,void 0,void 0,e)}}function cw(n,e,t,r){let o=n.slice(e+1>t+20?e-t-1:0,e);return o.push(r),o}function xL(n,e){return n.length?e.length?n.concat(e):n:e}const ba=[];function EL(n,e){if(n.length){let t=n[n.length-1],r=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-200));return r.length&&r[r.length-1].eq(e)?n:(r.push(e),cw(n,n.length-1,1e9,t.setSelAfter(r)))}return[As.selection([e])]}function cY(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function aS(n,e){if(!n.length)return n;let t=n.length,r=ba;for(;t;){let i=uY(n[t-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let o=n.slice(0,t);return o[t-1]=i,o}e=i.mapped,t--,r=i.selectionsAfter}return r.length?[As.selection(r)]:ba}function uY(n,e,t){let r=xL(n.selectionsAfter.length?n.selectionsAfter.map(u=>u.map(e)):ba,t);if(!n.changes)return As.selection(r);let i=n.changes.map(e),o=e.mapDesc(n.changes,!0),a=n.mapped?n.mapped.composeDesc(o):o;return new As(i,Qn.mapEffects(n.effects,e),a,n.startSelection.map(o),r)}const dY=/^(input\.type|delete)($|\.)/;let lS=(()=>{class n{constructor(t,r,i=0,o){this.done=t,this.undone=r,this.prevTime=i,this.prevUserEvent=o}isolate(){return this.prevTime?new n(this.done,this.undone):this}addChanges(t,r,i,o,a){let u=this.done,h=u[u.length-1];return u=h&&h.changes&&!h.changes.empty&&t.changes&&(!i||dY.test(i))&&(!h.selectionsAfter.length&&r-this.prevTime<o.newGroupDelay&&o.joinToEvent(a,function sY(n,e){let t=[],r=!1;return n.iterChangedRanges((i,o)=>t.push(i,o)),e.iterChangedRanges((i,o,a,u)=>{for(let h=0;h<t.length;){let m=t[h++],v=t[h++];u>=m&&a<=v&&(r=!0)}}),r}(h.changes,t.changes))||"input.type.compose"==i)?cw(u,u.length-1,o.minDepth,new As(t.changes.compose(h.changes),xL(t.effects,h.effects),h.mapped,h.startSelection,ba)):cw(u,u.length,o.minDepth,t),new n(u,ba,r,i)}addSelection(t,r,i,o){let a=this.done.length?this.done[this.done.length-1].selectionsAfter:ba;return a.length>0&&r-this.prevTime<o&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&function aY(n,e){return n.ranges.length==e.ranges.length&&0===n.ranges.filter((t,r)=>t.empty!=e.ranges[r].empty).length}(a[a.length-1],t)?this:new n(EL(this.done,t),this.undone,r,i)}addMapping(t){return new n(aS(this.done,t),aS(this.undone,t),this.prevTime,this.prevUserEvent)}pop(t,r,i){let o=0==t?this.done:this.undone;if(0==o.length)return null;let a=o[o.length-1];if(i&&a.selectionsAfter.length)return r.update({selection:a.selectionsAfter[a.selectionsAfter.length-1],annotations:iS.of({side:t,rest:cY(o)}),userEvent:0==t?"select.undo":"select.redo",scrollIntoView:!0});if(a.changes){let u=1==o.length?ba:o.slice(0,o.length-1);return a.mapped&&(u=aS(u,a.mapped)),r.update({changes:a.changes,selection:a.startSelection,effects:a.effects,annotations:iS.of({side:t,rest:u}),filter:!1,userEvent:0==t?"undo":"redo",scrollIntoView:!0})}return null}}return n.empty=new n(ba,ba),n})();const hY=[{key:"Mod-z",run:_L,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:sS,preventDefault:!0},{linux:"Ctrl-Shift-z",run:sS,preventDefault:!0},{key:"Mod-u",run:iY,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:oY,preventDefault:!0}];function yp(n,e){return Ct.create(n.ranges.map(e),n.mainIndex)}function Ql(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function wa({state:n,dispatch:e},t){let r=yp(n.selection,t);return!r.eq(n.selection)&&(e(Ql(n,r)),!0)}function ev(n,e){return Ct.cursor(e?n.to:n.from)}function uw(n,e){return wa(n,t=>t.empty?n.moveByChar(t,e):ev(t,e))}function $o(n){return n.textDirectionAt(n.state.selection.main.head)==pi.LTR}const DL=n=>uw(n,!$o(n)),CL=n=>uw(n,$o(n));function dw(n,e){return wa(n,t=>t.empty?n.moveByGroup(t,e):ev(t,e))}function gY(n,e,t){if(e.type.prop(t))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function hw(n,e,t){let a,u,r=so(n).resolveInner(e.head),i=t?zn.closedBy:zn.openedBy;for(let h=e.head;;){let m=t?r.childAfter(h):r.childBefore(h);if(!m)break;gY(n,m,i)?r=m:h=t?m.to:m.from}return u=r.type.prop(i)&&(a=t?Zl(n,r.from,1):Zl(n,r.to,-1))&&a.matched?t?a.end.to:a.end.from:t?r.to:r.from,Ct.cursor(u,t?-1:1)}function AL(n,e){return wa(n,t=>{if(!t.empty)return ev(t,e);let r=n.moveVertically(t,e);return r.head!=t.head?r:n.moveToLineBoundary(t,e)})}const TL=n=>AL(n,!1),kL=n=>AL(n,!0);function IL(n){let i,e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,r=0;if(e){for(let o of n.state.facet(Rn.scrollMargins)){let a=o(n);a?.top&&(t=Math.max(a?.top,t)),a?.bottom&&(r=Math.max(a?.bottom,r))}i=n.scrollDOM.clientHeight-t-r}else i=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:r,selfScroll:e,height:Math.max(n.defaultLineHeight,i-5)}}function OL(n,e){let o,t=IL(n),{state:r}=n,i=yp(r.selection,a=>a.empty?n.moveVertically(a,e,t.height):ev(a,e));if(i.eq(r.selection))return!1;if(t.selfScroll){let a=n.coordsAtPos(r.selection.main.head),u=n.scrollDOM.getBoundingClientRect(),h=u.top+t.marginTop;a&&a.top>h&&a.bottom<u.bottom-t.marginBottom&&(o=Rn.scrollIntoView(i.main.head,{y:"start",yMargin:a.top-h}))}return n.dispatch(Ql(r,i),{effects:o}),!0}const RL=n=>OL(n,!1),cS=n=>OL(n,!0);function Wu(n,e,t){let r=n.lineBlockAt(e.head),i=n.moveToLineBoundary(e,t);if(i.head==e.head&&i.head!=(t?r.to:r.from)&&(i=n.moveToLineBoundary(e,t,!1)),!t&&i.head==r.from&&r.length){let o=/^\s*/.exec(n.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;o&&e.head!=r.from+o&&(i=Ct.cursor(r.from+o))}return i}function Zs(n,e){let t=yp(n.state.selection,r=>{let i=e(r);return Ct.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return!t.eq(n.state.selection)&&(n.dispatch(Ql(n.state,t)),!0)}function fw(n,e){return Zs(n,t=>n.moveByChar(t,e))}const NL=n=>fw(n,!$o(n)),LL=n=>fw(n,$o(n));function pw(n,e){return Zs(n,t=>n.moveByGroup(t,e))}function BL(n,e){return Zs(n,t=>n.moveVertically(t,e))}const VL=n=>BL(n,!1),HL=n=>BL(n,!0);function zL(n,e){return Zs(n,t=>n.moveVertically(t,e,IL(n).height))}const jL=n=>zL(n,!1),UL=n=>zL(n,!0),GL=({state:n,dispatch:e})=>(e(Ql(n,{anchor:0})),!0),$L=({state:n,dispatch:e})=>(e(Ql(n,{anchor:n.doc.length})),!0),WL=({state:n,dispatch:e})=>(e(Ql(n,{anchor:n.selection.main.anchor,head:0})),!0),qL=({state:n,dispatch:e})=>(e(Ql(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0);function gw(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:r}=n,i=r.changeByRange(o=>{let{from:a,to:u}=o;if(a==u){let h=e(a);h<a?(t="delete.backward",h=mw(n,h,!1)):h>a&&(t="delete.forward",h=mw(n,h,!0)),a=Math.min(a,h),u=Math.max(u,h)}else a=mw(n,a,!1),u=mw(n,u,!0);return a==u?{range:o}:{changes:{from:a,to:u},range:Ct.cursor(a)}});return!i.changes.empty&&(n.dispatch(r.update(i,{scrollIntoView:!0,userEvent:t,effects:"delete.selection"==t?Rn.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function mw(n,e,t){if(n instanceof Rn)for(let r of n.state.facet(Rn.atomicRanges).map(i=>i(n)))r.between(e,e,(i,o)=>{i<e&&o>e&&(e=t?o:i)});return e}const YL=(n,e)=>gw(n,t=>{let o,a,{state:r}=n,i=r.doc.lineAt(t);if(!e&&t>i.from&&t<i.from+200&&!/[^ \t]/.test(o=i.text.slice(0,t-i.from))){if("\t"==o[o.length-1])return t-1;let h=Am(o,r.tabSize)%wh(r)||wh(r);for(let m=0;m<h&&" "==o[o.length-1-m];m++)t--;a=t}else a=ss(i.text,t-i.from,e,e)+i.from,a==t&&i.number!=(e?r.doc.lines:1)&&(a+=e?1:-1);return a}),uS=n=>YL(n,!1),XL=n=>YL(n,!0),KL=(n,e)=>gw(n,t=>{let r=t,{state:i}=n,o=i.doc.lineAt(r),a=i.charCategorizer(r);for(let u=null;;){if(r==(e?o.to:o.from)){r==t&&o.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let h=ss(o.text,r-o.from,e)+o.from,m=o.text.slice(Math.min(r,h)-o.from,Math.max(r,h)-o.from),v=a(m);if(null!=u&&v!=u)break;(" "!=m||r!=t)&&(u=v),r=h}return r}),ZL=n=>KL(n,!1),QL=n=>gw(n,e=>{let t=n.lineBlockAt(e).to;return e<t?t:Math.min(n.state.doc.length,e+1)});function vw(n){let e=[],t=-1;for(let r of n.selection.ranges){let i=n.doc.lineAt(r.from),o=n.doc.lineAt(r.to);if(!r.empty&&r.to==o.from&&(o=n.doc.lineAt(r.to-1)),t>=i.number){let a=e[e.length-1];a.to=o.to,a.ranges.push(r)}else e.push({from:i.from,to:o.to,ranges:[r]});t=o.number+1}return e}function JL(n,e,t){if(n.readOnly)return!1;let r=[],i=[];for(let o of vw(n)){if(t?o.to==n.doc.length:0==o.from)continue;let a=n.doc.lineAt(t?o.to+1:o.from-1),u=a.length+1;if(t){r.push({from:o.to,to:a.to},{from:o.from,insert:a.text+n.lineBreak});for(let h of o.ranges)i.push(Ct.range(Math.min(n.doc.length,h.anchor+u),Math.min(n.doc.length,h.head+u)))}else{r.push({from:a.from,to:o.from},{from:o.to,insert:n.lineBreak+a.text});for(let h of o.ranges)i.push(Ct.range(h.anchor-u,h.head-u))}}return!!r.length&&(e(n.update({changes:r,scrollIntoView:!0,selection:Ct.create(i,n.selection.mainIndex),userEvent:"move.line"})),!0)}function eF(n,e,t){if(n.readOnly)return!1;let r=[];for(let i of vw(n))r.push(t?{from:i.from,insert:n.doc.slice(i.from,i.to)+n.lineBreak}:{from:i.to,insert:n.lineBreak+n.doc.slice(i.from,i.to)});return e(n.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const XY=tF(!1);function tF(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:o,to:a}=i,u=e.doc.lineAt(o),h=!n&&o==a&&function YY(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let o,t=so(n).resolveInner(e),r=t.childBefore(e),i=t.childAfter(e);return r&&i&&r.to<=e&&i.from>=e&&(o=r.type.prop(zn.closedBy))&&o.indexOf(i.name)>-1&&n.doc.lineAt(r.to).from==n.doc.lineAt(i.from).from?{from:r.to,to:i.from}:null}(e,o);n&&(o=a=(a<=u.to?u:e.doc.lineAt(a)).to);let m=new Ym(e,{simulateBreak:o,simulateDoubleBreak:!!h}),v=tw(m,o);for(null==v&&(v=/^\s*/.exec(e.doc.lineAt(o).text)[0].length);a<u.to&&/\s/.test(u.text[a-u.from]);)a++;h?({from:o,to:a}=h):o>u.from&&o<u.from+100&&!/\S/.test(u.text.slice(0,o))&&(o=u.from);let x=["",pp(e,v)];return h&&x.push(pp(e,m.lineIndent(u.from,-1))),{changes:{from:o,to:a,insert:Cr.of(x)},range:Ct.cursor(o+1+x[1].length)}});return t(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function dS(n,e){let t=-1;return n.changeByRange(r=>{let i=[];for(let a=r.from;a<=r.to;){let u=n.doc.lineAt(a);u.number>t&&(r.empty||r.to>u.from)&&(e(u,i,r),t=u.number),a=u.to+1}let o=n.changes(i);return{changes:i,range:Ct.range(o.mapPos(r.anchor,1),o.mapPos(r.head,1))}})}const eX=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:n=>wa(n,e=>hw(n.state,e,!$o(n))),shift:n=>Zs(n,e=>hw(n.state,e,!$o(n)))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:n=>wa(n,e=>hw(n.state,e,$o(n))),shift:n=>Zs(n,e=>hw(n.state,e,$o(n)))},{key:"Alt-ArrowUp",run:({state:n,dispatch:e})=>JL(n,e,!1)},{key:"Shift-Alt-ArrowUp",run:({state:n,dispatch:e})=>eF(n,e,!1)},{key:"Alt-ArrowDown",run:({state:n,dispatch:e})=>JL(n,e,!0)},{key:"Shift-Alt-ArrowDown",run:({state:n,dispatch:e})=>eF(n,e,!0)},{key:"Escape",run:({state:n,dispatch:e})=>{let t=n.selection,r=null;return t.ranges.length>1?r=Ct.create([t.main]):t.main.empty||(r=Ct.create([Ct.cursor(t.main.head)])),!!r&&(e(Ql(n,r)),!0)}},{key:"Mod-Enter",run:tF(!0)},{key:"Alt-l",mac:"Ctrl-l",run:({state:n,dispatch:e})=>{let t=vw(n).map(({from:r,to:i})=>Ct.range(r,Math.min(i+1,n.doc.length)));return e(n.update({selection:Ct.create(t),userEvent:"select"})),!0}},{key:"Mod-i",run:({state:n,dispatch:e})=>{let t=yp(n.selection,r=>{var i;let o=so(n).resolveInner(r.head,1);for(;!(o.from<r.from&&o.to>=r.to||o.to>r.to&&o.from<=r.from||null===(i=o.parent)||void 0===i)&&i.parent;)o=o.parent;return Ct.range(o.to,o.from)});return e(Ql(n,t)),!0},preventDefault:!0},{key:"Mod-[",run:({state:n,dispatch:e})=>!n.readOnly&&(e(n.update(dS(n,(t,r)=>{let i=/^\s*/.exec(t.text)[0];if(!i)return;let o=Am(i,n.tabSize),a=0,u=pp(n,Math.max(0,o-wh(n)));for(;a<i.length&&a<u.length&&i.charCodeAt(a)==u.charCodeAt(a);)a++;r.push({from:t.from+a,to:t.from+i.length,insert:u.slice(a)})}),{userEvent:"delete.dedent"})),!0)},{key:"Mod-]",run:({state:n,dispatch:e})=>!n.readOnly&&(e(n.update(dS(n,(t,r)=>{r.push({from:t.from,insert:n.facet(zC)})}),{userEvent:"input.indent"})),!0)},{key:"Mod-Alt-\\",run:({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),r=new Ym(n,{overrideIndentation:o=>t[o]??-1}),i=dS(n,(o,a,u)=>{let h=tw(r,o.from);if(null==h)return;/\S/.test(o.text)||(h=0);let m=/^\s*/.exec(o.text)[0],v=pp(n,h);(m!=v||u.from<o.from+m.length)&&(t[o.from]=h,a.push({from:o.from,to:o.from+m.length,insert:v}))});return i.changes.empty||e(n.update(i,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(vw(e).map(({from:i,to:o})=>(i>0?i--:o<e.doc.length&&o++,{from:i,to:o}))),r=yp(e.selection,i=>n.moveVertically(i,!0)).map(t);return n.dispatch({changes:t,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:({state:n,dispatch:e})=>function PL(n,e,t){let r=!1,i=yp(n.selection,o=>{let a=Zl(n,o.head,-1)||Zl(n,o.head,1)||o.head>0&&Zl(n,o.head-1,1)||o.head<n.doc.length&&Zl(n,o.head+1,-1);if(!a||!a.end)return o;r=!0;let u=a.start.from==o.head?a.end.to:a.end.from;return t?Ct.range(o.anchor,u):Ct.cursor(u)});return!!r&&(e(Ql(n,i)),!0)}(n,e,!1)},{key:"Mod-/",run:n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),r=rS(n.state,t.from);return r.line?Yq(n):!!r.block&&Kq(n)}},{key:"Alt-A",run:Xq}].concat([{key:"ArrowLeft",run:DL,shift:NL,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:n=>dw(n,!$o(n)),shift:n=>pw(n,!$o(n)),preventDefault:!0},{mac:"Cmd-ArrowLeft",run:n=>wa(n,e=>Wu(n,e,!$o(n))),shift:n=>Zs(n,e=>Wu(n,e,!$o(n))),preventDefault:!0},{key:"ArrowRight",run:CL,shift:LL,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:n=>dw(n,$o(n)),shift:n=>pw(n,$o(n)),preventDefault:!0},{mac:"Cmd-ArrowRight",run:n=>wa(n,e=>Wu(n,e,$o(n))),shift:n=>Zs(n,e=>Wu(n,e,$o(n))),preventDefault:!0},{key:"ArrowUp",run:TL,shift:VL,preventDefault:!0},{mac:"Cmd-ArrowUp",run:GL,shift:WL},{mac:"Ctrl-ArrowUp",run:RL,shift:jL},{key:"ArrowDown",run:kL,shift:HL,preventDefault:!0},{mac:"Cmd-ArrowDown",run:$L,shift:qL},{mac:"Ctrl-ArrowDown",run:cS,shift:UL},{key:"PageUp",run:RL,shift:jL},{key:"PageDown",run:cS,shift:UL},{key:"Home",run:n=>wa(n,e=>Wu(n,e,!1)),shift:n=>Zs(n,e=>Wu(n,e,!1)),preventDefault:!0},{key:"Mod-Home",run:GL,shift:WL},{key:"End",run:n=>wa(n,e=>Wu(n,e,!0)),shift:n=>Zs(n,e=>Wu(n,e,!0)),preventDefault:!0},{key:"Mod-End",run:$L,shift:qL},{key:"Enter",run:XY},{key:"Mod-a",run:({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0)},{key:"Backspace",run:uS,shift:uS},{key:"Delete",run:XL},{key:"Mod-Backspace",mac:"Alt-Backspace",run:ZL},{key:"Mod-Delete",mac:"Alt-Delete",run:n=>KL(n,!0)},{mac:"Mod-Backspace",run:n=>gw(n,e=>{let t=n.lineBlockAt(e).from;return e>t?t:Math.max(0,e-1)})},{mac:"Mod-Delete",run:QL}].concat([{key:"Ctrl-b",run:DL,shift:NL,preventDefault:!0},{key:"Ctrl-f",run:CL,shift:LL},{key:"Ctrl-p",run:TL,shift:VL},{key:"Ctrl-n",run:kL,shift:HL},{key:"Ctrl-a",run:n=>wa(n,e=>Ct.cursor(n.lineBlockAt(e.head).from,1)),shift:n=>Zs(n,e=>Ct.cursor(n.lineBlockAt(e.head).from))},{key:"Ctrl-e",run:n=>wa(n,e=>Ct.cursor(n.lineBlockAt(e.head).to,-1)),shift:n=>Zs(n,e=>Ct.cursor(n.lineBlockAt(e.head).to))},{key:"Ctrl-d",run:XL},{key:"Ctrl-h",run:uS},{key:"Ctrl-k",run:QL},{key:"Ctrl-Alt-h",run:ZL},{key:"Ctrl-o",run:({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:Cr.of(["",""])},range:Ct.cursor(r.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>{if(!r.empty||0==r.from||r.from==n.doc.length)return{range:r};let i=r.from,o=n.doc.lineAt(i),a=i==o.from?i-1:ss(o.text,i-o.from,!1)+o.from,u=i==o.to?i+1:ss(o.text,i-o.from,!0)+o.from;return{changes:{from:a,to:u,insert:n.doc.slice(i,u).append(n.doc.slice(a,i))},range:Ct.cursor(u)}});return!t.changes.empty&&(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:cS}].map(n=>({mac:n.key,run:n.run,shift:n.shift})))),rF="function"==typeof String.prototype.normalize?n=>n.normalize("NFKD"):n=>n;class bp{constructor(e,t,r=0,i=e.length,o,a){this.test=a,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=o?u=>o(rF(u)):rF,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return xo(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=TD(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=ga(e);let i=this.normalize(t);for(let o=0,a=r;;o++){let u=i.charCodeAt(o),h=this.match(u,a);if(h)return this.value=h,this;if(o==i.length-1)break;a==r&&o<t.length&&t.charCodeAt(o)==u&&a++}}}match(e,t){let r=null;for(let i=0;i<this.matches.length;i+=2){let o=this.matches[i],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?r={from:this.matches[i+1],to:t+1}:(this.matches[i]++,a=!0)),a||(this.matches.splice(i,2),i-=2)}return this.query.charCodeAt(0)==e&&(1==this.query.length?r={from:t,to:t+1}:this.matches.push(1,t)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferPos)&&(r=null),r}}typeof Symbol<"u"&&(bp.prototype[Symbol.iterator]=function(){return this});const iF={from:-1,to:-1,match:/.*/.exec("")},fS="gm"+(null==/x/.unicode?"":"u");class oF{constructor(e,t,r,i=0,o=e.length){if(this.text=e,this.to=o,this.curLine="",this.done=!1,this.value=iF,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new sF(e,t,r,i,o);this.re=new RegExp(t,fS+(r?.ignoreCase?"i":"")),this.test=r?.test,this.iter=e.iter();let a=e.lineAt(i);this.curLineStart=a.from,this.matchPos=yw(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let r=this.curLineStart+t.index,i=r+t[0].length;if(this.matchPos=yw(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,t)))return this.value={from:r,to:i,match:t},this;e=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),e=0}}}}const pS=new WeakMap;class wp{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,r){let i=pS.get(e);if(!i||i.from>=r||i.to<=t){let u=new wp(t,e.sliceString(t,r));return pS.set(e,u),u}if(i.from==t&&i.to==r)return i;let{text:o,from:a}=i;return a>t&&(o=e.sliceString(t,a)+o,a=t),i.to<r&&(o+=e.sliceString(i.to,r)),pS.set(e,new wp(a,o)),new wp(t,o.slice(t-a,r-a))}}class sF{constructor(e,t,r,i,o){this.text=e,this.to=o,this.done=!1,this.value=iF,this.matchPos=yw(e,i),this.re=new RegExp(t,fS+(r?.ignoreCase?"i":"")),this.test=r?.test,this.flat=wp.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let r=this.flat.from+t.index,i=r+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,t)))return this.value={from:r,to:i,match:t},this.matchPos=yw(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=wp.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}function yw(n,e){if(e>=n.length)return e;let r,t=n.lineAt(e);for(;e<t.to&&(r=t.text.charCodeAt(e-t.from))>=56320&&r<57344;)e++;return e}function gS(n){let e=$r("input",{class:"cm-textfield",name:"line"});function r(){let i=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!i)return;let{state:o}=n,a=o.doc.lineAt(o.selection.main.head),[,u,h,m,v]=i,x=m?+m.slice(1):0,k=h?+h:a.number;if(h&&v){let Y=k/100;u&&(Y=Y*("-"==u?-1:1)+a.number/o.doc.lines),k=Math.round(o.doc.lines*Y)}else h&&u&&(k=k*("-"==u?-1:1)+a.number);let F=o.doc.line(Math.max(1,Math.min(o.doc.lines,k)));n.dispatch({effects:bw.of(!1),selection:Ct.cursor(F.from+Math.max(0,Math.min(x,F.length))),scrollIntoView:!0}),n.focus()}return{dom:$r("form",{class:"cm-gotoLine",onkeydown:i=>{27==i.keyCode?(i.preventDefault(),n.dispatch({effects:bw.of(!1)}),n.focus()):13==i.keyCode&&(i.preventDefault(),r())},onsubmit:i=>{i.preventDefault(),r()}},$r("label",n.state.phrase("Go to line"),": ",e)," ",$r("button",{class:"cm-button",type:"submit"},n.state.phrase("go")))}}typeof Symbol<"u"&&(oF.prototype[Symbol.iterator]=sF.prototype[Symbol.iterator]=function(){return this});const bw=Qn.define(),aF=Bi.define({create:()=>!0,update(n,e){for(let t of e.effects)t.is(bw)&&(n=t.value);return n},provide:n=>jm.from(n,e=>e?gS:null)}),rX=Rn.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),iX={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},lF=ln.define({combine:n=>tl(n,iX,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})});function oX(n){let e=[uX,cX];return n&&e.push(lF.of(n)),e}const sX=dn.mark({class:"cm-selectionMatch"}),aX=dn.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function cF(n,e,t,r){return!(0!=t&&n(e.sliceDoc(t-1,t))==ii.Word||r!=e.doc.length&&n(e.sliceDoc(r,r+1))==ii.Word)}const cX=_i.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(lF),{state:t}=n,r=t.selection;if(r.ranges.length>1)return dn.none;let o,i=r.main,a=null;if(i.empty){if(!e.highlightWordAroundCursor)return dn.none;let h=t.wordAt(i.head);if(!h)return dn.none;a=t.charCategorizer(i.head),o=t.sliceDoc(h.from,h.to)}else{let h=i.to-i.from;if(h<e.minSelectionLength||h>200)return dn.none;if(e.wholeWords){if(o=t.sliceDoc(i.from,i.to),a=t.charCategorizer(i.head),!cF(a,t,i.from,i.to)||!function lX(n,e,t,r){return n(e.sliceDoc(t,t+1))==ii.Word&&n(e.sliceDoc(r-1,r))==ii.Word}(a,t,i.from,i.to))return dn.none}else if(o=t.sliceDoc(i.from,i.to).trim(),!o)return dn.none}let u=[];for(let h of n.visibleRanges){let m=new bp(t.doc,o,h.from,h.to);for(;!m.next().done;){let{from:v,to:x}=m.value;if((!a||cF(a,t,v,x))&&(i.empty&&v<=i.from&&x>=i.to?u.push(aX.range(v,x)):(v>=i.to||x<=i.from)&&u.push(sX.range(v,x)),u.length>e.maxMatches))return dn.none}}return dn.set(u)}},{decorations:n=>n.decorations}),uX=Rn.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),Eh=ln.define({combine:n=>tl(n,{top:!1,caseSensitive:!1,literal:!1,wholeWord:!1,createPanel:e=>new CX(e),scrollToMatch:e=>Rn.scrollIntoView(e)})});class uF{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||function tX(n){try{return new RegExp(n,fS),!0}catch{return!1}}(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,r)=>"n"==r?"\n":"r"==r?"\r":"t"==r?"\t":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new vX(this):new gX(this)}getCursor(e,t=0,r){let i=e.doc?e:ls.create({doc:e});return null==r&&(r=i.doc.length),this.regexp?xp(this,i,t,r):_p(this,i,t,r)}}class dF{constructor(e){this.spec=e}}function _p(n,e,t,r){return new bp(e.doc,n.unquoted,t,r,n.caseSensitive?void 0:i=>i.toLowerCase(),n.wholeWord?function pX(n,e){return(t,r,i,o)=>((o>t||o+i.length<r)&&(o=Math.max(0,t-2),i=n.sliceString(o,Math.min(n.length,r+2))),!(e(ww(i,t-o))==ii.Word&&e(_w(i,t-o))==ii.Word||e(_w(i,r-o))==ii.Word&&e(ww(i,r-o))==ii.Word))}(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}class gX extends dF{constructor(e){super(e)}nextMatch(e,t,r){let i=_p(this.spec,e,r,e.doc.length).nextOverlapping();return i.done&&(i=_p(this.spec,e,0,t).nextOverlapping()),i.done?null:i.value}prevMatchInRange(e,t,r){for(let i=r;;){let o=Math.max(t,i-1e4-this.spec.unquoted.length),a=_p(this.spec,e,o,i),u=null;for(;!a.nextOverlapping().done;)u=a.value;if(u)return u;if(o==t)return null;i-=1e4}}prevMatch(e,t,r){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let r=_p(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=t)return null;i.push(r.value)}return i}highlight(e,t,r,i){let o=_p(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!o.next().done;)i(o.value.from,o.value.to)}}function xp(n,e,t,r){return new oF(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?mX(e.charCategorizer(e.selection.main.head)):void 0},t,r)}function ww(n,e){return n.slice(ss(n,e,!1),e)}function _w(n,e){return n.slice(e,ss(n,e))}function mX(n){return(e,t,r)=>!r[0].length||(n(ww(r.input,r.index))!=ii.Word||n(_w(r.input,r.index))!=ii.Word)&&(n(_w(r.input,r.index+r[0].length))!=ii.Word||n(ww(r.input,r.index+r[0].length))!=ii.Word)}class vX extends dF{nextMatch(e,t,r){let i=xp(this.spec,e,r,e.doc.length).next();return i.done&&(i=xp(this.spec,e,0,t).next()),i.done?null:i.value}prevMatchInRange(e,t,r){for(let i=1;;i++){let o=Math.max(t,r-1e4*i),a=xp(this.spec,e,o,r),u=null;for(;!a.next().done;)u=a.value;if(u&&(o==t||u.from>o+10))return u;if(o==t)return null}}prevMatch(e,t,r){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(t,r)=>"$"==r?"$":"&"==r?e.match[0]:"0"!=r&&+r<e.match.length?e.match[r]:t))}matchAll(e,t){let r=xp(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=t)return null;i.push(r.value)}return i}highlight(e,t,r,i){let o=xp(this.spec,e,Math.max(0,t-250),Math.min(r+250,e.doc.length));for(;!o.next().done;)i(o.value.from,o.value.to)}}const tv=Qn.define(),mS=Qn.define(),Jl=Bi.define({create:n=>new vS(Dw(n).create(),null),update(n,e){for(let t of e.effects)t.is(tv)?n=new vS(t.value.create(),n.panel):t.is(mS)&&(n=new vS(n.query,t.value?yS:null));return n},provide:n=>jm.from(n,e=>e.panel)});class vS{constructor(e,t){this.query=e,this.panel=t}}const yX=dn.mark({class:"cm-searchMatch"}),bX=dn.mark({class:"cm-searchMatch cm-searchMatch-selected"}),wX=_i.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(Jl))}update(n){let e=n.state.field(Jl);(e!=n.startState.field(Jl)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return dn.none;let{view:t}=this,r=new Nu;for(let i=0,o=t.visibleRanges,a=o.length;i<a;i++){let{from:u,to:h}=o[i];for(;i<a-1&&h>o[i+1].from-500;)h=o[++i].to;n.highlight(t.state,u,h,(m,v)=>{let x=t.state.selection.ranges.some(k=>k.from==m&&k.to==v);r.add(m,v,x?bX:yX)})}return r.finish()}},{decorations:n=>n.decorations});function nv(n){return e=>{let t=e.state.field(Jl,!1);return t&&t.query.spec.valid?n(e,t):fF(e)}}const xw=nv((n,{query:e})=>{let{to:t}=n.state.selection.main,r=e.nextMatch(n.state,t,t);if(!r)return!1;let i=Ct.single(r.from,r.to),o=n.state.facet(Eh);return n.dispatch({selection:i,effects:[bS(n,r),o.scrollToMatch(i.main)],userEvent:"select.search"}),!0}),Ew=nv((n,{query:e})=>{let{state:t}=n,{from:r}=t.selection.main,i=e.prevMatch(t,r,r);if(!i)return!1;let o=Ct.single(i.from,i.to),a=n.state.facet(Eh);return n.dispatch({selection:o,effects:[bS(n,i),a.scrollToMatch(o.main)],userEvent:"select.search"}),!0}),_X=nv((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!(!t||!t.length||(n.dispatch({selection:Ct.create(t.map(r=>Ct.range(r.from,r.to))),userEvent:"select.search.matches"}),0))}),hF=nv((n,{query:e})=>{let{state:t}=n,{from:r,to:i}=t.selection.main;if(t.readOnly)return!1;let o=e.nextMatch(t,r,r);if(!o)return!1;let u,h,a=[],m=[];if(o.from==r&&o.to==i&&(h=t.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:h}),o=e.nextMatch(t,o.from,o.to),m.push(Rn.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(r).number)+"."))),o){let v=0==a.length||a[0].from>=o.to?0:o.to-o.from-h.length;u=Ct.single(o.from-v,o.to-v),m.push(bS(n,o)),m.push(t.facet(Eh).scrollToMatch(u.main))}return n.dispatch({changes:a,selection:u,effects:m,userEvent:"input.replace"}),!0}),EX=nv((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(i=>{let{from:o,to:a}=i;return{from:o,to:a,insert:e.getReplacement(i)}});if(!t.length)return!1;let r=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:Rn.announce.of(r),userEvent:"input.replace.all"}),!0});function yS(n){return n.state.facet(Eh).createPanel(n)}function Dw(n,e){var t,r,i,o;let a=n.selection.main,u=a.empty||a.to>a.from+100?"":n.sliceDoc(a.from,a.to);if(e&&!u)return e;let h=n.facet(Eh);return new uF({search:(null!==(t=e?.literal)&&void 0!==t?t:h.literal)?u:u.replace(/\n/g,"\\n"),caseSensitive:null!==(r=e?.caseSensitive)&&void 0!==r?r:h.caseSensitive,literal:null!==(i=e?.literal)&&void 0!==i?i:h.literal,wholeWord:null!==(o=e?.wholeWord)&&void 0!==o?o:h.wholeWord})}const fF=n=>{let e=n.state.field(Jl,!1);if(e&&e.panel){let t=zm(n,yS);if(!t)return!1;let r=t.dom.querySelector("[main-field]");if(r&&r!=n.root.activeElement){let i=Dw(n.state,e.query.spec);i.valid&&n.dispatch({effects:tv.of(i)}),r.focus(),r.select()}}else n.dispatch({effects:[mS.of(!0),e?tv.of(Dw(n.state,e.query.spec)):Qn.appendConfig.of(wS)]});return!0},pF=n=>{let e=n.state.field(Jl,!1);if(!e||!e.panel)return!1;let t=zm(n,yS);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:mS.of(!1)}),!0},DX=[{key:"Mod-f",run:fF,scope:"editor search-panel"},{key:"F3",run:xw,shift:Ew,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:xw,shift:Ew,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:pF,scope:"editor search-panel"},{key:"Mod-Shift-l",run:({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:r,to:i}=t.main,o=[],a=0;for(let u=new bp(n.doc,n.sliceDoc(r,i));!u.next().done;){if(o.length>1e3)return!1;u.value.from==r&&(a=o.length),o.push(Ct.range(u.value.from,u.value.to))}return e(n.update({selection:Ct.create(o,a),userEvent:"select.search.matches"})),!0}},{key:"Alt-g",run:n=>{let e=zm(n,gS);if(!e){let t=[bw.of(!0)];null==n.state.field(aF,!1)&&t.push(Qn.appendConfig.of([aF,rX])),n.dispatch({effects:t}),e=zm(n,gS)}return e&&e.dom.querySelector("input").focus(),!0}},{key:"Mod-d",run:({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(o=>o.from===o.to))return(({state:n,dispatch:e})=>{let{selection:t}=n,r=Ct.create(t.ranges.map(i=>n.wordAt(i.head)||Ct.cursor(i.head)),t.mainIndex);return!r.eq(t)&&(e(n.update({selection:r})),!0)})({state:n,dispatch:e});let r=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(o=>n.sliceDoc(o.from,o.to)!=r))return!1;let i=function hX(n,e){let{main:t,ranges:r}=n.selection,i=n.wordAt(t.head),o=i&&i.from==t.from&&i.to==t.to;for(let a=!1,u=new bp(n.doc,e,r[r.length-1].to);;){if(u.next(),!u.done){if(a&&r.some(h=>h.from==u.value.from))continue;if(o){let h=n.wordAt(u.value.from);if(!h||h.from!=u.value.from||h.to!=u.value.to)continue}return u.value}if(a)return null;u=new bp(n.doc,e,0,Math.max(0,r[r.length-1].from-1)),a=!0}}(n,r);return!!i&&(e(n.update({selection:n.selection.addRange(Ct.range(i.from,i.to),!1),effects:Rn.scrollIntoView(i.to)})),!0)},preventDefault:!0}];class CX{constructor(e){this.view=e;let t=this.query=e.state.field(Jl).query.spec;function r(i,o,a){return $r("button",{class:"cm-button",name:i,onclick:o,type:"button"},a)}this.commit=this.commit.bind(this),this.searchField=$r("input",{value:t.search,placeholder:Qs(e,"Find"),"aria-label":Qs(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=$r("input",{value:t.replace,placeholder:Qs(e,"Replace"),"aria-label":Qs(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=$r("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=$r("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=$r("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit}),this.dom=$r("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>xw(e),[Qs(e,"next")]),r("prev",()=>Ew(e),[Qs(e,"previous")]),r("select",()=>_X(e),[Qs(e,"all")]),$r("label",null,[this.caseField,Qs(e,"match case")]),$r("label",null,[this.reField,Qs(e,"regexp")]),$r("label",null,[this.wordField,Qs(e,"by word")]),...e.state.readOnly?[]:[$r("br"),this.replaceField,r("replace",()=>hF(e),[Qs(e,"replace")]),r("replaceAll",()=>EX(e),[Qs(e,"replace all")])],$r("button",{name:"close",onclick:()=>pF(e),"aria-label":Qs(e,"close"),type:"button"},["\xd7"])])}commit(){let e=new uF({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:tv.of(e)}))}keydown(e){!function i6(n,e,t){return PP(RP(n.state),e,n,t)}(this.view,e,"search-panel")?13==e.keyCode&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Ew:xw)(this.view)):13==e.keyCode&&e.target==this.replaceField&&(e.preventDefault(),hF(this.view)):e.preventDefault()}update(e){for(let t of e.transactions)for(let r of t.effects)r.is(tv)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Eh).top}}function Qs(n,e){return n.state.phrase(e)}const Sw=/[\s\.,:;?!]/;function bS(n,{from:e,to:t}){let r=n.state.doc.lineAt(e),i=n.state.doc.lineAt(t).to,o=Math.max(r.from,e-30),a=Math.min(i,t+30),u=n.state.sliceDoc(o,a);if(o!=r.from)for(let h=0;h<30;h++)if(!Sw.test(u[h+1])&&Sw.test(u[h])){u=u.slice(h);break}if(a!=i)for(let h=u.length-1;h>u.length-30;h--)if(!Sw.test(u[h-1])&&Sw.test(u[h])){u=u.slice(0,h);break}return Rn.announce.of(`${n.state.phrase("current match")}. ${u} ${n.state.phrase("on line")} ${r.number}.`)}const SX=Rn.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),wS=[Jl,hh.lowest(wX),SX];class gF{constructor(e,t,r){this.state=e,this.pos=t,this.explicit=r,this.abortListeners=[]}tokenBefore(e){let t=so(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),r=Math.max(t.from,this.pos-250),i=t.text.slice(r-t.from,this.pos-t.from),o=i.search(yF(e,!1));return o<0?null:{from:r+o,to:this.pos,text:i.slice(o)}}get aborted(){return null==this.abortListeners}addEventListener(e,t){"abort"==e&&this.abortListeners&&this.abortListeners.push(t)}}function mF(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}class vF{constructor(e,t,r){this.completion=e,this.source=t,this.match=r}}function qu(n){return n.selection.main.head}function yF(n,e){var t;let{source:r}=n,i=e&&"^"!=r[0],o="$"!=r[r.length-1];return i||o?new RegExp(`${i?"^":""}(?:${r})${o?"$":""}`,null!==(t=n.flags)&&void 0!==t?t:n.ignoreCase?"i":""):n}const bF=Nc.define();function wF(n,e){const t=e.completion.apply||e.completion.label;let r=e.source;"string"==typeof t?n.dispatch(Object.assign(Object.assign({},function TX(n,e,t,r){return Object.assign(Object.assign({},n.changeByRange(i=>{if(i==n.selection.main)return{changes:{from:t,to:r,insert:e},range:Ct.cursor(t+e.length)};let o=r-t;return!i.empty||o&&n.sliceDoc(i.from-o,i.from)!=n.sliceDoc(t,r)?{range:i}:{changes:{from:i.from-o,to:i.from,insert:e},range:Ct.cursor(i.from-o+e.length)}})),{userEvent:"input.complete"})}(n.state,t,r.from,r.to)),{annotations:bF.of(e.completion)})):t(n,e.completion,r.from,r.to)}const _F=new WeakMap;function kX(n){if(!Array.isArray(n))return n;let e=_F.get(n);return e||_F.set(n,e=function AX(n){let e=n.map(i=>"string"==typeof i?{label:i}:i),[t,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:function MX(n){let e=Object.create(null),t=Object.create(null);for(let{label:i}of n){e[i[0]]=!0;for(let o=1;o<i.length;o++)t[i[o]]=!0}let r=mF(e)+mF(t)+"*$";return[new RegExp("^"+r),new RegExp(r)]}(e);return i=>{let o=i.matchBefore(r);return o||i.explicit?{from:o?o.from:i.pos,options:e,validFor:t}:null}}(n)),e}class IX{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let t=0;t<e.length;){let r=xo(e,t),i=ga(r);this.chars.push(r);let o=e.slice(t,t+i),a=o.toUpperCase();this.folded.push(xo(a==o?o.toLowerCase():a,0)),t+=i}this.astral=e.length!=this.chars.length}match(e){if(0==this.pattern.length)return[0];if(e.length<this.pattern.length)return null;let{chars:t,folded:r,any:i,precise:o,byWord:a}=this;if(1==t.length){let Ke=xo(e,0),Ge=ga(Ke),ot=Ge==e.length?0:-100;if(Ke!=t[0]){if(Ke!=r[0])return null;ot+=-200}return[ot,0,Ge]}let u=e.indexOf(this.pattern);if(0==u)return[e.length==this.pattern.length?0:-100,0,this.pattern.length];let h=t.length,m=0;if(u<0){for(let Ke=0,Ge=Math.min(e.length,200);Ke<Ge&&m<h;){let ot=xo(e,Ke);(ot==t[m]||ot==r[m])&&(i[m++]=Ke),Ke+=ga(ot)}if(m<h)return null}let v=0,x=0,k=!1,F=0,Y=-1,ie=-1,me=/[a-z]/.test(e),Oe=!0;for(let Ke=0,Ge=Math.min(e.length,200),ot=0;Ke<Ge&&x<h;){let wt=xo(e,Ke);u<0&&(v<h&&wt==t[v]&&(o[v++]=Ke),F<h&&(wt==t[F]||wt==r[F]?(0==F&&(Y=Ke),ie=Ke+1,F++):F=0));let Et,Kt=wt<255?wt>=48&&wt<=57||wt>=97&&wt<=122?2:wt>=65&&wt<=90?1:0:(Et=TD(wt))!=Et.toLowerCase()?1:Et!=Et.toUpperCase()?2:0;(!Ke||1==Kt&&me||0==ot&&0!=Kt)&&(t[x]==wt||r[x]==wt&&(k=!0)?a[x++]=Ke:a.length&&(Oe=!1)),ot=Kt,Ke+=ga(wt)}return x==h&&0==a[0]&&Oe?this.result((k?-200:0)-100,a,e):F==h&&0==Y?[-200-e.length+(ie==e.length?0:-100),0,ie]:u>-1?[-700-e.length,u,u+this.pattern.length]:F==h?[-900-e.length,Y,ie]:x==h?this.result((k?-200:0)-100-700+(Oe?0:-1100),a,e):2==t.length?null:this.result((i[0]?-700:0)-200-1100,i,e)}result(e,t,r){let i=[e-r.length],o=1;for(let a of t){let u=a+(this.astral?ga(xo(r,a)):1);o>1&&i[o-1]==a?i[o-1]=u:(i[o++]=a,i[o++]=u)}return i}}const _a=ln.define({combine:n=>tl(n,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>r=>xF(e(r),t(r)),optionClass:(e,t)=>r=>xF(e(r),t(r)),addToOptions:(e,t)=>e.concat(t)})});function xF(n,e){return n?e?n+" "+e:n:e}function EF(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let i=Math.floor(e/t);return{from:i*t,to:(i+1)*t}}let r=Math.floor((n-e)/t);return{from:n-(r+1)*t,to:n-r*t}}class RX{constructor(e,t){this.view=e,this.stateField=t,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:u=>this.positionInfo(u),key:this},this.space=null,this.currentClass="";let r=e.state.field(t),{options:i,selected:o}=r.open,a=e.state.facet(_a);this.optionContent=function OX(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),t.type&&r.classList.add(...t.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(t,r,i){let o=document.createElement("span");o.className="cm-completionLabel";let{label:a}=t,u=0;for(let h=1;h<i.length;){let m=i[h++],v=i[h++];m>u&&o.appendChild(document.createTextNode(a.slice(u,m)));let x=o.appendChild(document.createElement("span"));x.appendChild(document.createTextNode(a.slice(m,v))),x.className="cm-completionMatchedText",u=v}return u<a.length&&o.appendChild(document.createTextNode(a.slice(u))),o},position:50},{render(t){if(!t.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=t.detail,r},position:80}),e.sort((t,r)=>t.position-r.position).map(t=>t.render)}(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=EF(i.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",u=>{for(let m,h=u.target;h&&h!=this.dom;h=h.parentNode)if("LI"==h.nodeName&&(m=/-(\d+)$/.exec(h.id))&&+m[1]<i.length)return wF(e,i[+m[1]]),void u.preventDefault()}),this.list=this.dom.appendChild(this.createListBox(i,r.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})}mount(){this.updateSel()}update(e){var t,r,i;let o=e.state.field(this.stateField),a=e.startState.field(this.stateField);this.updateTooltipClass(e.state),o!=a&&(this.updateSel(),(null===(t=o.open)||void 0===t?void 0:t.disabled)!=(null===(r=a.open)||void 0===r?void 0:r.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!(null===(i=o.open)||void 0===i||!i.disabled)))}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of t.split(" "))r&&this.dom.classList.add(r);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=EF(t.options.length,t.selected,this.view.state.facet(_a).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})),this.updateSelectedOption(t.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:r}=t.options[t.selected],{info:i}=r;if(!i)return;let o="string"==typeof i?document.createTextNode(i):i(r);if(!o)return;"then"in o?o.then(a=>{a&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(a)}).catch(a=>Xs(this.view.state,a,"completion info")):this.addInfoPane(o)}}addInfoPane(e){let t=this.info=document.createElement("div");t.className="cm-tooltip cm-completionInfo",t.appendChild(e),this.dom.appendChild(t),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(e){let t=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),t=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return t&&function NX(n,e){let t=n.getBoundingClientRect(),r=e.getBoundingClientRect();r.top<t.top?n.scrollTop-=t.top-r.top:r.bottom>t.bottom&&(n.scrollTop+=r.bottom-t.bottom)}(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),o=this.space;if(!o){let Y=this.dom.ownerDocument.defaultView||window;o={left:0,top:0,right:Y.innerWidth,bottom:Y.innerHeight}}if(i.top>Math.min(o.bottom,t.bottom)-10||i.bottom<Math.max(o.top,t.top)+10)return null;let m,a=this.view.textDirection==pi.RTL,u=a,h=!1,v="",x="",k=t.left-o.left,F=o.right-t.right;if(u&&k<Math.min(r.width,F)?u=!1:!u&&F<Math.min(r.width,k)&&(u=!0),r.width<=(u?k:F))v=Math.max(o.top,Math.min(i.top,o.bottom-r.height))-t.top+"px",m=Math.min(400,u?k:F)+"px";else{h=!0,m=Math.min(400,(a?t.right:o.right-t.left)-30)+"px";let Y=o.bottom-t.bottom;Y>=r.height||Y>t.top?v=i.bottom-t.top+"px":x=t.bottom-i.top+"px"}return{top:v,bottom:x,maxWidth:m,class:h?a?"left-narrow":"right-narrow":u?"left":"right"}}positionInfo(e){this.info&&(e?(this.info.style.top=e.top,this.info.style.bottom=e.bottom,this.info.style.maxWidth=e.maxWidth,this.info.className="cm-tooltip cm-completionInfo cm-completionInfo-"+e.class):this.info.style.top="-1e6px")}createListBox(e,t,r){const i=document.createElement("ul");i.id=t,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let o=r.from;o<r.to;o++){let{completion:a,match:u}=e[o];const h=i.appendChild(document.createElement("li"));h.id=t+"-"+o,h.setAttribute("role","option");let m=this.optionClass(a);m&&(h.className=m);for(let v of this.optionContent){let x=v(a,this.view.state,u);x&&h.appendChild(x)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}}function DF(n){return 100*(n.boost||0)+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}class Ep{constructor(e,t,r,i,o,a){this.options=e,this.attrs=t,this.tooltip=r,this.timestamp=i,this.selected=o,this.disabled=a}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new Ep(this.options,CF(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,r,i,o){let a=function LX(n,e){let t=[],r=0;for(let u of n)if(u.hasResult())if(!1===u.result.filter){let h=u.result.getMatch;for(let m of u.result.options){let v=[1e9-r++];if(h)for(let x of h(m))v.push(x);t.push(new vF(m,u,v))}}else{let m,h=new IX(e.sliceDoc(u.from,u.to));for(let v of u.result.options)(m=h.match(v.label))&&(null!=v.boost&&(m[0]+=v.boost),t.push(new vF(v,u,m)))}let i=[],o=null,a=e.facet(_a).compareCompletions;for(let u of t.sort((h,m)=>m.match[0]-h.match[0]||a(h.completion,m.completion)))!o||o.label!=u.completion.label||o.detail!=u.completion.detail||null!=o.type&&null!=u.completion.type&&o.type!=u.completion.type||o.apply!=u.completion.apply?i.push(u):DF(u.completion)>DF(o)&&(i[i.length-1]=u),o=u.completion;return i}(e,t);if(!a.length)return i&&e.some(h=>1==h.state)?new Ep(i.options,i.attrs,i.tooltip,i.timestamp,i.selected,!0):null;let u=t.facet(_a).selectOnOpen?0:-1;if(i&&i.selected!=u&&-1!=i.selected){let h=i.options[i.selected].completion;for(let m=0;m<a.length;m++)if(a[m].completion==h){u=m;break}}return new Ep(a,CF(r,u),{pos:e.reduce((h,m)=>m.hasResult()?Math.min(h,m.from):h,1e8),create:(n=Wo,e=>new RX(e,n)),above:o.aboveCursor},i?i.timestamp:Date.now(),u,!1);var n}map(e){return new Ep(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class Mw{constructor(e,t,r){this.active=e,this.id=t,this.open=r}static start(){return new Mw(VX,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(e){let{state:t}=e,r=t.facet(_a),o=(r.override||t.languageDataAt("autocomplete",qu(t)).map(kX)).map(u=>(this.active.find(m=>m.source==u)||new Ts(u,this.active.some(m=>0!=m.state)?1:0)).update(e,r));o.length==this.active.length&&o.every((u,h)=>u==this.active[h])&&(o=this.active);let a=this.open;a&&e.docChanged&&(a=a.map(e.changes)),e.selection||o.some(u=>u.hasResult()&&e.changes.touchesRange(u.from,u.to))||!function FX(n,e){if(n==e)return!0;for(let t=0,r=0;;){for(;t<n.length&&!n[t].hasResult;)t++;for(;r<e.length&&!e[r].hasResult;)r++;let i=t==n.length,o=r==e.length;if(i||o)return i==o;if(n[t++].result!=e[r++].result)return!1}}(o,this.active)?a=Ep.build(o,t,this.id,a,r):a&&a.disabled&&!o.some(u=>1==u.state)&&(a=null),!a&&o.every(u=>1!=u.state)&&o.some(u=>u.hasResult())&&(o=o.map(u=>u.hasResult()?new Ts(u.source,0):u));for(let u of e.effects)u.is(ES)&&(a=a&&a.setSelected(u.value,this.id));return o==this.active&&a==this.open?this:new Mw(o,this.id,a)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:BX}}const BX={"aria-autocomplete":"list"};function CF(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const VX=[];function _S(n){return n.isUserEvent("input.type")?"input":n.isUserEvent("delete.backward")?"delete":null}class Ts{constructor(e,t,r=-1){this.source=e,this.state=t,this.explicitPos=r}hasResult(){return!1}update(e,t){let r=_S(e),i=this;r?i=i.handleUserEvent(e,r,t):e.docChanged?i=i.handleChange(e):e.selection&&0!=i.state&&(i=new Ts(i.source,0));for(let o of e.effects)if(o.is(xS))i=new Ts(i.source,1,o.value?qu(e.state):-1);else if(o.is(Aw))i=new Ts(i.source,0);else if(o.is(SF))for(let a of o.value)a.source==i.source&&(i=a);return i}handleUserEvent(e,t,r){return"delete"!=t&&r.activateOnTyping?new Ts(this.source,1):this.map(e.changes)}handleChange(e){return e.changes.touchesRange(qu(e.startState))?new Ts(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Ts(this.source,this.state,e.mapPos(this.explicitPos))}}class rv extends Ts{constructor(e,t,r,i,o){super(e,2,t),this.result=r,this.from=i,this.to=o}hasResult(){return!0}handleUserEvent(e,t,r){var i;let o=e.changes.mapPos(this.from),a=e.changes.mapPos(this.to,1),u=qu(e.state);if((this.explicitPos<0?u<=o:u<this.from)||u>a||"delete"==t&&qu(e.startState)==this.from)return new Ts(this.source,"input"==t&&r.activateOnTyping?1:0);let m,h=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return function HX(n,e,t,r){if(!n)return!1;let i=e.sliceDoc(t,r);return"function"==typeof n?n(i,t,r,e):yF(n,!0).test(i)}(this.result.validFor,e.state,o,a)?new rv(this.source,h,this.result,o,a):this.result.update&&(m=this.result.update(this.result,o,a,new gF(e.state,u,h>=0)))?new rv(this.source,h,m,m.from,null!==(i=m.to)&&void 0!==i?i:qu(e.state)):new Ts(this.source,1,h)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new Ts(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new rv(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}const xS=Qn.define(),Aw=Qn.define(),SF=Qn.define({map:(n,e)=>n.map(t=>t.map(e))}),ES=Qn.define(),Wo=Bi.define({create:()=>Mw.start(),update:(n,e)=>n.update(e),provide:n=>[Fb.from(n,e=>e.tooltip),Rn.contentAttributes.from(n,e=>e.attrs)]});function Tw(n,e="option"){return t=>{let r=t.state.field(Wo,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<t.state.facet(_a).interactionDelay)return!1;let o,i=1;"page"==e&&(o=function G6(n,e){let t=n.plugin(CC);if(!t)return null;let r=t.manager.tooltips.indexOf(e);return r<0?null:t.manager.tooltipViews[r]}(t,r.open.tooltip))&&(i=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:a}=r.open.options,u=r.open.selected>-1?r.open.selected+i*(n?1:-1):n?0:a-1;return u<0?u="page"==e?0:a-1:u>=a&&(u="page"==e?a-1:0),t.dispatch({effects:ES.of(u)}),!0}}class GX{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const qX=_i.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of n.state.field(Wo).active)1==e.state&&this.startQuery(e)}update(n){let e=n.state.field(Wo);if(!n.selectionSet&&!n.docChanged&&n.startState.field(Wo)==e)return;let t=n.transactions.some(r=>(r.selection||r.docChanged)&&!_S(r));for(let r=0;r<this.running.length;r++){let i=this.running[r];if(t||i.updates.length+n.transactions.length>50&&Date.now()-i.time>1e3){for(let o of i.context.abortListeners)try{o()}catch(a){Xs(this.view.state,a)}i.context.abortListeners=null,this.running.splice(r--,1)}else i.updates.push(...n.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(r=>1==r.state&&!this.running.some(i=>i.active.source==r.source))?setTimeout(()=>this.startUpdate(),50):-1,0!=this.composing)for(let r of n.transactions)"input"==_S(r)?this.composing=2:2==this.composing&&r.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:n}=this.view,e=n.field(Wo);for(let t of e.active)1==t.state&&!this.running.some(r=>r.active.source==t.source)&&this.startQuery(t)}startQuery(n){let{state:e}=this.view,t=qu(e),r=new gF(e,t,n.explicitPos==t),i=new GX(n,r);this.running.push(i),Promise.resolve(n.source(r)).then(o=>{i.context.aborted||(i.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:Aw.of(null)}),Xs(this.view.state,o)})}scheduleAccept(){this.running.every(n=>void 0!==n.done)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),50))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(_a);for(let r=0;r<this.running.length;r++){let i=this.running[r];if(void 0===i.done)continue;if(this.running.splice(r--,1),i.done){let a=new rv(i.active.source,i.active.explicitPos,i.done,i.done.from,null!==(n=i.done.to)&&void 0!==n?n:qu(i.updates.length?i.updates[0].startState:this.view.state));for(let u of i.updates)a=a.update(u,t);if(a.hasResult()){e.push(a);continue}}let o=this.view.state.field(Wo).active.find(a=>a.source==i.active.source);if(o&&1==o.state)if(null==i.done){let a=new Ts(i.active.source,0);for(let u of i.updates)a=a.update(u,t);1!=a.state&&e.push(a)}else this.startQuery(o)}e.length&&this.view.dispatch({effects:SF.of(e)})}},{eventHandlers:{blur(){let n=this.view.state.field(Wo,!1);n&&n.tooltip&&this.view.state.facet(_a).closeOnBlur&&this.view.dispatch({effects:Aw.of(null)})},compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout(()=>this.view.dispatch({effects:xS.of(!1)}),20),this.composing=0}}}),AF=Rn.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xb7\xb7\xb7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25cb'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25cc'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1d465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1d436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1d461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222a'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25a1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1f511}\ufe0e'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25a2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),sv={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Dh=Qn.define({map:(n,e)=>e.mapPos(n,-1,as.TrackAfter)??void 0}),MS=Qn.define({map:(n,e)=>e.mapPos(n)}),AS=new class extends fh{};AS.startSide=1,AS.endSide=-1;const NF=Bi.define({create:()=>fi.empty,update(n,e){if(e.selection){let t=e.state.doc.lineAt(e.selection.main.head).from,r=e.startState.doc.lineAt(e.startState.selection.main.head).from;t!=e.changes.mapPos(r,-1)&&(n=fi.empty)}n=n.map(e.changes);for(let t of e.effects)t.is(Dh)?n=n.update({add:[AS.range(t.value,t.value+1)]}):t.is(MS)&&(n=n.update({filter:r=>r!=t.value}));return n}}),TS="()[]{}<>";function LF(n){for(let e=0;e<TS.length;e+=2)if(TS.charCodeAt(e)==n)return TS.charAt(e+1);return TD(n<128?n:n+1)}function FF(n,e){return n.languageDataAt("closeBrackets",e)[0]||sv}const o7="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),s7=Rn.inputHandler.of((n,e,t,r)=>{if((o7?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let i=n.state.selection.main;if(r.length>2||2==r.length&&1==ga(xo(r,0))||e!=i.from||t!=i.to)return!1;let o=function l7(n,e){let t=FF(n,n.selection.main.head),r=t.brackets||sv.brackets;for(let i of r){let o=LF(xo(i,0));if(e==i)return o==i?h7(n,i,r.indexOf(i+i+i)>-1,t):u7(n,i,o,t.before||sv.before);if(e==o&&BF(n,n.selection.main.from))return d7(n,0,o)}return null}(n.state,r);return!!o&&(n.dispatch(o),!0)}),a7=[{key:"Backspace",run:({state:n,dispatch:e})=>{if(n.readOnly)return!1;let r=FF(n,n.selection.main.head).brackets||sv.brackets,i=null,o=n.changeByRange(a=>{if(a.empty){let u=function c7(n,e){let t=n.sliceString(e-2,e);return ga(xo(t,0))==t.length?t:t.slice(1)}(n.doc,a.head);for(let h of r)if(h==u&&kw(n.doc,a.head)==LF(xo(h,0)))return{changes:{from:a.head-h.length,to:a.head+h.length},range:Ct.cursor(a.head-h.length)}}return{range:i=a}});return i||e(n.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!i}}];function BF(n,e){let t=!1;return n.field(NF).between(0,n.doc.length,r=>{r==e&&(t=!0)}),t}function kw(n,e){let t=n.sliceString(e,e+2);return t.slice(0,ga(xo(t,0)))}function u7(n,e,t,r){let i=null,o=n.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:t,from:a.to}],effects:Dh.of(a.to+e.length),range:Ct.range(a.anchor+e.length,a.head+e.length)};let u=kw(n.doc,a.head);return!u||/\s/.test(u)||r.indexOf(u)>-1?{changes:{insert:e+t,from:a.head},effects:Dh.of(a.head+e.length),range:Ct.cursor(a.head+e.length)}:{range:i=a}});return i?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function d7(n,e,t){let r=null,i=n.selection.ranges.map(o=>o.empty&&kw(n.doc,o.head)==t?Ct.cursor(o.head+t.length):r=o);return r?null:n.update({selection:Ct.create(i,n.selection.mainIndex),scrollIntoView:!0,effects:n.selection.ranges.map(({from:o})=>MS.of(o))})}function h7(n,e,t,r){let i=r.stringPrefixes||sv.stringPrefixes,o=null,a=n.changeByRange(u=>{if(!u.empty)return{changes:[{insert:e,from:u.from},{insert:e,from:u.to}],effects:Dh.of(u.to+e.length),range:Ct.range(u.anchor+e.length,u.head+e.length)};let v,h=u.head,m=kw(n.doc,h);if(m==e){if(VF(n,h))return{changes:{insert:e+e,from:h},effects:Dh.of(h+e.length),range:Ct.cursor(h+e.length)};if(BF(n,h)){let x=t&&n.sliceDoc(h,h+3*e.length)==e+e+e;return{range:Ct.cursor(h+e.length*(x?3:1)),effects:MS.of(h)}}}else{if(t&&n.sliceDoc(h-2*e.length,h)==e+e&&(v=HF(n,h-2*e.length,i))>-1&&VF(n,v))return{changes:{insert:e+e+e+e,from:h},effects:Dh.of(h+e.length),range:Ct.cursor(h+e.length)};if(n.charCategorizer(h)(m)!=ii.Word&&HF(n,h,i)>-1&&!function f7(n,e,t,r){let i=so(n).resolveInner(e,-1),o=r.reduce((a,u)=>Math.max(a,u.length),0);for(let a=0;a<5;a++){let u=n.sliceDoc(i.from,Math.min(i.to,i.from+t.length+o)),h=u.indexOf(t);if(!h||h>-1&&r.indexOf(u.slice(0,h))>-1){let v=i.firstChild;for(;v&&v.from==i.from&&v.to-v.from>t.length+h;){if(n.sliceDoc(v.to-t.length,v.to)==t)return!1;v=v.firstChild}return!0}let m=i.to==e&&i.parent;if(!m)break;i=m}return!1}(n,h,e,i))return{changes:{insert:e+e,from:h},effects:Dh.of(h+e.length),range:Ct.cursor(h+e.length)}}return{range:o=u}});return o?null:n.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function VF(n,e){let t=so(n).resolveInner(e+1);return t.parent&&t.from==e}function HF(n,e,t){let r=n.charCategorizer(e);if(r(n.sliceDoc(e-1,e))!=ii.Word)return e;for(let i of t){let o=e-i.length;if(n.sliceDoc(o,e)==i&&r(n.sliceDoc(o-1,o))!=ii.Word)return o}return-1}function p7(n={}){return[Wo,_a.of(n),qX,g7,AF]}const zF=[{key:"Ctrl-Space",run:n=>!!n.state.field(Wo,!1)&&(n.dispatch({effects:xS.of(!0)}),!0)},{key:"Escape",run:n=>{let e=n.state.field(Wo,!1);return!(!e||!e.active.some(t=>0!=t.state)||(n.dispatch({effects:Aw.of(null)}),0))}},{key:"ArrowDown",run:Tw(!0)},{key:"ArrowUp",run:Tw(!1)},{key:"PageDown",run:Tw(!0,"page")},{key:"PageUp",run:Tw(!1,"page")},{key:"Enter",run:n=>{let e=n.state.field(Wo,!1);return!(n.state.readOnly||!e||!e.open||e.open.selected<0||Date.now()-e.open.timestamp<n.state.facet(_a).interactionDelay||(e.open.disabled||wF(n,e.open.options[e.open.selected]),0))}}],g7=hh.highest(Ob.computeN([_a],n=>n.facet(_a).defaultKeymap?[zF]:[])),m7=(()=>[Q6(),e9,w6(),rY(),aq(),u6(),[Vm,p6],ls.allowMultipleSelections.of(!0),ls.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:r}=n.newSelection.main,i=t.lineAt(r);if(r>i.from+200)return n;let o=t.sliceString(i.from,r);if(!e.some(m=>m.test(o)))return n;let{state:a}=n,u=-1,h=[];for(let{head:m}of a.selection.ranges){let v=a.doc.lineAt(m);if(v.from==u)continue;u=v.from;let x=tw(a,v.from);if(null==x)continue;let k=/^\s*/.exec(v.text)[0],F=pp(a,x);k!=F&&h.push({from:v.from,to:v.from+k.length,insert:F})}return h.length?[n,{changes:h,sequential:!0}]:n}),qC(dq,{fallback:!0}),vq(),[s7,NF],p7(),R6(),L6(),A6,oX(),Ob.of([...a7,...eX,...DX,...hY,...iq,...zF,...Fq])])(),kS="#2e3440",UF="#3b4252",GF="#434c5e",Cp="#4c566a",av="#d8dee9",Ch="#8fbcbb",$F="#88c0d0",ec="#5e81ac",WF="#d08770",IS="#ebcb8b",Iw="#a3be8c",OS="#b48ead",qF="#d30102",NS=[Rn.theme({"&":{color:av,backgroundColor:kS},".cm-content":{caretColor:av},".cm-cursor, .cm-dropCursor":{borderLeftColor:av},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Cp},".cm-panels":{backgroundColor:"#252a33",color:Cp},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"transparent",outline:`1px solid ${Ch}`},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:av,color:kS},".cm-activeLine":{backgroundColor:Cp},".cm-selectionMatch":{backgroundColor:"#e5e9f0",color:UF},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${Ch}`},"&.cm-focused .cm-matchingBracket":{backgroundColor:"#eceff4",color:GF},".cm-gutters":{backgroundColor:kS,color:Cp,border:"none"},".cm-activeLineGutter":{backgroundColor:Cp,color:av},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:UF},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:UF,borderBottomColor:UF},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Cp,color:Cp}}},{dark:!0}),qC(mp.define([{tag:He.keyword,color:ec},{tag:[He.name,He.deleted,He.character,He.propertyName,He.macroName],color:$F},{tag:[He.variableName],color:Ch},{tag:[He.function(He.variableName)],color:Ch},{tag:[He.labelName],color:"#81a1c1"},{tag:[He.color,He.constant(He.name),He.standard(He.name)],color:ec},{tag:[He.definition(He.name),He.separator],color:Iw},{tag:[He.brace],color:Ch},{tag:[He.annotation],color:qF},{tag:[He.number,He.changed,He.annotation,He.modifier,He.self,He.namespace],color:OS},{tag:[He.typeName,He.className],color:IS},{tag:[He.operator,He.operatorKeyword],color:Iw},{tag:[He.tagName],color:OS},{tag:[He.squareBracket],color:"#bf616a"},{tag:[He.angleBracket],color:WF},{tag:[He.attributeName],color:IS},{tag:[He.regexp],color:ec},{tag:[He.quote],color:OS},{tag:[He.string],color:Iw},{tag:He.link,color:Iw,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[He.url,He.escape,He.special(He.string)],color:Ch},{tag:[He.meta],color:$F},{tag:[He.monospace],color:av,fontStyle:"italic"},{tag:[He.comment],color:Cp,fontStyle:"italic"},{tag:He.strong,fontWeight:"bold",color:ec},{tag:He.emphasis,fontStyle:"italic",color:ec},{tag:He.strikethrough,textDecoration:"line-through"},{tag:He.heading,fontWeight:"bold",color:ec},{tag:He.special(He.heading1),fontWeight:"bold",color:ec},{tag:He.heading1,fontWeight:"bold",color:ec},{tag:[He.heading2,He.heading3,He.heading4],fontWeight:"bold",color:ec},{tag:[He.heading5,He.heading6],color:ec},{tag:[He.atom,He.bool,He.special(He.variableName)],color:WF},{tag:[He.processingInstruction,He.inserted],color:Ch},{tag:[He.contentSeparator],color:IS},{tag:He.invalid,color:GF,borderBottom:`1px dotted ${qF}`}]))],XF="#2e3440",KF="#3b4252",ZF="#434c5e",Ow="#4c566a",LS="#e5e9f0",FS="#eceff4",BS="#8fbcbb",QF="#88c0d0",il="#5e81ac",Sp="#d08770",VS="#ebcb8b",JF="#a3be8c",e2="#d30102",R7=[Rn.theme({"&":{color:XF,backgroundColor:"#ffffff"},".cm-content":{caretColor:KF},".cm-cursor, .cm-dropCursor":{borderLeftColor:KF},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:FS},".cm-panels":{backgroundColor:FS,color:Ow},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:`1px solid ${Ow}`},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:LS},".cm-activeLine":{backgroundColor:FS},".cm-selectionMatch":{backgroundColor:LS},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${Ow}`},"&.cm-focused .cm-matchingBracket":{backgroundColor:FS},".cm-gutters":{backgroundColor:FS,color:XF,border:"none"},".cm-activeLineGutter":{backgroundColor:FS},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:LS},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:LS,borderBottomColor:LS},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:FS,color:Ow}}},{dark:!1}),qC(mp.define([{tag:He.keyword,color:il},{tag:[He.name,He.deleted,He.character,He.propertyName,He.macroName],color:Sp},{tag:[He.variableName],color:Sp},{tag:[He.function(He.variableName)],color:il},{tag:[He.labelName],color:"#81a1c1"},{tag:[He.color,He.constant(He.name),He.standard(He.name)],color:il},{tag:[He.definition(He.name),He.separator],color:JF},{tag:[He.brace],color:BS},{tag:[He.annotation],color:e2},{tag:[He.number,He.changed,He.annotation,He.modifier,He.self,He.namespace],color:QF},{tag:[He.typeName,He.className],color:VS},{tag:[He.operator,He.operatorKeyword],color:JF},{tag:[He.tagName],color:"#b48ead"},{tag:[He.squareBracket],color:"#bf616a"},{tag:[He.angleBracket],color:Sp},{tag:[He.attributeName],color:VS},{tag:[He.regexp],color:il},{tag:[He.quote],color:KF},{tag:[He.string],color:Sp},{tag:He.link,color:BS,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[He.url,He.escape,He.special(He.string)],color:Sp},{tag:[He.meta],color:QF},{tag:[He.comment],color:ZF,fontStyle:"italic"},{tag:He.strong,fontWeight:"bold",color:il},{tag:He.emphasis,fontStyle:"italic",color:il},{tag:He.strikethrough,textDecoration:"line-through"},{tag:He.heading,fontWeight:"bold",color:il},{tag:He.special(He.heading1),fontWeight:"bold",color:il},{tag:He.heading1,fontWeight:"bold",color:il},{tag:[He.heading2,He.heading3,He.heading4],fontWeight:"bold",color:il},{tag:[He.heading5,He.heading6],color:il},{tag:[He.atom,He.bool,He.special(He.variableName)],color:Sp},{tag:[He.processingInstruction,He.inserted],color:BS},{tag:[He.contentSeparator],color:VS},{tag:He.invalid,color:ZF,borderBottom:`1px dotted ${e2}`}]))];class Yu{constructor(){this._darkMode=!1,this._darkMode$=new PI(this._darkMode)}toggleDarkMode(){this._darkMode=!this._darkMode,this._darkMode$.next(this._darkMode)}darkMode(){return this._darkMode$.asObservable()}}Yu.\u0275fac=function(e){return new(e||Yu)},Yu.\u0275prov=nn({token:Yu,factory:Yu.\u0275fac,providedIn:"root"});const P7=["cm"];class lv{set targetContent(e){e&&(this.editorSource=e.nativeElement,this.initEditor())}constructor(e){this.globalSettings=e,this.editorReady=new Promise(t=>{this.editorReadyPromiseResolve=t}),this.theme=NS,this.extensions=this.updateExtensions(),this.text="",this.docChangedDebounceTime=400,this.docChanged=new Pr,this.darkMode=!1,this.docValue$=new Ie,this.invalidInput=!1}ngOnInit(){this.globalSettings.darkMode().subscribe(e=>{this.darkMode=e,this.updateTheme()}),this.docValue$.asObservable().pipe(aD(this.docChangedDebounceTime)).subscribe(e=>{this.docChanged.emit(e)})}ngOnChanges(){this.setEditorContent(this.text)}initEditor(){null!=this.editorSource&&(this.view=new Rn({state:ls.create({doc:this.text,extensions:this.extensions}),parent:this.editorSource}),this.editorReadyPromiseResolve())}setEditorContent(e){var t=this;return sh(function*(){if(yield t.editorReady,null==t.view)return;const r=ls.create({doc:e,extensions:t.extensions});t.view.setState(r)})()}updateTheme(){var e=this;return sh(function*(){if(yield e.editorReady,null==e.view)return;e.theme=e.darkMode?NS:R7,e.updateExtensions();const t=ls.create({doc:e.view.state.doc,extensions:e.extensions});e.view.setState(t)})()}updateExtensions(){null==this.theme&&(this.theme=NS);const e=function Bq(n,e={}){return xh.of({source:n,config:e})}(n=>{try{JSON.parse(n.state.doc.toString())}catch(e){if(!(e instanceof SyntaxError))throw e;const t=function Tq(n,e){let t;return(t=n.message.match(/at position (\d+)/))?Math.min(+t[1],e.length):(t=n.message.match(/at line (\d+) column (\d+)/))?Math.min(e.line(+t[1]).from+ +t[2]-1,e.length):0}(e,n.state.doc);return[{from:t,message:e.message,severity:"error",to:t}]}return[]});return this.extensions=[m7,Rn.lineWrapping,new V9(kq),e,this.theme,Rn.updateListener.of(t=>{if(t.docChanged)try{const r=JSON.parse(t.state.doc.toString());this.docValue$.next(r)}catch{this.invalidInput=!0}})],this.extensions}onSaveHandler(e){console.log("Save"),e.preventDefault()}onPasteHandler(e){console.log("Pasted")}}lv.\u0275fac=function(e){return new(e||lv)(et(Yu))},lv.\u0275cmp=Qi({type:lv,selectors:[["im-poc1-rdf-editor"]],viewQuery:function(e,t){if(1&e&&Cu(P7,5),2&e){let r;Tc(r=kc())&&(t.targetContent=r.first)}},hostBindings:function(e,t){1&e&&jr("keydown.control.s",function(i){return t.onSaveHandler(i)},0,rs)("keydown.control.v",function(i){return t.onPasteHandler(i)},!1,rs)},inputs:{text:"text",docChangedDebounceTime:"docChangedDebounceTime"},outputs:{docChanged:"docChanged"},standalone:!0,features:[Vn,nh],decls:3,vars:2,consts:[[1,"container"],["cm",""]],template:function(e,t){1&e&&(wr(0,"div",0),zo(1,"div",null,1),Vr()),2&e&&Jd("background-color",t.darkMode?"#2e3440":"white")},dependencies:[Mu],styles:[".container[_ngcontent-%COMP%]{height:100%}"]});const ol=new Gt("NgValueAccessor"),FK=["switch"],BK=["*"],VK=new Gt("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})}),HK={provide:ol,useExisting:lt(()=>sB),multi:!0};class oB{constructor(e,t){this.source=e,this.checked=t}}let zK=0;const jK=v$(X0(tO(eO(class{constructor(n){this._elementRef=n}}))));let UK=(()=>{class n extends jK{get required(){return this._required}set required(t){this._required=Pc(t)}get checked(){return this._checked}set checked(t){this._checked=Pc(t),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(t,r,i,o,a,u,h){super(t),this._focusMonitor=r,this._changeDetectorRef=i,this.defaults=a,this._onChange=m=>{},this._onTouched=()=>{},this._required=!1,this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new Pr,this.toggleChange=new Pr,this.tabIndex=parseInt(o)||0,this.color=this.defaultColor=a.color||"accent",this._noopAnimations="NoopAnimations"===u,this.id=this._uniqueId=`${h}${++zK}`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{"keyboard"===t||"program"===t?(this._focused=!0,this._changeDetectorRef.markForCheck()):t||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(t){this.checked=!!t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}}return n.\u0275fac=function(t){Qy()},n.\u0275dir=fn({type:n,inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},features:[Fn]}),n})(),sB=(()=>{class n extends UK{get buttonId(){return`${this.id||this._uniqueId}-button`}constructor(t,r,i,o,a,u){super(t,r,i,o,a,u,"mat-mdc-slide-toggle-"),this._labelId=this._uniqueId+"-label"}_handleClick(){this.toggleChange.emit(),this.defaults.disableToggleValue||(this.checked=!this.checked,this._onChange(this.checked),this.change.emit(new oB(this,this.checked)))}focus(){this._switchElement.nativeElement.focus()}_createChangeEvent(t){return new oB(this,t)}_getAriaLabelledBy(){return this.ariaLabelledby?this.ariaLabelledby:this.ariaLabel?null:this._labelId}}return n.\u0275fac=function(t){return new(t||n)(et(br),et(vD),et(rh),Rd("tabindex"),et(VK),et(Ic,8))},n.\u0275cmp=Qi({type:n,selectors:[["mat-slide-toggle"]],viewQuery:function(t,r){if(1&t&&Cu(FK,5),2&t){let i;Tc(i=kc())&&(r._switchElement=i.first)}},hostAttrs:[1,"mat-mdc-slide-toggle"],hostVars:11,hostBindings:function(t,r){2&t&&(Yx("id",r.id),Ho("tabindex",null)("aria-label",null)("name",null)("aria-labelledby",null),bo("mat-mdc-slide-toggle-focused",r._focused)("mat-mdc-slide-toggle-checked",r.checked)("_mat-animation-noopable",r._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matSlideToggle"],features:[Hr([HK]),Fn],ngContentSelectors:BK,decls:17,vars:24,consts:[[1,"mdc-form-field"],["role","switch","type","button",1,"mdc-switch",3,"tabIndex","disabled","click"],["switch",""],[1,"mdc-switch__track"],[1,"mdc-switch__handle-track"],[1,"mdc-switch__handle"],[1,"mdc-switch__shadow"],[1,"mdc-elevation-overlay"],[1,"mdc-switch__ripple"],["mat-ripple","",1,"mat-mdc-slide-toggle-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-switch__icons"],["viewBox","0 0 24 24",1,"mdc-switch__icon","mdc-switch__icon--on"],["d","M19.69,5.23L8.96,15.96l-4.23-4.23L2.96,13.5l6,6L21.46,7L19.69,5.23z"],["viewBox","0 0 24 24",1,"mdc-switch__icon","mdc-switch__icon--off"],["d","M20 13H4v-2h16v2z"],[3,"for","click"]],template:function(t,r){if(1&t&&(Eu(),wr(0,"div",0)(1,"button",1,2),jr("click",function(){return r._handleClick()}),zo(3,"div",3),wr(4,"div",4)(5,"div",5)(6,"div",6),zo(7,"div",7),Vr(),wr(8,"div",8),zo(9,"div",9),Vr(),wr(10,"div",10),function ny(){yn.lFrame.currentNamespace="svg"}(),wr(11,"svg",11),zo(12,"path",12),Vr(),wr(13,"svg",13),zo(14,"path",14),Vr()()()()(),function Jp(){!function Sd(){yn.lFrame.currentNamespace=null}()}(),wr(15,"label",15),jr("click",function(o){return o.stopPropagation()}),Ws(16),Vr()()),2&t){const i=function tA(n){return function nu(n,e){return n[e]}(function xl(){return yn.lFrame.contextLView}(),22+n)}(2);bo("mdc-form-field--align-end","before"==r.labelPosition),di(1),bo("mdc-switch--selected",r.checked)("mdc-switch--unselected",!r.checked)("mdc-switch--checked",r.checked)("mdc-switch--disabled",r.disabled),ri("tabIndex",r.tabIndex)("disabled",r.disabled),Ho("id",r.buttonId)("name",r.name)("aria-label",r.ariaLabel)("aria-labelledby",r._getAriaLabelledBy())("aria-describedby",r.ariaDescribedby)("aria-required",r.required||null)("aria-checked",r.checked),di(8),ri("matRippleTrigger",i)("matRippleDisabled",r.disableRipple||r.disabled)("matRippleCentered",!0),di(6),ri("for",r.buttonId),Ho("id",r._labelId)}},dependencies:[K0],styles:['.mdc-form-field{display:inline-flex;align-items:center;vertical-align:middle}.mdc-form-field[hidden]{display:none}.mdc-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{margin-left:auto;margin-right:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{padding-left:0;padding-right:4px}.mdc-form-field--nowrap>label{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{margin-left:0;margin-right:auto}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{padding-left:4px;padding-right:0}.mdc-form-field--space-between{justify-content:space-between}.mdc-form-field--space-between>label{margin:0}[dir=rtl] .mdc-form-field--space-between>label,.mdc-form-field--space-between>label[dir=rtl]{margin:0}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1);background-color:var(--mdc-elevation-overlay-color, #fff)}.mdc-switch{align-items:center;background:none;border:none;cursor:pointer;display:inline-flex;flex-shrink:0;margin:0;outline:none;overflow:visible;padding:0;position:relative}.mdc-switch[hidden]{display:none}.mdc-switch:disabled{cursor:default;pointer-events:none}.mdc-switch__track{overflow:hidden;position:relative;width:100%}.mdc-switch__track::before,.mdc-switch__track::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";height:100%;left:0;position:absolute;width:100%}@media screen and (forced-colors: active){.mdc-switch__track::before,.mdc-switch__track::after{border-color:currentColor}}.mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0)}.mdc-switch__track::after{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(-100%)}[dir=rtl] .mdc-switch__track::after,.mdc-switch__track[dir=rtl]::after{transform:translateX(100%)}.mdc-switch--selected .mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__track::before,.mdc-switch--selected .mdc-switch__track[dir=rtl]::before{transform:translateX(-100%)}.mdc-switch--selected .mdc-switch__track::after{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0)}.mdc-switch__handle-track{height:100%;pointer-events:none;position:absolute;top:0;transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);left:0;right:auto;transform:translateX(0)}[dir=rtl] .mdc-switch__handle-track,.mdc-switch__handle-track[dir=rtl]{left:auto;right:0}.mdc-switch--selected .mdc-switch__handle-track{transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__handle-track,.mdc-switch--selected .mdc-switch__handle-track[dir=rtl]{transform:translateX(-100%)}.mdc-switch__handle{display:flex;pointer-events:auto;position:absolute;top:50%;transform:translateY(-50%);left:0;right:auto}[dir=rtl] .mdc-switch__handle,.mdc-switch__handle[dir=rtl]{left:auto;right:0}.mdc-switch__handle::before,.mdc-switch__handle::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";width:100%;height:100%;left:0;position:absolute;top:0;transition:background-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1),border-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);z-index:-1}@media screen and (forced-colors: active){.mdc-switch__handle::before,.mdc-switch__handle::after{border-color:currentColor}}.mdc-switch__shadow{border-radius:inherit;bottom:0;left:0;position:absolute;right:0;top:0}.mdc-elevation-overlay{bottom:0;left:0;right:0;top:0}.mdc-switch__ripple{left:50%;position:absolute;top:50%;transform:translate(-50%, -50%);z-index:-1}.mdc-switch:disabled .mdc-switch__ripple{display:none}.mdc-switch__icons{height:100%;position:relative;width:100%;z-index:1}.mdc-switch__icon{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;opacity:0;transition:opacity 30ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-switch--selected .mdc-switch__icon--on,.mdc-switch--unselected .mdc-switch__icon--off{opacity:1;transition:opacity 45ms 30ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle{display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-mdc-slide-toggle .mdc-switch{width:var(--mdc-switch-track-width, 36px)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-selected-handle-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-hover-handle-color, #310077)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-focus-handle-color, #310077)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-selected-pressed-handle-color, #310077)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-selected-handle-color, #424242)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-unselected-handle-color, #616161)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-hover-handle-color, #212121)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-focus-handle-color, #212121)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-unselected-pressed-handle-color, #212121)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-unselected-handle-color, #424242)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__handle::before{background:var(--mdc-switch-handle-surface-color, var(--mdc-theme-surface, #fff))}.mat-mdc-slide-toggle .mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation, 0px 2px 1px -1px rgba(0, 0, 0, 0.2), 0px 1px 1px 0px rgba(0, 0, 0, 0.14), 0px 1px 3px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-slide-toggle .mdc-switch:disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__focus-ring-wrapper,.mat-mdc-slide-toggle .mdc-switch .mdc-switch__handle{height:var(--mdc-switch-handle-height, 20px)}.mat-mdc-slide-toggle .mdc-switch:disabled .mdc-switch__handle::after{opacity:var(--mdc-switch-disabled-handle-opacity, 0.38)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__handle{border-radius:var(--mdc-switch-handle-shape, 10px)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__handle{width:var(--mdc-switch-handle-width, 20px)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__handle-track{width:calc(100% - var(--mdc-switch-handle-width, 20px))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled .mdc-switch__icon{fill:var(--mdc-switch-selected-icon-color, var(--mdc-theme-on-primary, #fff))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-selected-icon-color, var(--mdc-theme-on-primary, #fff))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled .mdc-switch__icon{fill:var(--mdc-switch-unselected-icon-color, var(--mdc-theme-on-primary, #fff))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-unselected-icon-color, var(--mdc-theme-on-primary, #fff))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-selected-icon-opacity, 0.38)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-unselected-icon-opacity, 0.38)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected .mdc-switch__icon{width:var(--mdc-switch-selected-icon-size, 18px);height:var(--mdc-switch-selected-icon-size, 18px)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected .mdc-switch__icon{width:var(--mdc-switch-unselected-icon-size, 18px);height:var(--mdc-switch-unselected-icon-size, 18px)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-hover-state-layer-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:focus .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:focus .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-focus-state-layer-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-pressed-state-layer-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-hover-state-layer-color, #424242)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-focus-state-layer-color, #424242)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-pressed-state-layer-color, #424242)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:hover:not(:focus):hover .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:hover:not(:focus).mdc-ripple-surface--hover .mdc-switch__ripple::before{opacity:var(--mdc-switch-selected-hover-state-layer-opacity, 0.04)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:focus.mdc-ripple-upgraded--background-focused .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:focus:not(.mdc-ripple-upgraded):focus .mdc-switch__ripple::before{transition-duration:75ms;opacity:var(--mdc-switch-selected-focus-state-layer-opacity, 0.12)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active:not(.mdc-ripple-upgraded) .mdc-switch__ripple::after{transition:opacity 150ms linear}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active:not(.mdc-ripple-upgraded):active .mdc-switch__ripple::after{transition-duration:75ms;opacity:var(--mdc-switch-selected-pressed-state-layer-opacity, 0.1)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-switch-selected-pressed-state-layer-opacity, 0.1)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus):hover .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus).mdc-ripple-surface--hover .mdc-switch__ripple::before{opacity:var(--mdc-switch-unselected-hover-state-layer-opacity, 0.04)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:focus.mdc-ripple-upgraded--background-focused .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:focus:not(.mdc-ripple-upgraded):focus .mdc-switch__ripple::before{transition-duration:75ms;opacity:var(--mdc-switch-unselected-focus-state-layer-opacity, 0.12)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active:not(.mdc-ripple-upgraded) .mdc-switch__ripple::after{transition:opacity 150ms linear}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active:not(.mdc-ripple-upgraded):active .mdc-switch__ripple::after{transition-duration:75ms;opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity, 0.1)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity, 0.1)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__ripple{height:var(--mdc-switch-state-layer-size, 48px);width:var(--mdc-switch-state-layer-size, 48px)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__track{height:var(--mdc-switch-track-height, 14px)}.mat-mdc-slide-toggle .mdc-switch:disabled .mdc-switch__track{opacity:var(--mdc-switch-disabled-track-opacity, 0.12)}.mat-mdc-slide-toggle .mdc-switch:enabled .mdc-switch__track::after{background:var(--mdc-switch-selected-track-color, #d7bbff)}.mat-mdc-slide-toggle .mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-hover-track-color, #d7bbff)}.mat-mdc-slide-toggle .mdc-switch:enabled:focus:not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-focus-track-color, #d7bbff)}.mat-mdc-slide-toggle .mdc-switch:enabled:active .mdc-switch__track::after{background:var(--mdc-switch-selected-pressed-track-color, #d7bbff)}.mat-mdc-slide-toggle .mdc-switch:disabled .mdc-switch__track::after{background:var(--mdc-switch-disabled-selected-track-color, #424242)}.mat-mdc-slide-toggle .mdc-switch:enabled .mdc-switch__track::before{background:var(--mdc-switch-unselected-track-color, #e0e0e0)}.mat-mdc-slide-toggle .mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-hover-track-color, #e0e0e0)}.mat-mdc-slide-toggle .mdc-switch:enabled:focus:not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-focus-track-color, #e0e0e0)}.mat-mdc-slide-toggle .mdc-switch:enabled:active .mdc-switch__track::before{background:var(--mdc-switch-unselected-pressed-track-color, #e0e0e0)}.mat-mdc-slide-toggle .mdc-switch:disabled .mdc-switch__track::before{background:var(--mdc-switch-disabled-unselected-track-color, #424242)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__track{border-radius:var(--mdc-switch-track-shape, 7px)}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple,.mat-mdc-slide-toggle .mdc-switch__ripple::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple:not(:empty),.mat-mdc-slide-toggle .mdc-switch__ripple::after:not(:empty){transform:translateZ(0)}.mat-mdc-slide-toggle .mdc-switch__ripple::after{content:"";opacity:0}.mat-mdc-slide-toggle .mdc-switch:hover .mdc-switch__ripple::after{opacity:.04;transition:opacity 75ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mdc-switch .mdc-switch__ripple::after{opacity:.12}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mat-mdc-focus-indicator::before{content:""}.mat-mdc-slide-toggle .mat-ripple-element{opacity:.12}.mat-mdc-slide-toggle .mat-mdc-focus-indicator::before{border-radius:50%}.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle-track,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-elevation-overlay,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__icon,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::after,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::after{transition:none}'],encapsulation:2,changeDetection:0}),n})(),aB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=gr({}),n})(),WK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=gr({imports:[aB,pa,aO,Mu,aB,pa]}),n})();const qK=["*",[["mat-toolbar-row"]]],YK=["*","mat-toolbar-row"],XK=X0(class{constructor(n){this._elementRef=n}});let KK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=fn({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),ZK=(()=>{class n extends XK{constructor(t,r,i){super(t),this._platform=r,this._document=i}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(t){return new(t||n)(et(br),et(jo),et(or))},n.\u0275cmp=Qi({type:n,selectors:[["mat-toolbar"]],contentQueries:function(t,r,i){if(1&t&&function jT(n,e,t,r){const i=Un();if(i.firstCreatePass){const o=Tr();GT(i,new HT(e,t,r),o.index),function A3(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(i,n),2==(2&t)&&(i.staticContentQueries=!0)}UT(i,At(),t)}(i,KK,5),2&t){let o;Tc(o=kc())&&(r._toolbarRows=o)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,r){2&t&&bo("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",0===r._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[Fn],ngContentSelectors:YK,decls:2,vars:0,template:function(t,r){1&t&&(Eu(qK),Ws(0),Ws(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color: inherit;--mdc-outlined-button-label-text-color: inherit}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),n})(),QK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=gr({imports:[pa,pa]}),n})();class pv{constructor(e,t){this.document=e,this.globalSettings=t,this.darkMode=!1}ngOnInit(){this.globalSettings.darkMode().subscribe(e=>{this.darkMode=e,this.document.body.style.backgroundColor=e?"#bbb":"#eee"})}}pv.\u0275fac=function(e){return new(e||pv)(et(or),et(Yu))},pv.\u0275cmp=Qi({type:pv,selectors:[["im-poc1-top-bar"]],standalone:!0,features:[nh],decls:9,vars:3,consts:[[1,"toolbar"],[1,"toggle"],[1,"mr-8"],[3,"checked","click"]],template:function(e,t){1&e&&(wr(0,"mat-toolbar",0)(1,"h2"),eh(2,"JSON-LD graph view"),Vr(),wr(3,"div",1)(4,"mat-icon",2),eh(5,"brightness_5"),Vr(),wr(6,"mat-slide-toggle",3),jr("click",function(){return t.globalSettings.toggleDarkMode()}),Vr(),wr(7,"mat-icon"),eh(8,"bedtime"),Vr()()()),2&e&&(bo("dark",t.darkMode),di(6),ri("checked",t.darkMode))},dependencies:[Mu,QK,ZK,WK,sB,CD,MO],styles:[".toolbar[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;box-shadow:#00000026 1.95px 1.95px 2.6px;background-color:#fff}.toggle[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;gap:3px}.dark[_ngcontent-%COMP%]{color:#fff!important;background-color:#020b4a!important}@media screen and (max-width: 500px){h2[_ngcontent-%COMP%]{font-size:1em}}"]});class lB{}class JK{}const Hc="*";function f1(n,e){return{type:7,name:n,definitions:e,options:{}}}function gv(n,e=null){return{type:4,styles:e,timings:n}}function cB(n,e=null){return{type:2,steps:n,options:e}}function sl(n){return{type:6,styles:n,offset:null}}function jw(n,e,t){return{type:0,name:n,styles:e,options:t}}function uB(n){return{type:5,steps:n}}function Uw(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function p1(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function dB(n){Promise.resolve().then(n)}class mv{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){dB(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class hB{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const o=this.players.length;0==o?dB(()=>this._onFinish()):this.players.forEach(a=>{a.onDone(()=>{++t==o&&this._onFinish()}),a.onDestroy(()=>{++r==o&&this._onDestroy()}),a.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((a,u)=>Math.max(a,u.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const tZ=[f1("fabToggler",[jw("inactive",sl({transform:"rotate(0deg)"})),jw("active",sl({transform:"rotate(225deg)"})),Uw("* <=> *",gv("200ms cubic-bezier(0.4, 0.0, 0.2, 1)"))]),f1("speedDialStagger",[Uw("* => *",[p1(":enter",sl({opacity:0}),{optional:!0}),p1(":enter",function eZ(n,e){return{type:12,timings:n,animation:e}}("40ms",[gv("200ms cubic-bezier(0.4, 0.0, 0.2, 1)",uB([sl({opacity:0,transform:"translateY(10px)"}),sl({opacity:1,transform:"translateY(0)"})]))]),{optional:!0}),p1(":leave",gv("200ms cubic-bezier(0.4, 0.0, 0.2, 1)",uB([sl({opacity:1}),sl({opacity:0})])),{optional:!0})])])],fB=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],pB=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],nZ=["mat-fab",""],rZ=["mat-mini-fab",""],oZ=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],sZ=X0(eO(tO(class{constructor(n){this._elementRef=n}})));let gB=(()=>{class n extends sZ{constructor(t,r,i,o){super(t),this._platform=r,this._ngZone=i,this._animationMode=o,this._focusMonitor=Rs(vD),this._isFab=!1;const a=t.nativeElement.classList;for(const u of oZ)this._hasHostAttributes(u.selector)&&u.mdcClasses.forEach(h=>{a.add(h)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t="program",r){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,r):this._elementRef.nativeElement.focus(r)}_hasHostAttributes(...t){return t.some(r=>this._elementRef.nativeElement.hasAttribute(r))}_isRippleDisabled(){return this.disableRipple||this.disabled}}return n.\u0275fac=function(t){Qy()},n.\u0275dir=fn({type:n,viewQuery:function(t,r){if(1&t&&Cu(K0,5),2&t){let i;Tc(i=kc())&&(r.ripple=i.first)}},features:[Fn]}),n})();const mB=new Gt("mat-mdc-fab-default-options",{providedIn:"root",factory:vB});function vB(){return{color:"accent"}}const Gw=vB();let lZ=(()=>{class n extends gB{get extended(){return this._extended}set extended(t){this._extended=Pc(t)}constructor(t,r,i,o,a){super(t,r,i,o),this._options=a,this._isFab=!0,this._options=this._options||Gw,this.color=this.defaultColor=this._options.color||Gw.color}}return n.\u0275fac=function(t){return new(t||n)(et(br),et(jo),et(Kn),et(Ic,8),et(mB,8))},n.\u0275cmp=Qi({type:n,selectors:[["button","mat-fab",""]],hostVars:11,hostBindings:function(t,r){2&t&&(Ho("disabled",r.disabled||null),bo("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0)("mdc-fab--extended",r.extended)("mat-mdc-extended-fab",r.extended))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",extended:"extended"},exportAs:["matButton"],features:[Fn],attrs:nZ,ngContentSelectors:pB,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(t,r){1&t&&(Eu(fB),zo(0,"span",0),Ws(1),wr(2,"span",1),Ws(3,1),Vr(),Ws(4,2),zo(5,"span",2)(6,"span",3)(7,"span",4)),2&t&&(bo("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab),di(6),ri("matRippleDisabled",r._isRippleDisabled())("matRippleTrigger",r._elementRef.nativeElement))},dependencies:[K0],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-fab{position:relative;display:inline-flex;position:relative;align-items:center;justify-content:center;box-sizing:border-box;width:56px;height:56px;padding:0;border:none;fill:currentColor;text-decoration:none;cursor:pointer;user-select:none;-moz-appearance:none;-webkit-appearance:none;overflow:visible;transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1),opacity 15ms linear 30ms,transform 270ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-fab .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-fab[hidden]{display:none}.mdc-fab::-moz-focus-inner{padding:0;border:0}.mdc-fab .mdc-fab__focus-ring{position:absolute}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    )}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{border-color:CanvasText}}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{border-color:CanvasText}}.mdc-fab:active,.mdc-fab:focus{outline:none}.mdc-fab:hover{cursor:pointer}.mdc-fab>svg{width:100%}.mdc-fab--mini{width:40px;height:40px}.mdc-fab--extended{border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mdc-fab--extended .mdc-fab__ripple{border-radius:24px}.mdc-fab--extended .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mdc-fab--extended .mdc-fab__icon,.mdc-fab--extended .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mdc-fab--extended .mdc-fab__label+.mdc-fab__icon,.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mdc-fab--touch{margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-fab--touch .mdc-fab__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-fab::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-fab::before{border-color:CanvasText}}.mdc-fab__label{justify-content:flex-start;text-overflow:ellipsis;white-space:nowrap;overflow-x:hidden;overflow-y:visible}.mdc-fab__icon{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mdc-fab .mdc-fab__icon{display:inline-flex;align-items:center;justify-content:center}.mdc-fab--exited{transform:scale(0);opacity:0;transition:opacity 15ms linear 150ms,transform 180ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab--exited .mdc-fab__icon{transform:scale(0);transition:transform 135ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab .mdc-fab__icon{width:24px;height:24px;font-size:24px}.mdc-fab:not(.mdc-fab--extended){border-radius:50%}.mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:50%}.mat-mdc-fab,.mat-mdc-mini-fab{-webkit-tap-highlight-color:rgba(0,0,0,0);background-color:var(--mdc-fab-container-color, transparent);box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);color:var(--mat-mdc-fab-color, inherit);flex-shrink:0}.mat-mdc-fab .mat-mdc-button-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-fab .mat-ripple-element,.mat-mdc-mini-fab .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-fab .mdc-button__label,.mat-mdc-mini-fab .mdc-button__label{z-index:1}.mat-mdc-fab .mat-mdc-focus-indicator,.mat-mdc-mini-fab .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-fab:focus .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-fab .mat-mdc-button-touch-target,.mat-mdc-mini-fab .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-fab._mat-animation-noopable,.mat-mdc-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-fab:not(:disabled) .mdc-fab__icon,.mat-mdc-mini-fab:not(:disabled) .mdc-fab__icon{color:var(--mdc-fab-icon-color, inherit)}.mat-mdc-fab:not(.mdc-fab--extended),.mat-mdc-mini-fab:not(.mdc-fab--extended){border-radius:var(--mdc-fab-container-shape, 50%)}.mat-mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple,.mat-mdc-mini-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:var(--mdc-fab-container-shape, 50%)}.mat-mdc-fab:hover,.mat-mdc-fab:focus,.mat-mdc-mini-fab:hover,.mat-mdc-mini-fab:focus{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12)}.mat-mdc-fab:active,.mat-mdc-fab:focus:active,.mat-mdc-mini-fab:active,.mat-mdc-mini-fab:focus:active{box-shadow:0px 7px 8px -4px rgba(0, 0, 0, 0.2), 0px 12px 17px 2px rgba(0, 0, 0, 0.14), 0px 5px 22px 4px rgba(0, 0, 0, 0.12)}.mat-mdc-fab[disabled],.mat-mdc-mini-fab[disabled]{cursor:default;pointer-events:none;box-shadow:0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-fab:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-mini-fab:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}.mat-mdc-fab .mat-icon,.mat-mdc-fab .material-icons,.mat-mdc-mini-fab .mat-icon,.mat-mdc-mini-fab .material-icons{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mat-mdc-fab .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-extended-fab{border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mat-mdc-extended-fab .mdc-fab__ripple{border-radius:24px}.mat-mdc-extended-fab .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab .mdc-fab__icon,.mat-mdc-extended-fab .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon,.mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mat-mdc-extended-fab>.mat-icon,.mat-mdc-extended-fab>.material-icons{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab>.mat-icon,[dir=rtl] .mat-mdc-extended-fab>.material-icons,.mat-mdc-extended-fab>.mat-icon[dir=rtl],.mat-mdc-extended-fab>.material-icons[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mdc-button__label+.mat-icon,.mat-mdc-extended-fab .mdc-button__label+.material-icons{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.material-icons,.mat-mdc-extended-fab .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-extended-fab .mdc-button__label+.material-icons[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mat-mdc-extended-fab .mat-mdc-button-touch-target{width:100%}'],encapsulation:2,changeDetection:0}),n})(),cZ=(()=>{class n extends gB{constructor(t,r,i,o,a){super(t,r,i,o),this._options=a,this._isFab=!0,this._options=this._options||Gw,this.color=this.defaultColor=this._options.color||Gw.color}}return n.\u0275fac=function(t){return new(t||n)(et(br),et(jo),et(Kn),et(Ic,8),et(mB,8))},n.\u0275cmp=Qi({type:n,selectors:[["button","mat-mini-fab",""]],hostVars:7,hostBindings:function(t,r){2&t&&(Ho("disabled",r.disabled||null),bo("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Fn],attrs:rZ,ngContentSelectors:pB,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(t,r){1&t&&(Eu(fB),zo(0,"span",0),Ws(1),wr(2,"span",1),Ws(3,1),Vr(),Ws(4,2),zo(5,"span",2)(6,"span",3)(7,"span",4)),2&t&&(bo("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab),di(6),ri("matRippleDisabled",r._isRippleDisabled())("matRippleTrigger",r._elementRef.nativeElement))},dependencies:[K0],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-fab{position:relative;display:inline-flex;position:relative;align-items:center;justify-content:center;box-sizing:border-box;width:56px;height:56px;padding:0;border:none;fill:currentColor;text-decoration:none;cursor:pointer;user-select:none;-moz-appearance:none;-webkit-appearance:none;overflow:visible;transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1),opacity 15ms linear 30ms,transform 270ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-fab .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-fab[hidden]{display:none}.mdc-fab::-moz-focus-inner{padding:0;border:0}.mdc-fab .mdc-fab__focus-ring{position:absolute}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    )}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{border-color:CanvasText}}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{border-color:CanvasText}}.mdc-fab:active,.mdc-fab:focus{outline:none}.mdc-fab:hover{cursor:pointer}.mdc-fab>svg{width:100%}.mdc-fab--mini{width:40px;height:40px}.mdc-fab--extended{border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mdc-fab--extended .mdc-fab__ripple{border-radius:24px}.mdc-fab--extended .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mdc-fab--extended .mdc-fab__icon,.mdc-fab--extended .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mdc-fab--extended .mdc-fab__label+.mdc-fab__icon,.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mdc-fab--touch{margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-fab--touch .mdc-fab__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-fab::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-fab::before{border-color:CanvasText}}.mdc-fab__label{justify-content:flex-start;text-overflow:ellipsis;white-space:nowrap;overflow-x:hidden;overflow-y:visible}.mdc-fab__icon{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mdc-fab .mdc-fab__icon{display:inline-flex;align-items:center;justify-content:center}.mdc-fab--exited{transform:scale(0);opacity:0;transition:opacity 15ms linear 150ms,transform 180ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab--exited .mdc-fab__icon{transform:scale(0);transition:transform 135ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab .mdc-fab__icon{width:24px;height:24px;font-size:24px}.mdc-fab:not(.mdc-fab--extended){border-radius:50%}.mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:50%}.mat-mdc-fab,.mat-mdc-mini-fab{-webkit-tap-highlight-color:rgba(0,0,0,0);background-color:var(--mdc-fab-container-color, transparent);box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);color:var(--mat-mdc-fab-color, inherit);flex-shrink:0}.mat-mdc-fab .mat-mdc-button-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-fab .mat-ripple-element,.mat-mdc-mini-fab .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-fab .mdc-button__label,.mat-mdc-mini-fab .mdc-button__label{z-index:1}.mat-mdc-fab .mat-mdc-focus-indicator,.mat-mdc-mini-fab .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-fab:focus .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-fab .mat-mdc-button-touch-target,.mat-mdc-mini-fab .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-fab._mat-animation-noopable,.mat-mdc-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-fab:not(:disabled) .mdc-fab__icon,.mat-mdc-mini-fab:not(:disabled) .mdc-fab__icon{color:var(--mdc-fab-icon-color, inherit)}.mat-mdc-fab:not(.mdc-fab--extended),.mat-mdc-mini-fab:not(.mdc-fab--extended){border-radius:var(--mdc-fab-container-shape, 50%)}.mat-mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple,.mat-mdc-mini-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:var(--mdc-fab-container-shape, 50%)}.mat-mdc-fab:hover,.mat-mdc-fab:focus,.mat-mdc-mini-fab:hover,.mat-mdc-mini-fab:focus{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12)}.mat-mdc-fab:active,.mat-mdc-fab:focus:active,.mat-mdc-mini-fab:active,.mat-mdc-mini-fab:focus:active{box-shadow:0px 7px 8px -4px rgba(0, 0, 0, 0.2), 0px 12px 17px 2px rgba(0, 0, 0, 0.14), 0px 5px 22px 4px rgba(0, 0, 0, 0.12)}.mat-mdc-fab[disabled],.mat-mdc-mini-fab[disabled]{cursor:default;pointer-events:none;box-shadow:0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-fab:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-mini-fab:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}.mat-mdc-fab .mat-icon,.mat-mdc-fab .material-icons,.mat-mdc-mini-fab .mat-icon,.mat-mdc-mini-fab .material-icons{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mat-mdc-fab .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-extended-fab{border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mat-mdc-extended-fab .mdc-fab__ripple{border-radius:24px}.mat-mdc-extended-fab .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab .mdc-fab__icon,.mat-mdc-extended-fab .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon,.mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mat-mdc-extended-fab>.mat-icon,.mat-mdc-extended-fab>.material-icons{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab>.mat-icon,[dir=rtl] .mat-mdc-extended-fab>.material-icons,.mat-mdc-extended-fab>.mat-icon[dir=rtl],.mat-mdc-extended-fab>.material-icons[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mdc-button__label+.mat-icon,.mat-mdc-extended-fab .mdc-button__label+.material-icons{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.material-icons,.mat-mdc-extended-fab .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-extended-fab .mdc-button__label+.material-icons[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mat-mdc-extended-fab .mat-mdc-button-touch-target{width:100%}'],encapsulation:2,changeDetection:0}),n})(),uZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=gr({imports:[pa,aO,pa]}),n})();const dZ=["addListener","removeListener"],hZ=["addEventListener","removeEventListener"],fZ=["on","off"];function $w(n,e,t,r){if(G(t)&&(r=t,t=void 0),r)return $w(n,e,t).pipe(fD(r));const[i,o]=function mZ(n){return G(n.addEventListener)&&G(n.removeEventListener)}(n)?hZ.map(a=>u=>n[a](e,u,t)):function pZ(n){return G(n.addListener)&&G(n.removeListener)}(n)?dZ.map(yB(n,e)):function gZ(n){return G(n.on)&&G(n.off)}(n)?fZ.map(yB(n,e)):[];if(!i&&Si(n))return Ta(a=>$w(a,e,t))(lo(n));if(!i)throw new TypeError("Invalid event target");return new ke(a=>{const u=(...h)=>a.next(1<h.length?h:h[0]);return i(u),()=>o(u)})}function yB(n,e){return t=>r=>n[t](e,r)}const vv={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=vv;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(o=>{t=void 0,n(o)});return new P(()=>t?.(i))},requestAnimationFrame(...n){const{delegate:e}=vv;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=vv;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0},bZ=new class yZ extends oD{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class vZ extends iD{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=vv.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:o}=e;null!=t&&(null===(i=o[o.length-1])||void 0===i?void 0:i.id)!==t&&(vv.cancelAnimationFrame(t),e._scheduled=void 0)}});let m1,wZ=1;const Ww={};function bB(n){return n in Ww&&(delete Ww[n],!0)}const _Z={setImmediate(n){const e=wZ++;return Ww[e]=!0,m1||(m1=Promise.resolve()),m1.then(()=>bB(e)&&n()),e},clearImmediate(n){bB(n)}},{setImmediate:xZ,clearImmediate:EZ}=_Z,qw={setImmediate(...n){const{delegate:e}=qw;return(e?.setImmediate||xZ)(...n)},clearImmediate(n){const{delegate:e}=qw;return(e?.clearImmediate||EZ)(n)},delegate:void 0},SZ=new class CZ extends oD{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class DZ extends iD{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=qw.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:o}=e;null!=t&&(null===(i=o[o.length-1])||void 0===i?void 0:i.id)!==t&&(qw.clearImmediate(t),e._scheduled=void 0)}});function v1(n,e=sD){return function MZ(n){return pt((e,t)=>{let r=!1,i=null,o=null,a=!1;const u=()=>{if(o?.unsubscribe(),o=null,r){r=!1;const m=i;i=null,t.next(m)}a&&t.complete()},h=()=>{o=null,a&&t.complete()};e.subscribe(at(t,m=>{r=!0,i=m,o||lo(n(m)).subscribe(o=at(t,u,h))},()=>{a=!0,(!r||!o||o.closed)&&t.complete()}))})}(()=>function TZ(n=0,e,t=uG){let r=-1;return null!=e&&(id(e)?t=e:r=e),new ke(i=>{let o=function AZ(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;o<0&&(o=0);let a=0;return t.schedule(function(){i.closed||(i.next(a++),0<=r?this.schedule(void 0,r):i.complete())},o)})}(n,e))}const kZ=["contentWrapper"],IZ=["*"],OZ=new Gt("VIRTUAL_SCROLL_STRATEGY");let yv=(()=>{class n{constructor(t,r,i){this._ngZone=t,this._platform=r,this._scrolled=new Ie,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new ke(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(v1(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Iu()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(dD(o=>!o||i.indexOf(o)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,o)=>{this._scrollableContainsElement(o,t)&&r.push(o)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=Yf(r),o=t.getElementRef().nativeElement;do{if(i==o)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>$w(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(St(Kn),St(jo),St(or,8))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),wB=(()=>{class n{constructor(t,r,i,o){this.elementRef=t,this.scrollDispatcher=r,this.ngZone=i,this.dir=o,this._destroyed=new Ie,this._elementScrolled=new ke(a=>this.ngZone.runOutsideAngular(()=>$w(this.elementRef.nativeElement,"scroll").pipe(qs(this._destroyed)).subscribe(a)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const r=this.elementRef.nativeElement,i=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=i?t.end:t.start),null==t.right&&(t.right=i?t.start:t.end),null!=t.bottom&&(t.top=r.scrollHeight-r.clientHeight-t.bottom),i&&0!=dm()?(null!=t.left&&(t.right=r.scrollWidth-r.clientWidth-t.left),2==dm()?t.left=t.right:1==dm()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=r.scrollWidth-r.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const r=this.elementRef.nativeElement;RI()?r.scrollTo(t):(null!=t.top&&(r.scrollTop=t.top),null!=t.left&&(r.scrollLeft=t.left))}measureScrollOffset(t){const r="left",i="right",o=this.elementRef.nativeElement;if("top"==t)return o.scrollTop;if("bottom"==t)return o.scrollHeight-o.clientHeight-o.scrollTop;const a=this.dir&&"rtl"==this.dir.value;return"start"==t?t=a?i:r:"end"==t&&(t=a?r:i),a&&2==dm()?t==r?o.scrollWidth-o.clientWidth-o.scrollLeft:o.scrollLeft:a&&1==dm()?t==r?o.scrollLeft+o.scrollWidth-o.clientWidth:-o.scrollLeft:t==r?o.scrollLeft:o.scrollWidth-o.clientWidth-o.scrollLeft}}return n.\u0275fac=function(t){return new(t||n)(et(br),et(yv),et(Kn),et(hm,8))},n.\u0275dir=fn({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0}),n})(),y1=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new Ie,this._changeListener=o=>{this._change.next(o)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,o=i.getBoundingClientRect();return{top:-o.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-o.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(v1(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(St(jo),St(Kn),St(or,8))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const _B=new Gt("VIRTUAL_SCROLLABLE");let NZ=(()=>{class n extends wB{constructor(t,r,i,o){super(t,r,i,o)}measureViewportSize(t){const r=this.elementRef.nativeElement;return"horizontal"===t?r.clientWidth:r.clientHeight}}return n.\u0275fac=function(t){return new(t||n)(et(br),et(yv),et(Kn),et(hm,8))},n.\u0275dir=fn({type:n,features:[Fn]}),n})();const FZ=typeof requestAnimationFrame<"u"?bZ:SZ;let BZ=(()=>{class n extends NZ{get orientation(){return this._orientation}set orientation(t){this._orientation!==t&&(this._orientation=t,this._calculateSpacerSize())}get appendOnly(){return this._appendOnly}set appendOnly(t){this._appendOnly=Pc(t)}constructor(t,r,i,o,a,u,h,m){super(t,u,i,a),this.elementRef=t,this._changeDetectorRef=r,this._scrollStrategy=o,this.scrollable=m,this._platform=Rs(jo),this._detachedSubject=new Ie,this._renderedRangeSubject=new Ie,this._orientation="vertical",this._appendOnly=!1,this.scrolledIndexChange=new ke(v=>this._scrollStrategy.scrolledIndexChange.subscribe(x=>Promise.resolve().then(()=>this.ngZone.run(()=>v.next(x))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=P.EMPTY,this._viewportChanges=h.change().subscribe(()=>{this.checkViewportSize()}),this.scrollable||(this.elementRef.nativeElement.classList.add("cdk-virtual-scrollable"),this.scrollable=this)}ngOnInit(){this._platform.isBrowser&&(this.scrollable===this&&super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.scrollable.elementScrolled().pipe(VI(null),v1(0,FZ)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()})))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(t){this.ngZone.runOutsideAngular(()=>{this._forOf=t,this._forOf.dataStream.pipe(qs(this._detachedSubject)).subscribe(r=>{const i=r.length;i!==this._dataLength&&(this._dataLength=i,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}measureBoundingClientRectWithScrollOffset(t){return this.getElementRef().nativeElement.getBoundingClientRect()[t]}setTotalContentSize(t){this._totalContentSize!==t&&(this._totalContentSize=t,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(t){(function LZ(n,e){return n.start==e.start&&n.end==e.end})(this._renderedRange,t)||(this.appendOnly&&(t={start:0,end:Math.max(this._renderedRange.end,t.end)}),this._renderedRangeSubject.next(this._renderedRange=t),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(t,r="to-start"){t=this.appendOnly&&"to-start"===r?0:t;const o="horizontal"==this.orientation,a=o?"X":"Y";let h=`translate${a}(${Number((o&&this.dir&&"rtl"==this.dir.value?-1:1)*t)}px)`;this._renderedContentOffset=t,"to-end"===r&&(h+=` translate${a}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=h&&(this._renderedContentTransform=h,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(t,r="auto"){const i={behavior:r};"horizontal"===this.orientation?i.start=t:i.top=t,this.scrollable.scrollTo(i)}scrollToIndex(t,r="auto"){this._scrollStrategy.scrollToIndex(t,r)}measureScrollOffset(t){let r;return r=this.scrollable==this?i=>super.measureScrollOffset(i):i=>this.scrollable.measureScrollOffset(i),Math.max(0,r(t??("horizontal"===this.orientation?"start":"top"))-this.measureViewportOffset())}measureViewportOffset(t){let r;const i="left",o="right",a="rtl"==this.dir?.value;r="start"==t?a?o:i:"end"==t?a?i:o:t||("horizontal"===this.orientation?"left":"top");const u=this.scrollable.measureBoundingClientRectWithScrollOffset(r);return this.elementRef.nativeElement.getBoundingClientRect()[r]-u}measureRenderedContentSize(){const t=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?t.offsetWidth:t.offsetHeight}measureRangeSize(t){return this._forOf?this._forOf.measureRangeSize(t,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){this._viewportSize=this.scrollable.measureViewportSize(this.orientation)}_markChangeDetectionNeeded(t){t&&this._runAfterChangeDetection.push(t),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const t=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const r of t)r()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}}return n.\u0275fac=function(t){return new(t||n)(et(br),et(rh),et(Kn),et(OZ,8),et(hm,8),et(yv),et(y1),et(_B,8))},n.\u0275cmp=Qi({type:n,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(t,r){if(1&t&&Cu(kZ,7),2&t){let i;Tc(i=kc())&&(r._contentWrapper=i.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(t,r){2&t&&bo("cdk-virtual-scroll-orientation-horizontal","horizontal"===r.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==r.orientation)},inputs:{orientation:"orientation",appendOnly:"appendOnly"},outputs:{scrolledIndexChange:"scrolledIndexChange"},standalone:!0,features:[Hr([{provide:wB,useFactory:(e,t)=>e||t,deps:[[new Ml,new cf(_B)],n]}]),Fn,nh],ngContentSelectors:IZ,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(t,r){1&t&&(Eu(),wr(0,"div",0,1),Ws(2),Vr(),zo(3,"div",2)),2&t&&(di(3),Jd("width",r._totalContentWidth)("height",r._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;transform:translateZ(0)}.cdk-virtual-scrollable{overflow:auto;will-change:scroll-position;contain:strict;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{height:1px;transform-origin:0 0;flex:0 0 auto}[dir=rtl] .cdk-virtual-scroll-spacer{transform-origin:100% 0}"],encapsulation:2,changeDetection:0}),n})(),b1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=gr({}),n})(),xB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=gr({imports:[fm,b1,BZ,fm,b1]}),n})();class w1{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class EB extends w1{constructor(e,t,r,i,o){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=i,this.projectableNodes=o}}class VZ extends w1{constructor(e,t,r,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r,this.injector=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class HZ extends w1{constructor(e){super(),this.element=e instanceof br?e.nativeElement:e}}class zZ{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof EB?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof VZ?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof HZ?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class jZ extends zZ{constructor(e,t,r,i,o){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=a=>{const u=a.element,h=this._document.createComment("dom-portal");u.parentNode.insertBefore(h,u),this.outletElement.appendChild(u),this._attachedPortal=a,super.setDisposeFn(()=>{h.parentNode&&h.parentNode.replaceChild(u,h)})},this._document=o}attachComponentPortal(e){const r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let i;return e.viewContainerRef?(i=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>i.destroy())):(i=r.create(e.injector||this._defaultInjector||Ya.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=e,i}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=e,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let UZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=gr({}),n})();const DB=RI();class GZ{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Fi(-this._previousScrollPosition.left),e.style.top=Fi(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,i=this._document.body.style,o=r.scrollBehavior||"",a=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),DB&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),DB&&(r.scrollBehavior=o,i.scrollBehavior=a)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class $Z{constructor(e,t,r,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class CB{enable(){}disable(){}attach(){}}function _1(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function SB(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class WZ{constructor(e,t,r,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();_1(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let qZ=(()=>{class n{constructor(t,r,i,o){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new CB,this.close=a=>new $Z(this._scrollDispatcher,this._ngZone,this._viewportRuler,a),this.block=()=>new GZ(this._viewportRuler,this._document),this.reposition=a=>new WZ(this._scrollDispatcher,this._viewportRuler,this._ngZone,a),this._document=o}}return n.\u0275fac=function(t){return new(t||n)(St(yv),St(y1),St(Kn),St(or))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class YZ{constructor(e){if(this.scrollStrategy=new CB,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class XZ{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let MB=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(St(or))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),KZ=(()=>{class n extends MB{constructor(t,r){super(t),this._ngZone=r,this._keydownListener=i=>{const o=this._attachedOverlays;for(let a=o.length-1;a>-1;a--)if(o[a]._keydownEvents.observers.length>0){const u=o[a]._keydownEvents;this._ngZone?this._ngZone.run(()=>u.next(i)):u.next(i);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(St(or),St(Kn,8))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ZZ=(()=>{class n extends MB{constructor(t,r,i){super(t),this._platform=r,this._ngZone=i,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=ku(o)},this._clickListener=o=>{const a=ku(o),u="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;const h=this._attachedOverlays.slice();for(let m=h.length-1;m>-1;m--){const v=h[m];if(v._outsidePointerEvents.observers.length<1||!v.hasAttached())continue;if(v.overlayElement.contains(a)||v.overlayElement.contains(u))break;const x=v._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>x.next(o)):x.next(o)}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(St(or),St(jo),St(Kn,8))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),AB=(()=>{class n{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||uD()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let o=0;o<i.length;o++)i[o].remove()}const r=this._document.createElement("div");r.classList.add(t),uD()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return n.\u0275fac=function(t){return new(t||n)(St(or),St(jo))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class QZ{constructor(e,t,r,i,o,a,u,h,m,v=!1){this._portalOutlet=e,this._host=t,this._pane=r,this._config=i,this._ngZone=o,this._keyboardDispatcher=a,this._document=u,this._location=h,this._outsideClickDispatcher=m,this._animationsDisabled=v,this._backdropElement=null,this._backdropClick=new Ie,this._attachments=new Ie,this._detachments=new Ie,this._locationChanges=P.EMPTY,this._backdropClickHandler=x=>this._backdropClick.next(x),this._backdropTransitionendHandler=x=>{this._disposeBackdrop(x.target)},this._keydownEvents=new Ie,this._outsidePointerEvents=new Ie,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe($0(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Fi(this._config.width),e.height=Fi(this._config.height),e.minWidth=Fi(this._config.minWidth),e.minHeight=Fi(this._config.minHeight),e.maxWidth=Fi(this._config.maxWidth),e.maxHeight=Fi(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,r){const i=G0(t||[]).filter(o=>!!o);i.length&&(r?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(qs(Bh(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const TB="cdk-overlay-connected-position-bounding-box",JZ=/([A-Za-z%]+)$/;class eQ{get positions(){return this._preferredPositions}constructor(e,t,r,i,o){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Ie,this._resizeSubscription=P.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(TB),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,i=this._containerRect,o=[];let a;for(let u of this._preferredPositions){let h=this._getOriginPoint(e,i,u),m=this._getOverlayPoint(h,t,u),v=this._getOverlayFit(m,t,r,u);if(v.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(u,h);this._canFitWithFlexibleDimensions(v,m,r)?o.push({position:u,origin:h,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(h,u)}):(!a||a.overlayFit.visibleArea<v.visibleArea)&&(a={overlayFit:v,overlayPoint:m,originPoint:h,position:u,overlayRect:t})}if(o.length){let u=null,h=-1;for(const m of o){const v=m.boundingBoxRect.width*m.boundingBoxRect.height*(m.position.weight||1);v>h&&(h=v,u=m)}return this._isPushed=!1,void this._applyPosition(u.position,u.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(a.position,a.originPoint);this._applyPosition(a.position,a.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Ah(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(TB),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let i,o;if("center"==r.originX)i=e.left+e.width/2;else{const a=this._isRtl()?e.right:e.left,u=this._isRtl()?e.left:e.right;i="start"==r.originX?a:u}return t.left<0&&(i-=t.left),o="center"==r.originY?e.top+e.height/2:"top"==r.originY?e.top:e.bottom,t.top<0&&(o-=t.top),{x:i,y:o}}_getOverlayPoint(e,t,r){let i,o;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,o="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+i,y:e.y+o}}_getOverlayFit(e,t,r,i){const o=IB(t);let{x:a,y:u}=e,h=this._getOffset(i,"x"),m=this._getOffset(i,"y");h&&(a+=h),m&&(u+=m);let k=0-u,F=u+o.height-r.height,Y=this._subtractOverflows(o.width,0-a,a+o.width-r.width),ie=this._subtractOverflows(o.height,k,F),me=Y*ie;return{visibleArea:me,isCompletelyWithinViewport:o.width*o.height===me,fitsInViewportVertically:ie===o.height,fitsInViewportHorizontally:Y==o.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,o=r.right-t.x,a=kB(this._overlayRef.getConfig().minHeight),u=kB(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=a&&a<=i)&&(e.fitsInViewportHorizontally||null!=u&&u<=o)}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=IB(t),o=this._viewportRect,a=Math.max(e.x+i.width-o.width,0),u=Math.max(e.y+i.height-o.height,0),h=Math.max(o.top-r.top-e.y,0),m=Math.max(o.left-r.left-e.x,0);let v=0,x=0;return v=i.width<=o.width?m||-a:e.x<this._viewportMargin?o.left-r.left-e.x:0,x=i.height<=o.height?h||-u:e.y<this._viewportMargin?o.top-r.top-e.y:0,this._previousPushAmount={x:v,y:x},{x:e.x+v,y:e.y+x}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new XZ(e,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let o=0;o<t.length;o++)t[o].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,i=this._isRtl();let o,a,u,v,x,k;if("top"===t.overlayY)a=e.y,o=r.height-a+this._viewportMargin;else if("bottom"===t.overlayY)u=r.height-e.y+2*this._viewportMargin,o=r.height-u+this._viewportMargin;else{const F=Math.min(r.bottom-e.y+r.top,e.y),Y=this._lastBoundingBoxSize.height;o=2*F,a=e.y-F,o>Y&&!this._isInitialRender&&!this._growAfterOpen&&(a=e.y-Y/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)k=r.width-e.x+this._viewportMargin,v=e.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)x=e.x,v=r.right-e.x;else{const F=Math.min(r.right-e.x+r.left,e.x),Y=this._lastBoundingBoxSize.width;v=2*F,x=e.x-F,v>Y&&!this._isInitialRender&&!this._growAfterOpen&&(x=e.x-Y/2)}return{top:a,left:x,bottom:u,right:k,width:v,height:o}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const o=this._overlayRef.getConfig().maxHeight,a=this._overlayRef.getConfig().maxWidth;i.height=Fi(r.height),i.top=Fi(r.top),i.bottom=Fi(r.bottom),i.width=Fi(r.width),i.left=Fi(r.left),i.right=Fi(r.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",o&&(i.maxHeight=Fi(o)),a&&(i.maxWidth=Fi(a))}this._lastBoundingBoxSize=r,Ah(this._boundingBox.style,i)}_resetBoundingBoxStyles(){Ah(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Ah(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},i=this._hasExactPosition(),o=this._hasFlexibleDimensions,a=this._overlayRef.getConfig();if(i){const v=this._viewportRuler.getViewportScrollPosition();Ah(r,this._getExactOverlayY(t,e,v)),Ah(r,this._getExactOverlayX(t,e,v))}else r.position="static";let u="",h=this._getOffset(t,"x"),m=this._getOffset(t,"y");h&&(u+=`translateX(${h}px) `),m&&(u+=`translateY(${m}px)`),r.transform=u.trim(),a.maxHeight&&(i?r.maxHeight=Fi(a.maxHeight):o&&(r.maxHeight="")),a.maxWidth&&(i?r.maxWidth=Fi(a.maxWidth):o&&(r.maxWidth="")),Ah(this._pane.style,r)}_getExactOverlayY(e,t,r){let i={top:"",bottom:""},o=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,r)),"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(o.y+this._overlayRect.height)+"px":i.top=Fi(o.y),i}_getExactOverlayX(e,t,r){let a,i={left:"",right:""},o=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,r)),a=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===a?i.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":i.left=Fi(o.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:SB(e,r),isOriginOutsideView:_1(e,r),isOverlayClipped:SB(t,r),isOverlayOutsideView:_1(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&G0(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof br)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function Ah(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function kB(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(JZ);return t&&"px"!==t?null:parseFloat(e)}return n||null}function IB(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const OB="cdk-global-overlay-wrapper";class tQ{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(OB),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:o,maxWidth:a,maxHeight:u}=r,h=!("100%"!==i&&"100vw"!==i||a&&"100%"!==a&&"100vw"!==a),m=!("100%"!==o&&"100vh"!==o||u&&"100%"!==u&&"100vh"!==u),v=this._xPosition,x=this._xOffset,k="rtl"===this._overlayRef.getConfig().direction;let F="",Y="",ie="";h?ie="flex-start":"center"===v?(ie="center",k?Y=x:F=x):k?"left"===v||"end"===v?(ie="flex-end",F=x):("right"===v||"start"===v)&&(ie="flex-start",Y=x):"left"===v||"start"===v?(ie="flex-start",F=x):("right"===v||"end"===v)&&(ie="flex-end",Y=x),e.position=this._cssPosition,e.marginLeft=h?"0":F,e.marginTop=m?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=h?"0":Y,t.justifyContent=ie,t.alignItems=m?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(OB),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let nQ=(()=>{class n{constructor(t,r,i,o){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=o}global(){return new tQ}flexibleConnectedTo(t){return new eQ(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(St(y1),St(or),St(jo),St(AB))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rQ=0,Yw=(()=>{class n{constructor(t,r,i,o,a,u,h,m,v,x,k,F){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=o,this._keyboardDispatcher=a,this._injector=u,this._ngZone=h,this._document=m,this._directionality=v,this._location=x,this._outsideClickDispatcher=k,this._animationsModuleType=F}create(t){const r=this._createHostElement(),i=this._createPaneElement(r),o=this._createPortalOutlet(i),a=new YZ(t);return a.direction=a.direction||this._directionality.value,new QZ(o,r,i,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+rQ++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(Jg)),new jZ(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(St(qZ),St(AB),St(Ri),St(nQ),St(KZ),St(Ya),St(Kn),St(or),St(hm),St(zk),St(ZZ),St(Ic,8))},n.\u0275prov=nn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const sQ={provide:new Gt("cdk-connected-overlay-scroll-strategy"),deps:[Yw],useFactory:function oQ(n){return()=>n.scrollStrategies.reposition()}};let aQ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=gr({providers:[Yw,sQ],imports:[fm,UZ,xB,xB]}),n})();const lQ=["tooltip"],RB=new Gt("mat-tooltip-scroll-strategy"),dQ={provide:RB,deps:[Yw],useFactory:function uQ(n){return()=>n.scrollStrategies.reposition({scrollThrottle:20})}},fQ=new Gt("mat-tooltip-default-options",{providedIn:"root",factory:function hQ(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}}),PB="tooltip-panel",NB=um({passive:!0});let bQ=(()=>{class n{get position(){return this._position}set position(t){t!==this._position&&(this._position=t,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(t){this._positionAtOrigin=Pc(t),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(t){this._disabled=Pc(t),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(t){this._showDelay=hD(t)}get hideDelay(){return this._hideDelay}set hideDelay(t){this._hideDelay=hD(t),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(t){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=t?String(t).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(t){this._tooltipClass=t,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}constructor(t,r,i,o,a,u,h,m,v,x,k,F){this._overlay=t,this._elementRef=r,this._scrollDispatcher=i,this._viewContainerRef=o,this._ngZone=a,this._platform=u,this._ariaDescriber=h,this._focusMonitor=m,this._dir=x,this._defaultOptions=k,this._position="below",this._positionAtOrigin=!1,this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._viewportMargin=8,this._cssClassPrefix="mat",this._showDelay=this._defaultOptions.showDelay,this._hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new Ie,this._scrollStrategy=v,this._document=F,k&&(k.position&&(this.position=k.position),k.positionAtOrigin&&(this.positionAtOrigin=k.positionAtOrigin),k.touchGestures&&(this.touchGestures=k.touchGestures)),x.change.pipe(qs(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(qs(this._destroyed)).subscribe(t=>{t?"keyboard"===t&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const t=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([r,i])=>{t.removeEventListener(r,i,NB)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(t,this.message,"tooltip"),this._focusMonitor.stopMonitoring(t)}show(t=this.showDelay,r){if(this.disabled||!this.message||this._isTooltipVisible())return void this._tooltipInstance?._cancelPendingAnimations();const i=this._createOverlay(r);this._detach(),this._portal=this._portal||new EB(this._tooltipComponent,this._viewContainerRef);const o=this._tooltipInstance=i.attach(this._portal).instance;o._triggerElement=this._elementRef.nativeElement,o._mouseLeaveHideDelay=this._hideDelay,o.afterHidden().pipe(qs(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),o.show(t)}hide(t=this.hideDelay){const r=this._tooltipInstance;r&&(r.isVisible()?r.hide(t):(r._cancelPendingAnimations(),this._detach()))}toggle(t){this._isTooltipVisible()?this.hide():this.show(void 0,t)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(t){if(this._overlayRef){const o=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!t)&&o._origin instanceof br)return this._overlayRef;this._detach()}const r=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),i=this._overlay.position().flexibleConnectedTo(this.positionAtOrigin&&t||this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(r);return i.positionChanges.pipe(qs(this._destroyed)).subscribe(o=>{this._updateCurrentPositionClass(o.connectionPair),this._tooltipInstance&&o.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:i,panelClass:`${this._cssClassPrefix}-${PB}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(qs(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(qs(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(qs(this._destroyed)).subscribe(o=>{this._isTooltipVisible()&&27===o.keyCode&&!function IG(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}(o)&&(o.preventDefault(),o.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(t){const r=t.getConfig().positionStrategy,i=this._getOrigin(),o=this._getOverlayPosition();r.withPositions([this._addOffset({...i.main,...o.main}),this._addOffset({...i.fallback,...o.fallback})])}_addOffset(t){return t}_getOrigin(){const t=!this._dir||"ltr"==this._dir.value,r=this.position;let i;"above"==r||"below"==r?i={originX:"center",originY:"above"==r?"top":"bottom"}:"before"==r||"left"==r&&t||"right"==r&&!t?i={originX:"start",originY:"center"}:("after"==r||"right"==r&&t||"left"==r&&!t)&&(i={originX:"end",originY:"center"});const{x:o,y:a}=this._invertPosition(i.originX,i.originY);return{main:i,fallback:{originX:o,originY:a}}}_getOverlayPosition(){const t=!this._dir||"ltr"==this._dir.value,r=this.position;let i;"above"==r?i={overlayX:"center",overlayY:"bottom"}:"below"==r?i={overlayX:"center",overlayY:"top"}:"before"==r||"left"==r&&t||"right"==r&&!t?i={overlayX:"end",overlayY:"center"}:("after"==r||"right"==r&&t||"left"==r&&!t)&&(i={overlayX:"start",overlayY:"center"});const{x:o,y:a}=this._invertPosition(i.overlayX,i.overlayY);return{main:i,fallback:{overlayX:o,overlayY:a}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe($0(1),qs(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(t){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=t,this._tooltipInstance._markForCheck())}_invertPosition(t,r){return"above"===this.position||"below"===this.position?"top"===r?r="bottom":"bottom"===r&&(r="top"):"end"===t?t="start":"start"===t&&(t="end"),{x:t,y:r}}_updateCurrentPositionClass(t){const{overlayY:r,originX:i,originY:o}=t;let a;if(a="center"===r?this._dir&&"rtl"===this._dir.value?"end"===i?"left":"right":"start"===i?"left":"right":"bottom"===r&&"top"===o?"above":"below",a!==this._currentPosition){const u=this._overlayRef;if(u){const h=`${this._cssClassPrefix}-${PB}-`;u.removePanelClass(h+this._currentPosition),u.addPanelClass(h+a)}this._currentPosition=a}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",t=>{let r;this._setupPointerExitEventsIfNeeded(),void 0!==t.x&&void 0!==t.y&&(r=t),this.show(void 0,r)}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",t=>{const r=t.targetTouches?.[0],i=r?{x:r.clientX,y:r.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(void 0,i),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const t=[];if(this._platformSupportsMouseEvents())t.push(["mouseleave",r=>{const i=r.relatedTarget;(!i||!this._overlayRef?.overlayElement.contains(i))&&this.hide()}],["wheel",r=>this._wheelListener(r)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const r=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};t.push(["touchend",r],["touchcancel",r])}this._addListeners(t),this._passiveListeners.push(...t)}_addListeners(t){t.forEach(([r,i])=>{this._elementRef.nativeElement.addEventListener(r,i,NB)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(t){if(this._isTooltipVisible()){const r=this._document.elementFromPoint(t.clientX,t.clientY),i=this._elementRef.nativeElement;r!==i&&!i.contains(r)&&this.hide()}}_disableNativeGesturesIfNecessary(){const t=this.touchGestures;if("off"!==t){const r=this._elementRef.nativeElement,i=r.style;("on"===t||"INPUT"!==r.nodeName&&"TEXTAREA"!==r.nodeName)&&(i.userSelect=i.msUserSelect=i.webkitUserSelect=i.MozUserSelect="none"),("on"===t||!r.draggable)&&(i.webkitUserDrag="none"),i.touchAction="none",i.webkitTapHighlightColor="transparent"}}}return n.\u0275fac=function(t){Qy()},n.\u0275dir=fn({type:n,inputs:{position:["matTooltipPosition","position"],positionAtOrigin:["matTooltipPositionAtOrigin","positionAtOrigin"],disabled:["matTooltipDisabled","disabled"],showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]}}),n})(),wQ=(()=>{class n extends bQ{constructor(t,r,i,o,a,u,h,m,v,x,k,F){super(t,r,i,o,a,u,h,m,v,x,k,F),this._tooltipComponent=xQ,this._cssClassPrefix="mat-mdc",this._viewportMargin=8}_addOffset(t){const i=!this._dir||"ltr"==this._dir.value;return"top"===t.originY?t.offsetY=-8:"bottom"===t.originY?t.offsetY=8:"start"===t.originX?t.offsetX=i?-8:8:"end"===t.originX&&(t.offsetX=i?8:-8),t}}return n.\u0275fac=function(t){return new(t||n)(et(Yw),et(br),et(yv),et(Za),et(Kn),et(jo),et(JG),et(vD),et(RB),et(hm,8),et(fQ,8),et(or))},n.\u0275dir=fn({type:n,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],exportAs:["matTooltip"],features:[Fn]}),n})(),_Q=(()=>{class n{constructor(t,r){this._changeDetectorRef=t,this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new Ie,this._animationsDisabled="NoopAnimations"===r}show(t){clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},t)}hide(t){clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},t)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:t}){(!t||!this._triggerElement.contains(t))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){}_handleAnimationEnd({animationName:t}){(t===this._showAnimation||t===this._hideAnimation)&&this._finalizeAnimation(t===this._showAnimation)}_cancelPendingAnimations(){clearTimeout(this._showTimeoutId),clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(t){t?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(t){const r=this._tooltip.nativeElement,i=this._showAnimation,o=this._hideAnimation;if(r.classList.remove(t?o:i),r.classList.add(t?i:o),this._isVisible=t,t&&!this._animationsDisabled&&"function"==typeof getComputedStyle){const a=getComputedStyle(r);("0s"===a.getPropertyValue("animation-duration")||"none"===a.getPropertyValue("animation-name"))&&(this._animationsDisabled=!0)}t&&this._onShow(),this._animationsDisabled&&(r.classList.add("_mat-animation-noopable"),this._finalizeAnimation(t))}}return n.\u0275fac=function(t){return new(t||n)(et(rh),et(Ic,8))},n.\u0275dir=fn({type:n}),n})(),xQ=(()=>{class n extends _Q{constructor(t,r,i){super(t,i),this._elementRef=r,this._isMultiline=!1,this._showAnimation="mat-mdc-tooltip-show",this._hideAnimation="mat-mdc-tooltip-hide"}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){const t=this._elementRef.nativeElement.getBoundingClientRect();return t.height>24&&t.width>=200}}return n.\u0275fac=function(t){return new(t||n)(et(rh),et(br),et(Ic,8))},n.\u0275cmp=Qi({type:n,selectors:[["mat-tooltip-component"]],viewQuery:function(t,r){if(1&t&&Cu(lQ,7),2&t){let i;Tc(i=kc())&&(r._tooltip=i.first)}},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(t,r){1&t&&jr("mouseleave",function(o){return r._handleMouseLeave(o)}),2&t&&Jd("zoom",r.isVisible()?1:null)},features:[Fn],decls:4,vars:4,consts:[[1,"mdc-tooltip","mdc-tooltip--shown","mat-mdc-tooltip",3,"ngClass","animationend"],["tooltip",""],[1,"mdc-tooltip__surface","mdc-tooltip__surface-animation"]],template:function(t,r){1&t&&(wr(0,"div",0,1),jr("animationend",function(o){return r._handleAnimationEnd(o)}),wr(2,"div",2),eh(3),Vr()()),2&t&&(bo("mdc-tooltip--multiline",r._isMultiline),ri("ngClass",r.tooltipClass),di(3),Gg(r.message))},dependencies:[Qk],styles:['.mdc-tooltip__surface{word-break:var(--mdc-tooltip-word-break, normal);overflow-wrap:anywhere}.mdc-tooltip{position:fixed;display:none;z-index:9}.mdc-tooltip-wrapper--rich{position:relative}.mdc-tooltip--shown,.mdc-tooltip--showing,.mdc-tooltip--hide{display:inline-flex}.mdc-tooltip--shown.mdc-tooltip--rich,.mdc-tooltip--showing.mdc-tooltip--rich,.mdc-tooltip--hide.mdc-tooltip--rich{display:inline-block;left:-320px;position:absolute}.mdc-tooltip__surface{line-height:16px;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center}.mdc-tooltip__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-tooltip__surface::before{border-color:CanvasText}}.mdc-tooltip--rich .mdc-tooltip__surface{align-items:flex-start;display:flex;flex-direction:column;min-height:24px;min-width:40px;max-width:320px;position:relative}.mdc-tooltip--multiline .mdc-tooltip__surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mdc-tooltip__surface,.mdc-tooltip--multiline .mdc-tooltip__surface[dir=rtl]{text-align:right}.mdc-tooltip__surface .mdc-tooltip__title{margin:0 8px}.mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(200px - (2 * 8px));margin:8px;text-align:left}[dir=rtl] .mdc-tooltip__surface .mdc-tooltip__content,.mdc-tooltip__surface .mdc-tooltip__content[dir=rtl]{text-align:right}.mdc-tooltip--rich .mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(320px - (2 * 8px));align-self:stretch}.mdc-tooltip__surface .mdc-tooltip__content-link{text-decoration:none}.mdc-tooltip--rich-actions,.mdc-tooltip__content,.mdc-tooltip__title{z-index:1}.mdc-tooltip__surface-animation{opacity:0;transform:scale(0.8);will-change:transform,opacity}.mdc-tooltip--shown .mdc-tooltip__surface-animation{transform:scale(1);opacity:1}.mdc-tooltip--hide .mdc-tooltip__surface-animation{transform:scale(1)}.mdc-tooltip__caret-surface-top,.mdc-tooltip__caret-surface-bottom{position:absolute;height:24px;width:24px;transform:rotate(35deg) skewY(20deg) scaleX(0.9396926208)}.mdc-tooltip__caret-surface-top .mdc-elevation-overlay,.mdc-tooltip__caret-surface-bottom .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-tooltip__caret-surface-bottom{outline:1px solid rgba(0,0,0,0);z-index:-1}@media screen and (forced-colors: active){.mdc-tooltip__caret-surface-bottom{outline-color:CanvasText}}.mdc-tooltip__surface{background-color:var(--mdc-plain-tooltip-container-color, #fff)}.mdc-tooltip__surface{border-radius:var(--mdc-plain-tooltip-container-shape, var(--mdc-shape-small, 4px))}.mdc-tooltip__caret-surface-top,.mdc-tooltip__caret-surface-bottom{border-radius:var(--mdc-plain-tooltip-container-shape, var(--mdc-shape-small, 4px))}.mdc-tooltip__surface{color:var(--mdc-plain-tooltip-supporting-text-color, #000)}.mdc-tooltip__surface{font-family:var(--mdc-plain-tooltip-supporting-text-font, inherit);font-size:var(--mdc-plain-tooltip-supporting-text-size, inherit);font-weight:var(--mdc-plain-tooltip-supporting-text-weight, inherit);letter-spacing:var(--mdc-plain-tooltip-supporting-text-tracking, inherit)}.mat-mdc-tooltip{position:relative;transform:scale(0)}.mat-mdc-tooltip::before{content:"";top:-8px;right:-8px;bottom:-8px;left:-8px;z-index:-1;position:absolute}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}'],encapsulation:2,changeDetection:0}),n})(),EQ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ei({type:n}),n.\u0275inj=gr({providers:[dQ],imports:[u$,Mu,aQ,pa,pa,b1]}),n})();function DQ(n,e){if(1&n){const t=jg();wr(0,"div",2),jr("click",function(){return Bs(t),Lo(yo().toggle())}),Vr()}}function CQ(n,e){if(1&n){const t=jg();wr(0,"button",7),jr("click",function(){const o=Bs(t).$implicit;return Lo(yo(2).onBtnClick(o))}),wr(1,"mat-icon"),eh(2),Vr()()}if(2&n){const t=e.$implicit;ri("matTooltip",t.tooltip),di(2),Gg(t.icon)}}const SQ=function(n){return{value:n}};function MQ(n,e){if(1&n){const t=jg();wr(0,"div",3)(1,"button",4),jr("click",function(){return Bs(t),Lo(yo().toggle())}),wr(2,"mat-icon",5),eh(3),Vr()(),wr(4,"div"),Vf(5,CQ,3,2,"button",6),Vr()()}if(2&n){const t=yo();di(2),ri("@fabToggler",IT(4,SQ,t.fabTogglerState)),di(1),Gg(t.options.icon),di(1),ri("@speedDialStagger",t.buttons.length),di(1),ri("ngForOf",t.buttons)}}class bv{constructor(){this.clickedMenuItem=new Pr,this.buttons=[],this.fabTogglerState="inactive"}ngOnInit(){null!=this.options&&this.options.buttons.length>6&&this.options.buttons.splice(5,this.options.buttons.length-6)}showItems(){null!=this.options&&(this.fabTogglerState="active",this.buttons=this.options.buttons,console.log(this.buttons))}hideItems(){this.fabTogglerState="inactive",this.buttons=[]}toggle(){this.buttons.length?this.hideItems():this.showItems()}onBtnClick(e){this.toggle(),this.clickedMenuItem.emit(e.id)}}bv.\u0275fac=function(e){return new(e||bv)},bv.\u0275cmp=Qi({type:bv,selectors:[["im-poc1-fab-menu"]],inputs:{options:"options"},outputs:{clickedMenuItem:"clickedMenuItem"},standalone:!0,features:[nh],decls:2,vars:2,consts:[["id","fab-dismiss",3,"click",4,"ngIf"],["class","fab-container",4,"ngIf"],["id","fab-dismiss",3,"click"],[1,"fab-container"],["mat-fab","",1,"fab-toggler",3,"click"],[1,"material-icons"],["mat-mini-fab","","class","fab-secondary","color","secondary",3,"matTooltip","click",4,"ngFor","ngForOf"],["mat-mini-fab","","color","secondary",1,"fab-secondary",3,"matTooltip","click"]],template:function(e,t){1&e&&(Vf(0,DQ,1,0,"div",0),Vf(1,MQ,6,6,"div",1)),2&e&&(ri("ngIf","active"===t.fabTogglerState),di(1),ri("ngIf",t.options))},dependencies:[Mu,jE,UE,CD,MO,uZ,cZ,lZ,EQ,wQ],styles:[".fab-container[_ngcontent-%COMP%]{position:fixed;bottom:15px;right:15px;z-index:100;display:flex;flex-direction:column-reverse;align-items:center}.fab-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse;align-items:center;margin-bottom:5px}.fab-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:17px}.fab-toggler[_ngcontent-%COMP%]{float:right;z-index:100}#fab-dismiss[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:99}"],data:{animation:tZ}});const FB=(n,e=1)=>{const t=[['"',"'"],["':","!"],[",'","~"],["}",")","\\","\\"],["{","(","\\","\\"]],r=(i,o)=>{let a=new RegExp(`${(o[2]?o[2]:"")+o[0]}|${(o[3]?o[3]:"")+o[1]}`,"g");return i.replace(a,u=>u===o[0]?o[1]:o[0])};if(e)for(let i=0;i<t.length;++i)n=r(n,t[i]);else for(let i=t.length;i--;)n=r(n,t[i]);return n};class wv{constructor(e,t){this.globalSettings=e,this.rdfGraphService=t,this.graphData={"@context":{name:"http://schema.org/name",description:"http://schema.org/description",image:{"@id":"http://schema.org/image","@type":"@id"},geo:"http://schema.org/geo",latitude:{"@id":"http://schema.org/latitude","@type":"xsd:float"},longitude:{"@id":"http://schema.org/longitude","@type":"xsd:float"},xsd:"http://www.w3.org/2001/XMLSchema#"},name:"The Empire State Building",description:"The Empire State Building is a 102-story landmark in New York City.",image:"http://www.civil.usherbrooke.ca/cours/gci215a/empire-state-building.jpg",geo:{latitude:"40.75",longitude:"73.98"}},this.fabOptions={icon:"share",buttons:[{id:"permalink",icon:"link",tooltip:"Copy permalink"},{id:"image-png",icon:"image",tooltip:"Save image"}]},this.rdfText=JSON.stringify(this.graphData,null,2),this.darkMode=!1,this.isSmallScreen=!1}ngOnInit(){this.globalSettings.darkMode().subscribe(e=>{this.darkMode=e}),this.detectScreenSize(),this.getJSONFromURL()}getJSONFromURL(){const e=window.location.search,r=new URLSearchParams(e).get("d");if(null!=r){const i=(n=>{const e=(n=n.substring(0,n.length-1)).split("\x01");let t=e[0];if(e.length>1){let r=e[1];for(let i of r){let o=t.split(i);t=o.join(o.pop())}}return FB(t,0)})(r);this.graphData=JSON.parse(i),this.rdfText=JSON.stringify(this.graphData,null,2)}}onRDFDocUpdate(e){this.graphData=e}onShareMenuBtnClick(e){var t=this;return sh(function*(){if("permalink"===e){console.log("Create permalink");const r=window.location.href.split("?")[0],i=((n,e=50)=>{let i=[];for(let h=127;--h;)(h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||"-_.!~*'()".includes(String.fromCharCode(h)))&&i.push(String.fromCharCode(h));for(let h=32;h<255;++h){let m=String.fromCharCode(h);"\\"!=m&&!i.includes(m)&&i.unshift(m)}n=n.replace(new RegExp("\x01","g"),"");const a=((h,m)=>{let v=m.length,x="";const k=ie=>encodeURI(encodeURIComponent(ie)).replace(/%../g,"i").length,F=ie=>{let me=ie.charCodeAt(0),Oe=ie.charCodeAt(ie.length-1);return me>=56320&&me<=57343||Oe>=55296&&Oe<=56319};let Y={};for(let ie=2;ie<e;ie++)for(let me=0;me<h.length-ie;++me){let Oe=h.substr(me,ie);if(Y[Oe]||F(Oe))continue;let Ke=1;for(let Ge=h.indexOf(Oe,me+ie);Ge>=0;++Ke)Ge=h.indexOf(Oe,Ge+ie);Ke>1&&(Y[Oe]=Ke)}for(;;){for(;v--&&h.includes(m[v]););if(v<0)break;let me,ie=m[v],Oe=0,Ke=k(ie);for(let ot in Y){let wt=Y[ot],Et=(wt-1)*k(ot)-(wt+1)*Ke;x.length||(Et-=k("\x01")),Et<=0?delete Y[ot]:Et>Oe&&(me=ot,Oe=Et)}if(!me)break;h=h.split(me).join(ie)+ie+me,x=ie+x;let Ge={};for(let ot in Y){let wt=ot.split(me).join(ie),Et=0;for(let Kt=h.indexOf(wt);Kt>=0;++Et)Kt=h.indexOf(wt,Kt+wt.length);Et>1&&(Ge[wt]=Et)}Y=Ge}return{a:h,b:x}})(n=FB(n),i);let u=a.a;return a.b.length&&(u+="\x01"+a.b),u+="_",u})(JSON.stringify(t.graphData));console.log(encodeURIComponent(i)),navigator.clipboard.writeText(`${r}?d=${encodeURIComponent(i)}`)}if("image-png"===e){const r=t.rdfGraphService.getCytoscape();if(null==r)return;const i=yield r.png({output:"blob-promise"}),o="graph.png",a=document.createElement("a");a.href=URL.createObjectURL(i),a.download=o,a.click()}})()}onWindowResize(){this.detectScreenSize()}detectScreenSize(){this.isSmallScreen=window.innerWidth<500}}function BB(n){return new Ye(3e3,!1)}function lJ(){return typeof window<"u"&&typeof window.document<"u"}function x1(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Qu(n){switch(n.length){case 0:return new mv;case 1:return n[0];default:return new hB(n)}}function VB(n,e,t,r,i=new Map,o=new Map){const a=[],u=[];let h=-1,m=null;if(r.forEach(v=>{const x=v.get("offset"),k=x==h,F=k&&m||new Map;v.forEach((Y,ie)=>{let me=ie,Oe=Y;if("offset"!==ie)switch(me=e.normalizePropertyName(me,a),Oe){case"!":Oe=i.get(ie);break;case Hc:Oe=o.get(ie);break;default:Oe=e.normalizeStyleValue(ie,me,Oe,a)}F.set(me,Oe)}),k||u.push(F),m=F,h=x}),a.length)throw function KQ(n){return new Ye(3502,!1)}();return u}function E1(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&D1(t,"start",n)));break;case"done":n.onDone(()=>r(t&&D1(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&D1(t,"destroy",n)))}}function D1(n,e,t){const o=C1(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),a=n._data;return null!=a&&(o._data=a),o}function C1(n,e,t,r,i="",o=0,a){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:o,disabled:!!a}}function Js(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function HB(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}wv.\u0275fac=function(e){return new(e||wv)(et(Yu),et(ch))},wv.\u0275cmp=Qi({type:wv,selectors:[["im-poc1-root"]],hostBindings:function(e,t){1&e&&jr("resize",function(i){return t.onWindowResize(i)},0,xu)},standalone:!0,features:[nh],decls:9,vars:8,consts:[[1,"main"],[1,"split-container"],[3,"direction"],[3,"size"],[3,"text","docChanged"],[3,"data"],[3,"options","clickedMenuItem"]],template:function(e,t){1&e&&(zo(0,"im-poc1-top-bar"),wr(1,"div",0)(2,"div",1)(3,"as-split",2)(4,"as-split-area",3)(5,"im-poc1-rdf-editor",4),jr("docChanged",function(i){return t.onRDFDocUpdate(i)}),Vr()(),wr(6,"as-split-area",3),zo(7,"im-poc1-graph",5),Vr()()()(),wr(8,"im-poc1-fab-menu",6),jr("clickedMenuItem",function(i){return t.onShareMenuBtnClick(i)}),Vr()),2&e&&(di(2),Jd("background-color",t.darkMode?"#595959":"white"),di(1),ri("direction",t.isSmallScreen?"vertical":"horizontal"),di(1),ri("size",40),di(1),ri("text",t.rdfText),di(1),ri("size",60),di(1),ri("data",t.graphData),di(1),ri("options",t.fabOptions))},dependencies:[wm,lv,_G,II,wG,pv,bv],styles:[".split-container[_ngcontent-%COMP%]{width:calc(100% - 20px);height:calc(100vh - 200px);box-shadow:#00000026 1.95px 1.95px 2.6px;border-radius:10px;padding:10px}.main[_ngcontent-%COMP%]{padding:50px}@media screen and (max-width: 500px){.main[_ngcontent-%COMP%]{padding:5px}.split-container[_ngcontent-%COMP%]{width:calc(100% - 20px);height:calc(100vh - 75px)}}"]});let S1=(n,e)=>!1,zB=(n,e,t)=>[],jB=null;function M1(n){const e=n.parentNode||n.host;return e===jB?null:e}(x1()||typeof Element<"u")&&(lJ()?(jB=(()=>document.documentElement)(),S1=(n,e)=>{for(;e;){if(e===n)return!0;e=M1(e)}return!1}):S1=(n,e)=>n.contains(e),zB=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Th=null,UB=!1;const GB=S1,$B=zB;let WB=(()=>{class n{validateStyleProperty(t){return function uJ(n){Th||(Th=function dJ(){return typeof document<"u"?document.body:null}()||{},UB=!!Th.style&&"WebkitAppearance"in Th.style);let e=!0;return Th.style&&!function cJ(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Th.style,!e&&UB&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Th.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return GB(t,r)}getParentElement(t){return M1(t)}query(t,r,i){return $B(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,o,a,u=[],h){return new mv(i,o)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})(),A1=(()=>{class n{}return n.NOOP=new WB,n})();const T1="ng-enter",Xw="ng-leave",Kw="ng-trigger",Zw=".ng-trigger",YB="ng-animating",k1=".ng-animating";function zc(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:I1(parseFloat(e[1]),e[2])}function I1(n,e){return"s"===e?1e3*n:n}function Qw(n,e,t){return n.hasOwnProperty("duration")?n:function pJ(n,e,t){let i,o=0,a="";if("string"==typeof n){const u=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===u)return e.push(BB()),{duration:0,delay:0,easing:""};i=I1(parseFloat(u[1]),u[2]);const h=u[3];null!=h&&(o=I1(parseFloat(h),u[4]));const m=u[5];m&&(a=m)}else i=n;if(!t){let u=!1,h=e.length;i<0&&(e.push(function AQ(){return new Ye(3100,!1)}()),u=!0),o<0&&(e.push(function TQ(){return new Ye(3101,!1)}()),u=!0),u&&e.splice(h,0,BB())}return{duration:i,delay:o,easing:a}}(n,e,t)}function _v(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function XB(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Ju(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function ZB(n,e,t){return t?e+":"+t+";":""}function QB(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=ZB(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=ZB(0,yJ(t),n.style[t]));n.setAttribute("style",e)}function tc(n,e,t){n.style&&(e.forEach((r,i)=>{const o=R1(i);t&&!t.has(i)&&t.set(i,n.style[o]),n.style[o]=r}),x1()&&QB(n))}function kh(n,e){n.style&&(e.forEach((t,r)=>{const i=R1(r);n.style[i]=""}),x1()&&QB(n))}function xv(n){return Array.isArray(n)?1==n.length?n[0]:cB(n):n}const O1=new RegExp("{{\\s*(.+?)\\s*}}","g");function JB(n){let e=[];if("string"==typeof n){let t;for(;t=O1.exec(n);)e.push(t[1]);O1.lastIndex=0}return e}function Ev(n,e,t){const r=n.toString(),i=r.replace(O1,(o,a)=>{let u=e[a];return null==u&&(t.push(function IQ(n){return new Ye(3003,!1)}()),u=""),u.toString()});return i==r?n:i}function Jw(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const vJ=/-+([a-z0-9])/g;function R1(n){return n.replace(vJ,(...e)=>e[1].toUpperCase())}function yJ(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ea(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function OQ(n){return new Ye(3004,!1)}()}}function eV(n,e){return window.getComputedStyle(n)[e]}function DJ(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function CJ(n,e,t){if(":"==n[0]){const h=function SJ(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function WQ(n){return new Ye(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof h)return void e.push(h);n=h}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function $Q(n){return new Ye(3015,!1)}()),e;const i=r[1],o=r[2],a=r[3];e.push(tV(i,a));"<"==o[0]&&!("*"==i&&"*"==a)&&e.push(tV(a,i))}(r,t,e)):t.push(n),t}const r_=new Set(["true","1"]),i_=new Set(["false","0"]);function tV(n,e){const t=r_.has(n)||i_.has(n),r=r_.has(e)||i_.has(e);return(i,o)=>{let a="*"==n||n==i,u="*"==e||e==o;return!a&&t&&"boolean"==typeof i&&(a=i?r_.has(n):i_.has(n)),!u&&r&&"boolean"==typeof o&&(u=o?r_.has(e):i_.has(e)),a&&u}}const MJ=new RegExp("s*:selfs*,?","g");function P1(n,e,t,r){return new AJ(n).build(e,t,r)}class AJ{constructor(e){this._driver=e}build(e,t,r){const i=new IJ(t);return this._resetContextStyleTimingState(i),ea(this,xv(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const o=[],a=[];return"@"==e.name.charAt(0)&&t.errors.push(function PQ(){return new Ye(3006,!1)}()),e.definitions.forEach(u=>{if(this._resetContextStyleTimingState(t),0==u.type){const h=u,m=h.name;m.toString().split(/\s*,\s*/).forEach(v=>{h.name=v,o.push(this.visitState(h,t))}),h.name=m}else if(1==u.type){const h=this.visitTransition(u,t);r+=h.queryCount,i+=h.depCount,a.push(h)}else t.errors.push(function NQ(){return new Ye(3007,!1)}())}),{type:7,name:e.name,states:o,transitions:a,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const o=new Set,a=i||{};r.styles.forEach(u=>{u instanceof Map&&u.forEach(h=>{JB(h).forEach(m=>{a.hasOwnProperty(m)||o.add(m)})})}),o.size&&(Jw(o.values()),t.errors.push(function LQ(n,e){return new Ye(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=ea(this,xv(e.animation),t);return{type:1,matchers:DJ(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Ih(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>ea(this,r,t)),options:Ih(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const o=e.steps.map(a=>{t.currentTime=r;const u=ea(this,a,t);return i=Math.max(i,t.currentTime),u});return t.currentTime=i,{type:3,steps:o,options:Ih(e.options)}}visitAnimate(e,t){const r=function RJ(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return N1(Qw(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=N1(0,0,"");return o.dynamic=!0,o.strValue=t,o}const i=Qw(t,e);return N1(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,o=e.styles?e.styles:sl({});if(5==o.type)i=this.visitKeyframes(o,t);else{let a=e.styles,u=!1;if(!a){u=!0;const m={};r.easing&&(m.easing=r.easing),a=sl(m)}t.currentTime+=r.duration+r.delay;const h=this.visitStyle(a,t);h.isEmptyStep=u,i=h}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let u of i)"string"==typeof u?u===Hc?r.push(u):t.errors.push(new Ye(3002,!1)):r.push(XB(u));let o=!1,a=null;return r.forEach(u=>{if(u instanceof Map&&(u.has("easing")&&(a=u.get("easing"),u.delete("easing")),!o))for(let h of u.values())if(h.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:r,easing:a,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,o=t.currentTime;r&&o>0&&(o-=r.duration+r.delay),e.styles.forEach(a=>{"string"!=typeof a&&a.forEach((u,h)=>{const m=t.collectedStyles.get(t.currentQuerySelector),v=m.get(h);let x=!0;v&&(o!=i&&o>=v.startTime&&i<=v.endTime&&(t.errors.push(function BQ(n,e,t,r,i){return new Ye(3010,!1)}()),x=!1),o=v.startTime),x&&m.set(h,{startTime:o,endTime:i}),t.options&&function mJ(n,e,t){const r=e.params||{},i=JB(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||t.push(function kQ(n){return new Ye(3001,!1)}())})}(u,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function VQ(){return new Ye(3011,!1)}()),r;let o=0;const a=[];let u=!1,h=!1,m=0;const v=e.steps.map(Oe=>{const Ke=this._makeStyleAst(Oe,t);let Ge=null!=Ke.offset?Ke.offset:function OJ(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(Ke.styles),ot=0;return null!=Ge&&(o++,ot=Ke.offset=Ge),h=h||ot<0||ot>1,u=u||ot<m,m=ot,a.push(ot),Ke});h&&t.errors.push(function HQ(){return new Ye(3012,!1)}()),u&&t.errors.push(function zQ(){return new Ye(3200,!1)}());const x=e.steps.length;let k=0;o>0&&o<x?t.errors.push(function jQ(){return new Ye(3202,!1)}()):0==o&&(k=1/(x-1));const F=x-1,Y=t.currentTime,ie=t.currentAnimateTimings,me=ie.duration;return v.forEach((Oe,Ke)=>{const Ge=k>0?Ke==F?1:k*Ke:a[Ke],ot=Ge*me;t.currentTime=Y+ie.delay+ot,ie.duration=ot,this._validateStyleAst(Oe,t),Oe.offset=Ge,r.styles.push(Oe)}),r}visitReference(e,t){return{type:8,animation:ea(this,xv(e.animation),t),options:Ih(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Ih(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Ih(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[o,a]=function TJ(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(MJ,"")),n=n.replace(/@\*/g,Zw).replace(/@\w+/g,t=>Zw+"-"+t.slice(1)).replace(/:animating/g,k1),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+o:o,Js(t.collectedStyles,t.currentQuerySelector,new Map);const u=ea(this,xv(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:a,animation:u,originalSelector:e.selector,options:Ih(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function UQ(){return new Ye(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:Qw(e.timings,t.errors,!0);return{type:12,animation:ea(this,xv(e.animation),t),timings:r,options:null}}}class IJ{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Ih(n){return n?(n=_v(n)).params&&(n.params=function kJ(n){return n?_v(n):null}(n.params)):n={},n}function N1(n,e,t){return{duration:n,delay:e,easing:t}}function L1(n,e,t,r,i,o,a=null,u=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:a,subTimeline:u}}class o_{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const LJ=new RegExp(":enter","g"),BJ=new RegExp(":leave","g");function F1(n,e,t,r,i,o=new Map,a=new Map,u,h,m=[]){return(new VJ).buildKeyframes(n,e,t,r,i,o,a,u,h,m)}class VJ{buildKeyframes(e,t,r,i,o,a,u,h,m,v=[]){m=m||new o_;const x=new B1(e,t,m,i,o,v,[]);x.options=h;const k=h.delay?zc(h.delay):0;x.currentTimeline.delayNextStep(k),x.currentTimeline.setStyles([a],null,x.errors,h),ea(this,r,x);const F=x.timelines.filter(Y=>Y.containsAnimation());if(F.length&&u.size){let Y;for(let ie=F.length-1;ie>=0;ie--){const me=F[ie];if(me.element===t){Y=me;break}}Y&&!Y.allowOnlyTimelineStyles()&&Y.setStyles([u],null,x.errors,h)}return F.length?F.map(Y=>Y.buildKeyframes()):[L1(t,[],[],[],0,k,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),o=t.currentTimeline.currentTime,a=this._visitSubInstructions(r,i,i.options);o!=a&&t.transformIntoNewTimeline(a)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const o=i?.delay;if(o){const a="number"==typeof o?o:zc(Ev(o,i?.params??{},t.errors));r.delayNextStep(a)}}}_visitSubInstructions(e,t,r){let o=t.currentTimeline.currentTime;const a=null!=r.duration?zc(r.duration):null,u=null!=r.delay?zc(r.delay):null;return 0!==a&&e.forEach(h=>{const m=t.appendInstructionToTimeline(h,a,u);o=Math.max(o,m.duration+m.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),ea(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const o=e.options;if(o&&(o.params||o.delay)&&(i=t.createSubContext(o),i.transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=s_);const a=zc(o.delay);i.delayNextStep(a)}e.steps.length&&(e.steps.forEach(a=>ea(this,a,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const o=e.options&&e.options.delay?zc(e.options.delay):0;e.steps.forEach(a=>{const u=t.createSubContext(e.options);o&&u.delayNextStep(o),ea(this,a,u),i=Math.max(i,u.currentTimeline.currentTime),r.push(u.currentTimeline)}),r.forEach(a=>t.currentTimeline.mergeTimelineCollectedStyles(a)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return Qw(t.params?Ev(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const o=e.style;5==o.type?this.visitKeyframes(o,t):(t.incrementTime(r.duration),this.visitStyle(o,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const o=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(o):r.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,o=r.duration,u=t.createSubContext().currentTimeline;u.easing=r.easing,e.styles.forEach(h=>{u.forwardTime((h.offset||0)*o),u.setStyles(h.styles,h.easing,t.errors,t.options),u.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(u),t.transformIntoNewTimeline(i+o),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},o=i.delay?zc(i.delay):0;o&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=s_);let a=r;const u=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=u.length;let h=null;u.forEach((m,v)=>{t.currentQueryIndex=v;const x=t.createSubContext(e.options,m);o&&x.delayNextStep(o),m===t.element&&(h=x.currentTimeline),ea(this,e.animation,x),x.currentTimeline.applyStylesToKeyframe(),a=Math.max(a,x.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(a),h&&(t.currentTimeline.mergeTimelineCollectedStyles(h),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,o=e.timings,a=Math.abs(o.duration),u=a*(t.currentQueryTotal-1);let h=a*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":h=u-h;break;case"full":h=r.currentStaggerTime}const v=t.currentTimeline;h&&v.delayNextStep(h);const x=v.currentTime;ea(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-x+(i.startTime-r.currentTimeline.startTime)}}const s_={};class B1{constructor(e,t,r,i,o,a,u,h){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=a,this.timelines=u,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=s_,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=h||new a_(this._driver,t,0),u.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=zc(r.duration)),null!=r.delay&&(i.delay=zc(r.delay));const o=r.params;if(o){let a=i.params;a||(a=this.options.params={}),Object.keys(o).forEach(u=>{(!t||!a.hasOwnProperty(u))&&(a[u]=Ev(o[u],a,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,o=new B1(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=s_,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},o=new HJ(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,o,a){let u=[];if(i&&u.push(this.element),e.length>0){e=(e=e.replace(LJ,"."+this._enterClassName)).replace(BJ,"."+this._leaveClassName);let m=this._driver.query(this.element,e,1!=r);0!==r&&(m=r<0?m.slice(m.length+r,m.length):m.slice(0,r)),u.push(...m)}return!o&&0==u.length&&a.push(function GQ(n){return new Ye(3014,!1)}()),u}}class a_{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new a_(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Hc),this._currentKeyframe.set(t,Hc);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const o=i&&i.params||{},a=function zJ(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let o of r)t.set(o,Hc)}else Ju(i,t)}),t}(e,this._globalTimelineStyles);for(let[u,h]of a){const m=Ev(h,o,r);this._pendingStyles.set(u,m),this._localTimelineStyles.has(u)||this._backFill.set(u,this._globalTimelineStyles.get(u)??Hc),this._updateStyle(u,m)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((u,h)=>{const m=Ju(u,new Map,this._backFill);m.forEach((v,x)=>{"!"===v?e.add(x):v===Hc&&t.add(x)}),r||m.set("offset",h/this.duration),i.push(m)});const o=e.size?Jw(e.values()):[],a=t.size?Jw(t.values()):[];if(r){const u=i[0],h=new Map(u);u.set("offset",0),h.set("offset",1),i=[u,h]}return L1(this.element,i,o,a,this.duration,this.startTime,this.easing,!1)}}class HJ extends a_{constructor(e,t,r,i,o,a,u=!1){super(e,t,a.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=u,this.timings={duration:a.duration,delay:a.delay,easing:a.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const o=[],a=r+t,u=t/a,h=Ju(e[0]);h.set("offset",0),o.push(h);const m=Ju(e[0]);m.set("offset",iV(u)),o.push(m);const v=e.length-1;for(let x=1;x<=v;x++){let k=Ju(e[x]);const F=k.get("offset");k.set("offset",iV((t+F*r)/a)),o.push(k)}r=a,t=0,i="",e=o}return L1(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function iV(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class V1{}const jJ=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class UJ extends V1{normalizePropertyName(e,t){return R1(e)}normalizeStyleValue(e,t,r,i){let o="";const a=r.toString().trim();if(jJ.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)o="px";else{const u=r.match(/^[+-]?[\d\.]+([a-z]*)$/);u&&0==u[1].length&&i.push(function RQ(n,e){return new Ye(3005,!1)}())}return a+o}}function oV(n,e,t,r,i,o,a,u,h,m,v,x,k){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:o,toState:r,toStyles:a,timelines:u,queriedElements:h,preStyleProps:m,postStyleProps:v,totalTime:x,errors:k}}const H1={};class sV{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function GJ(n,e,t,r,i){return n.some(o=>o(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,o,a,u,h,m,v){const x=[],k=this.ast.options&&this.ast.options.params||H1,Y=this.buildStyles(r,u&&u.params||H1,x),ie=h&&h.params||H1,me=this.buildStyles(i,ie,x),Oe=new Set,Ke=new Map,Ge=new Map,ot="void"===i,wt={params:$J(ie,k),delay:this.ast.options?.delay},Et=v?[]:F1(e,t,this.ast.animation,o,a,Y,me,wt,m,x);let Kt=0;if(Et.forEach(Cn=>{Kt=Math.max(Cn.duration+Cn.delay,Kt)}),x.length)return oV(t,this._triggerName,r,i,ot,Y,me,[],[],Ke,Ge,Kt,x);Et.forEach(Cn=>{const Mn=Cn.element,Nr=Js(Ke,Mn,new Set);Cn.preStyleProps.forEach(si=>Nr.add(si));const Zr=Js(Ge,Mn,new Set);Cn.postStyleProps.forEach(si=>Zr.add(si)),Mn!==t&&Oe.add(Mn)});const sr=Jw(Oe.values());return oV(t,this._triggerName,r,i,ot,Y,me,Et,sr,Ke,Ge,Kt)}}function $J(n,e){const t=_v(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class WJ{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=_v(this.defaultParams);return Object.keys(e).forEach(o=>{const a=e[o];null!==a&&(i[o]=a)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,u)=>{a&&(a=Ev(a,i,t));const h=this.normalizer.normalizePropertyName(u,t);a=this.normalizer.normalizeStyleValue(u,h,a,t),r.set(u,a)})}),r}}class YJ{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new WJ(i.style,i.options&&i.options.params||{},r))}),aV(this.states,"true","1"),aV(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new sV(e,i,this.states))}),this.fallbackTransition=function XJ(n,e,t){return new sV(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(a,u)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(a=>a.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function aV(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const KJ=new o_;class ZJ{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],o=P1(this._driver,t,r,[]);if(r.length)throw function ZQ(n){return new Ye(3503,!1)}();this._animations.set(e,o)}_buildPlayer(e,t,r){const i=e.element,o=VB(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],o=this._animations.get(e);let a;const u=new Map;if(o?(a=F1(this._driver,t,o,T1,Xw,new Map,new Map,r,KJ,i),a.forEach(v=>{const x=Js(u,v.element,new Map);v.postStyleProps.forEach(k=>x.set(k,null))})):(i.push(function QQ(){return new Ye(3300,!1)}()),a=[]),i.length)throw function JQ(n){return new Ye(3504,!1)}();u.forEach((v,x)=>{v.forEach((k,F)=>{v.set(F,this._driver.computeStyle(x,F,Hc))})});const m=Qu(a.map(v=>{const x=u.get(v.element);return this._buildPlayer(v,new Map,x)}));return this._playersById.set(e,m),m.onDestroy(()=>this.destroy(e)),this.players.push(m),m}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function eJ(n){return new Ye(3301,!1)}();return t}listen(e,t,r,i){const o=C1(t,"","","");return E1(this._getPlayer(e),r,o,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const o=this._getPlayer(e);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const lV="ng-animate-queued",z1="ng-animate-disabled",nee=[],cV={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},ree={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},xa="__ng_removed";class j1{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function aee(n){return n??null}(r?e.value:e),r){const o=_v(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Dv="void",U1=new j1(Dv);class iee{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ea(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function tJ(n,e){return new Ye(3302,!1)}();if(null==r||0==r.length)throw function nJ(n){return new Ye(3303,!1)}();if(!function lee(n){return"start"==n||"done"==n}(r))throw function rJ(n,e){return new Ye(3400,!1)}();const o=Js(this._elementListeners,e,[]),a={name:t,phase:r,callback:i};o.push(a);const u=Js(this._engine.statesByElement,e,new Map);return u.has(t)||(Ea(e,Kw),Ea(e,Kw+"-"+t),u.set(t,U1)),()=>{this._engine.afterFlush(()=>{const h=o.indexOf(a);h>=0&&o.splice(h,1),this._triggers.has(t)||u.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function iJ(n){return new Ye(3401,!1)}();return t}trigger(e,t,r,i=!0){const o=this._getTrigger(t),a=new G1(this.id,t,e);let u=this._engine.statesByElement.get(e);u||(Ea(e,Kw),Ea(e,Kw+"-"+t),this._engine.statesByElement.set(e,u=new Map));let h=u.get(t);const m=new j1(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&h&&m.absorbOptions(h.options),u.set(t,m),h||(h=U1),m.value!==Dv&&h.value===m.value){if(!function dee(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const o=t[i];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}(h.params,m.params)){const ie=[],me=o.matchStyles(h.value,h.params,ie),Oe=o.matchStyles(m.value,m.params,ie);ie.length?this._engine.reportError(ie):this._engine.afterFlush(()=>{kh(e,me),tc(e,Oe)})}return}const k=Js(this._engine.playersByElement,e,[]);k.forEach(ie=>{ie.namespaceId==this.id&&ie.triggerName==t&&ie.queued&&ie.destroy()});let F=o.matchTransition(h.value,m.value,e,m.params),Y=!1;if(!F){if(!i)return;F=o.fallbackTransition,Y=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:F,fromState:h,toState:m,player:a,isFallbackTransition:Y}),Y||(Ea(e,lV),a.onStart(()=>{Ap(e,lV)})),a.onDone(()=>{let ie=this.players.indexOf(a);ie>=0&&this.players.splice(ie,1);const me=this._engine.playersByElement.get(e);if(me){let Oe=me.indexOf(a);Oe>=0&&me.splice(Oe,1)}}),this.players.push(a),k.push(a),a}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,Zw,!0);r.forEach(i=>{if(i[xa])return;const o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(a=>a.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const o=this._engine.statesByElement.get(e),a=new Map;if(o){const u=[];if(o.forEach((h,m)=>{if(a.set(m,h.value),this._triggers.has(m)){const v=this.trigger(e,m,Dv,i);v&&u.push(v)}}),u.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,a),r&&Qu(u).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(o=>{const a=o.name;if(i.has(a))return;i.add(a);const h=this._triggers.get(a).fallbackTransition,m=r.get(a)||U1,v=new j1(Dv),x=new G1(this.id,a,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:a,transition:h,fromState:m,toState:v,player:x,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const o=r.players.length?r.playersByQueriedElement.get(e):[];if(o&&o.length)i=!0;else{let a=e;for(;a=a.parentNode;)if(r.statesByElement.get(a)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const o=e[xa];(!o||o===cV)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Ea(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const o=r.element,a=this._elementListeners.get(o);a&&a.forEach(u=>{if(u.name==r.triggerName){const h=C1(o,r.triggerName,r.fromState.value,r.toState.value);h._data=e,E1(r.player,u.phase,h,u.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const o=r.transition.ast.depCount,a=i.transition.ast.depCount;return 0==o||0==a?o-a:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class oee{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,o)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new iee(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let a=!1,u=this.driver.getParentElement(t);for(;u;){const h=i.get(u);if(h){const m=r.indexOf(h);r.splice(m+1,0,e),a=!0;break}u=this.driver.getParentElement(u)}a||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const o=this._fetchNamespace(i.namespaceId);o&&t.add(o)}return t}trigger(e,t,r,i){if(l_(t)){const o=this._fetchNamespace(e);if(o)return o.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!l_(t))return;const o=t[xa];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const a=this.collectedLeaveElements.indexOf(t);a>=0&&this.collectedLeaveElements.splice(a,1)}if(e){const a=this._fetchNamespace(e);a&&a.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ea(e,z1)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Ap(e,z1))}removeNode(e,t,r,i){if(l_(t)){const o=e?this._fetchNamespace(e):null;if(o?o.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const a=this.namespacesByHostElement.get(t);a&&a.id!==e&&a.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,o){this.collectedLeaveElements.push(t),t[xa]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,r,i,o){return l_(t)?this._fetchNamespace(e).listen(t,r,i,o):()=>{}}_buildInstruction(e,t,r,i,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,Zw,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,k1,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Qu(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[xa];if(t&&t.setForRemoval){if(e[xa]=cV,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(z1)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ea(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Qu(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function oJ(n){return new Ye(3402,!1)}()}_flushAnimations(e,t){const r=new o_,i=[],o=new Map,a=[],u=new Map,h=new Map,m=new Map,v=new Set;this.disabledNodes.forEach(Ut=>{v.add(Ut);const sn=this.driver.query(Ut,".ng-animate-queued",!0);for(let an=0;an<sn.length;an++)v.add(sn[an])});const x=this.bodyNode,k=Array.from(this.statesByElement.keys()),F=hV(k,this.collectedEnterElements),Y=new Map;let ie=0;F.forEach((Ut,sn)=>{const an=T1+ie++;Y.set(sn,an),Ut.forEach(vn=>Ea(vn,an))});const me=[],Oe=new Set,Ke=new Set;for(let Ut=0;Ut<this.collectedLeaveElements.length;Ut++){const sn=this.collectedLeaveElements[Ut],an=sn[xa];an&&an.setForRemoval&&(me.push(sn),Oe.add(sn),an.hasAnimation?this.driver.query(sn,".ng-star-inserted",!0).forEach(vn=>Oe.add(vn)):Ke.add(sn))}const Ge=new Map,ot=hV(k,Array.from(Oe));ot.forEach((Ut,sn)=>{const an=Xw+ie++;Ge.set(sn,an),Ut.forEach(vn=>Ea(vn,an))}),e.push(()=>{F.forEach((Ut,sn)=>{const an=Y.get(sn);Ut.forEach(vn=>Ap(vn,an))}),ot.forEach((Ut,sn)=>{const an=Ge.get(sn);Ut.forEach(vn=>Ap(vn,an))}),me.forEach(Ut=>{this.processLeaveNode(Ut)})});const wt=[],Et=[];for(let Ut=this._namespaceList.length-1;Ut>=0;Ut--)this._namespaceList[Ut].drainQueuedTransitions(t).forEach(an=>{const vn=an.player,Jn=an.element;if(wt.push(vn),this.collectedEnterElements.length){const qo=Jn[xa];if(qo&&qo.setForMove){if(qo.previousTriggersValues&&qo.previousTriggersValues.has(an.triggerName)){const Oh=qo.previousTriggersValues.get(an.triggerName),Da=this.statesByElement.get(an.element);if(Da&&Da.has(an.triggerName)){const d_=Da.get(an.triggerName);d_.value=Oh,Da.set(an.triggerName,d_)}}return void vn.destroy()}}const ao=!x||!this.driver.containsElement(x,Jn),Hi=Ge.get(Jn),ta=Y.get(Jn),Wr=this._buildInstruction(an,r,ta,Hi,ao);if(Wr.errors&&Wr.errors.length)return void Et.push(Wr);if(ao)return vn.onStart(()=>kh(Jn,Wr.fromStyles)),vn.onDestroy(()=>tc(Jn,Wr.toStyles)),void i.push(vn);if(an.isFallbackTransition)return vn.onStart(()=>kh(Jn,Wr.fromStyles)),vn.onDestroy(()=>tc(Jn,Wr.toStyles)),void i.push(vn);const wV=[];Wr.timelines.forEach(qo=>{qo.stretchStartingKeyframe=!0,this.disabledNodes.has(qo.element)||wV.push(qo)}),Wr.timelines=wV,r.append(Jn,Wr.timelines),a.push({instruction:Wr,player:vn,element:Jn}),Wr.queriedElements.forEach(qo=>Js(u,qo,[]).push(vn)),Wr.preStyleProps.forEach((qo,Oh)=>{if(qo.size){let Da=h.get(Oh);Da||h.set(Oh,Da=new Set),qo.forEach((d_,W1)=>Da.add(W1))}}),Wr.postStyleProps.forEach((qo,Oh)=>{let Da=m.get(Oh);Da||m.set(Oh,Da=new Set),qo.forEach((d_,W1)=>Da.add(W1))})});if(Et.length){const Ut=[];Et.forEach(sn=>{Ut.push(function sJ(n,e){return new Ye(3505,!1)}())}),wt.forEach(sn=>sn.destroy()),this.reportError(Ut)}const Kt=new Map,sr=new Map;a.forEach(Ut=>{const sn=Ut.element;r.has(sn)&&(sr.set(sn,sn),this._beforeAnimationBuild(Ut.player.namespaceId,Ut.instruction,Kt))}),i.forEach(Ut=>{const sn=Ut.element;this._getPreviousPlayers(sn,!1,Ut.namespaceId,Ut.triggerName,null).forEach(vn=>{Js(Kt,sn,[]).push(vn),vn.destroy()})});const Cn=me.filter(Ut=>pV(Ut,h,m)),Mn=new Map;dV(Mn,this.driver,Ke,m,Hc).forEach(Ut=>{pV(Ut,h,m)&&Cn.push(Ut)});const Zr=new Map;F.forEach((Ut,sn)=>{dV(Zr,this.driver,new Set(Ut),h,"!")}),Cn.forEach(Ut=>{const sn=Mn.get(Ut),an=Zr.get(Ut);Mn.set(Ut,new Map([...Array.from(sn?.entries()??[]),...Array.from(an?.entries()??[])]))});const si=[],Mo=[],Vi={};a.forEach(Ut=>{const{element:sn,player:an,instruction:vn}=Ut;if(r.has(sn)){if(v.has(sn))return an.onDestroy(()=>tc(sn,vn.toStyles)),an.disabled=!0,an.overrideTotalTime(vn.totalTime),void i.push(an);let Jn=Vi;if(sr.size>1){let Hi=sn;const ta=[];for(;Hi=Hi.parentNode;){const Wr=sr.get(Hi);if(Wr){Jn=Wr;break}ta.push(Hi)}ta.forEach(Wr=>sr.set(Wr,Jn))}const ao=this._buildAnimation(an.namespaceId,vn,Kt,o,Zr,Mn);if(an.setRealPlayer(ao),Jn===Vi)si.push(an);else{const Hi=this.playersByElement.get(Jn);Hi&&Hi.length&&(an.parentPlayer=Qu(Hi)),i.push(an)}}else kh(sn,vn.fromStyles),an.onDestroy(()=>tc(sn,vn.toStyles)),Mo.push(an),v.has(sn)&&i.push(an)}),Mo.forEach(Ut=>{const sn=o.get(Ut.element);if(sn&&sn.length){const an=Qu(sn);Ut.setRealPlayer(an)}}),i.forEach(Ut=>{Ut.parentPlayer?Ut.syncPlayerEvents(Ut.parentPlayer):Ut.destroy()});for(let Ut=0;Ut<me.length;Ut++){const sn=me[Ut],an=sn[xa];if(Ap(sn,Xw),an&&an.hasAnimation)continue;let vn=[];if(u.size){let ao=u.get(sn);ao&&ao.length&&vn.push(...ao);let Hi=this.driver.query(sn,k1,!0);for(let ta=0;ta<Hi.length;ta++){let Wr=u.get(Hi[ta]);Wr&&Wr.length&&vn.push(...Wr)}}const Jn=vn.filter(ao=>!ao.destroyed);Jn.length?cee(this,sn,Jn):this.processLeaveNode(sn)}return me.length=0,si.forEach(Ut=>{this.players.push(Ut),Ut.onDone(()=>{Ut.destroy();const sn=this.players.indexOf(Ut);this.players.splice(sn,1)}),Ut.play()}),si}elementContainsData(e,t){let r=!1;const i=t[xa];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,o){let a=[];if(t){const u=this.playersByQueriedElement.get(e);u&&(a=u)}else{const u=this.playersByElement.get(e);if(u){const h=!o||o==Dv;u.forEach(m=>{m.queued||!h&&m.triggerName!=i||a.push(m)})}}return(r||i)&&(a=a.filter(u=>!(r&&r!=u.namespaceId||i&&i!=u.triggerName))),a}_beforeAnimationBuild(e,t,r){const o=t.element,a=t.isRemovalTransition?void 0:e,u=t.isRemovalTransition?void 0:t.triggerName;for(const h of t.timelines){const m=h.element,v=m!==o,x=Js(r,m,[]);this._getPreviousPlayers(m,v,a,u,t.toState).forEach(F=>{const Y=F.getRealPlayer();Y.beforeDestroy&&Y.beforeDestroy(),F.destroy(),x.push(F)})}kh(o,t.fromStyles)}_buildAnimation(e,t,r,i,o,a){const u=t.triggerName,h=t.element,m=[],v=new Set,x=new Set,k=t.timelines.map(Y=>{const ie=Y.element;v.add(ie);const me=ie[xa];if(me&&me.removedBeforeQueried)return new mv(Y.duration,Y.delay);const Oe=ie!==h,Ke=function uee(n){const e=[];return fV(n,e),e}((r.get(ie)||nee).map(Kt=>Kt.getRealPlayer())).filter(Kt=>!!Kt.element&&Kt.element===ie),Ge=o.get(ie),ot=a.get(ie),wt=VB(0,this._normalizer,0,Y.keyframes,Ge,ot),Et=this._buildPlayer(Y,wt,Ke);if(Y.subTimeline&&i&&x.add(ie),Oe){const Kt=new G1(e,u,ie);Kt.setRealPlayer(Et),m.push(Kt)}return Et});m.forEach(Y=>{Js(this.playersByQueriedElement,Y.element,[]).push(Y),Y.onDone(()=>function see(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,Y.element,Y))}),v.forEach(Y=>Ea(Y,YB));const F=Qu(k);return F.onDestroy(()=>{v.forEach(Y=>Ap(Y,YB)),tc(h,t.toStyles)}),x.forEach(Y=>{Js(i,Y,[]).push(F)}),F}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new mv(e.duration,e.delay)}}class G1{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new mv,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>E1(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Js(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function l_(n){return n&&1===n.nodeType}function uV(n,e){const t=n.style.display;return n.style.display=e??"none",t}function dV(n,e,t,r,i){const o=[];t.forEach(h=>o.push(uV(h)));const a=[];r.forEach((h,m)=>{const v=new Map;h.forEach(x=>{const k=e.computeStyle(m,x,i);v.set(x,k),(!k||0==k.length)&&(m[xa]=ree,a.push(m))}),n.set(m,v)});let u=0;return t.forEach(h=>uV(h,o[u++])),a}function hV(n,e){const t=new Map;if(n.forEach(u=>t.set(u,[])),0==e.length)return t;const i=new Set(e),o=new Map;function a(u){if(!u)return 1;let h=o.get(u);if(h)return h;const m=u.parentNode;return h=t.has(m)?m:i.has(m)?1:a(m),o.set(u,h),h}return e.forEach(u=>{const h=a(u);1!==h&&t.get(h).push(u)}),t}function Ea(n,e){n.classList?.add(e)}function Ap(n,e){n.classList?.remove(e)}function cee(n,e,t){Qu(t).onDone(()=>n.processLeaveNode(e))}function fV(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof hB?fV(r.players,e):e.push(r)}}function pV(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(o=>i.add(o)):e.set(n,r),t.delete(n),!0}class c_{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,o)=>{},this._transitionEngine=new oee(e,t,r),this._timelineEngine=new ZJ(e,t,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(e,t,r,i,o){const a=e+"-"+i;let u=this._triggerCache[a];if(!u){const h=[],v=P1(this._driver,o,h,[]);if(h.length)throw function XQ(n,e){return new Ye(3404,!1)}();u=function qJ(n,e,t){return new YJ(n,e,t)}(i,v,this._normalizer),this._triggerCache[a]=u}this._transitionEngine.registerTrigger(t,i,u)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[o,a]=HB(r);this._timelineEngine.command(o,t,a,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,o){if("@"==r.charAt(0)){const[a,u]=HB(r);return this._timelineEngine.listen(a,t,u,o)}return this._transitionEngine.listen(e,t,r,i,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let fee=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&tc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(tc(this._element,this._initialStyles),this._endStyles&&(tc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(kh(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(kh(this._element,this._endStyles),this._endStyles=null),tc(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function $1(n){let e=null;return n.forEach((t,r)=>{(function pee(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class gV{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:eV(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class gee{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return GB(e,t)}getParentElement(e){return M1(e)}query(e,t,r){return $B(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,o,a=[]){const h={duration:r,delay:i,fill:0==i?"both":"forwards"};o&&(h.easing=o);const m=new Map,v=a.filter(F=>F instanceof gV);(function bJ(n,e){return 0===n||0===e})(r,i)&&v.forEach(F=>{F.currentSnapshot.forEach((Y,ie)=>m.set(ie,Y))});let x=function gJ(n){return n.length?n[0]instanceof Map?n:n.map(e=>XB(e)):[]}(t).map(F=>Ju(F));x=function wJ(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((o,a)=>{r.has(a)||i.push(a),r.set(a,o)}),i.length)for(let o=1;o<e.length;o++){let a=e[o];i.forEach(u=>a.set(u,eV(n,u)))}}return e}(e,x,m);const k=function hee(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=$1(e[0]),e.length>1&&(r=$1(e[e.length-1]))):e instanceof Map&&(t=$1(e)),t||r?new fee(n,t,r):null}(e,x);return new gV(e,x,h,k)}}let mee=(()=>{class n extends lB{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:Ns.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?cB(t):t;return mV(this._renderer,null,r,"register",[i]),new vee(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(St(Yd),St(or))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})();class vee extends JK{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new yee(this._id,e,t||{},this._renderer)}}class yee{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return mV(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function mV(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const vV="@.disabled";let bee=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(o,a)=>{const u=a?.parentNode(o);u&&a.removeChild(u,o)}}createRenderer(t,r){const o=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let v=this._rendererCache.get(o);return v||(v=new yV("",o,this.engine,()=>this._rendererCache.delete(o)),this._rendererCache.set(o,v)),v}const a=r.id,u=r.id+"-"+this._currentId;this._currentId++,this.engine.register(u,t);const h=v=>{Array.isArray(v)?v.forEach(h):this.engine.registerTrigger(a,u,t,v.name,v)};return r.data.animation.forEach(h),new wee(this,u,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[a,u]=o;a(u)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(St(Yd),St(c_),St(Kn))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})();class yV{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?o=>t.destroyNode(o):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==vV?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class wee extends yV{constructor(e,t,r,i,o){super(t,r,i,o),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==vV?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function _ee(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let o=t.slice(1),a="";return"@"!=o.charAt(0)&&([o,a]=function xee(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(o)),this.engine.listen(this.namespaceId,i,o,a,u=>{this.factory.scheduleListenerCallback(u._data||-1,r,u)})}return this.delegate.listen(e,t,r)}}const See=[{provide:A1,useFactory:()=>new gee},{provide:Ic,useValue:"BrowserAnimations"},...[{provide:lB,useClass:mee},{provide:V1,useFactory:function Dee(){return new UJ}},{provide:c_,useClass:(()=>{class n extends c_{constructor(t,r,i,o){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(St(or),St(A1),St(V1),St(Jg))},n.\u0275prov=nn({token:n,factory:n.\u0275fac}),n})()},{provide:Yd,useFactory:function Cee(n,e,t){return new bee(n,e,t)},deps:[V0,c_,Kn]}]];(function WU(n,e){return hj({rootComponent:n,..._I(e)})})(wv,{providers:function Aee(){return[...See]}()}).catch(n=>console.error(n))},7352:(Pe,Ne,$)=>{"use strict";$.r(Ne),$.d(Ne,{afterMain:()=>de,afterRead:()=>ce,afterWrite:()=>V,applyStyles:()=>ze,arrow:()=>ai,auto:()=>P,basePlacements:()=>D,beforeMain:()=>ee,beforeRead:()=>ae,beforeWrite:()=>U,bottom:()=>N,clippingParents:()=>z,computeStyles:()=>Io,createPopper:()=>ka,createPopperBase:()=>hl,createPopperLite:()=>yr,detectOverflow:()=>gs,end:()=>M,eventListeners:()=>fs,flip:()=>Nh,hide:()=>Uc,left:()=>C,main:()=>Re,modifierPhases:()=>J,offset:()=>Ta,placements:()=>q,popper:()=>K,popperGenerator:()=>co,popperOffsets:()=>Sr,preventOverflow:()=>id,read:()=>Q,reference:()=>te,right:()=>I,start:()=>T,top:()=>G,variationPlacements:()=>j,viewport:()=>B,write:()=>L});var G="top",N="bottom",I="right",C="left",P="auto",D=[G,N,I,C],T="start",M="end",z="clippingParents",B="viewport",K="popper",te="reference",j=D.reduce(function(Me,we){return Me.concat([we+"-"+T,we+"-"+M])},[]),q=[].concat(D,[P]).reduce(function(Me,we){return Me.concat([we,we+"-"+T,we+"-"+M])},[]),ae="beforeRead",Q="read",ce="afterRead",ee="beforeMain",Re="main",de="afterMain",U="beforeWrite",L="write",V="afterWrite",J=[ae,Q,ce,ee,Re,de,U,L,V];function ue(Me){return Me?(Me.nodeName||"").toLowerCase():null}function ve(Me){if(null==Me)return window;if("[object Window]"!==Me.toString()){var we=Me.ownerDocument;return we&&we.defaultView||window}return Me}function oe(Me){return Me instanceof ve(Me).Element||Me instanceof Element}function xe(Me){return Me instanceof ve(Me).HTMLElement||Me instanceof HTMLElement}function Le(Me){return!(typeof ShadowRoot>"u")&&(Me instanceof ve(Me).ShadowRoot||Me instanceof ShadowRoot)}const ze={name:"applyStyles",enabled:!0,phase:"write",fn:function ye(Me){var we=Me.state;Object.keys(we.elements).forEach(function(Ue){var bt=we.styles[Ue]||{},lt=we.attributes[Ue]||{},dt=we.elements[Ue];!xe(dt)||!ue(dt)||(Object.assign(dt.style,bt),Object.keys(lt).forEach(function(Jt){var Bt=lt[Jt];!1===Bt?dt.removeAttribute(Jt):dt.setAttribute(Jt,!0===Bt?"":Bt)}))})},effect:function qe(Me){var we=Me.state,Ue={popper:{position:we.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(we.elements.popper.style,Ue.popper),we.styles=Ue,we.elements.arrow&&Object.assign(we.elements.arrow.style,Ue.arrow),function(){Object.keys(we.elements).forEach(function(bt){var lt=we.elements[bt],dt=we.attributes[bt]||{},Bt=Object.keys(we.styles.hasOwnProperty(bt)?we.styles[bt]:Ue[bt]).reduce(function(zt,gn){return zt[gn]="",zt},{});!xe(lt)||!ue(lt)||(Object.assign(lt.style,Bt),Object.keys(dt).forEach(function(zt){lt.removeAttribute(zt)}))})}},requires:["computeStyles"]};function ke(Me){return Me.split("-")[0]}var be=Math.max,pe=Math.min,nt=Math.round;function We(){var Me=navigator.userAgentData;return null!=Me&&Me.brands?Me.brands.map(function(we){return we.brand+"/"+we.version}).join(" "):navigator.userAgent}function Ie(){return!/^((?!chrome|android).)*safari/i.test(We())}function Je(Me,we,Ue){void 0===we&&(we=!1),void 0===Ue&&(Ue=!1);var bt=Me.getBoundingClientRect(),lt=1,dt=1;we&&xe(Me)&&(lt=Me.offsetWidth>0&&nt(bt.width)/Me.offsetWidth||1,dt=Me.offsetHeight>0&&nt(bt.height)/Me.offsetHeight||1);var Bt=(oe(Me)?ve(Me):window).visualViewport,zt=!Ie()&&Ue,gn=(bt.left+(zt&&Bt?Bt.offsetLeft:0))/lt,Ye=(bt.top+(zt&&Bt?Bt.offsetTop:0))/dt,er=bt.width/lt,Wt=bt.height/dt;return{width:er,height:Wt,top:Ye,right:gn+er,bottom:Ye+Wt,left:gn,x:gn,y:Ye}}function Pt(Me){var we=Je(Me),Ue=Me.offsetWidth,bt=Me.offsetHeight;return Math.abs(we.width-Ue)<=1&&(Ue=we.width),Math.abs(we.height-bt)<=1&&(bt=we.height),{x:Me.offsetLeft,y:Me.offsetTop,width:Ue,height:bt}}function pt(Me,we){var Ue=we.getRootNode&&we.getRootNode();if(Me.contains(we))return!0;if(Ue&&Le(Ue)){var bt=we;do{if(bt&&Me.isSameNode(bt))return!0;bt=bt.parentNode||bt.host}while(bt)}return!1}function at(Me){return ve(Me).getComputedStyle(Me)}function ut(Me){return["table","td","th"].indexOf(ue(Me))>=0}function $e(Me){return((oe(Me)?Me.ownerDocument:Me.document)||window.document).documentElement}function Ee(Me){return"html"===ue(Me)?Me:Me.assignedSlot||Me.parentNode||(Le(Me)?Me.host:null)||$e(Me)}function Be(Me){return xe(Me)&&"fixed"!==at(Me).position?Me.offsetParent:null}function kt(Me){for(var we=ve(Me),Ue=Be(Me);Ue&&ut(Ue)&&"static"===at(Ue).position;)Ue=Be(Ue);return Ue&&("html"===ue(Ue)||"body"===ue(Ue)&&"static"===at(Ue).position)?we:Ue||function ht(Me){var we=/firefox/i.test(We());if(/Trident/i.test(We())&&xe(Me)&&"fixed"===at(Me).position)return null;var lt=Ee(Me);for(Le(lt)&&(lt=lt.host);xe(lt)&&["html","body"].indexOf(ue(lt))<0;){var dt=at(lt);if("none"!==dt.transform||"none"!==dt.perspective||"paint"===dt.contain||-1!==["transform","perspective"].indexOf(dt.willChange)||we&&"filter"===dt.willChange||we&&dt.filter&&"none"!==dt.filter)return lt;lt=lt.parentNode}return null}(Me)||we}function ft(Me){return["top","bottom"].indexOf(Me)>=0?"x":"y"}function Nt(Me,we,Ue){return be(Me,pe(we,Ue))}function on(Me){return Object.assign({},{top:0,right:0,bottom:0,left:0},Me)}function hn(Me,we){return we.reduce(function(Ue,bt){return Ue[bt]=Me,Ue},{})}const ai={name:"arrow",enabled:!0,phase:"main",fn:function _r(Me){var we,Ue=Me.state,bt=Me.name,lt=Me.options,dt=Ue.elements.arrow,Jt=Ue.modifiersData.popperOffsets,Bt=ke(Ue.placement),zt=ft(Bt),Ye=[C,I].indexOf(Bt)>=0?"height":"width";if(dt&&Jt){var er=function(we,Ue){return on("number"!=typeof(we="function"==typeof we?we(Object.assign({},Ue.rects,{placement:Ue.placement})):we)?we:hn(we,D))}(lt.padding,Ue),Wt=Pt(dt),qt="y"===zt?G:C,Ir="y"===zt?N:I,Wn=Ue.rects.reference[Ye]+Ue.rects.reference[zt]-Jt[zt]-Ue.rects.popper[Ye],qn=Jt[zt]-Ue.rects.reference[zt],Yn=kt(dt),Xn=Yn?"y"===zt?Yn.clientHeight||0:Yn.clientWidth||0:0,Ln=Xn/2-Wt[Ye]/2+(Wn/2-qn/2),Ar=Nt(er[qt],Ln,Xn-Wt[Ye]-er[Ir]);Ue.modifiersData[bt]=((we={})[zt]=Ar,we.centerOffset=Ar-Ln,we)}},effect:function vr(Me){var we=Me.state,bt=Me.options.element,lt=void 0===bt?"[data-popper-arrow]":bt;null!=lt&&("string"==typeof lt&&!(lt=we.elements.popper.querySelector(lt))||pt(we.elements.popper,lt)&&(we.elements.arrow=lt))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function vi(Me){return Me.split("-")[1]}var Ao={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ko(Me){var we,Ue=Me.popper,bt=Me.popperRect,lt=Me.placement,dt=Me.variation,Jt=Me.offsets,Bt=Me.position,zt=Me.gpuAcceleration,gn=Me.adaptive,Ye=Me.roundOffsets,er=Me.isFixed,Wt=Jt.x,qt=void 0===Wt?0:Wt,Ir=Jt.y,Wn=void 0===Ir?0:Ir,qn="function"==typeof Ye?Ye({x:qt,y:Wn}):{x:qt,y:Wn};qt=qn.x,Wn=qn.y;var Yn=Jt.hasOwnProperty("x"),Xn=Jt.hasOwnProperty("y"),Qr=C,ar=G,pr=window;if(gn){var Ln=kt(Ue),Ar="clientHeight",Jr="clientWidth";Ln===ve(Ue)&&"static"!==at(Ln=$e(Ue)).position&&"absolute"===Bt&&(Ar="scrollHeight",Jr="scrollWidth"),(lt===G||(lt===C||lt===I)&&dt===M)&&(ar=N,Wn-=(er&&Ln===pr&&pr.visualViewport?pr.visualViewport.height:Ln[Ar])-bt.height,Wn*=zt?1:-1),lt!==C&&(lt!==G&&lt!==N||dt!==M)||(Qr=I,qt-=(er&&Ln===pr&&pr.visualViewport?pr.visualViewport.width:Ln[Jr])-bt.width,qt*=zt?1:-1)}var tr,xr=Object.assign({position:Bt},gn&&Ao),bs=!0===Ye?function To(Me){var Ue=Me.y,lt=window.devicePixelRatio||1;return{x:nt(Me.x*lt)/lt||0,y:nt(Ue*lt)/lt||0}}({x:qt,y:Wn}):{x:qt,y:Wn};return qt=bs.x,Wn=bs.y,Object.assign({},xr,zt?((tr={})[ar]=Xn?"0":"",tr[Qr]=Yn?"0":"",tr.transform=(pr.devicePixelRatio||1)<=1?"translate("+qt+"px, "+Wn+"px)":"translate3d("+qt+"px, "+Wn+"px, 0)",tr):((we={})[ar]=Xn?Wn+"px":"",we[Qr]=Yn?qt+"px":"",we.transform="",we))}const Io={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function Zt(Me){var we=Me.state,Ue=Me.options,bt=Ue.gpuAcceleration,lt=void 0===bt||bt,dt=Ue.adaptive,Jt=void 0===dt||dt,Bt=Ue.roundOffsets,zt=void 0===Bt||Bt,Ye={placement:ke(we.placement),variation:vi(we.placement),popper:we.elements.popper,popperRect:we.rects.popper,gpuAcceleration:lt,isFixed:"fixed"===we.options.strategy};null!=we.modifiersData.popperOffsets&&(we.styles.popper=Object.assign({},we.styles.popper,ko(Object.assign({},Ye,{offsets:we.modifiersData.popperOffsets,position:we.options.strategy,adaptive:Jt,roundOffsets:zt})))),null!=we.modifiersData.arrow&&(we.styles.arrow=Object.assign({},we.styles.arrow,ko(Object.assign({},Ye,{offsets:we.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:zt})))),we.attributes.popper=Object.assign({},we.attributes.popper,{"data-popper-placement":we.placement})},data:{}};var jn={passive:!0};const fs={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function ed(Me){var we=Me.state,Ue=Me.instance,bt=Me.options,lt=bt.scroll,dt=void 0===lt||lt,Jt=bt.resize,Bt=void 0===Jt||Jt,zt=ve(we.elements.popper),gn=[].concat(we.scrollParents.reference,we.scrollParents.popper);return dt&&gn.forEach(function(Ye){Ye.addEventListener("scroll",Ue.update,jn)}),Bt&&zt.addEventListener("resize",Ue.update,jn),function(){dt&&gn.forEach(function(Ye){Ye.removeEventListener("scroll",Ue.update,jn)}),Bt&&zt.removeEventListener("resize",Ue.update,jn)}},data:{}};var Ca={left:"right",right:"left",bottom:"top",top:"bottom"};function nc(Me){return Me.replace(/left|right|bottom|top/g,function(we){return Ca[we]})}var jc={start:"end",end:"start"};function al(Me){return Me.replace(/start|end/g,function(we){return jc[we]})}function ks(Me){var we=ve(Me);return{scrollLeft:we.pageXOffset,scrollTop:we.pageYOffset}}function Sa(Me){return Je($e(Me)).left+ks(Me).scrollLeft}function Si(Me){var we=at(Me);return/auto|scroll|overlay|hidden/.test(we.overflow+we.overflowY+we.overflowX)}function na(Me){return["html","body","#document"].indexOf(ue(Me))>=0?Me.ownerDocument.body:xe(Me)&&Si(Me)?Me:na(Ee(Me))}function Ma(Me,we){var Ue;void 0===we&&(we=[]);var bt=na(Me),lt=bt===(null==(Ue=Me.ownerDocument)?void 0:Ue.body),dt=ve(bt),Jt=lt?[dt].concat(dt.visualViewport||[],Si(bt)?bt:[]):bt,Bt=we.concat(Jt);return lt?Bt:Bt.concat(Ma(Ee(Jt)))}function ra(Me){return Object.assign({},Me,{left:Me.x,top:Me.y,right:Me.x+Me.width,bottom:Me.y+Me.height})}function cl(Me,we,Ue){return we===B?ra(function rc(Me,we){var Ue=ve(Me),bt=$e(Me),lt=Ue.visualViewport,dt=bt.clientWidth,Jt=bt.clientHeight,Bt=0,zt=0;if(lt){dt=lt.width,Jt=lt.height;var gn=Ie();(gn||!gn&&"fixed"===we)&&(Bt=lt.offsetLeft,zt=lt.offsetTop)}return{width:dt,height:Jt,x:Bt+Sa(Me),y:zt}}(Me,Ue)):oe(we)?function td(Me,we){var Ue=Je(Me,!1,"fixed"===we);return Ue.top=Ue.top+Me.clientTop,Ue.left=Ue.left+Me.clientLeft,Ue.bottom=Ue.top+Me.clientHeight,Ue.right=Ue.left+Me.clientWidth,Ue.width=Me.clientWidth,Ue.height=Me.clientHeight,Ue.x=Ue.left,Ue.y=Ue.top,Ue}(we,Ue):ra(function ll(Me){var we,Ue=$e(Me),bt=ks(Me),lt=null==(we=Me.ownerDocument)?void 0:we.body,dt=be(Ue.scrollWidth,Ue.clientWidth,lt?lt.scrollWidth:0,lt?lt.clientWidth:0),Jt=be(Ue.scrollHeight,Ue.clientHeight,lt?lt.scrollHeight:0,lt?lt.clientHeight:0),Bt=-bt.scrollLeft+Sa(Me),zt=-bt.scrollTop;return"rtl"===at(lt||Ue).direction&&(Bt+=be(Ue.clientWidth,lt?lt.clientWidth:0)-dt),{width:dt,height:Jt,x:Bt,y:zt}}($e(Me)))}function ps(Me){var zt,we=Me.reference,Ue=Me.element,bt=Me.placement,lt=bt?ke(bt):null,dt=bt?vi(bt):null,Jt=we.x+we.width/2-Ue.width/2,Bt=we.y+we.height/2-Ue.height/2;switch(lt){case G:zt={x:Jt,y:we.y-Ue.height};break;case N:zt={x:Jt,y:we.y+we.height};break;case I:zt={x:we.x+we.width,y:Bt};break;case C:zt={x:we.x-Ue.width,y:Bt};break;default:zt={x:we.x,y:we.y}}var gn=lt?ft(lt):null;if(null!=gn){var Ye="y"===gn?"height":"width";switch(dt){case T:zt[gn]=zt[gn]-(we[Ye]/2-Ue[Ye]/2);break;case M:zt[gn]=zt[gn]+(we[Ye]/2-Ue[Ye]/2)}}return zt}function gs(Me,we){void 0===we&&(we={});var bt=we.placement,lt=void 0===bt?Me.placement:bt,dt=we.strategy,Jt=void 0===dt?Me.strategy:dt,Bt=we.boundary,zt=void 0===Bt?z:Bt,gn=we.rootBoundary,Ye=void 0===gn?B:gn,er=we.elementContext,Wt=void 0===er?K:er,qt=we.altBoundary,Ir=void 0!==qt&&qt,Wn=we.padding,qn=void 0===Wn?0:Wn,Yn=on("number"!=typeof qn?qn:hn(qn,D)),Qr=Me.rects.popper,ar=Me.elements[Ir?Wt===K?te:K:Wt],pr=function Rh(Me,we,Ue,bt){var lt="clippingParents"===we?function ul(Me){var we=Ma(Ee(Me)),bt=["absolute","fixed"].indexOf(at(Me).position)>=0&&xe(Me)?kt(Me):Me;return oe(bt)?we.filter(function(lt){return oe(lt)&&pt(lt,bt)&&"body"!==ue(lt)}):[]}(Me):[].concat(we),dt=[].concat(lt,[Ue]),Bt=dt.reduce(function(zt,gn){var Ye=cl(Me,gn,bt);return zt.top=be(Ye.top,zt.top),zt.right=pe(Ye.right,zt.right),zt.bottom=pe(Ye.bottom,zt.bottom),zt.left=be(Ye.left,zt.left),zt},cl(Me,dt[0],bt));return Bt.width=Bt.right-Bt.left,Bt.height=Bt.bottom-Bt.top,Bt.x=Bt.left,Bt.y=Bt.top,Bt}(oe(ar)?ar:ar.contextElement||$e(Me.elements.popper),zt,Ye,Jt),Ln=Je(Me.elements.reference),Ar=ps({reference:Ln,element:Qr,strategy:"absolute",placement:lt}),Jr=ra(Object.assign({},Qr,Ar)),li=Wt===K?Jr:Ln,Or={top:pr.top-li.top+Yn.top,bottom:li.bottom-pr.bottom+Yn.bottom,left:pr.left-li.left+Yn.left,right:li.right-pr.right+Yn.right},xr=Me.modifiersData.offset;if(Wt===K&&xr){var bs=xr[lt];Object.keys(Or).forEach(function(tr){var Yo=[I,N].indexOf(tr)>=0?1:-1,bi=[G,N].indexOf(tr)>=0?"y":"x";Or[tr]+=bs[bi]*Yo})}return Or}const Nh={name:"flip",enabled:!0,phase:"main",fn:function Ph(Me){var we=Me.state,Ue=Me.options,bt=Me.name;if(!we.modifiersData[bt]._skip){for(var lt=Ue.mainAxis,dt=void 0===lt||lt,Jt=Ue.altAxis,Bt=void 0===Jt||Jt,zt=Ue.fallbackPlacements,gn=Ue.padding,Ye=Ue.boundary,er=Ue.rootBoundary,Wt=Ue.altBoundary,qt=Ue.flipVariations,Ir=void 0===qt||qt,Wn=Ue.allowedAutoPlacements,qn=we.options.placement,Yn=ke(qn),Qr=zt||(Yn!==qn&&Ir?function Aa(Me){if(ke(Me)===P)return[];var we=nc(Me);return[al(Me),we,al(we)]}(qn):[nc(qn)]),ar=[qn].concat(Qr).reduce(function(gl,Xo){return gl.concat(ke(Xo)===P?function lo(Me,we){void 0===we&&(we={});var lt=we.boundary,dt=we.rootBoundary,Jt=we.padding,Bt=we.flipVariations,zt=we.allowedAutoPlacements,gn=void 0===zt?q:zt,Ye=vi(we.placement),er=Ye?Bt?j:j.filter(function(Ir){return vi(Ir)===Ye}):D,Wt=er.filter(function(Ir){return gn.indexOf(Ir)>=0});0===Wt.length&&(Wt=er);var qt=Wt.reduce(function(Ir,Wn){return Ir[Wn]=gs(Me,{placement:Wn,boundary:lt,rootBoundary:dt,padding:Jt})[ke(Wn)],Ir},{});return Object.keys(qt).sort(function(Ir,Wn){return qt[Ir]-qt[Wn]})}(we,{placement:Xo,boundary:Ye,rootBoundary:er,padding:gn,flipVariations:Ir,allowedAutoPlacements:Wn}):Xo)},[]),pr=we.rects.reference,Ln=we.rects.popper,Ar=new Map,Jr=!0,li=ar[0],Or=0;Or<ar.length;Or++){var xr=ar[Or],bs=ke(xr),tr=vi(xr)===T,Yo=[G,N].indexOf(bs)>=0,bi=Yo?"width":"height",_n=gs(we,{placement:xr,boundary:Ye,rootBoundary:er,altBoundary:Wt,padding:gn}),Lr=Yo?tr?I:C:tr?N:G;pr[bi]>Ln[bi]&&(Lr=nc(Lr));var ad=nc(Lr),pl=[];if(dt&&pl.push(_n[bs]<=0),Bt&&pl.push(_n[Lr]<=0,_n[ad]<=0),pl.every(function(gl){return gl})){li=xr,Jr=!1;break}Ar.set(xr,pl)}if(Jr)for(var Vh=function(Xo){var ws=ar.find(function(Wc){var Os=Ar.get(Wc);if(Os)return Os.slice(0,Xo).every(function(Ia){return Ia})});if(ws)return li=ws,"break"},gr=Ir?3:1;gr>0&&"break"!==Vh(gr);gr--);we.placement!==li&&(we.modifiersData[bt]._skip=!0,we.placement=li,we.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function nd(Me,we,Ue){return void 0===Ue&&(Ue={x:0,y:0}),{top:Me.top-we.height-Ue.y,right:Me.right-we.width+Ue.x,bottom:Me.bottom-we.height+Ue.y,left:Me.left-we.width-Ue.x}}function rd(Me){return[G,I,N,C].some(function(we){return Me[we]>=0})}const Uc={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function Tp(Me){var we=Me.state,Ue=Me.name,bt=we.rects.reference,lt=we.rects.popper,dt=we.modifiersData.preventOverflow,Jt=gs(we,{elementContext:"reference"}),Bt=gs(we,{altBoundary:!0}),zt=nd(Jt,bt),gn=nd(Bt,lt,dt),Ye=rd(zt),er=rd(gn);we.modifiersData[Ue]={referenceClippingOffsets:zt,popperEscapeOffsets:gn,isReferenceHidden:Ye,hasPopperEscaped:er},we.attributes.popper=Object.assign({},we.attributes.popper,{"data-popper-reference-hidden":Ye,"data-popper-escaped":er})}},Ta={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function Gc(Me){var we=Me.state,bt=Me.name,lt=Me.options.offset,dt=void 0===lt?[0,0]:lt,Jt=q.reduce(function(Ye,er){return Ye[er]=function ms(Me,we,Ue){var bt=ke(Me),lt=[C,G].indexOf(bt)>=0?-1:1,dt="function"==typeof Ue?Ue(Object.assign({},we,{placement:Me})):Ue,Jt=dt[0],Bt=dt[1];return Jt=Jt||0,Bt=(Bt||0)*lt,[C,I].indexOf(bt)>=0?{x:Bt,y:Jt}:{x:Jt,y:Bt}}(er,we.rects,dt),Ye},{}),Bt=Jt[we.placement],gn=Bt.y;null!=we.modifiersData.popperOffsets&&(we.modifiersData.popperOffsets.x+=Bt.x,we.modifiersData.popperOffsets.y+=gn),we.modifiersData[bt]=Jt}},Sr={name:"popperOffsets",enabled:!0,phase:"read",fn:function $c(Me){var we=Me.state;we.modifiersData[Me.name]=ps({reference:we.rects.reference,element:we.rects.popper,strategy:"absolute",placement:we.placement})},data:{}},id={name:"preventOverflow",enabled:!0,phase:"main",fn:function ur(Me){var we=Me.state,Ue=Me.options,bt=Me.name,lt=Ue.mainAxis,dt=void 0===lt||lt,Jt=Ue.altAxis,Bt=void 0!==Jt&&Jt,Wt=Ue.tether,qt=void 0===Wt||Wt,Ir=Ue.tetherOffset,Wn=void 0===Ir?0:Ir,qn=gs(we,{boundary:Ue.boundary,rootBoundary:Ue.rootBoundary,padding:Ue.padding,altBoundary:Ue.altBoundary}),Yn=ke(we.placement),Xn=vi(we.placement),Qr=!Xn,ar=ft(Yn),pr=function kp(Me){return"x"===Me?"y":"x"}(ar),Ln=we.modifiersData.popperOffsets,Ar=we.rects.reference,Jr=we.rects.popper,li="function"==typeof Wn?Wn(Object.assign({},we.rects,{placement:we.placement})):Wn,Or="number"==typeof li?{mainAxis:li,altAxis:li}:Object.assign({mainAxis:0,altAxis:0},li),xr=we.modifiersData.offset?we.modifiersData.offset[we.placement]:null,bs={x:0,y:0};if(Ln){if(dt){var tr,Yo="y"===ar?G:C,bi="y"===ar?N:I,_n="y"===ar?"height":"width",Lr=Ln[ar],ad=Lr+qn[Yo],pl=Lr-qn[bi],nn=qt?-Jr[_n]/2:0,Vh=Xn===T?Ar[_n]:Jr[_n],gr=Xn===T?-Jr[_n]:-Ar[_n],Is=we.elements.arrow,gl=qt&&Is?Pt(Is):{width:0,height:0},Xo=we.modifiersData["arrow#persistent"]?we.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},ws=Xo[Yo],Wc=Xo[bi],Os=Nt(0,Ar[_n],gl[_n]),Ia=Qr?Ar[_n]/2-nn-Os-ws-Or.mainAxis:Vh-Os-ws-Or.mainAxis,ld=Qr?-Ar[_n]/2+nn+Os+Wc+Or.mainAxis:gr+Os+Wc+Or.mainAxis,qc=we.elements.arrow&&kt(we.elements.arrow),bn=null!=(tr=xr?.[ar])?tr:0,Rp=Lr+ld-bn,Mr=Nt(qt?pe(ad,Lr+Ia-bn-(qc?"y"===ar?qc.clientTop||0:qc.clientLeft||0:0)):ad,Lr,qt?be(pl,Rp):pl);Ln[ar]=Mr,bs[ar]=Mr-Lr}if(Bt){var Ko,Oa=Ln[pr],ud="y"===pr?"height":"width",Ra=Oa+qn["x"===ar?G:C],_s=Oa-qn["x"===ar?N:I],Pa=-1!==[G,C].indexOf(Yn),Ro=null!=(Ko=xr?.[pr])?Ko:0,ml=Pa?Ra:Oa-Ar[ud]-Jr[ud]-Ro+Or.altAxis,Hh=Pa?Oa+Ar[ud]+Jr[ud]-Ro-Or.altAxis:_s,ic=qt&&Pa?function tn(Me,we,Ue){var bt=Nt(Me,we,Ue);return bt>Ue?Ue:bt}(ml,Oa,Hh):Nt(qt?ml:Ra,Oa,qt?Hh:_s);Ln[pr]=ic,bs[pr]=ic-Oa}we.modifiersData[bt]=bs}},requiresIfExists:["offset"]};function Ip(Me,we,Ue){void 0===Ue&&(Ue=!1);var bt=xe(we),lt=xe(we)&&function dl(Me){var we=Me.getBoundingClientRect(),Ue=nt(we.width)/Me.offsetWidth||1,bt=nt(we.height)/Me.offsetHeight||1;return 1!==Ue||1!==bt}(we),dt=$e(we),Jt=Je(Me,lt,Ue),Bt={scrollLeft:0,scrollTop:0},zt={x:0,y:0};return(bt||!bt&&!Ue)&&(("body"!==ue(we)||Si(dt))&&(Bt=function Lh(Me){return Me!==ve(Me)&&xe(Me)?function Oo(Me){return{scrollLeft:Me.scrollLeft,scrollTop:Me.scrollTop}}(Me):ks(Me)}(we)),xe(we)?((zt=Je(we,!0)).x+=we.clientLeft,zt.y+=we.clientTop):dt&&(zt.x=Sa(dt))),{x:Jt.left+Bt.scrollLeft-zt.x,y:Jt.top+Bt.scrollTop-zt.y,width:Jt.width,height:Jt.height}}function od(Me){var we=new Map,Ue=new Set,bt=[];function lt(dt){Ue.add(dt.name),[].concat(dt.requires||[],dt.requiresIfExists||[]).forEach(function(Bt){if(!Ue.has(Bt)){var zt=we.get(Bt);zt&&lt(zt)}}),bt.push(dt)}return Me.forEach(function(dt){we.set(dt.name,dt)}),Me.forEach(function(dt){Ue.has(dt.name)||lt(dt)}),bt}function ia(Me){var we;return function(){return we||(we=new Promise(function(Ue){Promise.resolve().then(function(){we=void 0,Ue(Me())})})),we}}var ys={placement:"bottom",modifiers:[],strategy:"absolute"};function Fh(){for(var Me=arguments.length,we=new Array(Me),Ue=0;Ue<Me;Ue++)we[Ue]=arguments[Ue];return!we.some(function(bt){return!(bt&&"function"==typeof bt.getBoundingClientRect)})}function co(Me){void 0===Me&&(Me={});var Ue=Me.defaultModifiers,bt=void 0===Ue?[]:Ue,lt=Me.defaultOptions,dt=void 0===lt?ys:lt;return function(Bt,zt,gn){void 0===gn&&(gn=dt);var Ye={placement:"bottom",orderedModifiers:[],options:Object.assign({},ys,dt),modifiersData:{},elements:{reference:Bt,popper:zt},attributes:{},styles:{}},er=[],Wt=!1,qt={state:Ye,setOptions:function(Yn){var Xn="function"==typeof Yn?Yn(Ye.options):Yn;Wn(),Ye.options=Object.assign({},dt,Ye.options,Xn),Ye.scrollParents={reference:oe(Bt)?Ma(Bt):Bt.contextElement?Ma(Bt.contextElement):[],popper:Ma(zt)};var Qr=function yi(Me){var we=od(Me);return J.reduce(function(Ue,bt){return Ue.concat(we.filter(function(lt){return lt.phase===bt}))},[])}(function sd(Me){var we=Me.reduce(function(Ue,bt){var lt=Ue[bt.name];return Ue[bt.name]=lt?Object.assign({},lt,bt,{options:Object.assign({},lt.options,bt.options),data:Object.assign({},lt.data,bt.data)}):bt,Ue},{});return Object.keys(we).map(function(Ue){return we[Ue]})}([].concat(bt,Ye.options.modifiers)));return Ye.orderedModifiers=Qr.filter(function(xr){return xr.enabled}),function Ir(){Ye.orderedModifiers.forEach(function(qn){var Xn=qn.options,ar=qn.effect;if("function"==typeof ar){var pr=ar({state:Ye,name:qn.name,instance:qt,options:void 0===Xn?{}:Xn});er.push(pr||function(){})}})}(),qt.update()},forceUpdate:function(){if(!Wt){var Yn=Ye.elements,Xn=Yn.reference,Qr=Yn.popper;if(Fh(Xn,Qr)){Ye.rects={reference:Ip(Xn,kt(Qr),"fixed"===Ye.options.strategy),popper:Pt(Qr)},Ye.reset=!1,Ye.placement=Ye.options.placement,Ye.orderedModifiers.forEach(function(xr){return Ye.modifiersData[xr.name]=Object.assign({},xr.data)});for(var pr=0;pr<Ye.orderedModifiers.length;pr++)if(!0!==Ye.reset){var Ln=Ye.orderedModifiers[pr],Ar=Ln.fn,Jr=Ln.options;"function"==typeof Ar&&(Ye=Ar({state:Ye,options:void 0===Jr?{}:Jr,name:Ln.name,instance:qt})||Ye)}else Ye.reset=!1,pr=-1}}},update:ia(function(){return new Promise(function(qn){qt.forceUpdate(),qn(Ye)})}),destroy:function(){Wn(),Wt=!0}};if(!Fh(Bt,zt))return qt;function Wn(){er.forEach(function(qn){return qn()}),er=[]}return qt.setOptions(gn).then(function(qn){!Wt&&gn.onFirstUpdate&&gn.onFirstUpdate(qn)}),qt}}var hl=co(),ka=co({defaultModifiers:[fs,Sr,Io,ze,Ta,Nh,id,ai,Uc]}),yr=co({defaultModifiers:[fs,Sr,Io,ze]})},5423:Pe=>{"use strict";Pe.exports=function Ne($){return null===$||"object"!=typeof $||null!=$.toJSON?JSON.stringify($):Array.isArray($)?"["+$.reduce((G,N,I)=>G+(0===I?"":",")+Ne(void 0===N||"symbol"==typeof N?null:N),"")+"]":"{"+Object.keys($).sort().reduce((G,N,I)=>void 0===$[N]||"symbol"==typeof $[N]?G:G+(0===G.length?"":",")+Ne(N)+":"+Ne($[N]),"")+"}"}},2405:function(Pe,Ne,$){var G;Pe.exports=(G=$(5982),function(N){var I={};function C(P){if(I[P])return I[P].exports;var D=I[P]={i:P,l:!1,exports:{}};return N[P].call(D.exports,D,D.exports,C),D.l=!0,D.exports}return C.m=N,C.c=I,C.i=function(P){return P},C.d=function(P,D,T){C.o(P,D)||Object.defineProperty(P,D,{configurable:!1,enumerable:!0,get:T})},C.n=function(P){var D=P&&P.__esModule?function(){return P.default}:function(){return P};return C.d(D,"a",D),D},C.o=function(P,D){return Object.prototype.hasOwnProperty.call(P,D)},C.p="",C(C.s=7)}([function(N,I){N.exports=G},function(N,I,C){"use strict";var P=C(0).FDLayoutConstants;function D(){}for(var T in P)D[T]=P[T];D.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,D.DEFAULT_RADIAL_SEPARATION=P.DEFAULT_EDGE_LENGTH,D.DEFAULT_COMPONENT_SEPERATION=60,D.TILE=!0,D.TILING_PADDING_VERTICAL=10,D.TILING_PADDING_HORIZONTAL=10,D.TREE_REDUCTION_ON_INCREMENTAL=!1,N.exports=D},function(N,I,C){"use strict";var P=C(0).FDLayoutEdge;function D(M,z,B){P.call(this,M,z,B)}for(var T in D.prototype=Object.create(P.prototype),P)D[T]=P[T];N.exports=D},function(N,I,C){"use strict";var P=C(0).LGraph;function D(M,z,B){P.call(this,M,z,B)}for(var T in D.prototype=Object.create(P.prototype),P)D[T]=P[T];N.exports=D},function(N,I,C){"use strict";var P=C(0).LGraphManager;function D(M){P.call(this,M)}for(var T in D.prototype=Object.create(P.prototype),P)D[T]=P[T];N.exports=D},function(N,I,C){"use strict";var P=C(0).FDLayoutNode,D=C(0).IMath;function T(z,B,K,te){P.call(this,z,B,K,te)}for(var M in T.prototype=Object.create(P.prototype),P)T[M]=P[M];T.prototype.move=function(){var z=this.graphManager.getLayout();this.displacementX=z.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY=z.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren,Math.abs(this.displacementX)>z.coolingFactor*z.maxNodeDisplacement&&(this.displacementX=z.coolingFactor*z.maxNodeDisplacement*D.sign(this.displacementX)),Math.abs(this.displacementY)>z.coolingFactor*z.maxNodeDisplacement&&(this.displacementY=z.coolingFactor*z.maxNodeDisplacement*D.sign(this.displacementY)),null==this.child||0==this.child.getNodes().length?this.moveBy(this.displacementX,this.displacementY):this.propogateDisplacementToChildren(this.displacementX,this.displacementY),z.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},T.prototype.propogateDisplacementToChildren=function(z,B){for(var te,K=this.getChild().getNodes(),j=0;j<K.length;j++)null==(te=K[j]).getChild()?(te.moveBy(z,B),te.displacementX+=z,te.displacementY+=B):te.propogateDisplacementToChildren(z,B)},T.prototype.setPred1=function(z){this.pred1=z},T.prototype.getPred1=function(){return pred1},T.prototype.getPred2=function(){return pred2},T.prototype.setNext=function(z){this.next=z},T.prototype.getNext=function(){return next},T.prototype.setProcessed=function(z){this.processed=z},T.prototype.isProcessed=function(){return processed},N.exports=T},function(N,I,C){"use strict";var P=C(0).FDLayout,D=C(4),T=C(3),M=C(5),z=C(2),B=C(1),K=C(0).FDLayoutConstants,te=C(0).LayoutConstants,j=C(0).Point,q=C(0).PointD,ae=C(0).Layout,Q=C(0).Integer,ce=C(0).IGeometry,ee=C(0).LGraph,Re=C(0).Transform;function de(){P.call(this),this.toBeTiled={}}for(var U in de.prototype=Object.create(P.prototype),P)de[U]=P[U];de.prototype.newGraphManager=function(){var L=new D(this);return this.graphManager=L,L},de.prototype.newGraph=function(L){return new T(null,this.graphManager,L)},de.prototype.newNode=function(L){return new M(this.graphManager,L)},de.prototype.newEdge=function(L){return new z(null,null,L)},de.prototype.initParameters=function(){P.prototype.initParameters.call(this,arguments),this.isSubLayout||(this.idealEdgeLength=B.DEFAULT_EDGE_LENGTH<10?10:B.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=B.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.springConstant=K.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=K.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=K.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=K.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=K.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=K.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1,this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/K.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=K.CONVERGENCE_CHECK_PERIOD/this.maxIterations,this.coolingAdjuster=1)},de.prototype.layout=function(){return te.DEFAULT_CREATE_BENDS_AS_NEEDED&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},de.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(B.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var V=new Set(this.getAllNodes()),J=this.nodesWithGravity.filter(function(oe){return V.has(oe)});this.graphManager.setAllNodesToApplyGravitation(J)}}else{var L=this.getFlatForest();L.length>0?this.positionNodesRadially(L):(this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation(),V=new Set(this.getAllNodes()),J=this.nodesWithGravity.filter(function(ue){return V.has(ue)}),this.graphManager.setAllNodesToApplyGravitation(J),this.positionNodesRandomly())}return this.initSpringEmbedder(),this.runSpringEmbedder(),!0},de.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}if(this.totalIterations%K.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged()){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}this.coolingCycle++,0==this.layoutQuality?this.coolingAdjuster=this.coolingCycle:1==this.layoutQuality&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var L=new Set(this.getAllNodes()),V=this.nodesWithGravity.filter(function(ve){return L.has(ve)});this.graphManager.setAllNodesToApplyGravitation(V),this.graphManager.updateBounds(),this.updateGrid(),this.coolingFactor=K.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),this.coolingFactor=K.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var J=!this.isTreeGrowing&&!this.isGrowthFinished,ue=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(J,ue),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},de.prototype.getPositionsData=function(){for(var L=this.graphManager.getAllNodes(),V={},J=0;J<L.length;J++){var ue=L[J].rect,ve=L[J].id;V[ve]={id:ve,x:ue.getCenterX(),y:ue.getCenterY(),w:ue.width,h:ue.height}}return V},de.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var L=!1;if("during"===K.ANIMATE)this.emit("layoutstarted");else{for(;!L;)L=this.tick();this.graphManager.updateBounds()}},de.prototype.calculateNodesToApplyGravitationTo=function(){var V,ve,L=[],J=this.graphManager.getGraphs(),ue=J.length;for(ve=0;ve<ue;ve++)(V=J[ve]).updateConnected(),V.isConnected||(L=L.concat(V.getNodes()));return L},de.prototype.createBendpoints=function(){var L=[];L=L.concat(this.graphManager.getAllEdges());var J,V=new Set;for(J=0;J<L.length;J++){var ue=L[J];if(!V.has(ue)){var ve=ue.getSource(),oe=ue.getTarget();if(ve==oe)ue.getBendpoints().push(new q),ue.getBendpoints().push(new q),this.createDummyNodesForBendpoints(ue),V.add(ue);else{var xe=[];if(xe=(xe=xe.concat(ve.getEdgeListToNode(oe))).concat(oe.getEdgeListToNode(ve)),!V.has(xe[0])){var Le;if(xe.length>1)for(Le=0;Le<xe.length;Le++){var ye=xe[Le];ye.getBendpoints().push(new q),this.createDummyNodesForBendpoints(ye)}xe.forEach(function(qe){V.add(qe)})}}}if(V.size==L.length)break}},de.prototype.positionNodesRadially=function(L){for(var V=new j(0,0),J=Math.ceil(Math.sqrt(L.length)),ue=0,ve=0,oe=0,xe=new q(0,0),Le=0;Le<L.length;Le++){Le%J==0&&(oe=0,ve=ue,0!=Le&&(ve+=B.DEFAULT_COMPONENT_SEPERATION),ue=0);var ye=L[Le],qe=ae.findCenterOfTree(ye);V.x=oe,V.y=ve,(xe=de.radialLayout(ye,qe,V)).y>ue&&(ue=Math.floor(xe.y)),oe=Math.floor(xe.x+B.DEFAULT_COMPONENT_SEPERATION)}this.transform(new q(te.WORLD_CENTER_X-xe.x/2,te.WORLD_CENTER_Y-xe.y/2))},de.radialLayout=function(L,V,J){var ue=Math.max(this.maxDiagonalInTree(L),B.DEFAULT_RADIAL_SEPARATION);de.branchRadialLayout(V,null,0,359,0,ue);var ve=ee.calculateBounds(L),oe=new Re;oe.setDeviceOrgX(ve.getMinX()),oe.setDeviceOrgY(ve.getMinY()),oe.setWorldOrgX(J.x),oe.setWorldOrgY(J.y);for(var xe=0;xe<L.length;xe++)L[xe].transform(oe);var ye=new q(ve.getMaxX(),ve.getMaxY());return oe.inverseTransformPoint(ye)},de.branchRadialLayout=function(L,V,J,ue,ve,oe){var xe=(ue-J+1)/2;xe<0&&(xe+=180);var ye=(xe+J)%360*ce.TWO_PI/360,ze=(Math.cos(ye),ve*Math.cos(ye)),ke=ve*Math.sin(ye);L.setCenter(ze,ke);var be=[],pe=(be=be.concat(L.getEdges())).length;null!=V&&pe--;for(var Ie,nt=0,We=be.length,Je=L.getEdgesBetween(V);Je.length>1;){var Pt=Je[0];Je.splice(0,1);var pt=be.indexOf(Pt);pt>=0&&be.splice(pt,1),We--,pe--}Ie=null!=V?(be.indexOf(Je[0])+1)%We:0;for(var at=Math.abs(ue-J)/pe,ut=Ie;nt!=pe;ut=++ut%We){var $e=be[ut].getOtherEnd(L);if($e!=V){var Ee=(J+nt*at)%360;de.branchRadialLayout($e,L,Ee,(Ee+at)%360,ve+oe,oe),nt++}}},de.maxDiagonalInTree=function(L){for(var V=Q.MIN_VALUE,J=0;J<L.length;J++){var ve=L[J].getDiagonal();ve>V&&(V=ve)}return V},de.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},de.prototype.groupZeroDegreeMembers=function(){var L=this,V={};this.memberGroups={},this.idToDummyNode={};for(var J=[],ue=this.graphManager.getAllNodes(),ve=0;ve<ue.length;ve++){var xe=(oe=ue[ve]).getParent();0===this.getNodeDegreeWithChildren(oe)&&(null==xe.id||!this.getToBeTiled(xe))&&J.push(oe)}for(ve=0;ve<J.length;ve++){var oe,Le=(oe=J[ve]).getParent().id;typeof V[Le]>"u"&&(V[Le]=[]),V[Le]=V[Le].concat(oe)}Object.keys(V).forEach(function(ye){if(V[ye].length>1){var qe="DummyCompound_"+ye;L.memberGroups[qe]=V[ye];var ze=V[ye][0].getParent(),ke=new M(L.graphManager);ke.id=qe,ke.paddingLeft=ze.paddingLeft||0,ke.paddingRight=ze.paddingRight||0,ke.paddingBottom=ze.paddingBottom||0,ke.paddingTop=ze.paddingTop||0,L.idToDummyNode[qe]=ke;var be=L.getGraphManager().add(L.newGraph(),ke),pe=ze.getChild();pe.add(ke);for(var nt=0;nt<V[ye].length;nt++){var We=V[ye][nt];pe.remove(We),be.add(We)}}})},de.prototype.clearCompounds=function(){var L={},V={};this.performDFSOnCompounds();for(var J=0;J<this.compoundOrder.length;J++)V[this.compoundOrder[J].id]=this.compoundOrder[J],L[this.compoundOrder[J].id]=[].concat(this.compoundOrder[J].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[J].getChild()),this.compoundOrder[J].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(L,V)},de.prototype.clearZeroDegreeMembers=function(){var L=this,V=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(J){var ue=L.idToDummyNode[J];V[J]=L.tileNodes(L.memberGroups[J],ue.paddingLeft+ue.paddingRight),ue.rect.width=V[J].width,ue.rect.height=V[J].height})},de.prototype.repopulateCompounds=function(){for(var L=this.compoundOrder.length-1;L>=0;L--){var V=this.compoundOrder[L];this.adjustLocations(this.tiledMemberPack[V.id],V.rect.x,V.rect.y,V.paddingLeft,V.paddingTop)}},de.prototype.repopulateZeroDegreeMembers=function(){var L=this,V=this.tiledZeroDegreePack;Object.keys(V).forEach(function(J){var ue=L.idToDummyNode[J];L.adjustLocations(V[J],ue.rect.x,ue.rect.y,ue.paddingLeft,ue.paddingTop)})},de.prototype.getToBeTiled=function(L){var V=L.id;if(null!=this.toBeTiled[V])return this.toBeTiled[V];var J=L.getChild();if(null==J)return this.toBeTiled[V]=!1,!1;for(var ue=J.getNodes(),ve=0;ve<ue.length;ve++){var oe=ue[ve];if(this.getNodeDegree(oe)>0)return this.toBeTiled[V]=!1,!1;if(null!=oe.getChild()){if(!this.getToBeTiled(oe))return this.toBeTiled[V]=!1,!1}else this.toBeTiled[oe.id]=!1}return this.toBeTiled[V]=!0,!0},de.prototype.getNodeDegree=function(L){for(var J=L.getEdges(),ue=0,ve=0;ve<J.length;ve++){var oe=J[ve];oe.getSource().id!==oe.getTarget().id&&(ue+=1)}return ue},de.prototype.getNodeDegreeWithChildren=function(L){var V=this.getNodeDegree(L);if(null==L.getChild())return V;for(var J=L.getChild().getNodes(),ue=0;ue<J.length;ue++)V+=this.getNodeDegreeWithChildren(J[ue]);return V},de.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},de.prototype.fillCompexOrderByDFS=function(L){for(var V=0;V<L.length;V++){var J=L[V];null!=J.getChild()&&this.fillCompexOrderByDFS(J.getChild().getNodes()),this.getToBeTiled(J)&&this.compoundOrder.push(J)}},de.prototype.adjustLocations=function(L,V,J,ue,ve){J+=ve;for(var oe=V+=ue,xe=0;xe<L.rows.length;xe++){var Le=L.rows[xe];V=oe;for(var ye=0,qe=0;qe<Le.length;qe++){var ze=Le[qe];ze.rect.x=V,ze.rect.y=J,V+=ze.rect.width+L.horizontalPadding,ze.rect.height>ye&&(ye=ze.rect.height)}J+=ye+L.verticalPadding}},de.prototype.tileCompoundMembers=function(L,V){var J=this;this.tiledMemberPack=[],Object.keys(L).forEach(function(ue){var ve=V[ue];J.tiledMemberPack[ue]=J.tileNodes(L[ue],ve.paddingLeft+ve.paddingRight),ve.rect.width=J.tiledMemberPack[ue].width,ve.rect.height=J.tiledMemberPack[ue].height})},de.prototype.tileNodes=function(L,V){var ve={rows:[],rowWidth:[],rowHeight:[],width:0,height:V,verticalPadding:B.TILING_PADDING_VERTICAL,horizontalPadding:B.TILING_PADDING_HORIZONTAL};L.sort(function(Le,ye){return Le.rect.width*Le.rect.height>ye.rect.width*ye.rect.height?-1:Le.rect.width*Le.rect.height<ye.rect.width*ye.rect.height?1:0});for(var oe=0;oe<L.length;oe++){var xe=L[oe];0==ve.rows.length?this.insertNodeToRow(ve,xe,0,V):this.canAddHorizontal(ve,xe.rect.width,xe.rect.height)?this.insertNodeToRow(ve,xe,this.getShortestRowIndex(ve),V):this.insertNodeToRow(ve,xe,ve.rows.length,V),this.shiftToLastRow(ve)}return ve},de.prototype.insertNodeToRow=function(L,V,J,ue){var ve=ue;J==L.rows.length&&(L.rows.push([]),L.rowWidth.push(ve),L.rowHeight.push(0));var xe=L.rowWidth[J]+V.rect.width;L.rows[J].length>0&&(xe+=L.horizontalPadding),L.rowWidth[J]=xe,L.width<xe&&(L.width=xe);var Le=V.rect.height;J>0&&(Le+=L.verticalPadding);var ye=0;Le>L.rowHeight[J]&&(ye=L.rowHeight[J],L.rowHeight[J]=Le,ye=L.rowHeight[J]-ye),L.height+=ye,L.rows[J].push(V)},de.prototype.getShortestRowIndex=function(L){for(var V=-1,J=Number.MAX_VALUE,ue=0;ue<L.rows.length;ue++)L.rowWidth[ue]<J&&(V=ue,J=L.rowWidth[ue]);return V},de.prototype.getLongestRowIndex=function(L){for(var V=-1,J=Number.MIN_VALUE,ue=0;ue<L.rows.length;ue++)L.rowWidth[ue]>J&&(V=ue,J=L.rowWidth[ue]);return V},de.prototype.canAddHorizontal=function(L,V,J){var ue=this.getShortestRowIndex(L);if(ue<0)return!0;var ve=L.rowWidth[ue];if(ve+L.horizontalPadding+V<=L.width)return!0;var xe,Le,oe=0;return L.rowHeight[ue]<J&&ue>0&&(oe=J+L.verticalPadding-L.rowHeight[ue]),xe=L.width-ve>=V+L.horizontalPadding?(L.height+oe)/(ve+V+L.horizontalPadding):(L.height+oe)/L.width,oe=J+L.verticalPadding,(Le=L.width<V?(L.height+oe)/V:(L.height+oe)/L.width)<1&&(Le=1/Le),xe<1&&(xe=1/xe),xe<Le},de.prototype.shiftToLastRow=function(L){var V=this.getLongestRowIndex(L),J=L.rowWidth.length-1,ue=L.rows[V],ve=ue[ue.length-1],oe=ve.width+L.horizontalPadding;if(L.width-L.rowWidth[J]>oe&&V!=J){ue.splice(-1,1),L.rows[J].push(ve),L.rowWidth[V]=L.rowWidth[V]-oe,L.rowWidth[J]=L.rowWidth[J]+oe,L.width=L.rowWidth[instance.getLongestRowIndex(L)];for(var xe=Number.MIN_VALUE,Le=0;Le<ue.length;Le++)ue[Le].height>xe&&(xe=ue[Le].height);V>0&&(xe+=L.verticalPadding);var ye=L.rowHeight[V]+L.rowHeight[J];L.rowHeight[V]=xe,L.rowHeight[J]<ve.height+L.verticalPadding&&(L.rowHeight[J]=ve.height+L.verticalPadding),L.height+=L.rowHeight[V]+L.rowHeight[J]-ye,this.shiftToLastRow(L)}},de.prototype.tilingPreLayout=function(){B.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},de.prototype.tilingPostLayout=function(){B.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},de.prototype.reduceTrees=function(){for(var J,L=[],V=!0;V;){var ue=this.graphManager.getAllNodes(),ve=[];V=!1;for(var oe=0;oe<ue.length;oe++)1==(J=ue[oe]).getEdges().length&&!J.getEdges()[0].isInterGraph&&null==J.getChild()&&(ve.push([J,J.getEdges()[0],J.getOwner()]),V=!0);if(1==V){for(var xe=[],Le=0;Le<ve.length;Le++)1==ve[Le][0].getEdges().length&&(xe.push(ve[Le]),ve[Le][0].getOwner().remove(ve[Le][0]));L.push(xe),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=L},de.prototype.growTree=function(L){for(var ue,J=L[L.length-1],ve=0;ve<J.length;ve++)this.findPlaceforPrunedNode(ue=J[ve]),ue[2].add(ue[0]),ue[2].add(ue[1],ue[1].source,ue[1].target);L.splice(L.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},de.prototype.findPlaceforPrunedNode=function(L){var V,J,ue=L[0],ve=(J=ue==L[1].source?L[1].target:L[1].source).startX,oe=J.finishX,xe=J.startY,Le=J.finishY,be=[0,0,0,0];if(xe>0)for(var pe=ve;pe<=oe;pe++)be[0]+=this.grid[pe][xe-1].length+this.grid[pe][xe].length-1;if(oe<this.grid.length-1)for(pe=xe;pe<=Le;pe++)be[1]+=this.grid[oe+1][pe].length+this.grid[oe][pe].length-1;if(Le<this.grid[0].length-1)for(pe=ve;pe<=oe;pe++)be[2]+=this.grid[pe][Le+1].length+this.grid[pe][Le].length-1;if(ve>0)for(pe=xe;pe<=Le;pe++)be[3]+=this.grid[ve-1][pe].length+this.grid[ve][pe].length-1;for(var We,Ie,nt=Q.MAX_VALUE,Je=0;Je<be.length;Je++)be[Je]<nt?(nt=be[Je],We=1,Ie=Je):be[Je]==nt&&We++;if(3==We&&0==nt)0==be[0]&&0==be[1]&&0==be[2]?V=1:0==be[0]&&0==be[1]&&0==be[3]?V=0:0==be[0]&&0==be[2]&&0==be[3]?V=3:0==be[1]&&0==be[2]&&0==be[3]&&(V=2);else if(2==We&&0==nt){var Pt=Math.floor(2*Math.random());V=0==be[0]&&0==be[1]?0==Pt?0:1:0==be[0]&&0==be[2]?0==Pt?0:2:0==be[0]&&0==be[3]?0==Pt?0:3:0==be[1]&&0==be[2]?0==Pt?1:2:0==be[1]&&0==be[3]?0==Pt?1:3:0==Pt?2:3}else V=4==We&&0==nt?Pt=Math.floor(4*Math.random()):Ie;0==V?ue.setCenter(J.getCenterX(),J.getCenterY()-J.getHeight()/2-K.DEFAULT_EDGE_LENGTH-ue.getHeight()/2):1==V?ue.setCenter(J.getCenterX()+J.getWidth()/2+K.DEFAULT_EDGE_LENGTH+ue.getWidth()/2,J.getCenterY()):2==V?ue.setCenter(J.getCenterX(),J.getCenterY()+J.getHeight()/2+K.DEFAULT_EDGE_LENGTH+ue.getHeight()/2):ue.setCenter(J.getCenterX()-J.getWidth()/2-K.DEFAULT_EDGE_LENGTH-ue.getWidth()/2,J.getCenterY())},N.exports=de},function(N,I,C){"use strict";var P={};P.layoutBase=C(0),P.CoSEConstants=C(1),P.CoSEEdge=C(2),P.CoSEGraph=C(3),P.CoSEGraphManager=C(4),P.CoSELayout=C(6),P.CoSENode=C(5),N.exports=P}]))},5791:function(Pe,Ne,$){var G;Pe.exports=(G=$(2405),function(N){var I={};function C(P){if(I[P])return I[P].exports;var D=I[P]={i:P,l:!1,exports:{}};return N[P].call(D.exports,D,D.exports,C),D.l=!0,D.exports}return C.m=N,C.c=I,C.i=function(P){return P},C.d=function(P,D,T){C.o(P,D)||Object.defineProperty(P,D,{configurable:!1,enumerable:!0,get:T})},C.n=function(P){var D=P&&P.__esModule?function(){return P.default}:function(){return P};return C.d(D,"a",D),D},C.o=function(P,D){return Object.prototype.hasOwnProperty.call(P,D)},C.p="",C(C.s=1)}([function(N,I){N.exports=G},function(N,I,C){"use strict";var P=C(0).layoutBase.LayoutConstants,D=C(0).layoutBase.FDLayoutConstants,T=C(0).CoSEConstants,M=C(0).CoSELayout,z=C(0).CoSENode,B=C(0).layoutBase.PointD,K=C(0).layoutBase.DimensionD,te={ready:function(){},stop:function(){},quality:"default",nodeDimensionsIncludeLabels:!1,refresh:30,fit:!0,padding:10,randomize:!0,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",animationDuration:500,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.5};function q(ce){this.options=function j(ce,ee){var Re={};for(var de in ce)Re[de]=ce[de];for(var de in ee)Re[de]=ee[de];return Re}(te,ce),ae(this.options)}var ae=function(ee){null!=ee.nodeRepulsion&&(T.DEFAULT_REPULSION_STRENGTH=D.DEFAULT_REPULSION_STRENGTH=ee.nodeRepulsion),null!=ee.idealEdgeLength&&(T.DEFAULT_EDGE_LENGTH=D.DEFAULT_EDGE_LENGTH=ee.idealEdgeLength),null!=ee.edgeElasticity&&(T.DEFAULT_SPRING_STRENGTH=D.DEFAULT_SPRING_STRENGTH=ee.edgeElasticity),null!=ee.nestingFactor&&(T.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=D.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=ee.nestingFactor),null!=ee.gravity&&(T.DEFAULT_GRAVITY_STRENGTH=D.DEFAULT_GRAVITY_STRENGTH=ee.gravity),null!=ee.numIter&&(T.MAX_ITERATIONS=D.MAX_ITERATIONS=ee.numIter),null!=ee.gravityRange&&(T.DEFAULT_GRAVITY_RANGE_FACTOR=D.DEFAULT_GRAVITY_RANGE_FACTOR=ee.gravityRange),null!=ee.gravityCompound&&(T.DEFAULT_COMPOUND_GRAVITY_STRENGTH=D.DEFAULT_COMPOUND_GRAVITY_STRENGTH=ee.gravityCompound),null!=ee.gravityRangeCompound&&(T.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=D.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=ee.gravityRangeCompound),null!=ee.initialEnergyOnIncremental&&(T.DEFAULT_COOLING_FACTOR_INCREMENTAL=D.DEFAULT_COOLING_FACTOR_INCREMENTAL=ee.initialEnergyOnIncremental),P.QUALITY="draft"==ee.quality?0:"proof"==ee.quality?2:1,T.NODE_DIMENSIONS_INCLUDE_LABELS=D.NODE_DIMENSIONS_INCLUDE_LABELS=P.NODE_DIMENSIONS_INCLUDE_LABELS=ee.nodeDimensionsIncludeLabels,T.DEFAULT_INCREMENTAL=D.DEFAULT_INCREMENTAL=P.DEFAULT_INCREMENTAL=!ee.randomize,T.ANIMATE=D.ANIMATE=P.ANIMATE=ee.animate,T.TILE=ee.tile,T.TILING_PADDING_VERTICAL="function"==typeof ee.tilingPaddingVertical?ee.tilingPaddingVertical.call():ee.tilingPaddingVertical,T.TILING_PADDING_HORIZONTAL="function"==typeof ee.tilingPaddingHorizontal?ee.tilingPaddingHorizontal.call():ee.tilingPaddingHorizontal};q.prototype.run=function(){var ce,ee,Re=this.options,U=(this.idToLNode={},this.layout=new M),L=this;L.stopped=!1,this.cy=this.options.cy,this.cy.trigger({type:"layoutstart",layout:this});var V=U.newGraphManager();this.gm=V;var J=this.options.eles.nodes(),ue=this.options.eles.edges();this.root=V.addRoot(),this.processChildrenList(this.root,this.getTopMostNodes(J),U);for(var ve=0;ve<ue.length;ve++){var oe=ue[ve],xe=this.idToLNode[oe.data("source")],Le=this.idToLNode[oe.data("target")];xe!==Le&&0==xe.getEdgesBetween(Le).length&&(V.add(U.newEdge(),xe,Le).id=oe.id())}var qe=function(be,pe){"number"==typeof be&&(be=pe);var nt=be.data("id"),We=L.idToLNode[nt];return{x:We.getRect().getCenterX(),y:We.getRect().getCenterY()}},ze=function ke(){for(var nt,be=function(){Re.fit&&Re.cy.fit(Re.eles,Re.padding),ce||(ce=!0,L.cy.one("layoutready",Re.ready),L.cy.trigger({type:"layoutready",layout:L}))},pe=L.options.refresh,We=0;We<pe&&!nt;We++)nt=L.stopped||L.layout.tick();if(nt)return U.checkLayoutSuccess()&&!U.isSubLayout&&U.doPostLayout(),U.tilingPostLayout&&U.tilingPostLayout(),U.isLayoutFinished=!0,L.options.eles.nodes().positions(qe),be(),L.cy.one("layoutstop",L.options.stop),L.cy.trigger({type:"layoutstop",layout:L}),ee&&cancelAnimationFrame(ee),void(ce=!1);var Ie=L.layout.getPositionsData();Re.eles.nodes().positions(function(Je,Pt){if("number"==typeof Je&&(Je=Pt),!Je.isParent()){for(var pt=Je.id(),at=Ie[pt],ut=Je;null==at&&(at=Ie[ut.data("parent")]||Ie["DummyCompound_"+ut.data("parent")],Ie[pt]=at,null!=(ut=ut.parent()[0])););return null!=at?{x:at.x,y:at.y}:{x:Je.position("x"),y:Je.position("y")}}}),be(),ee=requestAnimationFrame(ke)};return U.addListener("layoutstarted",function(){"during"===L.options.animate&&(ee=requestAnimationFrame(ze))}),U.runLayout(),"during"!==this.options.animate&&(L.options.eles.nodes().not(":parent").layoutPositions(L,L.options,qe),ce=!1),this},q.prototype.getTopMostNodes=function(ce){for(var ee={},Re=0;Re<ce.length;Re++)ee[ce[Re].id()]=!0;return ce.filter(function(U,L){"number"==typeof U&&(U=L);for(var V=U.parent()[0];null!=V;){if(ee[V.id()])return!1;V=V.parent()[0]}return!0})},q.prototype.processChildrenList=function(ce,ee,Re){for(var de=ee.length,U=0;U<de;U++){var J,Le,L=ee[U],V=L.children(),ue=L.layoutDimensions({nodeDimensionsIncludeLabels:this.options.nodeDimensionsIncludeLabels});if((J=null!=L.outerWidth()&&null!=L.outerHeight()?ce.add(new z(Re.graphManager,new B(L.position("x")-ue.w/2,L.position("y")-ue.h/2),new K(parseFloat(ue.w),parseFloat(ue.h)))):ce.add(new z(this.graphManager))).id=L.data("id"),J.paddingLeft=parseInt(L.css("padding")),J.paddingTop=parseInt(L.css("padding")),J.paddingRight=parseInt(L.css("padding")),J.paddingBottom=parseInt(L.css("padding")),this.options.nodeDimensionsIncludeLabels&&L.isParent()){var ve=L.boundingBox({includeLabels:!0,includeNodes:!1}).w,oe=L.boundingBox({includeLabels:!0,includeNodes:!1}).h,xe=L.css("text-halign");J.labelWidth=ve,J.labelHeight=oe,J.labelPos=xe}this.idToLNode[L.data("id")]=J,isNaN(J.rect.x)&&(J.rect.x=0),isNaN(J.rect.y)&&(J.rect.y=0),null!=V&&V.length>0&&(Le=Re.getGraphManager().add(Re.newGraph(),J),this.processChildrenList(Le,V,Re))}},q.prototype.stop=function(){return this.stopped=!0,this};var Q=function(ee){ee("layout","cose-bilkent",q)};typeof cytoscape<"u"&&Q(cytoscape),N.exports=Q}]))},1212:function(Pe){Pe.exports=function(Ne){var $={};function G(N){if($[N])return $[N].exports;var I=$[N]={i:N,l:!1,exports:{}};return Ne[N].call(I.exports,I,I.exports,G),I.l=!0,I.exports}return G.m=Ne,G.c=$,G.i=function(N){return N},G.d=function(N,I,C){G.o(N,I)||Object.defineProperty(N,I,{configurable:!1,enumerable:!0,get:C})},G.n=function(N){var I=N&&N.__esModule?function(){return N.default}:function(){return N};return G.d(I,"a",I),I},G.o=function(N,I){return Object.prototype.hasOwnProperty.call(N,I)},G.p="",G(G.s=4)}([function(Ne,$,G){"use strict";var N=G(2),I=G(1),C=G(3),P=C.removeEles,D=C.setStyles,T=C.createElement,M=C.getPixelRatio,z=C.getOffset;Ne.exports=function(te){var j=I({},N,te),q=this,ae=q.container(),Q=void 0,ce={options:j,handlers:[],container:T({class:"cxtmenu"})},ee=ce.container,Re=T(),de=T({tag:"canvas"}),U=[],L=de.getContext("2d"),V=100,J=2*(V+j.activePadding),ue=void 0,ve=void 0;function xe($e,Ee){be.drawBg=[$e,Ee]}function Le($e,Ee){L.globalCompositeOperation="source-over",L.clearRect(0,0,J,J),L.fillStyle=j.fillColor;for(var Be=2*Math.PI/U.length,ht=Math.PI/2,kt=ht+Be,ft=0;ft<U.length;ft++){var Nt=U[ft];Nt.fillColor&&(L.fillStyle=Nt.fillColor),L.beginPath(),L.moveTo($e+j.activePadding,$e+j.activePadding),L.arc($e+j.activePadding,$e+j.activePadding,$e,2*Math.PI-ht,2*Math.PI-kt,!0),L.closePath(),L.fill(),ht+=Be,kt+=Be,L.fillStyle=j.fillColor}L.globalCompositeOperation="destination-out",L.strokeStyle="white",L.lineWidth=j.separatorWidth,kt=(ht=Math.PI/2)+Be;for(var tn=0;tn<U.length;tn++){var Ot=$e*Math.cos(ht),on=$e*Math.sin(ht);L.beginPath(),L.moveTo($e+j.activePadding,$e+j.activePadding),L.lineTo($e+j.activePadding+Ot,$e+j.activePadding-on),L.closePath(),L.stroke(),ht+=Be,kt+=Be}L.fillStyle="white",L.globalCompositeOperation="destination-out",L.beginPath(),L.arc($e+j.activePadding,$e+j.activePadding,Ee+j.spotlightPadding,0,2*Math.PI,!0),L.closePath(),L.fill(),L.globalCompositeOperation="source-over"}function qe($e,Ee,Be,ht,kt){var ft=2*Math.PI/U.length,Nt=Math.PI/2,tn=Nt+ft;Nt+=ft*ue,tn+=ft*ue,L.fillStyle=j.activeFillColor,L.strokeStyle="black",L.lineWidth=1,L.beginPath(),L.moveTo(Be+j.activePadding,Be+j.activePadding),L.arc(Be+j.activePadding,Be+j.activePadding,Be+j.activePadding,2*Math.PI-Nt,2*Math.PI-tn,!0),L.closePath(),L.fill(),L.fillStyle="white",L.globalCompositeOperation="destination-out";var Ot=Be+j.activePadding+$e/Be*(kt+j.spotlightPadding-j.indicatorSize/4),on=Be+j.activePadding+Ee/Be*(kt+j.spotlightPadding-j.indicatorSize/4),hn=Math.PI/4-ht;L.translate(Ot,on),L.rotate(hn);var $n=j.indicatorSize>kt+j.spotlightPadding?kt+j.spotlightPadding:j.indicatorSize;L.beginPath(),L.fillRect(-$n/2,-$n/2,$n,$n),L.closePath(),L.fill(),L.rotate(-hn),L.translate(-Ot,-on),L.beginPath(),L.arc(Be+j.activePadding,Be+j.activePadding,kt+j.spotlightPadding,0,2*Math.PI,!0),L.closePath(),L.fill(),L.globalCompositeOperation="source-over"}function ze(){var $e=M(),Ee=J,Be=J;de.width=Ee*$e,de.height=Be*$e,de.style.width=Ee+"px",de.style.height=Be+"px",L.setTransform(1,0,0,1,0,0),L.scale($e,$e)}ae.insertBefore(ee,ae.firstChild),ee.appendChild(Re),Re.appendChild(de),D(ee,{position:"absolute",zIndex:j.zIndex,userSelect:"none",pointerEvents:"none"}),["mousedown","mousemove","mouseup","contextmenu"].forEach(function($e){ee.addEventListener($e,function(Ee){return Ee.preventDefault(),!1})}),D(Re,{display:"none",width:J+"px",height:J+"px",position:"absolute",zIndex:1,marginLeft:-j.activePadding+"px",marginTop:-j.activePadding+"px",userSelect:"none"}),de.width=J,de.height=J;var ke=!0,be={},pe=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function($e){return setTimeout($e,16)};ze(),function $e(){be.drawBg&&Le.apply(null,be.drawBg),be.drawCommands&&qe.apply(null,be.drawCommands),be={},ke&&pe($e)}();var We=void 0,Ie=void 0,Je=void 0,Pt={on:function(Ee,Be,ht){var kt=ht;return"core"===Be&&(kt=function(Nt){if(Nt.cyTarget===q||Nt.target===q)return ht.apply(this,[Nt])}),ce.handlers.push({events:Ee,selector:Be,fn:kt}),"core"===Be?q.on(Ee,kt):q.on(Ee,Be,kt),this}};function ut(){ke=!1,function at(){for(var $e=ce.handlers,Ee=0;Ee<$e.length;Ee++){var Be=$e[Ee];"core"===Be.selector?q.off(Be.events,Be.fn):q.off(Be.events,Be.selector,Be.fn)}window.removeEventListener("resize",ze)}(),ee.remove()}return function pt(){var Be,$e=void 0,Ee=!1,ht=void 0,kt=void 0,ft=void 0,Nt=void 0,tn=void 0,_r=function(){$e&&Q.grabify(),ht&&q.userZoomingEnabled(!0),kt&&q.userPanningEnabled(!0),ft&&q.boxSelectionEnabled(!0)};window.addEventListener("resize",ze),Pt.on("resize",function(){ze()}).on(j.openMenuEvents,j.selector,function(vr){Q=this;var ai=this,vi=this===q;if(Ee&&(Re.style.display="none",Ee=!1,_r()),"function"==typeof j.commands){var Ao=j.commands(Q);Ao.then?Ao.then(function(ko){U=ko,To()}):(U=Ao,To())}else U=j.commands,To();function To(){if(U&&0!==U.length){ht=q.userZoomingEnabled(),q.userZoomingEnabled(!1),kt=q.userPanningEnabled(),q.userPanningEnabled(!1),ft=q.boxSelectionEnabled(),q.boxSelectionEnabled(!1),($e=Q.grabbable&&Q.grabbable())&&Q.ungrabify();var ko=void 0,Zt=void 0,jn=void 0;!vi&&ai&&ai.isNode instanceof Function&&ai.isNode()&&!ai.isParent()&&!j.atMouse?(ko=ai.renderedPosition(),Zt=ai.renderedOuterWidth(),ai.renderedOuterHeight(),jn=Zt/2,jn=!j.adaptativeNodeSpotlightRadius&&j.minSpotlightRadius?Math.max(jn,j.minSpotlightRadius):jn,jn=!j.adaptativeNodeSpotlightRadius&&j.maxSpotlightRadius?Math.min(jn,j.maxSpotlightRadius):jn):(ko=vr.renderedPosition||vr.cyRenderedPosition,jn=(Zt=1)/2,jn=j.minSpotlightRadius?Math.max(jn,j.minSpotlightRadius):jn,jn=j.maxSpotlightRadius?Math.min(jn,j.maxSpotlightRadius):jn),ve=z(ae),We=ko.x,Ie=ko.y,V=Zt/2+(j.menuRadius instanceof Function?j.menuRadius(Q):Number(j.menuRadius)),J=2*(V+j.activePadding),ze(),D(Re,{width:J+"px",height:J+"px",display:"block",left:ko.x-V+"px",top:ko.y-V+"px"}),function oe($e,Ee){P(".cxtmenu-item",Re);for(var Be=2*Math.PI/U.length,ht=Math.PI/2,kt=ht+Be,ft=0;ft<U.length;ft++){var Nt=U[ft],tn=(ht+kt)/2,Ot=($e+Ee)/2*Math.cos(tn),on=($e+Ee)/2*Math.sin(tn),hn=1*Math.abs(($e-Ee)*Math.cos(tn)),$n=1*Math.abs(($e-Ee)*Math.sin(tn));hn=Math.max(hn,$n);var _r=T({class:"cxtmenu-item"});D(_r,{color:j.itemColor,cursor:"default",display:"table","text-align":"center",position:"absolute","text-shadow":"-1px -1px 2px "+j.itemTextShadowColor+", 1px -1px 2px "+j.itemTextShadowColor+", -1px 1px 2px "+j.itemTextShadowColor+", 1px 1px 1px "+j.itemTextShadowColor,left:"50%",top:"50%","min-height":hn+"px",width:hn+"px",height:hn+"px",marginLeft:Ot-hn/2+"px",marginTop:-on-hn/2+"px"});var vr=T({class:"cxtmenu-content"});Nt.content instanceof HTMLElement?vr.appendChild(Nt.content):vr.innerHTML=Nt.content,D(vr,{width:hn+"px",height:hn+"px","vertical-align":"middle",display:"table-cell"}),D(vr,Nt.contentStyle||{}),(!0===Nt.disabled||!1===Nt.enabled)&&vr.setAttribute("class","cxtmenu-content cxtmenu-disabled"),Re.appendChild(_r),_r.appendChild(vr),ht+=Be,kt+=Be}}(V,jn),xe(V,jn),ue=void 0,Ee=!0,Nt=vr}}}).on("cxtdrag tapdrag",j.selector,Be=function(ai){if(Ee){ai.preventDefault();var vi=ai.originalEvent,Ao=vi.touches&&vi.touches.length>0,To=(Ao?vi.touches[0].pageX:vi.pageX)-window.pageXOffset,ko=(Ao?vi.touches[0].pageY:vi.pageY)-window.pageYOffset;ue=void 0;var Zt=To-ve.left-We,Io=ko-ve.top-Ie;0===Zt&&(Zt=.01);var jn=Math.sqrt(Zt*Zt+Io*Io),fs=Math.acos((Io*Io-jn*jn-Zt*Zt)/(-2*jn*Zt)),Ca=void 0;if(Q&&Q.isNode instanceof Function&&Q.isNode()&&!Q.isParent()&&!j.atMouse?(Ca=Q.renderedOuterWidth(),Je=Ca/2,Je=!j.adaptativeNodeSpotlightRadius&&j.minSpotlightRadius?Math.max(Je,j.minSpotlightRadius):Je,Je=!j.adaptativeNodeSpotlightRadius&&j.maxSpotlightRadius?Math.min(Je,j.maxSpotlightRadius):Je):(Je=(Ca=1)/2,Je=j.minSpotlightRadius?Math.max(Je,j.minSpotlightRadius):Je,Je=j.maxSpotlightRadius?Math.min(Je,j.maxSpotlightRadius):Je),V=Ca/2+(j.menuRadius instanceof Function?j.menuRadius(Q):Number(j.menuRadius)),jn<Je+j.spotlightPadding||"number"==typeof j.outsideMenuCancel&&jn>V+j.activePadding+j.outsideMenuCancel)return void xe(V,Je);xe(V,Je);var nc=Zt*V/jn,jc=Io*V/jn;Io>0&&(fs=Math.PI+Math.abs(fs-Math.PI));for(var al=2*Math.PI/U.length,ks=Math.PI/2,Sa=ks+al,rc=0;rc<U.length;rc++){var ll=U[rc],Si=ks<=fs&&fs<=Sa||ks<=fs+2*Math.PI&&fs+2*Math.PI<=Sa;if((!0===ll.disabled||!1===ll.enabled)&&(Si=!1),Si){ue=rc;break}ks+=al,Sa+=al}!function ye($e,Ee,Be,ht,kt){be.drawCommands=[$e,Ee,Be,ht,kt]}(nc,jc,V,fs,Je)}}).on("tapdrag",Be).on("mousemove",function(){if(void 0!==ue){var vr=U[ue].hover;vr&&(tn!==ue&&vr.apply(Q,[Q,Nt]),tn=ue)}}).on("cxttapend tapend",function(){if(Re.style.display="none",void 0!==ue){var vr=U[ue].select;vr&&(vr.apply(Q,[Q,Nt]),ue=void 0)}tn=void 0,Ee=!1,_r()})}(),{destroy:function(){ut()}}}},function(Ne,$,G){"use strict";Ne.exports=null!=Object.assign?Object.assign.bind(Object):function(N){for(var I=arguments.length,C=Array(I>1?I-1:0),P=1;P<I;P++)C[P-1]=arguments[P];return C.filter(function(D){return null!=D}).forEach(function(D){Object.keys(D).forEach(function(T){return N[T]=D[T]})}),N}},function(Ne,$,G){"use strict";Ne.exports={menuRadius:function(C){return 100},selector:"node",commands:[],fillColor:"rgba(0, 0, 0, 0.75)",activeFillColor:"rgba(1, 105, 217, 0.75)",activePadding:20,indicatorSize:24,separatorWidth:3,spotlightPadding:4,adaptativeNodeSpotlightRadius:!1,minSpotlightRadius:24,maxSpotlightRadius:38,openMenuEvents:"cxttapstart taphold",itemColor:"white",itemTextShadowColor:"transparent",zIndex:9999,atMouse:!1,outsideMenuCancel:!1}},function(Ne,$,G){"use strict";var I=function(M,z){for(var B=Object.keys(z),K=0,te=B.length;K<te;K++)M.style[B[K]]=z[B[K]]};Ne.exports={removeEles:function(M){for(var B=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).querySelectorAll(M),K=0;K<B.length;K++){var te=B[K];te.parentNode.removeChild(te)}},setStyles:I,createElement:function(M){M=M||{};var z=document.createElement(M.tag||"div");return z.className=M.class||"",M.style&&I(z,M.style),z},getPixelRatio:function(){return window.devicePixelRatio||1},getOffset:function(M){var z=M.getBoundingClientRect();return{left:z.left+document.body.scrollLeft+parseFloat(getComputedStyle(document.body)["padding-left"])+parseFloat(getComputedStyle(document.body)["border-left-width"]),top:z.top+document.body.scrollTop+parseFloat(getComputedStyle(document.body)["padding-top"])+parseFloat(getComputedStyle(document.body)["border-top-width"])}}}},function(Ne,$,G){"use strict";var N=G(0),I=function(P){P&&P("core","cxtmenu",N)};typeof cytoscape<"u"&&I(cytoscape),Ne.exports=I}])},3811:function(Pe,Ne,$){var G;Pe.exports=(G=$(7352),function(N){var I={};function C(P){if(I[P])return I[P].exports;var D=I[P]={i:P,l:!1,exports:{}};return N[P].call(D.exports,D,D.exports,C),D.l=!0,D.exports}return C.m=N,C.c=I,C.i=function(P){return P},C.d=function(P,D,T){C.o(P,D)||Object.defineProperty(P,D,{configurable:!1,enumerable:!0,get:T})},C.n=function(P){var D=P&&P.__esModule?function(){return P.default}:function(){return P};return C.d(D,"a",D),D},C.o=function(P,D){return Object.prototype.hasOwnProperty.call(P,D)},C.p="",C(C.s=7)}([function(N,I,C){"use strict";N.exports=null!=Object.assign?Object.assign.bind(Object):function(P){for(var D=arguments.length,T=Array(D>1?D-1:0),M=1;M<D;M++)T[M-1]=arguments[M];return T.forEach(function(z){null!=z&&Object.keys(z).forEach(function(B){return P[B]=z[B]})}),P}},function(N,I,C){"use strict";var D=C(5).getBoundingBox;N.exports={getRef:function T(M,z){return{getBoundingClientRect:function(){return D(M,z)}}}}},function(N,I,C){"use strict";var P=C(0),T=C(1).getRef,z=C(6).getContent,B={},te=C(8).createPopper;N.exports={getPopper:function j(q,ae){var Q=T(q,ae),ce=z(q,ae.content),ee=P({},B,ae.popper);return te(Q,ce,ee)}}},function(N,I,C){"use strict";var P=C(0),T=C(2).getPopper,z=C(1).getRef;function te(Q,ce){var ee=function(J){return J.isNode()?{w:J.renderedWidth(),h:J.renderedHeight()}:{w:3,h:3}},U=Q.cy();return P({},{renderedDimensions:ee,renderedPosition:function(J){return J.isNode()?function j(Q,ce){var ee=Q.renderedPosition(),Re=ce(Q);return{x:ee.x-Re.w/2,y:ee.y-Re.h/2}}(J,ee):function q(Q){var ce=Q.midpoint(),ee=Q.cy().pan(),Re=Q.cy().zoom();return{x:ce.x*Re+ee.x,y:ce.y*Re+ee.y}}(J)},popper:{},cy:U},ce)}function ae(Q){Q.length>1&&(console.warn("Popper.js Extension should only be used on one element."),console.warn("Ignoring all subsequent elements"))}N.exports={popper:function B(Q){return ae(this),T(this[0],te(this[0],Q))},popperRef:function K(Q){return ae(this),z(this[0],te(this[0],Q))}}},function(N,I,C){"use strict";var P=C(0),T=C(2).getPopper,z=C(1).getRef;function te(j,q){return P({},{boundingBox:{top:0,left:0,right:0,bottom:0,w:3,h:3},renderedDimensions:function(){return{w:3,h:3}},renderedPosition:function(){return{x:0,y:0}},popper:{},cy:j},q)}N.exports={popper:function B(j){return T(this,te(this,j))},popperRef:function K(j){return z(this,te(this,j))}}},function(N,I,C){"use strict";N.exports={getBoundingBox:function P(D,T){var M=T.renderedPosition,B=T.renderedDimensions,K=T.cy.container().getBoundingClientRect(),te=B(D),j=M(D);return{top:j.y+K.top,left:j.x+K.left,right:j.x+te.w+K.left,bottom:j.y+te.h+K.top,width:te.w,height:te.h}}}},function(N,I,C){"use strict";N.exports={getContent:function P(D,T){var M;if("function"!=typeof T){if(T instanceof HTMLElement)return T;throw new Error("Can not create popper from 'target' with unknown type")}if(null===(M=T(D)))throw new Error("No 'target' specified to create popper");return M}}},function(N,I,C){"use strict";var P=C(4),D=C(3),T=function(z){z&&(z("core","popper",P.popper),z("collection","popper",D.popper),z("core","popperRef",P.popperRef),z("collection","popperRef",D.popperRef))};typeof cytoscape<"u"&&T(cytoscape),N.exports=T},function(N,I){N.exports=G}]))},6864:(Pe,Ne,$)=>{"use strict";var G=$(406),N=$(5203),I=$(8817),C=$(4793),P=$(4152);function D(c){return c&&"object"==typeof c&&"default"in c?c:{default:c}}var T=D(G),M=D(N),z=D(I),B=D(C),K=D(P);function te(c){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(s){return typeof s}:function(s){return s&&"function"==typeof Symbol&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(c)}function j(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")}function q(c,s){for(var l=0;l<s.length;l++){var d=s[l];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(c,d.key,d)}}function ae(c,s,l){return s&&q(c.prototype,s),l&&q(c,l),Object.defineProperty(c,"prototype",{writable:!1}),c}function Q(c,s,l){return s in c?Object.defineProperty(c,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):c[s]=l,c}function ce(c,s){return function ee(c){if(Array.isArray(c))return c}(c)||function Re(c,s){var l=null==c?null:typeof Symbol<"u"&&c[Symbol.iterator]||c["@@iterator"];if(null!=l){var g,y,d=[],f=!0,p=!1;try{for(l=l.call(c);!(f=(g=l.next()).done)&&(d.push(g.value),!s||d.length!==s);f=!0);}catch(w){p=!0,y=w}finally{try{!f&&null!=l.return&&l.return()}finally{if(p)throw y}}return d}}(c,s)||function de(c,s){if(c){if("string"==typeof c)return U(c,s);var l=Object.prototype.toString.call(c).slice(8,-1);if("Object"===l&&c.constructor&&(l=c.constructor.name),"Map"===l||"Set"===l)return Array.from(c);if("Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return U(c,s)}}(c,s)||function L(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(c,s){(null==s||s>c.length)&&(s=c.length);for(var l=0,d=new Array(s);l<s;l++)d[l]=c[l];return d}var V=typeof window>"u"?null:window,J=V?V.navigator:null,ue=te(""),ve=te({}),oe=te(function(){}),xe=typeof HTMLElement>"u"?"undefined":te(HTMLElement),Le=function(s){return s&&s.instanceString&&qe(s.instanceString)?s.instanceString():null},ye=function(s){return null!=s&&te(s)==ue},qe=function(s){return null!=s&&te(s)===oe},ze=function(s){return!Ie(s)&&(Array.isArray?Array.isArray(s):null!=s&&s instanceof Array)},ke=function(s){return null!=s&&te(s)===ve&&!ze(s)&&s.constructor===Object},pe=function(s){return null!=s&&te(s)===te(1)&&!isNaN(s)},We=function(s){if("undefined"!==xe)return null!=s&&s instanceof HTMLElement},Ie=function(s){return Je(s)||Pt(s)},Je=function(s){return"collection"===Le(s)&&s._private.single},Pt=function(s){return"collection"===Le(s)&&!s._private.single},pt=function(s){return"core"===Le(s)},at=function(s){return"stylesheet"===Le(s)},$e=function(s){return null==s||!(""!==s&&!s.match(/^\s+$/))},ht=function(s){return function(s){return null!=s&&te(s)===ve}(s)&&qe(s.then)},ft=function(s,l){l||(l=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var p=[],g=0;g<arguments.length;g++)p.push(arguments[g]);return p.join("$")});var d=function f(){var y,p=this,g=arguments,w=l.apply(p,g),b=f.cache;return(y=b[w])||(y=b[w]=s.apply(p,g)),y};return d.cache={},d},Nt=ft(function(c){return c.replace(/([A-Z])/g,function(s){return"-"+s.toLowerCase()})}),tn=ft(function(c){return c.replace(/(-\w)/g,function(s){return s[1].toUpperCase()})}),Ot=ft(function(c,s){return c+s[0].toUpperCase()+s.substring(1)},function(c,s){return c+"$"+s}),on=function(s){return $e(s)?s:s.charAt(0).toUpperCase()+s.substring(1)},hn="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",$n="rgb[a]?\\(("+hn+"[%]?)\\s*,\\s*("+hn+"[%]?)\\s*,\\s*("+hn+"[%]?)(?:\\s*,\\s*("+hn+"))?\\)",_r="rgb[a]?\\((?:"+hn+"[%]?)\\s*,\\s*(?:"+hn+"[%]?)\\s*,\\s*(?:"+hn+"[%]?)(?:\\s*,\\s*(?:"+hn+"))?\\)",vr="hsl[a]?\\(("+hn+")\\s*,\\s*("+hn+"[%])\\s*,\\s*("+hn+"[%])(?:\\s*,\\s*("+hn+"))?\\)",ai="hsl[a]?\\((?:"+hn+")\\s*,\\s*(?:"+hn+"[%])\\s*,\\s*(?:"+hn+"[%])(?:\\s*,\\s*(?:"+hn+"))?\\)",To=function(s,l){return s<l?-1:s>l?1:0},Zt=null!=Object.assign?Object.assign.bind(Object):function(c){for(var s=arguments,l=1;l<s.length;l++){var d=s[l];if(null!=d)for(var f=Object.keys(d),p=0;p<f.length;p++){var g=f[p];c[g]=d[g]}}return c},nc={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},jc=function(s){for(var l=s.map,d=s.keys,f=d.length,p=0;p<f;p++){var g=d[p];if(ke(g))throw Error("Tried to set map with object key");p<d.length-1?(null==l[g]&&(l[g]={}),l=l[g]):l[g]=s.value}},al=function(s){for(var l=s.map,d=s.keys,f=d.length,p=0;p<f;p++){var g=d[p];if(ke(g))throw Error("Tried to get map with object key");if(null==(l=l[g]))return l}return l},ks=V?V.performance:null,Sa=ks&&ks.now?function(){return ks.now()}:function(){return Date.now()},rc=function(){if(V){if(V.requestAnimationFrame)return function(c){V.requestAnimationFrame(c)};if(V.mozRequestAnimationFrame)return function(c){V.mozRequestAnimationFrame(c)};if(V.webkitRequestAnimationFrame)return function(c){V.webkitRequestAnimationFrame(c)};if(V.msRequestAnimationFrame)return function(c){V.msRequestAnimationFrame(c)}}return function(c){c&&setTimeout(function(){c(Sa())},1e3/60)}}(),ll=function(s){return rc(s)},Si=Sa,na=9261,Ma=65599,ra=5381,td=function(s){for(var f,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:na,d=l;!(f=s.next()).done;)d=d*Ma+f.value|0;return d},cl=function(s){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:na;return l*Ma+s|0},ul=function(s){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ra;return(l<<5)+l+s|0},ps=function(s){return 2097152*s[0]+s[1]},gs=function(s,l){return[cl(s[0],l[0]),ul(s[1],l[1])]},Aa=function(s,l){var d={value:0,done:!1},f=0,p=s.length;return td({next:function(){return f<p?d.value=s.charCodeAt(f++):d.done=!0,d}},l)},Ph=function(){return Nh(arguments)},Nh=function(s){for(var l,d=0;d<s.length;d++){var f=s[d];l=0===d?Aa(f):Aa(f,l)}return l},nd=!0,rd=null!=console.warn,Tp=null!=console.trace,Uc=Number.MAX_SAFE_INTEGER||9007199254740991,ms=function(){return!0},Gc=function(){return!1},Ta=function(){return 0},$c=function(){},Sr=function(s){throw new Error(s)},kp=function(s){if(void 0===s)return nd;nd=!!s},ur=function(s){kp()&&(rd?console.warn(s):(console.log(s),Tp&&console.trace()))},Oo=function(s){return null==s?s:ze(s)?s.slice():ke(s)?function(s){return Zt({},s)}(s):s},dl=function(s,l){for(l=s="";s++<36;l+=51*s&52?(15^s?8^Math.random()*(20^s?16:4):4).toString(16):"-");return l},Ip={},od=function(){return Ip},yi=function(s){var l=Object.keys(s);return function(d){for(var f={},p=0;p<l.length;p++){var g=l[p],y=d?.[g];f[g]=void 0===y?s[g]:y}return f}},ia=function(s,l,d){for(var f=s.length-1;f>=0&&(s[f]!==l||(s.splice(f,1),!d));f--);},sd=function(s){s.splice(0,s.length)},vs=function(s,l,d){return d&&(l=Ot(d,l)),s[l]},ys=function(s,l,d,f){d&&(l=Ot(d,l)),s[l]=f},co=typeof Map<"u"?Map:function(){function c(){j(this,c),this._obj={}}return ae(c,[{key:"set",value:function(l,d){return this._obj[l]=d,this}},{key:"delete",value:function(l){return this._obj[l]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(l){return void 0!==this._obj[l]}},{key:"get",value:function(l){return this._obj[l]}}]),c}(),Bh=function(){function c(s){if(j(this,c),this._obj=Object.create(null),this.size=0,null!=s){var l;l=null!=s.instanceString&&s.instanceString()===this.instanceString()?s.toArray():s;for(var d=0;d<l.length;d++)this.add(l[d])}}return ae(c,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(l){var d=this._obj;1!==d[l]&&(d[l]=1,this.size++)}},{key:"delete",value:function(l){var d=this._obj;1===d[l]&&(d[l]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(l){return 1===this._obj[l]}},{key:"toArray",value:function(){var l=this;return Object.keys(this._obj).filter(function(d){return l.has(d)})}},{key:"forEach",value:function(l,d){return this.toArray().forEach(l,d)}}]),c}(),ka="undefined"!==(typeof Set>"u"?"undefined":te(Set))?Set:Bh,fl=function(s,l){var d=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==s&&void 0!==l&&pt(s)){var f=l.group;if(null==f&&(f=l.data&&null!=l.data.source&&null!=l.data.target?"edges":"nodes"),"nodes"===f||"edges"===f){this.length=1,this[0]=this;var p=this._private={cy:s,single:!0,data:l.data||{},position:l.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:f,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!l.selected,selectable:void 0===l.selectable||!!l.selectable,locked:!!l.locked,grabbed:!1,grabbable:void 0===l.grabbable||!!l.grabbable,pannable:void 0===l.pannable?"edges"===f:!!l.pannable,active:!1,classes:new ka,animation:{current:[],queue:[]},rscratch:{},scratch:l.scratch||{},edges:[],children:[],parent:l.parent&&l.parent.isNode()?l.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==p.position.x&&(p.position.x=0),null==p.position.y&&(p.position.y=0),l.renderedPosition){var g=l.renderedPosition,y=s.pan(),w=s.zoom();p.position={x:(g.x-y.x)/w,y:(g.y-y.y)/w}}var b=[];ze(l.classes)?b=l.classes:ye(l.classes)&&(b=l.classes.split(/\s+/));for(var _=0,E=b.length;_<E;_++){var S=b[_];!S||""===S||p.classes.add(S)}this.createEmitter();var O=l.style||l.css;O&&(ur("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(O)),(void 0===d||d)&&this.restore()}else Sr("An element must be of type `nodes` or `edges`; you specified `"+f+"`")}else Sr("An element must have a core reference and parameters set")},yr=function(s){return s={bfs:s.bfs||!s.dfs,dfs:s.dfs||!s.bfs},function(d,f,p){var g;ke(d)&&!Ie(d)&&(d=(g=d).roots||g.root,f=g.visit,p=g.directed),p=2!==arguments.length||qe(f)?p:f,f=qe(f)?f:function(){};for(var H,y=this._private.cy,w=d=ye(d)?this.filter(d):d,b=[],_=[],E={},S={},O={},R=0,W=this.byGroup(),X=W.nodes,ne=W.edges,re=0;re<w.length;re++){var se=w[re],De=se.id();se.isNode()&&(b.unshift(se),s.bfs&&(O[De]=!0,_.push(se)),S[De]=0)}for(var Ce=function(){var Fe=s.bfs?b.shift():b.pop(),Se=Fe.id();if(s.dfs){if(O[Se])return"continue";O[Se]=!0,_.push(Fe)}var ct,Xe=S[Se],Ve=E[Se],je=null!=Ve?Ve.source():null,Qe=null!=Ve?Ve.target():null,it=null==Ve?void 0:Fe.same(je)?Qe[0]:je[0];if(!0===(ct=f(Fe,Ve,it,R++,Xe)))return H=Fe,"break";if(!1===ct)return"break";for(var rt=Fe.connectedEdges().filter(function(mt){return(!p||mt.source().same(Fe))&&ne.has(mt)}),tt=0;tt<rt.length;tt++){var _t=rt[tt],Dt=_t.connectedNodes().filter(function(mt){return!mt.same(Fe)&&X.has(mt)}),yt=Dt.id();0!==Dt.length&&!O[yt]&&(b.push(Dt=Dt[0]),s.bfs&&(O[yt]=!0,_.push(Dt)),E[yt]=_t,S[yt]=S[Se]+1)}};0!==b.length;){var le=Ce();if("continue"!==le&&"break"===le)break}for(var _e=y.collection(),he=0;he<_.length;he++){var Te=_[he],Ae=E[Te.id()];null!=Ae&&_e.push(Ae),_e.push(Te)}return{path:y.collection(_e),found:y.collection(H)}}},Me={breadthFirstSearch:yr({bfs:!0}),depthFirstSearch:yr({dfs:!0})};Me.bfs=Me.breadthFirstSearch,Me.dfs=Me.depthFirstSearch;var we=yi({root:null,weight:function(s){return 1},directed:!1}),Ue={dijkstra:function(s){if(!ke(s)){var l=arguments;s={root:l[0],weight:l[1],directed:l[2]}}var d=we(s),f=d.root,p=d.weight,g=d.directed,y=this,w=p,b=ye(f)?this.filter(f)[0]:f[0],_={},E={},S={},O=this.byGroup(),R=O.nodes,H=O.edges;H.unmergeBy(function(Xe){return Xe.isLoop()});for(var W=function(Ve){return _[Ve.id()]},X=function(Ve,je){_[Ve.id()]=je,ne.updateItem(Ve)},ne=new M.default(function(Xe,Ve){return W(Xe)-W(Ve)}),re=0;re<R.length;re++){var se=R[re];_[se.id()]=se.same(b)?0:1/0,ne.push(se)}for(var De=function(Ve,je){for(var ct,Qe=(g?Ve.edgesTo(je):Ve.edgesWith(je)).intersect(H),it=1/0,rt=0;rt<Qe.length;rt++){var tt=Qe[rt],_t=w(tt);(_t<it||!ct)&&(it=_t,ct=tt)}return{edge:ct,dist:it}};ne.size()>0;){var Ce=ne.pop(),le=W(Ce),_e=Ce.id();if(S[_e]=le,le!==1/0)for(var he=Ce.neighborhood().intersect(R),Te=0;Te<he.length;Te++){var Ae=he[Te],ge=Ae.id(),Fe=De(Ce,Ae),Se=le+Fe.dist;Se<W(Ae)&&(X(Ae,Se),E[ge]={node:Ce,edge:Fe.edge})}}return{distanceTo:function(Ve){var je=ye(Ve)?R.filter(Ve)[0]:Ve[0];return S[je.id()]},pathTo:function(Ve){var je=ye(Ve)?R.filter(Ve)[0]:Ve[0],Qe=[],it=je,ct=it.id();if(je.length>0)for(Qe.unshift(je);E[ct];){var rt=E[ct];Qe.unshift(rt.edge),Qe.unshift(rt.node),ct=(it=rt.node).id()}return y.spawn(Qe)}}}},bt={kruskal:function(s){s=s||function(re){return 1};for(var l=this.byGroup(),d=l.nodes,f=l.edges,p=d.length,g=new Array(p),y=d,w=function(se){for(var De=0;De<g.length;De++)if(g[De].has(se))return De},b=0;b<p;b++)g[b]=this.spawn(d[b]);for(var _=f.sort(function(re,se){return s(re)-s(se)}),E=0;E<_.length;E++){var S=_[E],O=S.source()[0],R=S.target()[0],H=w(O),W=w(R),X=g[H],ne=g[W];H!==W&&(y.merge(S),X.merge(ne),g.splice(W,1))}return y}},lt=yi({root:null,goal:null,weight:function(s){return 1},heuristic:function(s){return 0},directed:!1}),dt={aStar:function(s){var l=this.cy(),d=lt(s),f=d.root,p=d.goal,g=d.heuristic,y=d.directed,w=d.weight;f=l.collection(f)[0],p=l.collection(p)[0];var re,se,b=f.id(),_=p.id(),E={},S={},O={},R=new M.default(function(ct,rt){return S[ct.id()]-S[rt.id()]}),H=new ka,W={},X={},ne=function(rt,tt){R.push(rt),H.add(tt)};ne(f,b),E[b]=0,S[b]=g(f);for(var le=0;R.size()>0;){if(se=(re=R.pop()).id(),H.delete(se),le++,se===_){for(var _e=[],he=p,Te=_,Ae=X[Te];_e.unshift(he),null!=Ae&&_e.unshift(Ae),null!=(he=W[Te]);)Ae=X[Te=he.id()];return{found:!0,distance:E[se],path:this.spawn(_e),steps:le}}O[se]=!0;for(var ge=re._private.edges,Fe=0;Fe<ge.length;Fe++){var Se=ge[Fe];if(this.hasElementWithId(Se.id())&&(!y||Se.data("source")===se)){var Xe=Se.source(),Ve=Se.target(),je=Xe.id()!==se?Xe:Ve,Qe=je.id();if(this.hasElementWithId(Qe)&&!O[Qe]){var it=E[se]+w(Se);if(!H.has(Qe)){E[Qe]=it,S[Qe]=it+g(je),ne(je,Qe),W[Qe]=re,X[Qe]=Se;continue}it<E[Qe]&&(E[Qe]=it,S[Qe]=it+g(je),W[Qe]=re,X[Qe]=Se)}}}}return{found:!1,distance:void 0,path:void 0,steps:le}}},Jt=yi({weight:function(s){return 1},directed:!1}),Bt={floydWarshall:function(s){for(var l=this.cy(),d=Jt(s),p=d.directed,g=d.weight,y=this.byGroup(),w=y.nodes,b=y.edges,_=w.length,E=_*_,S=function(_t){return w.indexOf(_t)},O=function(_t){return w[_t]},R=new Array(E),H=0;H<E;H++){var W=H%_;R[H]=(H-W)/_===W?0:1/0}for(var ne=new Array(E),re=new Array(E),se=0;se<b.length;se++){var De=b[se],Ce=De.source()[0],le=De.target()[0];if(Ce!==le){var _e=S(Ce),he=S(le),Te=_e*_+he,Ae=g(De);if(R[Te]>Ae&&(R[Te]=Ae,ne[Te]=he,re[Te]=De),!p){var ge=he*_+_e;!p&&R[ge]>Ae&&(R[ge]=Ae,ne[ge]=_e,re[ge]=De)}}}for(var Fe=0;Fe<_;Fe++)for(var Se=0;Se<_;Se++)for(var Xe=Se*_+Fe,Ve=0;Ve<_;Ve++){var je=Se*_+Ve,Qe=Fe*_+Ve;R[Xe]+R[Qe]<R[je]&&(R[je]=R[Xe]+R[Qe],ne[je]=ne[Xe])}var ct=function(_t){return S(function(_t){return(ye(_t)?l.filter(_t):_t)[0]}(_t))};return{distance:function(_t,Dt){var yt=ct(_t),mt=ct(Dt);return R[yt*_+mt]},path:function(_t,Dt){var yt=ct(_t),mt=ct(Dt),Ze=O(yt);if(yt===mt)return Ze.collection();if(null==ne[yt*_+mt])return l.collection();var xt=l.collection();for(xt.merge(Ze);yt!==mt;)xt.merge(re[yt*_+(yt=ne[yt*_+mt])]),xt.merge(O(yt));return xt}}}},zt=yi({weight:function(s){return 1},directed:!1,root:null}),gn={bellmanFord:function(s){var l=this,d=zt(s),p=d.directed,g=d.root,y=d.weight,w=this,b=this.cy(),_=this.byGroup(),E=_.edges,S=_.nodes,O=S.length,R=new co,H=!1,W=[];g=b.collection(g)[0],E.unmergeBy(function(en){return en.isLoop()});for(var X=E.length,ne=function(jt){var cn=R.get(jt.id());return cn||(cn={},R.set(jt.id(),cn)),cn},re=function(jt){return(ye(jt)?b.$(jt):jt)[0]},Ce=0;Ce<O;Ce++){var le=S[Ce],_e=ne(le);_e.dist=le.same(g)?0:1/0,_e.pred=null,_e.edge=null}for(var he=!1,Te=function(jt,cn,Hn,An,mn,Rt){var fe=An.dist+Rt;fe<mn.dist&&!Hn.same(An.edge)&&(mn.dist=fe,mn.pred=jt,mn.edge=Hn,he=!0)},Ae=1;Ae<O;Ae++){he=!1;for(var ge=0;ge<X;ge++){var Fe=E[ge],Se=Fe.source(),Xe=Fe.target(),Ve=y(Fe),je=ne(Se),Qe=ne(Xe);Te(Se,0,Fe,je,Qe,Ve),p||Te(Xe,0,Fe,Qe,je,Ve)}if(!he)break}if(he)for(var it=[],ct=0;ct<X;ct++){var rt=E[ct],tt=rt.source(),_t=rt.target(),Dt=y(rt),yt=ne(tt).dist,mt=ne(_t).dist;if(yt+Dt<mt||!p&&mt+Dt<yt){if(H||(ur("Graph contains a negative weight cycle for Bellman-Ford"),H=!0),!1===s.findNegativeWeightCycles)break;var Ze=[];yt+Dt<mt&&Ze.push(tt),!p&&mt+Dt<yt&&Ze.push(_t);for(var xt=Ze.length,Mt=0;Mt<xt;Mt++){var Lt=Ze[Mt],Vt=[Lt];Vt.push(ne(Lt).edge);for(var xn=ne(Lt).pred;-1===Vt.indexOf(xn);)Vt.push(xn),Vt.push(ne(xn).edge),xn=ne(xn).pred;for(var kn=(Vt=Vt.slice(Vt.indexOf(xn)))[0].id(),Ht=0,Ft=2;Ft<Vt.length;Ft+=2)Vt[Ft].id()<kn&&(kn=Vt[Ft].id(),Ht=Ft);(Vt=Vt.slice(Ht).concat(Vt.slice(0,Ht))).push(Vt[0]);var pn=Vt.map(function(en){return en.id()}).join(",");-1===it.indexOf(pn)&&(W.push(w.spawn(Vt)),it.push(pn))}}}return{distanceTo:function(jt){return ne(re(jt)).dist},pathTo:function(jt){for(var cn=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g,Hn=re(jt),An=[],mn=Hn;;){if(null==mn)return l.spawn();var Rt=ne(mn),fe=Rt.edge,st=Rt.pred;if(An.unshift(mn[0]),mn.same(cn)&&An.length>0)break;null!=fe&&An.unshift(fe),mn=st}return w.spawn(An)},hasNegativeWeightCycle:H,negativeWeightCycles:W}}},Ye=Math.sqrt(2),er=function(s,l,d){0===d.length&&Sr("Karger-Stein must be run on a connected (sub)graph");for(var f=d[s],y=l[f[1]],w=l[f[2]],b=d,_=b.length-1;_>=0;_--){var E=b[_],S=E[1],O=E[2];(l[S]===y&&l[O]===w||l[S]===w&&l[O]===y)&&b.splice(_,1)}for(var R=0;R<b.length;R++){var H=b[R];H[1]===w?(b[R]=H.slice(),b[R][1]=y):H[2]===w&&(b[R]=H.slice(),b[R][2]=y)}for(var W=0;W<l.length;W++)l[W]===w&&(l[W]=y);return b},Wt=function(s,l,d,f){for(;d>f;){var p=Math.floor(Math.random()*l.length);l=er(p,s,l),d--}return l},qt={kargerStein:function(){var s=this,l=this.byGroup(),d=l.nodes,f=l.edges;f.unmergeBy(function(Qe){return Qe.isLoop()});var p=d.length,g=f.length,y=Math.ceil(Math.pow(Math.log(p)/Math.LN2,2)),w=Math.floor(p/Ye);if(!(p<2)){for(var b=[],_=0;_<g;_++){var E=f[_];b.push([_,d.indexOf(E.source()),d.indexOf(E.target())])}for(var S=1/0,O=[],R=new Array(p),H=new Array(p),W=new Array(p),X=function(it,ct){for(var rt=0;rt<p;rt++)ct[rt]=it[rt]},ne=0;ne<=y;ne++){for(var re=0;re<p;re++)H[re]=re;var se=Wt(H,b.slice(),p,w),De=se.slice();X(H,W);var Ce=Wt(H,se,w,2),le=Wt(W,De,w,2);Ce.length<=le.length&&Ce.length<S?(S=Ce.length,O=Ce,X(H,R)):le.length<=Ce.length&&le.length<S&&(S=le.length,O=le,X(W,R))}for(var _e=this.spawn(O.map(function(Qe){return f[Qe[0]]})),he=this.spawn(),Te=this.spawn(),Ae=R[0],ge=0;ge<R.length;ge++){var Se=d[ge];R[ge]===Ae?he.merge(Se):Te.merge(Se)}var Xe=function(it){var ct=s.spawn();return it.forEach(function(rt){ct.merge(rt),rt.connectedEdges().forEach(function(tt){s.contains(tt)&&!_e.contains(tt)&&ct.merge(tt)})}),ct},Ve=[Xe(he),Xe(Te)];return{cut:_e,components:Ve,partition1:he,partition2:Te}}Sr("At least 2 nodes are required for Karger-Stein algorithm")}},Wn=function(s,l,d){return{x:s.x*l+d.x,y:s.y*l+d.y}},qn=function(s,l,d){return{x:(s.x-d.x)/l,y:(s.y-d.y)/l}},Yn=function(s){return{x:s[0],y:s[1]}},Ar=function(s,l){return Math.atan2(l,s)-Math.PI/2},Jr=Math.log2||function(c){return Math.log(c)/Math.log(2)},li=function(s){return s>0?1:s<0?-1:0},Or=function(s,l){return Math.sqrt(xr(s,l))},xr=function(s,l){var d=l.x-s.x,f=l.y-s.y;return d*d+f*f},bs=function(s){for(var l=s.length,d=0,f=0;f<l;f++)d+=s[f];for(var p=0;p<l;p++)s[p]=s[p]/d;return s},tr=function(s,l,d,f){return(1-f)*(1-f)*s+2*(1-f)*f*l+f*f*d},Yo=function(s,l,d,f){return{x:tr(s.x,l.x,d.x,f),y:tr(s.y,l.y,d.y,f)}},_n=function(s,l,d){return Math.max(s,Math.min(d,l))},Lr=function(s){if(null==s)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=s.x1&&null!=s.y1){if(null!=s.x2&&null!=s.y2&&s.x2>=s.x1&&s.y2>=s.y1)return{x1:s.x1,y1:s.y1,x2:s.x2,y2:s.y2,w:s.x2-s.x1,h:s.y2-s.y1};if(null!=s.w&&null!=s.h&&s.w>=0&&s.h>=0)return{x1:s.x1,y1:s.y1,x2:s.x1+s.w,y2:s.y1+s.h,w:s.w,h:s.h}}},nn=function(s,l){s.x1=Math.min(s.x1,l.x1),s.x2=Math.max(s.x2,l.x2),s.w=s.x2-s.x1,s.y1=Math.min(s.y1,l.y1),s.y2=Math.max(s.y2,l.y2),s.h=s.y2-s.y1},Vh=function(s,l,d){s.x1=Math.min(s.x1,l),s.x2=Math.max(s.x2,l),s.w=s.x2-s.x1,s.y1=Math.min(s.y1,d),s.y2=Math.max(s.y2,d),s.h=s.y2-s.y1},gr=function(s){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return s.x1-=l,s.x2+=l,s.y1-=l,s.y2+=l,s.w=s.x2-s.x1,s.h=s.y2-s.y1,s},Is=function(s){var d,f,p,g,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===l.length)d=f=p=g=l[0];else if(2===l.length)d=p=l[0],g=f=l[1];else if(4===l.length){var y=ce(l,4);d=y[0],f=y[1],p=y[2],g=y[3]}return s.x1-=g,s.x2+=f,s.y1-=d,s.y2+=p,s.w=s.x2-s.x1,s.h=s.y2-s.y1,s},gl=function(s,l){s.x1=l.x1,s.y1=l.y1,s.x2=l.x2,s.y2=l.y2,s.w=s.x2-s.x1,s.h=s.y2-s.y1},Xo=function(s,l){return!(s.x1>l.x2||l.x1>s.x2||s.x2<l.x1||l.x2<s.x1||s.y2<l.y1||l.y2<s.y1||s.y1>l.y2||l.y1>s.y2)},ws=function(s,l,d){return s.x1<=l&&l<=s.x2&&s.y1<=d&&d<=s.y2},Wc=function(s,l){return ws(s,l.x,l.y)},Os=function(s,l){return ws(s,l.x1,l.y1)&&ws(s,l.x2,l.y2)},Ia=function(s,l,d,f,p,g,y){var E,w=dd(p,g),b=p/2,_=g/2,O=f-_-y;if((E=Ro(s,l,d,f,d-b+w-y,O,d+b-w+y,O,!1)).length>0)return E;var W=d+b+y;if((E=Ro(s,l,d,f,W,f-_+w-y,W,f+_-w+y,!1)).length>0)return E;var De=f+_+y;if((E=Ro(s,l,d,f,d-b+w-y,De,d+b-w+y,De,!1)).length>0)return E;var ge,_e=d-b-y;if((E=Ro(s,l,d,f,_e,f-_+w-y,_e,f+_-w+y,!1)).length>0)return E;var Fe=d-b+w,Se=f-_+w;if((ge=_s(s,l,d,f,Fe,Se,w+y)).length>0&&ge[0]<=Fe&&ge[1]<=Se)return[ge[0],ge[1]];var Xe=d+b-w,Ve=f-_+w;if((ge=_s(s,l,d,f,Xe,Ve,w+y)).length>0&&ge[0]>=Xe&&ge[1]<=Ve)return[ge[0],ge[1]];var je=d+b-w,Qe=f+_-w;if((ge=_s(s,l,d,f,je,Qe,w+y)).length>0&&ge[0]>=je&&ge[1]>=Qe)return[ge[0],ge[1]];var it=d-b+w,ct=f+_-w;return(ge=_s(s,l,d,f,it,ct,w+y)).length>0&&ge[0]<=it&&ge[1]>=ct?[ge[0],ge[1]]:[]},ld=function(s,l,d,f,p,g,y){var w=y,b=Math.min(d,p),_=Math.max(d,p),E=Math.min(f,g),S=Math.max(f,g);return b-w<=s&&s<=_+w&&E-w<=l&&l<=S+w},qc=function(s,l,d,f,p,g,y,w,b){var __x1=Math.min(d,y,p)-b,__x2=Math.max(d,y,p)+b,__y1=Math.min(f,w,g)-b,__y2=Math.max(f,w,g)+b;return!(s<__x1||s>__x2||l<__y1||l>__y2)},cd=function(s,l,d,f,p,g,y,w){var O=[];!function(s,l,d,f,p){var y,w,b,_,E,S,O,R;0===s&&(s=1e-5),b=-27*(f/=s)+(l/=s)*(9*(d/=s)-l*l*2),y=(w=(3*d-l*l)/9)*w*w+(b/=54)*b,p[1]=0,O=l/3,y>0?(E=(E=b+Math.sqrt(y))<0?-Math.pow(-E,1/3):Math.pow(E,1/3),S=(S=b-Math.sqrt(y))<0?-Math.pow(-S,1/3):Math.pow(S,1/3),p[0]=-O+E+S,p[4]=p[2]=-(O+=(E+S)/2),O=Math.sqrt(3)*(-S+E)/2,p[3]=O,p[5]=-O):(p[5]=p[3]=0,0===y?(R=b<0?-Math.pow(-b,1/3):Math.pow(b,1/3),p[0]=2*R-O,p[4]=p[2]=-(R+O)):(_=(w=-w)*w*w,_=Math.acos(b/Math.sqrt(_)),R=2*Math.sqrt(w),p[0]=-O+R*Math.cos(_/3),p[2]=-O+R*Math.cos((_+2*Math.PI)/3),p[4]=-O+R*Math.cos((_+4*Math.PI)/3)))}(1*d*d-4*d*p+2*d*y+4*p*p-4*p*y+y*y+f*f-4*f*g+2*f*w+4*g*g-4*g*w+w*w,9*d*p-3*d*d-3*d*y-6*p*p+3*p*y+9*f*g-3*f*f-3*f*w-6*g*g+3*g*w,3*d*d-6*d*p+d*y-d*s+2*p*p+2*p*s-y*s+3*f*f-6*f*g+f*w-f*l+2*g*g+2*g*l-w*l,1*d*p-d*d+d*s-p*s+f*g-f*f+f*l-g*l,O);for(var H=[],W=0;W<6;W+=2)Math.abs(O[W+1])<1e-7&&O[W]>=0&&O[W]<=1&&H.push(O[W]);H.push(1),H.push(0);for(var ne,re,se,X=-1,De=0;De<H.length;De++)ne=Math.pow(1-H[De],2)*d+2*(1-H[De])*H[De]*p+H[De]*H[De]*y,re=Math.pow(1-H[De],2)*f+2*(1-H[De])*H[De]*g+H[De]*H[De]*w,se=Math.pow(ne-s,2)+Math.pow(re-l,2),X>=0?se<X&&(X=se):X=se;return X},Rp=function(s,l,d,f,p,g){var y=[s-d,l-f],w=[p-d,g-f],b=w[0]*w[0]+w[1]*w[1],_=y[0]*y[0]+y[1]*y[1],E=y[0]*w[0]+y[1]*w[1],S=E*E/b;return E<0?_:S>b?(s-p)*(s-p)+(l-g)*(l-g):_-S},Mr=function(s,l,d){for(var f,p,g,y,b=0,_=0;_<d.length/2;_++)if(p=d[2*_+1],_+1<d.length/2?(g=d[2*(_+1)],y=d[2*(_+1)+1]):(g=d[2*(_+1-d.length/2)],y=d[2*(_+1-d.length/2)+1]),(f=d[2*_])!=s||g!=s){if(!(f>=s&&s>=g||f<=s&&s<=g))continue;(s-f)/(g-f)*(y-p)+p>l&&b++}return b%2!=0},Ko=function(s,l,d,f,p,g,y,w,b){var E,H,_=new Array(d.length);null!=w[0]?(E=Math.atan(w[1]/w[0]),w[0]<0?E+=Math.PI/2:E=-E-Math.PI/2):E=w;for(var S=Math.cos(-E),O=Math.sin(-E),R=0;R<_.length/2;R++)_[2*R]=g/2*(d[2*R]*S-d[2*R+1]*O),_[2*R+1]=y/2*(d[2*R+1]*S+d[2*R]*O),_[2*R]+=f,_[2*R+1]+=p;if(b>0){var W=Oa(_,-b);H=Er(W)}else H=_;return Mr(s,l,H)},Er=function(s){for(var y,w,b,_,l=new Array(s.length/2),E=0;E<s.length/4;E++){E<s.length/4-1?(y=s[4*(E+1)],w=s[4*(E+1)+1],b=s[4*(E+1)+2],_=s[4*(E+1)+3]):(y=s[0],w=s[1],b=s[2],_=s[3]);var S=Ro(s[4*E],s[4*E+1],s[4*E+2],s[4*E+3],y,w,b,_,!0);l[2*E]=S[0],l[2*E+1]=S[1]}return l},Oa=function(s,l){for(var f,p,g,y,d=new Array(2*s.length),w=0;w<s.length/2;w++){w<s.length/2-1?(g=s[2*(w+1)],y=s[2*(w+1)+1]):(g=s[0],y=s[1]);var b=y-(p=s[2*w+1]),_=-(g-(f=s[2*w])),E=Math.sqrt(b*b+_*_),S=b/E,O=_/E;d[4*w]=f+S*l,d[4*w+1]=p+O*l,d[4*w+2]=g+S*l,d[4*w+3]=y+O*l}return d},Ra=function(s,l,d,f,p,g,y){return s-=p,l-=g,(s/=d/2+y)*s+(l/=f/2+y)*l<=1},_s=function(s,l,d,f,p,g,y){var w=[d-s,f-l],b=[s-p,l-g],_=w[0]*w[0]+w[1]*w[1],E=2*(b[0]*w[0]+b[1]*w[1]),O=E*E-4*_*(b[0]*b[0]+b[1]*b[1]-y*y);if(O<0)return[];var R=(-E+Math.sqrt(O))/(2*_),H=(-E-Math.sqrt(O))/(2*_),W=Math.min(R,H),X=Math.max(R,H),ne=[];if(W>=0&&W<=1&&ne.push(W),X>=0&&X<=1&&ne.push(X),0===ne.length)return[];var re=ne[0]*w[0]+s,se=ne[0]*w[1]+l;return ne.length>1?ne[0]==ne[1]?[re,se]:[re,se,ne[1]*w[0]+s,ne[1]*w[1]+l]:[re,se]},Pa=function(s,l,d){return l<=s&&s<=d||d<=s&&s<=l?s:s<=l&&l<=d||d<=l&&l<=s?l:d},Ro=function(s,l,d,f,p,g,y,w,b){var _=s-p,E=d-s,S=y-p,O=l-g,R=f-l,H=w-g,W=S*O-H*_,X=E*O-R*_,ne=H*E-S*R;if(0!==ne){var re=W/ne,se=X/ne;return-.001<=re&&re<=1.001&&-.001<=se&&se<=1.001||b?[s+re*E,l+re*R]:[]}return 0===W||0===X?Pa(s,d,y)===y?[y,w]:Pa(s,d,p)===p?[p,g]:Pa(p,y,d)===d?[d,f]:[]:[]},ml=function(s,l,d,f,p,g,y,w){var _,O,b=[],E=new Array(d.length),S=!0;if(null==g&&(S=!1),S){for(var R=0;R<E.length/2;R++)E[2*R]=d[2*R]*g+f,E[2*R+1]=d[2*R+1]*y+p;if(w>0){var H=Oa(E,-w);O=Er(H)}else O=E}else O=d;for(var ne,re,se=0;se<O.length/2;se++)se<O.length/2-1?(ne=O[2*(se+1)],re=O[2*(se+1)+1]):(ne=O[0],re=O[1]),0!==(_=Ro(s,l,f,p,O[2*se],O[2*se+1],ne,re)).length&&b.push(_[0],_[1]);return b},ic=function(s,l,d){var f=[s[0]-l[0],s[1]-l[1]],p=Math.sqrt(f[0]*f[0]+f[1]*f[1]),g=(p-d)/p;return g<0&&(g=1e-5),[l[0]+g*f[0],l[1]+g*f[1]]},Zi=function(s,l){var d=vl(s,l);return Yc(d)},Yc=function(s){for(var l,d,f=s.length/2,p=1/0,g=1/0,y=-1/0,w=-1/0,b=0;b<f;b++)l=s[2*b],d=s[2*b+1],p=Math.min(p,l),y=Math.max(y,l),g=Math.min(g,d),w=Math.max(w,d);for(var _=2/(y-p),E=2/(w-g),S=0;S<f;S++)l=s[2*S]=s[2*S]*_,d=s[2*S+1]=s[2*S+1]*E,p=Math.min(p,l),y=Math.max(y,l),g=Math.min(g,d),w=Math.max(w,d);if(g<-1)for(var O=0;O<f;O++)d=s[2*O+1]=s[2*O+1]+(-1-g);return s},vl=function(s,l){var d=1/s*2*Math.PI,f=s%2==0?Math.PI/2+d/2:Math.PI/2;f+=l;for(var g,p=new Array(2*s),y=0;y<s;y++)g=y*d+f,p[2*y]=Math.cos(g),p[2*y+1]=Math.sin(-g);return p},dd=function(s,l){return Math.min(s/4,l/4,8)},St=function(s,l){return Math.min(s/10,l/10,8)},Xc=function(s,l){return{heightOffset:Math.min(15,.05*l),widthOffset:Math.min(100,.25*s),ctrlPtOffsetPct:.05}},Np=yi({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(s){return 1}}),hd={pageRank:function(s){for(var l=Np(s),d=l.dampingFactor,f=l.precision,p=l.iterations,g=l.weight,y=this._private.cy,w=this.byGroup(),b=w.nodes,_=w.edges,E=b.length,O=_.length,R=new Array(E*E),H=new Array(E),W=(1-d)/E,X=0;X<E;X++){for(var ne=0;ne<E;ne++)R[X*E+ne]=0;H[X]=0}for(var se=0;se<O;se++){var De=_[se],Ce=De.data("source"),le=De.data("target");if(Ce!==le){var _e=b.indexOfId(Ce),he=b.indexOfId(le),Te=g(De);R[he*E+_e]+=Te,H[_e]+=Te}}for(var ge=1/E+W,Fe=0;Fe<E;Fe++)if(0===H[Fe])for(var Se=0;Se<E;Se++)R[Se*E+Fe]=ge;else for(var Ve=0;Ve<E;Ve++){var je=Ve*E+Fe;R[je]=R[je]/H[Fe]+W}for(var ct,Qe=new Array(E),it=new Array(E),rt=0;rt<E;rt++)Qe[rt]=1;for(var tt=0;tt<p;tt++){for(var _t=0;_t<E;_t++)it[_t]=0;for(var Dt=0;Dt<E;Dt++)for(var yt=0;yt<E;yt++)it[Dt]+=R[Dt*E+yt]*Qe[yt];bs(it),ct=Qe,Qe=it,it=ct;for(var Ze=0,xt=0;xt<E;xt++){var Mt=ct[xt]-Qe[xt];Ze+=Mt*Mt}if(Ze<f)break}return{rank:function(xn){return xn=y.collection(xn)[0],Qe[b.indexOf(xn)]}}}},Mv=yi({root:null,weight:function(s){return 1},directed:!1,alpha:0}),Kc={degreeCentralityNormalized:function(s){s=Mv(s);var l=this.cy(),d=this.nodes(),f=d.length;if(s.directed){for(var _={},E={},S=0,O=0,R=0;R<f;R++){var H=d[R],W=H.id();s.root=H;var X=this.degreeCentrality(s);S<X.indegree&&(S=X.indegree),O<X.outdegree&&(O=X.outdegree),_[W]=X.indegree,E[W]=X.outdegree}return{indegree:function(re){return 0==S?0:(ye(re)&&(re=l.filter(re)),_[re.id()]/S)},outdegree:function(re){return 0===O?0:(ye(re)&&(re=l.filter(re)),E[re.id()]/O)}}}for(var p={},g=0,y=0;y<f;y++){var w=d[y];s.root=w;var b=this.degreeCentrality(s);g<b.degree&&(g=b.degree),p[w.id()]=b.degree}return{degree:function(re){return 0===g?0:(ye(re)&&(re=l.filter(re)),p[re.id()]/g)}}},degreeCentrality:function(s){s=Mv(s);var l=this.cy(),d=this,p=s.root,g=s.weight,y=s.directed,w=s.alpha;if(p=l.collection(p)[0],y){for(var O=p.connectedEdges(),R=O.filter(function(Ce){return Ce.target().same(p)&&d.has(Ce)}),H=O.filter(function(Ce){return Ce.source().same(p)&&d.has(Ce)}),W=R.length,X=H.length,ne=0,re=0,se=0;se<R.length;se++)ne+=g(R[se]);for(var De=0;De<H.length;De++)re+=g(H[De]);return{indegree:Math.pow(W,1-w)*Math.pow(ne,w),outdegree:Math.pow(X,1-w)*Math.pow(re,w)}}for(var b=p.connectedEdges().intersection(d),_=b.length,E=0,S=0;S<b.length;S++)E+=g(b[S]);return{degree:Math.pow(_,1-w)*Math.pow(E,w)}}};Kc.dc=Kc.degreeCentrality,Kc.dcn=Kc.degreeCentralityNormalised=Kc.degreeCentralityNormalized;var Av=yi({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Zo={closenessCentralityNormalized:function(s){for(var l=Av(s),d=l.harmonic,f=l.weight,p=l.directed,g=this.cy(),y={},w=0,b=this.nodes(),_=this.floydWarshall({weight:f,directed:p}),E=0;E<b.length;E++){for(var S=0,O=b[E],R=0;R<b.length;R++)if(E!==R){var H=_.distance(O,b[R]);S+=d?1/H:H}d||(S=1/S),w<S&&(w=S),y[O.id()]=S}return{closeness:function(X){return 0==w?0:(X=ye(X)?g.filter(X)[0].id():X.id(),y[X]/w)}}},closenessCentrality:function(s){var l=Av(s),d=l.root,f=l.weight,p=l.directed,g=l.harmonic;d=this.filter(d)[0];for(var y=this.dijkstra({root:d,weight:f,directed:p}),w=0,b=this.nodes(),_=0;_<b.length;_++){var E=b[_];if(!E.same(d)){var S=y.distanceTo(E);w+=g?1/S:S}}return g?w:1/w}};Zo.cc=Zo.closenessCentrality,Zo.ccn=Zo.closenessCentralityNormalised=Zo.closenessCentralityNormalized;var Ps=yi({weight:null,directed:!1}),Tv={betweennessCentrality:function(s){for(var l=Ps(s),d=l.directed,f=l.weight,p=null!=f,g=this.cy(),y=this.nodes(),w={},b={},_=0,E={set:function(re,se){b[re]=se,se>_&&(_=se)},get:function(re){return b[re]}},S=0;S<y.length;S++){var O=y[S],R=O.id();w[R]=d?O.outgoers().nodes():O.openNeighborhood().nodes(),E.set(R,0)}for(var H=function(re){for(var se=y[re].id(),De=[],Ce={},le={},_e={},he=new M.default(function(yt,mt){return _e[yt]-_e[mt]}),Te=0;Te<y.length;Te++){var Ae=y[Te].id();Ce[Ae]=[],le[Ae]=0,_e[Ae]=1/0}for(le[se]=1,_e[se]=0,he.push(se);!he.empty();){var ge=he.pop();if(De.push(ge),p)for(var Fe=0;Fe<w[ge].length;Fe++){var Ve,Se=w[ge][Fe],Xe=g.getElementById(ge);Ve=Xe.edgesTo(Se).length>0?Xe.edgesTo(Se)[0]:Se.edgesTo(Xe)[0];var je=f(Ve);Se=Se.id(),_e[Se]>_e[ge]+je&&(_e[Se]=_e[ge]+je,he.nodes.indexOf(Se)<0?he.push(Se):he.updateItem(Se),le[Se]=0,Ce[Se]=[]),_e[Se]==_e[ge]+je&&(le[Se]=le[Se]+le[ge],Ce[Se].push(ge))}else for(var Qe=0;Qe<w[ge].length;Qe++){var it=w[ge][Qe].id();_e[it]==1/0&&(he.push(it),_e[it]=_e[ge]+1),_e[it]==_e[ge]+1&&(le[it]=le[it]+le[ge],Ce[it].push(ge))}}for(var ct={},rt=0;rt<y.length;rt++)ct[y[rt].id()]=0;for(;De.length>0;){for(var tt=De.pop(),_t=0;_t<Ce[tt].length;_t++){var Dt=Ce[tt][_t];ct[Dt]=ct[Dt]+le[Dt]/le[tt]*(1+ct[tt])}tt!=y[re].id()&&E.set(tt,E.get(tt)+ct[tt])}},W=0;W<y.length;W++)H(W);var X={betweenness:function(re){var se=g.collection(re).id();return E.get(se)},betweennessNormalized:function(re){if(0==_)return 0;var se=g.collection(re).id();return E.get(se)/_}};return X.betweennessNormalised=X.betweennessNormalized,X}};Tv.bc=Tv.betweennessCentrality;var q1=yi({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(c){return 1}]}),Na=function(s,l){for(var d=0,f=0;f<l.length;f++)d+=l[f](s);return d},fd=function(s,l){for(var d,f=0;f<l;f++){d=0;for(var p=0;p<l;p++)d+=s[p*l+f];for(var g=0;g<l;g++)s[g*l+f]=s[g*l+f]/d}},Lp=function(s,l,d){for(var f=new Array(d*d),p=0;p<d;p++){for(var g=0;g<d;g++)f[p*d+g]=0;for(var y=0;y<d;y++)for(var w=0;w<d;w++)f[p*d+w]+=s[p*d+y]*l[y*d+w]}return f},Fp=function(s,l,d){for(var f=s.slice(0),p=1;p<d;p++)s=Lp(s,f,l);return s},kv=function(s,l,d){for(var f=new Array(l*l),p=0;p<l*l;p++)f[p]=Math.pow(s[p],d);return fd(f,l),f},La=function(s,l,d,f){for(var p=0;p<d;p++)if(Math.round(s[p]*Math.pow(10,f))/Math.pow(10,f)!=Math.round(l[p]*Math.pow(10,f))/Math.pow(10,f))return!1;return!0},f_=function(s,l){for(var d=0;d<s.length;d++)if(!l[d]||s[d].id()!==l[d].id())return!1;return!0},Iv=function(s){for(var l=this.nodes(),d=this.edges(),f=this.cy(),p=function(s){return q1(s)}(s),g={},y=0;y<l.length;y++)g[l[y].id()]=y;for(var E,w=l.length,b=w*w,_=new Array(b),S=0;S<b;S++)_[S]=0;for(var O=0;O<d.length;O++){var R=d[O],H=g[R.source().id()],W=g[R.target().id()],X=Na(R,p.attributes);_[H*w+W]+=X,_[W*w+H]+=X}(function(s,l,d){for(var f=0;f<l;f++)s[f*l+f]=d})(_,w,p.multFactor),fd(_,w);for(var ne=!0,re=0;ne&&re<p.maxIterations;)ne=!1,E=Fp(_,w,p.expandFactor),_=kv(E,w,p.inflateFactor),La(_,E,b,4)||(ne=!0),re++;var se=function(s,l,d,f){for(var p=[],g=0;g<l;g++){for(var y=[],w=0;w<l;w++)Math.round(1e3*s[g*l+w])/1e3>0&&y.push(d[w]);0!==y.length&&p.push(f.collection(y))}return p}(_,w,l,f);return se=function(s){for(var l=0;l<s.length;l++)for(var d=0;d<s.length;d++)l!=d&&f_(s[l],s[d])&&s.splice(d,1);return s}(se),se},Ov={markovClustering:Iv,mcl:Iv},Rv=function(s){return s},ei=function(s,l){return Math.abs(l-s)},Pv=function(s,l,d){return s+ei(l,d)},Bp=function(s,l,d){return s+Math.pow(d-l,2)},fn=function(s){return Math.sqrt(s)},Po=function(s,l,d){return Math.max(s,ei(l,d))},nr=function(s,l,d,f,p){for(var g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Rv,y=f,_=0;_<s;_++)y=p(y,l(_),d(_));return g(y)},ci={euclidean:function(s,l,d){return s>=2?nr(s,l,d,0,Bp,fn):nr(s,l,d,0,Pv)},squaredEuclidean:function(s,l,d){return nr(s,l,d,0,Bp)},manhattan:function(s,l,d){return nr(s,l,d,0,Pv)},max:function(s,l,d){return nr(s,l,d,-1/0,Po)}};function Mi(c,s,l,d,f,p){var g;return g=qe(c)?c:ci[c]||ci.euclidean,0===s&&qe(c)?g(f,p):g(s,l,d,f,p)}ci["squared-euclidean"]=ci.squaredEuclidean,ci.squaredeuclidean=ci.squaredEuclidean;var gd=yi({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),uo=function(s){return gd(s)},xs=function(s,l,d,f,p){var y="kMedoids"!==p?function(E){return d[E]}:function(E){return f[E](d)};return Mi(s,f.length,y,function(S){return f[S](l)},d,l)},Yt=function(s,l,d){for(var f=d.length,p=new Array(f),g=new Array(f),y=new Array(l),w=null,b=0;b<f;b++)p[b]=s.min(d[b]).value,g[b]=s.max(d[b]).value;for(var _=0;_<l;_++){w=[];for(var E=0;E<f;E++)w[E]=Math.random()*(g[E]-p[E])+p[E];y[_]=w}return y},In=function(s,l,d,f,p){for(var g=1/0,y=0,w=0;w<l.length;w++){var b=xs(d,s,l[w],f,p);b<g&&(g=b,y=w)}return y},qr=function(s,l,d){for(var f=[],p=null,g=0;g<l.length;g++)d[(p=l[g]).id()]===s&&f.push(p);return f},Ls=function(s,l,d){return Math.abs(l-s)<=d},oc=function(s,l,d){for(var f=0;f<s.length;f++)for(var p=0;p<s[f].length;p++)if(Math.abs(s[f][p]-l[f][p])>d)return!1;return!0},Ji=function(s,l,d){for(var f=0;f<d;f++)if(s===l[f])return!0;return!1},sc=function(s,l){var d=new Array(l);if(s.length<50)for(var f=0;f<l;f++){for(var p=s[Math.floor(Math.random()*s.length)];Ji(p,d,f);)p=s[Math.floor(Math.random()*s.length)];d[f]=p}else for(var g=0;g<l;g++)d[g]=s[Math.floor(Math.random()*s.length)];return d},ti=function(s,l,d){for(var f=0,p=0;p<l.length;p++)f+=xs("manhattan",l[p],s,d,"kMedoids");return f},Pn=function(s,l,d,f,p){for(var g,y,w=0;w<l.length;w++)for(var b=0;b<s.length;b++)f[w][b]=Math.pow(d[w][b],p.m);for(var _=0;_<s.length;_++)for(var E=0;E<p.attributes.length;E++){g=0,y=0;for(var S=0;S<l.length;S++)g+=f[S][_]*p.attributes[E](l[S]),y+=f[S][_];s[_][E]=g/y}},Vp=function(s,l,d,f,p){for(var g=0;g<s.length;g++)l[g]=s[g].slice();for(var y,w,b,_=2/(p.m-1),E=0;E<d.length;E++)for(var S=0;S<f.length;S++){y=0;for(var O=0;O<d.length;O++)w=xs(p.distance,f[S],d[E],p.attributes,"cmeans"),b=xs(p.distance,f[S],d[O],p.attributes,"cmeans"),y+=Math.pow(w/b,_);s[S][E]=1/y}},Hp=function(s){var p,g,y,w,b,l=this.cy(),d=this.nodes(),f=uo(s);w=new Array(d.length);for(var _=0;_<d.length;_++)w[_]=new Array(f.k);y=new Array(d.length);for(var E=0;E<d.length;E++)y[E]=new Array(f.k);for(var S=0;S<d.length;S++){for(var O=0,R=0;R<f.k;R++)y[S][R]=Math.random(),O+=y[S][R];for(var H=0;H<f.k;H++)y[S][H]=y[S][H]/O}g=new Array(f.k);for(var W=0;W<f.k;W++)g[W]=new Array(f.attributes.length);b=new Array(d.length);for(var X=0;X<d.length;X++)b[X]=new Array(f.k);for(var ne=!0,re=0;ne&&re<f.maxIterations;)ne=!1,Pn(g,d,y,b,f),Vp(y,w,g,d,f),oc(y,w,f.sensitivityThreshold)||(ne=!0),re++;return p=function(s,l,d,f){for(var p=new Array(d.k),g=0;g<p.length;g++)p[g]=[];for(var y,w,b=0;b<l.length;b++){y=-1/0,w=-1;for(var _=0;_<l[0].length;_++)l[b][_]>y&&(y=l[b][_],w=_);p[w].push(s[b])}for(var E=0;E<p.length;E++)p[E]=f.collection(p[E]);return p}(d,y,f,l),{clusters:p,degreeOfMembership:y}},Zc={kMeans:function(s){var w,l=this.cy(),d=this.nodes(),f=null,p=uo(s),g=new Array(p.k),y={};w=p.testMode?"number"==typeof p.testCentroids?Yt(d,p.k,p.attributes):"object"===te(p.testCentroids)?p.testCentroids:Yt(d,p.k,p.attributes):Yt(d,p.k,p.attributes);for(var b=!0,_=0;b&&_<p.maxIterations;){for(var E=0;E<d.length;E++)y[(f=d[E]).id()]=In(f,w,p.distance,p.attributes,"kMeans");b=!1;for(var S=0;S<p.k;S++){var O=qr(S,d,y);if(0!==O.length){for(var R=p.attributes.length,H=w[S],W=new Array(R),X=new Array(R),ne=0;ne<R;ne++){X[ne]=0;for(var re=0;re<O.length;re++)X[ne]+=p.attributes[ne](f=O[re]);W[ne]=X[ne]/O.length,Ls(W[ne],H[ne],p.sensitivityThreshold)||(b=!0)}w[S]=W,g[S]=l.collection(O)}}_++}return g},kMedoids:function(s){var y,b,l=this.cy(),d=this.nodes(),f=null,p=uo(s),g=new Array(p.k),w={},_=new Array(p.k);p.testMode?"number"==typeof p.testCentroids||(y="object"===te(p.testCentroids)?p.testCentroids:sc(d,p.k)):y=sc(d,p.k);for(var E=!0,S=0;E&&S<p.maxIterations;){for(var O=0;O<d.length;O++)w[(f=d[O]).id()]=In(f,y,p.distance,p.attributes,"kMedoids");E=!1;for(var R=0;R<y.length;R++){var H=qr(R,d,w);if(0!==H.length){_[R]=ti(y[R],H,p.attributes);for(var W=0;W<H.length;W++)(b=ti(H[W],H,p.attributes))<_[R]&&(_[R]=b,y[R]=H[W],E=!0);g[R]=l.collection(H)}}S++}return g},fuzzyCMeans:Hp,fcm:Hp},eo=yi({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),vd={single:"min",complete:"max"},Fs=function(s,l,d,f,p){for(var w,g=0,y=1/0,b=p.attributes,_=function(he,Te){return Mi(p.distance,b.length,function(Ae){return b[Ae](he)},function(Ae){return b[Ae](Te)},he,Te)},E=0;E<s.length;E++){var S=s[E].key,O=d[S][f[S]];O<y&&(g=S,y=O)}if("threshold"===p.mode&&y>=p.threshold||"dendrogram"===p.mode&&1===s.length)return!1;var W,R=l[g],H=l[f[g]];W="dendrogram"===p.mode?{left:R,right:H,key:R.key}:{value:R.value.concat(H.value),key:R.key},s[R.index]=W,s.splice(H.index,1),l[R.key]=W;for(var X=0;X<s.length;X++){var ne=s[X];R.key===ne.key?w=1/0:"min"===p.linkage?(w=d[R.key][ne.key],d[R.key][ne.key]>d[H.key][ne.key]&&(w=d[H.key][ne.key])):"max"===p.linkage?(w=d[R.key][ne.key],d[R.key][ne.key]<d[H.key][ne.key]&&(w=d[H.key][ne.key])):w="mean"===p.linkage?(d[R.key][ne.key]*R.size+d[H.key][ne.key]*H.size)/(R.size+H.size):"dendrogram"===p.mode?_(ne.value,R.value):_(ne.value[0],R.value[0]),d[R.key][ne.key]=d[ne.key][R.key]=w}for(var re=0;re<s.length;re++){var se=s[re].key;if(f[se]===R.key||f[se]===H.key){for(var De=se,Ce=0;Ce<s.length;Ce++){var le=s[Ce].key;d[se][le]<d[se][De]&&(De=le)}f[se]=De}s[re].index=re}return R.key=H.key=R.index=H.index=null,!0},yl=function c(s,l,d){s&&(s.value?l.push(s.value):(s.left&&c(s.left,l),s.right&&c(s.right,l)))},Nv=function c(s,l){if(!s)return"";if(s.left&&s.right){var d=c(s.left,l),f=c(s.right,l),p=l.add({group:"nodes",data:{id:d+","+f}});return l.add({group:"edges",data:{source:d,target:p.id()}}),l.add({group:"edges",data:{source:f,target:p.id()}}),p.id()}return s.value?s.value.id():void 0},Fr=function c(s,l,d){if(!s)return[];var f=[],p=[],g=[];return 0===l?(s.left&&yl(s.left,f),s.right&&yl(s.right,p),g=f.concat(p),[d.collection(g)]):1===l?s.value?[d.collection(s.value)]:(s.left&&yl(s.left,f),s.right&&yl(s.right,p),[d.collection(f),d.collection(p)]):s.value?[d.collection(s.value)]:(s.left&&(f=c(s.left,l-1,d)),s.right&&(p=c(s.right,l-1,d)),f.concat(p))},p_=function(s){for(var l=this.cy(),d=this.nodes(),f=function(s){var l=eo(s),d=vd[l.linkage];return null!=d&&(l.linkage=d),l}(s),p=f.attributes,g=function(re,se){return Mi(f.distance,p.length,function(De){return p[De](re)},function(De){return p[De](se)},re,se)},y=[],w=[],b=[],_=[],E=0;E<d.length;E++){var S={value:"dendrogram"===f.mode?d[E]:[d[E]],key:E,index:E};y[E]=S,_[E]=S,w[E]=[],b[E]=0}for(var O=0;O<y.length;O++)for(var R=0;R<=O;R++){var H;H="dendrogram"===f.mode?O===R?1/0:g(y[O].value,y[R].value):O===R?1/0:g(y[O].value[0],y[R].value[0]),w[O][R]=H,w[R][O]=H,H<w[O][b[O]]&&(b[O]=R)}for(var W=Fs(y,_,w,b,f);W;)W=Fs(y,_,w,b,f);var X;return"dendrogram"===f.mode?(X=Fr(y[0],f.dendrogramDepth,l),f.addDendrogram&&Nv(y[0],l)):(X=new Array(y.length),y.forEach(function(ne,re){ne.key=ne.index=null,X[re]=l.collection(ne.value)})),X},zp={hierarchicalClustering:p_,hca:p_},Lv=yi({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),Gh=function(s,l,d,f){var p=function(y,w){return f[w](y)};return-Mi(s,f.length,function(g){return p(l,g)},function(g){return p(d,g)},l,d)},g_=function(s,l,d){for(var f=[],p=0;p<s;p++){for(var g=-1,y=-1/0,w=0;w<d.length;w++){var b=d[w];l[p*s+b]>y&&(g=b,y=l[p*s+b])}g>0&&f.push(g)}for(var _=0;_<d.length;_++)f[d[_]]=d[_];return f},Es=function(s){for(var l=this.cy(),d=this.nodes(),f=function(s){var l=s.damping,d=s.preference;.5<=l&&l<1||Sr("Damping must range on [0.5, 1).  Got: ".concat(l));var f=["median","mean","min","max"];return f.some(function(p){return p===d})||pe(d)||Sr("Preference must be one of [".concat(f.map(function(p){return"'".concat(p,"'")}).join(", "),"] or a number.  Got: ").concat(d)),Lv(s)}(s),p={},g=0;g<d.length;g++)p[d[g].id()]=g;var y,w,b,_,E,S,he;w=(y=d.length)*y,b=new Array(w);for(var O=0;O<w;O++)b[O]=-1/0;for(var R=0;R<y;R++)for(var H=0;H<y;H++)R!==H&&(b[R*y+H]=Gh(f.distance,d[R],d[H],f.attributes));_=function(s,l){var d;return d="median"===l?function(s){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.length,p=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],g=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];!(arguments.length>3&&void 0!==arguments[3])||arguments[3]?s=s.slice(l,d):(d<s.length&&s.splice(d,s.length-d),l>0&&s.splice(0,l));for(var y=0,w=s.length-1;w>=0;w--)g?isFinite(s[w])||(s[w]=-1/0,y++):s.splice(w,1);p&&s.sort(function(S,O){return S-O});var _=s.length,E=Math.floor(_/2);return _%2!=0?s[E+1+y]:(s[E-1+y]+s[E+y])/2}(s):"mean"===l?function(s){for(var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.length,f=0,p=0,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;g<d;g++){var y=s[g];isFinite(y)&&(f+=y,p++)}return f/p}(s):"min"===l?function(s){for(var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.length,f=1/0,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;p<d;p++){var g=s[p];isFinite(g)&&(f=Math.min(g,f))}return f}(s):"max"===l?function(s){for(var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.length,f=-1/0,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;p<d;p++){var g=s[p];isFinite(g)&&(f=Math.max(g,f))}return f}(s):l,d}(b,f.preference);for(var W=0;W<y;W++)b[W*y+W]=_;E=new Array(w);for(var X=0;X<w;X++)E[X]=0;S=new Array(w);for(var ne=0;ne<w;ne++)S[ne]=0;for(var re=new Array(y),se=new Array(y),De=new Array(y),Ce=0;Ce<y;Ce++)re[Ce]=0,se[Ce]=0,De[Ce]=0;for(var le=new Array(y*f.minIterations),_e=0;_e<le.length;_e++)le[_e]=0;for(he=0;he<f.maxIterations;he++){for(var Te=0;Te<y;Te++){for(var Ae=-1/0,ge=-1/0,Fe=-1,Se=0,Xe=0;Xe<y;Xe++)re[Xe]=E[Te*y+Xe],(Se=S[Te*y+Xe]+b[Te*y+Xe])>=Ae?(ge=Ae,Ae=Se,Fe=Xe):Se>ge&&(ge=Se);for(var Ve=0;Ve<y;Ve++)E[Te*y+Ve]=(1-f.damping)*(b[Te*y+Ve]-Ae)+f.damping*re[Ve];E[Te*y+Fe]=(1-f.damping)*(b[Te*y+Fe]-ge)+f.damping*re[Fe]}for(var je=0;je<y;je++){for(var Qe=0,it=0;it<y;it++)re[it]=S[it*y+je],se[it]=Math.max(0,E[it*y+je]),Qe+=se[it];Qe-=se[je],se[je]=E[je*y+je],Qe+=se[je];for(var ct=0;ct<y;ct++)S[ct*y+je]=(1-f.damping)*Math.min(0,Qe-se[ct])+f.damping*re[ct];S[je*y+je]=(1-f.damping)*(Qe-se[je])+f.damping*re[je]}for(var rt=0,tt=0;tt<y;tt++){var _t=S[tt*y+tt]+E[tt*y+tt]>0?1:0;le[he%f.minIterations*y+tt]=_t,rt+=_t}if(rt>0&&(he>=f.minIterations-1||he==f.maxIterations-1)){for(var Dt=0,yt=0;yt<y;yt++){De[yt]=0;for(var mt=0;mt<f.minIterations;mt++)De[yt]+=le[mt*y+yt];(0===De[yt]||De[yt]===f.minIterations)&&Dt++}if(Dt===y)break}}for(var Ze=function(s,l,d){for(var f=[],p=0;p<s;p++)l[p*s+p]+d[p*s+p]>0&&f.push(p);return f}(y,E,S),xt=function(s,l,d){for(var f=g_(s,l,d),p=0;p<d.length;p++){for(var g=[],y=0;y<f.length;y++)f[y]===d[p]&&g.push(y);for(var w=-1,b=-1/0,_=0;_<g.length;_++){for(var E=0,S=0;S<g.length;S++)E+=l[g[S]*s+g[_]];E>b&&(w=_,b=E)}d[p]=g[w]}return g_(s,l,d)}(y,b,Ze),Mt={},Lt=0;Lt<Ze.length;Lt++)Mt[Ze[Lt]]=[];for(var Vt=0;Vt<d.length;Vt++){var kn=xt[p[d[Vt].id()]];null!=kn&&Mt[kn].push(d[Vt])}for(var Ht=new Array(Ze.length),Ft=0;Ft<Ze.length;Ft++)Ht[Ft]=l.collection(Mt[Ze[Ft]]);return Ht},jp={affinityPropagation:Es,ap:Es},yd=yi({root:void 0,directed:!1}),$h={hierholzer:function(s){if(!ke(s)){var l=arguments;s={root:l[0],directed:l[1]}}var w,b,_,d=yd(s),f=d.root,p=d.directed,g=this,y=!1;f&&(_=ye(f)?this.filter(f)[0].id():f[0].id());var E={},S={};g.forEach(p?function(ne){var re=ne.id();if(ne.isNode()){var se=ne.indegree(!0),De=ne.outdegree(!0),Ce=se-De,le=De-se;1==Ce?w?y=!0:w=re:1==le?b?y=!0:b=re:(le>1||Ce>1)&&(y=!0),E[re]=[],ne.outgoers().forEach(function(_e){_e.isEdge()&&E[re].push(_e.id())})}else S[re]=[void 0,ne.target().id()]}:function(ne){var re=ne.id();ne.isNode()?(ne.degree(!0)%2&&(w?b?y=!0:b=re:w=re),E[re]=[],ne.connectedEdges().forEach(function(De){return E[re].push(De.id())})):S[re]=[ne.source().id(),ne.target().id()]});var O={found:!1,trail:void 0};if(y)return O;if(b&&w)if(p){if(_&&b!=_)return O;_=b}else{if(_&&b!=_&&w!=_)return O;_||(_=b)}else _||(_=g[0].id());var R=function(re){for(var Ce,le,_e,se=re,De=[re];E[se].length;)Ce=E[se].shift(),le=S[Ce][0],se!=(_e=S[Ce][1])?(E[_e]=E[_e].filter(function(he){return he!=Ce}),se=_e):!p&&se!=le&&(E[le]=E[le].filter(function(he){return he!=Ce}),se=le),De.unshift(Ce),De.unshift(se);return De},H=[],W=[];for(W=R(_);1!=W.length;)0==E[W[0]].length?(H.unshift(g.getElementById(W.shift())),H.unshift(g.getElementById(W.shift()))):W=R(W.shift()).concat(W);for(var X in H.unshift(g.getElementById(W.shift())),E)if(E[X].length)return O;return O.found=!0,O.trail=this.spawn(H,!0),O}},No=function(){var s=this,l={},d=0,f=0,p=[],g=[],y={},b=function E(S,O,R){S===R&&(f+=1),l[O]={id:d,low:d++,cutVertex:!1};var W,X,ne,re,H=s.getElementById(O).connectedEdges().intersection(s);0===H.size()?p.push(s.spawn(s.getElementById(O))):H.forEach(function(se){W=se.source().id(),X=se.target().id(),(ne=W===O?X:W)!==R&&(re=se.id(),y[re]||(y[re]=!0,g.push({x:O,y:ne,edge:se})),ne in l?l[O].low=Math.min(l[O].low,l[ne].id):(E(S,ne,O),l[O].low=Math.min(l[O].low,l[ne].low),l[O].id<=l[ne].low&&(l[O].cutVertex=!0,function(S,O){for(var R=g.length-1,H=[],W=s.spawn();g[R].x!=S||g[R].y!=O;)H.push(g.pop().edge),R--;H.push(g.pop().edge),H.forEach(function(X){var ne=X.connectedNodes().intersection(s);W.merge(X),ne.forEach(function(re){var se=re.id(),De=re.connectedEdges().intersection(s);W.merge(re),W.merge(l[se].cutVertex?De.filter(function(Ce){return Ce.isLoop()}):De)})}),p.push(W)}(O,ne))))})};s.forEach(function(E){if(E.isNode()){var S=E.id();S in l||(f=0,b(S,S),l[S].cutVertex=f>1)}});var _=Object.keys(l).filter(function(E){return l[E].cutVertex}).map(function(E){return s.getElementById(E)});return{cut:s.spawn(_),components:p}},Up=function(){var s=this,l={},d=0,f=[],p=[],g=s.spawn(s),y=function w(b){if(p.push(b),l[b]={index:d,low:d++,explored:!1},s.getElementById(b).connectedEdges().intersection(s).forEach(function(H){var W=H.target().id();W!==b&&(W in l||w(W),l[W].explored||(l[b].low=Math.min(l[b].low,l[W].low)))}),l[b].index===l[b].low){for(var E=s.spawn();;){var S=p.pop();if(E.merge(s.getElementById(S)),l[S].low=l[b].index,l[S].explored=!0,S===b)break}var O=E.edgesWith(E),R=E.merge(O);f.push(R),g=g.difference(R)}};return s.forEach(function(w){if(w.isNode()){var b=w.id();b in l||y(b)}}),{cut:g,components:f}},Fv={};[Me,Ue,bt,dt,Bt,gn,qt,hd,Kc,Zo,Tv,Ov,Zc,zp,jp,$h,{hopcroftTarjanBiconnected:No,htbc:No,htb:No,hopcroftTarjanBiconnectedComponents:No},{tarjanStronglyConnected:Up,tsc:Up,tscc:Up,tarjanStronglyConnectedComponents:Up}].forEach(function(c){Zt(Fv,c)});var bl=function c(s){if(!(this instanceof c))return new c(s);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof s&&s.call(this,this.fulfill.bind(this),this.reject.bind(this))};bl.prototype={fulfill:function(s){return __(this,1,"fulfillValue",s)},reject:function(s){return __(this,2,"rejectReason",s)},then:function(s,l){var d=this,f=new bl;return d.onFulfilled.push(D_(s,f,"fulfill")),d.onRejected.push(D_(l,f,"reject")),x_(d),f.proxy}};var __=function(s,l,d,f){return 0===s.state&&(s.state=l,s[d]=f,x_(s)),s},x_=function(s){1===s.state?E_(s,"onFulfilled",s.fulfillValue):2===s.state&&E_(s,"onRejected",s.rejectReason)},E_=function(s,l,d){if(0!==s[l].length){var f=s[l];s[l]=[];var p=function(){for(var y=0;y<f.length;y++)f[y](d)};"function"==typeof setImmediate?setImmediate(p):setTimeout(p,0)}},D_=function(s,l,d){return function(f){if("function"!=typeof s)l[d].call(l,f);else{var p;try{p=s(f)}catch(g){return void l.reject(g)}Y1(l,p)}}},Y1=function c(s,l){if(s!==l&&s.proxy!==l){var d;if("object"===te(l)&&null!==l||"function"==typeof l)try{d=l.then}catch(p){return void s.reject(p)}if("function"!=typeof d)s.fulfill(l);else{var f=!1;try{d.call(l,function(p){f||(f=!0,p===l?s.reject(new TypeError("circular thenable chain")):c(s,p))},function(p){f||(f=!0,s.reject(p))})}catch(p){f||s.reject(p)}}}else s.reject(new TypeError("cannot resolve promise with itself"))};bl.all=function(c){return new bl(function(s,l){for(var d=new Array(c.length),f=0,p=function(w,b){d[w]=b,++f===c.length&&s(d)},g=0;g<c.length;g++)!function(y){var w=c[y];null!=w&&null!=w.then?w.then(function(E){p(y,E)},function(E){l(E)}):p(y,w)}(g)})},bl.resolve=function(c){return new bl(function(s,l){s(c)})},bl.reject=function(c){return new bl(function(s,l){l(c)})};var bd=typeof Promise<"u"?Promise:bl,Bv=function(s,l,d){var f=pt(s),p=!f,g=this._private=Zt({duration:1e3},l,d);if(g.target=s,g.style=g.style||g.css,g.started=!1,g.playing=!1,g.hooked=!1,g.applying=!1,g.progress=0,g.completes=[],g.frames=[],g.complete&&qe(g.complete)&&g.completes.push(g.complete),p){var y=s.position();g.startPosition=g.startPosition||{x:y.x,y:y.y},g.startStyle=g.startStyle||s.cy().style().getAnimationStartStyle(s,g.style)}if(f){var w=s.pan();g.startPan={x:w.x,y:w.y},g.startZoom=s.zoom()}this.length=1,this[0]=this},eu=Bv.prototype;Zt(eu,{instanceString:function(){return"animation"},hook:function(){var s=this._private;if(!s.hooked){var d=s.target._private.animation;(s.queue?d.queue:d.current).push(this),Ie(s.target)&&s.target.cy().addToAnimationPool(s.target),s.hooked=!0}return this},play:function(){var s=this._private;return 1===s.progress&&(s.progress=0),s.playing=!0,s.started=!1,s.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var s=this._private;return s.applying=!0,s.started=!1,s.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var s=this._private;return s.playing=!1,s.started=!1,this},stop:function(){var s=this._private;return s.playing=!1,s.started=!1,s.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(s){var l=this._private;return void 0===s?l.progress*l.duration:this.progress(s/l.duration)},progress:function(s){var l=this._private,d=l.playing;return void 0===s?l.progress:(d&&this.pause(),l.progress=s,l.started=!1,d&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var s=this._private,l=s.playing;l&&this.pause(),s.progress=1-s.progress,s.started=!1;var d=function(b,_){var E=s[b];null!=E&&(s[b]=s[_],s[_]=E)};if(d("zoom","startZoom"),d("pan","startPan"),d("position","startPosition"),s.style)for(var f=0;f<s.style.length;f++){var p=s.style[f],g=p.name,y=s.startStyle[g];s.startStyle[g]=p,s.style[f]=y}return l&&this.play(),this},promise:function(s){var d,l=this._private;return d="frame"===s?l.frames:l.completes,new bd(function(f,p){d.push(function(){f()})})}}),eu.complete=eu.completed,eu.run=eu.play,eu.running=eu.playing;var Hv={data:function(s){return s=Zt({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(f){},beforeSet:function(f,p){},onSet:function(f){},canSet:function(f){return!0}},s),function(f,p){var g=s,y=this,w=void 0!==y.length,b=w?y:[y],_=w?y[0]:y;if(ye(f)){var O,S=-1!==f.indexOf(".")&&K.default(f);if(g.allowGetting&&void 0===p)return _&&(g.beforeGet(_),O=S&&void 0===_._private[g.field][f]?z.default(_._private[g.field],S):_._private[g.field][f]),O;if(g.allowSetting&&void 0!==p&&!g.immutableKeys[f]){var H=Q({},f,p);g.beforeSet(y,H);for(var W=0,X=b.length;W<X;W++){var ne=b[W];g.canSet(ne)&&(S&&void 0===_._private[g.field][f]?B.default(ne._private[g.field],S,p):ne._private[g.field][f]=p)}g.updateStyle&&y.updateStyle(),g.onSet(y),g.settingTriggersEvent&&y[g.triggerFnName](g.settingEvent)}}else if(g.allowSetting&&ke(f)){var se,De,re=f,Ce=Object.keys(re);g.beforeSet(y,re);for(var le=0;le<Ce.length;le++)if(De=re[se=Ce[le]],!g.immutableKeys[se])for(var he=0;he<b.length;he++){var Te=b[he];g.canSet(Te)&&(Te._private[g.field][se]=De)}g.updateStyle&&y.updateStyle(),g.onSet(y),g.settingTriggersEvent&&y[g.triggerFnName](g.settingEvent)}else if(g.allowBinding&&qe(f))y.on(g.bindingEvent,f);else if(g.allowGetting&&void 0===f){var ge;return _&&(g.beforeGet(_),ge=_._private[g.field]),ge}return y}},removeData:function(s){return s=Zt({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},s),function(f){var p=s,g=this,w=void 0!==g.length?g:[g];if(ye(f)){for(var b=f.split(/\s+/),_=b.length,E=0;E<_;E++){var S=b[E];if(!$e(S)&&!p.immutableKeys[S])for(var R=0,H=w.length;R<H;R++)w[R]._private[p.field][S]=void 0}p.triggerEvent&&g[p.triggerFnName](p.event)}else if(void 0===f){for(var W=0,X=w.length;W<X;W++)for(var ne=w[W]._private[p.field],re=Object.keys(ne),se=0;se<re.length;se++){var De=re[se];!p.immutableKeys[De]&&(ne[De]=void 0)}p.triggerEvent&&g[p.triggerFnName](p.event)}return g}}},X1={eventAliasesOn:function(s){var l=s;l.addListener=l.listen=l.bind=l.on,l.unlisten=l.unbind=l.off=l.removeListener,l.trigger=l.emit,l.pon=l.promiseOn=function(d,f){var p=this,g=Array.prototype.slice.call(arguments,0);return new bd(function(y,w){var _=g.concat([function(O){p.off.apply(p,E),y(O)}]),E=_.concat([]);p.on.apply(p,_)})}}},Dr={};[{animated:function(){return function(){var l=this,f=void 0!==l.length?l:[l];if(!(this._private.cy||this).styleEnabled())return!1;var g=f[0];return g?g._private.animation.current.length>0:void 0}},clearQueue:function(){return function(){var l=this,f=void 0!==l.length?l:[l];if(!(this._private.cy||this).styleEnabled())return this;for(var g=0;g<f.length;g++)f[g]._private.animation.queue=[];return this}},delay:function(){return function(l,d){return(this._private.cy||this).styleEnabled()?this.animate({delay:l,duration:l,complete:d}):this}},delayAnimation:function(){return function(l,d){return(this._private.cy||this).styleEnabled()?this.animation({delay:l,duration:l,complete:d}):this}},animation:function(){return function(l,d){var f=this,p=void 0!==f.length,g=p?f:[f],y=this._private.cy||this,w=!p,b=!w;if(!y.styleEnabled())return this;var _=y.style();if(l=Zt({},l,d),0===Object.keys(l).length)return new Bv(g[0],l);switch(void 0===l.duration&&(l.duration=400),l.duration){case"slow":l.duration=600;break;case"fast":l.duration=200}if(b&&(l.style=_.getPropsList(l.style||l.css),l.css=void 0),b&&null!=l.renderedPosition){var S=l.renderedPosition,O=y.pan(),R=y.zoom();l.position=qn(S,R,O)}if(w&&null!=l.panBy){var H=l.panBy,W=y.pan();l.pan={x:W.x+H.x,y:W.y+H.y}}var X=l.center||l.centre;if(w&&null!=X){var ne=y.getCenterPan(X.eles,l.zoom);null!=ne&&(l.pan=ne)}if(w&&null!=l.fit){var re=l.fit,se=y.getFitViewport(re.eles||re.boundingBox,re.padding);null!=se&&(l.pan=se.pan,l.zoom=se.zoom)}if(w&&ke(l.zoom)){var De=y.getZoomedViewport(l.zoom);null!=De?(De.zoomed&&(l.zoom=De.zoom),De.panned&&(l.pan=De.pan)):l.zoom=null}return new Bv(g[0],l)}},animate:function(){return function(l,d){var f=this,g=void 0!==f.length?f:[f];if(!(this._private.cy||this).styleEnabled())return this;d&&(l=Zt({},l,d));for(var w=0;w<g.length;w++){var b=g[w],_=b.animated()&&(void 0===l.queue||l.queue);b.animation(l,_?{queue:!0}:void 0).play()}return this}},stop:function(){return function(l,d){var f=this,g=void 0!==f.length?f:[f],y=this._private.cy||this;if(!y.styleEnabled())return this;for(var w=0;w<g.length;w++){for(var _=g[w]._private,E=_.animation.current,S=0;S<E.length;S++)d&&(E[S]._private.duration=0);l&&(_.animation.queue=[]),d||(_.animation.current=[])}return y.notify("draw"),this}}},Hv,X1].forEach(function(c){Zt(Dr,c)});var K1={animate:Dr.animate(),animation:Dr.animation(),animated:Dr.animated(),clearQueue:Dr.clearQueue(),delay:Dr.delay(),delayAnimation:Dr.delayAnimation(),stop:Dr.stop()},oa={classes:function(s){var l=this;if(void 0===s){var d=[];return l[0]._private.classes.forEach(function(R){return d.push(R)}),d}ze(s)||(s=(s||"").match(/\S+/g)||[]);for(var f=[],p=new ka(s),g=0;g<l.length;g++){for(var y=l[g],w=y._private,b=w.classes,_=!1,E=0;E<s.length;E++)if(!b.has(s[E])){_=!0;break}_||(_=b.size!==s.length),_&&(w.classes=p,f.push(y))}return f.length>0&&this.spawn(f).updateStyle().emit("class"),l},addClass:function(s){return this.toggleClass(s,!0)},hasClass:function(s){var l=this[0];return null!=l&&l._private.classes.has(s)},toggleClass:function(s,l){ze(s)||(s=s.match(/\S+/g)||[]);for(var d=this,f=void 0===l,p=[],g=0,y=d.length;g<y;g++)for(var w=d[g],b=w._private.classes,_=!1,E=0;E<s.length;E++){var S=s[E],O=b.has(S),R=!1;l||f&&!O?(b.add(S),R=!0):(!l||f&&O)&&(b.delete(S),R=!0),!_&&R&&(p.push(w),_=!0)}return p.length>0&&this.spawn(p).updateStyle().emit("class"),d},removeClass:function(s){return this.toggleClass(s,!1)},flashClass:function(s,l){var d=this;if(null==l)l=250;else if(0===l)return d;return d.addClass(s),setTimeout(function(){d.removeClass(s)},l),d}};oa.className=oa.classNames=oa.classes;var lr={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:"\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'",number:hn,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};lr.variable="(?:[\\w-.]|(?:\\\\"+lr.metaChar+"))+",lr.className="(?:[\\w-]|(?:\\\\"+lr.metaChar+"))+",lr.value=lr.string+"|"+lr.number,lr.id=lr.variable,function(){var c,s,l;for(c=lr.comparatorOp.split("|"),l=0;l<c.length;l++)lr.comparatorOp+="|@"+(s=c[l]);for(c=lr.comparatorOp.split("|"),l=0;l<c.length;l++)!((s=c[l]).indexOf("!")>=0)&&"="!==s&&(lr.comparatorOp+="|\\!"+s)}();var Gp=[{selector:":selected",matches:function(s){return s.selected()}},{selector:":unselected",matches:function(s){return!s.selected()}},{selector:":selectable",matches:function(s){return s.selectable()}},{selector:":unselectable",matches:function(s){return!s.selectable()}},{selector:":locked",matches:function(s){return s.locked()}},{selector:":unlocked",matches:function(s){return!s.locked()}},{selector:":visible",matches:function(s){return s.visible()}},{selector:":hidden",matches:function(s){return!s.visible()}},{selector:":transparent",matches:function(s){return s.transparent()}},{selector:":grabbed",matches:function(s){return s.grabbed()}},{selector:":free",matches:function(s){return!s.grabbed()}},{selector:":removed",matches:function(s){return s.removed()}},{selector:":inside",matches:function(s){return!s.removed()}},{selector:":grabbable",matches:function(s){return s.grabbable()}},{selector:":ungrabbable",matches:function(s){return!s.grabbable()}},{selector:":animated",matches:function(s){return s.animated()}},{selector:":unanimated",matches:function(s){return!s.animated()}},{selector:":parent",matches:function(s){return s.isParent()}},{selector:":childless",matches:function(s){return s.isChildless()}},{selector:":child",matches:function(s){return s.isChild()}},{selector:":orphan",matches:function(s){return s.isOrphan()}},{selector:":nonorphan",matches:function(s){return s.isChild()}},{selector:":compound",matches:function(s){return s.isNode()?s.isParent():s.source().isParent()||s.target().isParent()}},{selector:":loop",matches:function(s){return s.isLoop()}},{selector:":simple",matches:function(s){return s.isSimple()}},{selector:":active",matches:function(s){return s.active()}},{selector:":inactive",matches:function(s){return!s.active()}},{selector:":backgrounding",matches:function(s){return s.backgrounding()}},{selector:":nonbackgrounding",matches:function(s){return!s.backgrounding()}}].sort(function(c,s){return function(s,l){return-1*To(s,l)}(c.selector,s.selector)}),C_=function(){for(var s,c={},l=0;l<Gp.length;l++)c[(s=Gp[l]).selector]=s.matches;return c}(),jv="("+Gp.map(function(c){return c.selector}).join("|")+")",tu=function(s){return s.replace(new RegExp("\\\\("+lr.metaChar+")","g"),function(l,d){return d})},sa=function(s,l,d){s[s.length-1]=d},$p=[{name:"group",query:!0,regex:"("+lr.group+")",populate:function(s,l,d){var p=ce(d,1)[0];l.checks.push({type:0,value:"*"===p?p:p+"s"})}},{name:"state",query:!0,regex:jv,populate:function(s,l,d){var f=ce(d,1);l.checks.push({type:7,value:f[0]})}},{name:"id",query:!0,regex:"\\#("+lr.id+")",populate:function(s,l,d){var f=ce(d,1);l.checks.push({type:8,value:tu(f[0])})}},{name:"className",query:!0,regex:"\\.("+lr.className+")",populate:function(s,l,d){var f=ce(d,1);l.checks.push({type:9,value:tu(f[0])})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+lr.variable+")\\s*\\]",populate:function(s,l,d){var f=ce(d,1);l.checks.push({type:4,field:tu(f[0])})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+lr.variable+")\\s*("+lr.comparatorOp+")\\s*("+lr.value+")\\s*\\]",populate:function(s,l,d){var f=ce(d,3),p=f[0],g=f[1],y=f[2];y=null!=new RegExp("^"+lr.string+"$").exec(y)?y.substring(1,y.length-1):parseFloat(y),l.checks.push({type:3,field:tu(p),operator:g,value:y})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+lr.boolOp+")\\s*("+lr.variable+")\\s*\\]",populate:function(s,l,d){var f=ce(d,2),p=f[0];l.checks.push({type:5,field:tu(f[1]),operator:p})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+lr.meta+")\\s*("+lr.comparatorOp+")\\s*("+lr.number+")\\s*\\]\\]",populate:function(s,l,d){var f=ce(d,3),g=f[1],y=f[2];l.checks.push({type:6,field:tu(f[0]),operator:g,value:parseFloat(y)})}},{name:"nextQuery",separator:!0,regex:lr.separator,populate:function(s,l){var d=s.currentSubject,f=s.edgeCount,p=s.compoundCount,g=s[s.length-1];return null!=d&&(g.subject=d,s.currentSubject=null),g.edgeCount=f,g.compoundCount=p,s.edgeCount=0,s.compoundCount=0,s[s.length++]={checks:[]}}},{name:"directedEdge",separator:!0,regex:lr.directedEdge,populate:function(s,l){if(null==s.currentSubject){var d={checks:[]},p={checks:[]};return d.checks.push({type:11,source:l,target:p}),sa(s,0,d),s.edgeCount++,p}var g={checks:[]},w={checks:[]};return g.checks.push({type:12,source:l,target:w}),sa(s,0,g),s.edgeCount++,w}},{name:"undirectedEdge",separator:!0,regex:lr.undirectedEdge,populate:function(s,l){if(null==s.currentSubject){var d={checks:[]},p={checks:[]};return d.checks.push({type:10,nodes:[l,p]}),sa(s,0,d),s.edgeCount++,p}var g={checks:[]},w={checks:[]};return g.checks.push({type:14,node:l,neighbor:w}),sa(s,0,g),w}},{name:"child",separator:!0,regex:lr.child,populate:function(s,l){if(null==s.currentSubject){var d={checks:[]},f={checks:[]};return d.checks.push({type:15,parent:s[s.length-1],child:f}),sa(s,0,d),s.compoundCount++,f}if(s.currentSubject===l){var g={checks:[]},w={checks:[]},b={checks:[]},_={checks:[]},E={checks:[]};return g.checks.push({type:19,left:s[s.length-1],right:w,subject:b}),b.checks=l.checks,l.checks=[{type:20}],E.checks.push({type:20}),w.checks.push({type:17,parent:E,child:_}),sa(s,0,g),s.currentSubject=b,s.compoundCount++,_}var S={checks:[]},O={checks:[]},R=[{type:17,parent:S,child:O}];return S.checks=l.checks,l.checks=R,s.compoundCount++,O}},{name:"descendant",separator:!0,regex:lr.descendant,populate:function(s,l){if(null==s.currentSubject){var d={checks:[]},f={checks:[]};return d.checks.push({type:16,ancestor:s[s.length-1],descendant:f}),sa(s,0,d),s.compoundCount++,f}if(s.currentSubject===l){var g={checks:[]},w={checks:[]},b={checks:[]},_={checks:[]},E={checks:[]};return g.checks.push({type:19,left:s[s.length-1],right:w,subject:b}),b.checks=l.checks,l.checks=[{type:20}],E.checks.push({type:20}),w.checks.push({type:18,ancestor:E,descendant:_}),sa(s,0,g),s.currentSubject=b,s.compoundCount++,_}var S={checks:[]},O={checks:[]},R=[{type:18,ancestor:S,descendant:O}];return S.checks=l.checks,l.checks=R,s.compoundCount++,O}},{name:"subject",modifier:!0,regex:lr.subject,populate:function(s,l){if(null!=s.currentSubject&&s.currentSubject!==l)return ur("Redefinition of subject in selector `"+s.toString()+"`"),!1;s.currentSubject=l;var f=s[s.length-1].checks[0],p=null==f?null:f.type;11===p?f.type=13:10===p&&(f.type=14,f.node=f.nodes[1],f.neighbor=f.nodes[0],f.nodes=null)}}];$p.forEach(function(c){return c.regexObj=new RegExp("^"+c.regex)});var Ds=function(s){for(var l,d,f,p=0;p<$p.length;p++){var g=$p[p],y=g.name,w=s.match(g.regexObj);if(null!=w){d=w,l=g,f=y,s=s.substring(w[0].length);break}}return{expr:l,match:d,name:f,remaining:s}},S_={parse:function(s){var l=this,d=l.inputText=s,f=l[0]={checks:[]};for(l.length=1,d=function(s){var l=s.match(/^\s+/);return l&&(s=s.substring(l[0].length)),s}(d);;){var p=Ds(d);if(null==p.expr)return ur("The selector `"+s+"`is invalid"),!1;var g=p.match.slice(1),y=p.expr.populate(l,f,g);if(!1===y)return!1;if(null!=y&&(f=y),(d=p.remaining).match(/^\s*$/))break}var w=l[l.length-1];null!=l.currentSubject&&(w.subject=l.currentSubject),w.edgeCount=l.edgeCount,w.compoundCount=l.compoundCount;for(var b=0;b<l.length;b++){var _=l[b];if(_.compoundCount>0&&_.edgeCount>0)return ur("The selector `"+s+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(_.edgeCount>1)return ur("The selector `"+s+"` is invalid because it uses multiple edge selectors"),!1;1===_.edgeCount&&ur("The selector `"+s+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString:function(){if(null!=this.toStringCache)return this.toStringCache;for(var s=function(_){return _??""},l=function(_){return ye(_)?'"'+_+'"':s(_)},d=function(_){return" "+_+" "},p=function(_,E){return _.checks.reduce(function(S,O,R){return S+(E===_&&0===R?"$":"")+function(_,E){var O=_.value;switch(_.type){case 0:var R=s(O);return R.substring(0,R.length-1);case 3:return"["+_.field+d(s(_.operator))+l(O)+"]";case 5:var ne=_.field;return"["+s(_.operator)+ne+"]";case 4:return"["+_.field+"]";case 6:return"[["+_.field+d(s(_.operator))+l(O)+"]]";case 7:return O;case 8:return"#"+O;case 9:return"."+O;case 17:case 15:return p(_.parent,E)+d(">")+p(_.child,E);case 18:case 16:return p(_.ancestor,E)+" "+p(_.descendant,E);case 19:var Ce=p(_.left,E),le=p(_.subject,E),_e=p(_.right,E);return Ce+(Ce.length>0?" ":"")+le+_e;case 20:return""}}(O,E)},"")},g="",y=0;y<this.length;y++){var w=this[y];g+=p(w,w.subject),this.length>1&&y<this.length-1&&(g+=", ")}return this.toStringCache=g,g}},wd=function(s,l,d){var f,w,b,p=ye(s),g=pe(s),y=ye(d),_=!1,E=!1,S=!1;switch(l.indexOf("!")>=0&&(l=l.replace("!",""),E=!0),l.indexOf("@")>=0&&(l=l.replace("@",""),_=!0),(p||y||_)&&(w=p||g?""+s:"",b=""+d),_&&(s=w=w.toLowerCase(),d=b=b.toLowerCase()),l){case"*=":f=w.indexOf(b)>=0;break;case"$=":f=w.indexOf(b,w.length-b.length)>=0;break;case"^=":f=0===w.indexOf(b);break;case"=":f=s===d;break;case">":S=!0,f=s>d;break;case">=":S=!0,f=s>=d;break;case"<":S=!0,f=s<d;break;case"<=":S=!0,f=s<=d;break;default:f=!1}return E&&(null!=s||!S)&&(f=!f),f},Wh=function(s,l){return s.data(l)},rr=[],Br=function(s,l){return s.checks.every(function(d){return rr[d.type](d,l)})};rr[0]=function(c,s){var l=c.value;return"*"===l||l===s.group()},rr[7]=function(c,s){return function(s,l){return C_[s](l)}(c.value,s)},rr[8]=function(c,s){var l=c.value;return s.id()===l},rr[9]=function(c,s){return s.hasClass(c.value)},rr[6]=function(c,s){var d=c.operator,f=c.value;return wd(function(s,l){return s[l]()}(s,c.field),d,f)},rr[3]=function(c,s){var d=c.operator,f=c.value;return wd(Wh(s,c.field),d,f)},rr[5]=function(c,s){var d=c.operator;return function(s,l){switch(l){case"?":return!!s;case"!":return!s;case"^":return void 0===s}}(Wh(s,c.field),d)},rr[4]=function(c,s){return function(s){return void 0!==s}(Wh(s,c.field))},rr[10]=function(c,s){var l=c.nodes[0],d=c.nodes[1],f=s.source(),p=s.target();return Br(l,f)&&Br(d,p)||Br(d,f)&&Br(l,p)},rr[14]=function(c,s){return Br(c.node,s)&&s.neighborhood().some(function(l){return l.isNode()&&Br(c.neighbor,l)})},rr[11]=function(c,s){return Br(c.source,s.source())&&Br(c.target,s.target())},rr[12]=function(c,s){return Br(c.source,s)&&s.outgoers().some(function(l){return l.isNode()&&Br(c.target,l)})},rr[13]=function(c,s){return Br(c.target,s)&&s.incomers().some(function(l){return l.isNode()&&Br(c.source,l)})},rr[15]=function(c,s){return Br(c.child,s)&&Br(c.parent,s.parent())},rr[17]=function(c,s){return Br(c.parent,s)&&s.children().some(function(l){return Br(c.child,l)})},rr[16]=function(c,s){return Br(c.descendant,s)&&s.ancestors().some(function(l){return Br(c.ancestor,l)})},rr[18]=function(c,s){return Br(c.ancestor,s)&&s.descendants().some(function(l){return Br(c.descendant,l)})},rr[19]=function(c,s){return Br(c.subject,s)&&Br(c.left,s)&&Br(c.right,s)},rr[20]=function(){return!0},rr[1]=function(c,s){return c.value.has(s)},rr[2]=function(c,s){return(0,c.value)(s)};var wl={matches:function(s){for(var d=0;d<this.length;d++)if(Br(this[d],s))return!0;return!1},filter:function(s){var l=this;if(1===l.length&&1===l[0].checks.length&&8===l[0].checks[0].type)return s.getElementById(l[0].checks[0].value).collection();var d=function(p){for(var g=0;g<l.length;g++)if(Br(l[g],p))return!0;return!1};return null==l.text()&&(d=function(){return!0}),s.filter(d)}},Fa=function(s){this.inputText=s,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==s||ye(s)&&s.match(/^\s*$/)||(Ie(s)?this.addQuery({checks:[{type:1,value:s.collection()}]}):qe(s)?this.addQuery({checks:[{type:2,value:s}]}):ye(s)?this.parse(s)||(this.invalid=!0):Sr("A selector must be created from a string; found "))},aa=Fa.prototype;[S_,wl].forEach(function(c){return Zt(aa,c)}),aa.text=function(){return this.inputText},aa.size=function(){return this.length},aa.eq=function(c){return this[c]},aa.sameText=function(c){return!this.invalid&&!c.invalid&&this.text()===c.text()},aa.addQuery=function(c){this[this.length++]=c},aa.selector=aa.toString;var yn={allAre:function(s){var l=new Fa(s);return this.every(function(d){return l.matches(d)})},is:function(s){var l=new Fa(s);return this.some(function(d){return l.matches(d)})},some:function(s,l){for(var d=0;d<this.length;d++)if(l?s.apply(l,[this[d],d,this]):s(this[d],d,this))return!0;return!1},every:function(s,l){for(var d=0;d<this.length;d++)if(!(l?s.apply(l,[this[d],d,this]):s(this[d],d,this)))return!1;return!0},same:function(s){if(this===s)return!0;s=this.cy().collection(s);var l=this.length;return l===s.length&&(1===l?this[0]===s[0]:this.every(function(f){return s.hasElementWithId(f.id())}))},anySame:function(s){return s=this.cy().collection(s),this.some(function(l){return s.hasElementWithId(l.id())})},allAreNeighbors:function(s){s=this.cy().collection(s);var l=this.neighborhood();return s.every(function(d){return l.hasElementWithId(d.id())})},contains:function(s){s=this.cy().collection(s);var l=this;return s.every(function(d){return l.hasElementWithId(d.id())})}};yn.allAreNeighbours=yn.allAreNeighbors,yn.has=yn.contains,yn.equal=yn.equals=yn.same;var xd,Yv,es=function(s,l){return function(f,p,g,y){var _,w=f,b=this;if(null==w?_="":Ie(w)&&1===w.length&&(_=w.id()),1===b.length&&_){var E=b[0]._private,S=E.traversalCache=E.traversalCache||{},O=S[l]=S[l]||[],R=Aa(_);return O[R]||(O[R]=s.call(b,f,p,g,y))}return s.call(b,f,p,g,y)}},_d={parent:function(s){var l=[];if(1===this.length){var d=this[0]._private.parent;if(d)return d}for(var f=0;f<this.length;f++){var g=this[f]._private.parent;g&&l.push(g)}return this.spawn(l,!0).filter(s)},parents:function(s){for(var l=[],d=this.parent();d.nonempty();){for(var f=0;f<d.length;f++)l.push(d[f]);d=d.parent()}return this.spawn(l,!0).filter(s)},commonAncestors:function(s){for(var l,d=0;d<this.length;d++){var p=this[d].parents();l=(l=l||p).intersect(p)}return l.filter(s)},orphans:function(s){return this.stdFilter(function(l){return l.isOrphan()}).filter(s)},nonorphans:function(s){return this.stdFilter(function(l){return l.isChild()}).filter(s)},children:es(function(c){for(var s=[],l=0;l<this.length;l++)for(var f=this[l]._private.children,p=0;p<f.length;p++)s.push(f[p]);return this.spawn(s,!0).filter(c)},"children"),siblings:function(s){return this.parent().children().not(this).filter(s)},isParent:function(){var s=this[0];if(s)return s.isNode()&&0!==s._private.children.length},isChildless:function(){var s=this[0];if(s)return s.isNode()&&0===s._private.children.length},isChild:function(){var s=this[0];if(s)return s.isNode()&&null!=s._private.parent},isOrphan:function(){var s=this[0];if(s)return s.isNode()&&null==s._private.parent},descendants:function(s){var l=[];return function d(f){for(var p=0;p<f.length;p++){var g=f[p];l.push(g),g.children().nonempty()&&d(g.children())}}(this.children()),this.spawn(l,!0).filter(s)}};function Wp(c,s,l,d){for(var f=[],p=new ka,y=c.cy().hasCompoundNodes(),w=0;w<c.length;w++){var b=c[w];l?f.push(b):y&&d(f,p,b)}for(;f.length>0;){var _=f.shift();s(_),p.add(_.id()),y&&d(f,p,_)}return c}function $v(c,s,l){if(l.isParent())for(var d=l._private.children,f=0;f<d.length;f++){var p=d[f];s.has(p.id())||c.push(p)}}function Wv(c,s,l){if(l.isChild()){var d=l._private.parent;s.has(d.id())||c.push(d)}}function qv(c,s,l){Wv(c,s,l),$v(c,s,l)}_d.forEachDown=function(c){var s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Wp(this,c,s,$v)},_d.forEachUp=function(c){var s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Wp(this,c,s,Wv)},_d.forEachUpAndDown=function(c){var s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Wp(this,c,s,qv)},_d.ancestors=_d.parents,xd=Yv={data:Dr.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:Dr.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:Dr.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Dr.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:Dr.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:Dr.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var s=this[0];if(s)return s._private.data.id}},xd.attr=xd.data,xd.removeAttr=xd.removeData;var At=Yv,Un={};function Bs(c){return function(s){var l=this;if(void 0===s&&(s=!0),0===l.length);else if(l.isNode()&&!l.removed()){for(var d=0,f=l[0],p=f._private.edges,g=0;g<p.length;g++){var y=p[g];!s&&y.isLoop()||(d+=c(f,y))}return d}}}function Lo(c,s){return function(l){for(var d,f=this.nodes(),p=0;p<f.length;p++){var y=f[p][c](l);void 0!==y&&(void 0===d||s(y,d))&&(d=y)}return d}}Zt(Un,{degree:Bs(function(c,s){return s.source().same(s.target())?2:1}),indegree:Bs(function(c,s){return s.target().same(c)?1:0}),outdegree:Bs(function(c,s){return s.source().same(c)?1:0})}),Zt(Un,{minDegree:Lo("degree",function(c,s){return c<s}),maxDegree:Lo("degree",function(c,s){return c>s}),minIndegree:Lo("indegree",function(c,s){return c<s}),maxIndegree:Lo("indegree",function(c,s){return c>s}),minOutdegree:Lo("outdegree",function(c,s){return c<s}),maxOutdegree:Lo("outdegree",function(c,s){return c>s})}),Zt(Un,{totalDegree:function(s){for(var l=0,d=this.nodes(),f=0;f<d.length;f++)l+=d[f].degree(s);return l}});var Tr,qp,ru=function(s,l,d){for(var f=0;f<s.length;f++){var p=s[f];if(!p.locked()){var g=p._private.position,y={x:null!=l.x?l.x-g.x:0,y:null!=l.y?l.y-g.y:0};p.isParent()&&!(0===y.x&&0===y.y)&&p.children().shift(y,d),p.dirtyBoundingBoxCache()}}},Vs={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(s){s.updateCompoundBounds()},beforeSet:function(s,l){ru(s,l,!1)},onSet:function(s){s.dirtyCompoundBoundsCache()},canSet:function(s){return!s.locked()}};Tr=qp={position:Dr.data(Vs),silentPosition:Dr.data(Zt({},Vs,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(s,l){ru(s,l,!0)},onSet:function(s){s.dirtyCompoundBoundsCache()}})),positions:function(s,l){if(ke(s))l?this.silentPosition(s):this.position(s);else if(qe(s)){var d=s,f=this.cy();f.startBatch();for(var p=0;p<this.length;p++){var y,g=this[p];(y=d(g,p))&&(l?g.silentPosition(y):g.position(y))}f.endBatch()}return this},silentPositions:function(s){return this.positions(s,!0)},shift:function(s,l,d){var f;if(ke(s)?(f={x:pe(s.x)?s.x:0,y:pe(s.y)?s.y:0},d=l):ye(s)&&pe(l)&&((f={x:0,y:0})[s]=l),null!=f){var p=this.cy();p.startBatch();for(var g=0;g<this.length;g++){var y=this[g];if(!(p.hasCompoundNodes()&&y.isChild()&&y.ancestors().anySame(this))){var w=y.position(),b={x:w.x+f.x,y:w.y+f.y};d?y.silentPosition(b):y.position(b)}}p.endBatch()}return this},silentShift:function(s,l){return ke(s)?this.shift(s,!0):ye(s)&&pe(l)&&this.shift(s,l,!0),this},renderedPosition:function(s,l){var d=this[0],f=this.cy(),p=f.zoom(),g=f.pan(),y=ke(s)?s:void 0,w=void 0!==y||void 0!==l&&ye(s);if(d&&d.isNode()){if(!w){var E=d.position();return y=Wn(E,p,g),void 0===s?y:y[s]}for(var b=0;b<this.length;b++){var _=this[b];void 0!==l?_.position(s,(l-g[s])/p):void 0!==y&&_.position(qn(y,p,g))}}else if(!w)return;return this},relativePosition:function(s,l){var d=this[0],f=this.cy(),p=ke(s)?s:void 0,g=void 0!==p||void 0!==l&&ye(s),y=f.hasCompoundNodes();if(d&&d.isNode()){if(!g){var R=d.position(),H=y?d.parent():null,W=H&&H.length>0;W&&(H=H[0]);var ne=W?H.position():{x:0,y:0};return p={x:R.x-ne.x,y:R.y-ne.y},void 0===s?p:p[s]}for(var w=0;w<this.length;w++){var b=this[w],_=y?b.parent():null,E=_&&_.length>0;E&&(_=_[0]);var O=E?_.position():{x:0,y:0};void 0!==l?b.position(s,l+O[s]):void 0!==p&&b.position({x:p.x+O.x,y:p.y+O.y})}}else if(!g)return;return this}},Tr.modelPosition=Tr.point=Tr.position,Tr.modelPositions=Tr.points=Tr.positions,Tr.renderedPoint=Tr.renderedPosition,Tr.relativePoint=Tr.relativePosition;var _l,xl,Yp=qp;_l=xl={},xl.renderedBoundingBox=function(c){var s=this.boundingBox(c),l=this.cy(),d=l.zoom(),f=l.pan(),p=s.x1*d+f.x,g=s.x2*d+f.x,y=s.y1*d+f.y,w=s.y2*d+f.y;return{x1:p,x2:g,y1:y,y2:w,w:g-p,h:w-y}},xl.dirtyCompoundBoundsCache=function(){var c=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=this.cy();return s.styleEnabled()&&s.hasCompoundNodes()?(this.forEachUp(function(l){if(l.isParent()){var d=l._private;d.compoundBoundsClean=!1,d.bbCache=null,c||l.emitAndNotify("bounds")}}),this):this},xl.updateCompoundBounds=function(){var c=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=this.cy();if(!s.styleEnabled()||!s.hasCompoundNodes())return this;if(!c&&s.batching())return this;function l(g){if(g.isParent()){var y=g._private,w=g.children(),b="include"===g.pstyle("compound-sizing-wrt-labels").value,_={width:{val:g.pstyle("min-width").pfValue,left:g.pstyle("min-width-bias-left"),right:g.pstyle("min-width-bias-right")},height:{val:g.pstyle("min-height").pfValue,top:g.pstyle("min-height-bias-top"),bottom:g.pstyle("min-height-bias-bottom")}},E=w.boundingBox({includeLabels:b,includeOverlays:!1,useCache:!1}),S=y.position;(0===E.w||0===E.h)&&((E={w:g.pstyle("width").pfValue,h:g.pstyle("height").pfValue}).x1=S.x-E.w/2,E.x2=S.x+E.w/2,E.y1=S.y-E.h/2,E.y2=S.y+E.h/2);var H=_.width.left.value;"px"===_.width.left.units&&_.width.val>0&&(H=100*H/_.width.val);var W=_.width.right.value;"px"===_.width.right.units&&_.width.val>0&&(W=100*W/_.width.val);var X=_.height.top.value;"px"===_.height.top.units&&_.height.val>0&&(X=100*X/_.height.val);var ne=_.height.bottom.value;"px"===_.height.bottom.units&&_.height.val>0&&(ne=100*ne/_.height.val);var re=O(_.width.val-E.w,H,W),se=re.biasDiff,De=re.biasComplementDiff,Ce=O(_.height.val-E.h,X,ne),le=Ce.biasDiff,_e=Ce.biasComplementDiff;y.autoPadding=function R(he,Te,Ae,ge){if("%"!==Ae.units)return"px"===Ae.units?Ae.pfValue:0;switch(ge){case"width":return he>0?Ae.pfValue*he:0;case"height":return Te>0?Ae.pfValue*Te:0;case"average":return he>0&&Te>0?Ae.pfValue*(he+Te)/2:0;case"min":return he>0&&Te>0?he>Te?Ae.pfValue*Te:Ae.pfValue*he:0;case"max":return he>0&&Te>0?he>Te?Ae.pfValue*he:Ae.pfValue*Te:0;default:return 0}}(E.w,E.h,g.pstyle("padding"),g.pstyle("padding-relative-to").value),y.autoWidth=Math.max(E.w,_.width.val),S.x=(-se+E.x1+E.x2+De)/2,y.autoHeight=Math.max(E.h,_.height.val),S.y=(-le+E.y1+E.y2+_e)/2}function O(he,Te,Ae){var ge=0,Fe=0,Se=Te+Ae;return he>0&&Se>0&&(ge=Te/Se*he,Fe=Ae/Se*he),{biasDiff:ge,biasComplementDiff:Fe}}}for(var d=0;d<this.length;d++){var f=this[d],p=f._private;(!p.compoundBoundsClean||c)&&(l(f),s.batching()||(p.compoundBoundsClean=!0))}return this};var Hs=function(s){return s===1/0||s===-1/0?0:s},Cs=function(s,l,d,f,p){f-l==0||p-d==0||null==l||null==d||null==f||null==p||(s.x1=l<s.x1?l:s.x1,s.x2=f>s.x2?f:s.x2,s.y1=d<s.y1?d:s.y1,s.y2=p>s.y2?p:s.y2,s.w=s.x2-s.x1,s.h=s.y2-s.y1)},ui=function(s,l){return null==l?s:Cs(s,l.x1,l.y1,l.x2,l.y2)},ts=function(s,l,d){return vs(s,l,d)},Ed=function(s,l,d){if(!l.cy().headless()){var w,b,f=l._private,p=f.rstyle,g=p.arrowWidth/2;if("none"!==l.pstyle(d+"-arrow-shape").value){"source"===d?(w=p.srcX,b=p.srcY):"target"===d?(w=p.tgtX,b=p.tgtY):(w=p.midX,b=p.midY);var _=f.arrowBounds=f.arrowBounds||{},E=_[d]=_[d]||{};E.x1=w-g,E.y1=b-g,E.x2=w+g,E.y2=b+g,E.w=E.x2-E.x1,E.h=E.y2-E.y1,gr(E,1),Cs(s,E.x1,E.y1,E.x2,E.y2)}}},El=function(s,l,d){if(!l.cy().headless()){var f,p=l._private,g=p.rstyle;if(l.pstyle((f=d?d+"-":"")+"label").strValue){var Ae,ge,Fe,Se,w=l.pstyle("text-halign"),b=l.pstyle("text-valign"),_=ts(g,"labelWidth",d),E=ts(g,"labelHeight",d),S=ts(g,"labelX",d),O=ts(g,"labelY",d),R=l.pstyle(f+"text-margin-x").pfValue,H=l.pstyle(f+"text-margin-y").pfValue,W=l.isEdge(),X=l.pstyle(f+"text-rotation"),ne=l.pstyle("text-outline-width").pfValue,se=l.pstyle("text-border-width").pfValue/2,De=l.pstyle("text-background-padding").pfValue,le=E,_e=_,he=_e/2,Te=le/2;if(W)Ae=S-he,ge=S+he,Fe=O-Te,Se=O+Te;else{switch(w.value){case"left":Ae=S-_e,ge=S;break;case"center":Ae=S-he,ge=S+he;break;case"right":Ae=S,ge=S+_e}switch(b.value){case"top":Fe=O-le,Se=O;break;case"center":Fe=O-Te,Se=O+Te;break;case"bottom":Fe=O,Se=O+le}}Ae+=R-Math.max(ne,se)-De-2,ge+=R+Math.max(ne,se)+De+2,Fe+=H-Math.max(ne,se)-De-2,Se+=H+Math.max(ne,se)+De+2;var Xe=d||"main",Ve=p.labelBounds,je=Ve[Xe]=Ve[Xe]||{};je.x1=Ae,je.y1=Fe,je.x2=ge,je.y2=Se,je.w=ge-Ae,je.h=Se-Fe;var Qe=W&&"autorotate"===X.strValue;if(Qe||null!=X.pfValue&&0!==X.pfValue){var ct=Qe?ts(p.rstyle,"labelAngle",d):X.pfValue,rt=Math.cos(ct),tt=Math.sin(ct),_t=(Ae+ge)/2,Dt=(Fe+Se)/2;if(!W){switch(w.value){case"left":_t=ge;break;case"right":_t=Ae}switch(b.value){case"top":Dt=Se;break;case"bottom":Dt=Fe}}var yt=function(kn,Ht){return{x:(kn-=_t)*rt-(Ht-=Dt)*tt+_t,y:kn*tt+Ht*rt+Dt}},mt=yt(Ae,Fe),Ze=yt(Ae,Se),xt=yt(ge,Fe),Mt=yt(ge,Se);Ae=Math.min(mt.x,Ze.x,xt.x,Mt.x),ge=Math.max(mt.x,Ze.x,xt.x,Mt.x),Fe=Math.min(mt.y,Ze.y,xt.y,Mt.y),Se=Math.max(mt.y,Ze.y,xt.y,Mt.y)}var Lt=Xe+"Rot",Vt=Ve[Lt]=Ve[Lt]||{};Vt.x1=Ae,Vt.y1=Fe,Vt.x2=ge,Vt.y2=Se,Vt.w=ge-Ae,Vt.h=Se-Fe,Cs(s,Ae,Fe,ge,Se),Cs(p.labelBounds.all,Ae,Fe,ge,Se)}return s}},Xv=function(s){var l=0,d=function(g){return(g?1:0)<<l++},f=0;return f+=d(s.incudeNodes),f+=d(s.includeEdges),f+=d(s.includeLabels),f+=d(s.includeMainLabels),f+=d(s.includeSourceLabels),(f+=d(s.includeTargetLabels))+d(s.includeOverlays)},Xp=function(s){if(s.isEdge()){var l=s.source().position(),d=s.target().position(),f=function(g){return Math.round(g)};return function(s,l){var d={value:0,done:!1},f=0,p=s.length;return td({next:function(){return f<p?d.value=s[f++]:d.done=!0,d}},void 0)}([f(l.x),f(l.y),f(d.x),f(d.y)])}return 0},Kv=function(s,l){var f,d=s._private,p=s.isEdge(),y=(null==l?Yh:Xv(l))===Yh,w=Xp(s),b=d.bbCachePosKey===w,_=l.useCache&&b,E=function(H){return null==H._private.bbCache||H._private.styleDirty};if(!_||E(s)||p&&E(s.source())||E(s.target())?(b||s.recalculateRenderedStyle(_),f=function(s,l){var _,E,S,O,R,H,d=s._private.cy,f=d.styleEnabled(),p=d.headless(),g=Lr(),y=s._private,w=s.isNode(),b=s.isEdge(),W=y.rstyle,X=w&&f?s.pstyle("bounds-expansion").pfValue:[0],ne=function(pn){return"none"!==pn.pstyle("display").value},re=!f||ne(s)&&(!b||ne(s.source())&&ne(s.target()));if(re){var De=0;f&&l.includeOverlays&&0!==s.pstyle("overlay-opacity").value&&(De=s.pstyle("overlay-padding").value);var le=0;f&&l.includeUnderlays&&0!==s.pstyle("underlay-opacity").value&&(le=s.pstyle("underlay-padding").value);var _e=Math.max(De,le),Te=0;if(f&&(Te=s.pstyle("width").pfValue/2),w&&l.includeNodes){var Ae=s.position();R=Ae.x,H=Ae.y;var Fe=s.outerWidth()/2,Xe=s.outerHeight()/2;Cs(g,_=R-Fe,S=H-Xe,E=R+Fe,O=H+Xe)}else if(b&&l.includeEdges)if(f&&!p){var Ve=s.pstyle("curve-style").strValue;if(_=Math.min(W.srcX,W.midX,W.tgtX),E=Math.max(W.srcX,W.midX,W.tgtX),S=Math.min(W.srcY,W.midY,W.tgtY),O=Math.max(W.srcY,W.midY,W.tgtY),Cs(g,_-=Te,S-=Te,E+=Te,O+=Te),"haystack"===Ve){var je=W.haystackPts;if(je&&2===je.length){if((_=je[0].x)>(E=je[1].x)){var Qe=_;_=E,E=Qe}if((S=je[0].y)>(O=je[1].y)){var it=S;S=O,O=it}Cs(g,_-Te,S-Te,E+Te,O+Te)}}else if("bezier"===Ve||"unbundled-bezier"===Ve||"segments"===Ve||"taxi"===Ve){var ct;switch(Ve){case"bezier":case"unbundled-bezier":ct=W.bezierPts;break;case"segments":case"taxi":ct=W.linePts}if(null!=ct)for(var rt=0;rt<ct.length;rt++){var tt=ct[rt];Cs(g,_=tt.x-Te,S=tt.y-Te,E=tt.x+Te,O=tt.y+Te)}}}else{var Dt=s.source().position(),mt=s.target().position();if((_=Dt.x)>(E=mt.x)){var Ze=_;_=E,E=Ze}if((S=Dt.y)>(O=mt.y)){var xt=S;S=O,O=xt}Cs(g,_-=Te,S-=Te,E+=Te,O+=Te)}if(f&&l.includeEdges&&b&&(Ed(g,s,"mid-source"),Ed(g,s,"mid-target"),Ed(g,s,"source"),Ed(g,s,"target")),f&&"yes"===s.pstyle("ghost").value){var Lt=s.pstyle("ghost-offset-x").pfValue,Vt=s.pstyle("ghost-offset-y").pfValue;Cs(g,g.x1+Lt,g.y1+Vt,g.x2+Lt,g.y2+Vt)}var xn=y.bodyBounds=y.bodyBounds||{};gl(xn,g),Is(xn,X),gr(xn,1),f&&Cs(g,(_=g.x1)-_e,(S=g.y1)-_e,(E=g.x2)+_e,(O=g.y2)+_e);var kn=y.overlayBounds=y.overlayBounds||{};gl(kn,g),Is(kn,X),gr(kn,1);var Ht=y.labelBounds=y.labelBounds||{};null!=Ht.all?function(s){s.x1=1/0,s.y1=1/0,s.x2=-1/0,s.y2=-1/0,s.w=0,s.h=0}(Ht.all):Ht.all=Lr(),f&&l.includeLabels&&(l.includeMainLabels&&El(g,s,null),b&&(l.includeSourceLabels&&El(g,s,"source"),l.includeTargetLabels&&El(g,s,"target")))}return g.x1=Hs(g.x1),g.y1=Hs(g.y1),g.x2=Hs(g.x2),g.y2=Hs(g.y2),g.w=Hs(g.x2-g.x1),g.h=Hs(g.y2-g.y1),g.w>0&&g.h>0&&re&&(Is(g,X),gr(g,1)),g}(s,Dd),d.bbCache=f,d.bbCachePosKey=w):f=d.bbCache,!y){var O=s.isNode();f=Lr(),(l.includeNodes&&O||l.includeEdges&&!O)&&ui(f,l.includeOverlays?d.overlayBounds:d.bodyBounds),l.includeLabels&&(l.includeMainLabels&&(!p||l.includeSourceLabels&&l.includeTargetLabels)?ui(f,d.labelBounds.all):(l.includeMainLabels&&ui(f,d.labelBounds.mainRot),l.includeSourceLabels&&ui(f,d.labelBounds.sourceRot),l.includeTargetLabels&&ui(f,d.labelBounds.targetRot))),f.w=f.x2-f.x1,f.h=f.y2-f.y1}return f},Dd={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,useCache:!0},Yh=Xv(Dd),Xh=yi(Dd);xl.boundingBox=function(c){var s;if(1!==this.length||null==this[0]._private.bbCache||this[0]._private.styleDirty||void 0!==c&&void 0!==c.useCache&&!0!==c.useCache){s=Lr();var l=Xh(c=c||Dd),d=this;if(d.cy().styleEnabled())for(var g=0;g<d.length;g++){var y=d[g],w=y._private,b=Xp(y);y.recalculateRenderedStyle(l.useCache&&w.bbCachePosKey===b&&!w.styleDirty)}this.updateCompoundBounds(!c.useCache);for(var S=0;S<d.length;S++)ui(s,Kv(d[S],l))}else c=void 0===c?Dd:Xh(c),s=Kv(this[0],c);return s.x1=Hs(s.x1),s.y1=Hs(s.y1),s.x2=Hs(s.x2),s.y2=Hs(s.y2),s.w=Hs(s.x2-s.x1),s.h=Hs(s.y2-s.y1),s},xl.dirtyBoundingBoxCache=function(){for(var c=0;c<this.length;c++){var s=this[c]._private;s.bbCache=null,s.bbCachePosKey=null,s.bodyBounds=null,s.overlayBounds=null,s.labelBounds.all=null,s.labelBounds.source=null,s.labelBounds.target=null,s.labelBounds.main=null,s.labelBounds.sourceRot=null,s.labelBounds.targetRot=null,s.labelBounds.mainRot=null,s.arrowBounds.source=null,s.arrowBounds.target=null,s.arrowBounds["mid-source"]=null,s.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},xl.boundingBoxAt=function(c){var s=this.nodes(),l=this.cy(),d=l.hasCompoundNodes(),f=l.collection();if(d&&(f=s.filter(function(b){return b.isParent()}),s=s.not(f)),ke(c)){var p=c;c=function(){return p}}l.startBatch(),s.forEach(function(_,E){return _._private.bbAtOldPos=c(_,E)}).silentPositions(c),d&&(f.dirtyCompoundBoundsCache(),f.dirtyBoundingBoxCache(),f.updateCompoundBounds(!0));var w=function(s){return{x1:s.x1,x2:s.x2,w:s.w,y1:s.y1,y2:s.y2,h:s.h}}(this.boundingBox({useCache:!1}));return s.silentPositions(function(_){return _._private.bbAtOldPos}),d&&(f.dirtyCompoundBoundsCache(),f.dirtyBoundingBoxCache(),f.updateCompoundBounds(!0)),l.endBatch(),w},_l.boundingbox=_l.bb=_l.boundingBox,_l.renderedBoundingbox=_l.renderedBoundingBox;var ac,Cd,Zv=xl;ac=Cd={};var Kp=function(s){s.uppercaseName=on(s.name),s.autoName="auto"+s.uppercaseName,s.labelName="label"+s.uppercaseName,s.outerName="outer"+s.uppercaseName,s.uppercaseOuterName=on(s.outerName),ac[s.name]=function(){var d=this[0],f=d._private;if(d){if(f.cy._private.styleEnabled){if(d.isParent())return d.updateCompoundBounds(),f[s.autoName]||0;var y=d.pstyle(s.name);return"label"===y.strValue?(d.recalculateRenderedStyle(),f.rstyle[s.labelName]||0):y.pfValue}return 1}},ac["outer"+s.uppercaseName]=function(){var d=this[0];if(d)return d._private.cy._private.styleEnabled?d[s.name]()+d.pstyle("border-width").pfValue+2*d.padding():1},ac["rendered"+s.uppercaseName]=function(){var d=this[0];if(d)return d[s.name]()*this.cy().zoom()},ac["rendered"+s.uppercaseOuterName]=function(){var d=this[0];if(d)return d[s.outerName]()*this.cy().zoom()}};Kp({name:"width"}),Kp({name:"height"}),Cd.padding=function(){var c=this[0],s=c._private;return c.isParent()?(c.updateCompoundBounds(),void 0!==s.autoPadding?s.autoPadding:c.pstyle("padding").pfValue):c.pstyle("padding").pfValue},Cd.paddedHeight=function(){var c=this[0];return c.height()+2*c.padding()},Cd.paddedWidth=function(){var c=this[0];return c.width()+2*c.padding()};var Zp=Cd,Dl={controlPoints:{get:function(s){return s.renderer().getControlPoints(s)},mult:!0},segmentPoints:{get:function(s){return s.renderer().getSegmentPoints(s)},mult:!0},sourceEndpoint:{get:function(s){return s.renderer().getSourceEndpoint(s)}},targetEndpoint:{get:function(s){return s.renderer().getTargetEndpoint(s)}},midpoint:{get:function(s){return s.renderer().getEdgeMidpoint(s)}}},ny=Object.keys(Dl).reduce(function(c,s){var l=Dl[s],d=function(s){return"rendered"+s[0].toUpperCase()+s.substr(1)}(s);return c[s]=function(){return function(s,l){if(s.isEdge())return l(s)}(this,l.get)},c[d]=l.mult?function(){return function(s,l){if(s.isEdge()){var d=s.cy(),f=d.pan(),p=d.zoom();return l(s).map(function(g){return Wn(g,p,f)})}}(this,l.get)}:function(){return function(s,l){if(s.isEdge()){var d=s.cy();return Wn(l(s),d.zoom(),d.pan())}}(this,l.get)},c},{}),I_=Zt({},Yp,Zv,Zp,ny),Jp=function(s,l){this.recycle(s,l)};function Sd(){return!1}function Kh(){return!0}Jp.prototype={instanceString:function(){return"event"},recycle:function(s,l){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Sd,null!=s&&s.preventDefault?(this.type=s.type,this.isDefaultPrevented=s.defaultPrevented?Kh:Sd):null!=s&&s.type?l=s:this.type=s,null!=l&&(this.originalEvent=l.originalEvent,this.type=null!=l.type?l.type:this.type,this.cy=l.cy,this.target=l.target,this.position=l.position,this.renderedPosition=l.renderedPosition,this.namespace=l.namespace,this.layout=l.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var d=this.position,f=this.cy.zoom(),p=this.cy.pan();this.renderedPosition={x:d.x*f+p.x,y:d.y*f+p.y}}this.timeStamp=s&&s.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=Kh;var s=this.originalEvent;s&&s.preventDefault&&s.preventDefault()},stopPropagation:function(){this.isPropagationStopped=Kh;var s=this.originalEvent;s&&s.stopPropagation&&s.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Kh,this.stopPropagation()},isDefaultPrevented:Sd,isPropagationStopped:Sd,isImmediatePropagationStopped:Sd};var ry=/^([^.]+)(\.(?:[^.]+))?$/,Md={qualifierCompare:function(s,l){return s===l},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(s){return s},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},Ad=Object.keys(Md),eg={};function Td(){for(var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:eg,s=arguments.length>1?arguments[1]:void 0,l=0;l<Ad.length;l++){var d=Ad[l];this[d]=c[d]||Md[d]}this.context=s||this.context,this.listeners=[],this.emitting=0}var Cl=Td.prototype,lc=function(s,l,d,f,p,g,y){qe(f)&&(p=f,f=null),y&&(g=null==g?y:Zt({},g,y));for(var w=ze(d)?d:d.split(/\s+/),b=0;b<w.length;b++){var _=w[b];if(!$e(_)){var E=_.match(ry);if(E&&!1===l(s,_,E[1],E[2]?E[2]:null,f,p,g))break}}},iu=function(s,l){return s.addEventFields(s.context,l),new Jp(l.type,l)};Cl.on=Cl.addListener=function(c,s,l,d,f){return lc(this,function(p,g,y,w,b,_,E){qe(_)&&p.listeners.push({event:g,callback:_,type:y,namespace:w,qualifier:b,conf:E})},c,s,l,d,f),this},Cl.one=function(c,s,l,d){return this.on(c,s,l,d,{one:!0})},Cl.removeListener=Cl.off=function(c,s,l,d){var f=this;0!==this.emitting&&(this.listeners=function(s){return s.slice()}(this.listeners));for(var p=this.listeners,g=function(b){var _=p[b];lc(f,function(E,S,O,R,H,W){if((_.type===O||"*"===c)&&(!R&&".*"!==_.namespace||_.namespace===R)&&(!H||E.qualifierCompare(_.qualifier,H))&&(!W||_.callback===W))return p.splice(b,1),!1},c,s,l,d)},y=p.length-1;y>=0;y--)g(y);return this},Cl.removeAllListeners=function(){return this.removeListener("*")},Cl.emit=Cl.trigger=function(c,s,l){var d=this.listeners,f=d.length;return this.emitting++,ze(s)||(s=[s]),function(s,l,d){if(function(s){return"event"===Le(s)}(d))l(s,d);else if(ke(d))l(s,iu(s,d));else for(var f=ze(d)?d:d.split(/\s+/),p=0;p<f.length;p++){var g=f[p];if(!$e(g)){var y=g.match(ry);y&&l(s,iu(s,{type:y[1],namespace:y[2]?y[2]:null,target:s.context}))}}}(this,function(p,g){null!=l&&(f=(d=[{event:g.event,type:g.type,namespace:g.namespace,callback:l}]).length);for(var y=function(_){var E=d[_];if(E.type===g.type&&(!E.namespace||E.namespace===g.namespace||".*"===E.namespace)&&p.eventMatches(p.context,E,g)){var S=[g];null!=s&&function(s,l){for(var d=0;d<l.length;d++)s.push(l[d])}(S,s),p.beforeEmit(p.context,E,g),E.conf&&E.conf.one&&(p.listeners=p.listeners.filter(function(H){return H!==E}));var O=p.callbackContext(p.context,E,g),R=E.callback.apply(O,S);p.afterEmit(p.context,E,g),!1===R&&(g.stopPropagation(),g.preventDefault())}},w=0;w<f;w++)y(w);p.bubble(p.context)&&!g.isPropagationStopped()&&p.parent(p.context).emit(g,s)},c),this.emitting--,this};var Z1={qualifierCompare:function(s,l){return null==s||null==l?null==s&&null==l:s.sameText(l)},eventMatches:function(s,l,d){var f=l.qualifier;return null==f||s!==d.target&&Je(d.target)&&f.matches(d.target)},addEventFields:function(s,l){l.cy=s.cy(),l.target=s},callbackContext:function(s,l,d){return null!=l.qualifier?d.target:s},beforeEmit:function(s,l){l.conf&&l.conf.once&&l.conf.onceCollection.removeListener(l.event,l.qualifier,l.callback)},bubble:function(){return!0},parent:function(s){return s.isChild()?s.parent():s.cy()}},ou=function(s){return ye(s)?new Fa(s):s},R_={createEmitter:function(){for(var s=0;s<this.length;s++){var l=this[s],d=l._private;d.emitter||(d.emitter=new Td(Z1,l))}return this},emitter:function(){return this._private.emitter},on:function(s,l,d){for(var f=ou(l),p=0;p<this.length;p++)this[p].emitter().on(s,f,d);return this},removeListener:function(s,l,d){for(var f=ou(l),p=0;p<this.length;p++)this[p].emitter().removeListener(s,f,d);return this},removeAllListeners:function(){for(var s=0;s<this.length;s++)this[s].emitter().removeAllListeners();return this},one:function(s,l,d){for(var f=ou(l),p=0;p<this.length;p++)this[p].emitter().one(s,f,d);return this},once:function(s,l,d){for(var f=ou(l),p=0;p<this.length;p++)this[p].emitter().on(s,f,d,{once:!0,onceCollection:this})},emit:function(s,l){for(var d=0;d<this.length;d++)this[d].emitter().emit(s,l);return this},emitAndNotify:function(s,l){if(0!==this.length)return this.cy().notify(s,this),this.emit(s,l),this}};Dr.eventAliasesOn(R_);var iy={nodes:function(s){return this.filter(function(l){return l.isNode()}).filter(s)},edges:function(s){return this.filter(function(l){return l.isEdge()}).filter(s)},byGroup:function(){for(var s=this.spawn(),l=this.spawn(),d=0;d<this.length;d++){var f=this[d];f.isNode()?s.push(f):l.push(f)}return{nodes:s,edges:l}},filter:function(s,l){if(void 0===s)return this;if(ye(s)||Ie(s))return new Fa(s).filter(this);if(qe(s)){for(var d=this.spawn(),f=this,p=0;p<f.length;p++){var g=f[p];(l?s.apply(l,[g,p,f]):s(g,p,f))&&d.push(g)}return d}return this.spawn()},not:function(s){if(s){ye(s)&&(s=this.filter(s));for(var l=this.spawn(),d=0;d<this.length;d++){var f=this[d];s.has(f)||l.push(f)}return l}return this},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(s){if(ye(s))return this.filter(s);for(var d=this.spawn(),g=this.length<s.length,y=g?this:s,w=g?s:this,b=0;b<y.length;b++){var _=y[b];w.has(_)&&d.push(_)}return d},xor:function(s){var l=this._private.cy;ye(s)&&(s=l.$(s));var d=this.spawn(),p=s,g=function(w,b){for(var _=0;_<w.length;_++){var E=w[_];b.hasElementWithId(E._private.data.id)||d.push(E)}};return g(this,p),g(p,this),d},diff:function(s){var l=this._private.cy;ye(s)&&(s=l.$(s));var d=this.spawn(),f=this.spawn(),p=this.spawn(),y=s,w=function(_,E,S){for(var O=0;O<_.length;O++){var R=_[O];E.hasElementWithId(R._private.data.id)?p.merge(R):S.push(R)}};return w(this,y,d),w(y,this,f),{left:d,right:f,both:p}},add:function(s){var l=this._private.cy;if(!s)return this;if(ye(s)){var d=s;s=l.mutableElements().filter(d)}for(var f=this.spawnSelf(),p=0;p<s.length;p++){var g=s[p];!this.has(g)&&f.push(g)}return f},merge:function(s){var l=this._private,d=l.cy;if(!s)return this;if(s&&ye(s)){var f=s;s=d.mutableElements().filter(f)}for(var p=l.map,g=0;g<s.length;g++){var y=s[g],w=y._private.data.id;if(!p.has(w)){var _=this.length++;this[_]=y,p.set(w,{ele:y,index:_})}}return this},unmergeAt:function(s){var d=this[s].id(),p=this._private.map;if(this[s]=void 0,p.delete(d),this.length>1&&s!==this.length-1){var y=this.length-1,w=this[y],b=w._private.data.id;this[y]=void 0,this[s]=w,p.set(b,{ele:w,index:s})}return this.length--,this},unmergeOne:function(s){var p=this._private.map.get((s=s[0])._private.data.id);return p?(this.unmergeAt(p.index),this):this},unmerge:function(s){var l=this._private.cy;if(!s)return this;if(s&&ye(s)){var d=s;s=l.mutableElements().filter(d)}for(var f=0;f<s.length;f++)this.unmergeOne(s[f]);return this},unmergeBy:function(s){for(var l=this.length-1;l>=0;l--)s(this[l])&&this.unmergeAt(l);return this},map:function(s,l){for(var d=[],f=this,p=0;p<f.length;p++){var g=f[p],y=l?s.apply(l,[g,p,f]):s(g,p,f);d.push(y)}return d},reduce:function(s,l){for(var d=l,f=this,p=0;p<f.length;p++)d=s(d,f[p],p,f);return d},max:function(s,l){for(var f,d=-1/0,p=this,g=0;g<p.length;g++){var y=p[g],w=l?s.apply(l,[y,g,p]):s(y,g,p);w>d&&(d=w,f=y)}return{value:d,ele:f}},min:function(s,l){for(var f,d=1/0,p=this,g=0;g<p.length;g++){var y=p[g],w=l?s.apply(l,[y,g,p]):s(y,g,p);w<d&&(d=w,f=y)}return{value:d,ele:f}}},dr=iy;dr.u=dr["|"]=dr["+"]=dr.union=dr.or=dr.add,dr["\\"]=dr["!"]=dr["-"]=dr.difference=dr.relativeComplement=dr.subtract=dr.not,dr.n=dr["&"]=dr["."]=dr.and=dr.intersection=dr.intersect,dr["^"]=dr["(+)"]=dr["(-)"]=dr.symmetricDifference=dr.symdiff=dr.xor,dr.fnFilter=dr.filterFn=dr.stdFilter=dr.filter,dr.complement=dr.abscomp=dr.absoluteComplement;var s,P_=function(s,l){var f=s.cy().hasCompoundNodes();function p(_){var E=_.pstyle("z-compound-depth");return"auto"===E.value?f?_.zDepth():0:"bottom"===E.value?-1:"top"===E.value?Uc:0}var g=p(s)-p(l);if(0!==g)return g;function y(_){return"auto"===_.pstyle("z-index-compare").value&&_.isNode()?1:0}var w=y(s)-y(l);if(0!==w)return w;var b=s.pstyle("z-index").value-l.pstyle("z-index").value;return 0!==b?b:s.poolIndex()-l.poolIndex()},su={forEach:function(s,l){if(qe(s))for(var d=this.length,f=0;f<d;f++){var p=this[f];if(!1===(l?s.apply(l,[p,f,this]):s(p,f,this)))break}return this},toArray:function(){for(var s=[],l=0;l<this.length;l++)s.push(this[l]);return s},slice:function(s,l){var d=[],f=this.length;null==l&&(l=f),null==s&&(s=0),s<0&&(s=f+s),l<0&&(l=f+l);for(var p=s;p>=0&&p<l&&p<f;p++)d.push(this[p]);return this.spawn(d)},size:function(){return this.length},eq:function(s){return this[s]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(s){if(!qe(s))return this;var l=this.toArray().sort(s);return this.spawn(l)},sortByZIndex:function(){return this.sort(P_)},zDepth:function(){var s=this[0];if(s){var l=s._private;if("nodes"===l.group){var f=l.data.parent?s.parents().size():0;return s.isParent()?f:Uc-1}var g=l.target,y=l.source.zDepth(),w=g.zDepth();return Math.max(y,w,0)}}};su.each=su.forEach,s="undefined",(typeof Symbol>"u"?"undefined":te(Symbol))!=s&&te(Symbol.iterator)!=s&&(su[Symbol.iterator]=function(){var d=this,f={value:void 0,done:!1},p=0,g=this.length;return Q({next:function(){return p<g?f.value=d[p++]:(f.value=void 0,f.done=!0),f}},Symbol.iterator,function(){return this})});var sy=yi({nodeDimensionsIncludeLabels:!1}),Sl={layoutDimensions:function(s){var l;if(s=sy(s),this.takesUpSpace())if(s.nodeDimensionsIncludeLabels){var d=this.boundingBox();l={w:d.w,h:d.h}}else l={w:this.outerWidth(),h:this.outerHeight()};else l={w:0,h:0};return(0===l.w||0===l.h)&&(l.w=l.h=1),l},layoutPositions:function(s,l,d){var f=this.nodes().filter(function(De){return!De.isParent()}),p=this.cy(),g=l.eles,y=function(Ce){return Ce.id()},w=ft(d,y);s.emit({type:"layoutstart",layout:s}),s.animations=[];var _=l.spacingFactor&&1!==l.spacingFactor,S=function(){if(!_)return null;for(var Ce=Lr(),le=0;le<f.length;le++){var he=w(f[le],le);Vh(Ce,he.x,he.y)}return Ce}(),O=ft(function(De,Ce){var le=w(De,Ce);return _&&(le=function(Ce,le,_e){var he_x=le.x1+le.w/2,he_y=le.y1+le.h/2;return{x:he_x+(_e.x-he_x)*Ce,y:he_y+(_e.y-he_y)*Ce}}(Math.abs(l.spacingFactor),S,le)),null!=l.transform&&(le=l.transform(De,le)),le},y);if(l.animate){for(var R=0;R<f.length;R++){var H=f[R],W=O(H,R);if(null==l.animateFilter||l.animateFilter(H,R)){var ne=H.animation({position:W,duration:l.animationDuration,easing:l.animationEasing});s.animations.push(ne)}else H.position(W)}if(l.fit){var re=p.animation({fit:{boundingBox:g.boundingBoxAt(O),padding:l.padding},duration:l.animationDuration,easing:l.animationEasing});s.animations.push(re)}else if(void 0!==l.zoom&&void 0!==l.pan){var se=p.animation({zoom:l.zoom,pan:l.pan,duration:l.animationDuration,easing:l.animationEasing});s.animations.push(se)}s.animations.forEach(function(De){return De.play()}),s.one("layoutready",l.ready),s.emit({type:"layoutready",layout:s}),bd.all(s.animations.map(function(De){return De.promise()})).then(function(){s.one("layoutstop",l.stop),s.emit({type:"layoutstop",layout:s})})}else f.positions(O),l.fit&&p.fit(l.eles,l.padding),null!=l.zoom&&p.zoom(l.zoom),l.pan&&p.pan(l.pan),s.one("layoutready",l.ready),s.emit({type:"layoutready",layout:s}),s.one("layoutstop",l.stop),s.emit({type:"layoutstop",layout:s});return this},layout:function(s){return this.cy().makeLayout(Zt({},s,{eles:this}))}};function tg(c,s,l){var p,d=l._private,f=d.styleCache=d.styleCache||[];return null!=(p=f[c])||(p=f[c]=s(l)),p}function kd(c,s){return c=Aa(c),function(d){return tg(c,s,d)}}function cc(c,s){c=Aa(c);var l=function(f){return s.call(f)};return function(){var f=this[0];if(f)return tg(c,l,f)}}Sl.createLayout=Sl.makeLayout=Sl.layout;var ji={recalculateRenderedStyle:function(s){var l=this.cy(),d=l.renderer(),f=l.styleEnabled();return d&&f&&d.recalculateRenderedStyle(this,s),this},dirtyStyleCache:function(){var d,s=this.cy(),l=function(p){return p._private.styleCache=null};return s.hasCompoundNodes()?((d=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(d.connectedEdges()),d.forEach(l)):this.forEach(function(f){l(f),f.connectedEdges().forEach(l)}),this},updateStyle:function(s){var l=this._private.cy;if(!l.styleEnabled())return this;if(l.batching())return l._private.batchStyleEles.merge(this),this;var p=this;s=!(!s&&void 0!==s),l.hasCompoundNodes()&&(p=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var g=p;return s?g.emitAndNotify("style"):g.emit("style"),p.forEach(function(y){return y._private.styleDirty=!0}),this},cleanStyle:function(){var s=this.cy();if(s.styleEnabled())for(var l=0;l<this.length;l++){var d=this[l];d._private.styleDirty&&(d._private.styleDirty=!1,s.style().apply(d))}},parsedStyle:function(s){var l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],d=this[0],f=d.cy();if(f.styleEnabled()&&d){this.cleanStyle();var p=d._private.style[s];return p??(l?f.style().getDefaultProperty(s):null)}},numericStyle:function(s){var l=this[0];if(l.cy().styleEnabled()&&l){var d=l.pstyle(s);return void 0!==d.pfValue?d.pfValue:d.value}},numericStyleUnits:function(s){var l=this[0];if(l.cy().styleEnabled()&&l)return l.pstyle(s).units},renderedStyle:function(s){var l=this.cy();if(!l.styleEnabled())return this;var d=this[0];return d?l.style().getRenderedStyle(d,s):void 0},style:function(s,l){var d=this.cy();if(!d.styleEnabled())return this;var p=d.style();if(ke(s))p.applyBypass(this,s,!1),this.emitAndNotify("style");else if(ye(s)){if(void 0===l){var y=this[0];return y?p.getStylePropertyValue(y,s):void 0}p.applyBypass(this,s,l,!1),this.emitAndNotify("style")}else if(void 0===s){var w=this[0];return w?p.getRawStyle(w):void 0}return this},removeStyle:function(s){var l=this.cy();if(!l.styleEnabled())return this;var f=l.style(),p=this;if(void 0===s)for(var g=0;g<p.length;g++)f.removeAllBypasses(p[g],!1);else{s=s.split(/\s+/);for(var w=0;w<p.length;w++)f.removeBypasses(p[w],s,!1)}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var s=this.cy();if(!s.styleEnabled())return 1;var l=s.hasCompoundNodes(),d=this[0];if(d){var f=d._private,p=d.pstyle("opacity").value;if(!l)return p;var g=f.data.parent?d.parents():null;if(g)for(var y=0;y<g.length;y++)p*=g[y].pstyle("opacity").value;return p}},transparent:function(){if(!this.cy().styleEnabled())return!1;var l=this[0],d=l.cy().hasCompoundNodes();return l?d?0===l.effectiveOpacity():0===l.pstyle("opacity").value:void 0},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function au(c,s){var d=c._private.data.parent?c.parents():null;if(d)for(var f=0;f<d.length;f++)if(!s(d[f]))return!1;return!0}function Id(c){var s=c.ok,l=c.edgeOkViaNode||c.ok,d=c.parentOk||c.ok;return function(){var f=this.cy();if(!f.styleEnabled())return!0;var p=this[0],g=f.hasCompoundNodes();if(p){var y=p._private;if(!s(p))return!1;if(p.isNode())return!g||au(p,d);var w=y.source,b=y.target;return l(w)&&(!g||au(w,l))&&(w===b||l(b)&&(!g||au(b,l)))}}}var Va=kd("eleTakesUpSpace",function(c){return"element"===c.pstyle("display").value&&0!==c.width()&&(!c.isNode()||0!==c.height())});ji.takesUpSpace=cc("takesUpSpace",Id({ok:Va}));var J1=kd("eleInteractive",function(c){return"yes"===c.pstyle("events").value&&"visible"===c.pstyle("visibility").value&&Va(c)}),ay=kd("parentInteractive",function(c){return"visible"===c.pstyle("visibility").value&&Va(c)});ji.interactive=cc("interactive",Id({ok:J1,parentOk:ay,edgeOkViaNode:Va})),ji.noninteractive=function(){var c=this[0];if(c)return!c.interactive()};var ly=kd("eleVisible",function(c){return"visible"===c.pstyle("visibility").value&&0!==c.pstyle("opacity").pfValue&&Va(c)});ji.visible=cc("visible",Id({ok:ly,edgeOkViaNode:Va})),ji.hidden=function(){var c=this[0];if(c)return!c.visible()},ji.isBundledBezier=cc("isBundledBezier",function(){return!!this.cy().styleEnabled()&&!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace()}),ji.bypass=ji.css=ji.style,ji.renderedCss=ji.renderedStyle,ji.removeBypass=ji.removeCss=ji.removeStyle,ji.pstyle=ji.parsedStyle;var Ui={};function cy(c){return function(){var s=arguments,l=[];if(2===s.length){var d=s[0],f=s[1];this.on(c.event,d,f)}else if(1===s.length&&qe(s[0])){var p=s[0];this.on(c.event,p)}else if(0===s.length||1===s.length&&ze(s[0])){for(var g=1===s.length?s[0]:null,y=0;y<this.length;y++){var w=this[y],b=!c.ableField||w._private[c.ableField],_=w._private[c.field]!=c.value;if(c.overrideAble){var E=c.overrideAble(w);if(void 0!==E&&(b=E,!E))return this}b&&(w._private[c.field]=c.value,_&&l.push(w))}var S=this.spawn(l);S.updateStyle(),S.emit(c.event),g&&S.emit(g)}return this}}function Ha(c){Ui[c.field]=function(){var s=this[0];if(s){if(c.overrideField){var l=c.overrideField(s);if(void 0!==l)return l}return s._private[c.field]}},Ui[c.on]=cy({event:c.on,field:c.field,ableField:c.ableField,overrideAble:c.overrideAble,value:!0}),Ui[c.off]=cy({event:c.off,field:c.field,ableField:c.ableField,overrideAble:c.overrideAble,value:!1})}Ha({field:"locked",overrideField:function(s){return!!s.cy().autolock()||void 0},on:"lock",off:"unlock"}),Ha({field:"grabbable",overrideField:function(s){return!s.cy().autoungrabify()&&!s.pannable()&&void 0},on:"grabify",off:"ungrabify"}),Ha({field:"selected",ableField:"selectable",overrideAble:function(s){return!s.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),Ha({field:"selectable",overrideField:function(s){return!s.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),Ui.deselect=Ui.unselect,Ui.grabbed=function(){var c=this[0];if(c)return c._private.grabbed},Ha({field:"active",on:"activate",off:"unactivate"}),Ha({field:"pannable",on:"panify",off:"unpanify"}),Ui.inactive=function(){var c=this[0];if(c)return!c._private.active};var Ai={},ng=function(s){return function(d){for(var p=[],g=0;g<this.length;g++){var y=this[g];if(y.isNode()){for(var w=!1,b=y.connectedEdges(),_=0;_<b.length;_++){var E=b[_],S=E.source(),O=E.target();if(s.noIncomingEdges&&O===y&&S!==y||s.noOutgoingEdges&&S===y&&O!==y){w=!0;break}}w||p.push(y)}}return this.spawn(p,!0).filter(d)}},Qh=function(s){return function(l){for(var f=[],p=0;p<this.length;p++){var g=this[p];if(g.isNode())for(var y=g.connectedEdges(),w=0;w<y.length;w++){var b=y[w],_=b.source(),E=b.target();s.outgoing&&_===g?(f.push(b),f.push(E)):s.incoming&&E===g&&(f.push(b),f.push(_))}}return this.spawn(f,!0).filter(l)}},Jh=function(s){return function(l){for(var d=this,f=[],p={};;){var g=s.outgoing?d.outgoers():d.incomers();if(0===g.length)break;for(var y=!1,w=0;w<g.length;w++){var b=g[w],_=b.id();p[_]||(p[_]=!0,f.push(b),y=!0)}if(!y)break;d=g}return this.spawn(f,!0).filter(l)}};function uy(c){return function(l){for(var d=[],f=0;f<this.length;f++){var g=this[f]._private[c.attr];g&&d.push(g)}return this.spawn(d,!0).filter(l)}}function rg(c){return function(l){var d=[],f=this._private.cy,p=c||{};ye(l)&&(l=f.$(l));for(var g=0;g<l.length;g++)for(var y=l[g]._private.edges,w=0;w<y.length;w++){var b=y[w],_=b._private.data,E=this.hasElementWithId(_.source)&&l.hasElementWithId(_.target),S=l.hasElementWithId(_.source)&&this.hasElementWithId(_.target);(E||S)&&((p.thisIsSrc||p.thisIsTgt)&&(p.thisIsSrc&&!E||p.thisIsTgt&&!S)||d.push(b))}return this.spawn(d,!0)}}function ig(c){return c=Zt({},{codirected:!1},c),function(d){for(var f=[],p=this.edges(),g=c,y=0;y<p.length;y++)for(var b=p[y]._private,_=b.source,E=_._private.data.id,S=b.data.target,O=_._private.edges,R=0;R<O.length;R++){var H=O[R],W=H._private.data,X=W.target,ne=W.source,re=X===S&&ne===E;(g.codirected&&re||!g.codirected&&(re||E===X&&S===ne))&&f.push(H)}return this.spawn(f,!0).filter(d)}}Ai.clearTraversalCache=function(){for(var c=0;c<this.length;c++)this[c]._private.traversalCache=null},Zt(Ai,{roots:ng({noIncomingEdges:!0}),leaves:ng({noOutgoingEdges:!0}),outgoers:es(Qh({outgoing:!0}),"outgoers"),successors:Jh({outgoing:!0}),incomers:es(Qh({incoming:!0}),"incomers"),predecessors:Jh({incoming:!0})}),Zt(Ai,{neighborhood:es(function(c){for(var s=[],l=this.nodes(),d=0;d<l.length;d++)for(var f=l[d],p=f.connectedEdges(),g=0;g<p.length;g++){var y=p[g],w=y.source(),b=y.target(),_=f===w?b:w;_.length>0&&s.push(_[0]),s.push(y[0])}return this.spawn(s,!0).filter(c)},"neighborhood"),closedNeighborhood:function(s){return this.neighborhood().add(this).filter(s)},openNeighborhood:function(s){return this.neighborhood(s)}}),Ai.neighbourhood=Ai.neighborhood,Ai.closedNeighbourhood=Ai.closedNeighborhood,Ai.openNeighbourhood=Ai.openNeighborhood,Zt(Ai,{source:es(function(s){var d,l=this[0];return l&&(d=l._private.source||l.cy().collection()),d&&s?d.filter(s):d},"source"),target:es(function(s){var d,l=this[0];return l&&(d=l._private.target||l.cy().collection()),d&&s?d.filter(s):d},"target"),sources:uy({attr:"source"}),targets:uy({attr:"target"})}),Zt(Ai,{edgesWith:es(rg(),"edgesWith"),edgesTo:es(rg({thisIsSrc:!0}),"edgesTo")}),Zt(Ai,{connectedEdges:es(function(c){for(var s=[],d=0;d<this.length;d++){var f=this[d];if(f.isNode())for(var p=f._private.edges,g=0;g<p.length;g++)s.push(p[g])}return this.spawn(s,!0).filter(c)},"connectedEdges"),connectedNodes:es(function(c){for(var s=[],d=0;d<this.length;d++){var f=this[d];f.isEdge()&&(s.push(f.source()[0]),s.push(f.target()[0]))}return this.spawn(s,!0).filter(c)},"connectedNodes"),parallelEdges:es(ig(),"parallelEdges"),codirectedEdges:es(ig({codirected:!0}),"codirectedEdges")}),Zt(Ai,{components:function(s){var l=this,d=l.cy(),f=d.collection(),p=null==s?l.nodes():s.nodes(),g=[];null!=s&&p.empty()&&(p=s.sources());var y=function(_,E){f.merge(_),p.unmerge(_),E.merge(_)};if(p.empty())return l.spawn();var w=function(){var _=d.collection();g.push(_);var E=p[0];y(E,_),l.bfs({directed:!1,roots:E,visit:function(O){return y(O,_)}}),_.forEach(function(S){S.connectedEdges().forEach(function(O){l.has(O)&&_.has(O.source())&&_.has(O.target())&&_.merge(O)})})};do{w()}while(p.length>0);return g},component:function(){var s=this[0];return s.cy().mutableElements().components(s)[0]}}),Ai.componentsOf=Ai.components;var Ti=function(s,l){var d=arguments.length>2&&void 0!==arguments[2]&&arguments[2],f=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(void 0!==s){var p=new co,g=!1;if(l){if(l.length>0&&ke(l[0])&&!Je(l[0])){g=!0;for(var y=[],w=new ka,b=0,_=l.length;b<_;b++){var E=l[b];null==E.data&&(E.data={});var S=E.data;if(null==S.id)S.id=dl();else if(s.hasElementWithId(S.id)||w.has(S.id))continue;var O=new fl(s,E,!1);y.push(O),w.add(S.id)}l=y}}else l=[];this.length=0;for(var R=0,H=l.length;R<H;R++){var W=l[R][0];if(null!=W){var X=W._private.data.id;(!d||!p.has(X))&&(d&&p.set(X,{index:this.length,ele:W}),this[this.length]=W,this.length++)}}this._private={eles:this,cy:s,get map(){return null==this.lazyMap&&this.rebuildMap(),this.lazyMap},set map(ne){this.lazyMap=ne},rebuildMap:function(){for(var re=this.lazyMap=new co,se=this.eles,De=0;De<se.length;De++){var Ce=se[De];re.set(Ce.id(),{index:De,ele:Ce})}}},d&&(this._private.map=p),g&&!f&&this.restore()}else Sr("A collection must have a reference to the core")},kr=fl.prototype=Ti.prototype=Object.create(Array.prototype);kr.instanceString=function(){return"collection"},kr.spawn=function(c,s){return new Ti(this.cy(),c,s)},kr.spawnSelf=function(){return this.spawn(this)},kr.cy=function(){return this._private.cy},kr.renderer=function(){return this._private.cy.renderer()},kr.element=function(){return this[0]},kr.collection=function(){return Pt(this)?this:new Ti(this._private.cy,[this])},kr.unique=function(){return new Ti(this._private.cy,this,!0)},kr.hasElementWithId=function(c){return this._private.map.has(c=""+c)},kr.getElementById=function(c){var s=this._private.cy,l=this._private.map.get(c=""+c);return l?l.ele:new Ti(s)},kr.$id=kr.getElementById,kr.poolIndex=function(){return this._private.cy._private.elements._private.map.get(this[0]._private.data.id).index},kr.indexOf=function(c){return this._private.map.get(c[0]._private.data.id).index},kr.indexOfId=function(c){return this._private.map.get(c=""+c).index},kr.json=function(c){var s=this.element(),l=this.cy();if(null==s&&c)return this;if(null!=s){var d=s._private;if(ke(c)){if(l.startBatch(),c.data){s.data(c.data);var f=d.data;if(s.isEdge()){var p=!1,g={},y=c.data.source,w=c.data.target;null!=y&&y!=f.source&&(g.source=""+y,p=!0),null!=w&&w!=f.target&&(g.target=""+w,p=!0),p&&(s=s.move(g))}else{var _=c.data.parent;"parent"in c.data&&(null!=_||null!=f.parent)&&_!=f.parent&&(void 0===_&&(_=null),null!=_&&(_=""+_),s=s.move({parent:_}))}}c.position&&s.position(c.position);var E=function(H,W,X){var ne=c[H];null!=ne&&ne!==d[H]&&(ne?s[W]():s[X]())};return E("removed","remove","restore"),E("selected","select","unselect"),E("selectable","selectify","unselectify"),E("locked","lock","unlock"),E("grabbable","grabify","ungrabify"),E("pannable","panify","unpanify"),null!=c.classes&&s.classes(c.classes),l.endBatch(),this}if(void 0===c){var S={data:Oo(d.data),position:Oo(d.position),group:d.group,removed:d.removed,selected:d.selected,selectable:d.selectable,locked:d.locked,grabbable:d.grabbable,pannable:d.pannable,classes:""},O=0;return d.classes.forEach(function(R){return S.classes+=0==O++?R:" "+R}),S}}},kr.jsons=function(){for(var c=[],s=0;s<this.length;s++){var d=this[s].json();c.push(d)}return c},kr.clone=function(){for(var c=this.cy(),s=[],l=0;l<this.length;l++){var f=this[l].json(),p=new fl(c,f,!1);s.push(p)}return new Ti(c,s)},kr.copy=kr.clone,kr.restore=function(){for(var y,c=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],l=this,d=l.cy(),f=d._private,p=[],g=[],w=0,b=l.length;w<b;w++){var _=l[w];s&&!_.removed()||(_.isNode()?p.push(_):g.push(_))}y=p.concat(g);var E,S=function(){y.splice(E,1),E--};for(E=0;E<y.length;E++){var O=y[E],R=O._private,H=R.data;if(O.clearTraversalCache(),s||R.removed)if(void 0===H.id)H.id=dl();else if(pe(H.id))H.id=""+H.id;else{if($e(H.id)||!ye(H.id)){Sr("Can not create element with invalid string ID `"+H.id+"`"),S();continue}if(d.hasElementWithId(H.id)){Sr("Can not create second element with ID `"+H.id+"`"),S();continue}}var W=H.id;if(O.isNode()){var X=R.position;null==X.x&&(X.x=0),null==X.y&&(X.y=0)}if(O.isEdge()){for(var ne=O,re=["source","target"],se=re.length,De=!1,Ce=0;Ce<se;Ce++){var le=re[Ce],_e=H[le];pe(_e)&&(_e=H[le]=""+H[le]),null==_e||""===_e?(Sr("Can not create edge `"+W+"` with unspecified "+le),De=!0):d.hasElementWithId(_e)||(Sr("Can not create edge `"+W+"` with nonexistant "+le+" `"+_e+"`"),De=!0)}if(De){S();continue}var he=d.getElementById(H.source),Te=d.getElementById(H.target);he.same(Te)?he._private.edges.push(ne):(he._private.edges.push(ne),Te._private.edges.push(ne)),ne._private.source=he,ne._private.target=Te}R.map=new co,R.map.set(W,{ele:O,index:0}),R.removed=!1,s&&d.addToPool(O)}for(var Ae=0;Ae<p.length;Ae++){var ge=p[Ae],Fe=ge._private.data;pe(Fe.parent)&&(Fe.parent=""+Fe.parent);var Se=Fe.parent,Xe=null!=Se;if(Xe||ge._private.parent){var Ve=ge._private.parent?d.collection().merge(ge._private.parent):d.getElementById(Se);if(Ve.empty())Fe.parent=void 0;else if(Ve[0].removed())ur("Node added with missing parent, reference to parent removed"),Fe.parent=void 0,ge._private.parent=null;else{for(var je=!1,Qe=Ve;!Qe.empty();){if(ge.same(Qe)){je=!0,Fe.parent=void 0;break}Qe=Qe.parent()}je||(Ve[0]._private.children.push(ge),ge._private.parent=Ve[0],f.hasCompoundNodes=!0)}}}if(y.length>0){for(var it=y.length===l.length?l:new Ti(d,y),ct=0;ct<it.length;ct++){var rt=it[ct];rt.isNode()||(rt.parallelEdges().clearTraversalCache(),rt.source().clearTraversalCache(),rt.target().clearTraversalCache())}(f.hasCompoundNodes?d.collection().merge(it).merge(it.connectedNodes()).merge(it.parent()):it).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(c),c?it.emitAndNotify("add"):s&&it.emit("add")}return l},kr.removed=function(){var c=this[0];return c&&c._private.removed},kr.inside=function(){var c=this[0];return c&&!c._private.removed},kr.remove=function(){var c=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],l=this,d=[],f={},p=l._private.cy;function g(Se){for(var Xe=Se._private.edges,Ve=0;Ve<Xe.length;Ve++)w(Xe[Ve])}function y(Se){for(var Xe=Se._private.children,Ve=0;Ve<Xe.length;Ve++)w(Xe[Ve])}function w(Se){var Xe=f[Se.id()];s&&Se.removed()||Xe||(f[Se.id()]=!0,Se.isNode()?(d.push(Se),g(Se),y(Se)):d.unshift(Se))}for(var b=0,_=l.length;b<_;b++){var E=l[b];w(E)}function S(Se,Xe){ia(Se._private.edges,Xe),Se.clearTraversalCache()}function O(Se){Se.clearTraversalCache()}var R=[];function H(Se,Xe){Xe=Xe[0];var Ve=(Se=Se[0])._private.children,je=Se.id();ia(Ve,Xe),Xe._private.parent=null,R.ids[je]||(R.ids[je]=!0,R.push(Se))}R.ids={},l.dirtyCompoundBoundsCache(),s&&p.removeFromPool(d);for(var W=0;W<d.length;W++){var X=d[W];if(X.isEdge()){var ne=X.source()[0],re=X.target()[0];S(ne,X),S(re,X);for(var se=X.parallelEdges(),De=0;De<se.length;De++){var Ce=se[De];O(Ce),Ce.isBundledBezier()&&Ce.dirtyBoundingBoxCache()}}else{var le=X.parent();0!==le.length&&H(le,X)}s&&(X._private.removed=!0)}var _e=p._private.elements;p._private.hasCompoundNodes=!1;for(var he=0;he<_e.length;he++){var Te=_e[he];if(Te.isParent()){p._private.hasCompoundNodes=!0;break}}var Ae=new Ti(this.cy(),d);Ae.size()>0&&(c?Ae.emitAndNotify("remove"):s&&Ae.emit("remove"));for(var ge=0;ge<R.length;ge++){var Fe=R[ge];(!s||!Fe.removed())&&Fe.updateStyle()}return Ae},kr.move=function(c){var s=this._private.cy,l=this,d=!1,f=!1,p=function(R){return null==R?R:""+R};if(void 0!==c.source||void 0!==c.target){var g=p(c.source),y=p(c.target),w=null!=g&&s.hasElementWithId(g),b=null!=y&&s.hasElementWithId(y);(w||b)&&(s.batch(function(){l.remove(d,f),l.emitAndNotify("moveout");for(var O=0;O<l.length;O++){var R=l[O],H=R._private.data;R.isEdge()&&(w&&(H.source=g),b&&(H.target=y))}l.restore(d,f)}),l.emitAndNotify("move"))}else if(void 0!==c.parent){var _=p(c.parent);if(null===_||s.hasElementWithId(_)){var S=null===_?void 0:_;s.batch(function(){var O=l.remove(d,f);O.emitAndNotify("moveout");for(var R=0;R<l.length;R++){var H=l[R],W=H._private.data;H.isNode()&&(W.parent=S)}O.restore(d,f)}),l.emitAndNotify("move")}}return this},[Fv,K1,oa,yn,_d,At,Un,I_,R_,iy,{isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var s=this[0];if(s)return s._private.group}},su,Sl,ji,Ui,Ai].forEach(function(c){Zt(kr,c)});var L_={add:function(s){var l,d=this;if(Ie(s)){var f=s;if(f._private.cy===d)l=f.restore();else{for(var p=[],g=0;g<f.length;g++)p.push(f[g].json());l=new Ti(d,p)}}else if(ze(s))l=new Ti(d,s);else if(ke(s)&&(ze(s.nodes)||ze(s.edges))){for(var b=s,_=[],E=["nodes","edges"],S=0,O=E.length;S<O;S++){var R=E[S],H=b[R];if(ze(H))for(var W=0,X=H.length;W<X;W++){var ne=Zt({group:R},H[W]);_.push(ne)}}l=new Ti(d,_)}else l=new fl(d,s).collection();return l},remove:function(s){return Ie(s)||ye(s)&&(s=this.$(s)),s.remove()}},uc=function(){function c(d){return-d.tension*d.x-d.friction*d.v}function s(d,f,p){var g={x:d.x+p.dx*f,v:d.v+p.dv*f,tension:d.tension,friction:d.friction};return{dx:g.v,dv:c(g)}}function l(d,f){var p={dx:d.v,dv:c(d)},g=s(d,.5*f,p),y=s(d,.5*f,g),w=s(d,f,y),_=1/6*(p.dv+2*(g.dv+y.dv)+w.dv);return d.x=d.x+1/6*(p.dx+2*(g.dx+y.dx)+w.dx)*f,d.v=d.v+_*f,d}return function d(f,p,g){var S,O,R,y={x:-1,v:0,tension:null,friction:null},w=[0],b=0,_=1e-4;for(f=parseFloat(f)||500,p=parseFloat(p)||20,g=g||null,y.tension=f,y.friction=p,O=(S=null!==g)?(b=d(f,p))/g*.016:.016;R=l(R||y,O),w.push(1+R.x),b+=16,Math.abs(R.x)>_&&Math.abs(R.v)>_;);return S?function(H){return w[H*(w.length-1)|0]}:b}}(),Rr=function(s,l,d,f){var p=function ef(c,s,l,d){var f=4,p=.001,g=1e-7,y=10,w=11,b=1/(w-1),_=typeof Float32Array<"u";if(4!==arguments.length)return!1;for(var E=0;E<4;++E)if("number"!=typeof arguments[E]||isNaN(arguments[E])||!isFinite(arguments[E]))return!1;c=Math.min(c,1),l=Math.min(l,1),c=Math.max(c,0),l=Math.max(l,0);var S=_?new Float32Array(w):new Array(w);function O(Te,Ae){return 1-3*Ae+3*Te}function R(Te,Ae){return 3*Ae-6*Te}function H(Te){return 3*Te}function W(Te,Ae,ge){return((O(Ae,ge)*Te+R(Ae,ge))*Te+H(Ae))*Te}function X(Te,Ae,ge){return 3*O(Ae,ge)*Te*Te+2*R(Ae,ge)*Te+H(Ae)}function ne(Te,Ae){for(var ge=0;ge<f;++ge){var Fe=X(Ae,c,l);if(0===Fe)return Ae;Ae-=(W(Ae,c,l)-Te)/Fe}return Ae}function re(){for(var Te=0;Te<w;++Te)S[Te]=W(Te*b,c,l)}function se(Te,Ae,ge){var Fe,Se,Xe=0;do{(Fe=W(Se=Ae+(ge-Ae)/2,c,l)-Te)>0?ge=Se:Ae=Se}while(Math.abs(Fe)>g&&++Xe<y);return Se}function De(Te){for(var Ae=0,ge=1,Fe=w-1;ge!==Fe&&S[ge]<=Te;++ge)Ae+=b;--ge;var Xe=Ae+(Te-S[ge])/(S[ge+1]-S[ge])*b,Ve=X(Xe,c,l);return Ve>=p?ne(Te,Xe):0===Ve?Xe:se(Te,Ae,Ae+b)}var Ce=!1;function le(){Ce=!0,(c!==s||l!==d)&&re()}var _e=function(Ae){return Ce||le(),c===s&&l===d?Ae:0===Ae?0:1===Ae?1:W(De(Ae),s,d)};_e.getControlPoints=function(){return[{x:c,y:s},{x:l,y:d}]};var he="generateBezier("+[c,s,l,d]+")";return _e.toString=function(){return he},_e}(s,l,d,f);return function(g,y,w){return g+(y-g)*p(w)}},Od={linear:function(s,l,d){return s+(l-s)*d},ease:Rr(.25,.1,.25,1),"ease-in":Rr(.42,0,1,1),"ease-out":Rr(0,0,.58,1),"ease-in-out":Rr(.42,0,.58,1),"ease-in-sine":Rr(.47,0,.745,.715),"ease-out-sine":Rr(.39,.575,.565,1),"ease-in-out-sine":Rr(.445,.05,.55,.95),"ease-in-quad":Rr(.55,.085,.68,.53),"ease-out-quad":Rr(.25,.46,.45,.94),"ease-in-out-quad":Rr(.455,.03,.515,.955),"ease-in-cubic":Rr(.55,.055,.675,.19),"ease-out-cubic":Rr(.215,.61,.355,1),"ease-in-out-cubic":Rr(.645,.045,.355,1),"ease-in-quart":Rr(.895,.03,.685,.22),"ease-out-quart":Rr(.165,.84,.44,1),"ease-in-out-quart":Rr(.77,0,.175,1),"ease-in-quint":Rr(.755,.05,.855,.06),"ease-out-quint":Rr(.23,1,.32,1),"ease-in-out-quint":Rr(.86,0,.07,1),"ease-in-expo":Rr(.95,.05,.795,.035),"ease-out-expo":Rr(.19,1,.22,1),"ease-in-out-expo":Rr(1,0,0,1),"ease-in-circ":Rr(.6,.04,.98,.335),"ease-out-circ":Rr(.075,.82,.165,1),"ease-in-out-circ":Rr(.785,.135,.15,.86),spring:function(s,l,d){if(0===d)return Od.linear;var f=uc(s,l,d);return function(p,g,y){return p+(g-p)*f(y)}},"cubic-bezier":Rr};function og(c,s,l,d,f){if(1===d||s===l)return l;var p=f(s,l,d);return null==c||((c.roundValue||c.color)&&(p=Math.round(p)),void 0!==c.min&&(p=Math.max(p,c.min)),void 0!==c.max&&(p=Math.min(p,c.max))),p}function dc(c,s){return null!=c.pfValue||null!=c.value?null==c.pfValue||null!=s&&"%"===s.type.units?c.value:c.pfValue:c}function lu(c,s,l,d,f){var p=null!=f?f.type:null;l<0?l=0:l>1&&(l=1);var g=dc(c,f),y=dc(s,f);if(pe(g)&&pe(y))return og(p,g,y,l,d);if(ze(g)&&ze(y)){for(var w=[],b=0;b<y.length;b++){var _=g[b],E=y[b];if(null!=_&&null!=E){var S=og(p,_,E,l,d);w.push(S)}else w.push(E)}return w}}function Gi(c,s,l,d){var f=!d,p=c._private,g=s._private,y=g.easing,w=g.startTime,_=(d?c:c.cy()).style();if(!g.easingImpl)if(null==y)g.easingImpl=Od.linear;else{var E,O,R;E=ye(y)?_.parse("transition-timing-function",y).value:y,ye(E)?(O=E,R=[]):(O=E[1],R=E.slice(2).map(function(it){return+it})),R.length>0?("spring"===O&&R.push(g.duration),g.easingImpl=Od[O].apply(null,R)):g.easingImpl=Od[O]}var W,H=g.easingImpl;if(W=0===g.duration?1:(l-w)/g.duration,g.applying&&(W=g.progress),W<0?W=0:W>1&&(W=1),null==g.delay){var X=g.startPosition,ne=g.position;if(ne&&f&&!c.locked()){var re={};hc(X.x,ne.x)&&(re.x=lu(X.x,ne.x,W,H)),hc(X.y,ne.y)&&(re.y=lu(X.y,ne.y,W,H)),c.position(re)}var se=g.startPan,De=g.pan,Ce=p.pan,le=null!=De&&d;le&&(hc(se.x,De.x)&&(Ce.x=lu(se.x,De.x,W,H)),hc(se.y,De.y)&&(Ce.y=lu(se.y,De.y,W,H)),c.emit("pan"));var _e=g.startZoom,he=g.zoom,Te=null!=he&&d;Te&&(hc(_e,he)&&(p.zoom=_n(p.minZoom,lu(_e,he,W,H),p.maxZoom)),c.emit("zoom")),(le||Te)&&c.emit("viewport");var Ae=g.style;if(Ae&&Ae.length>0&&f){for(var ge=0;ge<Ae.length;ge++){var Fe=Ae[ge],Se=Fe.name,Ve=g.startStyle[Se],Qe=lu(Ve,Fe,W,H,_.properties[Ve.name]);_.overrideBypass(c,Se,Qe)}c.emit("style")}}return g.progress=W,W}function hc(c,s){return!!(null!=c&&null!=s&&(pe(c)&&pe(s)||c&&s))}function F_(c,s,l,d){var f=s._private;f.started=!0,f.startTime=l-f.progress*f.duration}function sg(c,s){var l=s._private.aniEles,d=[];function f(_,E){var S=_._private,O=S.animation.current,R=S.animation.queue,H=!1;if(0===O.length){var W=R.shift();W&&O.push(W)}for(var X=function(Ce){for(var le=Ce.length-1;le>=0;le--)(0,Ce[le])();Ce.splice(0,Ce.length)},ne=O.length-1;ne>=0;ne--){var re=O[ne],se=re._private;se.stopped?(O.splice(ne,1),se.hooked=!1,se.playing=!1,se.started=!1,X(se.frames)):!se.playing&&!se.applying||(se.playing&&se.applying&&(se.applying=!1),se.started||F_(0,re,c),Gi(_,re,c,E),se.applying&&(se.applying=!1),X(se.frames),null!=se.step&&se.step(c),re.completed()&&(O.splice(ne,1),se.hooked=!1,se.playing=!1,se.started=!1,X(se.completes)),H=!0)}return!E&&0===O.length&&0===R.length&&d.push(_),H}for(var p=!1,g=0;g<l.length;g++){var w=f(l[g]);p=p||w}var b=f(s,!0);(p||b)&&(l.length>0?s.notify("draw",l):s.notify("draw")),l.unmerge(d),s.emit("step")}var Rd={animate:Dr.animate(),animation:Dr.animation(),animated:Dr.animated(),clearQueue:Dr.clearQueue(),delay:Dr.delay(),delayAnimation:Dr.delayAnimation(),stop:Dr.stop(),addToAnimationPool:function(s){this.styleEnabled()&&this._private.aniEles.merge(s)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var s=this;if(s._private.animationsRunning=!0,s.styleEnabled()){var d=s.renderer();d&&d.beforeRender?d.beforeRender(function(p,g){sg(g,s)},d.beforeRenderPriorities.animations):function l(){s._private.animationsRunning&&ll(function(p){sg(p,s),l()})}()}}},cu={qualifierCompare:function(s,l){return null==s||null==l?null==s&&null==l:s.sameText(l)},eventMatches:function(s,l,d){var f=l.qualifier;return null==f||s!==d.target&&Je(d.target)&&f.matches(d.target)},addEventFields:function(s,l){l.cy=s,l.target=s},callbackContext:function(s,l,d){return null!=l.qualifier?d.target:s}},za=function(s){return ye(s)?new Fa(s):s},fc={createEmitter:function(){var s=this._private;return s.emitter||(s.emitter=new Td(cu,this)),this},emitter:function(){return this._private.emitter},on:function(s,l,d){return this.emitter().on(s,za(l),d),this},removeListener:function(s,l,d){return this.emitter().removeListener(s,za(l),d),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(s,l,d){return this.emitter().one(s,za(l),d),this},once:function(s,l,d){return this.emitter().one(s,za(l),d),this},emit:function(s,l){return this.emitter().emit(s,l),this},emitAndNotify:function(s,l){return this.emit(s),this.notify(s,l),this}};Dr.eventAliasesOn(fc);var tf={png:function(s){return this._private.renderer.png(s=s||{})},jpg:function(s){var l=this._private.renderer;return(s=s||{}).bg=s.bg||"#fff",l.jpg(s)}};tf.jpeg=tf.jpg;var uu={layout:function(s){var l=this;if(null!=s)if(null!=s.name){var p,d=s.name,f=l.extension("layout",d);if(null!=f)return p=ye(s.eles)?l.$(s.eles):null!=s.eles?s.eles:l.$(),new f(Zt({},s,{cy:l,eles:p}));Sr("No such layout `"+d+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else Sr("A `name` must be specified to make a layout");else Sr("Layout options must be specified to make a layout")}};uu.createLayout=uu.makeLayout=uu.layout;var du={notify:function(s,l){var d=this._private;if(this.batching()){d.batchNotifications=d.batchNotifications||{};var f=d.batchNotifications[s]=d.batchNotifications[s]||this.collection();null!=l&&f.merge(l)}else if(d.notificationsEnabled){var p=this.renderer();this.destroyed()||!p||p.notify(s,l)}},notifications:function(s){var l=this._private;return void 0===s?l.notificationsEnabled:(l.notificationsEnabled=!!s,this)},noNotifications:function(s){this.notifications(!1),s(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var s=this._private;return null==s.batchCount&&(s.batchCount=0),0===s.batchCount&&(s.batchStyleEles=this.collection(),s.batchNotifications={}),s.batchCount++,this},endBatch:function(){var s=this._private;if(0===s.batchCount)return this;if(s.batchCount--,0===s.batchCount){s.batchStyleEles.updateStyle();var l=this.renderer();Object.keys(s.batchNotifications).forEach(function(d){var f=s.batchNotifications[d];f.empty()?l.notify(d):l.notify(d,f)})}return this},batch:function(s){return this.startBatch(),s(),this.endBatch(),this},batchData:function(s){var l=this;return this.batch(function(){for(var d=Object.keys(s),f=0;f<d.length;f++){var p=d[f],g=s[p];l.getElementById(p).data(g)}})}},eM=yi({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),ag={renderTo:function(s,l,d,f){return this._private.renderer.renderTo(s,l,d,f),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(s){var l=this,d=l.extension("renderer",s.name);if(null!=d){void 0!==s.wheelSensitivity&&ur("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var f=eM(s);f.cy=l,l._private.renderer=new d(f),this.notify("init")}else Sr("Can not initialise: No such renderer `".concat(s.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))},destroyRenderer:function(){var s=this;s.notify("destroy");var l=s.container();if(l)for(l._cyreg=null;l.childNodes.length>0;)l.removeChild(l.childNodes[0]);s._private.renderer=null,s.mutableElements().forEach(function(d){var f=d._private;f.rscratch={},f.rstyle={},f.animation.current=[],f.animation.queue=[]})},onRender:function(s){return this.on("render",s)},offRender:function(s){return this.off("render",s)}};ag.invalidateDimensions=ag.resize;var Gt={collection:function(s,l){return ye(s)?this.$(s):Ie(s)?s.collection():ze(s)?(l||(l={}),new Ti(this,s,l.unique,l.removed)):new Ti(this)},nodes:function(s){var l=this.$(function(d){return d.isNode()});return s?l.filter(s):l},edges:function(s){var l=this.$(function(d){return d.isEdge()});return s?l.filter(s):l},$:function(s){var l=this._private.elements;return s?l.filter(s):l.spawnSelf()},mutableElements:function(){return this._private.elements}};Gt.elements=Gt.filter=Gt.$;var po={apply:function(c){for(var s=this,f=s._private.cy.collection(),p=0;p<c.length;p++){var g=c[p],y=s.getContextMeta(g);if(!y.empty){var w=s.getContextStyle(y),b=s.applyContextStyle(y,w,g);g._private.appliedInitStyle?s.updateTransitions(g,b.diffProps):g._private.appliedInitStyle=!0,s.updateStyleHints(g)&&f.push(g)}}return f},getPropertiesDiff:function(c,s){var l=this,d=l._private.propDiffs=l._private.propDiffs||{},f=c+"-"+s,p=d[f];if(p)return p;for(var g=[],y={},w=0;w<l.length;w++){var b=l[w],E="t"===s[w],S="t"===c[w]!==E,O=b.mappedProperties.length>0;if(S||E&&O){var R=void 0;S&&O||S?R=b.properties:O&&(R=b.mappedProperties);for(var H=0;H<R.length;H++){for(var W=R[H],X=W.name,ne=!1,re=w+1;re<l.length&&("t"!==s[re]||!(ne=null!=l[re].properties[W.name]));re++);!y[X]&&!ne&&(y[X]=!0,g.push(X))}}}return d[f]=g,g},getContextMeta:function(c){for(var d,s=this,l="",f=c._private.styleCxtKey||"",p=0;p<s.length;p++){var g=s[p];l+=g.selector&&g.selector.matches(c)?"t":"f"}return d=s.getPropertiesDiff(f,l),c._private.styleCxtKey=l,{key:l,diffPropNames:d,empty:0===d.length}},getContextStyle:function(c){var s=c.key,d=this._private.contextStyles=this._private.contextStyles||{};if(d[s])return d[s];for(var f={_private:{key:s}},p=0;p<this.length;p++){var g=this[p];if("t"===s[p])for(var w=0;w<g.properties.length;w++){var b=g.properties[w];f[b.name]=b}}return d[s]=f,f},applyContextStyle:function(c,s,l){for(var f=c.diffPropNames,p={},g=this.types,y=0;y<f.length;y++){var w=f[y],b=s[w],_=l.pstyle(w);if(!b){if(!_)continue;b=_.bypass?{name:w,deleteBypassed:!0}:{name:w,delete:!0}}if(_!==b){if(b.mapped===g.fn&&null!=_&&null!=_.mapping&&_.mapping.value===b.value){var E=_.mapping;if((E.fnValue=b.value(l))===E.prevFnValue)continue}var O=p[w]={prev:_};this.applyParsedProperty(l,b),O.next=l.pstyle(w),O.next&&O.next.bypass&&(O.next=O.next.bypassed)}}return{diffProps:p}},updateStyleHints:function(c){var d,s=c._private,l=this,f=l.propertyGroupKeys,p=function(Lt,Vt,xn){return l.getPropertiesHash(Lt,Vt,xn)},g=s.styleKey;if(c.removed())return!1;var Lt,y="nodes"===s.group,w=c._private.style;d=Object.keys(w);for(var b=0;b<f.length;b++)s.styleKeys[f[b]]=[na,ra];for(var E=function(Lt,Vt){return s.styleKeys[Vt][0]=cl(Lt,s.styleKeys[Vt][0])},S=function(Lt,Vt){return s.styleKeys[Vt][1]=ul(Lt,s.styleKeys[Vt][1])},O=function(Lt,Vt){E(Lt,Vt),S(Lt,Vt)},R=function(Lt,Vt){for(var xn=0;xn<Lt.length;xn++){var kn=Lt.charCodeAt(xn);E(kn,Vt),S(kn,Vt)}},X=0;X<d.length;X++){var ne=d[X],re=w[ne];if(null!=re){var se=this.properties[ne],De=se.type,Ce=se.groupKey,le=void 0;null!=se.hashOverride?le=se.hashOverride(c,re):null!=re.pfValue&&(le=re.pfValue);var _e=null==se.enums?re.value:null,he=null!=le,ge=re.units;!De.number||!he&&null==_e||De.multiple?R(re.strValue,Ce):(O(-128<(Lt=he?le:_e)&&Lt<128&&Math.floor(Lt)!==Lt?2e9-(1024*Lt|0):Lt,Ce),!he&&null!=ge&&R(ge,Ce))}}for(var Se=[na,ra],Xe=0;Xe<f.length;Xe++){var je=s.styleKeys[f[Xe]];Se[0]=cl(je[0],Se[0]),Se[1]=ul(je[1],Se[1])}s.styleKey=function(s,l){return 2097152*s+l}(Se[0],Se[1]);var Qe=s.styleKeys;s.labelDimsKey=ps(Qe.labelDimensions);var it=p(c,["label"],Qe.labelDimensions);if(s.labelKey=ps(it),s.labelStyleKey=ps(gs(Qe.commonLabel,it)),!y){var ct=p(c,["source-label"],Qe.labelDimensions);s.sourceLabelKey=ps(ct),s.sourceLabelStyleKey=ps(gs(Qe.commonLabel,ct));var rt=p(c,["target-label"],Qe.labelDimensions);s.targetLabelKey=ps(rt),s.targetLabelStyleKey=ps(gs(Qe.commonLabel,rt))}if(y){var tt=s.styleKeys,Ze=tt.pie,xt=[tt.nodeBody,tt.nodeBorder,tt.backgroundImage,tt.compound,Ze].filter(function(Mt){return null!=Mt}).reduce(gs,[na,ra]);s.nodeKey=ps(xt),s.hasPie=null!=Ze&&Ze[0]!==na&&Ze[1]!==ra}return g!==s.styleKey},clearStyleHints:function(c){var s=c._private;s.styleCxtKey="",s.styleKeys={},s.styleKey=null,s.labelKey=null,s.labelStyleKey=null,s.sourceLabelKey=null,s.sourceLabelStyleKey=null,s.targetLabelKey=null,s.targetLabelStyleKey=null,s.nodeKey=null,s.hasPie=null},applyParsedProperty:function(c,s){var p,l=this,d=s,f=c._private.style,g=l.types,y=l.properties[d.name].type,w=d.bypass,b=f[d.name],_=b&&b.bypass,E=c._private,S="mapping",O=function(_t){return null==_t?null:null!=_t.pfValue?_t.pfValue:_t.value},R=function(){var _t=O(b),Dt=O(d);l.checkTriggers(c,d.name,_t,Dt)};if(d&&"pie"===d.name.substr(0,3)&&ur("The pie style properties are deprecated.  Create charts using background images instead."),"curve-style"===s.name&&c.isEdge()&&("bezier"!==s.value&&c.isLoop()||"haystack"===s.value&&(c.source().isParent()||c.target().isParent()))&&(d=s=this.parse(s.name,"bezier",w)),d.delete)return f[d.name]=void 0,R(),!0;if(d.deleteBypassed)return b?!!b.bypass&&(b.bypassed=void 0,R(),!0):(R(),!0);if(d.deleteBypass)return b?!!b.bypass&&(f[d.name]=b.bypassed,R(),!0):(R(),!0);var H=function(){ur("Do not assign mappings to elements without corresponding data (i.e. ele `"+c.id()+"` has no mapping for property `"+d.name+"` with data field `"+d.field+"`); try a `["+d.field+"]` selector to limit scope to elements with `"+d.field+"` defined")};switch(d.mapped){case g.mapData:for(var W=d.field.split("."),X=E.data,ne=0;ne<W.length&&X;ne++)X=X[W[ne]];if(null==X)return H(),!1;var se;if(!pe(X))return ur("Do not use continuous mappers without specifying numeric data (i.e. `"+d.field+": "+X+"` for `"+c.id()+"` is non-numeric)"),!1;var De=d.fieldMax-d.fieldMin;if((se=0===De?0:(X-d.fieldMin)/De)<0?se=0:se>1&&(se=1),y.color){var Ce=d.valueMin[0],_e=d.valueMin[1],he=d.valueMax[1],Te=d.valueMin[2],Ae=d.valueMax[2],ge=null==d.valueMin[3]?1:d.valueMin[3],Fe=null==d.valueMax[3]?1:d.valueMax[3],Se=[Math.round(Ce+(d.valueMax[0]-Ce)*se),Math.round(_e+(he-_e)*se),Math.round(Te+(Ae-Te)*se),Math.round(ge+(Fe-ge)*se)];p={bypass:d.bypass,name:d.name,value:Se,strValue:"rgb("+Se[0]+", "+Se[1]+", "+Se[2]+")"}}else{if(!y.number)return!1;p=this.parse(d.name,d.valueMin+(d.valueMax-d.valueMin)*se,d.bypass,S)}if(!p)return H(),!1;p.mapping=d,d=p;break;case g.data:for(var Ve=d.field.split("."),je=E.data,Qe=0;Qe<Ve.length&&je;Qe++)je=je[Ve[Qe]];if(null!=je&&(p=this.parse(d.name,je,d.bypass,S)),!p)return H(),!1;p.mapping=d,d=p;break;case g.fn:var rt=null!=d.fnValue?d.fnValue:(0,d.value)(c);if(d.prevFnValue=rt,null==rt)return ur("Custom function mappers may not return null (i.e. `"+d.name+"` for ele `"+c.id()+"` is null)"),!1;if(!(p=this.parse(d.name,rt,d.bypass,S)))return ur("Custom function mappers may not return invalid values for the property type (i.e. `"+d.name+"` for ele `"+c.id()+"` is invalid)"),!1;p.mapping=Oo(d),d=p;break;case void 0:break;default:return!1}return w?(d.bypassed=_?b.bypassed:b,f[d.name]=d):_?b.bypassed=d:f[d.name]=d,R(),!0},cleanElements:function(c,s){for(var l=0;l<c.length;l++){var d=c[l];if(this.clearStyleHints(d),d.dirtyCompoundBoundsCache(),d.dirtyBoundingBoxCache(),s)for(var f=d._private.style,p=Object.keys(f),g=0;g<p.length;g++){var y=p[g],w=f[y];null!=w&&(w.bypass?w.bypassed=null:f[y]=null)}else d._private.style={}}},update:function(){this._private.cy.mutableElements().updateStyle()},updateTransitions:function(c,s){var l=this,d=c._private,f=c.pstyle("transition-property").value,p=c.pstyle("transition-duration").pfValue,g=c.pstyle("transition-delay").pfValue;if(f.length>0&&p>0){for(var y={},w=!1,b=0;b<f.length;b++){var _=f[b],E=c.pstyle(_),S=s[_];if(S){var R=S.prev,H=null!=S.next?S.next:E,W=!1,X=void 0;R&&(pe(R.pfValue)&&pe(H.pfValue)?X=R.pfValue+1e-6*(W=H.pfValue-R.pfValue):pe(R.value)&&pe(H.value)?X=R.value+1e-6*(W=H.value-R.value):ze(R.value)&&ze(H.value)&&(W=R.value[0]!==H.value[0]||R.value[1]!==H.value[1]||R.value[2]!==H.value[2],X=R.strValue),W&&(y[_]=H.strValue,this.applyBypass(c,_,X),w=!0))}}if(!w)return;d.transitioning=!0,new bd(function(re){g>0?c.delayAnimation(g).play().promise().then(re):re()}).then(function(){return c.animation({style:y,duration:p,easing:c.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){l.removeBypasses(c,f),c.emitAndNotify("style"),d.transitioning=!1})}else d.transitioning&&(this.removeBypasses(c,f),c.emitAndNotify("style"),d.transitioning=!1)},checkTrigger:function(c,s,l,d,f,p){var g=this.properties[s],y=f(g);null!=y&&y(l,d)&&p(g)},checkZOrderTrigger:function(c,s,l,d){var f=this;this.checkTrigger(c,s,l,d,function(p){return p.triggersZOrder},function(){f._private.cy.notify("zorder",c)})},checkBoundsTrigger:function(c,s,l,d){this.checkTrigger(c,s,l,d,function(f){return f.triggersBounds},function(f){c.dirtyCompoundBoundsCache(),c.dirtyBoundingBoxCache(),f.triggersBoundsOfParallelBeziers&&("curve-style"===s&&("bezier"===l||"bezier"===d)||"display"===s&&("none"===l||"none"===d))&&c.parallelEdges().forEach(function(p){p.isBundledBezier()&&p.dirtyBoundingBoxCache()})})},checkTriggers:function(c,s,l,d){c.dirtyStyleCache(),this.checkZOrderTrigger(c,s,l,d),this.checkBoundsTrigger(c,s,l,d)}},rf={applyBypass:function(c,s,l,d){var p=[];if("*"===s||"**"===s){if(void 0!==l)for(var y=0;y<this.properties.length;y++){var _=this.parse(this.properties[y].name,l,!0);_&&p.push(_)}}else if(ye(s)){var E=this.parse(s,l,!0);E&&p.push(E)}else{if(!ke(s))return!1;var S=s;d=l;for(var O=Object.keys(S),R=0;R<O.length;R++){var H=O[R],W=S[H];if(void 0===W&&(W=S[tn(H)]),void 0!==W){var X=this.parse(H,W,!0);X&&p.push(X)}}}if(0===p.length)return!1;for(var ne=!1,re=0;re<c.length;re++){for(var se=c[re],De={},Ce=void 0,le=0;le<p.length;le++){var _e=p[le];if(d){var he=se.pstyle(_e.name);Ce=De[_e.name]={prev:he}}ne=this.applyParsedProperty(se,Oo(_e))||ne,d&&(Ce.next=se.pstyle(_e.name))}ne&&this.updateStyleHints(se),d&&this.updateTransitions(se,De,!0)}return ne},overrideBypass:function(c,s,l){s=Nt(s);for(var d=0;d<c.length;d++){var f=c[d],p=f._private.style[s],g=this.properties[s].type,y=g.color,w=g.mutiple,b=p?null!=p.pfValue?p.pfValue:p.value:null;p&&p.bypass?(p.value=l,null!=p.pfValue&&(p.pfValue=l),p.strValue=y?"rgb("+l.join(",")+")":w?l.join(" "):""+l,this.updateStyleHints(f)):this.applyBypass(f,s,l),this.checkTriggers(f,s,b,l)}},removeAllBypasses:function(c,s){return this.removeBypasses(c,this.propertyNames,s)},removeBypasses:function(c,s,l){for(var f=0;f<c.length;f++){for(var p=c[f],g={},y=0;y<s.length;y++){var w=s[y],b=this.properties[w],_=p.pstyle(b.name);if(_&&_.bypass){var S=this.parse(w,"",!0),O=g[b.name]={prev:_};this.applyParsedProperty(p,S),O.next=p.pstyle(b.name)}}this.updateStyleHints(p),l&&this.updateTransitions(p,g,!0)}}},dy={getEmSizeInPixels:function(){var c=this.containerCss("font-size");return null!=c?parseFloat(c):1},containerCss:function(c){var l=this._private.cy.container();if(V&&l&&V.getComputedStyle)return V.getComputedStyle(l).getPropertyValue(c)}},ja={getRenderedStyle:function(c,s){return s?this.getStylePropertyValue(c,s,!0):this.getRawStyle(c,!0)},getRawStyle:function(c,s){var l=this;if(c=c[0]){for(var d={},f=0;f<l.properties.length;f++){var p=l.properties[f],g=l.getStylePropertyValue(c,p.name,s);null!=g&&(d[p.name]=g,d[tn(p.name)]=g)}return d}},getIndexedStyle:function(c,s,l,d){return c.pstyle(s)[l][d]??c.cy().style().getDefaultProperty(s)[l][0]},getStylePropertyValue:function(c,s,l){if(c=c[0]){var f=this.properties[s];f.alias&&(f=f.pointsTo);var p=f.type,g=c.pstyle(f.name);if(g){var y=g.value,w=g.units,b=g.strValue;if(l&&p.number&&null!=y&&pe(y)){var _=c.cy().zoom(),E=function(W){return W*_},S=function(W,X){return E(W)+X},O=ze(y);return(O?w.every(function(H){return null!=H}):null!=w)?O?y.map(function(H,W){return S(H,w[W])}).join(" "):S(y,w):O?y.map(function(H){return ye(H)?H:""+E(H)}).join(" "):""+E(y)}if(null!=b)return b}return null}},getAnimationStartStyle:function(c,s){for(var l={},d=0;d<s.length;d++){var p=s[d].name,g=c.pstyle(p);void 0!==g&&(g=ke(g)?this.parse(p,g.strValue):this.parse(p,g)),g&&(l[p]=g)}return l},getPropsList:function(c){var l=[],d=c,f=this.properties;if(d)for(var p=Object.keys(d),g=0;g<p.length;g++){var y=p[g],w=d[y],b=f[y]||f[Nt(y)],_=this.parse(b.name,w);_&&l.push(_)}return l},getNonDefaultPropertiesHash:function(c,s,l){var p,g,y,w,b,d=l.slice();for(w=0;w<s.length;w++)if(null!=(p=c.pstyle(s[w],!1)))if(null!=p.pfValue)d[0]=cl(y,d[0]),d[1]=ul(y,d[1]);else for(g=p.strValue,b=0;b<g.length;b++)y=g.charCodeAt(b),d[0]=cl(y,d[0]),d[1]=ul(y,d[1]);return d}};ja.getPropertiesHash=ja.getNonDefaultPropertiesHash;var lg={appendFromJson:function(c){for(var s=this,l=0;l<c.length;l++){var d=c[l],f=d.selector,p=d.style||d.css,g=Object.keys(p);s.selector(f);for(var y=0;y<g.length;y++){var w=g[y];s.css(w,p[w])}}return s},fromJson:function(c){var s=this;return s.resetToDefault(),s.appendFromJson(c),s},json:function(){for(var c=[],s=this.defaultLength;s<this.length;s++){for(var l=this[s],d=l.selector,f=l.properties,p={},g=0;g<f.length;g++){var y=f[g];p[y.name]=y.strValue}c.push({selector:d?d.toString():"core",style:p})}return c}},pc={appendFromString:function(c){var f,p,g,l=this,d=""+c;function y(){d=d.length>f.length?d.substr(f.length):""}function w(){p=p.length>g.length?p.substr(g.length):""}for(d=d.replace(/[/][*](\s|.)+?[*][/]/g,"");!d.match(/^\s*$/);){var _=d.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!_){ur("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+d);break}f=_[0];var E=_[1];if("core"!==E&&new Fa(E).invalid)ur("Skipping parsing of block: Invalid selector found in string stylesheet: "+E),y();else{var O=_[2],R=!1;p=O;for(var H=[];!p.match(/^\s*$/);){var X=p.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!X){ur("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+O),R=!0;break}g=X[0];var ne=X[1],re=X[2];this.properties[ne]?l.parse(ne,re)?(H.push({name:ne,val:re}),w()):(ur("Skipping property: Invalid property definition in: "+g),w()):(ur("Skipping property: Invalid property name in: "+g),w())}if(R){y();break}l.selector(E);for(var Ce=0;Ce<H.length;Ce++){var le=H[Ce];l.css(le.name,le.val)}y()}}return l},fromString:function(c){var s=this;return s.resetToDefault(),s.appendFromString(c),s}},to={};(function(){var c=hn,s=_r,l=ai,p=function(xt){return"^"+xt+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},g=function(xt){var Mt=c+"|\\w+|"+s+"|"+l+"|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6}";return"^"+xt+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+c+")\\s*\\,\\s*("+c+")\\s*,\\s*("+Mt+")\\s*\\,\\s*("+Mt+")\\)$"},y=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];to.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:p("data")},layoutData:{mapping:!0,regex:p("layoutData")},scratch:{mapping:!0,regex:p("scratch")},mapData:{mapping:!0,regex:g("mapData")},mapLayoutData:{mapping:!0,regex:g("mapLayoutData")},mapScratch:{mapping:!0,regex:g("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:y,singleRegexMatchValue:!0},urls:{regexes:y,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(xt,Mt){switch(xt.length){case 2:return"deg"!==Mt[0]&&"rad"!==Mt[0]&&"deg"!==Mt[1]&&"rad"!==Mt[1];case 1:return ye(xt[0])||"deg"===Mt[0]||"rad"===Mt[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+c+")\\s*,\\s*("+c+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+c+")\\s*,\\s*("+c+")\\s*,\\s*("+c+")\\s*,\\s*("+c+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(xt){var Mt=xt.length;return 1===Mt||2===Mt||4===Mt}}};var w={zeroNonZero:function(xt,Mt){return(null==xt||null==Mt)&&xt!==Mt||0==xt&&0!=Mt||0!=xt&&0==Mt},any:function(xt,Mt){return xt!=Mt},emptyNonEmpty:function(xt,Mt){var Lt=$e(xt),Vt=$e(Mt);return Lt&&!Vt||!Lt&&Vt}},b=to.types,_=[{name:"label",type:b.text,triggersBounds:w.any,triggersZOrder:w.emptyNonEmpty},{name:"text-rotation",type:b.textRotation,triggersBounds:w.any},{name:"text-margin-x",type:b.bidirectionalSize,triggersBounds:w.any},{name:"text-margin-y",type:b.bidirectionalSize,triggersBounds:w.any}],E=[{name:"source-label",type:b.text,triggersBounds:w.any},{name:"source-text-rotation",type:b.textRotation,triggersBounds:w.any},{name:"source-text-margin-x",type:b.bidirectionalSize,triggersBounds:w.any},{name:"source-text-margin-y",type:b.bidirectionalSize,triggersBounds:w.any},{name:"source-text-offset",type:b.size,triggersBounds:w.any}],S=[{name:"target-label",type:b.text,triggersBounds:w.any},{name:"target-text-rotation",type:b.textRotation,triggersBounds:w.any},{name:"target-text-margin-x",type:b.bidirectionalSize,triggersBounds:w.any},{name:"target-text-margin-y",type:b.bidirectionalSize,triggersBounds:w.any},{name:"target-text-offset",type:b.size,triggersBounds:w.any}],O=[{name:"font-family",type:b.fontFamily,triggersBounds:w.any},{name:"font-style",type:b.fontStyle,triggersBounds:w.any},{name:"font-weight",type:b.fontWeight,triggersBounds:w.any},{name:"font-size",type:b.size,triggersBounds:w.any},{name:"text-transform",type:b.textTransform,triggersBounds:w.any},{name:"text-wrap",type:b.textWrap,triggersBounds:w.any},{name:"text-overflow-wrap",type:b.textOverflowWrap,triggersBounds:w.any},{name:"text-max-width",type:b.size,triggersBounds:w.any},{name:"text-outline-width",type:b.size,triggersBounds:w.any},{name:"line-height",type:b.positiveNumber,triggersBounds:w.any}],R=[{name:"text-valign",type:b.valign,triggersBounds:w.any},{name:"text-halign",type:b.halign,triggersBounds:w.any},{name:"color",type:b.color},{name:"text-outline-color",type:b.color},{name:"text-outline-opacity",type:b.zeroOneNumber},{name:"text-background-color",type:b.color},{name:"text-background-opacity",type:b.zeroOneNumber},{name:"text-background-padding",type:b.size,triggersBounds:w.any},{name:"text-border-opacity",type:b.zeroOneNumber},{name:"text-border-color",type:b.color},{name:"text-border-width",type:b.size,triggersBounds:w.any},{name:"text-border-style",type:b.borderStyle,triggersBounds:w.any},{name:"text-background-shape",type:b.textBackgroundShape,triggersBounds:w.any},{name:"text-justification",type:b.justification}],H=[{name:"events",type:b.bool},{name:"text-events",type:b.bool}],W=[{name:"display",type:b.display,triggersZOrder:w.any,triggersBounds:w.any,triggersBoundsOfParallelBeziers:!0},{name:"visibility",type:b.visibility,triggersZOrder:w.any},{name:"opacity",type:b.zeroOneNumber,triggersZOrder:w.zeroNonZero},{name:"text-opacity",type:b.zeroOneNumber},{name:"min-zoomed-font-size",type:b.size},{name:"z-compound-depth",type:b.zCompoundDepth,triggersZOrder:w.any},{name:"z-index-compare",type:b.zIndexCompare,triggersZOrder:w.any},{name:"z-index",type:b.nonNegativeInt,triggersZOrder:w.any}],X=[{name:"overlay-padding",type:b.size,triggersBounds:w.any},{name:"overlay-color",type:b.color},{name:"overlay-opacity",type:b.zeroOneNumber,triggersBounds:w.zeroNonZero},{name:"overlay-shape",type:b.overlayShape,triggersBounds:w.any}],ne=[{name:"underlay-padding",type:b.size,triggersBounds:w.any},{name:"underlay-color",type:b.color},{name:"underlay-opacity",type:b.zeroOneNumber,triggersBounds:w.zeroNonZero},{name:"underlay-shape",type:b.overlayShape,triggersBounds:w.any}],re=[{name:"transition-property",type:b.propList},{name:"transition-duration",type:b.time},{name:"transition-delay",type:b.time},{name:"transition-timing-function",type:b.easing}],se=function(xt,Mt){return"label"===Mt.value?-xt.poolIndex():Mt.pfValue},De=[{name:"height",type:b.nodeSize,triggersBounds:w.any,hashOverride:se},{name:"width",type:b.nodeSize,triggersBounds:w.any,hashOverride:se},{name:"shape",type:b.nodeShape,triggersBounds:w.any},{name:"shape-polygon-points",type:b.polygonPointList,triggersBounds:w.any},{name:"background-color",type:b.color},{name:"background-fill",type:b.fill},{name:"background-opacity",type:b.zeroOneNumber},{name:"background-blacken",type:b.nOneOneNumber},{name:"background-gradient-stop-colors",type:b.colors},{name:"background-gradient-stop-positions",type:b.percentages},{name:"background-gradient-direction",type:b.gradientDirection},{name:"padding",type:b.sizeMaybePercent,triggersBounds:w.any},{name:"padding-relative-to",type:b.paddingRelativeTo,triggersBounds:w.any},{name:"bounds-expansion",type:b.boundsExpansion,triggersBounds:w.any}],Ce=[{name:"border-color",type:b.color},{name:"border-opacity",type:b.zeroOneNumber},{name:"border-width",type:b.size,triggersBounds:w.any},{name:"border-style",type:b.borderStyle}],le=[{name:"background-image",type:b.urls},{name:"background-image-crossorigin",type:b.bgCrossOrigin},{name:"background-image-opacity",type:b.zeroOneNumbers},{name:"background-image-containment",type:b.bgContainment},{name:"background-image-smoothing",type:b.bools},{name:"background-position-x",type:b.bgPos},{name:"background-position-y",type:b.bgPos},{name:"background-width-relative-to",type:b.bgRelativeTo},{name:"background-height-relative-to",type:b.bgRelativeTo},{name:"background-repeat",type:b.bgRepeat},{name:"background-fit",type:b.bgFit},{name:"background-clip",type:b.bgClip},{name:"background-width",type:b.bgWH},{name:"background-height",type:b.bgWH},{name:"background-offset-x",type:b.bgPos},{name:"background-offset-y",type:b.bgPos}],_e=[{name:"position",type:b.position,triggersBounds:w.any},{name:"compound-sizing-wrt-labels",type:b.compoundIncludeLabels,triggersBounds:w.any},{name:"min-width",type:b.size,triggersBounds:w.any},{name:"min-width-bias-left",type:b.sizeMaybePercent,triggersBounds:w.any},{name:"min-width-bias-right",type:b.sizeMaybePercent,triggersBounds:w.any},{name:"min-height",type:b.size,triggersBounds:w.any},{name:"min-height-bias-top",type:b.sizeMaybePercent,triggersBounds:w.any},{name:"min-height-bias-bottom",type:b.sizeMaybePercent,triggersBounds:w.any}],he=[{name:"line-style",type:b.lineStyle},{name:"line-color",type:b.color},{name:"line-fill",type:b.fill},{name:"line-cap",type:b.lineCap},{name:"line-opacity",type:b.zeroOneNumber},{name:"line-dash-pattern",type:b.numbers},{name:"line-dash-offset",type:b.number},{name:"line-gradient-stop-colors",type:b.colors},{name:"line-gradient-stop-positions",type:b.percentages},{name:"curve-style",type:b.curveStyle,triggersBounds:w.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:b.zeroOneNumber,triggersBounds:w.any},{name:"source-endpoint",type:b.edgeEndpoint,triggersBounds:w.any},{name:"target-endpoint",type:b.edgeEndpoint,triggersBounds:w.any},{name:"control-point-step-size",type:b.size,triggersBounds:w.any},{name:"control-point-distances",type:b.bidirectionalSizes,triggersBounds:w.any},{name:"control-point-weights",type:b.numbers,triggersBounds:w.any},{name:"segment-distances",type:b.bidirectionalSizes,triggersBounds:w.any},{name:"segment-weights",type:b.numbers,triggersBounds:w.any},{name:"taxi-turn",type:b.bidirectionalSizeMaybePercent,triggersBounds:w.any},{name:"taxi-turn-min-distance",type:b.size,triggersBounds:w.any},{name:"taxi-direction",type:b.axisDirection,triggersBounds:w.any},{name:"edge-distances",type:b.edgeDistances,triggersBounds:w.any},{name:"arrow-scale",type:b.positiveNumber,triggersBounds:w.any},{name:"loop-direction",type:b.angle,triggersBounds:w.any},{name:"loop-sweep",type:b.angle,triggersBounds:w.any},{name:"source-distance-from-node",type:b.size,triggersBounds:w.any},{name:"target-distance-from-node",type:b.size,triggersBounds:w.any}],Te=[{name:"ghost",type:b.bool,triggersBounds:w.any},{name:"ghost-offset-x",type:b.bidirectionalSize,triggersBounds:w.any},{name:"ghost-offset-y",type:b.bidirectionalSize,triggersBounds:w.any},{name:"ghost-opacity",type:b.zeroOneNumber}],Ae=[{name:"selection-box-color",type:b.color},{name:"selection-box-opacity",type:b.zeroOneNumber},{name:"selection-box-border-color",type:b.color},{name:"selection-box-border-width",type:b.size},{name:"active-bg-color",type:b.color},{name:"active-bg-opacity",type:b.zeroOneNumber},{name:"active-bg-size",type:b.size},{name:"outside-texture-bg-color",type:b.color},{name:"outside-texture-bg-opacity",type:b.zeroOneNumber}],ge=[];to.pieBackgroundN=16,ge.push({name:"pie-size",type:b.sizeMaybePercent});for(var Fe=1;Fe<=to.pieBackgroundN;Fe++)ge.push({name:"pie-"+Fe+"-background-color",type:b.color}),ge.push({name:"pie-"+Fe+"-background-size",type:b.percent}),ge.push({name:"pie-"+Fe+"-background-opacity",type:b.zeroOneNumber});var Se=[],Xe=to.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:b.arrowShape,triggersBounds:w.any},{name:"arrow-color",type:b.color},{name:"arrow-fill",type:b.arrowFill}].forEach(function(Ze){Xe.forEach(function(xt){Se.push({name:xt+"-"+Ze.name,type:Ze.type,triggersBounds:Ze.triggersBounds})})},{});var Ve=to.properties=[].concat(H,re,W,X,ne,Te,R,O,_,E,S,De,Ce,le,ge,_e,he,Se,Ae),je=to.propertyGroups={behavior:H,transition:re,visibility:W,overlay:X,underlay:ne,ghost:Te,commonLabel:R,labelDimensions:O,mainLabel:_,sourceLabel:E,targetLabel:S,nodeBody:De,nodeBorder:Ce,backgroundImage:le,pie:ge,compound:_e,edgeLine:he,edgeArrow:Se,core:Ae},Qe=to.propertyGroupNames={};(to.propertyGroupKeys=Object.keys(je)).forEach(function(Ze){Qe[Ze]=je[Ze].map(function(xt){return xt.name}),je[Ze].forEach(function(xt){return xt.groupKey=Ze})});var ct=to.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];to.propertyNames=Ve.map(function(Ze){return Ze.name});for(var rt=0;rt<Ve.length;rt++){var tt=Ve[rt];Ve[tt.name]=tt}for(var _t=0;_t<ct.length;_t++){var Dt=ct[_t],mt={name:Dt.name,alias:!0,pointsTo:Ve[Dt.pointsTo]};Ve.push(mt),Ve[Dt.name]=mt}})(),to.getDefaultProperty=function(c){return this.getDefaultProperties()[c]},to.getDefaultProperties=function(){var c=this._private;if(null!=c.defaultProperties)return c.defaultProperties;for(var s=Zt({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(w,b){for(var _=1;_<=to.pieBackgroundN;_++)w[b.name.replace("{{i}}",_)]=b.value;return w},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce(function(w,b){return to.arrowPrefixes.forEach(function(_){w[_+"-"+b.name]=b.value}),w},{})),l={},d=0;d<this.properties.length;d++){var f=this.properties[d];if(!f.pointsTo){var p=f.name,y=this.parse(p,s[p]);l[p]=y}}return c.defaultProperties=l,c.defaultProperties},to.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var cg={parse:function(c,s,l,d){var f=this;if(qe(s))return f.parseImplWarn(c,s,l,d);var _,w=Ph(c,""+s,l?"t":"f","mapping"===d||!0===d||!1===d||null==d?"dontcare":d),b=f.propCache=f.propCache||[];return(_=b[w])||(_=b[w]=f.parseImplWarn(c,s,l,d)),(l||"mapping"===d)&&(_=Oo(_))&&(_.value=Oo(_.value)),_},parseImplWarn:function(c,s,l,d){var f=this.parseImpl(c,s,l,d);return!f&&null!=s&&ur("The style property `".concat(c,": ").concat(s,"` is invalid")),f&&("width"===f.name||"height"===f.name)&&"label"===s&&ur("The style value of `label` is deprecated for `"+f.name+"`"),f}};cg.parseImpl=function(c,s,l,d){var f=this;c=Nt(c);var p=f.properties[c],g=s,y=f.types;if(!p||void 0===s)return null;p.alias&&(c=(p=p.pointsTo).name);var w=ye(s);w&&(s=s.trim());var _,E,b=p.type;if(!b)return null;if(l&&(""===s||null===s))return{name:c,value:s,bypass:!0,deleteBypass:!0};if(qe(s))return{name:c,value:s,strValue:"fn",mapped:y.fn,bypass:l};if(!(!w||d||s.length<7||"a"!==s[1])){if(s.length>=7&&"d"===s[0]&&(_=new RegExp(y.data.regex).exec(s)))return!l&&{name:c,value:_,strValue:""+s,mapped:y.data,field:_[1],bypass:l};if(s.length>=10&&"m"===s[0]&&(E=new RegExp(y.mapData.regex).exec(s))){if(l||b.multiple)return!1;var O=y.mapData;if(!b.color&&!b.number)return!1;var R=this.parse(c,E[4]);if(!R||R.mapped)return!1;var H=this.parse(c,E[5]);if(!H||H.mapped)return!1;if(R.pfValue===H.pfValue||R.strValue===H.strValue)return ur("`"+c+": "+s+"` is not a valid mapper because the output range is zero; converting to `"+c+": "+R.strValue+"`"),this.parse(c,R.strValue);if(b.color){var W=R.value,X=H.value;if(!(W[0]!==X[0]||W[1]!==X[1]||W[2]!==X[2]||W[3]!==X[3]&&(null!=W[3]&&1!==W[3]||null!=X[3]&&1!==X[3])))return!1}return{name:c,value:E,strValue:""+s,mapped:O,field:E[1],fieldMin:parseFloat(E[2]),fieldMax:parseFloat(E[3]),valueMin:R.value,valueMax:H.value,bypass:l}}}if(b.multiple&&"multiple"!==d){var re;if(re=w?s.split(/\s+/):ze(s)?s:[s],b.evenMultiple&&re.length%2!=0)return null;for(var se=[],De=[],Ce=[],le="",_e=!1,he=0;he<re.length;he++){var Te=f.parse(c,re[he],l,"multiple");_e=_e||ye(Te.value),se.push(Te.value),Ce.push(null!=Te.pfValue?Te.pfValue:Te.value),De.push(Te.units),le+=(he>0?" ":"")+Te.strValue}return b.validate&&!b.validate(se,De)?null:b.singleEnum&&_e?1===se.length&&ye(se[0])?{name:c,value:se[0],strValue:se[0],bypass:l}:null:{name:c,value:se,pfValue:Ce,strValue:le,bypass:l,units:De}}var Ae=function(){for(var Mt=0;Mt<b.enums.length;Mt++)if(b.enums[Mt]===s)return{name:c,value:s,strValue:""+s,bypass:l};return null};if(b.number){var ge,Fe="px";if(b.units&&(ge=b.units),b.implicitUnits&&(Fe=b.implicitUnits),!b.unitless)if(w){var Se="px|em"+(b.allowPercent?"|\\%":"");ge&&(Se=ge);var Xe=s.match("^("+hn+")("+Se+")?$");Xe&&(s=Xe[1],ge=Xe[2]||Fe)}else(!ge||b.implicitUnits)&&(ge=Fe);if(s=parseFloat(s),isNaN(s)&&void 0===b.enums)return null;if(isNaN(s)&&void 0!==b.enums)return s=g,Ae();if(b.integer&&!function(s){return pe(s)&&Math.floor(s)===s}(s)||void 0!==b.min&&(s<b.min||b.strictMin&&s===b.min)||void 0!==b.max&&(s>b.max||b.strictMax&&s===b.max))return null;var Ve={name:c,value:s,strValue:""+s+(ge||""),units:ge,bypass:l};return Ve.pfValue=b.unitless||"px"!==ge&&"em"!==ge?s:"px"!==ge&&ge?this.getEmSizeInPixels()*s:s,("ms"===ge||"s"===ge)&&(Ve.pfValue="ms"===ge?s:1e3*s),("deg"===ge||"rad"===ge)&&(Ve.pfValue="rad"===ge?s:function(s){return Math.PI*s/180}(s)),"%"===ge&&(Ve.pfValue=s/100),Ve}if(b.propList){var je=[],Qe=""+s;if("none"!==Qe){for(var it=Qe.split(/\s*,\s*|\s+/),ct=0;ct<it.length;ct++){var rt=it[ct].trim();f.properties[rt]?je.push(rt):ur("`"+rt+"` is not a valid property name")}if(0===je.length)return null}return{name:c,value:je,strValue:0===je.length?"none":je.join(" "),bypass:l}}if(b.color){var tt=function(s){return(ze(s)?s:null)||function(s){return nc[s.toLowerCase()]}(s)||function(s){if((4===s.length||7===s.length)&&"#"===s[0]){var d,f,p,g=16;return 4===s.length?(d=parseInt(s[1]+s[1],g),f=parseInt(s[2]+s[2],g),p=parseInt(s[3]+s[3],g)):(d=parseInt(s[1]+s[2],g),f=parseInt(s[3]+s[4],g),p=parseInt(s[5]+s[6],g)),[d,f,p]}}(s)||function(s){var l,d=new RegExp("^"+$n+"$").exec(s);if(d){l=[];for(var f=[],p=1;p<=3;p++){var g=d[p];if("%"===g[g.length-1]&&(f[p]=!0),g=parseFloat(g),f[p]&&(g=g/100*255),g<0||g>255)return;l.push(Math.floor(g))}if((f[1]||f[2]||f[3])&&!(f[1]&&f[2]&&f[3]))return;var b=d[4];if(void 0!==b){if((b=parseFloat(b))<0||b>1)return;l.push(b)}}return l}(s)||function(s){var l,d,f,p,g,y,w,b;function _(R,H,W){return W<0&&(W+=1),W>1&&(W-=1),W<1/6?R+6*(H-R)*W:W<.5?H:W<2/3?R+(H-R)*(2/3-W)*6:R}var E=new RegExp("^"+vr+"$").exec(s);if(E){if((d=parseInt(E[1]))<0?d=(360- -1*d%360)%360:d>360&&(d%=360),d/=360,(f=parseFloat(E[2]))<0||f>100||(f/=100,(p=parseFloat(E[3]))<0||p>100)||(p/=100,void 0!==(g=E[4])&&((g=parseFloat(g))<0||g>1)))return;if(0===f)y=w=b=Math.round(255*p);else{var S=p<.5?p*(1+f):p+f-p*f,O=2*p-S;y=Math.round(255*_(O,S,d+1/3)),w=Math.round(255*_(O,S,d)),b=Math.round(255*_(O,S,d-1/3))}l=[y,w,b,g]}return l}(s)}(s);return tt?{name:c,value:tt,pfValue:tt,strValue:"rgb("+tt[0]+","+tt[1]+","+tt[2]+")",bypass:l}:null}if(b.regex||b.regexes){if(b.enums){var _t=Ae();if(_t)return _t}for(var Dt=b.regexes?b.regexes:[b.regex],yt=0;yt<Dt.length;yt++){var Ze=new RegExp(Dt[yt]).exec(s);if(Ze)return{name:c,value:b.singleRegexMatchValue?Ze[1]:Ze,strValue:""+s,bypass:l}}return null}return b.string?{name:c,value:""+s,strValue:""+s,bypass:l}:b.enums?Ae():null};var ir=function c(s){if(!(this instanceof c))return new c(s);pt(s)?(this._private={cy:s,coreStyle:{}},this.length=0,this.resetToDefault()):Sr("A style must have a core reference")},ki=ir.prototype;ki.instanceString=function(){return"style"},ki.clear=function(){for(var c=this._private,l=c.cy.elements(),d=0;d<this.length;d++)this[d]=void 0;return this.length=0,c.contextStyles={},c.propDiffs={},this.cleanElements(l,!0),l.forEach(function(f){var p=f[0]._private;p.styleDirty=!0,p.appliedInitStyle=!1}),this},ki.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},ki.core=function(c){return this._private.coreStyle[c]||this.getDefaultProperty(c)},ki.selector=function(c){var s="core"===c?null:new Fa(c),l=this.length++;return this[l]={selector:s,properties:[],mappedProperties:[],index:l},this},ki.css=function(){var c=this,s=arguments;if(1===s.length)for(var l=s[0],d=0;d<c.properties.length;d++){var f=c.properties[d],p=l[f.name];void 0===p&&(p=l[tn(f.name)]),void 0!==p&&this.cssRule(f.name,p)}else 2===s.length&&this.cssRule(s[0],s[1]);return this},ki.style=ki.css,ki.cssRule=function(c,s){var l=this.parse(c,s);if(l){var d=this.length-1;this[d].properties.push(l),this[d].properties[l.name]=l,l.name.match(/pie-(\d+)-background-size/)&&l.value&&(this._private.hasPie=!0),l.mapped&&this[d].mappedProperties.push(l),!this[d].selector&&(this._private.coreStyle[l.name]=l)}return this},ki.append=function(c){return at(c)?c.appendToStyle(this):ze(c)?this.appendFromJson(c):ye(c)&&this.appendFromString(c),this},ir.fromJson=function(c,s){var l=new ir(c);return l.fromJson(s),l},ir.fromString=function(c,s){return new ir(c).fromString(s)},[po,rf,dy,ja,lg,pc,to,cg].forEach(function(c){Zt(ki,c)}),ir.types=ki.types,ir.properties=ki.properties,ir.propertyGroups=ki.propertyGroups,ir.propertyGroupNames=ki.propertyGroupNames,ir.propertyGroupKeys=ki.propertyGroupKeys;var Pd={style:function(s){return s&&this.setStyle(s).update(),this._private.style},setStyle:function(s){var l=this._private;return l.style=at(s)?s.generateStyle(this):ze(s)?ir.fromJson(this,s):ye(s)?ir.fromString(this,s):ir(this),l.style},updateStyle:function(){this.mutableElements().updateStyle()}},Ii={autolock:function(s){return void 0===s?this._private.autolock:(this._private.autolock=!!s,this)},autoungrabify:function(s){return void 0===s?this._private.autoungrabify:(this._private.autoungrabify=!!s,this)},autounselectify:function(s){return void 0===s?this._private.autounselectify:(this._private.autounselectify=!!s,this)},selectionType:function(s){var l=this._private;return null==l.selectionType&&(l.selectionType="single"),void 0===s?l.selectionType:(("additive"===s||"single"===s)&&(l.selectionType=s),this)},panningEnabled:function(s){return void 0===s?this._private.panningEnabled:(this._private.panningEnabled=!!s,this)},userPanningEnabled:function(s){return void 0===s?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!s,this)},zoomingEnabled:function(s){return void 0===s?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!s,this)},userZoomingEnabled:function(s){return void 0===s?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!s,this)},boxSelectionEnabled:function(s){return void 0===s?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!s,this)},pan:function(){var d,f,p,g,y,s=arguments,l=this._private.pan;switch(s.length){case 0:return l;case 1:if(ye(s[0]))return l[d=s[0]];if(ke(s[0])){if(!this._private.panningEnabled)return this;y=(p=s[0]).y,pe(g=p.x)&&(l.x=g),pe(y)&&(l.y=y),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;f=s[1],("x"===(d=s[0])||"y"===d)&&pe(f)&&(l[d]=f),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function(s,l){var p,g,y,w,b,d=arguments,f=this._private.pan;if(!this._private.panningEnabled)return this;switch(d.length){case 1:ke(s)&&(b=(y=d[0]).y,pe(w=y.x)&&(f.x+=w),pe(b)&&(f.y+=b),this.emit("pan viewport"));break;case 2:g=l,("x"===(p=s)||"y"===p)&&pe(g)&&(f[p]+=g),this.emit("pan viewport")}return this.notify("viewport"),this},fit:function(s,l){var d=this.getFitViewport(s,l);if(d){var f=this._private;f.zoom=d.zoom,f.pan=d.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(s,l){var d;if((pe(s)&&void 0===l&&(l=s,s=void 0),this._private.panningEnabled&&this._private.zoomingEnabled)&&(ye(s)?s=this.$(s):!function(s){return ke(s)&&pe(s.x1)&&pe(s.x2)&&pe(s.y1)&&pe(s.y2)}(s)?Ie(s)||(s=this.mutableElements()):((d={x1:s.x1,y1:s.y1,x2:s.x2,y2:s.y2}).w=d.x2-d.x1,d.h=d.y2-d.y1),!Ie(s)||!s.empty())){d=d||s.boundingBox();var w,g=this.width(),y=this.height();if(l=pe(l)?l:0,!isNaN(g)&&!isNaN(y)&&g>0&&y>0&&!isNaN(d.w)&&!isNaN(d.h)&&d.w>0&&d.h>0)return{zoom:w=(w=(w=Math.min((g-2*l)/d.w,(y-2*l)/d.h))>this._private.maxZoom?this._private.maxZoom:w)<this._private.minZoom?this._private.minZoom:w,pan:{x:(g-w*(d.x1+d.x2))/2,y:(y-w*(d.y1+d.y2))/2}}}},zoomRange:function(s,l){var d=this._private;if(null==l){var f=s;s=f.min,l=f.max}return pe(s)&&pe(l)&&s<=l?(d.minZoom=s,d.maxZoom=l):pe(s)&&void 0===l&&s<=d.maxZoom?d.minZoom=s:pe(l)&&void 0===s&&l>=d.minZoom&&(d.maxZoom=l),this},minZoom:function(s){return void 0===s?this._private.minZoom:this.zoomRange({min:s})},maxZoom:function(s){return void 0===s?this._private.maxZoom:this.zoomRange({max:s})},getZoomedViewport:function(s){var p,g,l=this._private,d=l.pan,f=l.zoom,y=!1;return l.zoomingEnabled||(y=!0),pe(s)?g=s:ke(s)&&(g=s.level,null!=s.position?p=Wn(s.position,f,d):null!=s.renderedPosition&&(p=s.renderedPosition),null!=p&&!l.panningEnabled&&(y=!0)),g=(g=g>l.maxZoom?l.maxZoom:g)<l.minZoom?l.minZoom:g,!y&&pe(g)&&g!==f&&(null==p||pe(p.x)&&pe(p.y))?null!=p?{zoomed:!0,panned:!0,zoom:g,pan:{x:-g/f*(p.x-d.x)+p.x,y:-g/f*(p.y-d.y)+p.y}}:{zoomed:!0,panned:!1,zoom:g,pan:d}:null},zoom:function(s){if(void 0===s)return this._private.zoom;var l=this.getZoomedViewport(s),d=this._private;return null!=l&&l.zoomed?(d.zoom=l.zoom,l.panned&&(d.pan.x=l.pan.x,d.pan.y=l.pan.y),this.emit("zoom"+(l.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this},viewport:function(s){var l=this._private,d=!0,f=!0,p=[],g=!1,y=!1;if(!s)return this;if(pe(s.zoom)||(d=!1),ke(s.pan)||(f=!1),!d&&!f)return this;if(d){var w=s.zoom;w<l.minZoom||w>l.maxZoom||!l.zoomingEnabled?g=!0:(l.zoom=w,p.push("zoom"))}if(f&&(!g||!s.cancelOnFailedZoom)&&l.panningEnabled){var b=s.pan;pe(b.x)&&(l.pan.x=b.x,y=!1),pe(b.y)&&(l.pan.y=b.y,y=!1),y||p.push("pan")}return p.length>0&&(p.push("viewport"),this.emit(p.join(" ")),this.notify("viewport")),this},center:function(s){var l=this.getCenterPan(s);return l&&(this._private.pan=l,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(s,l){if(this._private.panningEnabled){if(ye(s)){var d=s;s=this.mutableElements().filter(d)}else Ie(s)||(s=this.mutableElements());if(0!==s.length){var f=s.boundingBox(),p=this.width(),g=this.height();return{x:(p-(l=void 0===l?this._private.zoom:l)*(f.x1+f.x2))/2,y:(g-l*(f.y1+f.y2))/2}}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var d,f,s=this._private,l=s.container;return s.sizeCache=s.sizeCache||(l?(d=V.getComputedStyle(l),{width:l.clientWidth-(f=function(g){return parseFloat(d.getPropertyValue(g))})("padding-left")-f("padding-right"),height:l.clientHeight-f("padding-top")-f("padding-bottom")}):{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var s=this._private.pan,l=this._private.zoom,d=this.renderedExtent(),f={x1:(d.x1-s.x)/l,x2:(d.x2-s.x)/l,y1:(d.y1-s.y)/l,y2:(d.y2-s.y)/l};return f.w=f.x2-f.x1,f.h=f.y2-f.y1,f},renderedExtent:function(){var s=this.width(),l=this.height();return{x1:0,y1:0,x2:s,y2:l,w:s,h:l}},multiClickDebounceTime:function(s){return s?(this._private.multiClickDebounceTime=s,this):this._private.multiClickDebounceTime}};Ii.centre=Ii.center,Ii.autolockNodes=Ii.autolock,Ii.autoungrabifyNodes=Ii.autoungrabify;var zs={data:Dr.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:Dr.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:Dr.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Dr.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};zs.attr=zs.data,zs.removeAttr=zs.removeData;var hu=function(s){var l=this,d=(s=Zt({},s)).container;d&&!We(d)&&We(d[0])&&(d=d[0]);var f=d?d._cyreg:null;(f=f||{})&&f.cy&&(f.cy.destroy(),f={});var p=f.readies=f.readies||[];d&&(d._cyreg=f),f.cy=l;var g=void 0!==V&&void 0!==d&&!s.headless,y=s;y.layout=Zt({name:g?"grid":"null"},y.layout),y.renderer=Zt({name:g?"canvas":"null"},y.renderer);var w=function(R,H,W){return void 0!==H?H:void 0!==W?W:R},b=this._private={container:d,ready:!1,options:y,elements:new Ti(this),listeners:[],aniEles:new Ti(this),data:y.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:w(!0,y.zoomingEnabled),userZoomingEnabled:w(!0,y.userZoomingEnabled),panningEnabled:w(!0,y.panningEnabled),userPanningEnabled:w(!0,y.userPanningEnabled),boxSelectionEnabled:w(!0,y.boxSelectionEnabled),autolock:w(!1,y.autolock,y.autolockNodes),autoungrabify:w(!1,y.autoungrabify,y.autoungrabifyNodes),autounselectify:w(!1,y.autounselectify),styleEnabled:void 0===y.styleEnabled?g:y.styleEnabled,zoom:pe(y.zoom)?y.zoom:1,pan:{x:ke(y.pan)&&pe(y.pan.x)?y.pan.x:0,y:ke(y.pan)&&pe(y.pan.y)?y.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:w(250,y.multiClickDebounceTime)};this.createEmitter(),this.selectionType(y.selectionType),this.zoomRange({min:y.minZoom,max:y.maxZoom}),b.styleEnabled&&l.setStyle([]);var E=Zt({},y,y.renderer);l.initRenderer(E),function(R,H){if(R.some(ht))return bd.all(R).then(H);H(R)}([y.style,y.elements],function(O){var R=O[0],H=O[1];b.styleEnabled&&l.style().append(R),function(R,H,W){l.notifications(!1);var X=l.mutableElements();X.length>0&&X.remove(),null!=R&&(ke(R)||ze(R))&&l.add(R),l.one("layoutready",function(re){l.notifications(!0),l.emit(re),l.one("load",H),l.emitAndNotify("load")}).one("layoutstop",function(){l.one("done",W),l.emit("done")});var ne=Zt({},l._private.options.layout);ne.eles=l.elements(),l.layout(ne).run()}(H,function(){l.startAnimationLoop(),b.ready=!0,qe(y.ready)&&l.on("ready",y.ready);for(var W=0;W<p.length;W++)l.on("ready",p[W]);f&&(f.readies=[]),l.emit("ready")},y.done)})},gc=hu.prototype;Zt(gc,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(s){return this.isReady()?this.emitter().emit("ready",[],s):this.on("ready",s),this},destroy:function(){var s=this;if(!s.destroyed())return s.stopAnimationLoop(),s.destroyRenderer(),this.emit("destroy"),s._private.destroyed=!0,s},hasElementWithId:function(s){return this._private.elements.hasElementWithId(s)},getElementById:function(s){return this._private.elements.getElementById(s)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(s){return this._private.elements.merge(s),this},removeFromPool:function(s){return this._private.elements.unmerge(s),this},container:function(){return this._private.container||null},mount:function(s){if(null!=s){var l=this,d=l._private,f=d.options;return!We(s)&&We(s[0])&&(s=s[0]),l.stopAnimationLoop(),l.destroyRenderer(),d.container=s,d.styleEnabled=!0,l.invalidateSize(),l.initRenderer(Zt({},f,f.renderer,{name:"null"===f.renderer.name?"canvas":f.renderer.name})),l.startAnimationLoop(),l.style(f.style),l.emit("mount"),l}},unmount:function(){var s=this;return s.stopAnimationLoop(),s.destroyRenderer(),s.initRenderer({name:"null"}),s.emit("unmount"),s},options:function(){return Oo(this._private.options)},json:function(s){var l=this,d=l._private,f=l.mutableElements();if(ke(s)){if(l.startBatch(),s.elements){var g={},y=function(se,De){for(var Ce=[],le=[],_e=0;_e<se.length;_e++){var he=se[_e];if(he.data.id){var Te=""+he.data.id,Ae=l.getElementById(Te);g[Te]=!0,0!==Ae.length?le.push({ele:Ae,json:he}):(De&&(he.group=De),Ce.push(he))}else ur("cy.json() cannot handle elements without an ID attribute")}l.add(Ce);for(var ge=0;ge<le.length;ge++){var Fe=le[ge];Fe.ele.json(Fe.json)}};if(ze(s.elements))y(s.elements);else for(var w=["nodes","edges"],b=0;b<w.length;b++){var _=w[b],E=s.elements[_];ze(E)&&y(E,_)}var S=l.collection();f.filter(function(re){return!g[re.id()]}).forEach(function(re){re.isParent()?S.merge(re):re.remove()}),S.forEach(function(re){return re.children().move({parent:null})}),S.forEach(function(re){return(se=re,l.getElementById(se.id())).remove();var se})}s.style&&l.style(s.style),null!=s.zoom&&s.zoom!==d.zoom&&l.zoom(s.zoom),s.pan&&(s.pan.x!==d.pan.x||s.pan.y!==d.pan.y)&&l.pan(s.pan),s.data&&l.data(s.data);for(var O=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],R=0;R<O.length;R++){var H=O[R];null!=s[H]&&l[H](s[H])}return l.endBatch(),this}var X={};s?X.elements=this.elements().map(function(re){return re.json()}):(X.elements={},f.forEach(function(re){var se=re.group();X.elements[se]||(X.elements[se]=[]),X.elements[se].push(re.json())})),this._private.styleEnabled&&(X.style=l.style().json()),X.data=Oo(l.data());var ne=d.options;return X.zoomingEnabled=d.zoomingEnabled,X.userZoomingEnabled=d.userZoomingEnabled,X.zoom=d.zoom,X.minZoom=d.minZoom,X.maxZoom=d.maxZoom,X.panningEnabled=d.panningEnabled,X.userPanningEnabled=d.userPanningEnabled,X.pan=Oo(d.pan),X.boxSelectionEnabled=d.boxSelectionEnabled,X.renderer=Oo(ne.renderer),X.hideEdgesOnViewport=ne.hideEdgesOnViewport,X.textureOnViewport=ne.textureOnViewport,X.wheelSensitivity=ne.wheelSensitivity,X.motionBlur=ne.motionBlur,X.multiClickDebounceTime=ne.multiClickDebounceTime,X}}),gc.$id=gc.getElementById,[L_,Rd,fc,tf,uu,du,ag,Gt,Pd,Ii,zs].forEach(function(c){Zt(gc,c)});var Nd={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,maximal:!1,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(s,l){return!0},ready:void 0,stop:void 0,transform:function(s,l){return l}},fu=function(s){return s.scratch("breadthfirst")},V_=function(s,l){return s.scratch("breadthfirst",l)};function hy(c){this.options=Zt({},Nd,c)}hy.prototype.run=function(){var b,c=this.options,s=c,l=c.cy,d=s.eles,f=d.nodes().filter(function(Ht){return!Ht.isParent()}),p=d,g=s.directed,y=s.maximal||s.maximalAdjustments>0,w=Lr(s.boundingBox?s.boundingBox:{x1:0,y1:0,w:l.width(),h:l.height()});if(Ie(s.roots))b=s.roots;else if(ze(s.roots)){for(var _=[],E=0;E<s.roots.length;E++){var O=l.getElementById(s.roots[E]);_.push(O)}b=l.collection(_)}else if(ye(s.roots))b=l.$(s.roots);else if(g)b=f.roots();else{var R=d.components();b=l.collection();for(var H=function(Ft){var pn=R[Ft],en=pn.maxDegree(!1),jt=pn.filter(function(cn){return cn.degree(!1)===en});b=b.add(jt)},W=0;W<R.length;W++)H(W)}var X=[],ne={},re=function(Ft,pn){null==X[pn]&&(X[pn]=[]);var en=X[pn].length;X[pn].push(Ft),V_(Ft,{index:en,depth:pn})};p.bfs({roots:b,directed:s.directed,visit:function(Ft,pn,en,jt,cn){var Hn=Ft[0],An=Hn.id();re(Hn,cn),ne[An]=!0}});for(var De=[],Ce=0;Ce<f.length;Ce++){var le=f[Ce];ne[le.id()]||De.push(le)}var _e=function(Ft){for(var pn=X[Ft],en=0;en<pn.length;en++){var jt=pn[en];null!=jt?V_(jt,{depth:Ft,index:en}):(pn.splice(en,1),en--)}},he=function(){for(var Ft=0;Ft<X.length;Ft++)_e(Ft)},Te=function(Ft,pn){for(var en=fu(Ft),jt=Ft.incomers().filter(function(fe){return fe.isNode()&&d.has(fe)}),cn=-1,Hn=Ft.id(),An=0;An<jt.length;An++){var Rt=fu(jt[An]);cn=Math.max(cn,Rt.depth)}return en.depth<=cn&&(pn[Hn]?null:(function(Ft,pn){var en=fu(Ft);X[en.depth][en.index]=null,re(Ft,pn)}(Ft,cn+1),pn[Hn]=!0,!0))};if(g&&y){var Ae=[],ge={},Fe=function(Ft){return Ae.push(Ft)};for(f.forEach(function(Ht){return Ae.push(Ht)});Ae.length>0;){var Xe=Ae.shift(),Ve=Te(Xe,ge);if(Ve)Xe.outgoers().filter(function(Ht){return Ht.isNode()&&d.has(Ht)}).forEach(Fe);else if(null===Ve){ur("Detected double maximal shift for node `"+Xe.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}he();var je=0;if(s.avoidOverlap)for(var Qe=0;Qe<f.length;Qe++){var ct=f[Qe].layoutDimensions(s);je=Math.max(je,ct.w,ct.h)}var _t={},Dt=function(Ft){if(_t[Ft.id()])return _t[Ft.id()];for(var pn=fu(Ft).depth,en=Ft.neighborhood(),jt=0,cn=0,Hn=0;Hn<en.length;Hn++){var An=en[Hn];if(!An.isEdge()&&!An.isParent()&&f.has(An)){var mn=fu(An);if(null!=mn){var Rt=mn.index,fe=mn.depth;null!=Rt&&null!=fe&&fe<pn&&(jt+=Rt/X[fe].length,cn++)}}}return jt/=cn=Math.max(1,cn),0===cn&&(jt=0),_t[Ft.id()]=jt,jt},yt=function(Ft,pn){var cn=Dt(Ft)-Dt(pn);return 0===cn?To(Ft.id(),pn.id()):cn};void 0!==s.depthSort&&(yt=s.depthSort);for(var mt=0;mt<X.length;mt++)X[mt].sort(yt),_e(mt);for(var Ze=[],xt=0;xt<De.length;xt++)Ze.push(De[xt]);X.unshift(Ze),he();for(var Mt=0,Lt=0;Lt<X.length;Lt++)Mt=Math.max(X[Lt].length,Mt);var Vt_x=w.x1+w.w/2,Vt_y=w.x1+w.h/2,xn=X.reduce(function(Ht,Ft){return Math.max(Ht,Ft.length)},0);return d.nodes().layoutPositions(this,s,function(Ft){var pn=fu(Ft),en=pn.depth,jt=pn.index,cn=X[en].length,Hn=Math.max(w.w/((s.grid?xn:cn)+1),je),An=Math.max(w.h/(X.length+1),je),mn=Math.min(w.w/2/X.length,w.h/2/X.length);if(mn=Math.max(mn,je),s.circle){var fe=mn*en+mn-(X.length>0&&X[0].length<=3?mn/2:0),st=2*Math.PI/X[en].length*jt;return 0===en&&1===X[0].length&&(fe=1),{x:Vt_x+fe*Math.cos(st),y:Vt_y+fe*Math.sin(st)}}return{x:Vt_x+(jt+1-(cn+1)/2)*Hn,y:(en+1)*An}}),this};var nM={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(s,l){return!0},ready:void 0,stop:void 0,transform:function(s,l){return l}};function Fo(c){this.options=Zt({},nM,c)}Fo.prototype.run=function(){var c=this.options,s=c,l=c.cy,d=s.eles,f=void 0!==s.counterclockwise?!s.counterclockwise:s.clockwise,p=d.nodes().not(":parent");s.sort&&(p=p.sort(s.sort));for(var _,g=Lr(s.boundingBox?s.boundingBox:{x1:0,y1:0,w:l.width(),h:l.height()}),y={x:g.x1+g.w/2,y:g.y1+g.h/2},b=(void 0===s.sweep?2*Math.PI-2*Math.PI/p.length:s.sweep)/Math.max(1,p.length-1),E=0,S=0;S<p.length;S++){var R=p[S].layoutDimensions(s);E=Math.max(E,R.w,R.h)}if(_=pe(s.radius)?s.radius:p.length<=1?0:Math.min(g.h,g.w)/2-E,p.length>1&&s.avoidOverlap){E*=1.75;var X=Math.cos(b)-Math.cos(0),ne=Math.sin(b)-Math.sin(0),re=Math.sqrt(E*E/(X*X+ne*ne));_=Math.max(re,_)}return d.nodes().layoutPositions(this,s,function(Ce,le){var _e=s.startAngle+le*b*(f?1:-1),he=_*Math.cos(_e),Te=_*Math.sin(_e);return{x:y.x+he,y:y.y+Te}}),this};var ug={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(s){return s.degree()},levelWidth:function(s){return s.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(s,l){return!0},ready:void 0,stop:void 0,transform:function(s,l){return l}};function mc(c){this.options=Zt({},ug,c)}mc.prototype.run=function(){for(var c=this.options,s=c,l=void 0!==s.counterclockwise?!s.counterclockwise:s.clockwise,d=c.cy,f=s.eles,p=f.nodes().not(":parent"),g=Lr(s.boundingBox?s.boundingBox:{x1:0,y1:0,w:d.width(),h:d.height()}),y={x:g.x1+g.w/2,y:g.y1+g.h/2},w=[],b=0,_=0;_<p.length;_++){var S,E=p[_];S=s.concentric(E),w.push({value:S,node:E}),E._private.scratch.concentric=S}p.updateStyle();for(var O=0;O<p.length;O++){var H=p[O].layoutDimensions(s);b=Math.max(b,H.w,H.h)}w.sort(function(Ht,Ft){return Ft.value-Ht.value});for(var W=s.levelWidth(p),X=[[]],ne=X[0],re=0;re<w.length;re++){var se=w[re];ne.length>0&&Math.abs(ne[0].value-se.value)>=W&&X.push(ne=[]),ne.push(se)}var Ce=b+s.minNodeSpacing;if(!s.avoidOverlap){var le=X.length>0&&X[0].length>1,_e=Math.min(g.w,g.h)/2-Ce;Ce=Math.min(Ce,_e/(X.length+le?1:0))}for(var Te=0,Ae=0;Ae<X.length;Ae++){var ge=X[Ae],Fe=void 0===s.sweep?2*Math.PI-2*Math.PI/ge.length:s.sweep,Se=ge.dTheta=Fe/Math.max(1,ge.length-1);if(ge.length>1&&s.avoidOverlap){var Xe=Math.cos(Se)-Math.cos(0),Ve=Math.sin(Se)-Math.sin(0),je=Math.sqrt(Ce*Ce/(Xe*Xe+Ve*Ve));Te=Math.max(je,Te)}ge.r=Te,Te+=Ce}if(s.equidistant){for(var Qe=0,it=0,ct=0;ct<X.length;ct++)Qe=Math.max(Qe,X[ct].r-it);it=0;for(var _t=0;_t<X.length;_t++){var Dt=X[_t];0===_t&&(it=Dt.r),Dt.r=it,it+=Qe}}for(var yt={},mt=0;mt<X.length;mt++)for(var Ze=X[mt],xt=Ze.dTheta,Mt=Ze.r,Lt=0;Lt<Ze.length;Lt++){var Vt=Ze[Lt],xn=s.startAngle+(l?1:-1)*xt*Lt,kn={x:y.x+Mt*Math.cos(xn),y:y.y+Mt*Math.sin(xn)};yt[Vt.node.id()]=kn}return f.nodes().layoutPositions(this,s,function(Ht){var Ft=Ht.id();return yt[Ft]}),this};var fy,py={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(s,l){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(s){return 2048},nodeOverlap:4,idealEdgeLength:function(s){return 32},edgeElasticity:function(s){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function sf(c){this.options=Zt({},py,c),this.options.layout=this}sf.prototype.run=function(){var c=this.options,s=c.cy,l=this;l.stopped=!1,(!0===c.animate||!1===c.animate)&&l.emit({type:"layoutstart",layout:l}),fy=!0===c.debug;var d=H_(s,l,c);fy&&(void 0)(d),c.randomize&&G_(d);var f=Si(),p=function(){lf(d,s,c),!0===c.fit&&s.fit(c.padding)},g=function(S){return!(l.stopped||S>=c.numIter||(cf(d,c),d.temperature=d.temperature*c.coolingFactor,d.temperature<c.minTemp))},y=function(){if(!0===c.animate||!1===c.animate)p(),l.one("layoutstop",c.stop),l.emit({type:"layoutstop",layout:l});else{var S=c.eles.nodes(),O=af(d,c,S);S.layoutPositions(l,c,O)}},w=0,b=!0;if(!0===c.animate)!function E(){for(var S=0;b&&S<c.refresh;)b=g(w),w++,S++;b?(Si()-f>=c.animationThreshold&&p(),ll(E)):(gu(d,c),y())}();else{for(;b;)b=g(w),w++;gu(d,c),y()}return this},sf.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},sf.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var H_=function(s,l,d){for(var f=d.eles.edges(),p=d.eles.nodes(),g={isCompound:s.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:p.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:f.size(),temperature:d.initialTemp,clientWidth:s.width(),clientHeight:s.width(),boundingBox:Lr(d.boundingBox?d.boundingBox:{x1:0,y1:0,w:s.width(),h:s.height()})},y=d.eles.components(),w={},b=0;b<y.length;b++)for(var _=y[b],E=0;E<_.length;E++)w[_[E].id()]=b;for(b=0;b<g.nodeSize;b++){var R=(O=p[b]).layoutDimensions(d);(H={}).isLocked=O.locked(),H.id=O.data("id"),H.parentId=O.data("parent"),H.cmptId=w[O.id()],H.children=[],H.positionX=O.position("x"),H.positionY=O.position("y"),H.offsetX=0,H.offsetY=0,H.height=R.w,H.width=R.h,H.maxX=H.positionX+H.width/2,H.minX=H.positionX-H.width/2,H.maxY=H.positionY+H.height/2,H.minY=H.positionY-H.height/2,H.padLeft=parseFloat(O.style("padding")),H.padRight=parseFloat(O.style("padding")),H.padTop=parseFloat(O.style("padding")),H.padBottom=parseFloat(O.style("padding")),H.nodeRepulsion=qe(d.nodeRepulsion)?d.nodeRepulsion(O):d.nodeRepulsion,g.layoutNodes.push(H),g.idToIndex[H.id]=b}var W=[],X=0,ne=-1,re=[];for(b=0;b<g.nodeSize;b++){var O,se=(O=g.layoutNodes[b]).parentId;null!=se?g.layoutNodes[g.idToIndex[se]].children.push(O.id):(W[++ne]=O.id,re.push(O.id))}for(g.graphSet.push(re);X<=ne;){var De=W[X++],le=g.layoutNodes[g.idToIndex[De]].children;if(le.length>0)for(g.graphSet.push(le),b=0;b<le.length;b++)W[++ne]=le[b]}for(b=0;b<g.graphSet.length;b++){var _e=g.graphSet[b];for(E=0;E<_e.length;E++)g.indexToGraph[g.idToIndex[_e[E]]]=b}for(b=0;b<g.edgeSize;b++){var Te=f[b],Ae={};Ae.id=Te.data("id"),Ae.sourceId=Te.data("source"),Ae.targetId=Te.data("target");var ge=qe(d.idealEdgeLength)?d.idealEdgeLength(Te):d.idealEdgeLength,Fe=qe(d.edgeElasticity)?d.edgeElasticity(Te):d.edgeElasticity,Se=g.idToIndex[Ae.sourceId],Xe=g.idToIndex[Ae.targetId];if(g.indexToGraph[Se]!=g.indexToGraph[Xe]){for(var Qe=z_(Ae.sourceId,Ae.targetId,g),it=g.graphSet[Qe],ct=0,H=g.layoutNodes[Se];-1===it.indexOf(H.id);)H=g.layoutNodes[g.idToIndex[H.parentId]],ct++;for(H=g.layoutNodes[Xe];-1===it.indexOf(H.id);)H=g.layoutNodes[g.idToIndex[H.parentId]],ct++;ge*=ct*d.nestingFactor}Ae.idealLength=ge,Ae.elasticity=Fe,g.layoutEdges.push(Ae)}return g},z_=function(s,l,d){var f=j_(s,l,0,d);return 2>f.count?0:f.graph},j_=function c(s,l,d,f){var p=f.graphSet[d];if(-1<p.indexOf(s)&&-1<p.indexOf(l))return{count:2,graph:d};for(var g=0,y=0;y<p.length;y++){var _=f.layoutNodes[f.idToIndex[p[y]]].children;if(0!==_.length){var S=c(s,l,f.indexToGraph[f.idToIndex[_[0]]],f);if(0!==S.count){if(1!==S.count)return S;if(2==++g)break}}}return{count:g,graph:d}},G_=function(s,l){for(var d=s.clientWidth,f=s.clientHeight,p=0;p<s.nodeSize;p++){var g=s.layoutNodes[p];0===g.children.length&&!g.isLocked&&(g.positionX=Math.random()*d,g.positionY=Math.random()*f)}},af=function(s,l,d){var f=s.boundingBox,p={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return l.boundingBox&&(d.forEach(function(g){var y=s.layoutNodes[s.idToIndex[g.data("id")]];p.x1=Math.min(p.x1,y.positionX),p.x2=Math.max(p.x2,y.positionX),p.y1=Math.min(p.y1,y.positionY),p.y2=Math.max(p.y2,y.positionY)}),p.w=p.x2-p.x1,p.h=p.y2-p.y1),function(g,y){var w=s.layoutNodes[s.idToIndex[g.data("id")]];return l.boundingBox?{x:f.x1+(w.positionX-p.x1)/p.w*f.w,y:f.y1+(w.positionY-p.y1)/p.h*f.h}:{x:w.positionX,y:w.positionY}}},lf=function(s,l,d){var f=d.layout,p=d.eles.nodes(),g=af(s,d,p);p.positions(g),!0!==s.ready&&(s.ready=!0,f.one("layoutready",d.ready),f.emit({type:"layoutready",layout:this}))},cf=function(s,l,d){Ml(s,l),Bd(s),uf(s,l),gy(s),W_(s)},Ml=function(s,l){for(var d=0;d<s.graphSet.length;d++)for(var f=s.graphSet[d],p=f.length,g=0;g<p;g++)for(var y=s.layoutNodes[s.idToIndex[f[g]]],w=g+1;w<p;w++)Ld(y,s.layoutNodes[s.idToIndex[f[w]]],s,l)},dg=function(s){return-s+2*s*Math.random()},Ld=function(s,l,d,f){if(s.cmptId===l.cmptId||d.isCompound){var y=l.positionX-s.positionX,w=l.positionY-s.positionY;0===y&&0===w&&(y=dg(1),w=dg(1));var _=$_(s,l,y,w);if(_>0)var O=(E=f.nodeOverlap*_)*y/(S=Math.sqrt(y*y+w*w)),R=E*w/S;else{var E,H=Fd(s,y,w),W=Fd(l,-1*y,-1*w),X=W.x-H.x,ne=W.y-H.y,re=X*X+ne*ne,S=Math.sqrt(re);O=(E=(s.nodeRepulsion+l.nodeRepulsion)/re)*X/S,R=E*ne/S}s.isLocked||(s.offsetX-=O,s.offsetY-=R),l.isLocked||(l.offsetX+=O,l.offsetY+=R)}},$_=function(s,l,d,f){if(d>0)var p=s.maxX-l.minX;else p=l.maxX-s.minX;if(f>0)var g=s.maxY-l.minY;else g=l.maxY-s.minY;return p>=0&&g>=0?Math.sqrt(p*p+g*g):0},Fd=function(s,l,d){var f=s.positionX,p=s.positionY,g=s.height||1,y=s.width||1,w=d/l,b=g/y,_={};return 0===l&&0<d||0===l&&0>d?(_.x=f,_.y=p+g/2,_):0<l&&-1*b<=w&&w<=b?(_.x=f+y/2,_.y=p+y*d/2/l,_):0>l&&-1*b<=w&&w<=b?(_.x=f-y/2,_.y=p-y*d/2/l,_):0<d&&(w<=-1*b||w>=b)?(_.x=f+g*l/2/d,_.y=p+g/2,_):(0>d&&(w<=-1*b||w>=b)&&(_.x=f-g*l/2/d,_.y=p-g/2),_)},Bd=function(s,l){for(var d=0;d<s.edgeSize;d++){var f=s.layoutEdges[d],g=s.layoutNodes[s.idToIndex[f.sourceId]],w=s.layoutNodes[s.idToIndex[f.targetId]],b=w.positionX-g.positionX,_=w.positionY-g.positionY;if(0!==b||0!==_){var E=Fd(g,b,_),S=Fd(w,-1*b,-1*_),O=S.x-E.x,R=S.y-E.y,H=Math.sqrt(O*O+R*R),W=Math.pow(f.idealLength-H,2)/f.elasticity;if(0!==H)var X=W*O/H,ne=W*R/H;else X=0,ne=0;g.isLocked||(g.offsetX+=X,g.offsetY+=ne),w.isLocked||(w.offsetX-=X,w.offsetY-=ne)}}},uf=function(s,l){if(0!==l.gravity)for(var f=0;f<s.graphSet.length;f++){var p=s.graphSet[f],g=p.length;if(0===f)var y=s.clientHeight/2,w=s.clientWidth/2;else{var _=s.layoutNodes[s.idToIndex[s.layoutNodes[s.idToIndex[p[0]]].parentId]];y=_.positionX,w=_.positionY}for(var E=0;E<g;E++){var S=s.layoutNodes[s.idToIndex[p[E]]];if(!S.isLocked){var O=y-S.positionX,R=w-S.positionY,H=Math.sqrt(O*O+R*R);if(H>1){var X=l.gravity*R/H;S.offsetX+=l.gravity*O/H,S.offsetY+=X}}}}},gy=function(s,l){var d=[],f=0,p=-1;for(d.push.apply(d,s.graphSet[0]),p+=s.graphSet[0].length;f<=p;){var g=d[f++],w=s.layoutNodes[s.idToIndex[g]],b=w.children;if(0<b.length&&!w.isLocked){for(var _=w.offsetX,E=w.offsetY,S=0;S<b.length;S++){var O=s.layoutNodes[s.idToIndex[b[S]]];O.offsetX+=_,O.offsetY+=E,d[++p]=b[S]}w.offsetX=0,w.offsetY=0}}},W_=function(s,l){for(var d=0;d<s.nodeSize;d++)0<(f=s.layoutNodes[d]).children.length&&(f.maxX=void 0,f.minX=void 0,f.maxY=void 0,f.minY=void 0);for(d=0;d<s.nodeSize;d++)if(!(0<(f=s.layoutNodes[d]).children.length||f.isLocked)){var p=q_(f.offsetX,f.offsetY,s.temperature);f.positionX+=p.x,f.positionY+=p.y,f.offsetX=0,f.offsetY=0,f.minX=f.positionX-f.width,f.maxX=f.positionX+f.width,f.minY=f.positionY-f.height,f.maxY=f.positionY+f.height,pu(f,s)}for(d=0;d<s.nodeSize;d++){var f;0<(f=s.layoutNodes[d]).children.length&&!f.isLocked&&(f.positionX=(f.maxX+f.minX)/2,f.positionY=(f.maxY+f.minY)/2,f.width=f.maxX-f.minX,f.height=f.maxY-f.minY)}},q_=function(s,l,d){var f=Math.sqrt(s*s+l*l);if(f>d)var p={x:d*s/f,y:d*l/f};else p={x:s,y:l};return p},pu=function c(s,l){var d=s.parentId;if(null!=d){var f=l.layoutNodes[l.idToIndex[d]],p=!1;if((null==f.maxX||s.maxX+f.padRight>f.maxX)&&(f.maxX=s.maxX+f.padRight,p=!0),(null==f.minX||s.minX-f.padLeft<f.minX)&&(f.minX=s.minX-f.padLeft,p=!0),(null==f.maxY||s.maxY+f.padBottom>f.maxY)&&(f.maxY=s.maxY+f.padBottom,p=!0),(null==f.minY||s.minY-f.padTop<f.minY)&&(f.minY=s.minY-f.padTop,p=!0),p)return c(f,l)}},gu=function(s,l){for(var d=s.layoutNodes,f=[],p=0;p<d.length;p++){var g=d[p],y=g.cmptId;(f[y]=f[y]||[]).push(g)}var b=0;for(p=0;p<f.length;p++)if(_=f[p]){_.x1=1/0,_.x2=-1/0,_.y1=1/0,_.y2=-1/0;for(var E=0;E<_.length;E++){var S=_[E];_.x1=Math.min(_.x1,S.positionX-S.width/2),_.x2=Math.max(_.x2,S.positionX+S.width/2),_.y1=Math.min(_.y1,S.positionY-S.height/2),_.y2=Math.max(_.y2,S.positionY+S.height/2)}_.w=_.x2-_.x1,_.h=_.y2-_.y1,b+=_.w*_.h}f.sort(function(ne,re){return re.w*re.h-ne.w*ne.h});var O=0,R=0,H=0,W=0,X=Math.sqrt(b)*s.clientWidth/s.clientHeight;for(p=0;p<f.length;p++){var _;if(_=f[p]){for(E=0;E<_.length;E++)(S=_[E]).isLocked||(S.positionX+=O-_.x1,S.positionY+=R-_.y1);O+=_.w+l.componentSpacing,H+=_.w+l.componentSpacing,W=Math.max(W,_.h),H>X&&(R+=W+l.componentSpacing,O=0,H=0,W=0)}}},Y_={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(s){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(s,l){return!0},ready:void 0,stop:void 0,transform:function(s,l){return l}};function X_(c){this.options=Zt({},Y_,c)}X_.prototype.run=function(){var c=this.options,s=c,l=c.cy,d=s.eles,f=d.nodes().not(":parent");s.sort&&(f=f.sort(s.sort));var p=Lr(s.boundingBox?s.boundingBox:{x1:0,y1:0,w:l.width(),h:l.height()});if(0===p.h||0===p.w)d.nodes().layoutPositions(this,s,function(_t){return{x:p.x1,y:p.y1}});else{var g=f.size(),y=Math.sqrt(g*p.h/p.w),w=Math.round(y),b=Math.round(p.w/p.h*y),_=function(Dt){if(null==Dt)return Math.min(w,b);Math.min(w,b)==w?w=Dt:b=Dt},E=function(Dt){if(null==Dt)return Math.max(w,b);Math.max(w,b)==w?w=Dt:b=Dt},S=s.rows,O=null!=s.cols?s.cols:s.columns;if(null!=S&&null!=O)w=S,b=O;else if(null!=S&&null==O)w=S,b=Math.ceil(g/w);else if(null==S&&null!=O)b=O,w=Math.ceil(g/b);else if(b*w>g){var R=_(),H=E();(R-1)*H>=g?_(R-1):(H-1)*R>=g&&E(H-1)}else for(;b*w<g;){var W=_(),X=E();(X+1)*W>=g?E(X+1):_(W+1)}var ne=p.w/b,re=p.h/w;if(s.condense&&(ne=0,re=0),s.avoidOverlap)for(var se=0;se<f.length;se++){var De=f[se],Ce=De._private.position;(null==Ce.x||null==Ce.y)&&(Ce.x=0,Ce.y=0);var le=De.layoutDimensions(s),_e=s.avoidOverlapPadding,Te=le.h+_e;ne=Math.max(ne,le.w+_e),re=Math.max(re,Te)}for(var Ae={},ge=function(Dt,yt){return!!Ae["c-"+Dt+"-"+yt]},Fe=function(Dt,yt){Ae["c-"+Dt+"-"+yt]=!0},Se=0,Xe=0,Ve=function(){++Xe>=b&&(Xe=0,Se++)},je={},Qe=0;Qe<f.length;Qe++){var it=f[Qe],ct=s.position(it);if(ct&&(void 0!==ct.row||void 0!==ct.col)){var rt={row:ct.row,col:ct.col};if(void 0===rt.col)for(rt.col=0;ge(rt.row,rt.col);)rt.col++;else if(void 0===rt.row)for(rt.row=0;ge(rt.row,rt.col);)rt.row++;je[it.id()]=rt,Fe(rt.row,rt.col)}}f.layoutPositions(this,s,function(Dt,yt){var mt,Ze;if(Dt.locked()||Dt.isParent())return!1;var xt=je[Dt.id()];if(xt)mt=xt.col*ne+ne/2+p.x1,Ze=xt.row*re+re/2+p.y1;else{for(;ge(Se,Xe);)Ve();mt=Xe*ne+ne/2+p.x1,Ze=Se*re+re/2+p.y1,Fe(Se,Xe),Ve()}return{x:mt,y:Ze}})}return this};var my={ready:function(){},stop:function(){}};function hg(c){this.options=Zt({},my,c)}hg.prototype.run=function(){var c=this.options,s=c.eles,l=this;return l.emit("layoutstart"),s.nodes().positions(function(){return{x:0,y:0}}),l.one("layoutready",c.ready),l.emit("layoutready"),l.one("layoutstop",c.stop),l.emit("layoutstop"),this},hg.prototype.stop=function(){return this};var rM={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(s,l){return!0},ready:void 0,stop:void 0,transform:function(s,l){return l}};function vy(c){this.options=Zt({},rM,c)}vy.prototype.run=function(){var c=this.options,l=c.eles.nodes(),d=qe(c.positions);return l.layoutPositions(this,c,function(p,g){var y=function f(p){return null==c.positions?function(s){return{x:s.x,y:s.y}}(p.position()):d?c.positions(p):c.positions[p._private.data.id]??null}(p);return!p.locked()&&null!=y&&y}),this};var K_={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(s,l){return!0},ready:void 0,stop:void 0,transform:function(s,l){return l}};function yy(c){this.options=Zt({},K_,c)}yy.prototype.run=function(){var c=this.options,s=c.cy,l=c.eles,d=Lr(c.boundingBox?c.boundingBox:{x1:0,y1:0,w:s.width(),h:s.height()});return l.nodes().layoutPositions(this,c,function(g,y){return{x:d.x1+Math.round(Math.random()*d.w),y:d.y1+Math.round(Math.random()*d.h)}}),this};var df=[{name:"breadthfirst",impl:hy},{name:"circle",impl:Fo},{name:"concentric",impl:mc},{name:"cose",impl:sf},{name:"grid",impl:X_},{name:"null",impl:hg},{name:"preset",impl:vy},{name:"random",impl:yy}];function fg(c){this.options=c,this.notifications=0}var by=function(){},pg=function(){throw new Error("A headless instance can not render images")};fg.prototype={recalculateRenderedStyle:by,notify:function(){this.notifications++},init:by,isHeadless:function(){return!0},png:pg,jpg:pg};var wy={arrowShapeWidth:.3,registerArrowShapes:function(){var c=this.arrowShapes={},s=this,l=function(b,_,E,S,O,R,H){return O.x-E/2-H<=b&&b<=O.x+E/2+H&&O.y-E/2-H<=_&&_<=O.y+E/2+H},d=function(b,_,E,S,O){var R=b*Math.cos(S)-_*Math.sin(S),H=b*Math.sin(S)+_*Math.cos(S);return{x:R*E+O.x,y:H*E+O.y}},f=function(b,_,E,S){for(var O=[],R=0;R<b.length;R+=2)O.push(d(b[R],b[R+1],_,E,S));return O},p=function(b){for(var _=[],E=0;E<b.length;E++){var S=b[E];_.push(S.x,S.y)}return _},g=function(b){return b.pstyle("width").pfValue*b.pstyle("arrow-scale").pfValue*2},y=function(b,_){ye(_)&&(_=c[_]),c[b]=Zt({name:b,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(S,O,R,H,W,X){var ne=p(f(this.points,R+2*X,H,W));return Mr(S,O,ne)},roughCollide:l,draw:function(S,O,R,H){var W=f(this.points,O,R,H);s.arrowShapeImpl("polygon")(S,W)},spacing:function(S){return 0},gap:g},_)};y("none",{collide:Gc,roughCollide:Gc,draw:$c,spacing:Ta,gap:Ta}),y("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),y("arrow","triangle"),y("triangle-backcurve",{points:c.triangle.points,controlPoint:[0,-.15],roughCollide:l,draw:function(b,_,E,S,O){var R=f(this.points,_,E,S),H=this.controlPoint,W=d(H[0],H[1],_,E,S);s.arrowShapeImpl(this.name)(b,R,W)},gap:function(b){return.8*g(b)}}),y("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(b,_,E,S,O,R,H){var W=p(f(this.points,E+2*H,S,O)),X=p(f(this.pointsTee,E+2*H,S,O));return Mr(b,_,W)||Mr(b,_,X)},draw:function(b,_,E,S,O){var R=f(this.points,_,E,S),H=f(this.pointsTee,_,E,S);s.arrowShapeImpl(this.name)(b,R,H)}}),y("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(b,_,E,S,O,R,H){var W=O,X=Math.pow(W.x-b,2)+Math.pow(W.y-_,2)<=Math.pow((E+2*H)*this.radius,2),ne=p(f(this.points,E+2*H,S,O));return Mr(b,_,ne)||X},draw:function(b,_,E,S,O){var R=f(this.pointsTr,_,E,S);s.arrowShapeImpl(this.name)(b,R,S.x,S.y,this.radius*_)},spacing:function(b){return s.getArrowWidth(b.pstyle("width").pfValue,b.pstyle("arrow-scale").value)*this.radius}}),y("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(b,_){var E=this.baseCrossLinePts.slice(),S=_/b;return E[3]=E[3]-S,E[5]=E[5]-S,E},collide:function(b,_,E,S,O,R,H){var W=p(f(this.points,E+2*H,S,O)),X=p(f(this.crossLinePts(E,R),E+2*H,S,O));return Mr(b,_,W)||Mr(b,_,X)},draw:function(b,_,E,S,O){var R=f(this.points,_,E,S),H=f(this.crossLinePts(_,O),_,E,S);s.arrowShapeImpl(this.name)(b,R,H)}}),y("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(b){return.525*g(b)}}),y("circle",{radius:.15,collide:function(b,_,E,S,O,R,H){var W=O;return Math.pow(W.x-b,2)+Math.pow(W.y-_,2)<=Math.pow((E+2*H)*this.radius,2)},draw:function(b,_,E,S,O){s.arrowShapeImpl(this.name)(b,S.x,S.y,this.radius*_)},spacing:function(b){return s.getArrowWidth(b.pstyle("width").pfValue,b.pstyle("arrow-scale").value)*this.radius}}),y("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(b){return 1},gap:function(b){return 1}}),y("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),y("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(b){return b.pstyle("width").pfValue*b.pstyle("arrow-scale").value}}),y("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(b){return.95*b.pstyle("width").pfValue*b.pstyle("arrow-scale").value}})}},Al={projectIntoViewport:function(c,s){var l=this.cy,d=this.findContainerClientCoords(),f=d[0],p=d[1],g=d[4],y=l.pan(),w=l.zoom();return[((c-f)/g-y.x)/w,((s-p)/g-y.y)/w]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var c=this.container,s=c.getBoundingClientRect(),l=V.getComputedStyle(c),d=function(X){return parseFloat(l.getPropertyValue(X))},f_left=d("padding-left"),f_right=d("padding-right"),f_top=d("padding-top"),f_bottom=d("padding-bottom"),p_left=d("border-left-width"),p_right=d("border-right-width"),p_top=d("border-top-width"),g=(d("border-bottom-width"),c.clientWidth);return this.containerBB=[s.left+f_left+p_left,s.top+f_top+p_top,g-(f_left+f_right),c.clientHeight-(f_top+f_bottom),s.width/(g+(p_left+p_right))]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(c,s,l,d){return this.findNearestElements(c,s,l,d)[0]},findNearestElements:function(c,s,l,d){var R,H,f=this,p=this,g=p.getCachedZSortedEles(),y=[],w=p.cy.zoom(),b=p.cy.hasCompoundNodes(),_=(d?24:8)/w,E=(d?8:2)/w,S=(d?8:2)/w,O=1/0;function W(le,_e){if(le.isNode()){if(H)return;H=le,y.push(le)}if(le.isEdge()&&(null==_e||_e<O))if(R){if(R.pstyle("z-compound-depth").value===le.pstyle("z-compound-depth").value&&R.pstyle("z-compound-depth").value===le.pstyle("z-compound-depth").value)for(var he=0;he<y.length;he++)if(y[he].isEdge()){y[he]=le,R=le,O=_e??O;break}}else y.push(le),R=le,O=_e??O}function X(le){var _e=le.outerWidth()+2*E,he=le.outerHeight()+2*E,Te=_e/2,Ae=he/2,ge=le.position();if(ge.x-Te<=c&&c<=ge.x+Te&&ge.y-Ae<=s&&s<=ge.y+Ae&&p.nodeShapes[f.getNodeShape(le)].checkPoint(c,s,0,_e,he,ge.x,ge.y))return W(le,0),!0}function ne(le){var Xe,_e=le._private,he=_e.rscratch,Te=le.pstyle("width").pfValue,Ae=le.pstyle("arrow-scale").value,ge=Te/2+_,Fe=ge*ge,Se=2*ge,Qe=_e.source,it=_e.target;if("segments"===he.edgeType||"straight"===he.edgeType||"haystack"===he.edgeType){for(var Ve=he.allpts,je=0;je+3<Ve.length;je+=2)if(ld(c,s,Ve[je],Ve[je+1],Ve[je+2],Ve[je+3],Se)&&Fe>(Xe=Rp(c,s,Ve[je],Ve[je+1],Ve[je+2],Ve[je+3])))return W(le,Xe),!0}else if("bezier"===he.edgeType||"multibezier"===he.edgeType||"self"===he.edgeType||"compound"===he.edgeType)for(Ve=he.allpts,je=0;je+5<he.allpts.length;je+=4)if(qc(c,s,Ve[je],Ve[je+1],Ve[je+2],Ve[je+3],Ve[je+4],Ve[je+5],Se)&&Fe>(Xe=cd(c,s,Ve[je],Ve[je+1],Ve[je+2],Ve[je+3],Ve[je+4],Ve[je+5])))return W(le,Xe),!0;Qe=Qe||_e.source,it=it||_e.target;var ct=f.getArrowWidth(Te,Ae),rt=[{name:"source",x:he.arrowStartX,y:he.arrowStartY,angle:he.srcArrowAngle},{name:"target",x:he.arrowEndX,y:he.arrowEndY,angle:he.tgtArrowAngle},{name:"mid-source",x:he.midX,y:he.midY,angle:he.midsrcArrowAngle},{name:"mid-target",x:he.midX,y:he.midY,angle:he.midtgtArrowAngle}];for(je=0;je<rt.length;je++){var tt=rt[je],_t=p.arrowShapes[le.pstyle(tt.name+"-arrow-shape").value],Dt=le.pstyle("width").pfValue;if(_t.roughCollide(c,s,ct,tt.angle,{x:tt.x,y:tt.y},Dt,_)&&_t.collide(c,s,ct,tt.angle,{x:tt.x,y:tt.y},Dt,_))return W(le),!0}b&&y.length>0&&(X(Qe),X(it))}function re(le,_e,he){return vs(le,_e,he)}function se(le,_e){var Ae,he=le._private,Te=S;Ae=_e?_e+"-":"",le.boundingBox();var ge=he.labelBounds[_e||"main"],Fe=le.pstyle(Ae+"label").value;if("yes"===le.pstyle("text-events").strValue&&Fe){var Xe=re(he.rscratch,"labelX",_e),Ve=re(he.rscratch,"labelY",_e),je=re(he.rscratch,"labelAngle",_e),Qe=le.pstyle(Ae+"text-margin-x").pfValue,it=le.pstyle(Ae+"text-margin-y").pfValue,ct=ge.x1-Te-Qe,rt=ge.x2+Te-Qe,tt=ge.y1-Te-it,_t=ge.y2+Te-it;if(je){var Dt=Math.cos(je),yt=Math.sin(je),mt=function(kn,Ht){return{x:(kn-=Xe)*Dt-(Ht-=Ve)*yt+Xe,y:kn*yt+Ht*Dt+Ve}},Ze=mt(ct,tt),xt=mt(ct,_t),Mt=mt(rt,tt),Lt=mt(rt,_t);if(Mr(c,s,[Ze.x+Qe,Ze.y+it,Mt.x+Qe,Mt.y+it,Lt.x+Qe,Lt.y+it,xt.x+Qe,xt.y+it]))return W(le),!0}else if(ws(ge,c,s))return W(le),!0}}l&&(g=g.interactive);for(var De=g.length-1;De>=0;De--){var Ce=g[De];Ce.isNode()?X(Ce)||se(Ce):ne(Ce)||se(Ce)||se(Ce,"source")||se(Ce,"target")}return y},getAllInBox:function(c,s,l,d){for(var f=this.getCachedZSortedEles().interactive,p=[],g=Math.min(c,l),y=Math.max(c,l),w=Math.min(s,d),b=Math.max(s,d),_=Lr({x1:c=g,y1:s=w,x2:l=y,y2:d=b}),E=0;E<f.length;E++){var S=f[E];if(S.isNode()){var O=S,R=O.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});Xo(_,R)&&!Os(R,_)&&p.push(O)}else{var H=S,W=H._private,X=W.rscratch;if(null!=X.startX&&null!=X.startY&&!ws(_,X.startX,X.startY)||null!=X.endX&&null!=X.endY&&!ws(_,X.endX,X.endY))continue;if("bezier"===X.edgeType||"multibezier"===X.edgeType||"self"===X.edgeType||"compound"===X.edgeType||"segments"===X.edgeType||"haystack"===X.edgeType){for(var ne=W.rstyle.bezierPts||W.rstyle.linePts||W.rstyle.haystackPts,re=!0,se=0;se<ne.length;se++)if(!Wc(_,ne[se])){re=!1;break}re&&p.push(H)}else("haystack"===X.edgeType||"straight"===X.edgeType)&&p.push(H)}}return p}},gg={calculateArrowAngles:function(c){var w,b,_,E,S,O,s=c._private.rscratch,l="haystack"===s.edgeType,d="bezier"===s.edgeType,f="multibezier"===s.edgeType,p="segments"===s.edgeType,g="compound"===s.edgeType,y="self"===s.edgeType;l?(_=s.haystackPts[0],E=s.haystackPts[1],S=s.haystackPts[2],O=s.haystackPts[3]):(_=s.arrowStartX,E=s.arrowStartY,S=s.arrowEndX,O=s.arrowEndY),X=s.midX,ne=s.midY,p?(w=_-s.segpts[0],b=E-s.segpts[1]):f||g||y||d?(w=_-tr((R=s.allpts)[0],R[2],R[4],.1),b=E-tr(R[1],R[3],R[5],.1)):(w=_-X,b=E-ne),s.srcArrowAngle=Ar(w,b);var X=s.midX,ne=s.midY;if(l&&(X=(_+S)/2,ne=(E+O)/2),w=S-_,b=O-E,p)if((R=s.allpts).length/2%2==0)w=R[re=R.length/2]-R[se=re-2],b=R[re+1]-R[se+1];else{var re,se,De=2+(re=R.length/2-1);w=R[re]-R[se=re-2],b=R[re+1]-R[se+1]}else if(f||g||y){var le,_e,he,Te,ge,Ae,Fe,R=s.allpts;s.ctrlpts.length/2%2==0?(le=tr(R[Ae=R.length/2-1],R[ge=Ae+2],R[Fe=ge+2],0),_e=tr(R[Ae+1],R[ge+1],R[Fe+1],0),he=tr(R[Ae],R[ge],R[Fe],1e-4),Te=tr(R[Ae+1],R[ge+1],R[Fe+1],1e-4)):(le=tr(R[Ae=(ge=R.length/2-1)-2],R[ge],R[Fe=ge+2],.4999),_e=tr(R[Ae+1],R[ge+1],R[Fe+1],.4999),he=tr(R[Ae],R[ge],R[Fe],.5),Te=tr(R[Ae+1],R[ge+1],R[Fe+1],.5)),w=he-le,b=Te-_e}if(s.midtgtArrowAngle=Ar(w,b),s.midDispX=w,s.midDispY=b,w*=-1,b*=-1,p&&(R=s.allpts).length/2%2!=0&&(w=-(R[De=2+(re=R.length/2-1)]-R[re]),b=-(R[De+1]-R[re+1])),s.midsrcArrowAngle=Ar(w,b),p)w=S-s.segpts[s.segpts.length-2],b=O-s.segpts[s.segpts.length-1];else if(f||g||y||d){var Se=(R=s.allpts).length;w=S-tr(R[Se-6],R[Se-4],R[Se-2],.9),b=O-tr(R[Se-5],R[Se-3],R[Se-1],.9)}else w=S-X,b=O-ne;s.tgtArrowAngle=Ar(w,b)}};gg.getArrowWidth=gg.getArrowHeight=function(c,s){var l=this.arrowWidthCache=this.arrowWidthCache||{},d=l[c+", "+s];return d||(d=Math.max(Math.pow(13.37*c,.9),29)*s,l[c+", "+s]=d,d)};var go={};function _y(c){var s=[];if(null!=c){for(var l=0;l<c.length;l+=2)s.push({x:c[l],y:c[l+1]});return s}}go.findHaystackPoints=function(c){for(var s=0;s<c.length;s++){var l=c[s],d=l._private,f=d.rscratch;if(!f.haystack){var p=2*Math.random()*Math.PI;f.source={x:Math.cos(p),y:Math.sin(p)},p=2*Math.random()*Math.PI,f.target={x:Math.cos(p),y:Math.sin(p)}}var g=d.source,y=d.target,w=g.position(),b=y.position(),_=g.width(),E=y.width(),S=g.height(),O=y.height(),H=l.pstyle("haystack-radius").value/2;f.haystackPts=f.allpts=[f.source.x*_*H+w.x,f.source.y*S*H+w.y,f.target.x*E*H+b.x,f.target.y*O*H+b.y],f.midX=(f.allpts[0]+f.allpts[2])/2,f.midY=(f.allpts[1]+f.allpts[3])/2,f.edgeType="haystack",f.haystack=!0,this.storeEdgeProjections(l),this.calculateArrowAngles(l),this.recalculateEdgeLabelProjections(l),this.calculateLabelAngles(l)}},go.findSegmentsPoints=function(c,s){var l=c._private.rscratch,d=s.posPts,f=s.intersectionPts,p=s.vectorNormInverse,g=c.pstyle("edge-distances").value,y=c.pstyle("segment-weights"),w=c.pstyle("segment-distances"),b=Math.min(y.pfValue.length,w.pfValue.length);l.edgeType="segments",l.segpts=[];for(var _=0;_<b;_++){var E=y.pfValue[_],S=w.pfValue[_],O=1-E,H="node-position"===g?d:f,W={x:H.x1*O+H.x2*E,y:H.y1*O+H.y2*E};l.segpts.push(W.x+p.x*S,W.y+p.y*S)}},go.findLoopPoints=function(c,s,l,d){var f=c._private.rscratch,p=s.dirCounts,g=s.srcPos,y=c.pstyle("control-point-distances"),w=y?y.pfValue[0]:void 0,b=c.pstyle("loop-direction").pfValue,_=c.pstyle("loop-sweep").pfValue,E=c.pstyle("control-point-step-size").pfValue;f.edgeType="self";var S=l,O=E;d&&(S=0,O=w);var R=b-Math.PI/2,H=R-_/2,W=R+_/2,X=String(b+"_"+_);S=void 0===p[X]?p[X]=0:++p[X],f.ctrlpts=[g.x+1.4*Math.cos(H)*O*(S/3+1),g.y+1.4*Math.sin(H)*O*(S/3+1),g.x+1.4*Math.cos(W)*O*(S/3+1),g.y+1.4*Math.sin(W)*O*(S/3+1)]},go.findCompoundLoopPoints=function(c,s,l,d){var f=c._private.rscratch;f.edgeType="compound";var p=s.srcPos,g=s.tgtPos,y=s.srcW,w=s.srcH,b=s.tgtW,_=s.tgtH,E=c.pstyle("control-point-step-size").pfValue,S=c.pstyle("control-point-distances"),R=l,H=E;d&&(R=0,H=S?S.pfValue[0]:void 0);var X={x:p.x-y/2,y:p.y-w/2},ne={x:g.x-b/2,y:g.y-_/2},re={x:Math.min(X.x,ne.x),y:Math.min(X.y,ne.y)},De=Math.max(.5,Math.log(.01*y)),Ce=Math.max(.5,Math.log(.01*b));f.ctrlpts=[re.x,re.y-(1+Math.pow(50,1.12)/100)*H*(R/3+1)*De,re.x-(1+Math.pow(50,1.12)/100)*H*(R/3+1)*Ce,re.y]},go.findStraightEdgePoints=function(c){c._private.rscratch.edgeType="straight"},go.findBezierPoints=function(c,s,l,d,f){var p=c._private.rscratch,g=s.vectorNormInverse,y=s.posPts,w=s.intersectionPts,b=c.pstyle("edge-distances").value,_=c.pstyle("control-point-step-size").pfValue,E=c.pstyle("control-point-distances"),S=c.pstyle("control-point-weights"),O=E&&S?Math.min(E.value.length,S.value.length):1,R=E?E.pfValue[0]:void 0,H=S.value[0],W=d;p.edgeType=W?"multibezier":"bezier",p.ctrlpts=[];for(var X=0;X<O;X++){var re,ne=(.5-s.eles.length/2+l)*_*(f?-1:1),se=li(ne);W&&(R=E?E.pfValue[X]:_,H=S.value[X]);var De=void 0!==(re=d?R:void 0!==R?se*R:void 0)?re:ne,Ce=1-H,_e="node-position"===b?y:w,he={x:_e.x1*Ce+_e.x2*H,y:_e.y1*Ce+_e.y2*H};p.ctrlpts.push(he.x+g.x*De,he.y+g.y*De)}},go.findTaxiPoints=function(c,s){var l=c._private.rscratch;l.edgeType="segments";var d="vertical",f="horizontal",p="leftward",g="rightward",y="downward",w="upward",_=s.posPts,E=s.srcW,S=s.srcH,O=s.tgtW,R=s.tgtH,W="node-position"!==c.pstyle("edge-distances").value,X=c.pstyle("taxi-direction").value,ne=X,re=c.pstyle("taxi-turn"),se="%"===re.units,De=re.pfValue,Ce=De<0,le=c.pstyle("taxi-turn-min-distance").pfValue,he=W?(S+R)/2:0,Te=_.x2-_.x1,Ae=_.y2-_.y1,ge=function(rn,Gn){return rn>0?Math.max(rn-Gn,0):Math.min(rn+Gn,0)},Fe=ge(Te,W?(E+O)/2:0),Se=ge(Ae,he),Xe=!1;"auto"===ne?X=Math.abs(Fe)>Math.abs(Se)?f:d:ne===w||ne===y?(X=d,Xe=!0):(ne===p||ne===g)&&(X=f,Xe=!0);var rt,Ve=X===d,je=Ve?Se:Fe,Qe=Ve?Ae:Te,it=li(Qe),ct=!1;(!Xe||!se&&!Ce)&&(ne===y&&Qe<0||ne===w&&Qe>0||ne===p&&Qe>0||ne===g&&Qe<0)&&(je=(it*=-1)*Math.abs(je),ct=!0);var Dt=function(rn){return Math.abs(rn)<le||Math.abs(rn)>=Math.abs(je)},yt=Dt(rt=se?(De<0?1+De:De)*je:(De<0?je:0)+De*it),mt=Dt(Math.abs(je)-Math.abs(rt));if(!yt&&!mt||ct)if(Ve){var fe=_.y1+rt+(W?S/2*it:0);l.segpts=[_.x1,fe,_.x2,fe]}else{var gt=_.x1+rt+(W?E/2*it:0);l.segpts=[gt,_.y1,gt,_.y2]}else if(Ve){var xt=Math.abs(Qe)<=S/2,Mt=Math.abs(Te)<=O/2;if(xt){var Lt=(_.x1+_.x2)/2;l.segpts=[Lt,_.y1,Lt,_.y2]}else if(Mt){var kn=(_.y1+_.y2)/2;l.segpts=[_.x1,kn,_.x2,kn]}else l.segpts=[_.x1,_.y2]}else{var pn=Math.abs(Qe)<=E/2,en=Math.abs(Ae)<=R/2;if(pn){var jt=(_.y1+_.y2)/2;l.segpts=[_.x1,jt,_.x2,jt]}else if(en){var An=(_.x1+_.x2)/2;l.segpts=[An,_.y1,An,_.y2]}else l.segpts=[_.x2,_.y1]}},go.tryToCorrectInvalidPoints=function(c,s){var l=c._private.rscratch;if("bezier"===l.edgeType){var d=s.srcPos,f=s.tgtPos,p=s.srcW,g=s.srcH,y=s.tgtW,w=s.tgtH,b=s.srcShape,_=s.tgtShape,E=!pe(l.startX)||!pe(l.startY),S=!pe(l.arrowStartX)||!pe(l.arrowStartY),O=!pe(l.endX)||!pe(l.endY),R=!pe(l.arrowEndX)||!pe(l.arrowEndY),X=this.getArrowWidth(c.pstyle("width").pfValue,c.pstyle("arrow-scale").value)*this.arrowShapeWidth*3,ne=Or({x:l.ctrlpts[0],y:l.ctrlpts[1]},{x:l.startX,y:l.startY}),re=ne<X,se=Or({x:l.ctrlpts[0],y:l.ctrlpts[1]},{x:l.endX,y:l.endY}),De=se<X,Ce=!1;if(E||S||re){Ce=!0;var le={x:l.ctrlpts[0]-d.x,y:l.ctrlpts[1]-d.y},_e=Math.sqrt(le.x*le.x+le.y*le.y),he={x:le.x/_e,y:le.y/_e},Te=Math.max(p,g),Ae={x:l.ctrlpts[0]+2*he.x*Te,y:l.ctrlpts[1]+2*he.y*Te},ge=b.intersectLine(d.x,d.y,p,g,Ae.x,Ae.y,0);re?(l.ctrlpts[0]=l.ctrlpts[0]+he.x*(X-ne),l.ctrlpts[1]=l.ctrlpts[1]+he.y*(X-ne)):(l.ctrlpts[0]=ge[0]+he.x*X,l.ctrlpts[1]=ge[1]+he.y*X)}if(O||R||De){Ce=!0;var Fe={x:l.ctrlpts[0]-f.x,y:l.ctrlpts[1]-f.y},Se=Math.sqrt(Fe.x*Fe.x+Fe.y*Fe.y),Xe={x:Fe.x/Se,y:Fe.y/Se},Ve=Math.max(p,g),je={x:l.ctrlpts[0]+2*Xe.x*Ve,y:l.ctrlpts[1]+2*Xe.y*Ve},Qe=_.intersectLine(f.x,f.y,y,w,je.x,je.y,0);De?(l.ctrlpts[0]=l.ctrlpts[0]+Xe.x*(X-se),l.ctrlpts[1]=l.ctrlpts[1]+Xe.y*(X-se)):(l.ctrlpts[0]=Qe[0]+Xe.x*X,l.ctrlpts[1]=Qe[1]+Xe.y*X)}Ce&&this.findEndpoints(c)}},go.storeAllpts=function(c){var s=c._private.rscratch;if("multibezier"===s.edgeType||"bezier"===s.edgeType||"self"===s.edgeType||"compound"===s.edgeType){s.allpts=[],s.allpts.push(s.startX,s.startY);for(var l=0;l+1<s.ctrlpts.length;l+=2)s.allpts.push(s.ctrlpts[l],s.ctrlpts[l+1]),l+3<s.ctrlpts.length&&s.allpts.push((s.ctrlpts[l]+s.ctrlpts[l+2])/2,(s.ctrlpts[l+1]+s.ctrlpts[l+3])/2);var d;s.allpts.push(s.endX,s.endY),s.ctrlpts.length/2%2==0?(s.midX=s.allpts[d=s.allpts.length/2-1],s.midY=s.allpts[d+1]):(s.midX=tr(s.allpts[d=s.allpts.length/2-3],s.allpts[d+2],s.allpts[d+4],.5),s.midY=tr(s.allpts[d+1],s.allpts[d+3],s.allpts[d+5],.5))}else if("straight"===s.edgeType)s.allpts=[s.startX,s.startY,s.endX,s.endY],s.midX=(s.startX+s.endX+s.arrowStartX+s.arrowEndX)/4,s.midY=(s.startY+s.endY+s.arrowStartY+s.arrowEndY)/4;else if("segments"===s.edgeType)if(s.allpts=[],s.allpts.push(s.startX,s.startY),s.allpts.push.apply(s.allpts,s.segpts),s.allpts.push(s.endX,s.endY),s.segpts.length%4==0){var p=s.segpts.length/2,g=p-2;s.midX=(s.segpts[g]+s.segpts[p])/2,s.midY=(s.segpts[g+1]+s.segpts[p+1])/2}else{var y=s.segpts.length/2-1;s.midX=s.segpts[y],s.midY=s.segpts[y+1]}},go.checkForInvalidEdgeWarning=function(c){var s=c[0]._private.rscratch;s.nodesOverlap||pe(s.startX)&&pe(s.startY)&&pe(s.endX)&&pe(s.endY)?s.loggedErr=!1:s.loggedErr||(s.loggedErr=!0,ur("Edge `"+c.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},go.findEdgeControlPoints=function(c){var s=this;if(c&&0!==c.length){for(var l=this,f=l.cy.hasCompoundNodes(),p={map:new co,get:function(le){var _e=this.map.get(le[0]);return null!=_e?_e.get(le[1]):null},set:function(le,_e){var he=this.map.get(le[0]);null==he&&(he=new co,this.map.set(le[0],he)),he.set(le[1],_e)}},g=[],y=[],w=0;w<c.length;w++){var b=c[w],_=b._private,E=b.pstyle("curve-style").value;if(!b.removed()&&b.takesUpSpace()){if("haystack"===E){y.push(b);continue}var S="unbundled-bezier"===E||"segments"===E||"straight"===E||"straight-triangle"===E||"taxi"===E,O="unbundled-bezier"===E||"bezier"===E,H=_.target,ne=[_.source.poolIndex(),H.poolIndex()].sort(),re=p.get(ne);null==re&&(p.set(ne,re={eles:[]}),g.push(ne)),re.eles.push(b),S&&(re.hasUnbundled=!0),O&&(re.hasBezier=!0)}}for(var se=function(le){var he=p.get(g[le]),Te=void 0;if(!he.hasUnbundled){var Ae=he.eles[0].parallelEdges().filter(function(Rt){return Rt.isBundledBezier()});sd(he.eles),Ae.forEach(function(Rt){return he.eles.push(Rt)}),he.eles.sort(function(Rt,fe){return Rt.poolIndex()-fe.poolIndex()})}var ge=he.eles[0],Fe=ge.source(),Se=ge.target();if(Fe.poolIndex()>Se.poolIndex()){var Xe=Fe;Fe=Se,Se=Xe}var Ve=he.srcPos=Fe.position(),je=he.tgtPos=Se.position(),Qe=he.srcW=Fe.outerWidth(),it=he.srcH=Fe.outerHeight(),ct=he.tgtW=Se.outerWidth(),rt=he.tgtH=Se.outerHeight(),tt=he.srcShape=l.nodeShapes[s.getNodeShape(Fe)],_t=he.tgtShape=l.nodeShapes[s.getNodeShape(Se)];he.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var Dt=0;Dt<he.eles.length;Dt++){var yt=he.eles[Dt],mt=yt[0]._private.rscratch,Ze=yt.pstyle("curve-style").value,xt="unbundled-bezier"===Ze||"segments"===Ze||"taxi"===Ze,Mt=!Fe.same(yt.source());if(!he.calculatedIntersection&&Fe!==Se&&(he.hasBezier||he.hasUnbundled)){he.calculatedIntersection=!0;var Lt=tt.intersectLine(Ve.x,Ve.y,Qe,it,je.x,je.y,0),Vt=he.srcIntn=Lt,xn=_t.intersectLine(je.x,je.y,ct,rt,Ve.x,Ve.y,0),kn=he.tgtIntn=xn,Ht=he.intersectionPts={x1:Lt[0],x2:xn[0],y1:Lt[1],y2:xn[1]},Ft=he.posPts={x1:Ve.x,x2:je.x,y1:Ve.y,y2:je.y},pn=xn[1]-Lt[1],en=xn[0]-Lt[0],jt=Math.sqrt(en*en+pn*pn),cn=he.vector={x:en,y:pn},Hn=he.vectorNorm={x:cn.x/jt,y:cn.y/jt},An={x:-Hn.y,y:Hn.x};he.nodesOverlap=!pe(jt)||_t.checkPoint(Lt[0],Lt[1],0,ct,rt,je.x,je.y)||tt.checkPoint(xn[0],xn[1],0,Qe,it,Ve.x,Ve.y),he.vectorNormInverse=An,Te={nodesOverlap:he.nodesOverlap,dirCounts:he.dirCounts,calculatedIntersection:!0,hasBezier:he.hasBezier,hasUnbundled:he.hasUnbundled,eles:he.eles,srcPos:je,tgtPos:Ve,srcW:ct,srcH:rt,tgtW:Qe,tgtH:it,srcIntn:kn,tgtIntn:Vt,srcShape:_t,tgtShape:tt,posPts:{x1:Ft.x2,y1:Ft.y2,x2:Ft.x1,y2:Ft.y1},intersectionPts:{x1:Ht.x2,y1:Ht.y2,x2:Ht.x1,y2:Ht.y1},vector:{x:-cn.x,y:-cn.y},vectorNorm:{x:-Hn.x,y:-Hn.y},vectorNormInverse:{x:-An.x,y:-An.y}}}var mn=Mt?Te:he;mt.nodesOverlap=mn.nodesOverlap,mt.srcIntn=mn.srcIntn,mt.tgtIntn=mn.tgtIntn,f&&(Fe.isParent()||Fe.isChild()||Se.isParent()||Se.isChild())&&(Fe.parents().anySame(Se)||Se.parents().anySame(Fe)||Fe.same(Se)&&Fe.isParent())?s.findCompoundLoopPoints(yt,mn,Dt,xt):Fe===Se?s.findLoopPoints(yt,mn,Dt,xt):"segments"===Ze?s.findSegmentsPoints(yt,mn):"taxi"===Ze?s.findTaxiPoints(yt,mn):"straight"===Ze||!xt&&he.eles.length%2==1&&Dt===Math.floor(he.eles.length/2)?s.findStraightEdgePoints(yt):s.findBezierPoints(yt,mn,Dt,xt,Mt),s.findEndpoints(yt),s.tryToCorrectInvalidPoints(yt,mn),s.checkForInvalidEdgeWarning(yt),s.storeAllpts(yt),s.storeEdgeProjections(yt),s.calculateArrowAngles(yt),s.recalculateEdgeLabelProjections(yt),s.calculateLabelAngles(yt)}},De=0;De<g.length;De++)se(De);this.findHaystackPoints(y)}},go.getSegmentPoints=function(c){var s=c[0]._private.rscratch;if("segments"===s.edgeType)return this.recalculateRenderedStyle(c),_y(s.segpts)},go.getControlPoints=function(c){var s=c[0]._private.rscratch,l=s.edgeType;if("bezier"===l||"multibezier"===l||"self"===l||"compound"===l)return this.recalculateRenderedStyle(c),_y(s.ctrlpts)},go.getEdgeMidpoint=function(c){var s=c[0]._private.rscratch;return this.recalculateRenderedStyle(c),{x:s.midX,y:s.midY}};var vc={manualEndptToPx:function(c,s){var d=c.position(),f=c.outerWidth(),p=c.outerHeight();if(2===s.value.length){var g=[s.pfValue[0],s.pfValue[1]];return"%"===s.units[0]&&(g[0]=g[0]*f),"%"===s.units[1]&&(g[1]=g[1]*p),g[0]+=d.x,g[1]+=d.y,g}var y=s.pfValue[0];y=-Math.PI/2+y;var w=2*Math.max(f,p),b=[d.x+Math.cos(y)*w,d.y+Math.sin(y)*w];return this.nodeShapes[this.getNodeShape(c)].intersectLine(d.x,d.y,f,p,b[0],b[1],0)},findEndpoints:function(c){var l,Te,Ae,ge,Fe,s=this,d=c.source()[0],f=c.target()[0],p=d.position(),g=f.position(),y=c.pstyle("target-arrow-shape").value,w=c.pstyle("source-arrow-shape").value,b=c.pstyle("target-distance-from-node").pfValue,_=c.pstyle("source-distance-from-node").pfValue,E=c.pstyle("curve-style").value,S=c._private.rscratch,O=S.edgeType,H="self"===O||"compound"===O,W="bezier"===O||"multibezier"===O||H,X="bezier"!==O,ne="straight"===O||"segments"===O,re="segments"===O,se=W||X||ne,De=H||"taxi"===E,Ce=c.pstyle("source-endpoint"),le=De?"outside-to-node":Ce.value,_e=c.pstyle("target-endpoint"),he=De?"outside-to-node":_e.value;if(S.srcManEndpt=Ce,S.tgtManEndpt=_e,W){var Se=[S.ctrlpts[0],S.ctrlpts[1]];Te=X?[S.ctrlpts[S.ctrlpts.length-2],S.ctrlpts[S.ctrlpts.length-1]]:Se,Ae=Se}else if(ne){var Ve=re?S.segpts.slice(0,2):[g.x,g.y];Te=re?S.segpts.slice(S.segpts.length-2):[p.x,p.y],Ae=Ve}if("inside-to-node"===he)l=[g.x,g.y];else if(_e.units)l=this.manualEndptToPx(f,_e);else if("outside-to-line"===he)l=S.tgtIntn;else if("outside-to-node"===he||"outside-to-node-or-label"===he?ge=Te:("outside-to-line"===he||"outside-to-line-or-label"===he)&&(ge=[p.x,p.y]),l=s.nodeShapes[this.getNodeShape(f)].intersectLine(g.x,g.y,f.outerWidth(),f.outerHeight(),ge[0],ge[1],0),"outside-to-node-or-label"===he||"outside-to-line-or-label"===he){var Qe=f._private.rscratch,rt=Qe.labelX,tt=Qe.labelY,_t=Qe.labelWidth/2,Dt=Qe.labelHeight/2,yt=f.pstyle("text-valign").value;"top"===yt?tt-=Dt:"bottom"===yt&&(tt+=Dt);var mt=f.pstyle("text-halign").value;"left"===mt?rt-=_t:"right"===mt&&(rt+=_t);var Ze=ml(ge[0],ge[1],[rt-_t,tt-Dt,rt+_t,tt-Dt,rt+_t,tt+Dt,rt-_t,tt+Dt],g.x,g.y);if(Ze.length>0){var xt=p,Mt=xr(xt,Yn(l)),Lt=xr(xt,Yn(Ze)),Vt=Mt;Lt<Mt&&(l=Ze,Vt=Lt),Ze.length>2&&xr(xt,{x:Ze[2],y:Ze[3]})<Vt&&(l=[Ze[2],Ze[3]])}}var kn=ic(l,Te,s.arrowShapes[y].spacing(c)+b),Ht=ic(l,Te,s.arrowShapes[y].gap(c)+b);if(S.endX=Ht[0],S.endY=Ht[1],S.arrowEndX=kn[0],S.arrowEndY=kn[1],"inside-to-node"===le)l=[p.x,p.y];else if(Ce.units)l=this.manualEndptToPx(d,Ce);else if("outside-to-line"===le)l=S.srcIntn;else if("outside-to-node"===le||"outside-to-node-or-label"===le?Fe=Ae:("outside-to-line"===le||"outside-to-line-or-label"===le)&&(Fe=[g.x,g.y]),l=s.nodeShapes[this.getNodeShape(d)].intersectLine(p.x,p.y,d.outerWidth(),d.outerHeight(),Fe[0],Fe[1],0),"outside-to-node-or-label"===le||"outside-to-line-or-label"===le){var Ft=d._private.rscratch,jt=Ft.labelX,cn=Ft.labelY,Hn=Ft.labelWidth/2,An=Ft.labelHeight/2,mn=d.pstyle("text-valign").value;"top"===mn?cn-=An:"bottom"===mn&&(cn+=An);var Rt=d.pstyle("text-halign").value;"left"===Rt?jt-=Hn:"right"===Rt&&(jt+=Hn);var fe=ml(Fe[0],Fe[1],[jt-Hn,cn-An,jt+Hn,cn-An,jt+Hn,cn+An,jt-Hn,cn+An],p.x,p.y);if(fe.length>0){var st=g,It=xr(st,Yn(l)),gt=xr(st,Yn(fe)),vt=It;gt<It&&(l=[fe[0],fe[1]],vt=gt),fe.length>2&&xr(st,{x:fe[2],y:fe[3]})<vt&&(l=[fe[2],fe[3]])}}var Tt=ic(l,Ae,s.arrowShapes[w].spacing(c)+_),rn=ic(l,Ae,s.arrowShapes[w].gap(c)+_);S.startX=rn[0],S.startY=rn[1],S.arrowStartX=Tt[0],S.arrowStartY=Tt[1],se&&(S.badLine=!(pe(S.startX)&&pe(S.startY)&&pe(S.endX)&&pe(S.endY)))},getSourceEndpoint:function(c){var s=c[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(c),s.edgeType)?{x:s.haystackPts[0],y:s.haystackPts[1]}:{x:s.arrowStartX,y:s.arrowStartY}},getTargetEndpoint:function(c){var s=c[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(c),s.edgeType)?{x:s.haystackPts[2],y:s.haystackPts[3]}:{x:s.arrowEndX,y:s.arrowEndY}}},xy={};function iM(c,s,l){for(var d=function(b,_,E,S){return tr(b,_,E,S)},p=s._private.rstyle.bezierPts,g=0;g<c.bezierProjPcts.length;g++){var y=c.bezierProjPcts[g];p.push({x:d(l[0],l[2],l[4],y),y:d(l[1],l[3],l[5],y)})}}xy.storeEdgeProjections=function(c){var s=c._private,l=s.rscratch,d=l.edgeType;if(s.rstyle.bezierPts=null,s.rstyle.linePts=null,s.rstyle.haystackPts=null,"multibezier"===d||"bezier"===d||"self"===d||"compound"===d){s.rstyle.bezierPts=[];for(var f=0;f+5<l.allpts.length;f+=4)iM(this,c,l.allpts.slice(f,f+6))}else if("segments"===d){var p=s.rstyle.linePts=[];for(f=0;f+1<l.allpts.length;f+=2)p.push({x:l.allpts[f],y:l.allpts[f+1]})}else if("haystack"===d){var g=l.haystackPts;s.rstyle.haystackPts=[{x:g[0],y:g[1]},{x:g[2],y:g[3]}]}s.rstyle.arrowWidth=this.getArrowWidth(c.pstyle("width").pfValue,c.pstyle("arrow-scale").value)*this.arrowShapeWidth},xy.recalculateEdgeProjections=function(c){this.findEdgeControlPoints(c)};var Ss={recalculateNodeLabelProjection:function(c){var s=c.pstyle("label").strValue;if(!$e(s)){var l,d,f=c._private,p=c.width(),g=c.height(),y=c.padding(),w=c.position(),b=c.pstyle("text-halign").strValue,_=c.pstyle("text-valign").strValue,E=f.rscratch,S=f.rstyle;switch(b){case"left":l=w.x-p/2-y;break;case"right":l=w.x+p/2+y;break;default:l=w.x}switch(_){case"top":d=w.y-g/2-y;break;case"bottom":d=w.y+g/2+y;break;default:d=w.y}E.labelX=l,E.labelY=d,S.labelX=l,S.labelY=d,this.calculateLabelAngles(c),this.applyLabelDimensions(c)}}},Z_=function(s,l){var d=Math.atan(l/s);return 0===s&&d<0&&(d*=-1),d},Q_=function(s,l){return Z_(l.x-s.x,l.y-s.y)};Ss.recalculateEdgeLabelProjections=function(c){var s,l=c._private,d=l.rscratch,f=this,p={mid:c.pstyle("label").strValue,source:c.pstyle("source-label").strValue,target:c.pstyle("target-label").strValue};if(p.mid||p.source||p.target){var g=function(E,S,O){ys(l.rscratch,E,S,O),ys(l.rstyle,E,S,O)};g("labelX",null,(s={x:d.midX,y:d.midY}).x),g("labelY",null,s.y);var y=Z_(d.midDispX,d.midDispY);g("labelAutoAngle",null,y);var w=function _(){if(_.cache)return _.cache;for(var E=[],S=0;S+5<d.allpts.length;S+=4)E.push({p0:{x:d.allpts[S],y:d.allpts[S+1]},p1:{x:d.allpts[S+2],y:d.allpts[S+3]},p2:{x:d.allpts[S+4],y:d.allpts[S+5]},startDist:0,length:0,segments:[]});var W=l.rstyle.bezierPts,X=f.bezierProjPcts.length;function ne(le,_e,he,Te,Ae){var ge=Or(_e,he),Fe=le.segments[le.segments.length-1];le.segments.push({p0:_e,p1:he,t0:Te,t1:Ae,startDist:Fe?Fe.startDist+Fe.length:0,length:ge}),le.length+=ge}for(var re=0;re<E.length;re++){var se=E[re],De=E[re-1];De&&(se.startDist=De.startDist+De.length),ne(se,se.p0,W[re*X],0,f.bezierProjPcts[0]);for(var Ce=0;Ce<X-1;Ce++)ne(se,W[re*X+Ce],W[re*X+Ce+1],f.bezierProjPcts[Ce],f.bezierProjPcts[Ce+1]);ne(se,W[re*X+X-1],se.p2,f.bezierProjPcts[X-1],1)}return _.cache=E},b=function(E){var S,O="source"===E;if(p[E]){var R=c.pstyle(E+"-text-offset").pfValue;switch(d.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var W,H=w(),X=0,ne=0,re=0;re<H.length;re++){for(var se=H[O?re:H.length-1-re],De=0;De<se.segments.length;De++){var Ce=se.segments[O?De:se.segments.length-1-De];if(X=ne,(ne+=Ce.length)>=R||re===H.length-1&&De===se.segments.length-1){W={cp:se,segment:Ce};break}}if(W)break}var _e=W.cp,he=W.segment,Te=(R-X)/he.length,Ae=he.t1-he.t0,ge=O?he.t0+Ae*Te:he.t1-Ae*Te;ge=_n(0,ge,1),s=Yo(_e.p0,_e.p1,_e.p2,ge),S=function(s,l,d,f){var p=_n(0,f-.001,1),g=_n(0,f+.001,1),y=Yo(s,l,d,p),w=Yo(s,l,d,g);return Q_(y,w)}(_e.p0,_e.p1,_e.p2,ge);break;case"straight":case"segments":case"haystack":for(var Se,Xe,Ve,je,Fe=0,Qe=d.allpts.length,it=0;it+3<Qe&&(O?(Ve={x:d.allpts[it],y:d.allpts[it+1]},je={x:d.allpts[it+2],y:d.allpts[it+3]}):(Ve={x:d.allpts[Qe-2-it],y:d.allpts[Qe-1-it]},je={x:d.allpts[Qe-4-it],y:d.allpts[Qe-3-it]}),Xe=Fe,!((Fe+=Se=Or(Ve,je))>=R));it+=2);var rt=(R-Xe)/Se;rt=_n(0,rt,1),s=function(s,l,d,f){var p_x=l.x-s.x,p_y=l.y-s.y,g=Or(s,l);return d=d??0,{x:s.x+p_x/g*(f=f??d*g),y:s.y+p_y/g*f}}(Ve,je,rt),S=Q_(Ve,je)}g("labelX",E,s.x),g("labelY",E,s.y),g("labelAutoAngle",E,S)}};b("source"),b("target"),this.applyLabelDimensions(c)}},Ss.applyLabelDimensions=function(c){this.applyPrefixedLabelDimensions(c),c.isEdge()&&(this.applyPrefixedLabelDimensions(c,"source"),this.applyPrefixedLabelDimensions(c,"target"))},Ss.applyPrefixedLabelDimensions=function(c,s){var l=c._private,d=this.getLabelText(c,s),f=this.calculateLabelDimensions(c,d),p=c.pstyle("line-height").pfValue,g=c.pstyle("text-wrap").strValue,y=vs(l.rscratch,"labelWrapCachedLines",s)||[],w="wrap"!==g?1:Math.max(y.length,1),b=f.height/w,_=b*p,E=f.width,S=f.height+(w-1)*(p-1)*b;ys(l.rstyle,"labelWidth",s,E),ys(l.rscratch,"labelWidth",s,E),ys(l.rstyle,"labelHeight",s,S),ys(l.rscratch,"labelHeight",s,S),ys(l.rscratch,"labelLineHeight",s,_)},Ss.getLabelText=function(c,s){var l=c._private,f=c.pstyle((s?s+"-":"")+"label").strValue,p=c.pstyle("text-transform").value,g=function(ct,rt){return rt?(ys(l.rscratch,ct,s,rt),rt):vs(l.rscratch,ct,s)};if(!f)return"";"none"==p||("uppercase"==p?f=f.toUpperCase():"lowercase"==p&&(f=f.toLowerCase()));var y=c.pstyle("text-wrap").value;if("wrap"===y){var w=g("labelKey");if(null!=w&&g("labelWrapKey")===w)return g("labelWrapCachedText");for(var _=f.split("\n"),E=c.pstyle("text-max-width").pfValue,O="anywhere"===c.pstyle("text-overflow-wrap").value,R=[],H=/[\s\u200b]+/,W=O?"":" ",X=0;X<_.length;X++){var ne=_[X],se=this.calculateLabelDimensions(c,ne).width;if(O){var De=ne.split("").join("\u200b");ne=De}if(se>E){for(var Ce=ne.split(H),le="",_e=0;_e<Ce.length;_e++){var he=Ce[_e];this.calculateLabelDimensions(c,0===le.length?he:le+W+he).width<=E?le+=he+W:(le&&R.push(le),le=he+W)}le.match(/^[\s\u200b]+$/)||R.push(le)}else R.push(ne)}g("labelWrapCachedLines",R),f=g("labelWrapCachedText",R.join("\n")),g("labelWrapKey",w)}else if("ellipsis"===y){var Fe=c.pstyle("text-max-width").pfValue,Se="",Ve=!1;if(this.calculateLabelDimensions(c,f).width<Fe)return f;for(var je=0;je<f.length&&!(this.calculateLabelDimensions(c,Se+f[je]+"\u2026").width>Fe);je++)Se+=f[je],je===f.length-1&&(Ve=!0);return Ve||(Se+="\u2026"),Se}return f},Ss.getLabelJustification=function(c){var s=c.pstyle("text-justification").strValue,l=c.pstyle("text-halign").strValue;if("auto"!==s)return s;if(!c.isNode())return"center";switch(l){case"left":return"right";case"right":return"left";default:return"center"}},Ss.calculateLabelDimensions=function(c,s){var d=Aa(s,c._private.labelDimsKey),f=this.labelDimCache||(this.labelDimCache=[]),p=f[d];if(null!=p)return p;var y=c.pstyle("font-style").strValue,w=c.pstyle("font-size").pfValue,b=c.pstyle("font-family").strValue,_=c.pstyle("font-weight").strValue,E=this.labelCalcCanvas,S=this.labelCalcCanvasContext;if(!E){E=this.labelCalcCanvas=document.createElement("canvas"),S=this.labelCalcCanvasContext=E.getContext("2d");var O=E.style;O.position="absolute",O.left="-9999px",O.top="-9999px",O.zIndex="-1",O.visibility="hidden",O.pointerEvents="none"}S.font="".concat(y," ").concat(_," ").concat(w,"px ").concat(b);for(var R=0,H=0,W=s.split("\n"),X=0;X<W.length;X++){var re=S.measureText(W[X]),se=Math.ceil(re.width),De=w;R=Math.max(se,R),H+=De}return f[d]={width:R+=0,height:H+=0}},Ss.calculateLabelAngle=function(c,s){var d=c._private.rscratch,f=c.isEdge(),g=c.pstyle((s?s+"-":"")+"text-rotation"),y=g.strValue;return"none"===y?0:f&&"autorotate"===y?d.labelAutoAngle:"autorotate"===y?0:g.pfValue},Ss.calculateLabelAngles=function(c){var s=this,l=c.isEdge(),f=c._private.rscratch;f.labelAngle=s.calculateLabelAngle(c),l&&(f.sourceLabelAngle=s.calculateLabelAngle(c,"source"),f.targetLabelAngle=s.calculateLabelAngle(c,"target"))};var J_={},Ey=!1;J_.getNodeShape=function(c){var l=c.pstyle("shape").value;if("cutrectangle"===l&&(c.width()<28||c.height()<28))return Ey||(ur("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),Ey=!0),"rectangle";if(c.isParent())return"rectangle"===l||"roundrectangle"===l||"round-rectangle"===l||"cutrectangle"===l||"cut-rectangle"===l||"barrel"===l?l:"rectangle";if("polygon"===l){var d=c.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(d).name}return l};var mu={updateCachedGrabbedEles:function(){var c=this.cachedZSortedEles;if(c){c.drag=[],c.nondrag=[];for(var s=[],l=0;l<c.length;l++){var f=(d=c[l])._private.rscratch;d.grabbed()&&!d.isParent()?s.push(d):f.inDragLayer?c.drag.push(d):c.nondrag.push(d)}for(l=0;l<s.length;l++){var d;c.drag.push(d=s[l])}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(c){if(c||!this.cachedZSortedEles){var s=this.cy.mutableElements().toArray();s.sort(P_),s.interactive=s.filter(function(l){return l.interactive()}),this.cachedZSortedEles=s,this.updateCachedGrabbedEles()}else s=this.cachedZSortedEles;return s}},mg={};[Al,gg,go,vc,xy,Ss,J_,{registerCalculationListeners:function(){var c=this.cy,s=c.collection(),l=this,d=function(g){var y=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(s.merge(g),y)for(var w=0;w<g.length;w++){var b=g[w],_=b._private,E=_.rstyle;E.clean=!1,E.cleanConnected=!1}};l.binder(c).on("bounds.* dirty.*",function(g){d(g.target)}).on("style.* background.*",function(g){d(g.target,!1)});var f=function(g){if(g){var y=l.onUpdateEleCalcsFns;s.cleanStyle();for(var w=0;w<s.length;w++){var b=s[w],_=b._private.rstyle;b.isNode()&&!_.cleanConnected&&(d(b.connectedEdges()),_.cleanConnected=!0)}if(y)for(var E=0;E<y.length;E++)(0,y[E])(g,s);l.recalculateRenderedStyle(s),s=c.collection()}};l.flushRenderedStyleQueue=function(){f(!0)},l.beforeRender(f,l.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(c){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(c)},recalculateRenderedStyle:function(c,s){var l=function(se){return se._private.rstyle.cleanConnected},d=[],f=[];if(!this.destroyed){void 0===s&&(s=!0);for(var p=0;p<c.length;p++){var g=c[p],y=g._private,w=y.rstyle;g.isEdge()&&(!l(g.source())||!l(g.target()))&&(w.clean=!1),!(s&&w.clean||g.removed())&&"none"!==g.pstyle("display").value&&("nodes"===y.group?f.push(g):d.push(g),w.clean=!0)}for(var b=0;b<f.length;b++){var _=f[b],S=_._private.rstyle,O=_.position();this.recalculateNodeLabelProjection(_),S.nodeX=O.x,S.nodeY=O.y,S.nodeW=_.pstyle("width").pfValue,S.nodeH=_.pstyle("height").pfValue}this.recalculateEdgeProjections(d);for(var R=0;R<d.length;R++){var W=d[R]._private,X=W.rstyle,ne=W.rscratch;X.srcX=ne.arrowStartX,X.srcY=ne.arrowStartY,X.tgtX=ne.arrowEndX,X.tgtY=ne.arrowEndY,X.midX=ne.midX,X.midY=ne.midY,X.labelAngle=ne.labelAngle,X.sourceLabelAngle=ne.sourceLabelAngle,X.targetLabelAngle=ne.targetLabelAngle}}}},mu].forEach(function(c){Zt(mg,c)});var vg={getCachedImage:function(c,s,l){var f=this.imageCache=this.imageCache||{},p=f[c];if(p)return p.image.complete||p.image.addEventListener("load",l),p.image;var g=(p=f[c]=f[c]||{}).image=new Image;g.addEventListener("load",l),g.addEventListener("error",function(){g.error=!0});var y="data:";return c.substring(0,y.length).toLowerCase()===y||(g.crossOrigin=s),g.src=c,g}},yc={registerBinding:function(c,s,l,d){var f=Array.prototype.slice.apply(arguments,[1]),p=this.binder(c);return p.on.apply(p,f)},binder:function(c){var s=this,l=c===window||c===document||c===document.body||function(s){return!(typeof HTMLElement>"u")&&s instanceof HTMLElement}(c);if(null==s.supportsPassiveEvents){var d=!1;try{var f=Object.defineProperty({},"passive",{get:function(){return d=!0,!0}});window.addEventListener("test",null,f)}catch{}s.supportsPassiveEvents=d}var p=function(y,w,b){var _=Array.prototype.slice.call(arguments);return l&&s.supportsPassiveEvents&&(_[2]={capture:b??!1,passive:!1,once:!1}),s.bindings.push({target:c,args:_}),(c.addEventListener||c.on).apply(c,_),this};return{on:p,addEventListener:p,addListener:p,bind:p}},nodeIsDraggable:function(c){return c&&c.isNode()&&!c.locked()&&c.grabbable()},nodeIsGrabbable:function(c){return this.nodeIsDraggable(c)&&c.interactive()}};yc.load=function(){var c=this,s=function(fe){return fe.selected()},l=function(fe,st,It,gt){null==fe&&(fe=c.cy);for(var vt=0;vt<st.length;vt++)fe.emit({originalEvent:It,type:st[vt],position:gt})},d=function(fe){return fe.shiftKey||fe.metaKey||fe.ctrlKey},f=function(fe,st){var It=!0;if(c.cy.hasCompoundNodes()&&fe&&fe.pannable()){for(var gt=0;st&&gt<st.length;gt++)if((fe=st[gt]).isNode()&&fe.isParent()&&!fe.pannable()){It=!1;break}}else It=!0;return It},y=function(fe){fe[0]._private.rscratch.inDragLayer=!0},b=function(fe){fe[0]._private.rscratch.isGrabTarget=!0},E=function(fe,st){var It=st.addToList;!It.has(fe)&&fe.grabbable()&&!fe.locked()&&(It.merge(fe),function(fe){fe[0]._private.grabbed=!0}(fe))},O=function(fe,st){st=st||{};var It=fe.cy().hasCompoundNodes();st.inDragLayer&&(fe.forEach(y),fe.neighborhood().stdFilter(function(gt){return!It||gt.isEdge()}).forEach(y)),st.addToList&&fe.forEach(function(gt){E(gt,st)}),function(fe,st){if(fe.cy().hasCompoundNodes()&&(null!=st.inDragLayer||null!=st.addToList)){var It=fe.descendants();st.inDragLayer&&(It.forEach(y),It.connectedEdges().forEach(y)),st.addToList&&E(It,st)}}(fe,st),W(fe,{inDragLayer:st.inDragLayer}),c.updateCachedGrabbedEles()},R=O,H=function(fe){fe&&(c.getCachedZSortedEles().forEach(function(st){(function(fe){fe[0]._private.grabbed=!1})(st),function(fe){fe[0]._private.rscratch.inDragLayer=!1}(st),function(fe){fe[0]._private.rscratch.isGrabTarget=!1}(st)}),c.updateCachedGrabbedEles())},W=function(fe,st){if((null!=st.inDragLayer||null!=st.addToList)&&fe.cy().hasCompoundNodes()){var It=fe.ancestors().orphans();if(!It.same(fe)){var gt=It.descendants().spawnSelf().merge(It).unmerge(fe).unmerge(fe.descendants()),vt=gt.connectedEdges();st.inDragLayer&&(vt.forEach(y),gt.forEach(y)),st.addToList&&gt.forEach(function(Tn){E(Tn,st)})}}},X=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},ne=typeof MutationObserver<"u",re=typeof ResizeObserver<"u";ne?(c.removeObserver=new MutationObserver(function(Rt){for(var fe=0;fe<Rt.length;fe++){var It=Rt[fe].removedNodes;if(It)for(var gt=0;gt<It.length;gt++)if(It[gt]===c.container){c.destroy();break}}}),c.container.parentNode&&c.removeObserver.observe(c.container.parentNode,{childList:!0})):c.registerBinding(c.container,"DOMNodeRemoved",function(Rt){c.destroy()});var se=T.default(function(){c.cy.resize()},100);ne&&(c.styleObserver=new MutationObserver(se),c.styleObserver.observe(c.container,{attributes:!0})),c.registerBinding(window,"resize",se),re&&(c.resizeObserver=new ResizeObserver(se),c.resizeObserver.observe(c.container));var Ce=function(){c.invalidateContainerClientCoordsCache()};(function(fe,st){for(;null!=fe;)c.registerBinding(Rt=fe,"transitionend",Ce),c.registerBinding(Rt,"animationend",Ce),c.registerBinding(Rt,"scroll",Ce),fe=fe.parentNode;var Rt})(c.container),c.registerBinding(c.container,"contextmenu",function(Rt){Rt.preventDefault()});var he,Te,Ae,_e=function(fe){for(var st=c.findContainerClientCoords(),It=st[0],gt=st[1],vt=st[2],Tn=st[3],Tt=fe.touches?fe.touches:[fe],rn=!1,Gn=0;Gn<Tt.length;Gn++){var fr=Tt[Gn];if(It<=fr.clientX&&fr.clientX<=It+vt&&gt<=fr.clientY&&fr.clientY<=gt+Tn){rn=!0;break}}if(!rn)return!1;for(var Nn=c.container,Dn=fe.target.parentNode,Sn=!1;Dn;){if(Dn===Nn){Sn=!0;break}Dn=Dn.parentNode}return!!Sn};c.registerBinding(c.container,"mousedown",function(fe){if(_e(fe)){fe.preventDefault(),X(),c.hoverData.capture=!0,c.hoverData.which=fe.which;var st=c.cy,It=[fe.clientX,fe.clientY],gt=c.projectIntoViewport(It[0],It[1]),vt=c.selection,Tn=c.findNearestElements(gt[0],gt[1],!0,!1),Tt=Tn[0],rn=c.dragData.possibleDragElements;if(c.hoverData.mdownPos=gt,c.hoverData.mdownGPos=It,3==fe.which){c.hoverData.cxtStarted=!0;var fr={originalEvent:fe,type:"cxttapstart",position:{x:gt[0],y:gt[1]}};Tt?(Tt.activate(),Tt.emit(fr),c.hoverData.down=Tt):st.emit(fr),c.hoverData.downTime=(new Date).getTime(),c.hoverData.cxtDragged=!1}else if(1==fe.which){if(Tt&&Tt.activate(),null!=Tt&&c.nodeIsGrabbable(Tt)){var Nn=function(Xr){return{originalEvent:fe,type:Xr,position:{x:gt[0],y:gt[1]}}};if(b(Tt),Tt.selected()){rn=c.dragData.possibleDragElements=st.collection();var Dn=st.$(function(Sn){return Sn.isNode()&&Sn.selected()&&c.nodeIsGrabbable(Sn)});O(Dn,{addToList:rn}),Tt.emit(Nn("grabon")),Dn.forEach(function(Xr){Xr.emit(Nn("grab"))})}else rn=c.dragData.possibleDragElements=st.collection(),R(Tt,{addToList:rn}),Tt.emit(Nn("grabon")).emit(Nn("grab"));c.redrawHint("eles",!0),c.redrawHint("drag",!0)}c.hoverData.down=Tt,c.hoverData.downs=Tn,c.hoverData.downTime=(new Date).getTime(),l(Tt,["mousedown","tapstart","vmousedown"],fe,{x:gt[0],y:gt[1]}),null==Tt?(vt[4]=1,c.data.bgActivePosistion={x:gt[0],y:gt[1]},c.redrawHint("select",!0),c.redraw()):Tt.pannable()&&(vt[4]=1),c.hoverData.tapholdCancelled=!1,clearTimeout(c.hoverData.tapholdTimeout),c.hoverData.tapholdTimeout=setTimeout(function(){if(!c.hoverData.tapholdCancelled){var Xr=c.hoverData.down;Xr?Xr.emit({originalEvent:fe,type:"taphold",position:{x:gt[0],y:gt[1]}}):st.emit({originalEvent:fe,type:"taphold",position:{x:gt[0],y:gt[1]}})}},c.tapholdDuration)}vt[0]=vt[2]=gt[0],vt[1]=vt[3]=gt[1]}},!1),c.registerBinding(window,"mousemove",function(fe){var vo;if(c.hoverData.capture||_e(fe)){var It=!1,gt=c.cy,vt=gt.zoom(),Tn=[fe.clientX,fe.clientY],Tt=c.projectIntoViewport(Tn[0],Tn[1]),rn=c.hoverData.mdownPos,Gn=c.hoverData.mdownGPos,fr=c.selection,Nn=null;!c.hoverData.draggingEles&&!c.hoverData.dragging&&!c.hoverData.selecting&&(Nn=c.findNearestElement(Tt[0],Tt[1],!0,!1));var Ei,cr=c.hoverData.last,Dn=c.hoverData.down,Sn=[Tt[0]-fr[2],Tt[1]-fr[3]],Xr=c.dragData.possibleDragElements;if(Gn){var js=Tn[0]-Gn[0],Oi=Tn[1]-Gn[1];c.hoverData.isOverThresholdDrag=Ei=js*js+Oi*Oi>=c.desktopTapThreshold2}var $a=d(fe);Ei&&(c.hoverData.tapholdCancelled=!0),It=!0,l(Nn,["mousemove","vmousemove","tapdrag"],fe,{x:Tt[0],y:Tt[1]});var Ol=function(){c.data.bgActivePosistion=void 0,c.hoverData.selecting||gt.emit({originalEvent:fe,type:"boxstart",position:{x:Tt[0],y:Tt[1]}}),fr[4]=1,c.hoverData.selecting=!0,c.redrawHint("select",!0),c.redraw()};if(3===c.hoverData.which){if(Ei){var Ec={originalEvent:fe,type:"cxtdrag",position:{x:Tt[0],y:Tt[1]}};Dn?Dn.emit(Ec):gt.emit(Ec),c.hoverData.cxtDragged=!0,(!c.hoverData.cxtOver||Nn!==c.hoverData.cxtOver)&&(c.hoverData.cxtOver&&c.hoverData.cxtOver.emit({originalEvent:fe,type:"cxtdragout",position:{x:Tt[0],y:Tt[1]}}),c.hoverData.cxtOver=Nn,Nn&&Nn.emit({originalEvent:fe,type:"cxtdragover",position:{x:Tt[0],y:Tt[1]}}))}}else if(c.hoverData.dragging){if(It=!0,gt.panningEnabled()&&gt.userPanningEnabled()){var Dc;if(c.hoverData.justStartedPan){var Ef=c.hoverData.mdownPos;Dc={x:(Tt[0]-Ef[0])*vt,y:(Tt[1]-Ef[1])*vt},c.hoverData.justStartedPan=!1}else Dc={x:Sn[0]*vt,y:Sn[1]*vt};gt.panBy(Dc),gt.emit("dragpan"),c.hoverData.dragged=!0}Tt=c.projectIntoViewport(fe.clientX,fe.clientY)}else if(1!=fr[4]||null!=Dn&&!Dn.pannable()){if(Dn&&Dn.pannable()&&Dn.active()&&Dn.unactivate(),(!Dn||!Dn.grabbed())&&Nn!=cr&&(cr&&l(cr,["mouseout","tapdragout"],fe,{x:Tt[0],y:Tt[1]}),Nn&&l(Nn,["mouseover","tapdragover"],fe,{x:Tt[0],y:Tt[1]}),c.hoverData.last=Nn),Dn)if(Ei){if(gt.boxSelectionEnabled()&&$a)Dn&&Dn.grabbed()&&(H(Xr),Dn.emit("freeon"),Xr.emit("free"),c.dragData.didDrag&&(Dn.emit("dragfreeon"),Xr.emit("dragfree"))),Ol();else if(Dn&&Dn.grabbed()&&c.nodeIsDraggable(Dn)){var ns=!c.dragData.didDrag;ns&&c.redrawHint("eles",!0),c.dragData.didDrag=!0,c.hoverData.draggingEles||O(Xr,{inDragLayer:!0});var oo={x:0,y:0};if(pe(Sn[0])&&pe(Sn[1])&&(oo.x+=Sn[0],oo.y+=Sn[1],ns)){var Ri=c.hoverData.dragDelta;Ri&&pe(Ri[0])&&pe(Ri[1])&&(oo.x+=Ri[0],oo.y+=Ri[1])}c.hoverData.draggingEles=!0,Xr.silentShift(oo).emit("position drag"),c.redrawHint("drag",!0),c.redraw()}}else 0===(vo=c.hoverData.dragDelta=c.hoverData.dragDelta||[]).length?(vo.push(Sn[0]),vo.push(Sn[1])):(vo[0]+=Sn[0],vo[1]+=Sn[1]);It=!0}else Ei&&(c.hoverData.dragging||!gt.boxSelectionEnabled()||!$a&&gt.panningEnabled()&&gt.userPanningEnabled()?!c.hoverData.selecting&&gt.panningEnabled()&&gt.userPanningEnabled()&&f(Dn,c.hoverData.downs)&&(c.hoverData.dragging=!0,c.hoverData.justStartedPan=!0,fr[4]=0,c.data.bgActivePosistion=Yn(rn),c.redrawHint("select",!0),c.redraw()):Ol(),Dn&&Dn.pannable()&&Dn.active()&&Dn.unactivate());if(fr[2]=Tt[0],fr[3]=Tt[1],It)return fe.stopPropagation&&fe.stopPropagation(),fe.preventDefault&&fe.preventDefault(),!1}},!1),c.registerBinding(window,"mouseup",function(fe){if(c.hoverData.capture){c.hoverData.capture=!1;var It=c.cy,gt=c.projectIntoViewport(fe.clientX,fe.clientY),vt=c.selection,Tn=c.findNearestElement(gt[0],gt[1],!0,!1),Tt=c.dragData.possibleDragElements,rn=c.hoverData.down,Gn=d(fe);if(c.data.bgActivePosistion&&(c.redrawHint("select",!0),c.redraw()),c.hoverData.tapholdCancelled=!0,c.data.bgActivePosistion=void 0,rn&&rn.unactivate(),3===c.hoverData.which){var fr={originalEvent:fe,type:"cxttapend",position:{x:gt[0],y:gt[1]}};if(rn?rn.emit(fr):It.emit(fr),!c.hoverData.cxtDragged){var Nn={originalEvent:fe,type:"cxttap",position:{x:gt[0],y:gt[1]}};rn?rn.emit(Nn):It.emit(Nn)}c.hoverData.cxtDragged=!1,c.hoverData.which=null}else if(1===c.hoverData.which){if(l(Tn,["mouseup","tapend","vmouseup"],fe,{x:gt[0],y:gt[1]}),!c.dragData.didDrag&&!c.hoverData.dragged&&!c.hoverData.selecting&&!c.hoverData.isOverThresholdDrag&&(l(rn,["click","tap","vclick"],fe,{x:gt[0],y:gt[1]}),Te=!1,fe.timeStamp-Ae<=It.multiClickDebounceTime()?(he&&clearTimeout(he),Te=!0,Ae=null,l(rn,["dblclick","dbltap","vdblclick"],fe,{x:gt[0],y:gt[1]})):(he=setTimeout(function(){Te||l(rn,["oneclick","onetap","voneclick"],fe,{x:gt[0],y:gt[1]})},It.multiClickDebounceTime()),Ae=fe.timeStamp)),null==rn&&!c.dragData.didDrag&&!c.hoverData.selecting&&!c.hoverData.dragged&&!d(fe)&&(It.$(s).unselect(["tapunselect"]),Tt.length>0&&c.redrawHint("eles",!0),c.dragData.possibleDragElements=Tt=It.collection()),Tn==rn&&!c.dragData.didDrag&&!c.hoverData.selecting&&null!=Tn&&Tn._private.selectable&&(c.hoverData.dragging||("additive"===It.selectionType()||Gn?Tn.selected()?Tn.unselect(["tapunselect"]):Tn.select(["tapselect"]):Gn||(It.$(s).unmerge(Tn).unselect(["tapunselect"]),Tn.select(["tapselect"]))),c.redrawHint("eles",!0)),c.hoverData.selecting){var cr=It.collection(c.getAllInBox(vt[0],vt[1],vt[2],vt[3]));c.redrawHint("select",!0),cr.length>0&&c.redrawHint("eles",!0),It.emit({type:"boxend",originalEvent:fe,position:{x:gt[0],y:gt[1]}}),"additive"===It.selectionType()||Gn||It.$(s).unmerge(cr).unselect(),cr.emit("box").stdFilter(function(Ei){return Ei.selectable()&&!Ei.selected()}).select().emit("boxselect"),c.redraw()}if(c.hoverData.dragging&&(c.hoverData.dragging=!1,c.redrawHint("select",!0),c.redrawHint("eles",!0),c.redraw()),!vt[4]){c.redrawHint("drag",!0),c.redrawHint("eles",!0);var Sn=rn&&rn.grabbed();H(Tt),Sn&&(rn.emit("freeon"),Tt.emit("free"),c.dragData.didDrag&&(rn.emit("dragfreeon"),Tt.emit("dragfree")))}}vt[4]=0,c.hoverData.down=null,c.hoverData.cxtStarted=!1,c.hoverData.draggingEles=!1,c.hoverData.selecting=!1,c.hoverData.isOverThresholdDrag=!1,c.dragData.didDrag=!1,c.hoverData.dragged=!1,c.hoverData.dragDelta=[],c.hoverData.mdownPos=null,c.hoverData.mdownGPos=null}},!1);var ge=function(fe){if(!c.scrollingPage){var st=c.cy,It=st.zoom(),gt=st.pan(),vt=c.projectIntoViewport(fe.clientX,fe.clientY),Tn=[vt[0]*It+gt.x,vt[1]*It+gt.y];if(c.hoverData.draggingEles||c.hoverData.dragging||c.hoverData.cxtStarted||0!==c.selection[4])return void fe.preventDefault();if(st.panningEnabled()&&st.userPanningEnabled()&&st.zoomingEnabled()&&st.userZoomingEnabled()){var Tt;fe.preventDefault(),c.data.wheelZooming=!0,clearTimeout(c.data.wheelTimeout),c.data.wheelTimeout=setTimeout(function(){c.data.wheelZooming=!1,c.redrawHint("eles",!0),c.redraw()},150),Tt=null!=fe.deltaY?fe.deltaY/-250:null!=fe.wheelDeltaY?fe.wheelDeltaY/1e3:fe.wheelDelta/1e3,Tt*=c.wheelSensitivity,1===fe.deltaMode&&(Tt*=33);var Gn=st.zoom()*Math.pow(10,Tt);"gesturechange"===fe.type&&(Gn=c.gestureStartZoom*fe.scale),st.zoom({level:Gn,renderedPosition:{x:Tn[0],y:Tn[1]}}),st.emit("gesturechange"===fe.type?"pinchzoom":"scrollzoom")}}};c.registerBinding(c.container,"wheel",ge,!0),c.registerBinding(window,"scroll",function(fe){c.scrollingPage=!0,clearTimeout(c.scrollingPageTimeout),c.scrollingPageTimeout=setTimeout(function(){c.scrollingPage=!1},250)},!0),c.registerBinding(c.container,"gesturestart",function(fe){c.gestureStartZoom=c.cy.zoom(),c.hasTouchStarted||fe.preventDefault()},!0),c.registerBinding(c.container,"gesturechange",function(Rt){c.hasTouchStarted||ge(Rt)},!0),c.registerBinding(c.container,"mouseout",function(fe){var st=c.projectIntoViewport(fe.clientX,fe.clientY);c.cy.emit({originalEvent:fe,type:"mouseout",position:{x:st[0],y:st[1]}})},!1),c.registerBinding(c.container,"mouseover",function(fe){var st=c.projectIntoViewport(fe.clientX,fe.clientY);c.cy.emit({originalEvent:fe,type:"mouseover",position:{x:st[0],y:st[1]}})},!1);var Fe,Se,Xe,Ve,je,Qe,it,ct,rt,tt,_t,Dt,yt,xt,Mt,Lt,Vt,xn,kn,Ht,mt=function(fe,st,It,gt){return Math.sqrt((It-fe)*(It-fe)+(gt-st)*(gt-st))},Ze=function(fe,st,It,gt){return(It-fe)*(It-fe)+(gt-st)*(gt-st)};if(c.registerBinding(c.container,"touchstart",xt=function(fe){if(c.hasTouchStarted=!0,_e(fe)){X(),c.touchData.capture=!0,c.data.bgActivePosistion=void 0;var st=c.cy,It=c.touchData.now,gt=c.touchData.earlier;if(fe.touches[0]){var vt=c.projectIntoViewport(fe.touches[0].clientX,fe.touches[0].clientY);It[0]=vt[0],It[1]=vt[1]}if(fe.touches[1]&&(vt=c.projectIntoViewport(fe.touches[1].clientX,fe.touches[1].clientY),It[2]=vt[0],It[3]=vt[1]),fe.touches[2]&&(vt=c.projectIntoViewport(fe.touches[2].clientX,fe.touches[2].clientY),It[4]=vt[0],It[5]=vt[1]),fe.touches[1]){c.touchData.singleTouchMoved=!0,H(c.dragData.touchDragEles);var Tn=c.findContainerClientCoords();_t=Tn[2],Dt=Tn[3],Se=fe.touches[0].clientY-(tt=Tn[1]),Xe=fe.touches[1].clientX-(rt=Tn[0]),Ve=fe.touches[1].clientY-tt,yt=0<=(Fe=fe.touches[0].clientX-rt)&&Fe<=_t&&0<=Xe&&Xe<=_t&&0<=Se&&Se<=Dt&&0<=Ve&&Ve<=Dt;var Tt=st.pan(),rn=st.zoom();if(je=mt(Fe,Se,Xe,Ve),Qe=Ze(Fe,Se,Xe,Ve),ct=[((it=[(Fe+Xe)/2,(Se+Ve)/2])[0]-Tt.x)/rn,(it[1]-Tt.y)/rn],Qe<4e4&&!fe.touches[2]){var Nn=c.findNearestElement(It[0],It[1],!0,!0),cr=c.findNearestElement(It[2],It[3],!0,!0);return Nn&&Nn.isNode()?(Nn.activate().emit({originalEvent:fe,type:"cxttapstart",position:{x:It[0],y:It[1]}}),c.touchData.start=Nn):cr&&cr.isNode()?(cr.activate().emit({originalEvent:fe,type:"cxttapstart",position:{x:It[0],y:It[1]}}),c.touchData.start=cr):st.emit({originalEvent:fe,type:"cxttapstart",position:{x:It[0],y:It[1]}}),c.touchData.start&&(c.touchData.start._private.grabbed=!1),c.touchData.cxt=!0,c.touchData.cxtDragged=!1,c.data.bgActivePosistion=void 0,void c.redraw()}}if(fe.touches[2])st.boxSelectionEnabled()&&fe.preventDefault();else if(!fe.touches[1]&&fe.touches[0]){var Dn=c.findNearestElements(It[0],It[1],!0,!0),Sn=Dn[0];if(null!=Sn&&(Sn.activate(),c.touchData.start=Sn,c.touchData.starts=Dn,c.nodeIsGrabbable(Sn))){var Xr=c.dragData.touchDragEles=st.collection(),Ei=null;c.redrawHint("eles",!0),c.redrawHint("drag",!0),Sn.selected()?(Ei=st.$(function(mo){return mo.selected()&&c.nodeIsGrabbable(mo)}),O(Ei,{addToList:Xr})):R(Sn,{addToList:Xr}),b(Sn);var js=function($a){return{originalEvent:fe,type:$a,position:{x:It[0],y:It[1]}}};Sn.emit(js("grabon")),Ei?Ei.forEach(function(mo){mo.emit(js("grab"))}):Sn.emit(js("grab"))}l(Sn,["touchstart","tapstart","vmousedown"],fe,{x:It[0],y:It[1]}),null==Sn&&(c.data.bgActivePosistion={x:vt[0],y:vt[1]},c.redrawHint("select",!0),c.redraw()),c.touchData.singleTouchMoved=!1,c.touchData.singleTouchStartTime=+new Date,clearTimeout(c.touchData.tapholdTimeout),c.touchData.tapholdTimeout=setTimeout(function(){!1===c.touchData.singleTouchMoved&&!c.pinching&&!c.touchData.selecting&&l(c.touchData.start,["taphold"],fe,{x:It[0],y:It[1]})},c.tapholdDuration)}if(fe.touches.length>=1){for(var Us=c.touchData.startPosition=[],Oi=0;Oi<It.length;Oi++)Us[Oi]=gt[Oi]=It[Oi];var Wi=fe.touches[0];c.touchData.startGPosition=[Wi.clientX,Wi.clientY]}}},!1),c.registerBinding(window,"touchmove",Mt=function(fe){var st=c.touchData.capture;if(st||_e(fe)){var It=c.selection,gt=c.cy,vt=c.touchData.now,Tn=c.touchData.earlier,Tt=gt.zoom();if(fe.touches[0]){var rn=c.projectIntoViewport(fe.touches[0].clientX,fe.touches[0].clientY);vt[0]=rn[0],vt[1]=rn[1]}fe.touches[1]&&(rn=c.projectIntoViewport(fe.touches[1].clientX,fe.touches[1].clientY),vt[2]=rn[0],vt[3]=rn[1]),fe.touches[2]&&(rn=c.projectIntoViewport(fe.touches[2].clientX,fe.touches[2].clientY),vt[4]=rn[0],vt[5]=rn[1]);var fr,Gn=c.touchData.startGPosition;if(st&&fe.touches[0]&&Gn){for(var Nn=[],cr=0;cr<vt.length;cr++)Nn[cr]=vt[cr]-Tn[cr];var Dn=fe.touches[0].clientX-Gn[0],Xr=fe.touches[0].clientY-Gn[1];fr=Dn*Dn+Xr*Xr>=c.touchTapThreshold2}if(st&&c.touchData.cxt){fe.preventDefault();var $a=Ze(Us=fe.touches[0].clientX-rt,Oi=fe.touches[0].clientY-tt,Wi=fe.touches[1].clientX-rt,mo=fe.touches[1].clientY-tt);if($a/Qe>=2.25||$a>=22500){c.touchData.cxt=!1,c.data.bgActivePosistion=void 0,c.redrawHint("select",!0);var Rl={originalEvent:fe,type:"cxttapend",position:{x:vt[0],y:vt[1]}};c.touchData.start?(c.touchData.start.unactivate().emit(Rl),c.touchData.start=null):gt.emit(Rl)}}if(st&&c.touchData.cxt){Rl={originalEvent:fe,type:"cxtdrag",position:{x:vt[0],y:vt[1]}},c.data.bgActivePosistion=void 0,c.redrawHint("select",!0),c.touchData.start?c.touchData.start.emit(Rl):gt.emit(Rl),c.touchData.start&&(c.touchData.start._private.grabbed=!1),c.touchData.cxtDragged=!0;var ns=c.findNearestElement(vt[0],vt[1],!0,!0);(!c.touchData.cxtOver||ns!==c.touchData.cxtOver)&&(c.touchData.cxtOver&&c.touchData.cxtOver.emit({originalEvent:fe,type:"cxtdragout",position:{x:vt[0],y:vt[1]}}),c.touchData.cxtOver=ns,ns&&ns.emit({originalEvent:fe,type:"cxtdragover",position:{x:vt[0],y:vt[1]}}))}else if(st&&fe.touches[2]&&gt.boxSelectionEnabled())fe.preventDefault(),c.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,c.touchData.selecting||gt.emit({originalEvent:fe,type:"boxstart",position:{x:vt[0],y:vt[1]}}),c.touchData.selecting=!0,c.touchData.didSelect=!0,It[4]=1,It&&0!==It.length&&void 0!==It[0]?(It[2]=(vt[0]+vt[2]+vt[4])/3,It[3]=(vt[1]+vt[3]+vt[5])/3):(It[0]=(vt[0]+vt[2]+vt[4])/3,It[1]=(vt[1]+vt[3]+vt[5])/3,It[2]=(vt[0]+vt[2]+vt[4])/3+1,It[3]=(vt[1]+vt[3]+vt[5])/3+1),c.redrawHint("select",!0),c.redraw();else if(st&&fe.touches[1]&&!c.touchData.didSelect&&gt.zoomingEnabled()&&gt.panningEnabled()&&gt.userZoomingEnabled()&&gt.userPanningEnabled()){if(fe.preventDefault(),c.data.bgActivePosistion=void 0,c.redrawHint("select",!0),oo=c.dragData.touchDragEles){c.redrawHint("drag",!0);for(var Ri=0;Ri<oo.length;Ri++){var Df=oo[Ri]._private;Df.grabbed=!1,Df.rscratch.inDragLayer=!1}}var Us,Oi,Wi,mo,vo=c.touchData.start,br=mt(Us=fe.touches[0].clientX-rt,Oi=fe.touches[0].clientY-tt,Wi=fe.touches[1].clientX-rt,mo=fe.touches[1].clientY-tt),px=br/je;if(yt){var _u=(Us-Fe+(Wi-Xe))/2,vx=(Oi-Se+(mo-Ve))/2,Cc=gt.zoom(),Xd=Cc*px,Cf=gt.pan(),Sf=ct[0]*Cc+Cf.x,ua=ct[1]*Cc+Cf.y,yx={x:-Xd/Cc*(Sf-Cf.x-_u)+Sf,y:-Xd/Cc*(ua-Cf.y-vx)+ua};vo&&vo.active()&&(H(oo=c.dragData.touchDragEles),c.redrawHint("drag",!0),c.redrawHint("eles",!0),vo.unactivate().emit("freeon"),oo.emit("free"),c.dragData.didDrag&&(vo.emit("dragfreeon"),oo.emit("dragfree"))),gt.viewport({zoom:Xd,pan:yx,cancelOnFailedZoom:!0}),gt.emit("pinchzoom"),je=br,Fe=Us,Se=Oi,Xe=Wi,Ve=mo,c.pinching=!0}fe.touches[0]&&(rn=c.projectIntoViewport(fe.touches[0].clientX,fe.touches[0].clientY),vt[0]=rn[0],vt[1]=rn[1]),fe.touches[1]&&(rn=c.projectIntoViewport(fe.touches[1].clientX,fe.touches[1].clientY),vt[2]=rn[0],vt[3]=rn[1]),fe.touches[2]&&(rn=c.projectIntoViewport(fe.touches[2].clientX,fe.touches[2].clientY),vt[4]=rn[0],vt[5]=rn[1])}else if(fe.touches[0]&&!c.touchData.didSelect){var Gs=c.touchData.start,Fg=c.touchData.last;if(!c.hoverData.draggingEles&&!c.swipePanning&&(ns=c.findNearestElement(vt[0],vt[1],!0,!0)),st&&null!=Gs&&fe.preventDefault(),st&&null!=Gs&&c.nodeIsDraggable(Gs))if(fr){var oo=c.dragData.touchDragEles,Ky=!c.dragData.didDrag;Ky&&O(oo,{inDragLayer:!0}),c.dragData.didDrag=!0;var xu={x:0,y:0};pe(Nn[0])&&pe(Nn[1])&&(xu.x+=Nn[0],xu.y+=Nn[1],Ky)&&(c.redrawHint("eles",!0),(rs=c.touchData.dragDelta)&&pe(rs[0])&&pe(rs[1])&&(xu.x+=rs[0],xu.y+=rs[1])),c.hoverData.draggingEles=!0,oo.silentShift(xu).emit("position drag"),c.redrawHint("drag",!0),c.touchData.startPosition[0]==Tn[0]&&c.touchData.startPosition[1]==Tn[1]&&c.redrawHint("eles",!0),c.redraw()}else{var rs;0===(rs=c.touchData.dragDelta=c.touchData.dragDelta||[]).length?(rs.push(Nn[0]),rs.push(Nn[1])):(rs[0]+=Nn[0],rs[1]+=Nn[1])}if(l(Gs||ns,["touchmove","tapdrag","vmousemove"],fe,{x:vt[0],y:vt[1]}),(!Gs||!Gs.grabbed())&&ns!=Fg&&(Fg&&Fg.emit({originalEvent:fe,type:"tapdragout",position:{x:vt[0],y:vt[1]}}),ns&&ns.emit({originalEvent:fe,type:"tapdragover",position:{x:vt[0],y:vt[1]}})),c.touchData.last=ns,st)for(Ri=0;Ri<vt.length;Ri++)vt[Ri]&&c.touchData.startPosition[Ri]&&fr&&(c.touchData.singleTouchMoved=!0);st&&(null==Gs||Gs.pannable())&&gt.panningEnabled()&&gt.userPanningEnabled()&&(f(Gs,c.touchData.starts)&&(fe.preventDefault(),c.data.bgActivePosistion||(c.data.bgActivePosistion=Yn(c.touchData.startPosition)),c.swipePanning?(gt.panBy({x:Nn[0]*Tt,y:Nn[1]*Tt}),gt.emit("dragpan")):fr&&(c.swipePanning=!0,gt.panBy({x:Dn*Tt,y:Xr*Tt}),gt.emit("dragpan"),Gs&&(Gs.unactivate(),c.redrawHint("select",!0),c.touchData.start=null))),rn=c.projectIntoViewport(fe.touches[0].clientX,fe.touches[0].clientY),vt[0]=rn[0],vt[1]=rn[1])}for(cr=0;cr<vt.length;cr++)Tn[cr]=vt[cr];st&&fe.touches.length>0&&!c.hoverData.draggingEles&&!c.swipePanning&&null!=c.data.bgActivePosistion&&(c.data.bgActivePosistion=void 0,c.redrawHint("select",!0),c.redraw())}},!1),c.registerBinding(window,"touchcancel",Lt=function(fe){var st=c.touchData.start;c.touchData.capture=!1,st&&st.unactivate()}),c.registerBinding(window,"touchend",Vt=function(fe){var st=c.touchData.start;if(c.touchData.capture){0===fe.touches.length&&(c.touchData.capture=!1),fe.preventDefault();var gt=c.selection;c.swipePanning=!1,c.hoverData.draggingEles=!1;var fr,vt=c.cy,Tn=vt.zoom(),Tt=c.touchData.now,rn=c.touchData.earlier;if(fe.touches[0]){var Gn=c.projectIntoViewport(fe.touches[0].clientX,fe.touches[0].clientY);Tt[0]=Gn[0],Tt[1]=Gn[1]}if(fe.touches[1]&&(Gn=c.projectIntoViewport(fe.touches[1].clientX,fe.touches[1].clientY),Tt[2]=Gn[0],Tt[3]=Gn[1]),fe.touches[2]&&(Gn=c.projectIntoViewport(fe.touches[2].clientX,fe.touches[2].clientY),Tt[4]=Gn[0],Tt[5]=Gn[1]),st&&st.unactivate(),c.touchData.cxt){if(fr={originalEvent:fe,type:"cxttapend",position:{x:Tt[0],y:Tt[1]}},st?st.emit(fr):vt.emit(fr),!c.touchData.cxtDragged){var Nn={originalEvent:fe,type:"cxttap",position:{x:Tt[0],y:Tt[1]}};st?st.emit(Nn):vt.emit(Nn)}return c.touchData.start&&(c.touchData.start._private.grabbed=!1),c.touchData.cxt=!1,c.touchData.start=null,void c.redraw()}if(!fe.touches[2]&&vt.boxSelectionEnabled()&&c.touchData.selecting){c.touchData.selecting=!1;var cr=vt.collection(c.getAllInBox(gt[0],gt[1],gt[2],gt[3]));gt[0]=void 0,gt[1]=void 0,gt[2]=void 0,gt[3]=void 0,gt[4]=0,c.redrawHint("select",!0),vt.emit({type:"boxend",originalEvent:fe,position:{x:Tt[0],y:Tt[1]}}),cr.emit("box").stdFilter(function(Ec){return Ec.selectable()&&!Ec.selected()}).select().emit("boxselect"),cr.nonempty()&&c.redrawHint("eles",!0),c.redraw()}if(st?.unactivate(),fe.touches[2])c.data.bgActivePosistion=void 0,c.redrawHint("select",!0);else if(!fe.touches[1]&&!fe.touches[0]&&!fe.touches[0]){c.data.bgActivePosistion=void 0,c.redrawHint("select",!0);var Sn=c.dragData.touchDragEles;if(null!=st){var Xr=st._private.grabbed;H(Sn),c.redrawHint("drag",!0),c.redrawHint("eles",!0),Xr&&(st.emit("freeon"),Sn.emit("free"),c.dragData.didDrag&&(st.emit("dragfreeon"),Sn.emit("dragfree"))),l(st,["touchend","tapend","vmouseup","tapdragout"],fe,{x:Tt[0],y:Tt[1]}),st.unactivate(),c.touchData.start=null}else{var Ei=c.findNearestElement(Tt[0],Tt[1],!0,!0);l(Ei,["touchend","tapend","vmouseup","tapdragout"],fe,{x:Tt[0],y:Tt[1]})}var js=c.touchData.startPosition[0]-Tt[0],Oi=c.touchData.startPosition[1]-Tt[1],$a=(js*js+Oi*Oi)*Tn*Tn;c.touchData.singleTouchMoved||(st||vt.$(":selected").unselect(["tapunselect"]),l(st,["tap","vclick"],fe,{x:Tt[0],y:Tt[1]}),xn=!1,fe.timeStamp-Ht<=vt.multiClickDebounceTime()?(kn&&clearTimeout(kn),xn=!0,Ht=null,l(st,["dbltap","vdblclick"],fe,{x:Tt[0],y:Tt[1]})):(kn=setTimeout(function(){xn||l(st,["onetap","voneclick"],fe,{x:Tt[0],y:Tt[1]})},vt.multiClickDebounceTime()),Ht=fe.timeStamp)),null!=st&&!c.dragData.didDrag&&st._private.selectable&&$a<c.touchTapThreshold2&&!c.pinching&&("single"===vt.selectionType()?(vt.$(s).unmerge(st).unselect(["tapunselect"]),st.select(["tapselect"])):st.selected()?st.unselect(["tapunselect"]):st.select(["tapselect"]),c.redrawHint("eles",!0)),c.touchData.singleTouchMoved=!0}for(var Il=0;Il<Tt.length;Il++)rn[Il]=Tt[Il];c.dragData.didDrag=!1,0===fe.touches.length&&(c.touchData.dragDelta=[],c.touchData.startPosition=null,c.touchData.startGPosition=null,c.touchData.didSelect=!1),fe.touches.length<2&&(1===fe.touches.length&&(c.touchData.startGPosition=[fe.touches[0].clientX,fe.touches[0].clientY]),c.pinching=!1,c.redrawHint("eles",!0),c.redraw())}},!1),typeof TouchEvent>"u"){var Ft=[],pn=function(fe){return{clientX:fe.clientX,clientY:fe.clientY,force:1,identifier:fe.pointerId,pageX:fe.pageX,pageY:fe.pageY,radiusX:fe.width/2,radiusY:fe.height/2,screenX:fe.screenX,screenY:fe.screenY,target:fe.target}},cn=function(fe){for(var st=0;st<Ft.length;st++)if(Ft[st].event.pointerId===fe.pointerId)return void Ft.splice(st,1)},An=function(fe){fe.touches=Ft.map(function(st){return st.touch})},mn=function(fe){return"mouse"===fe.pointerType||4===fe.pointerType};c.registerBinding(c.container,"pointerdown",function(Rt){mn(Rt)||(Rt.preventDefault(),Ft.push(function(fe){return{event:fe,touch:pn(fe)}}(Rt)),An(Rt),xt(Rt))}),c.registerBinding(c.container,"pointerup",function(Rt){mn(Rt)||(cn(Rt),An(Rt),Vt(Rt))}),c.registerBinding(c.container,"pointercancel",function(Rt){mn(Rt)||(cn(Rt),An(Rt),Lt())}),c.registerBinding(c.container,"pointermove",function(Rt){var fe,st;mn(Rt)||(Rt.preventDefault(),fe=Rt,(st=Ft.filter(function(It){return It.event.pointerId===fe.pointerId})[0]).event=fe,st.touch=pn(fe),An(Rt),Mt(Rt))})}};var ni={generatePolygon:function(c,s){return this.nodeShapes[c]={renderer:this,name:c,points:s,draw:function(d,f,p,g,y){this.renderer.nodeShapeImpl("polygon",d,f,p,g,y,this.points)},intersectLine:function(d,f,p,g,y,w,b){return ml(y,w,this.points,d,f,p/2,g/2,b)},checkPoint:function(d,f,p,g,y,w,b){return Ko(d,f,this.points,w,b,g,y,[0,-1],p)}}},generateEllipse:function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(s,l,d,f,p){this.renderer.nodeShapeImpl(this.name,s,l,d,f,p)},intersectLine:function(s,l,d,f,p,g,y){return function(s,l,d,f,p,g){var y=d-s,w=f-l;y/=p,w/=g;var b=Math.sqrt(y*y+w*w),_=b-1;if(_<0)return[];var E=_/b;return[(d-s)*E+s,(f-l)*E+l]}(p,g,s,l,d/2+y,f/2+y)},checkPoint:function(s,l,d,f,p,g,y){return Ra(s,l,f,p,g,y,d)}}},generateRoundPolygon:function(c,s){for(var l=new Array(2*s.length),d=0;d<s.length/2;d++){var p,f=2*d;p=d<s.length/2-1?2*(d+1):0,l[4*d]=s[f],l[4*d+1]=s[f+1];var g=s[p]-s[f],y=s[p+1]-s[f+1],w=Math.sqrt(g*g+y*y);l[4*d+2]=g/w,l[4*d+3]=y/w}return this.nodeShapes[c]={renderer:this,name:c,points:l,draw:function(_,E,S,O,R){this.renderer.nodeShapeImpl("round-polygon",_,E,S,O,R,this.points)},intersectLine:function(_,E,S,O,R,H,W){return function(s,l,d,f,p,g,y,w){for(var _,b=[],E=new Array(d.length),S=g/2,O=y/2,R=St(g,y),H=0;H<d.length/4;H++){var X,W;W=0===H?d.length-2:4*H-2,X=4*H+2;var ne=f+S*d[4*H],re=p+O*d[4*H+1],De=R/Math.tan(Math.acos(-d[W]*d[X]-d[W+1]*d[X+1])/2),Ce=ne-De*d[W],le=re-De*d[W+1],_e=ne+De*d[X],he=re+De*d[X+1];0===H?(E[d.length-2]=Ce,E[d.length-1]=le):(E[4*H-2]=Ce,E[4*H-1]=le),E[4*H]=_e,E[4*H+1]=he;var Te=d[W+1],Ae=-d[W];Te*d[X]+Ae*d[X+1]<0&&(Te*=-1,Ae*=-1),0!==(_=_s(s,l,f,p,Ce+Te*R,le+Ae*R,R)).length&&b.push(_[0],_[1])}for(var Xe=0;Xe<E.length/4;Xe++)0!==(_=Ro(s,l,f,p,E[4*Xe],E[4*Xe+1],E[4*Xe+2],E[4*Xe+3],!1)).length&&b.push(_[0],_[1]);if(b.length>2){for(var Ve=[b[0],b[1]],je=Math.pow(Ve[0]-s,2)+Math.pow(Ve[1]-l,2),Qe=1;Qe<b.length/2;Qe++){var it=Math.pow(b[2*Qe]-s,2)+Math.pow(b[2*Qe+1]-l,2);it<=je&&(Ve[0]=b[2*Qe],Ve[1]=b[2*Qe+1],je=it)}return Ve}return b}(R,H,this.points,_,E,S,O)},checkPoint:function(_,E,S,O,R,H,W){return function(s,l,d,f,p,g,y){for(var w=new Array(d.length),b=g/2,_=y/2,E=St(g,y),S=E*E,O=0;O<d.length/4;O++){var H,R;R=0===O?d.length-2:4*O-2,H=4*O+2;var W=f+b*d[4*O],X=p+_*d[4*O+1],re=E/Math.tan(Math.acos(-d[R]*d[H]-d[R+1]*d[H+1])/2),se=W-re*d[R],De=X-re*d[R+1],Ce=W+re*d[H],le=X+re*d[H+1];w[4*O]=se,w[4*O+1]=De,w[4*O+2]=Ce,w[4*O+3]=le;var _e=d[R+1],he=-d[R];_e*d[H]+he*d[H+1]<0&&(_e*=-1,he*=-1);var ge=De+he*E;if(Math.pow(se+_e*E-s,2)+Math.pow(ge-l,2)<=S)return!0}return Mr(s,l,w)}(_,E,this.points,H,W,O,R)}}},generateRoundRectangle:function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Zi(4,0),draw:function(s,l,d,f,p){this.renderer.nodeShapeImpl(this.name,s,l,d,f,p)},intersectLine:function(s,l,d,f,p,g,y){return Ia(p,g,s,l,d,f,y)},checkPoint:function(s,l,d,f,p,g,y){var w=dd(f,p),b=2*w;return!!(Ko(s,l,this.points,g,y,f,p-b,[0,-1],d)||Ko(s,l,this.points,g,y,f-b,p,[0,-1],d)||Ra(s,l,b,b,g-f/2+w,y-p/2+w,d)||Ra(s,l,b,b,g+f/2-w,y-p/2+w,d)||Ra(s,l,b,b,g+f/2-w,y+p/2-w,d)||Ra(s,l,b,b,g-f/2+w,y+p/2-w,d))}}},generateCutRectangle:function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:8,points:Zi(4,0),draw:function(s,l,d,f,p){this.renderer.nodeShapeImpl(this.name,s,l,d,f,p)},generateCutTrianglePts:function(s,l,d,f){var p=this.cornerLength,g=l/2,y=s/2,w=d-y,b=d+y,_=f-g,E=f+g;return{topLeft:[w,_+p,w+p,_,w+p,_+p],topRight:[b-p,_,b,_+p,b-p,_+p],bottomRight:[b,E-p,b-p,E,b-p,E-p],bottomLeft:[w+p,E,w,E-p,w+p,E-p]}},intersectLine:function(s,l,d,f,p,g,y){var w=this.generateCutTrianglePts(d+2*y,f+2*y,s,l),b=[].concat.apply([],[w.topLeft.splice(0,4),w.topRight.splice(0,4),w.bottomRight.splice(0,4),w.bottomLeft.splice(0,4)]);return ml(p,g,b,s,l)},checkPoint:function(s,l,d,f,p,g,y){if(Ko(s,l,this.points,g,y,f,p-2*this.cornerLength,[0,-1],d)||Ko(s,l,this.points,g,y,f-2*this.cornerLength,p,[0,-1],d))return!0;var w=this.generateCutTrianglePts(f,p,g,y);return Mr(s,l,w.topLeft)||Mr(s,l,w.topRight)||Mr(s,l,w.bottomRight)||Mr(s,l,w.bottomLeft)}}},generateBarrel:function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Zi(4,0),draw:function(s,l,d,f,p){this.renderer.nodeShapeImpl(this.name,s,l,d,f,p)},intersectLine:function(s,l,d,f,p,g,y){var E=this.generateBarrelBezierPts(d+2*y,f+2*y,s,l),S=function(H){var W=Yo({x:H[0],y:H[1]},{x:H[2],y:H[3]},{x:H[4],y:H[5]},.15),X=Yo({x:H[0],y:H[1]},{x:H[2],y:H[3]},{x:H[4],y:H[5]},.5),ne=Yo({x:H[0],y:H[1]},{x:H[2],y:H[3]},{x:H[4],y:H[5]},.85);return[H[0],H[1],W.x,W.y,X.x,X.y,ne.x,ne.y,H[4],H[5]]},O=[].concat(S(E.topLeft),S(E.topRight),S(E.bottomRight),S(E.bottomLeft));return ml(p,g,O,s,l)},generateBarrelBezierPts:function(s,l,d,f){var p=l/2,g=s/2,y=d-g,w=d+g,b=f-p,_=f+p,E=Xc(s,l),S=E.heightOffset,O=E.widthOffset,R=E.ctrlPtOffsetPct*s,H={topLeft:[y,b+S,y+R,b,y+O,b],topRight:[w-O,b,w-R,b,w,b+S],bottomRight:[w,_-S,w-R,_,w-O,_],bottomLeft:[y+O,_,y+R,_,y,_-S]};return H.topLeft.isTop=!0,H.topRight.isTop=!0,H.bottomLeft.isBottom=!0,H.bottomRight.isBottom=!0,H},checkPoint:function(s,l,d,f,p,g,y){var w=Xc(f,p),_=w.widthOffset;if(Ko(s,l,this.points,g,y,f,p-2*w.heightOffset,[0,-1],d)||Ko(s,l,this.points,g,y,f-2*_,p,[0,-1],d))return!0;for(var E=this.generateBarrelBezierPts(f,p,g,y),S=function(le,_e,he){var Te=he[4],Ae=he[2],ge=he[0],Fe=he[5],Se=he[1],Xe=Math.min(Te,ge),Ve=Math.max(Te,ge),je=Math.min(Fe,Se),Qe=Math.max(Fe,Se);if(Xe<=le&&le<=Ve&&je<=_e&&_e<=Qe){var it=function(s,l,d){return[s-2*l+d,2*(l-s),s]}(Te,Ae,ge),ct=function(s,l,d,f){var p=l*l-4*s*(d-=f);if(p<0)return[];var g=Math.sqrt(p),y=2*s;return[(-l+g)/y,(-l-g)/y]}(it[0],it[1],it[2],le),rt=ct.filter(function(tt){return 0<=tt&&tt<=1});if(rt.length>0)return rt[0]}return null},O=Object.keys(E),R=0;R<O.length;R++){var W=E[O[R]],X=S(s,l,W);if(null!=X){var De=tr(W[5],W[3],W[1],X);if(W.isTop&&De<=l||W.isBottom&&l<=De)return!0}}return!1}}},generateBottomRoundrectangle:function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Zi(4,0),draw:function(s,l,d,f,p){this.renderer.nodeShapeImpl(this.name,s,l,d,f,p)},intersectLine:function(s,l,d,f,p,g,y){var b=l-(f/2+y),S=Ro(p,g,s,l,s-(d/2+y),b,s+(d/2+y),b,!1);return S.length>0?S:Ia(p,g,s,l,d,f,y)},checkPoint:function(s,l,d,f,p,g,y){var w=dd(f,p),b=2*w;if(Ko(s,l,this.points,g,y,f,p-b,[0,-1],d)||Ko(s,l,this.points,g,y,f-b,p,[0,-1],d))return!0;var _=f/2+2*d,E=p/2+2*d;return!!(Mr(s,l,[g-_,y-E,g-_,y,g+_,y,g+_,y-E])||Ra(s,l,b,b,g+f/2-w,y+p/2-w,d)||Ra(s,l,b,b,g-f/2+w,y+p/2-w,d))}}},registerNodeShapes:function(){var c=this.nodeShapes={},s=this;this.generateEllipse(),this.generatePolygon("triangle",Zi(3,0)),this.generateRoundPolygon("round-triangle",Zi(3,0)),this.generatePolygon("rectangle",Zi(4,0)),c.square=c.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var l=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",l),this.generateRoundPolygon("round-diamond",l),this.generatePolygon("pentagon",Zi(5,0)),this.generateRoundPolygon("round-pentagon",Zi(5,0)),this.generatePolygon("hexagon",Zi(6,0)),this.generateRoundPolygon("round-hexagon",Zi(6,0)),this.generatePolygon("heptagon",Zi(7,0)),this.generateRoundPolygon("round-heptagon",Zi(7,0)),this.generatePolygon("octagon",Zi(8,0)),this.generateRoundPolygon("round-octagon",Zi(8,0));var d=new Array(20),f=vl(5,0),p=vl(5,Math.PI/5),g=.5*(3-Math.sqrt(5));g*=1.57;for(var y=0;y<p.length/2;y++)p[2*y]*=g,p[2*y+1]*=g;for(y=0;y<5;y++)d[4*y]=f[2*y],d[4*y+1]=f[2*y+1],d[4*y+2]=p[2*y],d[4*y+3]=p[2*y+1];d=Yc(d),this.generatePolygon("star",d),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var w=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",w),this.generateRoundPolygon("round-tag",w),c.makePolygon=function(b){var S,E="polygon-"+b.join("$");return(S=this[E])?S:s.generatePolygon(E,b)}}},Hd={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(c){c=c||od();var s=this;void 0===s.averageRedrawTime&&(s.averageRedrawTime=0),void 0===s.lastRedrawTime&&(s.lastRedrawTime=0),void 0===s.lastDrawTime&&(s.lastDrawTime=0),s.requestedFrame=!0,s.renderOptions=c},beforeRender:function(c,s){if(!this.destroyed){null==s&&Sr("Priority is not optional for beforeRender");var l=this.beforeRenderCallbacks;l.push({fn:c,priority:s}),l.sort(function(d,f){return f.priority-d.priority})}}},Dy=function(s,l,d){for(var f=s.beforeRenderCallbacks,p=0;p<f.length;p++)f[p].fn(l,d)};Hd.startRenderLoop=function(){var c=this,s=c.cy;c.renderLoopStarted||(c.renderLoopStarted=!0,ll(function d(f){if(!c.destroyed){if(!s.batching())if(c.requestedFrame&&!c.skipFrame){Dy(c,!0,f);var p=Si();c.render(c.renderOptions);var g=c.lastDrawTime=Si();void 0===c.averageRedrawTime&&(c.averageRedrawTime=g-p),void 0===c.redrawCount&&(c.redrawCount=0),c.redrawCount++,void 0===c.redrawTotalTime&&(c.redrawTotalTime=0);var y=g-p;c.redrawTotalTime+=y,c.lastRedrawTime=y,c.averageRedrawTime=c.averageRedrawTime/2+y/2,c.requestedFrame=!1}else Dy(c,!1,f);c.skipFrame=!1,ll(d)}}))};var yg=function(s){this.init(s)},Tl=yg.prototype;Tl.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],Tl.init=function(c){var s=this;s.options=c,s.cy=c.cy;var l=s.container=c.cy.container();if(V){var d=V.document,f=d.head,p="__________cytoscape_stylesheet",g="__________cytoscape_container",y=null!=d.getElementById(p);if(l.className.indexOf(g)<0&&(l.className=(l.className||"")+" "+g),!y){var w=d.createElement("style");w.id=p,w.innerHTML="."+g+" { position: relative; }",f.insertBefore(w,f.children[0])}"static"===V.getComputedStyle(l).getPropertyValue("position")&&ur("A Cytoscape container has style position:static and so can not use UI extensions properly")}s.selection=[void 0,void 0,void 0,void 0,0],s.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],s.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},s.dragData={possibleDragElements:[]},s.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},s.redraws=0,s.showFps=c.showFps,s.debug=c.debug,s.hideEdgesOnViewport=c.hideEdgesOnViewport,s.textureOnViewport=c.textureOnViewport,s.wheelSensitivity=c.wheelSensitivity,s.motionBlurEnabled=c.motionBlur,s.forcedPixelRatio=pe(c.pixelRatio)?c.pixelRatio:null,s.motionBlur=c.motionBlur,s.motionBlurOpacity=c.motionBlurOpacity,s.motionBlurTransparency=1-s.motionBlurOpacity,s.motionBlurPxRatio=1,s.mbPxRBlurry=1,s.minMbLowQualFrames=4,s.fullQualityMb=!1,s.clearedForMotionBlur=[],s.desktopTapThreshold=c.desktopTapThreshold,s.desktopTapThreshold2=c.desktopTapThreshold*c.desktopTapThreshold,s.touchTapThreshold=c.touchTapThreshold,s.touchTapThreshold2=c.touchTapThreshold*c.touchTapThreshold,s.tapholdDuration=500,s.bindings=[],s.beforeRenderCallbacks=[],s.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},s.registerNodeShapes(),s.registerArrowShapes(),s.registerCalculationListeners()},Tl.notify=function(c,s){var l=this,d=l.cy;if(!this.destroyed){if("init"===c)return void l.load();if("destroy"===c)return void l.destroy();("add"===c||"remove"===c||"move"===c&&d.hasCompoundNodes()||"load"===c||"zorder"===c||"mount"===c)&&l.invalidateCachedZSortedEles(),"viewport"===c&&l.redrawHint("select",!0),("load"===c||"resize"===c||"mount"===c)&&(l.invalidateContainerClientCoordsCache(),l.matchCanvasSize(l.container)),l.redrawHint("eles",!0),l.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}},Tl.destroy=function(){var c=this;c.destroyed=!0,c.cy.stopAnimationLoop();for(var s=0;s<c.bindings.length;s++){var l=c.bindings[s],f=l.target;(f.off||f.removeEventListener).apply(f,l.args)}if(c.bindings=[],c.beforeRenderCallbacks=[],c.onUpdateEleCalcsFns=[],c.removeObserver&&c.removeObserver.disconnect(),c.styleObserver&&c.styleObserver.disconnect(),c.resizeObserver&&c.resizeObserver.disconnect(),c.labelCalcDiv)try{document.body.removeChild(c.labelCalcDiv)}catch{}},Tl.isHeadless=function(){return!1},[wy,mg,vg,yc,ni,Hd].forEach(function(c){Zt(Tl,c)});var bg=1e3/60,Cy_setupDequeueing=function(s){return function(){var d=this,f=this.renderer;if(!d.dequeueingSetup){d.dequeueingSetup=!0;var p=T.default(function(){f.redrawHint("eles",!0),f.redrawHint("drag",!0),f.redraw()},s.deqRedrawThreshold);f.beforeRender(function(b,_){var E=Si(),S=f.averageRedrawTime,O=f.lastRedrawTime,R=[],H=f.cy.extent(),W=f.getPixelRatio();for(b||f.flushRenderedStyleQueue();;){var X=Si(),ne=X-E,re=X-_;if(O<bg){if(re>=s.deqFastCost*(bg-(b?S:0)))break}else if(b){if(ne>=s.deqCost*O||ne>=s.deqAvgCost*S)break}else if(re>=s.deqNoDrawCost*bg)break;var De=s.deq(d,W,H);if(!(De.length>0))break;for(var Ce=0;Ce<De.length;Ce++)R.push(De[Ce])}R.length>0&&(s.onDeqd(d,R),!b&&s.shouldRedraw(d,R,W,H)&&p())},(s.priority||$c)(d))}}},nx=function(){function c(s){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gc;j(this,c),this.idsByKey=new co,this.keyForId=new co,this.cachesByLvl=new co,this.lvls=[],this.getKey=s,this.doesEleInvalidateKey=l}return ae(c,[{key:"getIdsFor",value:function(l){null==l&&Sr("Can not get id list for null key");var d=this.idsByKey,f=this.idsByKey.get(l);return f||(f=new ka,d.set(l,f)),f}},{key:"addIdForKey",value:function(l,d){null!=l&&this.getIdsFor(l).add(d)}},{key:"deleteIdForKey",value:function(l,d){null!=l&&this.getIdsFor(l).delete(d)}},{key:"getNumberOfIdsForKey",value:function(l){return null==l?0:this.getIdsFor(l).size}},{key:"updateKeyMappingFor",value:function(l){var d=l.id(),f=this.keyForId.get(d),p=this.getKey(l);this.deleteIdForKey(f,d),this.addIdForKey(p,d),this.keyForId.set(d,p)}},{key:"deleteKeyMappingFor",value:function(l){var d=l.id(),f=this.keyForId.get(d);this.deleteIdForKey(f,d),this.keyForId.delete(d)}},{key:"keyHasChangedFor",value:function(l){var d=l.id();return this.keyForId.get(d)!==this.getKey(l)}},{key:"isInvalid",value:function(l){return this.keyHasChangedFor(l)||this.doesEleInvalidateKey(l)}},{key:"getCachesAt",value:function(l){var d=this.cachesByLvl,f=this.lvls,p=d.get(l);return p||(p=new co,d.set(l,p),f.push(l)),p}},{key:"getCache",value:function(l,d){return this.getCachesAt(d).get(l)}},{key:"get",value:function(l,d){var f=this.getKey(l),p=this.getCache(f,d);return null!=p&&this.updateKeyMappingFor(l),p}},{key:"getForCachedKey",value:function(l,d){var f=this.keyForId.get(l.id());return this.getCache(f,d)}},{key:"hasCache",value:function(l,d){return this.getCachesAt(d).has(l)}},{key:"has",value:function(l,d){var f=this.getKey(l);return this.hasCache(f,d)}},{key:"setCache",value:function(l,d,f){f.key=l,this.getCachesAt(d).set(l,f)}},{key:"set",value:function(l,d,f){var p=this.getKey(l);this.setCache(p,d,f),this.updateKeyMappingFor(l)}},{key:"deleteCache",value:function(l,d){this.getCachesAt(d).delete(l)}},{key:"delete",value:function(l,d){var f=this.getKey(l);this.deleteCache(f,d)}},{key:"invalidateKey",value:function(l){var d=this;this.lvls.forEach(function(f){return d.deleteCache(l,f)})}},{key:"invalidate",value:function(l){var d=l.id(),f=this.keyForId.get(d);this.deleteKeyMappingFor(l);var p=this.doesEleInvalidateKey(l);return p&&this.invalidateKey(f),p||0===this.getNumberOfIdsForKey(f)}}]),c}(),vu={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},Eg=yi({getKey:null,doesEleInvalidateKey:Gc,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:ms,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),bc=function(s,l){var d=this;d.renderer=s,d.onDequeues=[];var f=Eg(l);Zt(d,f),d.lookup=new nx(f.getKey,f.doesEleInvalidateKey),d.setupDequeueing()},xi=bc.prototype;xi.reasons=vu,xi.getTextureQueue=function(c){var s=this;return s.eleImgCaches=s.eleImgCaches||{},s.eleImgCaches[c]=s.eleImgCaches[c]||[]},xi.getRetiredTextureQueue=function(c){var l=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return l[c]=l[c]||[]},xi.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new M.default(function(l,d){return d.reqs-l.reqs})},xi.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},xi.getElement=function(c,s,l,d,f){var p=this,g=this.renderer,y=g.cy.zoom(),w=this.lookup;if(!s||0===s.w||0===s.h||isNaN(s.w)||isNaN(s.h)||!c.visible()||c.removed()||!p.allowEdgeTxrCaching&&c.isEdge()||!p.allowParentTxrCaching&&c.isParent())return null;if(null==d&&(d=Math.ceil(Jr(y*l))),d<-4)d=-4;else if(y>=7.99||d>3)return null;var b=Math.pow(2,d),_=s.h*b,E=s.w*b,S=g.eleTextBiggerThanMin(c,b);if(!this.isVisible(c,S))return null;var R,O=w.get(c,d);if(O&&O.invalidated&&(O.invalidated=!1,O.texture.invalidatedWidth-=O.width),O)return O;if(R=_<=25?25:_<=50?50:50*Math.ceil(_/50),_>1024||E>1024)return null;var H=p.getTextureQueue(R),W=H[H.length-2],X=function(){return p.recycleTexture(R,E)||p.addTexture(R,E)};W||(W=H[H.length-1]),W||(W=X()),W.width-W.usedWidth<E&&(W=X());for(var Ce,ne=function(Ve){return Ve&&Ve.scaledLabelShown===S},re=f&&f===vu.dequeue,se=f&&f===vu.highQuality,De=f&&f===vu.downscale,le=d+1;le<=3;le++){var _e=w.get(c,le);if(_e){Ce=_e;break}}var he=Ce&&Ce.level===d+1?Ce:null,Te=function(){W.context.drawImage(he.texture.canvas,he.x,0,he.width,he.height,W.usedWidth,0,E,_)};if(W.context.setTransform(1,0,0,1,0,0),W.context.clearRect(W.usedWidth,0,E,R),ne(he))Te();else if(ne(Ce)){if(!se)return p.queueElement(c,Ce.level-1),Ce;for(var Ae=Ce.level;Ae>d;Ae--)he=p.getElement(c,s,l,Ae,vu.downscale);Te()}else{var ge;if(!re&&!se&&!De)for(var Fe=d-1;Fe>=-4;Fe--){var Se=w.get(c,Fe);if(Se){ge=Se;break}}if(ne(ge))return p.queueElement(c,d),ge;W.context.translate(W.usedWidth,0),W.context.scale(b,b),this.drawElement(W.context,c,s,S,!1),W.context.scale(1/b,1/b),W.context.translate(-W.usedWidth,0)}return O={x:W.usedWidth,texture:W,level:d,scale:b,width:E,height:_,scaledLabelShown:S},W.usedWidth+=Math.ceil(E+8),W.eleCaches.push(O),w.set(c,d,O),p.checkTextureFullness(W),O},xi.invalidateElements=function(c){for(var s=0;s<c.length;s++)this.invalidateElement(c[s])},xi.invalidateElement=function(c){var s=this,l=s.lookup,d=[];if(l.isInvalid(c)){for(var p=-4;p<=3;p++){var g=l.getForCachedKey(c,p);g&&d.push(g)}if(l.invalidate(c))for(var w=0;w<d.length;w++){var b=d[w],_=b.texture;_.invalidatedWidth+=b.width,b.invalidated=!0,s.checkTextureUtility(_)}s.removeFromQueue(c)}},xi.checkTextureUtility=function(c){c.invalidatedWidth>=.2*c.width&&this.retireTexture(c)},xi.checkTextureFullness=function(c){var l=this.getTextureQueue(c.height);c.usedWidth/c.width>.8&&c.fullnessChecks>=10?ia(l,c):c.fullnessChecks++},xi.retireTexture=function(c){var l=c.height,d=this.getTextureQueue(l),f=this.lookup;ia(d,c),c.retired=!0;for(var p=c.eleCaches,g=0;g<p.length;g++){var y=p[g];f.deleteCache(y.key,y.level)}sd(p),this.getRetiredTextureQueue(l).push(c)},xi.addTexture=function(c,s){var f={};return this.getTextureQueue(c).push(f),f.eleCaches=[],f.height=c,f.width=Math.max(1024,s),f.usedWidth=0,f.invalidatedWidth=0,f.fullnessChecks=0,f.canvas=this.renderer.makeOffscreenCanvas(f.width,f.height),f.context=f.canvas.getContext("2d"),f},xi.recycleTexture=function(c,s){for(var d=this.getTextureQueue(c),f=this.getRetiredTextureQueue(c),p=0;p<f.length;p++){var g=f[p];if(g.width>=s)return g.retired=!1,g.usedWidth=0,g.invalidatedWidth=0,g.fullnessChecks=0,sd(g.eleCaches),g.context.setTransform(1,0,0,1,0,0),g.context.clearRect(0,0,g.width,g.height),ia(f,g),d.push(g),g}},xi.queueElement=function(c,s){var d=this.getElementQueue(),f=this.getElementKeyToQueue(),p=this.getKey(c),g=f[p];if(g)g.level=Math.max(g.level,s),g.eles.merge(c),g.reqs++,d.updateItem(g);else{var y={eles:c.spawn().merge(c),level:s,reqs:1,key:p};d.push(y),f[p]=y}},xi.dequeue=function(c){for(var s=this,l=s.getElementQueue(),d=s.getElementKeyToQueue(),f=[],p=s.lookup,g=0;g<1&&l.size()>0;g++){var y=l.pop(),w=y.key,b=y.eles[0],_=p.hasCache(b,y.level);if(d[w]=null,!_){f.push(y);var E=s.getBoundingBox(b);s.getElement(b,E,c,y.level,vu.dequeue)}}return f},xi.removeFromQueue=function(c){var l=this.getElementQueue(),d=this.getElementKeyToQueue(),f=this.getKey(c),p=d[f];null!=p&&(1===p.eles.length?(p.reqs=Uc,l.updateItem(p),l.pop(),d[f]=null):p.eles.unmerge(c))},xi.onDequeue=function(c){this.onDequeues.push(c)},xi.offDequeue=function(c){ia(this.onDequeues,c)},xi.setupDequeueing=Cy_setupDequeueing({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(s,l,d){return s.dequeue(l,d)},onDeqd:function(s,l){for(var d=0;d<s.onDequeues.length;d++)(0,s.onDequeues[d])(l)},shouldRedraw:function(s,l,d,f){for(var p=0;p<l.length;p++)for(var g=l[p].eles,y=0;y<g.length;y++){var w=g[y].boundingBox();if(Xo(w,f))return!0}return!1},priority:function(s){return s.renderer.beforeRenderPriorities.eleTxrDeq}});var Ny=function(s){var l=this,d=l.renderer=s,f=d.cy;l.layersByLevel={},l.firstGet=!0,l.lastInvalidationTime=Si()-500,l.skipping=!1,l.eleTxrDeqs=f.collection(),l.scheduleElementRefinement=T.default(function(){l.refineElementTextures(l.eleTxrDeqs),l.eleTxrDeqs.unmerge(l.eleTxrDeqs)},50),d.beforeRender(function(g,y){l.skipping=y-l.lastInvalidationTime<=250},d.beforeRenderPriorities.lyrTxrSkip),l.layersQueue=new M.default(function(y,w){return w.reqs-y.reqs}),l.setupDequeueing()},$i=Ny.prototype,Ly=0,Fy=Math.pow(2,53)-1;$i.makeLayer=function(c,s){var l=Math.pow(2,s),d=Math.ceil(c.w*l),f=Math.ceil(c.h*l),p=this.renderer.makeOffscreenCanvas(d,f),g={id:Ly=++Ly%Fy,bb:c,level:s,width:d,height:f,canvas:p,context:p.getContext("2d"),eles:[],elesQueue:[],reqs:0},y=g.context,w=-g.bb.x1,b=-g.bb.y1;return y.scale(l,l),y.translate(w,b),g},$i.getLayers=function(c,s,l){var d=this,g=d.renderer.cy.zoom(),y=d.firstGet;if(d.firstGet=!1,null==l)if((l=Math.ceil(Jr(g*s)))<-4)l=-4;else if(g>=3.99||l>2)return null;d.validateLayersElesOrdering(l,c);var E,O,w=d.layersByLevel,b=Math.pow(2,l),_=w[l]=w[l]||[];if(d.levelIsComplete(l,c))return _;!function(){var Te=function(Xe){if(d.validateLayersElesOrdering(Xe,c),d.levelIsComplete(Xe,c))return O=w[Xe],!0},Ae=function(Xe){if(!O)for(var Ve=l+Xe;-4<=Ve&&Ve<=2&&!Te(Ve);Ve+=Xe);};Ae(1),Ae(-1);for(var ge=_.length-1;ge>=0;ge--){var Fe=_[ge];Fe.invalid&&ia(_,Fe)}}();var W=function(Te){var Ae=(Te=Te||{}).after;if(function(){if(!E){E=Lr();for(var Te=0;Te<c.length;Te++)nn(E,c[Te].boundingBox())}}(),E.w*b*(E.h*b)>16e6)return null;var Fe=d.makeLayer(E,l);if(null!=Ae){var Se=_.indexOf(Ae)+1;_.splice(Se,0,Fe)}else(void 0===Te.insert||Te.insert)&&_.unshift(Fe);return Fe};if(d.skipping&&!y)return null;for(var X=null,ne=c.length/1,re=!y,se=0;se<c.length;se++){var De=c[se],Ce=De._private.rscratch,le=Ce.imgLayerCaches=Ce.imgLayerCaches||{},_e=le[l];if(_e)X=_e;else{if((!X||X.eles.length>=ne||!Os(X.bb,De.boundingBox()))&&!(X=W({insert:!0,after:X})))return null;O||re?d.queueLayer(X,De):d.drawEleInLayer(X,De,l,s),X.eles.push(De),le[l]=X}}return O||(re?null:_)},$i.getEleLevelForLayerLevel=function(c,s){return c},$i.drawEleInLayer=function(c,s,l,d){var p=this.renderer,g=c.context,y=s.boundingBox();0===y.w||0===y.h||!s.visible()||(l=this.getEleLevelForLayerLevel(l,d),p.setImgSmoothing(g,!1),p.drawCachedElement(g,s,null,null,l,!0),p.setImgSmoothing(g,!0))},$i.levelIsComplete=function(c,s){var d=this.layersByLevel[c];if(!d||0===d.length)return!1;for(var f=0,p=0;p<d.length;p++){var g=d[p];if(g.reqs>0||g.invalid)return!1;f+=g.eles.length}return f===s.length},$i.validateLayersElesOrdering=function(c,s){var l=this.layersByLevel[c];if(l)for(var d=0;d<l.length;d++){for(var f=l[d],p=-1,g=0;g<s.length;g++)if(f.eles[0]===s[g]){p=g;break}if(p<0)this.invalidateLayer(f);else{var y=p;for(g=0;g<f.eles.length;g++)if(f.eles[g]!==s[y+g]){this.invalidateLayer(f);break}}}},$i.updateElementsInLayers=function(c,s){for(var d=Je(c[0]),f=0;f<c.length;f++)for(var p=d?null:c[f],g=d?c[f]:c[f].ele,y=g._private.rscratch,w=y.imgLayerCaches=y.imgLayerCaches||{},b=-4;b<=2;b++){var _=w[b];_&&(p&&this.getEleLevelForLayerLevel(_.level)!==p.level||s(_,g,p))}},$i.haveLayers=function(){for(var s=!1,l=-4;l<=2;l++){var d=this.layersByLevel[l];if(d&&d.length>0){s=!0;break}}return s},$i.invalidateElements=function(c){var s=this;0!==c.length&&(s.lastInvalidationTime=Si(),0!==c.length&&s.haveLayers()&&s.updateElementsInLayers(c,function(d,f,p){s.invalidateLayer(d)}))},$i.invalidateLayer=function(c){if(this.lastInvalidationTime=Si(),!c.invalid){var s=c.level,l=c.eles;ia(this.layersByLevel[s],c),c.elesQueue=[],c.invalid=!0,c.replacement&&(c.replacement.invalid=!0);for(var f=0;f<l.length;f++){var p=l[f]._private.rscratch.imgLayerCaches;p&&(p[s]=null)}}},$i.refineElementTextures=function(c){var s=this;s.updateElementsInLayers(c,function(d,f,p){var g=d.replacement;if(g||((g=d.replacement=s.makeLayer(d.bb,d.level)).replaces=d,g.eles=d.eles),!g.reqs)for(var y=0;y<g.eles.length;y++)s.queueLayer(g,g.eles[y])})},$i.enqueueElementRefinement=function(c){this.eleTxrDeqs.merge(c),this.scheduleElementRefinement()},$i.queueLayer=function(c,s){var d=this.layersQueue,f=c.elesQueue,p=f.hasId=f.hasId||{};if(!c.replacement){if(s){if(p[s.id()])return;f.push(s),p[s.id()]=!0}c.reqs?(c.reqs++,d.updateItem(c)):(c.reqs=1,d.push(c))}},$i.dequeue=function(c){for(var s=this,l=s.layersQueue,d=[],f=0;f<1&&0!==l.size();){var p=l.peek();if(p.replacement)l.pop();else if(p.replaces&&p!==p.replaces.replacement)l.pop();else if(p.invalid)l.pop();else{var g=p.elesQueue.shift();g&&(s.drawEleInLayer(p,g,p.level,c),f++),0===d.length&&d.push(!0),0===p.elesQueue.length&&(l.pop(),p.reqs=0,p.replaces&&s.applyLayerReplacement(p),s.requestRedraw())}}return d},$i.applyLayerReplacement=function(c){var l=this.layersByLevel[c.level],d=c.replaces,f=l.indexOf(d);if(!(f<0||d.invalid)){l[f]=c;for(var p=0;p<c.eles.length;p++){var g=c.eles[p]._private,y=g.imgLayerCaches=g.imgLayerCaches||{};y&&(y[c.level]=c)}this.requestRedraw()}},$i.requestRedraw=T.default(function(){var c=this.renderer;c.redrawHint("eles",!0),c.redrawHint("drag",!0),c.redraw()},100),$i.setupDequeueing=Cy_setupDequeueing({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(s,l){return s.dequeue(l)},onDeqd:$c,shouldRedraw:ms,priority:function(s){return s.renderer.beforeRenderPriorities.lyrTxrDeq}});var Ag,gf={};function Tg(c,s){for(var l=0;l<s.length;l++){var d=s[l];c.lineTo(d.x,d.y)}}function ux(c,s,l){for(var d,f=0;f<s.length;f++){var p=s[f];0===f&&(d=p),c.lineTo(p.x,p.y)}c.quadraticCurveTo(l.x,l.y,d.x,d.y)}function By(c,s,l){c.beginPath&&c.beginPath();for(var d=s,f=0;f<d.length;f++)c.lineTo((p=d[f]).x,p.y);var g=l,y=l[0];for(c.moveTo(y.x,y.y),f=1;f<g.length;f++){var p;c.lineTo((p=g[f]).x,p.y)}c.closePath&&c.closePath()}function Vy(c,s,l,d,f){c.beginPath&&c.beginPath(),c.arc(l,d,f,0,2*Math.PI,!1);var p=s,g=p[0];c.moveTo(g.x,g.y);for(var y=0;y<p.length;y++){var w=p[y];c.lineTo(w.x,w.y)}c.closePath&&c.closePath()}function Hy(c,s,l,d){c.arc(s,l,d,0,2*Math.PI,!1)}gf.arrowShapeImpl=function(c){return(Ag||(Ag={polygon:Tg,"triangle-backcurve":ux,"triangle-tee":By,"circle-triangle":Vy,"triangle-cross":By,circle:Hy}))[c]};var io={drawElement:function(c,s,l,d,f,p){s.isNode()?this.drawNode(c,s,l,d,f,p):this.drawEdge(c,s,l,d,f,p)},drawElementOverlay:function(c,s){s.isNode()?this.drawNodeOverlay(c,s):this.drawEdgeOverlay(c,s)},drawElementUnderlay:function(c,s){s.isNode()?this.drawNodeUnderlay(c,s):this.drawEdgeUnderlay(c,s)},drawCachedElementPortion:function(c,s,l,d,f,p,g,y){var w=this,b=l.getBoundingBox(s);if(0!==b.w&&0!==b.h){var _=l.getElement(s,b,d,f,p);if(null!=_){var E=y(w,s);if(0===E)return;var X,ne,re,se,De,_e,S=g(w,s),O=b.x1,R=b.y1,H=b.w,W=b.h;if(0!==S){var Ce=l.getRotationPoint(s);c.translate(re=Ce.x,se=Ce.y),c.rotate(S),(De=w.getImgSmoothing(c))||w.setImgSmoothing(c,!0);var le=l.getRotationOffset(s);X=le.x,ne=le.y}else X=O,ne=R;1!==E&&(c.globalAlpha=(_e=c.globalAlpha)*E),c.drawImage(_.texture.canvas,_.x,0,_.width,_.height,X,ne,H,W),1!==E&&(c.globalAlpha=_e),0!==S&&(c.rotate(-S),c.translate(-re,-se),De||w.setImgSmoothing(c,!1))}else l.drawElement(c,s)}}},zy=function(){return 0},jy=function(s,l){return s.getTextAngle(l,null)},dx=function(s,l){return s.getTextAngle(l,"source")},sM=function(s,l){return s.getTextAngle(l,"target")},mf=function(s,l){return l.effectiveOpacity()},kg=function(s,l){return l.pstyle("text-opacity").pfValue*l.effectiveOpacity()};io.drawCachedElement=function(c,s,l,d,f,p){var g=this,y=g.data,w=y.eleTxrCache,b=y.lblTxrCache,_=y.slbTxrCache,E=y.tlbTxrCache,S=s.boundingBox(),O=!0===p?w.reasons.highQuality:null;if(0!==S.w&&0!==S.h&&s.visible()&&(!d||Xo(S,d))){var R=s.isEdge(),H=s.element()._private.rscratch.badLine;g.drawElementUnderlay(c,s),g.drawCachedElementPortion(c,s,w,l,f,O,zy,mf),(!R||!H)&&g.drawCachedElementPortion(c,s,b,l,f,O,jy,kg),R&&!H&&(g.drawCachedElementPortion(c,s,_,l,f,O,dx,kg),g.drawCachedElementPortion(c,s,E,l,f,O,sM,kg)),g.drawElementOverlay(c,s)}},io.drawElements=function(c,s){for(var d=0;d<s.length;d++)this.drawElement(c,s[d])},io.drawCachedElements=function(c,s,l,d){for(var p=0;p<s.length;p++)this.drawCachedElement(c,s[p],l,d)},io.drawCachedNodes=function(c,s,l,d){for(var p=0;p<s.length;p++){var g=s[p];g.isNode()&&this.drawCachedElement(c,g,l,d)}},io.drawLayeredElements=function(c,s,l,d){var p=this.data.lyrTxrCache.getLayers(s,l);if(p)for(var g=0;g<p.length;g++){var y=p[g],w=y.bb;0===w.w||0===w.h||c.drawImage(y.canvas,w.x1,w.y1,w.w,w.h)}else this.drawCachedElements(c,s,l,d)};var la={drawEdge:function(c,s,l){var d=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],f=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],p=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],g=this,y=s._private.rscratch;if((!p||s.visible())&&!y.badLine&&null!=y.allpts&&!isNaN(y.allpts[0])){var w;l&&c.translate(-(w=l).x1,-w.y1);var b=p?s.pstyle("opacity").value:1,_=p?s.pstyle("line-opacity").value:1,E=s.pstyle("curve-style").value,S=s.pstyle("line-style").value,O=s.pstyle("width").pfValue,R=s.pstyle("line-cap").value,H=b*_,W=b*_,X=function(){var ge=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H;"straight-triangle"===E?(g.eleStrokeStyle(c,s,ge),g.drawEdgeTrianglePath(s,c,y.allpts)):(c.lineWidth=O,c.lineCap=R,g.eleStrokeStyle(c,s,ge),g.drawEdgePath(s,c,y.allpts,S),c.lineCap="butt")},ne=function(){f&&g.drawEdgeOverlay(c,s)},re=function(){f&&g.drawEdgeUnderlay(c,s)},se=function(){var ge=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W;g.drawArrowheads(c,s,ge)},De=function(){g.drawElementText(c,s,null,d)};c.lineJoin="round";var Ce="yes"===s.pstyle("ghost").value;if(Ce){var le=s.pstyle("ghost-offset-x").pfValue,_e=s.pstyle("ghost-offset-y").pfValue,he=s.pstyle("ghost-opacity").value,Te=H*he;c.translate(le,_e),X(Te),se(Te),c.translate(-le,-_e)}re(),X(),se(),ne(),De(),l&&c.translate(w.x1,w.y1)}}},Ig=function(s){if(!["overlay","underlay"].includes(s))throw new Error("Invalid state");return function(l,d){if(d.visible()){var f=d.pstyle("".concat(s,"-opacity")).value;if(0!==f){var p=this,g=p.usePaths(),y=d._private.rscratch,b=2*d.pstyle("".concat(s,"-padding")).pfValue,_=d.pstyle("".concat(s,"-color")).value;l.lineWidth=b,l.lineCap="self"!==y.edgeType||g?"round":"butt",p.colorStrokeStyle(l,_[0],_[1],_[2],f),p.drawEdgePath(d,l,y.allpts,"solid")}}}};la.drawEdgeOverlay=Ig("overlay"),la.drawEdgeUnderlay=Ig("underlay"),la.drawEdgePath=function(c,s,l,d){var g,f=c._private.rscratch,p=s,y=!1,w=this.usePaths(),b=c.pstyle("line-dash-pattern").pfValue,_=c.pstyle("line-dash-offset").pfValue;if(w){var E=l.join("$");f.pathCacheKey&&f.pathCacheKey===E?(g=s=f.pathCache,y=!0):(g=s=new Path2D,f.pathCacheKey=E,f.pathCache=g)}if(p.setLineDash)switch(d){case"dotted":p.setLineDash([1,1]);break;case"dashed":p.setLineDash(b),p.lineDashOffset=_;break;case"solid":p.setLineDash([])}if(!y&&!f.badLine)switch(s.beginPath&&s.beginPath(),s.moveTo(l[0],l[1]),f.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var O=2;O+3<l.length;O+=4)s.quadraticCurveTo(l[O],l[O+1],l[O+2],l[O+3]);break;case"straight":case"segments":case"haystack":for(var R=2;R+1<l.length;R+=2)s.lineTo(l[R],l[R+1])}s=p,w?s.stroke(g):s.stroke(),s.setLineDash&&s.setLineDash([])},la.drawEdgeTrianglePath=function(c,s,l){s.fillStyle=s.strokeStyle;for(var d=c.pstyle("width").pfValue,f=0;f+1<l.length;f+=2){var p=[l[f+2]-l[f],l[f+3]-l[f+1]],g=Math.sqrt(p[0]*p[0]+p[1]*p[1]),y=[p[1]/g,-p[0]/g],w=[y[0]*d/2,y[1]*d/2];s.beginPath(),s.moveTo(l[f]-w[0],l[f+1]-w[1]),s.lineTo(l[f]+w[0],l[f+1]+w[1]),s.lineTo(l[f+2],l[f+3]),s.closePath(),s.fill()}},la.drawArrowheads=function(c,s,l){var d=s._private.rscratch,f="haystack"===d.edgeType;f||this.drawArrowhead(c,s,"source",d.arrowStartX,d.arrowStartY,d.srcArrowAngle,l),this.drawArrowhead(c,s,"mid-target",d.midX,d.midY,d.midtgtArrowAngle,l),this.drawArrowhead(c,s,"mid-source",d.midX,d.midY,d.midsrcArrowAngle,l),f||this.drawArrowhead(c,s,"target",d.arrowEndX,d.arrowEndY,d.tgtArrowAngle,l)},la.drawArrowhead=function(c,s,l,d,f,p,g){if(!(isNaN(d)||null==d||isNaN(f)||null==f||isNaN(p)||null==p)){var y=this,w=s.pstyle(l+"-arrow-shape").value;if("none"!==w){var b="hollow"===s.pstyle(l+"-arrow-fill").value?"both":"filled",_=s.pstyle(l+"-arrow-fill").value,E=s.pstyle("width").pfValue,S=s.pstyle("opacity").value;void 0===g&&(g=S);var O=c.globalCompositeOperation;(1!==g||"hollow"===_)&&(c.globalCompositeOperation="destination-out",y.colorFillStyle(c,255,255,255,1),y.colorStrokeStyle(c,255,255,255,1),y.drawArrowShape(s,c,b,E,w,d,f,p),c.globalCompositeOperation=O);var R=s.pstyle(l+"-arrow-color").value;y.colorFillStyle(c,R[0],R[1],R[2],g),y.colorStrokeStyle(c,R[0],R[1],R[2],g),y.drawArrowShape(s,c,_,E,w,d,f,p)}}},la.drawArrowShape=function(c,s,l,d,f,p,g,y){var E,w=this,b=this.usePaths()&&"triangle-cross"!==f,_=!1,S=s,O={x:p,y:g},R=c.pstyle("arrow-scale").value,H=this.getArrowWidth(d,R),W=w.arrowShapes[f];if(b){var X=w.arrowPathCache=w.arrowPathCache||[],ne=Aa(f),re=X[ne];null!=re?(E=s=re,_=!0):(E=s=new Path2D,X[ne]=E)}_||(s.beginPath&&s.beginPath(),b?W.draw(s,1,0,{x:0,y:0},1):W.draw(s,H,y,O,d),s.closePath&&s.closePath()),s=S,b&&(s.translate(p,g),s.rotate(y),s.scale(H,H)),("filled"===l||"both"===l)&&(b?s.fill(E):s.fill()),("hollow"===l||"both"===l)&&(s.lineWidth=(W.matchEdgeWidth?d:1)/(b?H:1),s.lineJoin="miter",b?s.stroke(E):s.stroke()),b&&(s.scale(1/H,1/H),s.rotate(-y),s.translate(-p,-g))};var vf={safeDrawImage:function(c,s,l,d,f,p,g,y,w,b){if(!(f<=0||p<=0||w<=0||b<=0))try{c.drawImage(s,l,d,f,p,g,y,w,b)}catch(_){ur(_)}},drawInscribedImage:function(c,s,l,d,f){var p=this,g=l.position(),y=g.x,w=g.y,b=l.cy().style(),_=b.getIndexedStyle.bind(b),E=_(l,"background-fit","value",d),S=_(l,"background-repeat","value",d),O=l.width(),R=l.height(),H=2*l.padding(),W=O+("inner"===_(l,"background-width-relative-to","value",d)?0:H),X=R+("inner"===_(l,"background-height-relative-to","value",d)?0:H),ne=l._private.rscratch,se="node"===_(l,"background-clip","value",d),De=_(l,"background-image-opacity","value",d)*f,Ce=_(l,"background-image-smoothing","value",d),le=s.width||s.cachedW,_e=s.height||s.cachedH;(null==le||null==_e)&&(document.body.appendChild(s),le=s.cachedW=s.width||s.offsetWidth,_e=s.cachedH=s.height||s.offsetHeight,document.body.removeChild(s));var he=le,Te=_e;if("auto"!==_(l,"background-width","value",d)&&(he="%"===_(l,"background-width","units",d)?_(l,"background-width","pfValue",d)*W:_(l,"background-width","pfValue",d)),"auto"!==_(l,"background-height","value",d)&&(Te="%"===_(l,"background-height","units",d)?_(l,"background-height","pfValue",d)*X:_(l,"background-height","pfValue",d)),0!==he&&0!==Te){if("contain"===E)he*=Ae=Math.min(W/he,X/Te),Te*=Ae;else if("cover"===E){var Ae;he*=Ae=Math.max(W/he,X/Te),Te*=Ae}var ge=y-W/2,Fe=_(l,"background-position-x","units",d),Se=_(l,"background-position-x","pfValue",d);ge+="%"===Fe?(W-he)*Se:Se;var Xe=_(l,"background-offset-x","units",d),Ve=_(l,"background-offset-x","pfValue",d);ge+="%"===Xe?(W-he)*Ve:Ve;var je=w-X/2,Qe=_(l,"background-position-y","units",d),it=_(l,"background-position-y","pfValue",d);je+="%"===Qe?(X-Te)*it:it;var ct=_(l,"background-offset-y","units",d),rt=_(l,"background-offset-y","pfValue",d);je+="%"===ct?(X-Te)*rt:rt,ne.pathCache&&(ge-=y,je-=w,y=0,w=0);var tt=c.globalAlpha;c.globalAlpha=De;var _t=p.getImgSmoothing(c),Dt=!1;if("no"===Ce&&_t?(p.setImgSmoothing(c,!1),Dt=!0):"yes"===Ce&&!_t&&(p.setImgSmoothing(c,!0),Dt=!0),"no-repeat"===S)se&&(c.save(),ne.pathCache?c.clip(ne.pathCache):(p.nodeShapes[p.getNodeShape(l)].draw(c,y,w,W,X),c.clip())),p.safeDrawImage(c,s,0,0,le,_e,ge,je,he,Te),se&&c.restore();else{var yt=c.createPattern(s,S);c.fillStyle=yt,p.nodeShapes[p.getNodeShape(l)].draw(c,y,w,W,X),c.translate(ge,je),c.fill(),c.translate(-ge,-je)}c.globalAlpha=tt,Dt&&p.setImgSmoothing(c,_t)}}},Ua={};function Uy(c,s,l,d,f){var p=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5;c.beginPath(),c.moveTo(s+p,l),c.lineTo(s+d-p,l),c.quadraticCurveTo(s+d,l,s+d,l+p),c.lineTo(s+d,l+f-p),c.quadraticCurveTo(s+d,l+f,s+d-p,l+f),c.lineTo(s+p,l+f),c.quadraticCurveTo(s,l+f,s,l+f-p),c.lineTo(s,l+p),c.quadraticCurveTo(s,l,s+p,l),c.closePath(),c.fill()}Ua.eleTextBiggerThanMin=function(c,s){if(!s){var l=c.cy().zoom(),d=this.getPixelRatio(),f=Math.ceil(Jr(l*d));s=Math.pow(2,f)}return!(c.pstyle("font-size").pfValue*s<c.pstyle("min-zoomed-font-size").pfValue)},Ua.drawElementText=function(c,s,l,d,f){var p=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],g=this;if(null==d){if(p&&!g.eleTextBiggerThanMin(s))return}else if(!1===d)return;if(s.isNode()){var y=s.pstyle("label");if(!y||!y.value)return;var w=g.getLabelJustification(s);c.textAlign=w,c.textBaseline="bottom"}else{var b=s.element()._private.rscratch.badLine,_=s.pstyle("label"),E=s.pstyle("source-label"),S=s.pstyle("target-label");if(b||(!_||!_.value)&&(!E||!E.value)&&(!S||!S.value))return;c.textAlign="center",c.textBaseline="bottom"}var R,O=!l;l&&c.translate(-(R=l).x1,-R.y1),null==f?(g.drawText(c,s,null,O,p),s.isEdge()&&(g.drawText(c,s,"source",O,p),g.drawText(c,s,"target",O,p))):g.drawText(c,s,f,O,p),l&&c.translate(R.x1,R.y1)},Ua.getFontCache=function(c){var s;this.fontCaches=this.fontCaches||[];for(var l=0;l<this.fontCaches.length;l++)if((s=this.fontCaches[l]).context===c)return s;return this.fontCaches.push(s={context:c}),s},Ua.setupTextStyle=function(c,s){var l=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],d=s.pstyle("font-style").strValue,f=s.pstyle("font-size").pfValue+"px",p=s.pstyle("font-family").strValue,g=s.pstyle("font-weight").strValue,y=l?s.effectiveOpacity()*s.pstyle("text-opacity").value:1,w=s.pstyle("text-outline-opacity").value*y,b=s.pstyle("color").value,_=s.pstyle("text-outline-color").value;c.font=d+" "+g+" "+f+" "+p,c.lineJoin="round",this.colorFillStyle(c,b[0],b[1],b[2],y),this.colorStrokeStyle(c,_[0],_[1],_[2],w)},Ua.getTextAngle=function(c,s){var f=c._private.rscratch,g=c.pstyle((s?s+"-":"")+"text-rotation"),y=vs(f,"labelAngle",s);return"autorotate"===g.strValue?c.isEdge()?y:0:"none"===g.strValue?0:g.pfValue},Ua.drawText=function(c,s,l){var d=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],f=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],p=s._private,g=p.rscratch,y=f?s.effectiveOpacity():1;if(!f||0!==y&&0!==s.pstyle("text-opacity").value){"main"===l&&(l=null);var _,E,w=vs(g,"labelX",l),b=vs(g,"labelY",l),S=this.getLabelText(s,l);if(null!=S&&""!==S&&!isNaN(w)&&!isNaN(b)){this.setupTextStyle(c,s,f);var De,O=l?l+"-":"",R=vs(g,"labelWidth",l),H=vs(g,"labelHeight",l),W=s.pstyle(O+"text-margin-x").pfValue,X=s.pstyle(O+"text-margin-y").pfValue,ne=s.isEdge(),re=s.pstyle("text-halign").value,se=s.pstyle("text-valign").value;switch(ne&&(re="center",se="center"),w+=W,b+=X,0!==(De=d?this.getTextAngle(s,l):0)&&(c.translate(_=w,E=b),c.rotate(De),w=0,b=0),se){case"top":break;case"center":b+=H/2;break;case"bottom":b+=H}var Ce=s.pstyle("text-background-opacity").value,le=s.pstyle("text-border-opacity").value,_e=s.pstyle("text-border-width").pfValue,he=s.pstyle("text-background-padding").pfValue;if(Ce>0||_e>0&&le>0){var Te=w-he;switch(re){case"left":Te-=R;break;case"center":Te-=R/2}var Ae=b-H-he,ge=R+2*he,Fe=H+2*he;if(Ce>0){var Se=c.fillStyle,Xe=s.pstyle("text-background-color").value;c.fillStyle="rgba("+Xe[0]+","+Xe[1]+","+Xe[2]+","+Ce*y+")";var Ve=s.pstyle("text-background-shape").strValue;0===Ve.indexOf("round")?Uy(c,Te,Ae,ge,Fe,2):c.fillRect(Te,Ae,ge,Fe),c.fillStyle=Se}if(_e>0&&le>0){var je=c.strokeStyle,Qe=c.lineWidth,it=s.pstyle("text-border-color").value,ct=s.pstyle("text-border-style").value;if(c.strokeStyle="rgba("+it[0]+","+it[1]+","+it[2]+","+le*y+")",c.lineWidth=_e,c.setLineDash)switch(ct){case"dotted":c.setLineDash([1,1]);break;case"dashed":c.setLineDash([4,2]);break;case"double":c.lineWidth=_e/4,c.setLineDash([]);break;case"solid":c.setLineDash([])}if(c.strokeRect(Te,Ae,ge,Fe),"double"===ct){var rt=_e/2;c.strokeRect(Te+rt,Ae+rt,ge-2*rt,Fe-2*rt)}c.setLineDash&&c.setLineDash([]),c.lineWidth=Qe,c.strokeStyle=je}}var tt=2*s.pstyle("text-outline-width").pfValue;if(tt>0&&(c.lineWidth=tt),"wrap"===s.pstyle("text-wrap").value){var _t=vs(g,"labelWrapCachedLines",l),Dt=vs(g,"labelLineHeight",l),yt=R/2,mt=this.getLabelJustification(s);switch("auto"===mt||("left"===re?"left"===mt?w+=-R:"center"===mt&&(w+=-yt):"center"===re?"left"===mt?w+=-yt:"right"===mt&&(w+=yt):"right"===re&&("center"===mt?w+=yt:"right"===mt&&(w+=R))),se){case"top":case"center":case"bottom":b-=(_t.length-1)*Dt}for(var Ze=0;Ze<_t.length;Ze++)tt>0&&c.strokeText(_t[Ze],w,b),c.fillText(_t[Ze],w,b),b+=Dt}else tt>0&&c.strokeText(S,w,b),c.fillText(S,w,b);0!==De&&(c.rotate(-De),c.translate(-_,-E))}}};var Ga={drawNode:function(c,s,l){var y,w,d=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],f=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],p=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],g=this,b=s._private,_=b.rscratch,E=s.position();if(pe(E.x)&&pe(E.y)&&(!p||s.visible())){var R,X,S=p?s.effectiveOpacity():1,O=g.usePaths(),H=!1,W=s.padding();y=s.width()+2*W,w=s.height()+2*W,l&&c.translate(-(X=l).x1,-X.y1);for(var ne=s.pstyle("background-image"),re=ne.value,se=new Array(re.length),De=new Array(re.length),Ce=0,le=0;le<re.length;le++){var _e=re[le],he=se[le]=null!=_e&&"none"!==_e;if(he){var Te=s.cy().style().getIndexedStyle(s,"background-image-crossorigin","value",le);Ce++,De[le]=g.getCachedImage(_e,Te,function(){b.backgroundTimestamp=Date.now(),s.emitAndNotify("background")})}}var Ae=s.pstyle("background-blacken").value,ge=s.pstyle("border-width").pfValue,Fe=s.pstyle("background-opacity").value*S,Se=s.pstyle("border-color").value,Xe=s.pstyle("border-style").value,Ve=s.pstyle("border-opacity").value*S;c.lineJoin="miter";var je=function(){var jt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe;g.eleFillStyle(c,s,jt)},Qe=function(){var jt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve;g.colorStrokeStyle(c,Se[0],Se[1],Se[2],jt)},it=s.pstyle("shape").strValue,ct=s.pstyle("shape-polygon-points").pfValue;if(O){c.translate(E.x,E.y);var rt=g.nodePathCache=g.nodePathCache||[],tt=Ph("polygon"===it?it+","+ct.join(","):it,""+w,""+y),_t=rt[tt];null!=_t?(H=!0,_.pathCache=R=_t):(R=new Path2D,rt[tt]=_.pathCache=R)}var Dt=function(){if(!H){var jt=E;O&&(jt={x:0,y:0}),g.nodeShapes[g.getNodeShape(s)].draw(R||c,jt.x,jt.y,y,w)}O?c.fill(R):c.fill()},yt=function(){for(var jt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,cn=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Hn=b.backgrounding,An=0,mn=0;mn<De.length;mn++){var Rt=s.cy().style().getIndexedStyle(s,"background-image-containment","value",mn);cn&&"over"===Rt||!cn&&"inside"===Rt?An++:se[mn]&&De[mn].complete&&!De[mn].error&&(An++,g.drawInscribedImage(c,De[mn],s,mn,jt))}b.backgrounding=An!==Ce,Hn!==b.backgrounding&&s.updateStyle(!1)},mt=function(){var jt=arguments.length>0&&void 0!==arguments[0]&&arguments[0],cn=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S;g.hasPie(s)&&(g.drawPie(c,s,cn),jt&&(O||g.nodeShapes[g.getNodeShape(s)].draw(c,E.x,E.y,y,w)))},Ze=function(){var jt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,cn=(Ae>0?Ae:-Ae)*jt,Hn=Ae>0?0:255;0!==Ae&&(g.colorFillStyle(c,Hn,Hn,Hn,cn),O?c.fill(R):c.fill())},xt=function(){if(ge>0){if(c.lineWidth=ge,c.lineCap="butt",c.setLineDash)switch(Xe){case"dotted":c.setLineDash([1,1]);break;case"dashed":c.setLineDash([4,2]);break;case"solid":case"double":c.setLineDash([])}if(O?c.stroke(R):c.stroke(),"double"===Xe){c.lineWidth=ge/3;var jt=c.globalCompositeOperation;c.globalCompositeOperation="destination-out",O?c.stroke(R):c.stroke(),c.globalCompositeOperation=jt}c.setLineDash&&c.setLineDash([])}},Mt=function(){f&&g.drawNodeOverlay(c,s,E,y,w)},Lt=function(){f&&g.drawNodeUnderlay(c,s,E,y,w)},Vt=function(){g.drawElementText(c,s,null,d)},xn="yes"===s.pstyle("ghost").value;if(xn){var kn=s.pstyle("ghost-offset-x").pfValue,Ht=s.pstyle("ghost-offset-y").pfValue,Ft=s.pstyle("ghost-opacity").value,pn=Ft*S;c.translate(kn,Ht),je(Ft*Fe),Dt(),yt(pn,!0),Qe(Ft*Ve),xt(),mt(0!==Ae||0!==ge),yt(pn,!1),Ze(pn),c.translate(-kn,-Ht)}O&&c.translate(-E.x,-E.y),Lt(),O&&c.translate(E.x,E.y),je(),Dt(),yt(S,!0),Qe(),xt(),mt(0!==Ae||0!==ge),yt(S,!1),Ze(),O&&c.translate(-E.x,-E.y),Vt(),Mt(),l&&c.translate(X.x1,X.y1)}}},Gd=function(s){if(!["overlay","underlay"].includes(s))throw new Error("Invalid state");return function(l,d,f,p,g){if(d.visible()){var w=d.pstyle("".concat(s,"-padding")).pfValue,b=d.pstyle("".concat(s,"-opacity")).value,_=d.pstyle("".concat(s,"-color")).value,E=d.pstyle("".concat(s,"-shape")).value;if(b>0){if(f=f||d.position(),null==p||null==g){var S=d.padding();p=d.width()+2*S,g=d.height()+2*S}this.colorFillStyle(l,_[0],_[1],_[2],b),this.nodeShapes[E].draw(l,f.x,f.y,p+2*w,g+2*w),l.fill()}}}};Ga.drawNodeOverlay=Gd("overlay"),Ga.drawNodeUnderlay=Gd("underlay"),Ga.hasPie=function(c){return(c=c[0])._private.hasPie},Ga.drawPie=function(c,s,l,d){s=s[0],d=d||s.position();var f=s.cy().style(),p=s.pstyle("pie-size"),g=d.x,y=d.y,w=s.width(),b=s.height(),_=Math.min(w,b)/2,E=0;this.usePaths()&&(g=0,y=0),"%"===p.units?_*=p.pfValue:void 0!==p.pfValue&&(_=p.pfValue/2);for(var O=1;O<=f.pieBackgroundN;O++){var R=s.pstyle("pie-"+O+"-background-size").value,H=s.pstyle("pie-"+O+"-background-color").value,W=s.pstyle("pie-"+O+"-background-opacity").value*l,X=R/100;X+E>1&&(X=1-E);var ne=1.5*Math.PI+2*Math.PI*E,se=ne+2*Math.PI*X;0===R||E>=1||E+X>1||(c.beginPath(),c.moveTo(g,y),c.arc(g,y,_,ne,se),c.closePath(),this.colorFillStyle(c,H[0],H[1],H[2],W),c.fill(),E+=X)}};for(var Bo={getPixelRatio:function(){var c=this.data.contexts[0];return null!=this.forcedPixelRatio?this.forcedPixelRatio:(window.devicePixelRatio||1)/(c.backingStorePixelRatio||c.webkitBackingStorePixelRatio||c.mozBackingStorePixelRatio||c.msBackingStorePixelRatio||c.oBackingStorePixelRatio||c.backingStorePixelRatio||1)},paintCache:function(c){for(var d,s=this.paintCaches=this.paintCaches||[],l=!0,f=0;f<s.length;f++)if((d=s[f]).context===c){l=!1;break}return l&&s.push(d={context:c}),d},createGradientStyleFor:function(c,s,l,d,f){var p,g=this.usePaths(),y=l.pstyle(s+"-gradient-stop-colors").value,w=l.pstyle(s+"-gradient-stop-positions").pfValue;if("radial-gradient"===d)if(l.isEdge()){var b=l.sourceEndpoint(),_=l.targetEndpoint(),E=l.midpoint(),S=Or(b,E),O=Or(_,E);p=c.createRadialGradient(E.x,E.y,0,E.x,E.y,Math.max(S,O))}else{var R=g?{x:0,y:0}:l.position(),H=l.paddedWidth(),W=l.paddedHeight();p=c.createRadialGradient(R.x,R.y,0,R.x,R.y,Math.max(H,W))}else if(l.isEdge()){var X=l.sourceEndpoint(),ne=l.targetEndpoint();p=c.createLinearGradient(X.x,X.y,ne.x,ne.y)}else{var re=g?{x:0,y:0}:l.position(),Ce=l.paddedWidth()/2,le=l.paddedHeight()/2;switch(l.pstyle("background-gradient-direction").value){case"to-bottom":p=c.createLinearGradient(re.x,re.y-le,re.x,re.y+le);break;case"to-top":p=c.createLinearGradient(re.x,re.y+le,re.x,re.y-le);break;case"to-left":p=c.createLinearGradient(re.x+Ce,re.y,re.x-Ce,re.y);break;case"to-right":p=c.createLinearGradient(re.x-Ce,re.y,re.x+Ce,re.y);break;case"to-bottom-right":case"to-right-bottom":p=c.createLinearGradient(re.x-Ce,re.y-le,re.x+Ce,re.y+le);break;case"to-top-right":case"to-right-top":p=c.createLinearGradient(re.x-Ce,re.y+le,re.x+Ce,re.y-le);break;case"to-bottom-left":case"to-left-bottom":p=c.createLinearGradient(re.x+Ce,re.y-le,re.x-Ce,re.y+le);break;case"to-top-left":case"to-left-top":p=c.createLinearGradient(re.x+Ce,re.y+le,re.x-Ce,re.y-le)}}if(!p)return null;for(var he=w.length===y.length,Te=y.length,Ae=0;Ae<Te;Ae++)p.addColorStop(he?w[Ae]:Ae/(Te-1),"rgba("+y[Ae][0]+","+y[Ae][1]+","+y[Ae][2]+","+f+")");return p},gradientFillStyle:function(c,s,l,d){var f=this.createGradientStyleFor(c,"background",s,l,d);if(!f)return null;c.fillStyle=f},colorFillStyle:function(c,s,l,d,f){c.fillStyle="rgba("+s+","+l+","+d+","+f+")"},eleFillStyle:function(c,s,l){var d=s.pstyle("background-fill").value;if("linear-gradient"===d||"radial-gradient"===d)this.gradientFillStyle(c,s,d,l);else{var f=s.pstyle("background-color").value;this.colorFillStyle(c,f[0],f[1],f[2],l)}},gradientStrokeStyle:function(c,s,l,d){var f=this.createGradientStyleFor(c,"line",s,l,d);if(!f)return null;c.strokeStyle=f},colorStrokeStyle:function(c,s,l,d,f){c.strokeStyle="rgba("+s+","+l+","+d+","+f+")"},eleStrokeStyle:function(c,s,l){var d=s.pstyle("line-fill").value;if("linear-gradient"===d||"radial-gradient"===d)this.gradientStrokeStyle(c,s,d,l);else{var f=s.pstyle("line-color").value;this.colorStrokeStyle(c,f[0],f[1],f[2],l)}},matchCanvasSize:function(c){var s=this,l=s.data,d=s.findContainerClientCoords(),f=d[2],p=d[3],g=s.getPixelRatio();(c===s.data.bufferCanvases[s.MOTIONBLUR_BUFFER_NODE]||c===s.data.bufferCanvases[s.MOTIONBLUR_BUFFER_DRAG])&&(g=s.motionBlurPxRatio);var _,w=f*g,b=p*g;if(w!==s.canvasWidth||b!==s.canvasHeight){s.fontCaches=null;var E=l.canvasContainer;E.style.width=f+"px",E.style.height=p+"px";for(var S=0;S<s.CANVAS_LAYERS;S++)(_=l.canvases[S]).width=w,_.height=b,_.style.width=f+"px",_.style.height=p+"px";for(S=0;S<s.BUFFER_COUNT;S++)(_=l.bufferCanvases[S]).width=w,_.height=b,_.style.width=f+"px",_.style.height=p+"px";s.textureMult=1,g<=1&&(_=l.bufferCanvases[s.TEXTURE_BUFFER],s.textureMult=2,_.width=w*s.textureMult,_.height=b*s.textureMult),s.canvasWidth=w,s.canvasHeight=b}},renderTo:function(c,s,l,d){this.render({forcedContext:c,forcedZoom:s,forcedPan:l,drawAllLayers:!0,forcedPxRatio:d})},render:function(c){var s=(c=c||od()).forcedContext,l=c.drawAllLayers,d=c.drawOnlyNodeLayer,f=c.forcedZoom,p=c.forcedPan,g=this,y=void 0===c.forcedPxRatio?this.getPixelRatio():c.forcedPxRatio,w=g.cy,b=g.data,_=b.canvasNeedsRedraw,E=g.textureOnViewport&&!s&&(g.pinching||g.hoverData.dragging||g.swipePanning||g.data.wheelZooming),S=void 0!==c.motionBlur?c.motionBlur:g.motionBlur,O=g.motionBlurPxRatio,R=w.hasCompoundNodes(),H=g.hoverData.draggingEles,X=S=S&&!s&&g.motionBlurEnabled&&!(g.hoverData.selecting||g.touchData.selecting);s||(g.prevPxRatio!==y&&(g.invalidateContainerClientCoordsCache(),g.matchCanvasSize(g.container),g.redrawHint("eles",!0),g.redrawHint("drag",!0)),g.prevPxRatio=y),!s&&g.motionBlurTimeout&&clearTimeout(g.motionBlurTimeout),S&&(null==g.mbFrames&&(g.mbFrames=0),g.mbFrames++,g.mbFrames<3&&(X=!1),g.mbFrames>g.minMbLowQualFrames&&(g.motionBlurPxRatio=g.mbPxRBlurry)),g.clearingMotionBlur&&(g.motionBlurPxRatio=1),g.textureDrawLastFrame&&!E&&(_[g.NODE]=!0,_[g.SELECT_BOX]=!0);var ne=w.style(),re=w.zoom(),se=void 0!==f?f:re,De=w.pan(),Ce={x:De.x,y:De.y},le={zoom:re,pan:{x:De.x,y:De.y}},_e=g.prevViewport;!(void 0===_e||le.zoom!==_e.zoom||le.pan.x!==_e.pan.x||le.pan.y!==_e.pan.y)&&!(H&&!R)&&(g.motionBlurPxRatio=1),p&&(Ce=p),se*=y,Ce.x*=y,Ce.y*=y;var Te=g.getCachedZSortedEles();function Ae(Ht,Ft,pn,en,jt){var cn=Ht.globalCompositeOperation;Ht.globalCompositeOperation="destination-out",g.colorFillStyle(Ht,255,255,255,g.motionBlurTransparency),Ht.fillRect(Ft,pn,en,jt),Ht.globalCompositeOperation=cn}function ge(Ht,Ft){var pn,en,jt,cn;g.clearingMotionBlur||Ht!==b.bufferContexts[g.MOTIONBLUR_BUFFER_NODE]&&Ht!==b.bufferContexts[g.MOTIONBLUR_BUFFER_DRAG]?(pn=Ce,en=se,jt=g.canvasWidth,cn=g.canvasHeight):(pn={x:De.x*O,y:De.y*O},en=re*O,jt=g.canvasWidth*O,cn=g.canvasHeight*O),Ht.setTransform(1,0,0,1,0,0),"motionBlur"===Ft?Ae(Ht,0,0,jt,cn):!s&&(void 0===Ft||Ft)&&Ht.clearRect(0,0,jt,cn),l||(Ht.translate(pn.x,pn.y),Ht.scale(en,en)),p&&Ht.translate(p.x,p.y),f&&Ht.scale(f,f)}if(E||(g.textureDrawLastFrame=!1),E){if(g.textureDrawLastFrame=!0,!g.textureCache){g.textureCache={},g.textureCache.bb=w.mutableElements().boundingBox(),g.textureCache.texture=g.data.bufferCanvases[g.TEXTURE_BUFFER];var Fe=g.data.bufferContexts[g.TEXTURE_BUFFER];Fe.setTransform(1,0,0,1,0,0),Fe.clearRect(0,0,g.canvasWidth*g.textureMult,g.canvasHeight*g.textureMult),g.render({forcedContext:Fe,drawOnlyNodeLayer:!0,forcedPxRatio:y*g.textureMult}),(le=g.textureCache.viewport={zoom:w.zoom(),pan:w.pan(),width:g.canvasWidth,height:g.canvasHeight}).mpan={x:(0-le.pan.x)/le.zoom,y:(0-le.pan.y)/le.zoom}}_[g.DRAG]=!1,_[g.NODE]=!1;var Xe=g.textureCache.texture;le=g.textureCache.viewport,(Se=b.contexts[g.NODE]).setTransform(1,0,0,1,0,0),S?Ae(Se,0,0,le.width,le.height):Se.clearRect(0,0,le.width,le.height);var Ve=ne.core("outside-texture-bg-color").value,je=ne.core("outside-texture-bg-opacity").value;g.colorFillStyle(Se,Ve[0],Ve[1],Ve[2],je),Se.fillRect(0,0,le.width,le.height),re=w.zoom(),ge(Se,!1),Se.clearRect(le.mpan.x,le.mpan.y,le.width/le.zoom/y,le.height/le.zoom/y),Se.drawImage(Xe,le.mpan.x,le.mpan.y,le.width/le.zoom/y,le.height/le.zoom/y)}else g.textureOnViewport&&!s&&(g.textureCache=null);var Qe=w.extent(),it=g.pinching||g.hoverData.dragging||g.swipePanning||g.data.wheelZooming||g.hoverData.draggingEles||g.cy.animated(),ct=g.hideEdgesOnViewport&&it,rt=[];if(rt[g.NODE]=!_[g.NODE]&&S&&!g.clearedForMotionBlur[g.NODE]||g.clearingMotionBlur,rt[g.NODE]&&(g.clearedForMotionBlur[g.NODE]=!0),rt[g.DRAG]=!_[g.DRAG]&&S&&!g.clearedForMotionBlur[g.DRAG]||g.clearingMotionBlur,rt[g.DRAG]&&(g.clearedForMotionBlur[g.DRAG]=!0),_[g.NODE]||l||d||rt[g.NODE]){var tt=S&&!rt[g.NODE]&&1!==O;ge(Se=s||(tt?g.data.bufferContexts[g.MOTIONBLUR_BUFFER_NODE]:b.contexts[g.NODE]),S&&!tt?"motionBlur":void 0),ct?g.drawCachedNodes(Se,Te.nondrag,y,Qe):g.drawLayeredElements(Se,Te.nondrag,y,Qe),g.debug&&g.drawDebugPoints(Se,Te.nondrag),!l&&!S&&(_[g.NODE]=!1)}if(!d&&(_[g.DRAG]||l||rt[g.DRAG])&&(tt=S&&!rt[g.DRAG]&&1!==O,ge(Se=s||(tt?g.data.bufferContexts[g.MOTIONBLUR_BUFFER_DRAG]:b.contexts[g.DRAG]),S&&!tt?"motionBlur":void 0),ct?g.drawCachedNodes(Se,Te.drag,y,Qe):g.drawCachedElements(Se,Te.drag,y,Qe),g.debug&&g.drawDebugPoints(Se,Te.drag),!l&&!S&&(_[g.DRAG]=!1)),g.showFps||!d&&_[g.SELECT_BOX]&&!l){var Se;if(ge(Se=s||b.contexts[g.SELECT_BOX]),1==g.selection[4]&&(g.hoverData.selecting||g.touchData.selecting)){re=g.cy.zoom();var Dt=ne.core("selection-box-border-width").value/re;Se.lineWidth=Dt,Se.fillStyle="rgba("+ne.core("selection-box-color").value[0]+","+ne.core("selection-box-color").value[1]+","+ne.core("selection-box-color").value[2]+","+ne.core("selection-box-opacity").value+")",Se.fillRect(g.selection[0],g.selection[1],g.selection[2]-g.selection[0],g.selection[3]-g.selection[1]),Dt>0&&(Se.strokeStyle="rgba("+ne.core("selection-box-border-color").value[0]+","+ne.core("selection-box-border-color").value[1]+","+ne.core("selection-box-border-color").value[2]+","+ne.core("selection-box-opacity").value+")",Se.strokeRect(g.selection[0],g.selection[1],g.selection[2]-g.selection[0],g.selection[3]-g.selection[1]))}if(b.bgActivePosistion&&!g.hoverData.selecting){re=g.cy.zoom();var yt=b.bgActivePosistion;Se.fillStyle="rgba("+ne.core("active-bg-color").value[0]+","+ne.core("active-bg-color").value[1]+","+ne.core("active-bg-color").value[2]+","+ne.core("active-bg-opacity").value+")",Se.beginPath(),Se.arc(yt.x,yt.y,ne.core("active-bg-size").pfValue/re,0,2*Math.PI),Se.fill()}var mt=g.lastRedrawTime;if(g.showFps&&mt){mt=Math.round(mt);var Ze=Math.round(1e3/mt);Se.setTransform(1,0,0,1,0,0),Se.fillStyle="rgba(255, 0, 0, 0.75)",Se.strokeStyle="rgba(255, 0, 0, 0.75)",Se.lineWidth=1,Se.fillText("1 frame = "+mt+" ms = "+Ze+" fps",0,20),Se.strokeRect(0,30,250,20),Se.fillRect(0,30,250*Math.min(Ze/60,1),20)}l||(_[g.SELECT_BOX]=!1)}if(S&&1!==O){var Vt=b.contexts[g.DRAG],xn=g.data.bufferCanvases[g.MOTIONBLUR_BUFFER_DRAG],kn=function(Ft,pn,en){Ft.setTransform(1,0,0,1,0,0),en||!X?Ft.clearRect(0,0,g.canvasWidth,g.canvasHeight):Ae(Ft,0,0,g.canvasWidth,g.canvasHeight),Ft.drawImage(pn,0,0,g.canvasWidth*O,g.canvasHeight*O,0,0,g.canvasWidth,g.canvasHeight)};(_[g.NODE]||rt[g.NODE])&&(kn(b.contexts[g.NODE],g.data.bufferCanvases[g.MOTIONBLUR_BUFFER_NODE],rt[g.NODE]),_[g.NODE]=!1),(_[g.DRAG]||rt[g.DRAG])&&(kn(Vt,xn,rt[g.DRAG]),_[g.DRAG]=!1)}g.prevViewport=le,g.clearingMotionBlur&&(g.clearingMotionBlur=!1,g.motionBlurCleared=!0,g.motionBlur=!0),S&&(g.motionBlurTimeout=setTimeout(function(){g.motionBlurTimeout=null,g.clearedForMotionBlur[g.NODE]=!1,g.clearedForMotionBlur[g.DRAG]=!1,g.motionBlur=!1,g.clearingMotionBlur=!E,g.mbFrames=0,_[g.NODE]=!0,_[g.DRAG]=!0,g.redraw()},100)),s||w.emit("render")}},ca={drawPolygonPath:function(c,s,l,d,f,p){var g=d/2,y=f/2;c.beginPath&&c.beginPath(),c.moveTo(s+g*p[0],l+y*p[1]);for(var w=1;w<p.length/2;w++)c.lineTo(s+g*p[2*w],l+y*p[2*w+1]);c.closePath()},drawRoundPolygonPath:function(c,s,l,d,f,p){var g=d/2,y=f/2,w=St(d,f);c.beginPath&&c.beginPath();for(var b=0;b<p.length/4;b++){var E,_;_=0===b?p.length-2:4*b-2,E=4*b+2;var S=s+g*p[4*b],O=l+y*p[4*b+1],H=w/Math.tan(Math.acos(-p[_]*p[E]-p[_+1]*p[E+1])/2),W=S-H*p[_],X=O-H*p[_+1],ne=S+H*p[E],re=O+H*p[E+1];0===b?c.moveTo(W,X):c.lineTo(W,X),c.arcTo(S,O,ne,re,w)}c.closePath()},drawRoundRectanglePath:function(c,s,l,d,f){var p=d/2,g=f/2,y=dd(d,f);c.beginPath&&c.beginPath(),c.moveTo(s,l-g),c.arcTo(s+p,l-g,s+p,l,y),c.arcTo(s+p,l+g,s,l+g,y),c.arcTo(s-p,l+g,s-p,l,y),c.arcTo(s-p,l-g,s,l-g,y),c.lineTo(s,l-g),c.closePath()},drawBottomRoundRectanglePath:function(c,s,l,d,f){var p=d/2,g=f/2,y=dd(d,f);c.beginPath&&c.beginPath(),c.moveTo(s,l-g),c.lineTo(s+p,l-g),c.lineTo(s+p,l),c.arcTo(s+p,l+g,s,l+g,y),c.arcTo(s-p,l+g,s-p,l,y),c.lineTo(s-p,l-g),c.lineTo(s,l-g),c.closePath()},drawCutRectanglePath:function(c,s,l,d,f){var p=d/2,g=f/2;c.beginPath&&c.beginPath(),c.moveTo(s-p+8,l-g),c.lineTo(s+p-8,l-g),c.lineTo(s+p,l-g+8),c.lineTo(s+p,l+g-8),c.lineTo(s+p-8,l+g),c.lineTo(s-p+8,l+g),c.lineTo(s-p,l+g-8),c.lineTo(s-p,l-g+8),c.closePath()},drawBarrelPath:function(c,s,l,d,f){var p=d/2,g=f/2,y=s-p,w=s+p,b=l-g,_=l+g,E=Xc(d,f),S=E.widthOffset,O=E.heightOffset,R=E.ctrlPtOffsetPct*S;c.beginPath&&c.beginPath(),c.moveTo(y,b+O),c.lineTo(y,_-O),c.quadraticCurveTo(y+R,_,y+S,_),c.lineTo(w-S,_),c.quadraticCurveTo(w-R,_,w,_-O),c.lineTo(w,b+O),c.quadraticCurveTo(w-R,b,w-S,b),c.lineTo(y+S,b),c.quadraticCurveTo(y+R,b,y,b+O),c.closePath()}},yf=Math.sin(0),bu=Math.cos(0),Rg={},bf={},Gy=Math.PI/40,wu=0*Math.PI;wu<2*Math.PI;wu+=Gy)Rg[wu]=Math.sin(wu),bf[wu]=Math.cos(wu);ca.drawEllipsePath=function(c,s,l,d,f){if(c.beginPath&&c.beginPath(),c.ellipse)c.ellipse(s,l,d/2,f/2,0,0,2*Math.PI);else for(var p,g,y=d/2,w=f/2,b=0*Math.PI;b<2*Math.PI;b+=Gy)p=s-y*Rg[b]*yf+y*bf[b]*bu,g=l+w*bf[b]*yf+w*Rg[b]*bu,0===b?c.moveTo(p,g):c.lineTo(p,g);c.closePath()};var $d={};function Pg(c){var s=c.indexOf(",");return c.substr(s+1)}function Wd(c,s,l){var d=function(){return s.toDataURL(l,c.quality)};switch(c.output){case"blob-promise":return new bd(function(f,p){try{s.toBlob(function(g){null!=g?f(g):p(new Error("`canvas.toBlob()` sent a null value in its callback"))},l,c.quality)}catch(g){p(g)}});case"blob":return function $y(c,s){for(var l=atob(c),d=new ArrayBuffer(l.length),f=new Uint8Array(d),p=0;p<l.length;p++)f[p]=l.charCodeAt(p);return new Blob([d],{type:s})}(Pg(d()),l);case"base64":return Pg(d());default:return d()}}$d.createBuffer=function(c,s){var l=document.createElement("canvas");return l.width=c,l.height=s,[l,l.getContext("2d")]},$d.bufferCanvasImage=function(c){var s=this.cy,d=s.mutableElements().boundingBox(),f=this.findContainerClientCoords(),p=c.full?Math.ceil(d.w):f[2],g=c.full?Math.ceil(d.h):f[3],y=pe(c.maxWidth)||pe(c.maxHeight),w=this.getPixelRatio(),b=1;if(void 0!==c.scale)p*=c.scale,g*=c.scale,b=c.scale;else if(y){var _=1/0,E=1/0;pe(c.maxWidth)&&(_=b*c.maxWidth/p),pe(c.maxHeight)&&(E=b*c.maxHeight/g),p*=b=Math.min(_,E),g*=b}y||(p*=w,g*=w,b*=w);var S=document.createElement("canvas");S.width=p,S.height=g,S.style.width=p+"px",S.style.height=g+"px";var O=S.getContext("2d");if(p>0&&g>0){O.clearRect(0,0,p,g),O.globalCompositeOperation="source-over";var R=this.getCachedZSortedEles();if(c.full)O.translate(-d.x1*b,-d.y1*b),O.scale(b,b),this.drawElements(O,R),O.scale(1/b,1/b),O.translate(d.x1*b,d.y1*b);else{var H=s.pan(),W={x:H.x*b,y:H.y*b};b*=s.zoom(),O.translate(W.x,W.y),O.scale(b,b),this.drawElements(O,R),O.scale(1/b,1/b),O.translate(-W.x,-W.y)}c.bg&&(O.globalCompositeOperation="destination-over",O.fillStyle=c.bg,O.rect(0,0,p,g),O.fill())}return S},$d.png=function(c){return Wd(c,this.bufferCanvasImage(c),"image/png")},$d.jpg=function(c){return Wd(c,this.bufferCanvasImage(c),"image/jpeg")};var wc=Wy,hr=Wy.prototype;function Wy(c){var s=this;s.data={canvases:new Array(hr.CANVAS_LAYERS),contexts:new Array(hr.CANVAS_LAYERS),canvasNeedsRedraw:new Array(hr.CANVAS_LAYERS),bufferCanvases:new Array(hr.BUFFER_COUNT),bufferContexts:new Array(hr.CANVAS_LAYERS)};var l="-webkit-tap-highlight-color",d="rgba(0,0,0,0)";s.data.canvasContainer=document.createElement("div");var f=s.data.canvasContainer.style;s.data.canvasContainer.style[l]=d,f.position="relative",f.zIndex="0",f.overflow="hidden";var p=c.cy.container();p.appendChild(s.data.canvasContainer),p.style[l]=d;var g={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};J&&J.userAgent.match(/msie|trident|edge/i)&&(g["-ms-touch-action"]="none",g["touch-action"]="none");for(var y=0;y<hr.CANVAS_LAYERS;y++){var w=s.data.canvases[y]=document.createElement("canvas");s.data.contexts[y]=w.getContext("2d"),Object.keys(g).forEach(function(mt){w.style[mt]=g[mt]}),w.style.position="absolute",w.setAttribute("data-id","layer"+y),w.style.zIndex=String(hr.CANVAS_LAYERS-y),s.data.canvasContainer.appendChild(w),s.data.canvasNeedsRedraw[y]=!1}for(s.data.topCanvas=s.data.canvases[0],s.data.canvases[hr.NODE].setAttribute("data-id","layer"+hr.NODE+"-node"),s.data.canvases[hr.SELECT_BOX].setAttribute("data-id","layer"+hr.SELECT_BOX+"-selectbox"),s.data.canvases[hr.DRAG].setAttribute("data-id","layer"+hr.DRAG+"-drag"),y=0;y<hr.BUFFER_COUNT;y++)s.data.bufferCanvases[y]=document.createElement("canvas"),s.data.bufferContexts[y]=s.data.bufferCanvases[y].getContext("2d"),s.data.bufferCanvases[y].style.position="absolute",s.data.bufferCanvases[y].setAttribute("data-id","buffer"+y),s.data.bufferCanvases[y].style.zIndex=String(-y-1),s.data.bufferCanvases[y].style.visibility="hidden";s.pathsEnabled=!0;var b=Lr(),E=function(Ze){return{x:-Ze.w/2,y:-Ze.h/2}},De=function(Ze){return Ze.boundingBox(),Ze[0]._private.bodyBounds},Ce=function(Ze){return Ze.boundingBox(),Ze[0]._private.labelBounds.main||b},le=function(Ze){return Ze.boundingBox(),Ze[0]._private.labelBounds.source||b},_e=function(Ze){return Ze.boundingBox(),Ze[0]._private.labelBounds.target||b},he=function(Ze,xt){return xt},Ae=function(Ze,xt,Mt){var Lt=Ze?Ze+"-":"";return{x:xt.x+Mt.pstyle(Lt+"text-margin-x").pfValue,y:xt.y+Mt.pstyle(Lt+"text-margin-y").pfValue}},ge=function(Ze,xt,Mt){var Lt=Ze[0]._private.rscratch;return{x:Lt[xt],y:Lt[Mt]}},ct=s.data.eleTxrCache=new bc(s,{getKey:function(Ze){return Ze[0]._private.nodeKey},doesEleInvalidateKey:function(Ze){var xt=Ze[0]._private;return!(xt.oldBackgroundTimestamp===xt.backgroundTimestamp)},drawElement:function(Ze,xt,Mt,Lt,Vt){return s.drawElement(Ze,xt,Mt,!1,!1,Vt)},getBoundingBox:De,getRotationPoint:function(Ze){return function(Ze){return{x:(Ze.x1+Ze.x2)/2,y:(Ze.y1+Ze.y2)/2}}(De(Ze))},getRotationOffset:function(Ze){return E(De(Ze))},allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),rt=s.data.lblTxrCache=new bc(s,{getKey:function(Ze){return Ze[0]._private.labelStyleKey},drawElement:function(Ze,xt,Mt,Lt,Vt){return s.drawElementText(Ze,xt,Mt,Lt,"main",Vt)},getBoundingBox:Ce,getRotationPoint:function(Ze){return Ae("",ge(Ze,"labelX","labelY"),Ze)},getRotationOffset:function(Ze){var xt=Ce(Ze),Mt=E(Ce(Ze));if(Ze.isNode()){switch(Ze.pstyle("text-halign").value){case"left":Mt.x=-xt.w;break;case"right":Mt.x=0}switch(Ze.pstyle("text-valign").value){case"top":Mt.y=-xt.h;break;case"bottom":Mt.y=0}}return Mt},isVisible:he}),tt=s.data.slbTxrCache=new bc(s,{getKey:function(Ze){return Ze[0]._private.sourceLabelStyleKey},drawElement:function(Ze,xt,Mt,Lt,Vt){return s.drawElementText(Ze,xt,Mt,Lt,"source",Vt)},getBoundingBox:le,getRotationPoint:function(Ze){return Ae("source",ge(Ze,"sourceLabelX","sourceLabelY"),Ze)},getRotationOffset:function(Ze){return E(le(Ze))},isVisible:he}),_t=s.data.tlbTxrCache=new bc(s,{getKey:function(Ze){return Ze[0]._private.targetLabelStyleKey},drawElement:function(Ze,xt,Mt,Lt,Vt){return s.drawElementText(Ze,xt,Mt,Lt,"target",Vt)},getBoundingBox:_e,getRotationPoint:function(Ze){return Ae("target",ge(Ze,"targetLabelX","targetLabelY"),Ze)},getRotationOffset:function(Ze){return E(_e(Ze))},isVisible:he}),Dt=s.data.lyrTxrCache=new Ny(s);s.onUpdateEleCalcs(function(Ze,xt){ct.invalidateElements(xt),rt.invalidateElements(xt),tt.invalidateElements(xt),_t.invalidateElements(xt),Dt.invalidateElements(xt);for(var Mt=0;Mt<xt.length;Mt++){var Lt=xt[Mt]._private;Lt.oldBackgroundTimestamp=Lt.backgroundTimestamp}});var yt=function(Ze){for(var xt=0;xt<Ze.length;xt++)Dt.enqueueElementRefinement(Ze[xt].ele)};ct.onDequeue(yt),rt.onDequeue(yt),tt.onDequeue(yt),_t.onDequeue(yt)}hr.CANVAS_LAYERS=3,hr.SELECT_BOX=0,hr.DRAG=1,hr.NODE=2,hr.BUFFER_COUNT=3,hr.TEXTURE_BUFFER=0,hr.MOTIONBLUR_BUFFER_NODE=1,hr.MOTIONBLUR_BUFFER_DRAG=2,hr.redrawHint=function(c,s){var l=this;switch(c){case"eles":l.data.canvasNeedsRedraw[hr.NODE]=s;break;case"drag":l.data.canvasNeedsRedraw[hr.DRAG]=s;break;case"select":l.data.canvasNeedsRedraw[hr.SELECT_BOX]=s}};var aM=typeof Path2D<"u";hr.path2dEnabled=function(c){if(void 0===c)return this.pathsEnabled;this.pathsEnabled=!!c},hr.usePaths=function(){return aM&&this.pathsEnabled},hr.setImgSmoothing=function(c,s){null!=c.imageSmoothingEnabled?c.imageSmoothingEnabled=s:(c.webkitImageSmoothingEnabled=s,c.mozImageSmoothingEnabled=s,c.msImageSmoothingEnabled=s)},hr.getImgSmoothing=function(c){return null!=c.imageSmoothingEnabled?c.imageSmoothingEnabled:c.webkitImageSmoothingEnabled||c.mozImageSmoothingEnabled||c.msImageSmoothingEnabled},hr.makeOffscreenCanvas=function(c,s){var l;return"undefined"!==(typeof OffscreenCanvas>"u"?"undefined":te(OffscreenCanvas))?l=new OffscreenCanvas(c,s):((l=document.createElement("canvas")).width=c,l.height=s),l},[gf,io,la,vf,Ua,Ga,Bo,ca,$d,{nodeShapeImpl:function(c,s,l,d,f,p,g){switch(c){case"ellipse":return this.drawEllipsePath(s,l,d,f,p);case"polygon":return this.drawPolygonPath(s,l,d,f,p,g);case"round-polygon":return this.drawRoundPolygonPath(s,l,d,f,p,g);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(s,l,d,f,p);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(s,l,d,f,p);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(s,l,d,f,p);case"barrel":return this.drawBarrelPath(s,l,d,f,p)}}}].forEach(function(c){Zt(hr,c)});var Ng=[{type:"layout",extensions:df},{type:"renderer",extensions:[{name:"null",impl:fg},{name:"base",impl:yg},{name:"canvas",impl:wc}]}],qy={},Lg={};function qd(c,s,l){var d=l,f=function(_e){ur("Can not register `"+s+"` for `"+c+"` since `"+_e+"` already exists in the prototype and can not be overridden")};if("core"===c){if(hu.prototype[s])return f(s);hu.prototype[s]=l}else if("collection"===c){if(Ti.prototype[s])return f(s);Ti.prototype[s]=l}else if("layout"===c){for(var p=function(_e){this.options=_e,l.call(this,_e),ke(this._private)||(this._private={}),this._private.cy=_e.cy,this._private.listeners=[],this.createEmitter()},g=p.prototype=Object.create(l.prototype),y=[],w=0;w<y.length;w++){var b=y[w];g[b]=g[b]||function(){return this}}g.start&&!g.run?g.run=function(){return this.start(),this}:!g.start&&g.run&&(g.start=function(){return this.run(),this});var _=l.prototype.stop;g.stop=function(){var le=this.options;if(le&&le.animate){var _e=this.animations;if(_e)for(var he=0;he<_e.length;he++)_e[he].stop()}return _?_.call(this):this.emit("layoutstop"),this},g.destroy||(g.destroy=function(){return this}),g.cy=function(){return this._private.cy};var E=function(_e){return _e._private.cy},S={addEventFields:function(_e,he){he.layout=_e,he.cy=E(_e),he.target=_e},bubble:function(){return!0},parent:function(_e){return E(_e)}};Zt(g,{createEmitter:function(){return this._private.emitter=new Td(S,this),this},emitter:function(){return this._private.emitter},on:function(_e,he){return this.emitter().on(_e,he),this},one:function(_e,he){return this.emitter().one(_e,he),this},once:function(_e,he){return this.emitter().one(_e,he),this},removeListener:function(_e,he){return this.emitter().removeListener(_e,he),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(_e,he){return this.emitter().emit(_e,he),this}}),Dr.eventAliasesOn(g),d=p}else if("renderer"===c&&"null"!==s&&"base"!==s){var O=_f("renderer","base"),R=O.prototype,H=l,W=l.prototype,X=function(){O.apply(this,arguments),H.apply(this,arguments)},ne=X.prototype;for(var re in R){var se=R[re];if(null!=W[re])return f(re);ne[re]=se}for(var Ce in W)ne[Ce]=W[Ce];R.clientFunctions.forEach(function(le){ne[le]=ne[le]||function(){Sr("Renderer does not implement `renderer."+le+"()` on its prototype")}}),d=X}else if("__proto__"===c||"constructor"===c||"prototype"===c)return Sr(c+" is an illegal type to be registered, possibly lead to prototype pollutions");return jc({map:qy,keys:[c,s],value:d})}function _f(c,s){return al({map:qy,keys:[c,s]})}function Yy(c,s,l,d,f){return jc({map:Lg,keys:[c,s,l,d],value:f})}function Xy(c,s,l,d){return al({map:Lg,keys:[c,s,l,d]})}var xf=function(){return 2===arguments.length?_f.apply(null,arguments):3===arguments.length?qd.apply(null,arguments):4===arguments.length?Xy.apply(null,arguments):5===arguments.length?Yy.apply(null,arguments):void Sr("Invalid extension access syntax")};hu.prototype.extension=xf,Ng.forEach(function(c){c.extensions.forEach(function(s){qd(c.type,s.name,s.impl)})});var kl=function c(){if(!(this instanceof c))return new c;this.length=0},_c=kl.prototype;_c.instanceString=function(){return"stylesheet"},_c.selector=function(c){return this[this.length++]={selector:c,properties:[]},this},_c.css=function(c,s){var l=this.length-1;if(ye(c))this[l].properties.push({name:c,value:s});else if(ke(c))for(var d=c,f=Object.keys(d),p=0;p<f.length;p++){var g=f[p],y=d[g];if(null!=y){var w=ir.properties[g]||ir.properties[tn(g)];null!=w&&this[l].properties.push({name:w.name,value:y})}}return this},_c.style=_c.css,_c.generateStyle=function(c){var s=new ir(c);return this.appendToStyle(s)},_c.appendToStyle=function(c){for(var s=0;s<this.length;s++){var l=this[s],f=l.properties;c.selector(l.selector);for(var p=0;p<f.length;p++){var g=f[p];c.css(g.name,g.value)}}return c};var xc=function(s){return void 0===s&&(s={}),ke(s)?new hu(s):ye(s)?xf.apply(xf,arguments):void 0};xc.use=function(c){var s=Array.prototype.slice.call(arguments,1);return s.unshift(xc),c.apply(null,s),this},xc.warnings=function(c){return kp(c)},xc.version="3.23.0",xc.stylesheet=xc.Stylesheet=kl,Pe.exports=xc},5203:(Pe,Ne,$)=>{Pe.exports=$(8732)},8732:function(Pe,Ne){var $,G,N;(function(){var I,C,P,D,T,M,z,B,K,te,j,q,ae,Q,ce;P=Math.floor,te=Math.min,C=function(ee,Re){return ee<Re?-1:ee>Re?1:0},K=function(ee,Re,de,U,L){var V;if(null==de&&(de=0),null==L&&(L=C),de<0)throw new Error("lo must be non-negative");for(null==U&&(U=ee.length);de<U;)L(Re,ee[V=P((de+U)/2)])<0?U=V:de=V+1;return[].splice.apply(ee,[de,de-de].concat(Re)),Re},M=function(ee,Re,de){return null==de&&(de=C),ee.push(Re),Q(ee,0,ee.length-1,de)},T=function(ee,Re){var de,U;return null==Re&&(Re=C),de=ee.pop(),ee.length?(U=ee[0],ee[0]=de,ce(ee,0,Re)):U=de,U},B=function(ee,Re,de){var U;return null==de&&(de=C),U=ee[0],ee[0]=Re,ce(ee,0,de),U},z=function(ee,Re,de){var U;return null==de&&(de=C),ee.length&&de(ee[0],Re)<0&&(Re=(U=[ee[0],Re])[0],ee[0]=U[1],ce(ee,0,de)),Re},D=function(ee,Re){var U,V,ue,ve,oe;for(null==Re&&(Re=C),ve=[],U=0,V=(ue=function(){oe=[];for(var xe=0,Le=P(ee.length/2);0<=Le?xe<Le:xe>Le;0<=Le?xe++:xe--)oe.push(xe);return oe}.apply(this).reverse()).length;U<V;U++)ve.push(ce(ee,ue[U],Re));return ve},ae=function(ee,Re,de){var U;if(null==de&&(de=C),-1!==(U=ee.indexOf(Re)))return Q(ee,0,U,de),ce(ee,U,de)},j=function(ee,Re,de){var L,V,J,ue;if(null==de&&(de=C),!(L=ee.slice(0,Re)).length)return L;for(D(L,de),V=0,J=(ue=ee.slice(Re)).length;V<J;V++)z(L,ue[V],de);return L.sort(de).reverse()},q=function(ee,Re,de){var U,V,J,ue,ve,oe,xe,Le,ye;if(null==de&&(de=C),10*Re<=ee.length){if(!(J=ee.slice(0,Re).sort(de)).length)return J;for(V=J[J.length-1],ue=0,oe=(xe=ee.slice(Re)).length;ue<oe;ue++)de(U=xe[ue],V)<0&&(K(J,U,0,null,de),J.pop(),V=J[J.length-1]);return J}for(D(ee,de),ye=[],ve=0,Le=te(Re,ee.length);0<=Le?ve<Le:ve>Le;0<=Le?++ve:--ve)ye.push(T(ee,de));return ye},Q=function(ee,Re,de,U){var L,V,J;for(null==U&&(U=C),L=ee[de];de>Re&&U(L,V=ee[J=de-1>>1])<0;)ee[de]=V,de=J;return ee[de]=L},ce=function(ee,Re,de){var U,L,V,J,ue;for(null==de&&(de=C),L=ee.length,ue=Re,V=ee[Re],U=2*Re+1;U<L;)(J=U+1)<L&&!(de(ee[U],ee[J])<0)&&(U=J),ee[Re]=ee[U],U=2*(Re=U)+1;return ee[Re]=V,Q(ee,ue,Re,de)},I=function(){function ee(Re){this.cmp=Re??C,this.nodes=[]}return ee.push=M,ee.pop=T,ee.replace=B,ee.pushpop=z,ee.heapify=D,ee.updateItem=ae,ee.nlargest=j,ee.nsmallest=q,ee.prototype.push=function(Re){return M(this.nodes,Re,this.cmp)},ee.prototype.pop=function(){return T(this.nodes,this.cmp)},ee.prototype.peek=function(){return this.nodes[0]},ee.prototype.contains=function(Re){return-1!==this.nodes.indexOf(Re)},ee.prototype.replace=function(Re){return B(this.nodes,Re,this.cmp)},ee.prototype.pushpop=function(Re){return z(this.nodes,Re,this.cmp)},ee.prototype.heapify=function(){return D(this.nodes,this.cmp)},ee.prototype.updateItem=function(Re){return ae(this.nodes,Re,this.cmp)},ee.prototype.clear=function(){return this.nodes=[]},ee.prototype.empty=function(){return 0===this.nodes.length},ee.prototype.size=function(){return this.nodes.length},ee.prototype.clone=function(){var Re;return(Re=new ee).nodes=this.nodes.slice(0),Re},ee.prototype.toArray=function(){return this.nodes.slice(0)},ee.prototype.insert=ee.prototype.push,ee.prototype.top=ee.prototype.peek,ee.prototype.front=ee.prototype.peek,ee.prototype.has=ee.prototype.contains,ee.prototype.copy=ee.prototype.clone,ee}(),G=[],void 0===(N="function"==typeof($=function(){return I})?$.apply(Ne,G):$)||(Pe.exports=N)}).call(this)},4918:(Pe,Ne,$)=>{"use strict";var G=$(9344).default;const{isArray:N,isObject:I,isString:C}=$(2353),{asArray:P}=$(4249),{prependBase:D}=$(4920),T=$(3327),M=$(9522);function B(te){throw new T("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:te})}function K({context:te,base:j}){if(!te)return;const q=te["@context"];if(C(q))te["@context"]=D(j,q);else if(N(q))for(let ae=0;ae<q.length;++ae){const Q=q[ae];C(Q)?q[ae]=D(j,Q):I(Q)&&K({context:{"@context":Q},base:j})}else if(I(q))for(const ae in q)K({context:q[ae],base:j})}Pe.exports=class{constructor({sharedCache:j}){this.perOpCache=new Map,this.sharedCache=j}resolve({activeCtx:j,context:q,documentLoader:ae,base:Q,cycles:ce=new Set}){var ee=this;return G(function*(){q&&I(q)&&q["@context"]&&(q=q["@context"]),q=P(q);const Re=[];for(const de of q){if(C(de)){let V=ee._get(de);V||(V=yield ee._resolveRemoteContext({activeCtx:j,url:de,documentLoader:ae,base:Q,cycles:ce})),N(V)?Re.push(...V):Re.push(V);continue}if(null===de){Re.push(new M({document:null}));continue}I(de)||B(q);const U=JSON.stringify(de);let L=ee._get(U);L||(L=new M({document:de}),ee._cacheResolvedContext({key:U,resolved:L,tag:"static"})),Re.push(L)}return Re})()}_get(j){let q=this.perOpCache.get(j);if(!q){const ae=this.sharedCache.get(j);ae&&(q=ae.get("static"),q&&this.perOpCache.set(j,q))}return q}_cacheResolvedContext({key:j,resolved:q,tag:ae}){if(this.perOpCache.set(j,q),void 0!==ae){let Q=this.sharedCache.get(j);Q||(Q=new Map,this.sharedCache.set(j,Q)),Q.set(ae,q)}return q}_resolveRemoteContext({activeCtx:j,url:q,documentLoader:ae,base:Q,cycles:ce}){var ee=this;return G(function*(){q=D(Q,q);const{context:Re,remoteDoc:de}=yield ee._fetchContext({activeCtx:j,url:q,documentLoader:ae,cycles:ce});K({context:Re,base:Q=de.documentUrl||q});const U=yield ee.resolve({activeCtx:j,context:Re,documentLoader:ae,base:Q,cycles:ce});return ee._cacheResolvedContext({key:q,resolved:U,tag:de.tag}),U})()}_fetchContext({activeCtx:j,url:q,documentLoader:ae,cycles:Q}){return G(function*(){if(Q.size>10)throw new T("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===j.processingMode?"loading remote context failed":"context overflow",max:10});if(Q.has(q))throw new T("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===j.processingMode?"recursive context inclusion":"context overflow",url:q});let ce,ee;Q.add(q);try{ee=yield ae(q),ce=ee.document||null,C(ce)&&(ce=JSON.parse(ce))}catch(Re){throw new T("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:q,cause:Re})}if(!I(ce))throw new T("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:q});return ce="@context"in ce?{"@context":ce["@context"]}:{"@context":{}},ee.contextUrl&&(N(ce["@context"])||(ce["@context"]=[ce["@context"]]),ce["@context"].push(ee.contextUrl)),{context:ce,remoteDoc:ee}})()}}},3327:Pe=>{"use strict";Pe.exports=class extends Error{constructor($="An unspecified JSON-LD error occurred.",G="jsonld.Error",N={}){super($),this.name=G,this.message=$,this.details=N}}},779:Pe=>{"use strict";Pe.exports=Ne=>{class ${toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty($,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty($.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:$}),$.compact=function(G,N){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):Ne.compact(G,N)},$.expand=function(G){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):Ne.expand(G)},$.flatten=function(G){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):Ne.flatten(G)},$}},3865:(Pe,Ne,$)=>{"use strict";Pe.exports=$(4308).NQuads},2210:(Pe,Ne,$)=>{"use strict";var G=$(9344).default;Pe.exports=class{constructor(){this._requests={}}wrapLoader(I){const C=this;return C._loader=I,function(){return C.add.apply(C,arguments)}}add(I){var C=this;return G(function*(){let P=C._requests[I];if(P)return Promise.resolve(P);P=C._requests[I]=C._loader(I);try{return yield P}finally{delete C._requests[I]}})()}}},9522:(Pe,Ne,$)=>{"use strict";const G=$(5943);Pe.exports=class{constructor({document:C}){this.document=C,this.cache=new G({max:10})}getProcessed(C){return this.cache.get(C)}setProcessed(C,P){this.cache.set(C,P)}}},9857:(Pe,Ne,$)=>{"use strict";var G=$(9344).default;const N=$(3327),{isArray:I,isObject:C,isString:P,isUndefined:D}=$(2353),{isList:T,isValue:M,isGraph:z,isSimpleGraph:B,isSubjectReference:K}=$(9094),{expandIri:te,getContextValue:j,isKeyword:q,process:ae,processingMode:Q}=$(2134),{removeBase:ce,prependBase:ee}=$(4920),{REGEX_KEYWORD:Re,addValue:de,asArray:U,compareShortestLeast:L}=$(4249),V={};function ue(ve,oe,xe){if("@nest"!==te(ve,oe,{vocab:!0},xe))throw new N("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}Pe.exports=V,V.compact=function(){var ve=G(function*({activeCtx:oe,activeProperty:xe=null,element:Le,options:ye={}}){if(I(Le)){let ze=[];for(let ke=0;ke<Le.length;++ke){const be=yield V.compact({activeCtx:oe,activeProperty:xe,element:Le[ke],options:ye});null!==be&&ze.push(be)}return ye.compactArrays&&1===ze.length&&0===(j(oe,xe,"@container")||[]).length&&(ze=ze[0]),ze}const qe=j(oe,xe,"@context");if(D(qe)||(oe=yield ae({activeCtx:oe,localCtx:qe,propagate:!0,overrideProtected:!0,options:ye})),C(Le)){if(ye.link&&"@id"in Le&&ye.link.hasOwnProperty(Le["@id"])){const Je=ye.link[Le["@id"]];for(let Pt=0;Pt<Je.length;++Pt)if(Je[Pt].expanded===Le)return Je[Pt].compacted}if(M(Le)||K(Le)){const Je=V.compactValue({activeCtx:oe,activeProperty:xe,value:Le,options:ye});return ye.link&&K(Le)&&(ye.link.hasOwnProperty(Le["@id"])||(ye.link[Le["@id"]]=[]),ye.link[Le["@id"]].push({expanded:Le,compacted:Je})),Je}if(T(Le)&&(j(oe,xe,"@container")||[]).includes("@list"))return V.compact({activeCtx:oe,activeProperty:xe,element:Le["@list"],options:ye});const ze="@reverse"===xe,ke={},be=oe;!M(Le)&&!K(Le)&&(oe=oe.revertToPreviousContext());const pe=j(be,xe,"@context");D(pe)||(oe=yield ae({activeCtx:oe,localCtx:pe,propagate:!0,overrideProtected:!0,options:ye})),ye.link&&"@id"in Le&&(ye.link.hasOwnProperty(Le["@id"])||(ye.link[Le["@id"]]=[]),ye.link[Le["@id"]].push({expanded:Le,compacted:ke}));let nt=Le["@type"]||[];nt.length>1&&(nt=Array.from(nt).sort());const We=oe;for(const Je of nt){const Pt=V.compactIri({activeCtx:We,iri:Je,relativeTo:{vocab:!0}}),pt=j(be,Pt,"@context");D(pt)||(oe=yield ae({activeCtx:oe,localCtx:pt,options:ye,propagate:!1}))}const Ie=Object.keys(Le).sort();for(const Je of Ie){const Pt=Le[Je];if("@id"!==Je)if("@type"!==Je)if("@reverse"!==Je)if("@preserve"!==Je)if("@index"!==Je)if("@graph"!==Je&&"@list"!==Je&&"@included"!==Je&&q(Je)){const pt=V.compactIri({activeCtx:oe,iri:Je,relativeTo:{vocab:!0}});de(ke,pt,Pt)}else{if(!I(Pt))throw new N("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===Pt.length){const pt=V.compactIri({activeCtx:oe,iri:Je,value:Pt,relativeTo:{vocab:!0},reverse:ze}),at=oe.mappings.has(pt)?oe.mappings.get(pt)["@nest"]:null;let ut=ke;at&&(ue(oe,at,ye),C(ke[at])||(ke[at]={}),ut=ke[at]),de(ut,pt,Pt,{propertyIsArray:!0})}for(const pt of Pt){const at=V.compactIri({activeCtx:oe,iri:Je,value:pt,relativeTo:{vocab:!0},reverse:ze}),ut=oe.mappings.has(at)?oe.mappings.get(at)["@nest"]:null;let $e=ke;ut&&(ue(oe,ut,ye),C(ke[ut])||(ke[ut]={}),$e=ke[ut]);const Ee=j(oe,at,"@container")||[],Be=z(pt),ht=T(pt);let kt;ht?kt=pt["@list"]:Be&&(kt=pt["@graph"]);let ft=yield V.compact({activeCtx:oe,activeProperty:at,element:ht||Be?kt:pt,options:ye});if(ht){if(I(ft)||(ft=[ft]),Ee.includes("@list")){de($e,at,ft,{valueIsArray:!0,allowDuplicate:!0});continue}ft={[V.compactIri({activeCtx:oe,iri:"@list",relativeTo:{vocab:!0}})]:ft},"@index"in pt&&(ft[V.compactIri({activeCtx:oe,iri:"@index",relativeTo:{vocab:!0}})]=pt["@index"])}if(Be)if(Ee.includes("@graph")&&(Ee.includes("@id")||Ee.includes("@index")&&B(pt))){let Nt;$e.hasOwnProperty(at)?Nt=$e[at]:$e[at]=Nt={};const tn=(Ee.includes("@id")?pt["@id"]:pt["@index"])||V.compactIri({activeCtx:oe,iri:"@none",relativeTo:{vocab:!0}});de(Nt,tn,ft,{propertyIsArray:!ye.compactArrays||Ee.includes("@set")})}else Ee.includes("@graph")&&B(pt)?(I(ft)&&ft.length>1&&(ft={"@included":ft}),de($e,at,ft,{propertyIsArray:!ye.compactArrays||Ee.includes("@set")})):(I(ft)&&1===ft.length&&ye.compactArrays&&(ft=ft[0]),ft={[V.compactIri({activeCtx:oe,iri:"@graph",relativeTo:{vocab:!0}})]:ft},"@id"in pt&&(ft[V.compactIri({activeCtx:oe,iri:"@id",relativeTo:{vocab:!0}})]=pt["@id"]),"@index"in pt&&(ft[V.compactIri({activeCtx:oe,iri:"@index",relativeTo:{vocab:!0}})]=pt["@index"]),de($e,at,ft,{propertyIsArray:!ye.compactArrays||Ee.includes("@set")}));else if(Ee.includes("@language")||Ee.includes("@index")||Ee.includes("@id")||Ee.includes("@type")){let Nt,tn;if($e.hasOwnProperty(at)?Nt=$e[at]:$e[at]=Nt={},Ee.includes("@language"))M(ft)&&(ft=ft["@value"]),tn=pt["@language"];else if(Ee.includes("@index")){const Ot=j(oe,at,"@index")||"@index",on=V.compactIri({activeCtx:oe,iri:Ot,relativeTo:{vocab:!0}});if("@index"===Ot)tn=pt["@index"],delete ft[on];else{let hn;if([tn,...hn]=U(ft[Ot]||[]),P(tn))switch(hn.length){case 0:delete ft[Ot];break;case 1:ft[Ot]=hn[0];break;default:ft[Ot]=hn}else tn=null}}else if(Ee.includes("@id")){const Ot=V.compactIri({activeCtx:oe,iri:"@id",relativeTo:{vocab:!0}});tn=ft[Ot],delete ft[Ot]}else if(Ee.includes("@type")){const Ot=V.compactIri({activeCtx:oe,iri:"@type",relativeTo:{vocab:!0}});let on;switch([tn,...on]=U(ft[Ot]||[]),on.length){case 0:delete ft[Ot];break;case 1:ft[Ot]=on[0];break;default:ft[Ot]=on}1===Object.keys(ft).length&&"@id"in pt&&(ft=yield V.compact({activeCtx:oe,activeProperty:at,element:{"@id":pt["@id"]},options:ye}))}tn||(tn=V.compactIri({activeCtx:oe,iri:"@none",relativeTo:{vocab:!0}})),de(Nt,tn,ft,{propertyIsArray:Ee.includes("@set")})}else{const Nt=!ye.compactArrays||Ee.includes("@set")||Ee.includes("@list")||I(ft)&&0===ft.length||"@list"===Je||"@graph"===Je;de($e,at,ft,{propertyIsArray:Nt})}}}else{if((j(oe,xe,"@container")||[]).includes("@index"))continue;const at=V.compactIri({activeCtx:oe,iri:Je,relativeTo:{vocab:!0}});de(ke,at,Pt)}else{const pt=yield V.compact({activeCtx:oe,activeProperty:xe,element:Pt,options:ye});I(pt)&&0===pt.length||de(ke,Je,pt)}else{const pt=yield V.compact({activeCtx:oe,activeProperty:"@reverse",element:Pt,options:ye});for(const at in pt)if(oe.mappings.has(at)&&oe.mappings.get(at).reverse){const ut=pt[at],Ee=(j(oe,at,"@container")||[]).includes("@set")||!ye.compactArrays;de(ke,at,ut,{propertyIsArray:Ee}),delete pt[at]}if(Object.keys(pt).length>0){const at=V.compactIri({activeCtx:oe,iri:Je,relativeTo:{vocab:!0}});de(ke,at,pt)}}else{let pt=U(Pt).map(Be=>V.compactIri({activeCtx:be,iri:Be,relativeTo:{vocab:!0}}));1===pt.length&&(pt=pt[0]);const at=V.compactIri({activeCtx:oe,iri:"@type",relativeTo:{vocab:!0}}),Ee=(j(oe,at,"@container")||[]).includes("@set")&&Q(oe,1.1)||I(pt)&&0===Pt.length;de(ke,at,pt,{propertyIsArray:Ee})}else{let pt=U(Pt).map(ut=>V.compactIri({activeCtx:oe,iri:ut,relativeTo:{vocab:!1},base:ye.base}));1===pt.length&&(pt=pt[0]),ke[V.compactIri({activeCtx:oe,iri:"@id",relativeTo:{vocab:!0}})]=pt}}return ke}return Le});return function(oe){return ve.apply(this,arguments)}}(),V.compactIri=({activeCtx:ve,iri:oe,value:xe=null,relativeTo:Le={vocab:!1},reverse:ye=!1,base:qe=null})=>{if(null===oe)return oe;ve.isPropertyTermScoped&&ve.previousContext&&(ve=ve.previousContext);const ze=ve.getInverse();if(q(oe)&&oe in ze&&"@none"in ze[oe]&&"@type"in ze[oe]["@none"]&&"@none"in ze[oe]["@none"]["@type"])return ze[oe]["@none"]["@type"]["@none"];if(Le.vocab&&oe in ze){const We=ve["@language"]||"@none",Ie=[];C(xe)&&"@index"in xe&&!("@graph"in xe)&&Ie.push("@index","@index@set"),C(xe)&&"@preserve"in xe&&(xe=xe["@preserve"][0]),z(xe)?("@index"in xe&&Ie.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in xe&&Ie.push("@graph@id","@graph@id@set"),Ie.push("@graph","@graph@set","@set"),"@index"in xe||Ie.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in xe||Ie.push("@graph@id","@graph@id@set")):C(xe)&&!M(xe)&&Ie.push("@id","@id@set","@type","@set@type");let Je="@language",Pt="@null";if(ye)Je="@type",Pt="@reverse",Ie.push("@set");else if(T(xe)){"@index"in xe||Ie.push("@list");const at=xe["@list"];if(0===at.length)Je="@any",Pt="@none";else{let ut=0===at.length?We:null,$e=null;for(let Ee=0;Ee<at.length;++Ee){const Be=at[Ee];let ht="@none",kt="@none";if(M(Be)?"@direction"in Be?ht=`${(Be["@language"]||"").toLowerCase()}_${Be["@direction"]}`:"@language"in Be?ht=Be["@language"].toLowerCase():"@type"in Be?kt=Be["@type"]:ht="@null":kt="@id",null===ut?ut=ht:ht!==ut&&M(Be)&&(ut="@none"),null===$e?$e=kt:kt!==$e&&($e="@none"),"@none"===ut&&"@none"===$e)break}ut=ut||"@none",$e=$e||"@none","@none"!==$e?(Je="@type",Pt=$e):Pt=ut}}else{if(M(xe))if("@language"in xe&&!("@index"in xe)){Ie.push("@language","@language@set"),Pt=xe["@language"];const at=xe["@direction"];at&&(Pt=`${Pt}_${at}`)}else"@direction"in xe&&!("@index"in xe)?Pt=`_${xe["@direction"]}`:"@type"in xe&&(Je="@type",Pt=xe["@type"]);else Je="@type",Pt="@id";Ie.push("@set")}Ie.push("@none"),C(xe)&&!("@index"in xe)&&Ie.push("@index","@index@set"),M(xe)&&1===Object.keys(xe).length&&Ie.push("@language","@language@set");const pt=function J(ve,oe,xe,Le,ye,qe){null===qe&&(qe="@null");const ze=[];if(("@id"===qe||"@reverse"===qe)&&C(xe)&&"@id"in xe){"@reverse"===qe&&ze.push("@reverse");const be=V.compactIri({activeCtx:ve,iri:xe["@id"],relativeTo:{vocab:!0}});ve.mappings.has(be)&&ve.mappings.get(be)&&ve.mappings.get(be)["@id"]===xe["@id"]?ze.push.apply(ze,["@vocab","@id"]):ze.push.apply(ze,["@id","@vocab"])}else{ze.push(qe);const be=ze.find(pe=>pe.includes("_"));be&&ze.push(be.replace(/^[^_]+_/,"_"))}ze.push("@none");const ke=ve.inverse[oe];for(const be of Le){if(!(be in ke))continue;const pe=ke[be][ye];for(const nt of ze)if(nt in pe)return pe[nt]}return null}(ve,oe,xe,Ie,Je,Pt);if(null!==pt)return pt}if(Le.vocab&&"@vocab"in ve){const We=ve["@vocab"];if(0===oe.indexOf(We)&&oe!==We){const Ie=oe.substr(We.length);if(!ve.mappings.has(Ie))return Ie}}let ke=null;const be=[];let pe=ve.fastCurieMap;const nt=oe.length-1;for(let We=0;We<nt&&oe[We]in pe;++We)pe=pe[oe[We]],""in pe&&be.push(pe[""][0]);for(let We=be.length-1;We>=0;--We){const Ie=be[We],Je=Ie.terms;for(const Pt of Je){const pt=Pt+":"+oe.substr(Ie.iri.length);ve.mappings.get(Pt)._prefix&&(!ve.mappings.has(pt)||null===xe&&ve.mappings.get(pt)["@id"]===oe)&&(null===ke||L(pt,ke)<0)&&(ke=pt)}}if(null!==ke)return ke;for(const[We,Ie]of ve.mappings)if(Ie&&Ie._prefix&&oe.startsWith(We+":"))throw new N(`Absolute IRI "${oe}" confused with prefix "${We}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:ve});if(!Le.vocab){if("@base"in ve){if(ve["@base"]){const We=ce(ee(qe,ve["@base"]),oe);return Re.test(We)?`./${We}`:We}return oe}return ce(qe,oe)}return oe},V.compactValue=({activeCtx:ve,activeProperty:oe,value:xe,options:Le})=>{if(M(xe)){const ke=j(ve,oe,"@type"),be=j(ve,oe,"@language"),pe=j(ve,oe,"@direction"),nt=j(ve,oe,"@container")||[],We="@index"in xe&&!nt.includes("@index");if(!We&&"@none"!==ke&&(xe["@type"]===ke||"@language"in xe&&xe["@language"]===be&&"@direction"in xe&&xe["@direction"]===pe||"@language"in xe&&xe["@language"]===be||"@direction"in xe&&xe["@direction"]===pe))return xe["@value"];const Ie=Object.keys(xe).length,Je=1===Ie||2===Ie&&"@index"in xe&&!We,Pt="@language"in ve,pt=P(xe["@value"]),at=ve.mappings.has(oe)&&null===ve.mappings.get(oe)["@language"];if(Je&&"@none"!==ke&&(!Pt||!pt||at))return xe["@value"];const ut={};return We&&(ut[V.compactIri({activeCtx:ve,iri:"@index",relativeTo:{vocab:!0}})]=xe["@index"]),"@type"in xe?ut[V.compactIri({activeCtx:ve,iri:"@type",relativeTo:{vocab:!0}})]=V.compactIri({activeCtx:ve,iri:xe["@type"],relativeTo:{vocab:!0}}):"@language"in xe&&(ut[V.compactIri({activeCtx:ve,iri:"@language",relativeTo:{vocab:!0}})]=xe["@language"]),"@direction"in xe&&(ut[V.compactIri({activeCtx:ve,iri:"@direction",relativeTo:{vocab:!0}})]=xe["@direction"]),ut[V.compactIri({activeCtx:ve,iri:"@value",relativeTo:{vocab:!0}})]=xe["@value"],ut}const ye=te(ve,oe,{vocab:!0},Le),qe=j(ve,oe,"@type"),ze=V.compactIri({activeCtx:ve,iri:xe["@id"],relativeTo:{vocab:"@vocab"===qe},base:Le.base});return"@id"===qe||"@vocab"===qe||"@graph"===ye?ze:{[V.compactIri({activeCtx:ve,iri:"@id",relativeTo:{vocab:!0}})]:ze}}},313:Pe=>{"use strict";const Ne="http://www.w3.org/1999/02/22-rdf-syntax-ns#",$="http://www.w3.org/2001/XMLSchema#";Pe.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:Ne,RDF_LIST:Ne+"List",RDF_FIRST:Ne+"first",RDF_REST:Ne+"rest",RDF_NIL:Ne+"nil",RDF_TYPE:Ne+"type",RDF_PLAIN_LITERAL:Ne+"PlainLiteral",RDF_XML_LITERAL:Ne+"XMLLiteral",RDF_JSON_LITERAL:Ne+"JSON",RDF_OBJECT:Ne+"object",RDF_LANGSTRING:Ne+"langString",XSD:$,XSD_BOOLEAN:$+"boolean",XSD_DOUBLE:$+"double",XSD_INTEGER:$+"integer",XSD_STRING:$+"string"}},2134:(Pe,Ne,$)=>{"use strict";var G=$(9344).default;const N=$(4249),I=$(3327),{isArray:C,isObject:P,isString:D,isUndefined:T}=$(2353),{isAbsolute:M,isRelative:z,prependBase:B}=$(4920),{handleEvent:K}=$(5775),{REGEX_BCP47:te,REGEX_KEYWORD:j,asArray:q,compareShortestLeast:ae}=$(4249),Q=new Map,ee={};function Re(U,L,V,J,ue,ve){if(null===L||!D(L)||ee.isKeyword(L))return L;if(L.match(j))return null;if(J&&J.hasOwnProperty(L)&&!0!==ue.get(L)&&ee.createTermDefinition({activeCtx:U,localCtx:J,term:L,defined:ue,options:ve}),(V=V||{}).vocab){const xe=U.mappings.get(L);if(null===xe)return null;if(P(xe)&&"@id"in xe)return xe["@id"]}const oe=L.indexOf(":");if(oe>0){const xe=L.substr(0,oe),Le=L.substr(oe+1);if("_"===xe||0===Le.indexOf("//"))return L;J&&J.hasOwnProperty(xe)&&ee.createTermDefinition({activeCtx:U,localCtx:J,term:xe,defined:ue,options:ve});const ye=U.mappings.get(xe);if(ye&&ye._prefix)return ye["@id"]+Le;if(M(L))return L}if(V.vocab&&"@vocab"in U)L=U["@vocab"]+L;else if(V.base){let xe,Le;"@base"in U?U["@base"]?(Le=B(ve.base,U["@base"]),xe=B(Le,L)):(Le=U["@base"],xe=L):(Le=ve.base,xe=B(ve.base,L)),L=xe}return L}function de(U,L){if(!U||"object"!=typeof U||!L||"object"!=typeof L)return U===L;const V=Array.isArray(U);if(V!==Array.isArray(L))return!1;if(V){if(U.length!==L.length)return!1;for(let ve=0;ve<U.length;++ve)if(!de(U[ve],L[ve]))return!1;return!0}const J=Object.keys(U),ue=Object.keys(L);if(J.length!==ue.length)return!1;for(const ve in U){let oe=U[ve],xe=L[ve];if("@container"===ve&&Array.isArray(oe)&&Array.isArray(xe)&&(oe=oe.slice().sort(),xe=xe.slice().sort()),!de(oe,xe))return!1}return!0}Pe.exports=ee,ee.process=function(){var U=G(function*({activeCtx:L,localCtx:V,options:J,propagate:ue=!0,overrideProtected:ve=!1,cycles:oe=new Set}){if(P(V)&&"@context"in V&&C(V["@context"])&&(V=V["@context"]),0===q(V).length)return L;const Le=[],ye=[({event:be,next:pe})=>{Le.push(be),pe()}];J.eventHandler&&ye.push(J.eventHandler);const qe=J;J={...J,eventHandler:ye};const ze=yield J.contextResolver.resolve({activeCtx:L,context:V,documentLoader:J.documentLoader,base:J.base});P(ze[0].document)&&"boolean"==typeof ze[0].document["@propagate"]&&(ue=ze[0].document["@propagate"]);let ke=L;!ue&&!ke.previousContext&&(ke=ke.clone(),ke.previousContext=L);for(const be of ze){let{document:pe}=be;if(L=ke,null===pe){if(!ve&&0!==Object.keys(L.protected).length)throw new I("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});ke=L=ee.getInitialContext(J).clone();continue}const nt=be.getProcessed(L);if(nt){if(qe.eventHandler)for(const Ie of nt.events)K({event:Ie,options:qe});ke=L=nt.context;continue}if(P(pe)&&"@context"in pe&&(pe=pe["@context"]),!P(pe))throw new I("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:pe});ke=ke.clone();const We=new Map;if("@version"in pe){if(1.1!==pe["@version"])throw new I("Unsupported JSON-LD version: "+pe["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:pe});if(L.processingMode&&"json-ld-1.0"===L.processingMode)throw new I("@version: "+pe["@version"]+" not compatible with "+L.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:pe});ke.processingMode="json-ld-1.1",ke["@version"]=pe["@version"],We.set("@version",!0)}if(ke.processingMode=ke.processingMode||L.processingMode,"@base"in pe){let Ie=pe["@base"];if(null!==Ie&&!M(Ie)){if(!z(Ie))throw new I('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:pe});Ie=B(ke["@base"],Ie)}ke["@base"]=Ie,We.set("@base",!0)}if("@vocab"in pe){const Ie=pe["@vocab"];if(null===Ie)delete ke["@vocab"];else{if(!D(Ie))throw new I('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:pe});if(!M(Ie)&&ee.processingMode(ke,1))throw new I('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:pe});{const Je=Re(ke,Ie,{vocab:!0,base:!0},void 0,void 0,J);M(Je)||J.eventHandler&&K({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab:Je}},options:J}),ke["@vocab"]=Je}}We.set("@vocab",!0)}if("@language"in pe){const Ie=pe["@language"];if(null===Ie)delete ke["@language"];else{if(!D(Ie))throw new I('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:pe});Ie.match(te)||J.eventHandler&&K({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Ie}},options:J}),ke["@language"]=Ie.toLowerCase()}We.set("@language",!0)}if("@direction"in pe){const Ie=pe["@direction"];if("json-ld-1.0"===L.processingMode)throw new I("Invalid JSON-LD syntax; @direction not compatible with "+L.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:pe});if(null===Ie)delete ke["@direction"];else{if("ltr"!==Ie&&"rtl"!==Ie)throw new I('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:pe});ke["@direction"]=Ie}We.set("@direction",!0)}if("@propagate"in pe){const Ie=pe["@propagate"];if("json-ld-1.0"===L.processingMode)throw new I("Invalid JSON-LD syntax; @propagate not compatible with "+L.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:pe});if("boolean"!=typeof Ie)throw new I("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:V});We.set("@propagate",!0)}if("@import"in pe){const Ie=pe["@import"];if("json-ld-1.0"===L.processingMode)throw new I("Invalid JSON-LD syntax; @import not compatible with "+L.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:pe});if(!D(Ie))throw new I("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:V});const Je=yield J.contextResolver.resolve({activeCtx:L,context:Ie,documentLoader:J.documentLoader,base:J.base});if(1!==Je.length)throw new I("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:V});const Pt=Je[0].getProcessed(L);if(Pt)pe=Pt;else{const pt=Je[0].document;if("@import"in pt)throw new I("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:V});for(const at in pt)pe.hasOwnProperty(at)||(pe[at]=pt[at]);Je[0].setProcessed(L,pe)}We.set("@import",!0)}We.set("@protected",pe["@protected"]||!1);for(const Ie in pe)if(ee.createTermDefinition({activeCtx:ke,localCtx:pe,term:Ie,defined:We,options:J,overrideProtected:ve}),P(pe[Ie])&&"@context"in pe[Ie]){const Je=pe[Ie]["@context"];let Pt=!0;if(D(Je)){const pt=B(J.base,Je);oe.has(pt)?Pt=!1:oe.add(pt)}if(Pt)try{yield ee.process({activeCtx:ke.clone(),localCtx:pe[Ie]["@context"],overrideProtected:!0,options:J,cycles:oe})}catch{throw new I("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:pe[Ie]["@context"],term:Ie})}}be.setProcessed(L,{context:ke,events:Le})}return ke});return function(L){return U.apply(this,arguments)}}(),ee.createTermDefinition=({activeCtx:U,localCtx:L,term:V,defined:J,options:ue,overrideProtected:ve=!1})=>{if(J.has(V)){if(J.get(V))return;throw new I("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:L,term:V})}let oe;if(J.set(V,!1),L.hasOwnProperty(V)&&(oe=L[V]),"@type"===V&&P(oe)&&"@set"===(oe["@container"]||"@set")&&ee.processingMode(U,1.1)){const be=["@container","@id","@protected"],pe=Object.keys(oe);if(0===pe.length||pe.some(nt=>!be.includes(nt)))throw new I("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:L,term:V})}else{if(ee.isKeyword(V))throw new I("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:L,term:V});if(V.match(j))return void(ue.eventHandler&&K({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term:V}},options:ue}));if(""===V)throw new I("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:L})}const xe=U.mappings.get(V);U.mappings.has(V)&&U.mappings.delete(V);let Le=!1;if((D(oe)||null===oe)&&(Le=!0,oe={"@id":oe}),!P(oe))throw new I("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:L});const ye={};U.mappings.set(V,ye),ye.reverse=!1;const qe=["@container","@id","@language","@reverse","@type"];ee.processingMode(U,1.1)&&qe.push("@context","@direction","@index","@nest","@prefix","@protected");for(const be in oe)if(!qe.includes(be))throw new I("Invalid JSON-LD syntax; a term definition must not contain "+be,"jsonld.SyntaxError",{code:"invalid term definition",context:L});const ze=V.indexOf(":");if(ye._termHasColon=ze>0,"@reverse"in oe){if("@id"in oe)throw new I("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:L});if("@nest"in oe)throw new I("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:L});const be=oe["@reverse"];if(!D(be))throw new I("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:L});if(be.match(j))return ue.eventHandler&&K({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse:be}},options:ue}),void(xe?U.mappings.set(V,xe):U.mappings.delete(V));const pe=Re(U,be,{vocab:!0,base:!1},L,J,ue);if(!M(pe))throw new I("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:L});ye["@id"]=pe,ye.reverse=!0}else if("@id"in oe){let be=oe["@id"];if(be&&!D(be))throw new I("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:L});if(null===be)ye["@id"]=null;else{if(!ee.isKeyword(be)&&be.match(j))return ue.eventHandler&&K({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:be}},options:ue}),void(xe?U.mappings.set(V,xe):U.mappings.delete(V));if(be!==V){if(be=Re(U,be,{vocab:!0,base:!1},L,J,ue),!M(be)&&!ee.isKeyword(be))throw new I("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:L});if(V.match(/(?::[^:])|\//)&&Re(U,V,{vocab:!0,base:!1},L,new Map(J).set(V,!0),ue)!==be)throw new I("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:L});ye["@id"]=be,ye._prefix=Le&&!ye._termHasColon&&be.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in ye))if(ye._termHasColon){const be=V.substr(0,ze);if(L.hasOwnProperty(be)&&ee.createTermDefinition({activeCtx:U,localCtx:L,term:be,defined:J,options:ue}),U.mappings.has(be)){const pe=V.substr(ze+1);ye["@id"]=U.mappings.get(be)["@id"]+pe}else ye["@id"]=V}else if("@type"===V)ye["@id"]=V;else{if(!("@vocab"in U))throw new I("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:L,term:V});ye["@id"]=U["@vocab"]+V}if((!0===oe["@protected"]||!0===J.get("@protected")&&!1!==oe["@protected"])&&(U.protected[V]=!0,ye.protected=!0),J.set(V,!0),"@type"in oe){let be=oe["@type"];if(!D(be))throw new I("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:L});if("@json"===be||"@none"===be){if(ee.processingMode(U,1))throw new I(`Invalid JSON-LD syntax; an @context @type value must not be "${be}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:L})}else if("@id"!==be&&"@vocab"!==be){if(be=Re(U,be,{vocab:!0,base:!1},L,J,ue),!M(be))throw new I("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:L});if(0===be.indexOf("_:"))throw new I("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:L})}ye["@type"]=be}if("@container"in oe){const be=D(oe["@container"])?[oe["@container"]]:oe["@container"]||[],pe=["@list","@set","@index","@language"];let nt=!0;const We=be.includes("@set");if(ee.processingMode(U,1.1)){if(pe.push("@graph","@id","@type"),be.includes("@list")){if(1!==be.length)throw new I("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:L})}else if(be.includes("@graph")){if(be.some(Ie=>"@graph"!==Ie&&"@id"!==Ie&&"@index"!==Ie&&"@set"!==Ie))throw new I("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:L})}else nt&=be.length<=(We?2:1);if(be.includes("@type")&&(ye["@type"]=ye["@type"]||"@id",!["@id","@vocab"].includes(ye["@type"])))throw new I("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:L})}else nt&=!C(oe["@container"]),nt&=be.length<=1;if(nt&=be.every(Ie=>pe.includes(Ie)),nt&=!(We&&be.includes("@list")),!nt)throw new I("Invalid JSON-LD syntax; @context @container value must be one of the following: "+pe.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:L});if(ye.reverse&&!be.every(Ie=>["@index","@set"].includes(Ie)))throw new I("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:L});ye["@container"]=be}if("@index"in oe){if(!("@container"in oe)||!ye["@container"].includes("@index"))throw new I(`Invalid JSON-LD syntax; @index without @index in @container: "${oe["@index"]}" on term "${V}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:L});if(!D(oe["@index"])||0===oe["@index"].indexOf("@"))throw new I(`Invalid JSON-LD syntax; @index must expand to an IRI: "${oe["@index"]}" on term "${V}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:L});ye["@index"]=oe["@index"]}if("@context"in oe&&(ye["@context"]=oe["@context"]),"@language"in oe&&!("@type"in oe)){let be=oe["@language"];if(null!==be&&!D(be))throw new I("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:L});null!==be&&(be=be.toLowerCase()),ye["@language"]=be}if("@prefix"in oe){if(V.match(/:|\//))throw new I("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:L});if(ee.isKeyword(ye["@id"]))throw new I("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:L});if("boolean"!=typeof oe["@prefix"])throw new I("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:L});ye._prefix=!0===oe["@prefix"]}if("@direction"in oe){const be=oe["@direction"];if(null!==be&&"ltr"!==be&&"rtl"!==be)throw new I('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:L});ye["@direction"]=be}if("@nest"in oe){const be=oe["@nest"];if(!D(be)||"@nest"!==be&&0===be.indexOf("@"))throw new I("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:L});ye["@nest"]=be}const ke=ye["@id"];if("@context"===ke||"@preserve"===ke)throw new I("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:L});if(xe&&xe.protected&&!ve&&(U.protected[V]=!0,ye.protected=!0,!de(xe,ye)))throw new I("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:L,term:V})},ee.expandIri=(U,L,V,J)=>Re(U,L,V,void 0,void 0,J),ee.getInitialContext=U=>{const L=JSON.stringify({processingMode:U.processingMode}),V=Q.get(L);if(V)return V;const J={processingMode:U.processingMode,mappings:new Map,inverse:null,getInverse:function ue(){const ye=this;if(ye.inverse)return ye.inverse;const qe=ye.inverse={},ze=ye.fastCurieMap={},ke={},be=(ye["@language"]||"@none").toLowerCase(),pe=ye["@direction"],nt=ye.mappings,We=[...nt.keys()].sort(ae);for(const Ie of We){const Je=nt.get(Ie);if(null===Je)continue;let Pt=Je["@container"]||"@none";if(Pt=[].concat(Pt).sort().join(""),null===Je["@id"])continue;const pt=q(Je["@id"]);for(const at of pt){let ut=qe[at];const $e=ee.isKeyword(at);if(ut)!$e&&!Je._termHasColon&&ke[at].push(Ie);else if(qe[at]=ut={},!$e&&!Je._termHasColon){ke[at]=[Ie];const Ee={iri:at,terms:ke[at]};at[0]in ze?ze[at[0]].push(Ee):ze[at[0]]=[Ee]}if(ut[Pt]||(ut[Pt]={"@language":{},"@type":{},"@any":{}}),ut=ut[Pt],oe(Ie,ut["@any"],"@none"),Je.reverse)oe(Ie,ut["@type"],"@reverse");else if("@none"===Je["@type"])oe(Ie,ut["@any"],"@none"),oe(Ie,ut["@language"],"@none"),oe(Ie,ut["@type"],"@none");else if("@type"in Je)oe(Ie,ut["@type"],Je["@type"]);else if("@language"in Je&&"@direction"in Je){const Ee=Je["@language"],Be=Je["@direction"];oe(Ie,ut["@language"],Ee&&Be?`${Ee}_${Be}`.toLowerCase():Ee?Ee.toLowerCase():Be?`_${Be}`:"@null")}else"@language"in Je?oe(Ie,ut["@language"],(Je["@language"]||"@null").toLowerCase()):"@direction"in Je?oe(Ie,ut["@language"],Je["@direction"]?`_${Je["@direction"]}`:"@none"):pe?(oe(Ie,ut["@language"],`_${pe}`),oe(Ie,ut["@language"],"@none"),oe(Ie,ut["@type"],"@none")):(oe(Ie,ut["@language"],be),oe(Ie,ut["@language"],"@none"),oe(Ie,ut["@type"],"@none"))}}for(const Ie in ze)ve(ze,Ie,1);return qe},clone:function xe(){const ye={};return ye.mappings=N.clone(this.mappings),ye.clone=this.clone,ye.inverse=null,ye.getInverse=this.getInverse,ye.protected=N.clone(this.protected),this.previousContext&&(ye.previousContext=this.previousContext.clone()),ye.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(ye["@base"]=this["@base"]),"@language"in this&&(ye["@language"]=this["@language"]),"@vocab"in this&&(ye["@vocab"]=this["@vocab"]),ye},revertToPreviousContext:function Le(){return this.previousContext?this.previousContext.clone():this},protected:{}};return 1e4===Q.size&&Q.clear(),Q.set(L,J),J;function ve(ye,qe,ze){const ke=ye[qe],be=ye[qe]={};let pe,nt;for(const We of ke)pe=We.iri,nt=ze>=pe.length?"":pe[ze],nt in be?be[nt].push(We):be[nt]=[We];for(const We in be)""!==We&&ve(be,We,ze+1)}function oe(ye,qe,ze){qe.hasOwnProperty(ze)||(qe[ze]=ye)}},ee.getContextValue=(U,L,V)=>{if(null===L)return"@context"===V?void 0:null;if(U.mappings.has(L)){const J=U.mappings.get(L);if(T(V))return J;if(J.hasOwnProperty(V))return J[V]}return"@language"===V&&V in U||"@direction"===V&&V in U?U[V]:"@context"!==V?null:void 0},ee.processingMode=(U,L)=>L.toString()>="1.1"?!U.processingMode||U.processingMode>="json-ld-"+L.toString():"json-ld-1.0"===U.processingMode,ee.isKeyword=U=>{if(!D(U)||"@"!==U[0])return!1;switch(U){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1}},8719:(Pe,Ne,$)=>{"use strict";var G=$(9344).default;const{parseLinkHeader:N,buildHeaders:I}=$(4249),{LINK_HEADER_CONTEXT:C}=$(313),P=$(3327),D=$(2210),{prependBase:T}=$(4920),M=/(^|(\r\n))link:/i;function z(B,K,te){const j=new(B=B||XMLHttpRequest);return new Promise((q,ae)=>{j.onload=()=>q(j),j.onerror=Q=>ae(Q),j.open("GET",K,!0);for(const Q in te)j.setRequestHeader(Q,te[Q]);j.send()})}Pe.exports=({secure:B,headers:K={},xhr:te}={headers:{}})=>{return K=I(K),(new D).wrapLoader(q);function q(Q){return ae.apply(this,arguments)}function ae(){return(ae=G(function*(Q){if(0!==Q.indexOf("http:")&&0!==Q.indexOf("https:"))throw new P('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:Q});if(B&&0!==Q.indexOf("https"))throw new P('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:Q});let ce;try{ce=yield z(te,Q,K)}catch(L){throw new P("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:Q,cause:L})}if(ce.status>=400)throw new P("URL could not be dereferenced: "+ce.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:Q,httpStatusCode:ce.status});let ee={contextUrl:null,documentUrl:Q,document:ce.response},Re=null;const de=ce.getResponseHeader("Content-Type");let U;if(M.test(ce.getAllResponseHeaders())&&(U=ce.getResponseHeader("Link")),U&&"application/ld+json"!==de){const L=N(U),V=L[C];if(Array.isArray(V))throw new P("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:Q});V&&(ee.contextUrl=V.target),Re=L.alternate,Re&&"application/ld+json"==Re.type&&!(de||"").match(/^application\/(\w*\+)?json$/)&&(ee=yield q(T(Q,Re.target)))}return ee})).apply(this,arguments)}}},5775:(Pe,Ne,$)=>{"use strict";const G=$(3327),{isArray:N}=$(2353),{asArray:I}=$(4249),C={};function P({event:T,handlers:M}){let z=!0;for(let B=0;z&&B<M.length;++B){z=!1;const K=M[B];if(N(K))z=P({event:T,handlers:K});else if("function"==typeof K)K({event:T,next:()=>{z=!0}});else{if("object"!=typeof K)throw new G("Invalid event handler.","jsonld.InvalidEventHandler",{event:T});T.code in K?K[T.code]({event:T,next:()=>{z=!0}}):z=!0}}return z}Pe.exports=C,C.defaultEventHandler=null,C.setupEventHandler=({options:T={}})=>{const M=[].concat(T.safe?C.safeEventHandler:[],T.eventHandler?I(T.eventHandler):[],C.defaultEventHandler?C.defaultEventHandler:[]);return 0===M.length?null:M},C.handleEvent=({event:T,options:M})=>{P({event:T,handlers:M.eventHandler})};const D=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference"]);C.safeEventHandler=function({event:M,next:z}){if("warning"===M.level&&D.has(M.code))throw new G("Safe mode validation error.","jsonld.ValidationError",{event:M});z()},C.logEventHandler=function({event:M,next:z}){console.log(`EVENT: ${M.message}`,{event:M}),z()},C.logWarningEventHandler=function({event:M,next:z}){"warning"===M.level&&console.warn(`WARNING: ${M.message}`,{event:M}),z()},C.unhandledEventHandler=function({event:M}){throw new G("No handler for event.","jsonld.UnhandledEvent",{event:M})},C.setDefaultEventHandler=function({eventHandler:T}={}){C.defaultEventHandler=T?I(T):null}},554:(Pe,Ne,$)=>{"use strict";var G=$(9344).default;const N=$(3327),{isArray:I,isObject:C,isEmptyObject:P,isString:D,isUndefined:T}=$(2353),{isList:M,isValue:z,isGraph:B,isSubject:K}=$(9094),{expandIri:te,getContextValue:j,isKeyword:q,process:ae,processingMode:Q}=$(2134),{isAbsolute:ce}=$(4920),{REGEX_BCP47:ee,REGEX_KEYWORD:Re,addValue:de,asArray:U,getValues:L,validateTypeValue:V}=$(4249),{handleEvent:J}=$(5775),ue={};function ve(ze){return oe.apply(this,arguments)}function oe(){return(oe=G(function*({activeCtx:ze,activeProperty:ke,expandedActiveProperty:be,element:pe,expandedParent:nt,options:We={},insideList:Ie,typeKey:Je,typeScopedContext:Pt}){const pt=Object.keys(pe).sort(),at=[];let ut;const $e=pe[Je]&&"@json"===te(ze,I(pe[Je])?pe[Je][0]:pe[Je],{vocab:!0},{...We,typeExpansion:!0});for(const Ee of pt){let ht,Be=pe[Ee];if("@context"===Ee)continue;const kt=te(ze,Ee,{vocab:!0},We);if(null===kt||!ce(kt)&&!q(kt)){We.eventHandler&&J({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:Ee,expandedProperty:kt}},options:We});continue}if(q(kt)){if("@reverse"===be)throw new N("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:Be});if(kt in nt&&"@included"!==kt&&"@type"!==kt)throw new N("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:kt})}if("@id"===kt){if(!D(Be)){if(!We.isFrame)throw new N('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:Be});if(C(Be)){if(!P(Be))throw new N('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Be})}else{if(!I(Be))throw new N('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Be});if(!Be.every(Ot=>D(Ot)))throw new N('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Be})}}de(nt,"@id",U(Be).map(Ot=>{if(D(Ot)){const on=te(ze,Ot,{base:!0},We);return We.eventHandler&&(null===on?J(null===Ot?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:Ot}},options:We}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:Ot}},options:We}):ce(on)||J({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:Ot,expandedId:on}},options:We})),on}return Ot}),{propertyIsArray:We.isFrame});continue}if("@type"===kt){C(Be)&&(Be=Object.fromEntries(Object.entries(Be).map(([Ot,on])=>[te(Pt,Ot,{vocab:!0}),U(on).map(hn=>te(Pt,hn,{base:!0,vocab:!0},{...We,typeExpansion:!0}))]))),V(Be,We.isFrame),de(nt,"@type",U(Be).map(Ot=>{if(D(Ot)){const on=te(Pt,Ot,{base:!0,vocab:!0},{...We,typeExpansion:!0});return"@json"!==on&&!ce(on)&&We.eventHandler&&J({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:Ot}},options:We}),on}return Ot}),{propertyIsArray:We.isFrame});continue}if("@included"===kt&&Q(ze,1.1)){const Ot=U(yield ue.expand({activeCtx:ze,activeProperty:ke,element:Be,options:We}));if(!Ot.every(on=>K(on)))throw new N("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:Be});de(nt,"@included",Ot,{propertyIsArray:!0});continue}if("@graph"===kt&&!C(Be)&&!I(Be))throw new N('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:Be});if("@value"===kt){ut=Be,$e&&Q(ze,1.1)?nt["@value"]=Be:de(nt,"@value",Be,{propertyIsArray:We.isFrame});continue}if("@language"===kt){if(null===Be)continue;if(!D(Be)&&!We.isFrame)throw new N('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:Be});Be=U(Be).map(Ot=>D(Ot)?Ot.toLowerCase():Ot);for(const Ot of Be)D(Ot)&&!Ot.match(ee)&&We.eventHandler&&J({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Ot}},options:We});de(nt,"@language",Be,{propertyIsArray:We.isFrame});continue}if("@direction"===kt){if(!D(Be)&&!We.isFrame)throw new N('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:Be});Be=U(Be);for(const Ot of Be)if(D(Ot)&&"ltr"!==Ot&&"rtl"!==Ot)throw new N('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:Be});de(nt,"@direction",Be,{propertyIsArray:We.isFrame});continue}if("@index"===kt){if(!D(Be))throw new N('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:Be});de(nt,"@index",Be);continue}if("@reverse"===kt){if(!C(Be))throw new N('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:Be});if(ht=yield ue.expand({activeCtx:ze,activeProperty:"@reverse",element:Be,options:We}),"@reverse"in ht)for(const on in ht["@reverse"])de(nt,on,ht["@reverse"][on],{propertyIsArray:!0});let Ot=nt["@reverse"]||null;for(const on in ht){if("@reverse"===on)continue;null===Ot&&(Ot=nt["@reverse"]={}),de(Ot,on,[],{propertyIsArray:!0});const hn=ht[on];for(let $n=0;$n<hn.length;++$n){const _r=hn[$n];if(z(_r)||M(_r))throw new N('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:ht});de(Ot,on,_r,{propertyIsArray:!0})}}continue}if("@nest"===kt){at.push(Ee);continue}let ft=ze;const Nt=j(ze,Ee,"@context");T(Nt)||(ft=yield ae({activeCtx:ze,localCtx:Nt,propagate:!0,overrideProtected:!0,options:We}));const tn=j(ft,Ee,"@container")||[];if(tn.includes("@language")&&C(Be))ht=Le(ft,Be,j(ft,Ee,"@direction"),We);else if(tn.includes("@index")&&C(Be)){const Ot=tn.includes("@graph"),on=j(ft,Ee,"@index")||"@index",hn="@index"!==on&&te(ze,on,{vocab:!0},We);ht=yield ye({activeCtx:ft,options:We,activeProperty:Ee,value:Be,asGraph:Ot,indexKey:on,propertyIndex:hn})}else if(tn.includes("@id")&&C(Be)){const Ot=tn.includes("@graph");ht=yield ye({activeCtx:ft,options:We,activeProperty:Ee,value:Be,asGraph:Ot,indexKey:"@id"})}else if(tn.includes("@type")&&C(Be))ht=yield ye({activeCtx:ft.revertToPreviousContext(),options:We,activeProperty:Ee,value:Be,asGraph:!1,indexKey:"@type"});else{const Ot="@list"===kt;if(Ot||"@set"===kt){let on=ke;Ot&&"@graph"===be&&(on=null),ht=yield ue.expand({activeCtx:ft,activeProperty:on,element:Be,options:We,insideList:Ot})}else ht="@json"===j(ze,Ee,"@type")?{"@type":"@json","@value":Be}:yield ue.expand({activeCtx:ft,activeProperty:Ee,element:Be,options:We,insideList:!1})}if(null!==ht||"@value"===kt){if("@list"!==kt&&!M(ht)&&tn.includes("@list")&&(ht={"@list":U(ht)}),tn.includes("@graph")&&!tn.some(Ot=>"@id"===Ot||"@index"===Ot)&&(ht=U(ht).map(Ot=>({"@graph":U(Ot)}))),ft.mappings.has(Ee)&&ft.mappings.get(Ee).reverse){const Ot=nt["@reverse"]=nt["@reverse"]||{};ht=U(ht);for(let on=0;on<ht.length;++on){const hn=ht[on];if(z(hn)||M(hn))throw new N('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:ht});de(Ot,kt,hn,{propertyIsArray:!0})}continue}de(nt,kt,ht,{propertyIsArray:!0})}}if("@value"in nt&&("@json"!==nt["@type"]||!Q(ze,1.1))&&(C(ut)||I(ut))&&!We.isFrame)throw new N('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:ut});for(const Ee of at){const Be=I(pe[Ee])?pe[Ee]:[pe[Ee]];for(const ht of Be){if(!C(ht)||Object.keys(ht).some(kt=>"@value"===te(ze,kt,{vocab:!0},We)))throw new N("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:ht});yield ve({activeCtx:ze,activeProperty:ke,expandedActiveProperty:be,element:ht,expandedParent:nt,options:We,insideList:Ie,typeScopedContext:Pt,typeKey:Je})}}})).apply(this,arguments)}function xe({activeCtx:ze,activeProperty:ke,value:be,options:pe}){if(null==be)return null;const nt=te(ze,ke,{vocab:!0},pe);if("@id"===nt)return te(ze,be,{base:!0},pe);if("@type"===nt)return te(ze,be,{vocab:!0,base:!0},{...pe,typeExpansion:!0});const We=j(ze,ke,"@type");if(("@id"===We||"@graph"===nt)&&D(be)){const Je=te(ze,be,{base:!0},pe);return null===Je&&be.match(Re)&&pe.eventHandler&&J({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:ke}},options:pe}),{"@id":Je}}if("@vocab"===We&&D(be))return{"@id":te(ze,be,{vocab:!0,base:!0},pe)};if(q(nt))return be;const Ie={};if(We&&!["@id","@vocab","@none"].includes(We))Ie["@type"]=We;else if(D(be)){const Je=j(ze,ke,"@language");null!==Je&&(Ie["@language"]=Je);const Pt=j(ze,ke,"@direction");null!==Pt&&(Ie["@direction"]=Pt)}return["boolean","number","string"].includes(typeof be)||(be=be.toString()),Ie["@value"]=be,Ie}function Le(ze,ke,be,pe){const nt=[],We=Object.keys(ke).sort();for(const Ie of We){const Je=te(ze,Ie,{vocab:!0},pe);let Pt=ke[Ie];I(Pt)||(Pt=[Pt]);for(const pt of Pt){if(null===pt)continue;if(!D(pt))throw new N("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:ke});const at={"@value":pt};"@none"!==Je&&(Ie.match(ee)||pe.eventHandler&&J({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Ie}},options:pe}),at["@language"]=Ie.toLowerCase()),be&&(at["@direction"]=be),nt.push(at)}}return nt}function ye(ze){return qe.apply(this,arguments)}function qe(){return(qe=G(function*({activeCtx:ze,options:ke,activeProperty:be,value:pe,asGraph:nt,indexKey:We,propertyIndex:Ie}){const Je=[],Pt=Object.keys(pe).sort(),pt="@type"===We;for(let at of Pt){if(pt){const Ee=j(ze,at,"@context");T(Ee)||(ze=yield ae({activeCtx:ze,localCtx:Ee,propagate:!1,options:ke}))}let $e,ut=pe[at];I(ut)||(ut=[ut]),ut=yield ue.expand({activeCtx:ze,activeProperty:be,element:ut,options:ke,insideList:!1,insideIndex:!0}),$e=Ie?"@none"===at?"@none":xe({activeCtx:ze,activeProperty:We,value:at,options:ke}):te(ze,at,{vocab:!0},ke),"@id"===We?at=te(ze,at,{base:!0},ke):pt&&(at=$e);for(let Ee of ut){if(nt&&!B(Ee)&&(Ee={"@graph":[Ee]}),"@type"===We)"@none"===$e||(Ee["@type"]=Ee["@type"]?[at].concat(Ee["@type"]):[at]);else{if(z(Ee)&&!["@language","@type","@index"].includes(We))throw new N(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${We}".`,"jsonld.SyntaxError",{code:"invalid value object",value:Ee});Ie?"@none"!==$e&&de(Ee,Ie,$e,{propertyIsArray:!0,prependValue:!0}):"@none"!==$e&&!(We in Ee)&&(Ee[We]=at)}Je.push(Ee)}}return Je})).apply(this,arguments)}Pe.exports=ue,ue.expand=function(){var ze=G(function*({activeCtx:ke,activeProperty:be=null,element:pe,options:nt={},insideList:We=!1,insideIndex:Ie=!1,typeScopedContext:Je=null}){if(null==pe)return null;if("@default"===be&&(nt=Object.assign({},nt,{isFrame:!1})),!I(pe)&&!C(pe))return We||null!==be&&"@graph"!==te(ke,be,{vocab:!0},nt)?xe({activeCtx:ke,activeProperty:be,value:pe,options:nt}):(nt.eventHandler&&J({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:pe}},options:nt}),null);if(I(pe)){let ht=[];const kt=j(ke,be,"@container")||[];We=We||kt.includes("@list");for(let ft=0;ft<pe.length;++ft){let Nt=yield ue.expand({activeCtx:ke,activeProperty:be,element:pe[ft],options:nt,insideIndex:Ie,typeScopedContext:Je});We&&I(Nt)&&(Nt={"@list":Nt}),null!==Nt&&(I(Nt)?ht=ht.concat(Nt):ht.push(Nt))}return ht}const Pt=te(ke,be,{vocab:!0},nt),pt=j(ke,be,"@context");Je=Je||(ke.previousContext?ke:null);let at=Object.keys(pe).sort(),ut=!Ie;if(ut&&Je&&at.length<=2&&!at.includes("@context"))for(const ht of at){const kt=te(Je,ht,{vocab:!0},nt);if("@value"===kt){ut=!1,ke=Je;break}if("@id"===kt&&1===at.length){ut=!1;break}}ut&&(ke=ke.revertToPreviousContext()),T(pt)||(ke=yield ae({activeCtx:ke,localCtx:pt,propagate:!0,overrideProtected:!0,options:nt})),"@context"in pe&&(ke=yield ae({activeCtx:ke,localCtx:pe["@context"],options:nt})),Je=ke;let $e=null;for(const ht of at)if("@type"===te(ke,ht,{vocab:!0},nt)){$e=$e||ht;const ft=pe[ht],Nt=Array.isArray(ft)?ft.length>1?ft.slice().sort():ft:[ft];for(const tn of Nt){const Ot=j(Je,tn,"@context");T(Ot)||(ke=yield ae({activeCtx:ke,localCtx:Ot,options:nt,propagate:!1}))}}let Ee={};yield ve({activeCtx:ke,activeProperty:be,expandedActiveProperty:Pt,element:pe,expandedParent:Ee,options:nt,insideList:We,typeKey:$e,typeScopedContext:Je}),at=Object.keys(Ee);let Be=at.length;if("@value"in Ee){if("@type"in Ee&&("@language"in Ee||"@direction"in Ee))throw new N('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:Ee});let ht=Be-1;if("@type"in Ee&&(ht-=1),"@index"in Ee&&(ht-=1),"@language"in Ee&&(ht-=1),"@direction"in Ee&&(ht-=1),0!==ht)throw new N('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:Ee});const kt=null===Ee["@value"]?[]:U(Ee["@value"]),ft=L(Ee,"@type");if(!Q(ke,1.1)||!ft.includes("@json")||1!==ft.length)if(0===kt.length)nt.eventHandler&&J({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:Ee}},options:nt}),Ee=null;else{if(!kt.every(Nt=>D(Nt)||P(Nt))&&"@language"in Ee)throw new N("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:Ee});if(!ft.every(Nt=>ce(Nt)&&!(D(Nt)&&0===Nt.indexOf("_:"))||P(Nt)))throw new N('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:Ee})}}else if("@type"in Ee&&!I(Ee["@type"]))Ee["@type"]=[Ee["@type"]];else if("@set"in Ee||"@list"in Ee){if(Be>1&&(2!==Be||!("@index"in Ee)))throw new N('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:Ee});"@set"in Ee&&(Ee=Ee["@set"],at=Object.keys(Ee),Be=at.length)}else 1===Be&&"@language"in Ee&&(nt.eventHandler&&J({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:Ee}},options:nt}),Ee=null);if(C(Ee)&&!nt.keepFreeFloatingNodes&&!We&&(null===be||"@graph"===Pt)&&(0===Be||"@value"in Ee||"@list"in Ee||1===Be&&"@id"in Ee)){if(nt.eventHandler){let ht,kt;0===Be?(ht="empty object",kt="Dropping empty object."):"@value"in Ee?(ht="object with only @value",kt="Dropping object with only @value."):"@list"in Ee?(ht="object with only @list",kt="Dropping object with only @list."):1===Be&&"@id"in Ee&&(ht="object with only @id",kt="Dropping object with only @id."),J({event:{type:["JsonLdEvent"],code:ht,level:"warning",message:kt,details:{value:Ee}},options:nt})}Ee=null}return Ee});return function(ke){return ze.apply(this,arguments)}}()},7613:(Pe,Ne,$)=>{"use strict";const{isSubjectReference:G}=$(9094),{createMergedNodeMap:N}=$(5057),I={};Pe.exports=I,I.flatten=C=>{const P=N(C),D=[],T=Object.keys(P).sort();for(let M=0;M<T.length;++M){const z=P[T[M]];G(z)||D.push(z)}return D}},1938:(Pe,Ne,$)=>{"use strict";const{isKeyword:G}=$(2134),N=$(9094),I=$(2353),C=$(4249),P=$(4920),D=$(3327),{createNodeMap:T,mergeNodeMapGraphs:M}=$(5057),z={};function B(U){const L={};for(const V in U)void 0!==U[V]&&(L["@"+V]=[U[V]]);return[L]}function K(U,L,V){for(let J=V.length-1;J>=0;--J){const ue=V[J];if(ue.graph===L&&ue.subject["@id"]===U["@id"])return!0}return!1}function te(U,L,V){const J="@"+V;let ue=J in U?U[J][0]:L[V];if("embed"===V)if(!0===ue)ue="@once";else if(!1===ue)ue="@never";else if("@always"!==ue&&"@never"!==ue&&"@link"!==ue&&"@first"!==ue&&"@last"!==ue&&"@once"!==ue)throw new D("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:U});return ue}function j(U){if(!I.isArray(U)||1!==U.length||!I.isObject(U[0]))throw new D("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:U});if("@id"in U[0])for(const L of C.asArray(U[0]["@id"]))if(!I.isObject(L)&&!P.isAbsolute(L)||I.isString(L)&&0===L.indexOf("_:"))throw new D("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:U});if("@type"in U[0])for(const L of C.asArray(U[0]["@type"]))if(!I.isObject(L)&&!P.isAbsolute(L)||I.isString(L)&&0===L.indexOf("_:"))throw new D("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:U})}function ae(U,L,V,J){let ue=!0,ve=!1;for(const oe in V){let xe=!1;const Le=C.getValues(L,oe),ye=0===C.getValues(V,oe).length;if("@id"===oe){if(I.isEmptyObject(V["@id"][0]||{})?xe=!0:V["@id"].length>=0&&(xe=V["@id"].includes(Le[0])),!J.requireAll)return xe}else if("@type"===oe){if(ue=!1,ye){if(Le.length>0)return!1;xe=!0}else if(1===V["@type"].length&&I.isEmptyObject(V["@type"][0]))xe=Le.length>0;else for(const qe of V["@type"])xe=!(!I.isObject(qe)||!("@default"in qe))||xe||Le.some(ze=>ze===qe);if(!J.requireAll)return xe}else{if(G(oe))continue;{const qe=C.getValues(V,oe)[0];let ze=!1;if(qe&&(j([qe]),ze="@default"in qe),ue=!1,0===Le.length&&ze)continue;if(Le.length>0&&ye)return!1;if(void 0===qe){if(Le.length>0)return!1;xe=!0}else if(N.isList(qe)){const ke=qe["@list"][0];if(N.isList(Le[0])){const be=Le[0]["@list"];N.isValue(ke)?xe=be.some(pe=>de(ke,pe)):(N.isSubject(ke)||N.isSubjectReference(ke))&&(xe=be.some(pe=>Re(U,ke,pe,J)))}}else xe=N.isValue(qe)?Le.some(ke=>de(qe,ke)):N.isSubjectReference(qe)?Le.some(ke=>Re(U,qe,ke,J)):!!I.isObject(qe)&&Le.length>0}}if(!xe&&J.requireAll)return!1;ve=ve||xe}return ue||ve}function Q(U,L){const V=U.uniqueEmbeds[U.graph],J=V[L],ue=J.parent,ve=J.property,oe={"@id":L};if(I.isArray(ue)){for(let Le=0;Le<ue.length;++Le)if(C.compareValues(ue[Le],oe)){ue[Le]=oe;break}}else{const Le=I.isArray(ue[ve]);C.removeValue(ue,ve,oe,{propertyIsArray:Le}),C.addValue(ue,ve,oe,{propertyIsArray:Le})}const xe=Le=>{const ye=Object.keys(V);for(const qe of ye)qe in V&&I.isObject(V[qe].parent)&&V[qe].parent["@id"]===Le&&(delete V[qe],xe(qe))};xe(L)}function ce(U,L){if(I.isArray(U))return U.map(V=>ce(V,L));if(I.isObject(U)){if("@preserve"in U)return U["@preserve"][0];if(N.isValue(U))return U;if(N.isList(U))return U["@list"]=ce(U["@list"],L),U;if("@id"in U){const V=U["@id"];if(L.link.hasOwnProperty(V)){const J=L.link[V].indexOf(U);if(-1!==J)return L.link[V][J];L.link[V].push(U)}else L.link[V]=[U]}for(const V in U)"@id"===V&&L.bnodesToClear.includes(U[V])?delete U["@id"]:U[V]=ce(U[V],L)}return U}function ee(U,L,V){I.isObject(U)?C.addValue(U,L,V,{propertyIsArray:!0}):U.push(V)}function Re(U,L,V,J){if(!("@id"in V))return!1;const ue=U.subjects[V["@id"]];return ue&&ae(U,ue,L,J)}function de(U,L){const V=L["@value"],J=L["@type"],ue=L["@language"],ve=U["@value"]?I.isArray(U["@value"])?U["@value"]:[U["@value"]]:[],oe=U["@type"]?I.isArray(U["@type"])?U["@type"]:[U["@type"]]:[],xe=U["@language"]?I.isArray(U["@language"])?U["@language"]:[U["@language"]]:[];return 0===ve.length&&0===oe.length&&0===xe.length||!(!ve.includes(V)&&!I.isEmptyObject(ve[0])||!(!J&&0===oe.length||oe.includes(J)||J&&I.isEmptyObject(oe[0]))||!(!ue&&0===xe.length||xe.includes(ue)||ue&&I.isEmptyObject(xe[0])))}Pe.exports=z,z.frameMergedOrDefault=(U,L,V)=>{const J={options:V,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},ue=new C.IdentifierIssuer("_:b");T(U,J.graphMap,"@default",ue),V.merged&&(J.graphMap["@merged"]=M(J.graphMap),J.graph="@merged"),J.subjects=J.graphMap[J.graph];const ve=[];return z.frame(J,Object.keys(J.subjects).sort(),L,ve),V.pruneBlankNodeIdentifiers&&(V.bnodesToClear=Object.keys(J.bnodeMap).filter(oe=>1===J.bnodeMap[oe].length)),V.link={},ce(ve,V)},z.frame=(U,L,V,J,ue=null)=>{j(V);const ve=U.options,oe={embed:te(V=V[0],ve,"embed"),explicit:te(V,ve,"explicit"),requireAll:te(V,ve,"requireAll")};U.link.hasOwnProperty(U.graph)||(U.link[U.graph]={});const xe=U.link[U.graph],Le=function q(U,L,V,J){const ue={};for(const ve of L){const oe=U.graphMap[U.graph][ve];ae(U,oe,V,J)&&(ue[ve]=oe)}return ue}(U,L,V,oe),ye=Object.keys(Le).sort();for(const qe of ye){const ze=Le[qe];if(null===ue?U.uniqueEmbeds={[U.graph]:{}}:U.uniqueEmbeds[U.graph]=U.uniqueEmbeds[U.graph]||{},"@link"===oe.embed&&qe in xe){ee(J,ue,xe[qe]);continue}const ke={"@id":qe};if(0===qe.indexOf("_:")&&C.addValue(U.bnodeMap,qe,ke,{propertyIsArray:!0}),xe[qe]=ke,("@first"===oe.embed||"@last"===oe.embed)&&U.is11)throw new D("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:V});if(U.embedded||!U.uniqueEmbeds[U.graph].hasOwnProperty(qe)){if(U.embedded&&("@never"===oe.embed||K(ze,U.graph,U.subjectStack))){ee(J,ue,ke);continue}if(U.embedded&&("@first"==oe.embed||"@once"==oe.embed)&&U.uniqueEmbeds[U.graph].hasOwnProperty(qe)){ee(J,ue,ke);continue}if("@last"===oe.embed&&qe in U.uniqueEmbeds[U.graph]&&Q(U,qe),U.uniqueEmbeds[U.graph][qe]={parent:J,property:ue},U.subjectStack.push({subject:ze,graph:U.graph}),qe in U.graphMap){let be=!1,pe=null;"@graph"in V?(pe=V["@graph"][0],be=!("@merged"===qe||"@default"===qe),I.isObject(pe)||(pe={})):(be="@merged"!==U.graph,pe={}),be&&z.frame({...U,graph:qe,embedded:!1},Object.keys(U.graphMap[qe]).sort(),[pe],ke,"@graph")}"@included"in V&&z.frame({...U,embedded:!1},L,V["@included"],ke,"@included");for(const be of Object.keys(ze).sort())if(G(be)){if(ke[be]=C.clone(ze[be]),"@type"===be)for(const pe of ze["@type"])0===pe.indexOf("_:")&&C.addValue(U.bnodeMap,pe,ke,{propertyIsArray:!0})}else if(!oe.explicit||be in V)for(const pe of ze[be]){const nt=be in V?V[be]:B(oe);if(N.isList(pe)){const We=V[be]&&V[be][0]&&V[be][0]["@list"]?V[be][0]["@list"]:B(oe),Ie={"@list":[]};ee(ke,be,Ie);const Je=pe["@list"];for(const Pt of Je)N.isSubjectReference(Pt)?z.frame({...U,embedded:!0},[Pt["@id"]],We,Ie,"@list"):ee(Ie,"@list",C.clone(Pt))}else N.isSubjectReference(pe)?z.frame({...U,embedded:!0},[pe["@id"]],nt,ke,be):de(nt[0],pe)&&ee(ke,be,C.clone(pe))}for(const be of Object.keys(V).sort()){if("@type"===be){if(!I.isObject(V[be][0])||!("@default"in V[be][0]))continue}else if(G(be))continue;const pe=V[be][0]||{};if(!te(pe,ve,"omitDefault")&&!(be in ke)){let We="@null";"@default"in pe&&(We=C.clone(pe["@default"])),I.isArray(We)||(We=[We]),ke[be]=[{"@preserve":We}]}}for(const be of Object.keys(V["@reverse"]||{}).sort()){const pe=V["@reverse"][be];for(const nt of Object.keys(U.subjects))C.getValues(U.subjects[nt],be).some(Ie=>Ie["@id"]===qe)&&(ke["@reverse"]=ke["@reverse"]||{},C.addValue(ke["@reverse"],be,[],{propertyIsArray:!0}),z.frame({...U,embedded:!0},[nt],pe,ke["@reverse"][be],ue))}ee(J,ue,ke),U.subjectStack.pop()}}},z.cleanupNull=(U,L)=>{if(I.isArray(U))return U.map(J=>z.cleanupNull(J,L)).filter(J=>J);if("@null"===U)return null;if(I.isObject(U)){if("@id"in U){const V=U["@id"];if(L.link.hasOwnProperty(V)){const J=L.link[V].indexOf(U);if(-1!==J)return L.link[V][J];L.link[V].push(U)}else L.link[V]=[U]}for(const V in U)U[V]=z.cleanupNull(U[V],L)}return U}},2216:(Pe,Ne,$)=>{"use strict";var G=$(9344).default;const N=$(3327),I=$(9094),C=$(2353),{REGEX_BCP47:P,addValue:D}=$(4249),{handleEvent:T}=$(5775),{RDF_LIST:M,RDF_FIRST:z,RDF_REST:B,RDF_NIL:K,RDF_TYPE:te,RDF_JSON_LITERAL:j,XSD_BOOLEAN:q,XSD_DOUBLE:ae,XSD_INTEGER:Q,XSD_STRING:ce}=$(313),ee={};function Re(de,U,L,V){if(de.termType.endsWith("Node"))return{"@id":de.value};const J={"@value":de.value};if(de.language)de.language.match(P)||V.eventHandler&&T({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:de.language}},options:V}),J["@language"]=de.language;else{let ue=de.datatype.value;if(ue||(ue=ce),ue===j){ue="@json";try{J["@value"]=JSON.parse(J["@value"])}catch(ve){throw new N("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:J["@value"],cause:ve})}}if(U){if(ue===q)"true"===J["@value"]?J["@value"]=!0:"false"===J["@value"]&&(J["@value"]=!1);else if(C.isNumeric(J["@value"]))if(ue===Q){const ve=parseInt(J["@value"],10);ve.toFixed(0)===J["@value"]&&(J["@value"]=ve)}else ue===ae&&(J["@value"]=parseFloat(J["@value"]));[q,Q,ae,ce].includes(ue)||(J["@type"]=ue)}else if("i18n-datatype"===L&&ue.startsWith("https://www.w3.org/ns/i18n#")){const[,ve,oe]=ue.split(/[#_]/);ve.length>0&&(J["@language"]=ve,ve.match(P)||V.eventHandler&&T({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:ve}},options:V})),J["@direction"]=oe}else ue!==ce&&(J["@type"]=ue)}return J}Pe.exports=ee,ee.fromRDF=function(){var de=G(function*(U,L){const V={},J={"@default":V},ue={},{useRdfType:ve=!1,useNativeTypes:oe=!1,rdfDirection:xe=null}=L;for(const qe of U){const ze="DefaultGraph"===qe.graph.termType?"@default":qe.graph.value;ze in J||(J[ze]={}),"@default"!==ze&&!(ze in V)&&(V[ze]={"@id":ze});const ke=J[ze],be=qe.subject.value,pe=qe.predicate.value,nt=qe.object;be in ke||(ke[be]={"@id":be});const We=ke[be],Ie=nt.termType.endsWith("Node");if(Ie&&!(nt.value in ke)&&(ke[nt.value]={"@id":nt.value}),pe===te&&!ve&&Ie){D(We,"@type",nt.value,{propertyIsArray:!0});continue}const Je=Re(nt,oe,xe,L);if(D(We,pe,Je,{propertyIsArray:!0}),Ie)if(nt.value===K){const Pt=ke[nt.value];"usages"in Pt||(Pt.usages=[]),Pt.usages.push({node:We,property:pe,value:Je})}else ue[nt.value]=!(nt.value in ue)&&{node:We,property:pe,value:Je}}for(const qe in J){const ze=J[qe];if(!(K in ze))continue;const ke=ze[K];if(ke.usages){for(let be of ke.usages){let pe=be.node,nt=be.property,We=be.value;const Ie=[],Je=[];let Pt=Object.keys(pe).length;for(;nt===B&&C.isObject(ue[pe["@id"]])&&C.isArray(pe[z])&&1===pe[z].length&&C.isArray(pe[B])&&1===pe[B].length&&(3===Pt||4===Pt&&C.isArray(pe["@type"])&&1===pe["@type"].length&&pe["@type"][0]===M)&&(Ie.push(pe[z][0]),Je.push(pe["@id"]),be=ue[pe["@id"]],pe=be.node,nt=be.property,We=be.value,Pt=Object.keys(pe).length,I.isBlankNode(pe)););delete We["@id"],We["@list"]=Ie.reverse();for(const pt of Je)delete ze[pt]}delete ke.usages}}const Le=[],ye=Object.keys(V).sort();for(const qe of ye){const ze=V[qe];if(qe in J){const ke=ze["@graph"]=[],be=J[qe],pe=Object.keys(be).sort();for(const nt of pe){const We=be[nt];I.isSubjectReference(We)||ke.push(We)}}I.isSubjectReference(ze)||Le.push(ze)}return Le});return function(U,L){return de.apply(this,arguments)}}()},9094:(Pe,Ne,$)=>{"use strict";const G=$(2353),N={};Pe.exports=N,N.isSubject=I=>!(!G.isObject(I)||"@value"in I||"@set"in I||"@list"in I)&&(Object.keys(I).length>1||!("@id"in I)),N.isSubjectReference=I=>G.isObject(I)&&1===Object.keys(I).length&&"@id"in I,N.isValue=I=>G.isObject(I)&&"@value"in I,N.isList=I=>G.isObject(I)&&"@list"in I,N.isGraph=I=>G.isObject(I)&&"@graph"in I&&1===Object.keys(I).filter(C=>"@id"!==C&&"@index"!==C).length,N.isSimpleGraph=I=>N.isGraph(I)&&!("@id"in I),N.isBlankNode=I=>{if(G.isObject(I)){if("@id"in I){const C=I["@id"];return!G.isString(C)||0===C.indexOf("_:")}return 0===Object.keys(I).length||!("@value"in I||"@set"in I||"@list"in I)}return!1}},5049:(Pe,Ne,$)=>{var G=$(9344).default;const N=$(4308),I=$(2363),C=$(4249),P=$(4918),D=C.IdentifierIssuer,T=$(3327),M=$(5943),z=$(3865),{expand:B}=$(554),{flatten:K}=$(7613),{fromRDF:te}=$(2216),{toRDF:j}=$(5671),{frameMergedOrDefault:q,cleanupNull:ae}=$(1938),{isArray:Q,isObject:ce,isString:ee}=$(2353),{isSubjectReference:Re}=$(9094),{expandIri:de,getInitialContext:U,process:L,processingMode:V}=$(2134),{compact:J,compactIri:ue}=$(9857),{createNodeMap:ve,createMergedNodeMap:oe,mergeNodeMaps:xe}=$(5057),{logEventHandler:Le,logWarningEventHandler:ye,safeEventHandler:qe,setDefaultEventHandler:ze,setupEventHandler:ke,strictEventHandler:be,unhandledEventHandler:pe}=$(5775),nt=function(Ie){const Je={},pt=new M({max:100});function at(ut,{documentLoader:$e=Ie.documentLoader,...Ee}){if(ut&&"compactionMap"in ut)throw new T('"compactionMap" not supported.',"jsonld.OptionsError");if(ut&&"expansionMap"in ut)throw new T('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader:$e},Ee,ut,{eventHandler:ke({options:ut})})}return Ie.compact=function(){var ut=G(function*($e,Ee,Be){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===Ee)throw new T("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===$e)return null;let ht;(Be=at(Be,{base:ee($e)?$e:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new D("_:b"),contextResolver:new P({sharedCache:pt})})).link&&(Be.skipExpansion=!0),Be.compactToRelative||delete Be.base,ht=Be.skipExpansion?$e:yield Ie.expand($e,Be);const kt=yield Ie.processContext(U(Be),Ee,Be);let ft=yield J({activeCtx:kt,element:ht,options:Be});Be.compactArrays&&!Be.graph&&Q(ft)?1===ft.length?ft=ft[0]:0===ft.length&&(ft={}):Be.graph&&ce(ft)&&(ft=[ft]),ce(Ee)&&"@context"in Ee&&(Ee=Ee["@context"]),Ee=C.clone(Ee),Q(Ee)||(Ee=[Ee]);const Nt=Ee;Ee=[];for(let Ot=0;Ot<Nt.length;++Ot)(!ce(Nt[Ot])||Object.keys(Nt[Ot]).length>0)&&Ee.push(Nt[Ot]);const tn=Ee.length>0;if(1===Ee.length&&(Ee=Ee[0]),Q(ft)){const Ot=ue({activeCtx:kt,iri:"@graph",relativeTo:{vocab:!0}}),on=ft;ft={},tn&&(ft["@context"]=Ee),ft[Ot]=on}else if(ce(ft)&&tn){const Ot=ft;ft={"@context":Ee};for(const on in Ot)ft[on]=Ot[on]}return ft});return function($e,Ee,Be){return ut.apply(this,arguments)}}(),Ie.expand=function(){var ut=G(function*($e,Ee){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");const Be={},ht=[];if("expandContext"in(Ee=at(Ee,{keepFreeFloatingNodes:!1,contextResolver:new P({sharedCache:pt})}))){const tn=C.clone(Ee.expandContext);Be.expandContext=ce(tn)&&"@context"in tn?tn:{"@context":tn},ht.push(Be.expandContext)}let kt;if(ee($e)){const tn=yield Ie.get($e,Ee);kt=tn.documentUrl,Be.input=tn.document,tn.contextUrl&&(Be.remoteContext={"@context":tn.contextUrl},ht.push(Be.remoteContext))}else Be.input=C.clone($e);"base"in Ee||(Ee.base=kt||"");let ft=U(Ee);for(const tn of ht)ft=yield L({activeCtx:ft,localCtx:tn,options:Ee});let Nt=yield B({activeCtx:ft,element:Be.input,options:Ee});return ce(Nt)&&"@graph"in Nt&&1===Object.keys(Nt).length?Nt=Nt["@graph"]:null===Nt&&(Nt=[]),Q(Nt)||(Nt=[Nt]),Nt});return function($e,Ee){return ut.apply(this,arguments)}}(),Ie.flatten=function(){var ut=G(function*($e,Ee,Be){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");Ee="function"==typeof Ee?null:Ee||null,Be=at(Be,{base:ee($e)?$e:"",contextResolver:new P({sharedCache:pt})});const ht=yield Ie.expand($e,Be),kt=K(ht);return null===Ee?kt:(Be.graph=!0,Be.skipExpansion=!0,yield Ie.compact(kt,Ee,Be))});return function($e,Ee,Be){return ut.apply(this,arguments)}}(),Ie.frame=function(){var ut=G(function*($e,Ee,Be){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(Be=at(Be,{base:ee($e)?$e:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new P({sharedCache:pt})}),ee(Ee)){const $n=yield Ie.get(Ee,Be);if(Ee=$n.document,$n.contextUrl){let _r=Ee["@context"];_r?Q(_r)?_r.push($n.contextUrl):_r=[_r,$n.contextUrl]:_r=$n.contextUrl,Ee["@context"]=_r}}const ht=Ee&&Ee["@context"]||{},kt=yield Ie.processContext(U(Be),ht,Be);Be.hasOwnProperty("omitGraph")||(Be.omitGraph=V(kt,1.1)),Be.hasOwnProperty("pruneBlankNodeIdentifiers")||(Be.pruneBlankNodeIdentifiers=V(kt,1.1));const ft=yield Ie.expand($e,Be),Nt={...Be};Nt.isFrame=!0,Nt.keepFreeFloatingNodes=!0;const tn=yield Ie.expand(Ee,Nt),Ot=Object.keys(Ee).map($n=>de(kt,$n,{vocab:!0}));Nt.merged=!Ot.includes("@graph"),Nt.is11=V(kt,1.1);const on=q(ft,tn,Nt);Nt.graph=!Be.omitGraph,Nt.skipExpansion=!0,Nt.link={},Nt.framing=!0;let hn=yield Ie.compact(on,ht,Nt);return Nt.link={},hn=ae(hn,Nt),hn});return function($e,Ee,Be){return ut.apply(this,arguments)}}(),Ie.link=function(){var ut=G(function*($e,Ee,Be){const ht={};return Ee&&(ht["@context"]=Ee),ht["@embed"]="@link",Ie.frame($e,ht,Be)});return function($e,Ee,Be){return ut.apply(this,arguments)}}(),Ie.normalize=Ie.canonize=function(){var ut=G(function*($e,Ee){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(Ee=at(Ee,{base:ee($e)?$e:null,algorithm:"URDNA2015",skipExpansion:!1,safe:!0,contextResolver:new P({sharedCache:pt})}))){if("application/n-quads"!==Ee.inputFormat&&"application/nquads"!==Ee.inputFormat)throw new T("Unknown canonicalization input format.","jsonld.CanonizeError");const kt=z.parse($e);return N.canonize(kt,Ee)}const Be={...Ee};delete Be.format,Be.produceGeneralizedRdf=!1;const ht=yield Ie.toRDF($e,Be);return N.canonize(ht,Ee)});return function($e,Ee){return ut.apply(this,arguments)}}(),Ie.fromRDF=function(){var ut=G(function*($e,Ee){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");Ee=at(Ee,{format:ee($e)?"application/n-quads":void 0});const{format:Be}=Ee;let{rdfParser:ht}=Ee;if(Be){if(ht=ht||Je[Be],!ht)throw new T("Unknown input format.","jsonld.UnknownFormat",{format:Be})}else ht=()=>$e;const kt=yield ht($e);return te(kt,Ee)});return function($e,Ee){return ut.apply(this,arguments)}}(),Ie.toRDF=function(){var ut=G(function*($e,Ee){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let Be;Be=(Ee=at(Ee,{base:ee($e)?$e:"",skipExpansion:!1,contextResolver:new P({sharedCache:pt})})).skipExpansion?$e:yield Ie.expand($e,Ee);const ht=j(Be,Ee);if(Ee.format){if("application/n-quads"===Ee.format||"application/nquads"===Ee.format)return z.serialize(ht);throw new T("Unknown output format.","jsonld.UnknownFormat",{format:Ee.format})}return ht});return function($e,Ee){return ut.apply(this,arguments)}}(),Ie.createNodeMap=function(){var ut=G(function*($e,Ee){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");Ee=at(Ee,{base:ee($e)?$e:"",contextResolver:new P({sharedCache:pt})});const Be=yield Ie.expand($e,Ee);return oe(Be,Ee)});return function($e,Ee){return ut.apply(this,arguments)}}(),Ie.merge=function(){var ut=G(function*($e,Ee,Be){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!Q($e))throw new TypeError('Could not merge, "docs" must be an array.');Ee="function"==typeof Ee?null:Ee||null,Be=at(Be,{contextResolver:new P({sharedCache:pt})});const ht=yield Promise.all($e.map($n=>{const _r={...Be};return Ie.expand($n,_r)}));let kt=!0;"mergeNodes"in Be&&(kt=Be.mergeNodes);const ft=Be.issuer||new D("_:b"),Nt={"@default":{}};for(let $n=0;$n<ht.length;++$n){const _r=C.relabelBlankNodes(ht[$n],{issuer:new D("_:b"+$n+"-")}),vr=kt||0===$n?Nt:{"@default":{}};if(ve(_r,vr,"@default",ft),vr!==Nt)for(const ai in vr){const vi=vr[ai];if(!(ai in Nt)){Nt[ai]=vi;continue}const Ao=Nt[ai];for(const To in vi)To in Ao||(Ao[To]=vi[To])}}const tn=xe(Nt),Ot=[],on=Object.keys(tn).sort();for(let $n=0;$n<on.length;++$n){const _r=tn[on[$n]];Re(_r)||Ot.push(_r)}return null===Ee?Ot:(Be.graph=!0,Be.skipExpansion=!0,yield Ie.compact(Ot,Ee,Be))});return function($e,Ee,Be){return ut.apply(this,arguments)}}(),Object.defineProperty(Ie,"documentLoader",{get:()=>Ie._documentLoader,set:ut=>Ie._documentLoader=ut}),Ie.documentLoader=function(){var ut=G(function*($e){throw new T("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:$e})});return function($e){return ut.apply(this,arguments)}}(),Ie.get=function(){var ut=G(function*($e,Ee){let Be;Be="function"==typeof Ee.documentLoader?Ee.documentLoader:Ie.documentLoader;const ht=yield Be($e);try{if(!ht.document)throw new T("No remote document found at the given URL.","jsonld.NullRemoteDocument");ee(ht.document)&&(ht.document=JSON.parse(ht.document))}catch(kt){throw new T("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:kt,remoteDoc:ht})}return ht});return function($e,Ee){return ut.apply(this,arguments)}}(),Ie.processContext=function(){var ut=G(function*($e,Ee,Be){return Be=at(Be,{base:"",contextResolver:new P({sharedCache:pt})}),null===Ee?U(Be):(Ee=C.clone(Ee),ce(Ee)&&"@context"in Ee||(Ee={"@context":Ee}),L({activeCtx:$e,localCtx:Ee,options:Be}))});return function($e,Ee,Be){return ut.apply(this,arguments)}}(),Ie.getContextValue=$(2134).getContextValue,Ie.documentLoaders={},Ie.useDocumentLoader=function(ut){if(!(ut in Ie.documentLoaders))throw new T('Unknown document loader type: "'+ut+'"',"jsonld.UnknownDocumentLoader",{type:ut});Ie.documentLoader=Ie.documentLoaders[ut].apply(Ie,Array.prototype.slice.call(arguments,1))},Ie.registerRDFParser=function(ut,$e){Je[ut]=$e},Ie.unregisterRDFParser=function(ut){delete Je[ut]},Ie.registerRDFParser("application/n-quads",z.parse),Ie.registerRDFParser("application/nquads",z.parse),Ie.url=$(4920),Ie.logEventHandler=Le,Ie.logWarningEventHandler=ye,Ie.safeEventHandler=qe,Ie.setDefaultEventHandler=ze,Ie.strictEventHandler=be,Ie.unhandledEventHandler=pe,Ie.util=C,Object.assign(Ie,C),Ie.promises=Ie,Ie.RequestQueue=$(2210),Ie.JsonLdProcessor=$(779)(Ie),I.setupGlobals(Ie),I.setupDocumentLoaders(Ie),Ie},We=function(){return nt(function(){return We()})};nt(We),Pe.exports=We},5057:(Pe,Ne,$)=>{"use strict";const{isKeyword:G}=$(2134),N=$(9094),I=$(2353),C=$(4249),P=$(3327),D={};Pe.exports=D,D.createMergedNodeMap=(T,M)=>{const z=(M=M||{}).issuer||new C.IdentifierIssuer("_:b"),B={"@default":{}};return D.createNodeMap(T,B,"@default",z),D.mergeNodeMaps(B)},D.createNodeMap=(T,M,z,B,K,te)=>{if(I.isArray(T)){for(const Q of T)D.createNodeMap(Q,M,z,B,void 0,te);return}if(!I.isObject(T))return void(te&&te.push(T));if(N.isValue(T)){if("@type"in T){let Q=T["@type"];0===Q.indexOf("_:")&&(T["@type"]=Q=B.getId(Q))}return void(te&&te.push(T))}if(te&&N.isList(T)){const Q=[];return D.createNodeMap(T["@list"],M,z,B,K,Q),void te.push({"@list":Q})}if("@type"in T){const Q=T["@type"];for(const ce of Q)0===ce.indexOf("_:")&&B.getId(ce)}I.isUndefined(K)&&(K=N.isBlankNode(T)?B.getId(T["@id"]):T["@id"]),te&&te.push({"@id":K});const j=M[z],q=j[K]=j[K]||{};q["@id"]=K;const ae=Object.keys(T).sort();for(let Q of ae){if("@id"===Q)continue;if("@reverse"===Q){const ee={"@id":K},Re=T["@reverse"];for(const de in Re){const U=Re[de];for(const L of U){let V=L["@id"];N.isBlankNode(L)&&(V=B.getId(V)),D.createNodeMap(L,M,z,B,V),C.addValue(j[V],de,ee,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===Q){K in M||(M[K]={}),D.createNodeMap(T[Q],M,K,B);continue}if("@included"===Q){D.createNodeMap(T[Q],M,z,B);continue}if("@type"!==Q&&G(Q)){if("@index"===Q&&Q in q&&(T[Q]!==q[Q]||T[Q]["@id"]!==q[Q]["@id"]))throw new P("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:q});q[Q]=T[Q];continue}const ce=T[Q];if(0===Q.indexOf("_:")&&(Q=B.getId(Q)),0!==ce.length)for(let ee of ce)if("@type"===Q&&(ee=0===ee.indexOf("_:")?B.getId(ee):ee),N.isSubject(ee)||N.isSubjectReference(ee)){if("@id"in ee&&!ee["@id"])continue;const Re=N.isBlankNode(ee)?B.getId(ee["@id"]):ee["@id"];C.addValue(q,Q,{"@id":Re},{propertyIsArray:!0,allowDuplicate:!1}),D.createNodeMap(ee,M,z,B,Re)}else if(N.isValue(ee))C.addValue(q,Q,ee,{propertyIsArray:!0,allowDuplicate:!1});else if(N.isList(ee)){const Re=[];D.createNodeMap(ee["@list"],M,z,B,K,Re),ee={"@list":Re},C.addValue(q,Q,ee,{propertyIsArray:!0,allowDuplicate:!1})}else D.createNodeMap(ee,M,z,B,K),C.addValue(q,Q,ee,{propertyIsArray:!0,allowDuplicate:!1});else C.addValue(q,Q,[],{propertyIsArray:!0})}},D.mergeNodeMapGraphs=T=>{const M={};for(const z of Object.keys(T).sort())for(const B of Object.keys(T[z]).sort()){const K=T[z][B];B in M||(M[B]={"@id":B});const te=M[B];for(const j of Object.keys(K).sort())if(G(j)&&"@type"!==j)te[j]=C.clone(K[j]);else for(const q of K[j])C.addValue(te,j,C.clone(q),{propertyIsArray:!0,allowDuplicate:!1})}return M},D.mergeNodeMaps=T=>{const M=T["@default"],z=Object.keys(T).sort();for(const B of z){if("@default"===B)continue;const K=T[B];let te=M[B];te?"@graph"in te||(te["@graph"]=[]):M[B]=te={"@id":B,"@graph":[]};const j=te["@graph"];for(const q of Object.keys(K).sort()){const ae=K[q];N.isSubjectReference(ae)||j.push(ae)}}return M}},2363:(Pe,Ne,$)=>{"use strict";const G=$(8719),N={};Pe.exports=N,N.setupDocumentLoaders=function(I){typeof XMLHttpRequest<"u"&&(I.documentLoaders.xhr=G,I.useDocumentLoader("xhr"))},N.setupGlobals=function(I){typeof globalThis.JsonLdProcessor>"u"&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:I.JsonLdProcessor})}},5671:(Pe,Ne,$)=>{"use strict";const{createNodeMap:G}=$(5057),{isKeyword:N}=$(2134),I=$(9094),C=$(5423),P=$(2353),D=$(4249),{handleEvent:T}=$(5775),{RDF_FIRST:M,RDF_REST:z,RDF_NIL:B,RDF_TYPE:K,RDF_JSON_LITERAL:te,RDF_LANGSTRING:j,XSD_BOOLEAN:q,XSD_DOUBLE:ae,XSD_INTEGER:Q,XSD_STRING:ce}=$(313),{isAbsolute:ee}=$(4920),Re={};function de(V,J,ue,ve,oe){const xe=Object.keys(J).sort();for(const Le of xe){const ye=J[Le],qe=Object.keys(ye).sort();for(let ze of qe){const ke=ye[ze];if("@type"===ze)ze=K;else if(N(ze))continue;for(const be of ke){const pe={termType:Le.startsWith("_:")?"BlankNode":"NamedNode",value:Le};if(!ee(Le)){oe.eventHandler&&T({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:Le}},options:oe});continue}const nt={termType:ze.startsWith("_:")?"BlankNode":"NamedNode",value:ze};if(!ee(ze)){oe.eventHandler&&T({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:ze}},options:oe});continue}if("BlankNode"===nt.termType&&!oe.produceGeneralizedRdf){oe.eventHandler&&T({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:ve.getOldIds().find(Ie=>ve.getId(Ie)===ze)}},options:oe});continue}const We=L(be,ve,V,ue,oe.rdfDirection,oe);We&&V.push({subject:pe,predicate:nt,object:We,graph:ue})}}}}function L(V,J,ue,ve,oe,xe){const Le={};if(I.isValue(V)){Le.termType="Literal",Le.value=void 0,Le.datatype={termType:"NamedNode"};let ye=V["@value"];const qe=V["@type"]||null;"@json"===qe?(Le.value=C(ye),Le.datatype.value=te):P.isBoolean(ye)?(Le.value=ye.toString(),Le.datatype.value=qe||q):P.isDouble(ye)||qe===ae?(P.isDouble(ye)||(ye=parseFloat(ye)),Le.value=ye.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),Le.datatype.value=qe||ae):P.isNumber(ye)?(Le.value=ye.toFixed(0),Le.datatype.value=qe||Q):"i18n-datatype"===oe&&"@direction"in V?(Le.datatype.value="https://www.w3.org/ns/i18n#"+(V["@language"]||"")+`_${V["@direction"]}`,Le.value=ye):"@language"in V?(Le.value=ye,Le.datatype.value=qe||j,Le.language=V["@language"]):(Le.value=ye,Le.datatype.value=qe||ce)}else if(I.isList(V)){const ye=function U(V,J,ue,ve,oe,xe){const Le={termType:"NamedNode",value:M},ye={termType:"NamedNode",value:z},qe={termType:"NamedNode",value:B},ze=V.pop(),ke=ze?{termType:"BlankNode",value:J.getId()}:qe;let be=ke;for(const pe of V){const nt=L(pe,J,ue,ve,oe,xe),We={termType:"BlankNode",value:J.getId()};ue.push({subject:be,predicate:Le,object:nt,graph:ve}),ue.push({subject:be,predicate:ye,object:We,graph:ve}),be=We}if(ze){const pe=L(ze,J,ue,ve,oe,xe);ue.push({subject:be,predicate:Le,object:pe,graph:ve}),ue.push({subject:be,predicate:ye,object:qe,graph:ve})}return ke}(V["@list"],J,ue,ve,oe,xe);Le.termType=ye.termType,Le.value=ye.value}else{const ye=P.isObject(V)?V["@id"]:V;Le.termType=ye.startsWith("_:")?"BlankNode":"NamedNode",Le.value=ye}return"NamedNode"!==Le.termType||ee(Le.value)?Le:(xe.eventHandler&&T({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:Le.value}},options:xe}),null)}Pe.exports=Re,Re.toRDF=(V,J)=>{const ue=new D.IdentifierIssuer("_:b"),ve={"@default":{}};G(V,ve,"@default",ue);const oe=[],xe=Object.keys(ve).sort();for(const Le of xe){let ye;if("@default"===Le)ye={termType:"DefaultGraph",value:""};else{if(!ee(Le)){J.eventHandler&&T({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:Le}},options:J});continue}ye=Le.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"},ye.value=Le}de(oe,ve[Le],ye,ue,J)}return oe}},2353:Pe=>{"use strict";const Ne={};Pe.exports=Ne,Ne.isArray=Array.isArray,Ne.isBoolean=$=>"boolean"==typeof $||"[object Boolean]"===Object.prototype.toString.call($),Ne.isDouble=$=>Ne.isNumber($)&&(-1!==String($).indexOf(".")||Math.abs($)>=1e21),Ne.isEmptyObject=$=>Ne.isObject($)&&0===Object.keys($).length,Ne.isNumber=$=>"number"==typeof $||"[object Number]"===Object.prototype.toString.call($),Ne.isNumeric=$=>!isNaN(parseFloat($))&&isFinite($),Ne.isObject=$=>"[object Object]"===Object.prototype.toString.call($),Ne.isString=$=>"string"==typeof $||"[object String]"===Object.prototype.toString.call($),Ne.isUndefined=$=>typeof $>"u"},4920:(Pe,Ne,$)=>{"use strict";const G=$(2353),N={};Pe.exports=N,N.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},N.parse=(C,P)=>{const D={},T=N.parsers[P||"full"],M=T.regex.exec(C);let z=T.keys.length;for(;z--;)D[T.keys[z]]=void 0===M[z]?null:M[z];return("https"===D.scheme&&"443"===D.port||"http"===D.scheme&&"80"===D.port)&&(D.href=D.href.replace(":"+D.port,""),D.authority=D.authority.replace(":"+D.port,""),D.port=null),D.normalizedPath=N.removeDotSegments(D.path),D},N.prependBase=(C,P)=>{if(null===C||N.isAbsolute(P))return P;(!C||G.isString(C))&&(C=N.parse(C||""));const D=N.parse(P),T={protocol:C.protocol||""};if(null!==D.authority)T.authority=D.authority,T.path=D.path,T.query=D.query;else if(T.authority=C.authority,""===D.path)T.path=C.path,T.query=null!==D.query?D.query:C.query;else{if(0===D.path.indexOf("/"))T.path=D.path;else{let z=C.path;z=z.substr(0,z.lastIndexOf("/")+1),(z.length>0||C.authority)&&"/"!==z.substr(-1)&&(z+="/"),z+=D.path,T.path=z}T.query=D.query}""!==D.path&&(T.path=N.removeDotSegments(T.path));let M=T.protocol;return null!==T.authority&&(M+="//"+T.authority),M+=T.path,null!==T.query&&(M+="?"+T.query),null!==D.fragment&&(M+="#"+D.fragment),""===M&&(M="./"),M},N.removeBase=(C,P)=>{if(null===C)return P;(!C||G.isString(C))&&(C=N.parse(C||""));let D="";if(""!==C.href?D+=(C.protocol||"")+"//"+(C.authority||""):P.indexOf("//")&&(D+="//"),0!==P.indexOf(D))return P;const T=N.parse(P.substr(D.length)),M=C.normalizedPath.split("/"),z=T.normalizedPath.split("/"),B=T.fragment||T.query?0:1;for(;M.length>0&&z.length>B&&M[0]===z[0];)M.shift(),z.shift();let K="";if(M.length>0){M.pop();for(let te=0;te<M.length;++te)K+="../"}return K+=z.join("/"),null!==T.query&&(K+="?"+T.query),null!==T.fragment&&(K+="#"+T.fragment),""===K&&(K="./"),K},N.removeDotSegments=C=>{if(0===C.length)return"";const P=C.split("/"),D=[];for(;P.length>0;){const T=P.shift(),M=0===P.length;"."!==T?".."!==T?D.push(T):(D.pop(),M&&D.push("")):M&&D.push("")}return"/"===C[0]&&D.length>0&&""!==D[0]&&D.unshift(""),1===D.length&&""===D[0]?"/":D.join("/")};const I=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;N.isAbsolute=C=>G.isString(C)&&I.test(C),N.isRelative=C=>G.isString(C)},4249:(Pe,Ne,$)=>{"use strict";const G=$(9094),N=$(2353),I=$(4308).IdentifierIssuer,C=$(3327),D=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,T=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,M=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,B_headers_accept="application/ld+json, application/json",K={};function te(j,q){if(N.isArray(q))for(let ae=0;ae<q.length;++ae)q[ae]=te(j,q[ae]);else if(G.isList(q))q["@list"]=te(j,q["@list"]);else if(N.isObject(q)){G.isBlankNode(q)&&(q["@id"]=j.getId(q["@id"]));const ae=Object.keys(q).sort();for(let Q=0;Q<ae.length;++Q){const ce=ae[Q];"@id"!==ce&&(q[ce]=te(j,q[ce]))}}return q}Pe.exports=K,K.IdentifierIssuer=I,K.REGEX_BCP47=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,K.REGEX_KEYWORD=/^@[a-zA-Z]+$/,K.clone=function(j){if(j&&"object"==typeof j){let q;if(N.isArray(j)){q=[];for(let ae=0;ae<j.length;++ae)q[ae]=K.clone(j[ae])}else if(j instanceof Map){q=new Map;for(const[ae,Q]of j)q.set(ae,K.clone(Q))}else if(j instanceof Set){q=new Set;for(const ae of j)q.add(K.clone(ae))}else if(N.isObject(j)){q={};for(const ae in j)q[ae]=K.clone(j[ae])}else q=j.toString();return q}return j},K.asArray=function(j){return Array.isArray(j)?j:[j]},K.buildHeaders=(j={})=>{if(Object.keys(j).some(ae=>"accept"===ae.toLowerCase()))throw new RangeError('Accept header may not be specified; only "'+B_headers_accept+'" is supported.');return Object.assign({Accept:B_headers_accept},j)},K.parseLinkHeader=j=>{const q={},ae=j.match(D);for(let Q=0;Q<ae.length;++Q){let ce=ae[Q].match(T);if(!ce)continue;const ee={target:ce[1]},Re=ce[2];for(;ce=M.exec(Re);)ee[ce[1]]=void 0===ce[2]?ce[3]:ce[2];const de=ee.rel||"";Array.isArray(q[de])?q[de].push(ee):q[de]=q.hasOwnProperty(de)?[q[de],ee]:ee}return q},K.validateTypeValue=(j,q)=>{if(!(N.isString(j)||N.isArray(j)&&j.every(ae=>N.isString(ae)))){if(q&&N.isObject(j))switch(Object.keys(j).length){case 0:return;case 1:if("@default"in j&&K.asArray(j["@default"]).every(ae=>N.isString(ae)))return}throw new C('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:j})}},K.hasProperty=(j,q)=>{if(j.hasOwnProperty(q)){const ae=j[q];return!N.isArray(ae)||ae.length>0}return!1},K.hasValue=(j,q,ae)=>{if(K.hasProperty(j,q)){let Q=j[q];const ce=G.isList(Q);if(N.isArray(Q)||ce){ce&&(Q=Q["@list"]);for(let ee=0;ee<Q.length;++ee)if(K.compareValues(ae,Q[ee]))return!0}else if(!N.isArray(ae))return K.compareValues(ae,Q)}return!1},K.addValue=(j,q,ae,Q)=>{if("propertyIsArray"in(Q=Q||{})||(Q.propertyIsArray=!1),"valueIsArray"in Q||(Q.valueIsArray=!1),"allowDuplicate"in Q||(Q.allowDuplicate=!0),"prependValue"in Q||(Q.prependValue=!1),Q.valueIsArray)j[q]=ae;else if(N.isArray(ae)){0===ae.length&&Q.propertyIsArray&&!j.hasOwnProperty(q)&&(j[q]=[]),Q.prependValue&&(ae=ae.concat(j[q]),j[q]=[]);for(let ce=0;ce<ae.length;++ce)K.addValue(j,q,ae[ce],Q)}else if(j.hasOwnProperty(q)){const ce=!Q.allowDuplicate&&K.hasValue(j,q,ae);!N.isArray(j[q])&&(!ce||Q.propertyIsArray)&&(j[q]=[j[q]]),ce||(Q.prependValue?j[q].unshift(ae):j[q].push(ae))}else j[q]=Q.propertyIsArray?[ae]:ae},K.getValues=(j,q)=>[].concat(j[q]||[]),K.removeProperty=(j,q)=>{delete j[q]},K.removeValue=(j,q,ae,Q)=>{"propertyIsArray"in(Q=Q||{})||(Q.propertyIsArray=!1);const ce=K.getValues(j,q).filter(ee=>!K.compareValues(ee,ae));0===ce.length?K.removeProperty(j,q):j[q]=1!==ce.length||Q.propertyIsArray?ce:ce[0]},K.relabelBlankNodes=(j,q)=>te((q=q||{}).issuer||new I("_:b"),j),K.compareValues=(j,q)=>!!(j===q||G.isValue(j)&&G.isValue(q)&&j["@value"]===q["@value"]&&j["@type"]===q["@type"]&&j["@language"]===q["@language"]&&j["@index"]===q["@index"])||!!(N.isObject(j)&&"@id"in j&&N.isObject(q)&&"@id"in q)&&j["@id"]===q["@id"],K.compareShortestLeast=(j,q)=>j.length<q.length?-1:q.length<j.length?1:j===q?0:j<q?-1:1},5943:(Pe,Ne,$)=>{"use strict";const G=$(1245),N=Symbol("max"),I=Symbol("length"),C=Symbol("lengthCalculator"),P=Symbol("allowStale"),D=Symbol("maxAge"),T=Symbol("dispose"),M=Symbol("noDisposeOnSet"),z=Symbol("lruList"),B=Symbol("cache"),K=Symbol("updateAgeOnGet"),te=()=>1,q=(de,U,L)=>{const V=de[B].get(U);if(V){const J=V.value;if(ae(de,J)){if(ce(de,V),!de[P])return}else L&&(de[K]&&(V.value.now=Date.now()),de[z].unshiftNode(V));return J.value}},ae=(de,U)=>{if(!U||!U.maxAge&&!de[D])return!1;const L=Date.now()-U.now;return U.maxAge?L>U.maxAge:de[D]&&L>de[D]},Q=de=>{if(de[I]>de[N])for(let U=de[z].tail;de[I]>de[N]&&null!==U;){const L=U.prev;ce(de,U),U=L}},ce=(de,U)=>{if(U){const L=U.value;de[T]&&de[T](L.key,L.value),de[I]-=L.length,de[B].delete(L.key),de[z].removeNode(U)}};class ee{constructor(U,L,V,J,ue){this.key=U,this.value=L,this.length=V,this.now=J,this.maxAge=ue||0}}const Re=(de,U,L,V)=>{let J=L.value;ae(de,J)&&(ce(de,L),de[P]||(J=void 0)),J&&U.call(V,J.value,J.key,de)};Pe.exports=class j{constructor(U){if("number"==typeof U&&(U={max:U}),U||(U={}),U.max&&("number"!=typeof U.max||U.max<0))throw new TypeError("max must be a non-negative number");this[N]=U.max||1/0;const V=U.length||te;if(this[C]="function"!=typeof V?te:V,this[P]=U.stale||!1,U.maxAge&&"number"!=typeof U.maxAge)throw new TypeError("maxAge must be a number");this[D]=U.maxAge||0,this[T]=U.dispose,this[M]=U.noDisposeOnSet||!1,this[K]=U.updateAgeOnGet||!1,this.reset()}set max(U){if("number"!=typeof U||U<0)throw new TypeError("max must be a non-negative number");this[N]=U||1/0,Q(this)}get max(){return this[N]}set allowStale(U){this[P]=!!U}get allowStale(){return this[P]}set maxAge(U){if("number"!=typeof U)throw new TypeError("maxAge must be a non-negative number");this[D]=U,Q(this)}get maxAge(){return this[D]}set lengthCalculator(U){"function"!=typeof U&&(U=te),U!==this[C]&&(this[C]=U,this[I]=0,this[z].forEach(L=>{L.length=this[C](L.value,L.key),this[I]+=L.length})),Q(this)}get lengthCalculator(){return this[C]}get length(){return this[I]}get itemCount(){return this[z].length}rforEach(U,L){L=L||this;for(let V=this[z].tail;null!==V;){const J=V.prev;Re(this,U,V,L),V=J}}forEach(U,L){L=L||this;for(let V=this[z].head;null!==V;){const J=V.next;Re(this,U,V,L),V=J}}keys(){return this[z].toArray().map(U=>U.key)}values(){return this[z].toArray().map(U=>U.value)}reset(){this[T]&&this[z]&&this[z].length&&this[z].forEach(U=>this[T](U.key,U.value)),this[B]=new Map,this[z]=new G,this[I]=0}dump(){return this[z].map(U=>!ae(this,U)&&{k:U.key,v:U.value,e:U.now+(U.maxAge||0)}).toArray().filter(U=>U)}dumpLru(){return this[z]}set(U,L,V){if((V=V||this[D])&&"number"!=typeof V)throw new TypeError("maxAge must be a number");const J=V?Date.now():0,ue=this[C](L,U);if(this[B].has(U)){if(ue>this[N])return ce(this,this[B].get(U)),!1;const xe=this[B].get(U).value;return this[T]&&(this[M]||this[T](U,xe.value)),xe.now=J,xe.maxAge=V,xe.value=L,this[I]+=ue-xe.length,xe.length=ue,this.get(U),Q(this),!0}const ve=new ee(U,L,ue,J,V);return ve.length>this[N]?(this[T]&&this[T](U,L),!1):(this[I]+=ve.length,this[z].unshift(ve),this[B].set(U,this[z].head),Q(this),!0)}has(U){if(!this[B].has(U))return!1;const L=this[B].get(U).value;return!ae(this,L)}get(U){return q(this,U,!0)}peek(U){return q(this,U,!1)}pop(){const U=this[z].tail;return U?(ce(this,U),U.value):null}del(U){ce(this,this[B].get(U))}load(U){this.reset();const L=Date.now();for(let V=U.length-1;V>=0;V--){const J=U[V],ue=J.e||0;if(0===ue)this.set(J.k,J.v);else{const ve=ue-L;ve>0&&this.set(J.k,J.v,ve)}}}prune(){this[B].forEach((U,L)=>q(this,L,!1))}}},6023:Pe=>{"use strict";Pe.exports=function(Ne){Ne.prototype[Symbol.iterator]=function*(){for(let $=this.head;$;$=$.next)yield $.value}}},1245:(Pe,Ne,$)=>{"use strict";function G(D){var T=this;if(T instanceof G||(T=new G),T.tail=null,T.head=null,T.length=0,D&&"function"==typeof D.forEach)D.forEach(function(B){T.push(B)});else if(arguments.length>0)for(var M=0,z=arguments.length;M<z;M++)T.push(arguments[M]);return T}function N(D,T,M){var z=T===D.head?new P(M,null,T,D):new P(M,T,T.next,D);return null===z.next&&(D.tail=z),null===z.prev&&(D.head=z),D.length++,z}function I(D,T){D.tail=new P(T,D.tail,null,D),D.head||(D.head=D.tail),D.length++}function C(D,T){D.head=new P(T,null,D.head,D),D.tail||(D.tail=D.head),D.length++}function P(D,T,M,z){if(!(this instanceof P))return new P(D,T,M,z);this.list=z,this.value=D,T?(T.next=this,this.prev=T):this.prev=null,M?(M.prev=this,this.next=M):this.next=null}Pe.exports=G,G.Node=P,G.create=G,G.prototype.removeNode=function(D){if(D.list!==this)throw new Error("removing node which does not belong to this list");var T=D.next,M=D.prev;return T&&(T.prev=M),M&&(M.next=T),D===this.head&&(this.head=T),D===this.tail&&(this.tail=M),D.list.length--,D.next=null,D.prev=null,D.list=null,T},G.prototype.unshiftNode=function(D){if(D!==this.head){D.list&&D.list.removeNode(D);var T=this.head;D.list=this,D.next=T,T&&(T.prev=D),this.head=D,this.tail||(this.tail=D),this.length++}},G.prototype.pushNode=function(D){if(D!==this.tail){D.list&&D.list.removeNode(D);var T=this.tail;D.list=this,D.prev=T,T&&(T.next=D),this.tail=D,this.head||(this.head=D),this.length++}},G.prototype.push=function(){for(var D=0,T=arguments.length;D<T;D++)I(this,arguments[D]);return this.length},G.prototype.unshift=function(){for(var D=0,T=arguments.length;D<T;D++)C(this,arguments[D]);return this.length},G.prototype.pop=function(){if(this.tail){var D=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,D}},G.prototype.shift=function(){if(this.head){var D=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,D}},G.prototype.forEach=function(D,T){T=T||this;for(var M=this.head,z=0;null!==M;z++)D.call(T,M.value,z,this),M=M.next},G.prototype.forEachReverse=function(D,T){T=T||this;for(var M=this.tail,z=this.length-1;null!==M;z--)D.call(T,M.value,z,this),M=M.prev},G.prototype.get=function(D){for(var T=0,M=this.head;null!==M&&T<D;T++)M=M.next;if(T===D&&null!==M)return M.value},G.prototype.getReverse=function(D){for(var T=0,M=this.tail;null!==M&&T<D;T++)M=M.prev;if(T===D&&null!==M)return M.value},G.prototype.map=function(D,T){T=T||this;for(var M=new G,z=this.head;null!==z;)M.push(D.call(T,z.value,this)),z=z.next;return M},G.prototype.mapReverse=function(D,T){T=T||this;for(var M=new G,z=this.tail;null!==z;)M.push(D.call(T,z.value,this)),z=z.prev;return M},G.prototype.reduce=function(D,T){var M,z=this.head;if(arguments.length>1)M=T;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");z=this.head.next,M=this.head.value}for(var B=0;null!==z;B++)M=D(M,z.value,B),z=z.next;return M},G.prototype.reduceReverse=function(D,T){var M,z=this.tail;if(arguments.length>1)M=T;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");z=this.tail.prev,M=this.tail.value}for(var B=this.length-1;null!==z;B--)M=D(M,z.value,B),z=z.prev;return M},G.prototype.toArray=function(){for(var D=new Array(this.length),T=0,M=this.head;null!==M;T++)D[T]=M.value,M=M.next;return D},G.prototype.toArrayReverse=function(){for(var D=new Array(this.length),T=0,M=this.tail;null!==M;T++)D[T]=M.value,M=M.prev;return D},G.prototype.slice=function(D,T){(T=T||this.length)<0&&(T+=this.length),(D=D||0)<0&&(D+=this.length);var M=new G;if(T<D||T<0)return M;D<0&&(D=0),T>this.length&&(T=this.length);for(var z=0,B=this.head;null!==B&&z<D;z++)B=B.next;for(;null!==B&&z<T;z++,B=B.next)M.push(B.value);return M},G.prototype.sliceReverse=function(D,T){(T=T||this.length)<0&&(T+=this.length),(D=D||0)<0&&(D+=this.length);var M=new G;if(T<D||T<0)return M;D<0&&(D=0),T>this.length&&(T=this.length);for(var z=this.length,B=this.tail;null!==B&&z>T;z--)B=B.prev;for(;null!==B&&z>D;z--,B=B.prev)M.push(B.value);return M},G.prototype.splice=function(D,T,...M){D>this.length&&(D=this.length-1),D<0&&(D=this.length+D);for(var z=0,B=this.head;null!==B&&z<D;z++)B=B.next;var K=[];for(z=0;B&&z<T;z++)K.push(B.value),B=this.removeNode(B);for(null===B&&(B=this.tail),B!==this.head&&B!==this.tail&&(B=B.prev),z=0;z<M.length;z++)B=N(this,B,M[z]);return K},G.prototype.reverse=function(){for(var D=this.head,T=this.tail,M=D;null!==M;M=M.prev){var z=M.prev;M.prev=M.next,M.next=z}return this.head=T,this.tail=D,this};try{$(6023)(G)}catch{}},5982:function(Pe){Pe.exports=function(Ne){var $={};function G(N){if($[N])return $[N].exports;var I=$[N]={i:N,l:!1,exports:{}};return Ne[N].call(I.exports,I,I.exports,G),I.l=!0,I.exports}return G.m=Ne,G.c=$,G.i=function(N){return N},G.d=function(N,I,C){G.o(N,I)||Object.defineProperty(N,I,{configurable:!1,enumerable:!0,get:C})},G.n=function(N){var I=N&&N.__esModule?function(){return N.default}:function(){return N};return G.d(I,"a",I),I},G.o=function(N,I){return Object.prototype.hasOwnProperty.call(N,I)},G.p="",G(G.s=26)}([function(Ne,$,G){"use strict";function N(){}N.QUALITY=1,N.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,N.DEFAULT_INCREMENTAL=!1,N.DEFAULT_ANIMATION_ON_LAYOUT=!0,N.DEFAULT_ANIMATION_DURING_LAYOUT=!1,N.DEFAULT_ANIMATION_PERIOD=50,N.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,N.DEFAULT_GRAPH_MARGIN=15,N.NODE_DIMENSIONS_INCLUDE_LABELS=!1,N.SIMPLE_NODE_HALF_SIZE=(N.SIMPLE_NODE_SIZE=40)/2,N.EMPTY_COMPOUND_NODE_SIZE=40,N.MIN_EDGE_LENGTH=1,N.INITIAL_WORLD_BOUNDARY=(N.WORLD_BOUNDARY=1e6)/1e3,N.WORLD_CENTER_X=1200,N.WORLD_CENTER_Y=900,Ne.exports=N},function(Ne,$,G){"use strict";var N=G(2),I=G(8),C=G(9);function P(T,M,z){N.call(this,z),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=z,this.bendpoints=[],this.source=T,this.target=M}for(var D in P.prototype=Object.create(N.prototype),N)P[D]=N[D];P.prototype.getSource=function(){return this.source},P.prototype.getTarget=function(){return this.target},P.prototype.isInterGraph=function(){return this.isInterGraph},P.prototype.getLength=function(){return this.length},P.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},P.prototype.getBendpoints=function(){return this.bendpoints},P.prototype.getLca=function(){return this.lca},P.prototype.getSourceInLca=function(){return this.sourceInLca},P.prototype.getTargetInLca=function(){return this.targetInLca},P.prototype.getOtherEnd=function(T){if(this.source===T)return this.target;if(this.target===T)return this.source;throw"Node is not incident with this edge"},P.prototype.getOtherEndInGraph=function(T,M){for(var z=this.getOtherEnd(T),B=M.getGraphManager().getRoot();;){if(z.getOwner()==M)return z;if(z.getOwner()==B)break;z=z.getOwner().getParent()}return null},P.prototype.updateLength=function(){var T=new Array(4);this.isOverlapingSourceAndTarget=I.getIntersection(this.target.getRect(),this.source.getRect(),T),this.isOverlapingSourceAndTarget||(this.lengthX=T[0]-T[2],this.lengthY=T[1]-T[3],Math.abs(this.lengthX)<1&&(this.lengthX=C.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=C.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},P.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=C.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=C.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},Ne.exports=P},function(Ne,$,G){"use strict";Ne.exports=function N(I){this.vGraphObject=I}},function(Ne,$,G){"use strict";var N=G(2),I=G(10),C=G(13),P=G(0),D=G(16),T=G(4);function M(B,K,te,j){null==te&&null==j&&(j=K),N.call(this,j),null!=B.graphManager&&(B=B.graphManager),this.estimatedSize=I.MIN_VALUE,this.inclusionTreeDepth=I.MAX_VALUE,this.vGraphObject=j,this.edges=[],this.graphManager=B,this.rect=null!=te&&null!=K?new C(K.x,K.y,te.width,te.height):new C}for(var z in M.prototype=Object.create(N.prototype),N)M[z]=N[z];M.prototype.getEdges=function(){return this.edges},M.prototype.getChild=function(){return this.child},M.prototype.getOwner=function(){return this.owner},M.prototype.getWidth=function(){return this.rect.width},M.prototype.setWidth=function(B){this.rect.width=B},M.prototype.getHeight=function(){return this.rect.height},M.prototype.setHeight=function(B){this.rect.height=B},M.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},M.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},M.prototype.getCenter=function(){return new T(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},M.prototype.getLocation=function(){return new T(this.rect.x,this.rect.y)},M.prototype.getRect=function(){return this.rect},M.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},M.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},M.prototype.setRect=function(B,K){this.rect.x=B.x,this.rect.y=B.y,this.rect.width=K.width,this.rect.height=K.height},M.prototype.setCenter=function(B,K){this.rect.x=B-this.rect.width/2,this.rect.y=K-this.rect.height/2},M.prototype.setLocation=function(B,K){this.rect.x=B,this.rect.y=K},M.prototype.moveBy=function(B,K){this.rect.x+=B,this.rect.y+=K},M.prototype.getEdgeListToNode=function(B){var K=[],j=this;return j.edges.forEach(function(q){if(q.target==B){if(q.source!=j)throw"Incorrect edge source!";K.push(q)}}),K},M.prototype.getEdgesBetween=function(B){var K=[],j=this;return j.edges.forEach(function(q){if(q.source!=j&&q.target!=j)throw"Incorrect edge source and/or target";(q.target==B||q.source==B)&&K.push(q)}),K},M.prototype.getNeighborsList=function(){var B=new Set,K=this;return K.edges.forEach(function(te){if(te.source==K)B.add(te.target);else{if(te.target!=K)throw"Incorrect incidency!";B.add(te.source)}}),B},M.prototype.withChildren=function(){var B=new Set;if(B.add(this),null!=this.child)for(var j=this.child.getNodes(),q=0;q<j.length;q++)j[q].withChildren().forEach(function(ae){B.add(ae)});return B},M.prototype.getNoOfChildren=function(){var B=0;if(null==this.child)B=1;else for(var te=this.child.getNodes(),j=0;j<te.length;j++)B+=te[j].getNoOfChildren();return 0==B&&(B=1),B},M.prototype.getEstimatedSize=function(){if(this.estimatedSize==I.MIN_VALUE)throw"assert failed";return this.estimatedSize},M.prototype.calcEstimatedSize=function(){return null==this.child?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},M.prototype.scatter=function(){var B,K,te=-P.INITIAL_WORLD_BOUNDARY,j=P.INITIAL_WORLD_BOUNDARY;B=P.WORLD_CENTER_X+D.nextDouble()*(j-te)+te;var q=-P.INITIAL_WORLD_BOUNDARY,ae=P.INITIAL_WORLD_BOUNDARY;K=P.WORLD_CENTER_Y+D.nextDouble()*(ae-q)+q,this.rect.x=B,this.rect.y=K},M.prototype.updateBounds=function(){if(null==this.getChild())throw"assert failed";if(0!=this.getChild().getNodes().length){var B=this.getChild();if(B.updateBounds(!0),this.rect.x=B.getLeft(),this.rect.y=B.getTop(),this.setWidth(B.getRight()-B.getLeft()),this.setHeight(B.getBottom()-B.getTop()),P.NODE_DIMENSIONS_INCLUDE_LABELS){var K=B.getRight()-B.getLeft(),te=B.getBottom()-B.getTop();this.labelWidth>K&&(this.rect.x-=(this.labelWidth-K)/2,this.setWidth(this.labelWidth)),this.labelHeight>te&&("center"==this.labelPos?this.rect.y-=(this.labelHeight-te)/2:"top"==this.labelPos&&(this.rect.y-=this.labelHeight-te),this.setHeight(this.labelHeight))}}},M.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==I.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},M.prototype.transform=function(B){var K=this.rect.x;K>P.WORLD_BOUNDARY?K=P.WORLD_BOUNDARY:K<-P.WORLD_BOUNDARY&&(K=-P.WORLD_BOUNDARY);var te=this.rect.y;te>P.WORLD_BOUNDARY?te=P.WORLD_BOUNDARY:te<-P.WORLD_BOUNDARY&&(te=-P.WORLD_BOUNDARY);var j=new T(K,te),q=B.inverseTransformPoint(j);this.setLocation(q.x,q.y)},M.prototype.getLeft=function(){return this.rect.x},M.prototype.getRight=function(){return this.rect.x+this.rect.width},M.prototype.getTop=function(){return this.rect.y},M.prototype.getBottom=function(){return this.rect.y+this.rect.height},M.prototype.getParent=function(){return null==this.owner?null:this.owner.getParent()},Ne.exports=M},function(Ne,$,G){"use strict";function N(I,C){null==I&&null==C?(this.x=0,this.y=0):(this.x=I,this.y=C)}N.prototype.getX=function(){return this.x},N.prototype.getY=function(){return this.y},N.prototype.setX=function(I){this.x=I},N.prototype.setY=function(I){this.y=I},N.prototype.getDifference=function(I){return new DimensionD(this.x-I.x,this.y-I.y)},N.prototype.getCopy=function(){return new N(this.x,this.y)},N.prototype.translate=function(I){return this.x+=I.width,this.y+=I.height,this},Ne.exports=N},function(Ne,$,G){"use strict";var N=G(2),I=G(10),C=G(0),P=G(6),D=G(3),T=G(1),M=G(13),z=G(12),B=G(11);function K(j,q,ae){N.call(this,ae),this.estimatedSize=I.MIN_VALUE,this.margin=C.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=j,null!=q&&q instanceof P?this.graphManager=q:null!=q&&q instanceof Layout&&(this.graphManager=q.graphManager)}for(var te in K.prototype=Object.create(N.prototype),N)K[te]=N[te];K.prototype.getNodes=function(){return this.nodes},K.prototype.getEdges=function(){return this.edges},K.prototype.getGraphManager=function(){return this.graphManager},K.prototype.getParent=function(){return this.parent},K.prototype.getLeft=function(){return this.left},K.prototype.getRight=function(){return this.right},K.prototype.getTop=function(){return this.top},K.prototype.getBottom=function(){return this.bottom},K.prototype.isConnected=function(){return this.isConnected},K.prototype.add=function(j,q,ae){if(null==q&&null==ae){var Q=j;if(null==this.graphManager)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(Q)>-1)throw"Node already in graph!";return Q.owner=this,this.getNodes().push(Q),Q}var ce=j;if(!(this.getNodes().indexOf(q)>-1&&this.getNodes().indexOf(ae)>-1))throw"Source or target not in graph!";if(q.owner!=ae.owner||q.owner!=this)throw"Both owners must be this graph!";return q.owner!=ae.owner?null:(ce.source=q,ce.target=ae,ce.isInterGraph=!1,this.getEdges().push(ce),q.edges.push(ce),ae!=q&&ae.edges.push(ce),ce)},K.prototype.remove=function(j){var q=j;if(j instanceof D){if(null==q)throw"Node is null!";if(null==q.owner||q.owner!=this)throw"Owner graph is invalid!";if(null==this.graphManager)throw"Owner graph manager is invalid!";for(var ae=q.edges.slice(),ce=ae.length,ee=0;ee<ce;ee++)(Q=ae[ee]).isInterGraph?this.graphManager.remove(Q):Q.source.owner.remove(Q);if(-1==(Re=this.nodes.indexOf(q)))throw"Node not in owner node list!";this.nodes.splice(Re,1)}else if(j instanceof T){var Q;if(null==(Q=j))throw"Edge is null!";if(null==Q.source||null==Q.target)throw"Source and/or target is null!";if(null==Q.source.owner||null==Q.target.owner||Q.source.owner!=this||Q.target.owner!=this)throw"Source and/or target owner is invalid!";var Re,de=Q.source.edges.indexOf(Q),U=Q.target.edges.indexOf(Q);if(!(de>-1&&U>-1))throw"Source and/or target doesn't know this edge!";if(Q.source.edges.splice(de,1),Q.target!=Q.source&&Q.target.edges.splice(U,1),-1==(Re=Q.source.owner.getEdges().indexOf(Q)))throw"Not in owner's edge list!";Q.source.owner.getEdges().splice(Re,1)}},K.prototype.updateLeftTop=function(){for(var ae,Q,ce,j=I.MAX_VALUE,q=I.MAX_VALUE,ee=this.getNodes(),Re=ee.length,de=0;de<Re;de++){var U=ee[de];j>(ae=U.getTop())&&(j=ae),q>(Q=U.getLeft())&&(q=Q)}return j==I.MAX_VALUE?null:(ce=null!=ee[0].getParent().paddingLeft?ee[0].getParent().paddingLeft:this.margin,this.left=q-ce,this.top=j-ce,new z(this.left,this.top))},K.prototype.updateBounds=function(j){for(var ee,Re,de,U,L,q=I.MAX_VALUE,ae=-I.MAX_VALUE,Q=I.MAX_VALUE,ce=-I.MAX_VALUE,V=this.nodes,J=V.length,ue=0;ue<J;ue++){var ve=V[ue];j&&null!=ve.child&&ve.updateBounds(),q>(ee=ve.getLeft())&&(q=ee),ae<(Re=ve.getRight())&&(ae=Re),Q>(de=ve.getTop())&&(Q=de),ce<(U=ve.getBottom())&&(ce=U)}var oe=new M(q,Q,ae-q,ce-Q);q==I.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),L=null!=V[0].getParent().paddingLeft?V[0].getParent().paddingLeft:this.margin,this.left=oe.x-L,this.right=oe.x+oe.width+L,this.top=oe.y-L,this.bottom=oe.y+oe.height+L},K.calculateBounds=function(j){for(var ee,Re,de,U,q=I.MAX_VALUE,ae=-I.MAX_VALUE,Q=I.MAX_VALUE,ce=-I.MAX_VALUE,L=j.length,V=0;V<L;V++){var J=j[V];q>(ee=J.getLeft())&&(q=ee),ae<(Re=J.getRight())&&(ae=Re),Q>(de=J.getTop())&&(Q=de),ce<(U=J.getBottom())&&(ce=U)}return new M(q,Q,ae-q,ce-Q)},K.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},K.prototype.getEstimatedSize=function(){if(this.estimatedSize==I.MIN_VALUE)throw"assert failed";return this.estimatedSize},K.prototype.calcEstimatedSize=function(){for(var j=0,q=this.nodes,ae=q.length,Q=0;Q<ae;Q++)j+=q[Q].calcEstimatedSize();return this.estimatedSize=0==j?C.EMPTY_COMPOUND_NODE_SIZE:j/Math.sqrt(this.nodes.length),this.estimatedSize},K.prototype.updateConnected=function(){var j=this;if(0!=this.nodes.length){var ce,ee,q=new B,ae=new Set,Q=this.nodes[0];for(Q.withChildren().forEach(function(ue){q.push(ue),ae.add(ue)});0!==q.length;)for(var de=(ce=(Q=q.shift()).getEdges()).length,U=0;U<de;U++)null==(ee=ce[U].getOtherEndInGraph(Q,this))||ae.has(ee)||ee.withChildren().forEach(function(ue){q.push(ue),ae.add(ue)});if(this.isConnected=!1,ae.size>=this.nodes.length){var J=0;ae.forEach(function(ue){ue.owner==j&&J++}),J==this.nodes.length&&(this.isConnected=!0)}}else this.isConnected=!0},Ne.exports=K},function(Ne,$,G){"use strict";var N,I=G(1);function C(P){N=G(5),this.layout=P,this.graphs=[],this.edges=[]}C.prototype.addRoot=function(){var P=this.layout.newGraph(),D=this.layout.newNode(null),T=this.add(P,D);return this.setRootGraph(T),this.rootGraph},C.prototype.add=function(P,D,T,M,z){if(null==T&&null==M&&null==z){if(null==P)throw"Graph is null!";if(null==D)throw"Parent node is null!";if(this.graphs.indexOf(P)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(P),null!=P.parent)throw"Already has a parent!";if(null!=D.child)throw"Already has a child!";return P.parent=D,D.child=P,P}z=T,T=P;var B=(M=D).getOwner(),K=z.getOwner();if(null==B||B.getGraphManager()!=this)throw"Source not in this graph mgr!";if(null==K||K.getGraphManager()!=this)throw"Target not in this graph mgr!";if(B==K)return T.isInterGraph=!1,B.add(T,M,z);if(T.isInterGraph=!0,T.source=M,T.target=z,this.edges.indexOf(T)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(T),null==T.source||null==T.target)throw"Edge source and/or target is null!";if(-1!=T.source.edges.indexOf(T)||-1!=T.target.edges.indexOf(T))throw"Edge already in source and/or target incidency list!";return T.source.edges.push(T),T.target.edges.push(T),T},C.prototype.remove=function(P){if(P instanceof N){var D=P;if(D.getGraphManager()!=this)throw"Graph not in this graph mgr";if(D!=this.rootGraph&&(null==D.parent||D.parent.graphManager!=this))throw"Invalid parent node!";for(var M,T=[],z=(T=T.concat(D.getEdges())).length,B=0;B<z;B++)D.remove(M=T[B]);var K=[];for(z=(K=K.concat(D.getNodes())).length,B=0;B<z;B++)D.remove(K[B]);D==this.rootGraph&&this.setRootGraph(null);var j=this.graphs.indexOf(D);this.graphs.splice(j,1),D.parent=null}else if(P instanceof I){if(null==(M=P))throw"Edge is null!";if(!M.isInterGraph)throw"Not an inter-graph edge!";if(null==M.source||null==M.target)throw"Source and/or target is null!";if(-1==M.source.edges.indexOf(M)||-1==M.target.edges.indexOf(M))throw"Source and/or target doesn't know this edge!";if(j=M.source.edges.indexOf(M),M.source.edges.splice(j,1),j=M.target.edges.indexOf(M),M.target.edges.splice(j,1),null==M.source.owner||null==M.source.owner.getGraphManager())throw"Edge owner graph or owner graph manager is null!";if(-1==M.source.owner.getGraphManager().edges.indexOf(M))throw"Not in owner graph manager's edge list!";j=M.source.owner.getGraphManager().edges.indexOf(M),M.source.owner.getGraphManager().edges.splice(j,1)}},C.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},C.prototype.getGraphs=function(){return this.graphs},C.prototype.getAllNodes=function(){if(null==this.allNodes){for(var P=[],D=this.getGraphs(),T=D.length,M=0;M<T;M++)P=P.concat(D[M].getNodes());this.allNodes=P}return this.allNodes},C.prototype.resetAllNodes=function(){this.allNodes=null},C.prototype.resetAllEdges=function(){this.allEdges=null},C.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},C.prototype.getAllEdges=function(){if(null==this.allEdges){for(var P=[],D=this.getGraphs(),M=0;M<D.length;M++)P=P.concat(D[M].getEdges());P=P.concat(this.edges),this.allEdges=P}return this.allEdges},C.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},C.prototype.setAllNodesToApplyGravitation=function(P){if(null!=this.allNodesToApplyGravitation)throw"assert failed";this.allNodesToApplyGravitation=P},C.prototype.getRoot=function(){return this.rootGraph},C.prototype.setRootGraph=function(P){if(P.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=P,null==P.parent&&(P.parent=this.layout.newNode("Root node"))},C.prototype.getLayout=function(){return this.layout},C.prototype.isOneAncestorOfOther=function(P,D){if(null==P||null==D)throw"assert failed";if(P==D)return!0;for(var M,T=P.getOwner();null!=(M=T.getParent());){if(M==D)return!0;if(null==(T=M.getOwner()))break}for(T=D.getOwner();null!=(M=T.getParent());){if(M==P)return!0;if(null==(T=M.getOwner()))break}return!1},C.prototype.calcLowestCommonAncestors=function(){for(var P,D,T,M,z,B=this.getAllEdges(),K=B.length,te=0;te<K;te++)if(D=(P=B[te]).source,T=P.target,P.lca=null,P.sourceInLca=D,P.targetInLca=T,D!=T){for(M=D.getOwner();null==P.lca;){for(P.targetInLca=T,z=T.getOwner();null==P.lca;){if(z==M){P.lca=z;break}if(z==this.rootGraph)break;if(null!=P.lca)throw"assert failed";P.targetInLca=z.getParent(),z=P.targetInLca.getOwner()}if(M==this.rootGraph)break;null==P.lca&&(P.sourceInLca=M.getParent(),M=P.sourceInLca.getOwner())}if(null==P.lca)throw"assert failed"}else P.lca=D.getOwner()},C.prototype.calcLowestCommonAncestor=function(P,D){if(P==D)return P.getOwner();for(var T=P.getOwner();null!=T;){for(var M=D.getOwner();null!=M;){if(M==T)return M;M=M.getParent().getOwner()}T=T.getParent().getOwner()}return T},C.prototype.calcInclusionTreeDepths=function(P,D){null==P&&null==D&&(P=this.rootGraph,D=1);for(var T,M=P.getNodes(),z=M.length,B=0;B<z;B++)(T=M[B]).inclusionTreeDepth=D,null!=T.child&&this.calcInclusionTreeDepths(T.child,D+1)},C.prototype.includesInvalidEdge=function(){for(var P,D=this.edges.length,T=0;T<D;T++)if(this.isOneAncestorOfOther((P=this.edges[T]).source,P.target))return!0;return!1},Ne.exports=C},function(Ne,$,G){"use strict";var N=G(0);function I(){}for(var C in N)I[C]=N[C];I.MAX_ITERATIONS=2500,I.DEFAULT_EDGE_LENGTH=50,I.DEFAULT_SPRING_STRENGTH=.45,I.DEFAULT_REPULSION_STRENGTH=4500,I.DEFAULT_GRAVITY_STRENGTH=.4,I.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,I.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,I.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,I.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,I.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,I.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,I.COOLING_ADAPTATION_FACTOR=.33,I.ADAPTATION_LOWER_NODE_LIMIT=1e3,I.ADAPTATION_UPPER_NODE_LIMIT=5e3,I.MAX_NODE_DISPLACEMENT=3*(I.MAX_NODE_DISPLACEMENT_INCREMENTAL=100),I.MIN_REPULSION_DIST=I.DEFAULT_EDGE_LENGTH/10,I.CONVERGENCE_CHECK_PERIOD=100,I.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,I.MIN_EDGE_LENGTH=1,I.GRID_CALCULATION_CHECK_PERIOD=10,Ne.exports=I},function(Ne,$,G){"use strict";var N=G(12);function I(){}I.calcSeparationAmount=function(C,P,D,T){if(!C.intersects(P))throw"assert failed";var M=new Array(2);this.decideDirectionsForOverlappingNodes(C,P,M),D[0]=Math.min(C.getRight(),P.getRight())-Math.max(C.x,P.x),D[1]=Math.min(C.getBottom(),P.getBottom())-Math.max(C.y,P.y),C.getX()<=P.getX()&&C.getRight()>=P.getRight()?D[0]+=Math.min(P.getX()-C.getX(),C.getRight()-P.getRight()):P.getX()<=C.getX()&&P.getRight()>=C.getRight()&&(D[0]+=Math.min(C.getX()-P.getX(),P.getRight()-C.getRight())),C.getY()<=P.getY()&&C.getBottom()>=P.getBottom()?D[1]+=Math.min(P.getY()-C.getY(),C.getBottom()-P.getBottom()):P.getY()<=C.getY()&&P.getBottom()>=C.getBottom()&&(D[1]+=Math.min(C.getY()-P.getY(),P.getBottom()-C.getBottom()));var z=Math.abs((P.getCenterY()-C.getCenterY())/(P.getCenterX()-C.getCenterX()));P.getCenterY()===C.getCenterY()&&P.getCenterX()===C.getCenterX()&&(z=1);var B=z*D[0],K=D[1]/z;D[0]<K?K=D[0]:B=D[1],D[0]=-1*M[0]*(K/2+T),D[1]=-1*M[1]*(B/2+T)},I.decideDirectionsForOverlappingNodes=function(C,P,D){D[0]=C.getCenterX()<P.getCenterX()?-1:1,D[1]=C.getCenterY()<P.getCenterY()?-1:1},I.getIntersection2=function(C,P,D){var T=C.getCenterX(),M=C.getCenterY(),z=P.getCenterX(),B=P.getCenterY();if(C.intersects(P))return D[0]=T,D[1]=M,D[2]=z,D[3]=B,!0;var K=C.getX(),te=C.getY(),j=C.getRight(),q=C.getX(),ae=C.getBottom(),Q=C.getRight(),ce=C.getWidthHalf(),ee=C.getHeightHalf(),Re=P.getX(),de=P.getY(),U=P.getRight(),L=P.getX(),V=P.getBottom(),J=P.getRight(),ue=P.getWidthHalf(),ve=P.getHeightHalf(),oe=!1,xe=!1;if(T===z){if(M>B)return D[0]=T,D[1]=te,D[2]=z,D[3]=V,!1;if(M<B)return D[0]=T,D[1]=ae,D[2]=z,D[3]=de,!1}else if(M===B){if(T>z)return D[0]=K,D[1]=M,D[2]=U,D[3]=B,!1;if(T<z)return D[0]=j,D[1]=M,D[2]=Re,D[3]=B,!1}else{var Le=C.height/C.width,ye=P.height/P.width,qe=(B-M)/(z-T),ze=void 0,ke=void 0,pe=void 0,We=void 0;if(-Le===qe?T>z?(D[0]=q,D[1]=ae,oe=!0):(D[0]=j,D[1]=te,oe=!0):Le===qe&&(T>z?(D[0]=K,D[1]=te,oe=!0):(D[0]=Q,D[1]=ae,oe=!0)),-ye===qe?z>T?(D[2]=L,D[3]=V,xe=!0):(D[2]=U,D[3]=de,xe=!0):ye===qe&&(z>T?(D[2]=Re,D[3]=de,xe=!0):(D[2]=J,D[3]=V,xe=!0)),oe&&xe)return!1;if(T>z?M>B?(ze=this.getCardinalDirection(Le,qe,4),ke=this.getCardinalDirection(ye,qe,2)):(ze=this.getCardinalDirection(-Le,qe,3),ke=this.getCardinalDirection(-ye,qe,1)):M>B?(ze=this.getCardinalDirection(-Le,qe,1),ke=this.getCardinalDirection(-ye,qe,3)):(ze=this.getCardinalDirection(Le,qe,2),ke=this.getCardinalDirection(ye,qe,4)),!oe)switch(ze){case 1:pe=te,D[0]=T+-ee/qe,D[1]=pe;break;case 2:pe=M+ce*qe,D[0]=Q,D[1]=pe;break;case 3:pe=ae,D[0]=T+ee/qe,D[1]=pe;break;case 4:pe=M+-ce*qe,D[0]=q,D[1]=pe}if(!xe)switch(ke){case 1:We=de,D[2]=z+-ve/qe,D[3]=We;break;case 2:We=B+ue*qe,D[2]=J,D[3]=We;break;case 3:We=V,D[2]=z+ve/qe,D[3]=We;break;case 4:We=B+-ue*qe,D[2]=L,D[3]=We}}return!1},I.getCardinalDirection=function(C,P,D){return C>P?D:1+D%4},I.getIntersection=function(C,P,D,T){if(null==T)return this.getIntersection2(C,P,D);var ee,Re,de,U,L,V,J,M=C.x,z=C.y,B=P.x,K=P.y,te=D.x,j=D.y,q=T.x,ae=T.y;return L=B*z-M*K,V=q*j-te*ae,0==(J=(ee=K-z)*(U=te-q)-(Re=ae-j)*(de=M-B))?null:new N((de*V-U*L)/J,(Re*L-ee*V)/J)},I.angleOfVector=function(C,P,D,T){var M=void 0;return C!==D?(M=Math.atan((T-P)/(D-C)),D<C?M+=Math.PI:T<P&&(M+=this.TWO_PI)):M=T<P?this.ONE_AND_HALF_PI:this.HALF_PI,M},I.doIntersect=function(C,P,D,T){var M=C.x,z=C.y,B=P.x,K=P.y,te=D.x,j=D.y,q=T.x,ae=T.y,Q=(B-M)*(ae-j)-(q-te)*(K-z);if(0===Q)return!1;var ce=((ae-j)*(q-M)+(te-q)*(ae-z))/Q,ee=((z-K)*(q-M)+(B-M)*(ae-z))/Q;return 0<ce&&ce<1&&0<ee&&ee<1},I.HALF_PI=.5*Math.PI,I.ONE_AND_HALF_PI=1.5*Math.PI,I.TWO_PI=2*Math.PI,I.THREE_PI=3*Math.PI,Ne.exports=I},function(Ne,$,G){"use strict";function N(){}N.sign=function(I){return I>0?1:I<0?-1:0},N.floor=function(I){return I<0?Math.ceil(I):Math.floor(I)},N.ceil=function(I){return I<0?Math.floor(I):Math.ceil(I)},Ne.exports=N},function(Ne,$,G){"use strict";function N(){}N.MAX_VALUE=2147483647,N.MIN_VALUE=-2147483648,Ne.exports=N},function(Ne,$,G){"use strict";var N=function(){function M(z,B){for(var K=0;K<B.length;K++){var te=B[K];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(z,te.key,te)}}return function(z,B,K){return B&&M(z.prototype,B),K&&M(z,K),z}}();var C=function(z){return{value:z,next:null,prev:null}},P=function(z,B,K,te){return null!==z?z.next=B:te.head=B,null!==K?K.prev=B:te.tail=B,B.prev=z,B.next=K,te.length++,B},D=function(z,B){var K=z.prev,te=z.next;return null!==K?K.next=te:B.head=te,null!==te?te.prev=K:B.tail=K,z.prev=z.next=null,B.length--,z},T=function(){function M(z){var B=this;(function I(M,z){if(!(M instanceof z))throw new TypeError("Cannot call a class as a function")})(this,M),this.length=0,this.head=null,this.tail=null,z?.forEach(function(K){return B.push(K)})}return N(M,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(B,K){return P(K.prev,C(B),K,this)}},{key:"insertAfter",value:function(B,K){return P(K,C(B),K.next,this)}},{key:"insertNodeBefore",value:function(B,K){return P(K.prev,B,K,this)}},{key:"insertNodeAfter",value:function(B,K){return P(K,B,K.next,this)}},{key:"push",value:function(B){return P(this.tail,C(B),null,this)}},{key:"unshift",value:function(B){return P(null,C(B),this.head,this)}},{key:"remove",value:function(B){return D(B,this)}},{key:"pop",value:function(){return D(this.tail,this).value}},{key:"popNode",value:function(){return D(this.tail,this)}},{key:"shift",value:function(){return D(this.head,this).value}},{key:"shiftNode",value:function(){return D(this.head,this)}},{key:"get_object_at",value:function(B){if(B<=this.length()){for(var K=1,te=this.head;K<B;)te=te.next,K++;return te.value}}},{key:"set_object_at",value:function(B,K){if(B<=this.length()){for(var te=1,j=this.head;te<B;)j=j.next,te++;j.value=K}}}]),M}();Ne.exports=T},function(Ne,$,G){"use strict";function N(I,C,P){this.x=null,this.y=null,null==I&&null==C&&null==P?(this.x=0,this.y=0):"number"==typeof I&&"number"==typeof C&&null==P?(this.x=I,this.y=C):"Point"==I.constructor.name&&null==C&&null==P&&(this.x=(P=I).x,this.y=P.y)}N.prototype.getX=function(){return this.x},N.prototype.getY=function(){return this.y},N.prototype.getLocation=function(){return new N(this.x,this.y)},N.prototype.setLocation=function(I,C,P){"Point"==I.constructor.name&&null==C&&null==P?this.setLocation((P=I).x,P.y):"number"==typeof I&&"number"==typeof C&&null==P&&(parseInt(I)==I&&parseInt(C)==C?this.move(I,C):(this.x=Math.floor(I+.5),this.y=Math.floor(C+.5)))},N.prototype.move=function(I,C){this.x=I,this.y=C},N.prototype.translate=function(I,C){this.x+=I,this.y+=C},N.prototype.equals=function(I){return"Point"==I.constructor.name?this.x==I.x&&this.y==I.y:this==I},N.prototype.toString=function(){return(new N).constructor.name+"[x="+this.x+",y="+this.y+"]"},Ne.exports=N},function(Ne,$,G){"use strict";function N(I,C,P,D){this.x=0,this.y=0,this.width=0,this.height=0,null!=I&&null!=C&&null!=P&&null!=D&&(this.x=I,this.y=C,this.width=P,this.height=D)}N.prototype.getX=function(){return this.x},N.prototype.setX=function(I){this.x=I},N.prototype.getY=function(){return this.y},N.prototype.setY=function(I){this.y=I},N.prototype.getWidth=function(){return this.width},N.prototype.setWidth=function(I){this.width=I},N.prototype.getHeight=function(){return this.height},N.prototype.setHeight=function(I){this.height=I},N.prototype.getRight=function(){return this.x+this.width},N.prototype.getBottom=function(){return this.y+this.height},N.prototype.intersects=function(I){return!(this.getRight()<I.x||this.getBottom()<I.y||I.getRight()<this.x||I.getBottom()<this.y)},N.prototype.getCenterX=function(){return this.x+this.width/2},N.prototype.getMinX=function(){return this.getX()},N.prototype.getMaxX=function(){return this.getX()+this.width},N.prototype.getCenterY=function(){return this.y+this.height/2},N.prototype.getMinY=function(){return this.getY()},N.prototype.getMaxY=function(){return this.getY()+this.height},N.prototype.getWidthHalf=function(){return this.width/2},N.prototype.getHeightHalf=function(){return this.height/2},Ne.exports=N},function(Ne,$,G){"use strict";var N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(C){return typeof C}:function(C){return C&&"function"==typeof Symbol&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C};function I(){}I.lastID=0,I.createID=function(C){return I.isPrimitive(C)?C:(null!=C.uniqueID||(C.uniqueID=I.getString(),I.lastID++),C.uniqueID)},I.getString=function(C){return null==C&&(C=I.lastID),"Object#"+C},I.isPrimitive=function(C){var P=typeof C>"u"?"undefined":N(C);return null==C||"object"!=P&&"function"!=P},Ne.exports=I},function(Ne,$,G){"use strict";function N(te){if(Array.isArray(te)){for(var j=0,q=Array(te.length);j<te.length;j++)q[j]=te[j];return q}return Array.from(te)}var I=G(0),C=G(6),P=G(3),D=G(1),T=G(5),M=G(4),z=G(17),B=G(27);function K(te){B.call(this),this.layoutQuality=I.QUALITY,this.createBendsAsNeeded=I.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=I.DEFAULT_INCREMENTAL,this.animationOnLayout=I.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=I.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=I.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=I.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new C(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,null!=te&&(this.isRemoteUse=te)}K.RANDOM_SEED=1,(K.prototype=Object.create(B.prototype)).getGraphManager=function(){return this.graphManager},K.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},K.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},K.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},K.prototype.newGraphManager=function(){var te=new C(this);return this.graphManager=te,te},K.prototype.newGraph=function(te){return new T(null,this.graphManager,te)},K.prototype.newNode=function(te){return new P(this.graphManager,te)},K.prototype.newEdge=function(te){return new D(null,null,te)},K.prototype.checkLayoutSuccess=function(){return null==this.graphManager.getRoot()||0==this.graphManager.getRoot().getNodes().length||this.graphManager.includesInvalidEdge()},K.prototype.runLayout=function(){var te;return this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters(),te=!this.checkLayoutSuccess()&&this.layout(),"during"!==I.ANIMATE&&(te&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,te)},K.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},K.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var j=this.graphManager.getAllEdges(),q=0;q<j.length;q++);var Q=this.graphManager.getRoot().getNodes();for(q=0;q<Q.length;q++);this.update(this.graphManager.getRoot())}},K.prototype.update=function(te){if(null==te)this.update2();else if(te instanceof P){var j=te;if(null!=j.getChild())for(var q=j.getChild().getNodes(),ae=0;ae<q.length;ae++)update(q[ae]);null!=j.vGraphObject&&j.vGraphObject.update(j)}else te instanceof D?null!=te.vGraphObject&&te.vGraphObject.update(te):te instanceof T&&null!=te.vGraphObject&&te.vGraphObject.update(te)},K.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=I.QUALITY,this.animationDuringLayout=I.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=I.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=I.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=I.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=I.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=I.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},K.prototype.transform=function(te){if(null==te)this.transform(new M(0,0));else{var j=new z,q=this.graphManager.getRoot().updateLeftTop();if(null!=q){j.setWorldOrgX(te.x),j.setWorldOrgY(te.y),j.setDeviceOrgX(q.x),j.setDeviceOrgY(q.y);for(var ae=this.getAllNodes(),ce=0;ce<ae.length;ce++)ae[ce].transform(j)}}},K.prototype.positionNodesRandomly=function(te){if(null==te)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var j,q,ae=te.getNodes(),Q=0;Q<ae.length;Q++)null==(q=(j=ae[Q]).getChild())||0==q.getNodes().length?j.scatter():(this.positionNodesRandomly(q),j.updateBounds())},K.prototype.getFlatForest=function(){for(var te=[],j=!0,q=this.graphManager.getRoot().getNodes(),ae=!0,Q=0;Q<q.length;Q++)null!=q[Q].getChild()&&(ae=!1);if(!ae)return te;var ce=new Set,ee=[],Re=new Map,de=[];for(de=de.concat(q);de.length>0&&j;){for(ee.push(de[0]);ee.length>0&&j;){var U=ee[0];ee.splice(0,1),ce.add(U);var L=U.getEdges();for(Q=0;Q<L.length;Q++){var V=L[Q].getOtherEnd(U);if(Re.get(U)!=V){if(ce.has(V)){j=!1;break}ee.push(V),Re.set(V,U)}}}if(j){var J=[].concat(N(ce));for(te.push(J),Q=0;Q<J.length;Q++){var ve=de.indexOf(J[Q]);ve>-1&&de.splice(ve,1)}ce=new Set,Re=new Map}else te=[]}return te},K.prototype.createDummyNodesForBendpoints=function(te){for(var j=[],q=te.source,ae=this.graphManager.calcLowestCommonAncestor(te.source,te.target),Q=0;Q<te.bendpoints.length;Q++){var ce=this.newNode(null);ce.setRect(new Point(0,0),new Dimension(1,1)),ae.add(ce);var ee=this.newEdge(null);this.graphManager.add(ee,q,ce),j.add(ce),q=ce}return ee=this.newEdge(null),this.graphManager.add(ee,q,te.target),this.edgeToDummyNodes.set(te,j),te.isInterGraph()?this.graphManager.remove(te):ae.remove(te),j},K.prototype.createBendpointsFromDummyNodes=function(){var te=[];te=te.concat(this.graphManager.getAllEdges()),te=[].concat(N(this.edgeToDummyNodes.keys())).concat(te);for(var j=0;j<te.length;j++){var q=te[j];if(q.bendpoints.length>0){for(var ae=this.edgeToDummyNodes.get(q),Q=0;Q<ae.length;Q++){var ce=ae[Q],ee=new M(ce.getCenterX(),ce.getCenterY()),Re=q.bendpoints.get(Q);Re.x=ee.x,Re.y=ee.y,ce.getOwner().remove(ce)}this.graphManager.add(q,q.source,q.target)}}},K.transform=function(te,j,q,ae){if(null!=q&&null!=ae){var Q=j;return te<=50?Q-=(j-j/q)/50*(50-te):Q+=(j*ae-j)/50*(te-50),Q}var Re,de;return te<=50?(Re=9*j/500,de=j/10):(Re=9*j/50,de=-8*j),Re*te+de},K.findCenterOfTree=function(te){var j=[];j=j.concat(te);var q=[],ae=new Map,Q=!1,ce=null;(1==j.length||2==j.length)&&(Q=!0,ce=j[0]);for(var ee=0;ee<j.length;ee++){var de=(Re=j[ee]).getNeighborsList().size;ae.set(Re,Re.getNeighborsList().size),1==de&&q.push(Re)}var U=[];for(U=U.concat(q);!Q;){var L=[];for(L=L.concat(U),U=[],ee=0;ee<j.length;ee++){var Re,V=j.indexOf(Re=j[ee]);V>=0&&j.splice(V,1),Re.getNeighborsList().forEach(function(oe){if(q.indexOf(oe)<0){var Le=ae.get(oe)-1;1==Le&&U.push(oe),ae.set(oe,Le)}})}q=q.concat(U),(1==j.length||2==j.length)&&(Q=!0,ce=j[0])}return ce},K.prototype.setGraphManager=function(te){this.graphManager=te},Ne.exports=K},function(Ne,$,G){"use strict";function N(){}N.seed=1,N.x=0,N.nextDouble=function(){return(N.x=1e4*Math.sin(N.seed++))-Math.floor(N.x)},Ne.exports=N},function(Ne,$,G){"use strict";var N=G(4);function I(C,P){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}I.prototype.getWorldOrgX=function(){return this.lworldOrgX},I.prototype.setWorldOrgX=function(C){this.lworldOrgX=C},I.prototype.getWorldOrgY=function(){return this.lworldOrgY},I.prototype.setWorldOrgY=function(C){this.lworldOrgY=C},I.prototype.getWorldExtX=function(){return this.lworldExtX},I.prototype.setWorldExtX=function(C){this.lworldExtX=C},I.prototype.getWorldExtY=function(){return this.lworldExtY},I.prototype.setWorldExtY=function(C){this.lworldExtY=C},I.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},I.prototype.setDeviceOrgX=function(C){this.ldeviceOrgX=C},I.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},I.prototype.setDeviceOrgY=function(C){this.ldeviceOrgY=C},I.prototype.getDeviceExtX=function(){return this.ldeviceExtX},I.prototype.setDeviceExtX=function(C){this.ldeviceExtX=C},I.prototype.getDeviceExtY=function(){return this.ldeviceExtY},I.prototype.setDeviceExtY=function(C){this.ldeviceExtY=C},I.prototype.transformX=function(C){var P=0,D=this.lworldExtX;return 0!=D&&(P=this.ldeviceOrgX+(C-this.lworldOrgX)*this.ldeviceExtX/D),P},I.prototype.transformY=function(C){var P=0,D=this.lworldExtY;return 0!=D&&(P=this.ldeviceOrgY+(C-this.lworldOrgY)*this.ldeviceExtY/D),P},I.prototype.inverseTransformX=function(C){var P=0,D=this.ldeviceExtX;return 0!=D&&(P=this.lworldOrgX+(C-this.ldeviceOrgX)*this.lworldExtX/D),P},I.prototype.inverseTransformY=function(C){var P=0,D=this.ldeviceExtY;return 0!=D&&(P=this.lworldOrgY+(C-this.ldeviceOrgY)*this.lworldExtY/D),P},I.prototype.inverseTransformPoint=function(C){return new N(this.inverseTransformX(C.x),this.inverseTransformY(C.y))},Ne.exports=I},function(Ne,$,G){"use strict";var I=G(15),C=G(7),P=G(0),D=G(8),T=G(9);function M(){I.call(this),this.useSmartIdealEdgeLengthCalculation=C.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.idealEdgeLength=C.DEFAULT_EDGE_LENGTH,this.springConstant=C.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=C.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=C.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=C.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=C.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=C.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*C.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=C.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=C.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=C.MAX_ITERATIONS}for(var z in M.prototype=Object.create(I.prototype),I)M[z]=I[z];M.prototype.initParameters=function(){I.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=C.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},M.prototype.calcIdealEdgeLengths=function(){for(var B,K,te,j,q,ae,Q=this.getGraphManager().getAllEdges(),ce=0;ce<Q.length;ce++)(B=Q[ce]).idealLength=this.idealEdgeLength,B.isInterGraph&&(te=B.getSource(),j=B.getTarget(),q=B.getSourceInLca().getEstimatedSize(),ae=B.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(B.idealLength+=q+ae-2*P.SIMPLE_NODE_SIZE),K=B.getLca().getInclusionTreeDepth(),B.idealLength+=C.DEFAULT_EDGE_LENGTH*C.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(te.getInclusionTreeDepth()+j.getInclusionTreeDepth()-2*K))},M.prototype.initSpringEmbedder=function(){var B=this.getAllNodes().length;this.incremental?(B>C.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*C.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(B-C.ADAPTATION_LOWER_NODE_LIMIT)/(C.ADAPTATION_UPPER_NODE_LIMIT-C.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-C.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=C.MAX_NODE_DISPLACEMENT_INCREMENTAL):(this.coolingFactor=B>C.ADAPTATION_LOWER_NODE_LIMIT?Math.max(C.COOLING_ADAPTATION_FACTOR,1-(B-C.ADAPTATION_LOWER_NODE_LIMIT)/(C.ADAPTATION_UPPER_NODE_LIMIT-C.ADAPTATION_LOWER_NODE_LIMIT)*(1-C.COOLING_ADAPTATION_FACTOR)):1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=C.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(5*this.getAllNodes().length,this.maxIterations),this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},M.prototype.calcSpringForces=function(){for(var K,B=this.getAllEdges(),te=0;te<B.length;te++)this.calcSpringForce(K=B[te],K.idealLength)},M.prototype.calcRepulsionForces=function(){var te,j,q,ae,ce,B=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],K=arguments.length>1&&void 0!==arguments[1]&&arguments[1],Q=this.getAllNodes();if(this.useFRGridVariant)for(this.totalIterations%C.GRID_CALCULATION_CHECK_PERIOD==1&&B&&this.updateGrid(),ce=new Set,te=0;te<Q.length;te++)this.calculateRepulsionForceOfANode(q=Q[te],ce,B,K),ce.add(q);else for(te=0;te<Q.length;te++)for(q=Q[te],j=te+1;j<Q.length;j++)ae=Q[j],q.getOwner()==ae.getOwner()&&this.calcRepulsionForce(q,ae)},M.prototype.calcGravitationalForces=function(){for(var K=this.getAllNodesToApplyGravitation(),te=0;te<K.length;te++)this.calcGravitationalForce(K[te])},M.prototype.moveNodes=function(){for(var B=this.getAllNodes(),te=0;te<B.length;te++)B[te].move()},M.prototype.calcSpringForce=function(B,K){var q,ae,Q,ce,te=B.getSource(),j=B.getTarget();if(this.uniformLeafNodeSizes&&null==te.getChild()&&null==j.getChild())B.updateLengthSimple();else if(B.updateLength(),B.isOverlapingSourceAndTarget)return;0!=(q=B.getLength())&&(ce=(ae=this.springConstant*(q-K))*(B.lengthY/q),te.springForceX+=Q=ae*(B.lengthX/q),te.springForceY+=ce,j.springForceX-=Q,j.springForceY-=ce)},M.prototype.calcRepulsionForce=function(B,K){var Q,ce,ee,Re,de,U,L,te=B.getRect(),j=K.getRect(),q=new Array(2),ae=new Array(4);if(te.intersects(j)){D.calcSeparationAmount(te,j,q,C.DEFAULT_EDGE_LENGTH/2),L=2*q[1];var V=B.noOfChildren*K.noOfChildren/(B.noOfChildren+K.noOfChildren);B.repulsionForceX-=V*(U=2*q[0]),B.repulsionForceY-=V*L,K.repulsionForceX+=V*U,K.repulsionForceY+=V*L}else this.uniformLeafNodeSizes&&null==B.getChild()&&null==K.getChild()?(Q=j.getCenterX()-te.getCenterX(),ce=j.getCenterY()-te.getCenterY()):(D.getIntersection(te,j,ae),Q=ae[2]-ae[0],ce=ae[3]-ae[1]),Math.abs(Q)<C.MIN_REPULSION_DIST&&(Q=T.sign(Q)*C.MIN_REPULSION_DIST),Math.abs(ce)<C.MIN_REPULSION_DIST&&(ce=T.sign(ce)*C.MIN_REPULSION_DIST),ee=Q*Q+ce*ce,Re=Math.sqrt(ee),L=(de=this.repulsionConstant*B.noOfChildren*K.noOfChildren/ee)*ce/Re,B.repulsionForceX-=U=de*Q/Re,B.repulsionForceY-=L,K.repulsionForceX+=U,K.repulsionForceY+=L},M.prototype.calcGravitationalForce=function(B){var K,te,j,q,ae,Q,ce,ee;te=((K=B.getOwner()).getRight()+K.getLeft())/2,j=(K.getTop()+K.getBottom())/2,q=B.getCenterX()-te,ae=B.getCenterY()-j,Q=Math.abs(q)+B.getWidth()/2,ce=Math.abs(ae)+B.getHeight()/2,B.getOwner()==this.graphManager.getRoot()?(Q>(ee=K.getEstimatedSize()*this.gravityRangeFactor)||ce>ee)&&(B.gravitationForceX=-this.gravityConstant*q,B.gravitationForceY=-this.gravityConstant*ae):(Q>(ee=K.getEstimatedSize()*this.compoundGravityRangeFactor)||ce>ee)&&(B.gravitationForceX=-this.gravityConstant*q*this.compoundGravityConstant,B.gravitationForceY=-this.gravityConstant*ae*this.compoundGravityConstant)},M.prototype.isConverged=function(){var B,K=!1;return this.totalIterations>this.maxIterations/3&&(K=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),B=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,B||K},M.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},M.prototype.calcNoOfChildrenForAllNodes=function(){for(var B,K=this.graphManager.getAllNodes(),te=0;te<K.length;te++)(B=K[te]).noOfChildren=B.getNoOfChildren()},M.prototype.calcGrid=function(B){var K,te;K=parseInt(Math.ceil((B.getRight()-B.getLeft())/this.repulsionRange)),te=parseInt(Math.ceil((B.getBottom()-B.getTop())/this.repulsionRange));for(var j=new Array(K),q=0;q<K;q++)j[q]=new Array(te);for(q=0;q<K;q++)for(var ae=0;ae<te;ae++)j[q][ae]=new Array;return j},M.prototype.addNodeToGrid=function(B,K,te){var j,q,ae,Q;j=parseInt(Math.floor((B.getRect().x-K)/this.repulsionRange)),q=parseInt(Math.floor((B.getRect().width+B.getRect().x-K)/this.repulsionRange)),ae=parseInt(Math.floor((B.getRect().y-te)/this.repulsionRange)),Q=parseInt(Math.floor((B.getRect().height+B.getRect().y-te)/this.repulsionRange));for(var ce=j;ce<=q;ce++)for(var ee=ae;ee<=Q;ee++)this.grid[ce][ee].push(B),B.setGridCoordinates(j,q,ae,Q)},M.prototype.updateGrid=function(){var B,te=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),B=0;B<te.length;B++)this.addNodeToGrid(te[B],this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},M.prototype.calculateRepulsionForceOfANode=function(B,K,te,j){if(this.totalIterations%C.GRID_CALCULATION_CHECK_PERIOD==1&&te||j){var q=new Set;B.surrounding=new Array;for(var ae,Q=this.grid,ce=B.startX-1;ce<B.finishX+2;ce++)for(var ee=B.startY-1;ee<B.finishY+2;ee++)if(!(ce<0||ee<0||ce>=Q.length||ee>=Q[0].length))for(var Re=0;Re<Q[ce][ee].length;Re++)if(ae=Q[ce][ee][Re],B.getOwner()==ae.getOwner()&&B!=ae&&!K.has(ae)&&!q.has(ae)){var de=Math.abs(B.getCenterX()-ae.getCenterX())-(B.getWidth()/2+ae.getWidth()/2),U=Math.abs(B.getCenterY()-ae.getCenterY())-(B.getHeight()/2+ae.getHeight()/2);de<=this.repulsionRange&&U<=this.repulsionRange&&q.add(ae)}B.surrounding=[].concat(function N(B){if(Array.isArray(B)){for(var K=0,te=Array(B.length);K<B.length;K++)te[K]=B[K];return te}return Array.from(B)}(q))}for(ce=0;ce<B.surrounding.length;ce++)this.calcRepulsionForce(B,B.surrounding[ce])},M.prototype.calcRepulsionRange=function(){return 0},Ne.exports=M},function(Ne,$,G){"use strict";var N=G(1),I=G(7);function C(D,T,M){N.call(this,D,T,M),this.idealLength=I.DEFAULT_EDGE_LENGTH}for(var P in C.prototype=Object.create(N.prototype),N)C[P]=N[P];Ne.exports=C},function(Ne,$,G){"use strict";var N=G(3);function I(P,D,T,M){N.call(this,P,D,T,M),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}for(var C in I.prototype=Object.create(N.prototype),N)I[C]=N[C];I.prototype.setGridCoordinates=function(P,D,T,M){this.startX=P,this.finishX=D,this.startY=T,this.finishY=M},Ne.exports=I},function(Ne,$,G){"use strict";function N(I,C){this.width=0,this.height=0,null!==I&&null!==C&&(this.height=C,this.width=I)}N.prototype.getWidth=function(){return this.width},N.prototype.setWidth=function(I){this.width=I},N.prototype.getHeight=function(){return this.height},N.prototype.setHeight=function(I){this.height=I},Ne.exports=N},function(Ne,$,G){"use strict";var N=G(14);function I(){this.map={},this.keys=[]}I.prototype.put=function(C,P){var D=N.createID(C);this.contains(D)||(this.map[D]=P,this.keys.push(C))},I.prototype.contains=function(C){return N.createID(C),null!=this.map[C]},I.prototype.get=function(C){var P=N.createID(C);return this.map[P]},I.prototype.keySet=function(){return this.keys},Ne.exports=I},function(Ne,$,G){"use strict";var N=G(14);function I(){this.set={}}I.prototype.add=function(C){var P=N.createID(C);this.contains(P)||(this.set[P]=C)},I.prototype.remove=function(C){delete this.set[N.createID(C)]},I.prototype.clear=function(){this.set={}},I.prototype.contains=function(C){return this.set[N.createID(C)]==C},I.prototype.isEmpty=function(){return 0===this.size()},I.prototype.size=function(){return Object.keys(this.set).length},I.prototype.addAllTo=function(C){for(var P=Object.keys(this.set),D=P.length,T=0;T<D;T++)C.push(this.set[P[T]])},I.prototype.size=function(){return Object.keys(this.set).length},I.prototype.addAll=function(C){for(var P=C.length,D=0;D<P;D++)this.add(C[D])},Ne.exports=I},function(Ne,$,G){"use strict";var N=function(){function D(T,M){for(var z=0;z<M.length;z++){var B=M[z];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(T,B.key,B)}}return function(T,M,z){return M&&D(T.prototype,M),z&&D(T,z),T}}();var C=G(11),P=function(){function D(T,M){(function I(D,T){if(!(D instanceof T))throw new TypeError("Cannot call a class as a function")})(this,D),(null!==M||void 0!==M)&&(this.compareFunction=this._defaultCompareFunction);var z;z=T instanceof C?T.size():T.length,this._quicksort(T,0,z-1)}return N(D,[{key:"_quicksort",value:function(M,z,B){if(z<B){var K=this._partition(M,z,B);this._quicksort(M,z,K),this._quicksort(M,K+1,B)}}},{key:"_partition",value:function(M,z,B){for(var K=this._get(M,z),te=z,j=B;;){for(;this.compareFunction(K,this._get(M,j));)j--;for(;this.compareFunction(this._get(M,te),K);)te++;if(!(te<j))return j;this._swap(M,te,j),te++,j--}}},{key:"_get",value:function(M,z){return M instanceof C?M.get_object_at(z):M[z]}},{key:"_set",value:function(M,z,B){M instanceof C?M.set_object_at(z,B):M[z]=B}},{key:"_swap",value:function(M,z,B){var K=this._get(M,z);this._set(M,z,this._get(M,B)),this._set(M,B,K)}},{key:"_defaultCompareFunction",value:function(M,z){return z>M}}]),D}();Ne.exports=P},function(Ne,$,G){"use strict";var N=function(){function P(D,T){for(var M=0;M<T.length;M++){var z=T[M];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(D,z.key,z)}}return function(D,T,M){return T&&P(D.prototype,T),M&&P(D,M),D}}();function I(P,D){if(!(P instanceof D))throw new TypeError("Cannot call a class as a function")}var C=function(){function P(D,T){var M=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,z=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,B=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;I(this,P),this.sequence1=D,this.sequence2=T,this.match_score=M,this.mismatch_penalty=z,this.gap_penalty=B,this.iMax=D.length+1,this.jMax=T.length+1,this.grid=new Array(this.iMax);for(var K=0;K<this.iMax;K++){this.grid[K]=new Array(this.jMax);for(var te=0;te<this.jMax;te++)this.grid[K][te]=0}this.tracebackGrid=new Array(this.iMax);for(var j=0;j<this.iMax;j++){this.tracebackGrid[j]=new Array(this.jMax);for(var q=0;q<this.jMax;q++)this.tracebackGrid[j][q]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return N(P,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var T=1;T<this.jMax;T++)this.grid[0][T]=this.grid[0][T-1]+this.gap_penalty,this.tracebackGrid[0][T]=[!1,!1,!0];for(var M=1;M<this.iMax;M++)this.grid[M][0]=this.grid[M-1][0]+this.gap_penalty,this.tracebackGrid[M][0]=[!1,!0,!1];for(var z=1;z<this.iMax;z++)for(var B=1;B<this.jMax;B++){var q=[this.sequence1[z-1]===this.sequence2[B-1]?this.grid[z-1][B-1]+this.match_score:this.grid[z-1][B-1]+this.mismatch_penalty,this.grid[z-1][B]+this.gap_penalty,this.grid[z][B-1]+this.gap_penalty],ae=this.arrayAllMaxIndexes(q);this.grid[z][B]=q[ae[0]],this.tracebackGrid[z][B]=[ae.includes(0),ae.includes(1),ae.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var T=[];for(T.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});T[0];){var M=T[0],z=this.tracebackGrid[M.pos[0]][M.pos[1]];z[0]&&T.push({pos:[M.pos[0]-1,M.pos[1]-1],seq1:this.sequence1[M.pos[0]-1]+M.seq1,seq2:this.sequence2[M.pos[1]-1]+M.seq2}),z[1]&&T.push({pos:[M.pos[0]-1,M.pos[1]],seq1:this.sequence1[M.pos[0]-1]+M.seq1,seq2:"-"+M.seq2}),z[2]&&T.push({pos:[M.pos[0],M.pos[1]-1],seq1:"-"+M.seq1,seq2:this.sequence2[M.pos[1]-1]+M.seq2}),0===M.pos[0]&&0===M.pos[1]&&this.alignments.push({sequence1:M.seq1,sequence2:M.seq2}),T.shift()}return this.alignments}},{key:"getAllIndexes",value:function(T,M){for(var z=[],B=-1;-1!==(B=T.indexOf(M,B+1));)z.push(B);return z}},{key:"arrayAllMaxIndexes",value:function(T){return this.getAllIndexes(T,Math.max.apply(null,T))}}]),P}();Ne.exports=C},function(Ne,$,G){"use strict";var N=function(){};N.FDLayout=G(18),N.FDLayoutConstants=G(7),N.FDLayoutEdge=G(19),N.FDLayoutNode=G(20),N.DimensionD=G(21),N.HashMap=G(22),N.HashSet=G(23),N.IGeometry=G(8),N.IMath=G(9),N.Integer=G(10),N.Point=G(12),N.PointD=G(4),N.RandomSeed=G(16),N.RectangleD=G(13),N.Transform=G(17),N.UniqueIDGeneretor=G(14),N.Quicksort=G(24),N.LinkedList=G(11),N.LGraphObject=G(2),N.LGraph=G(5),N.LEdge=G(1),N.LGraphManager=G(6),N.LNode=G(3),N.Layout=G(15),N.LayoutConstants=G(0),N.NeedlemanWunsch=G(25),Ne.exports=N},function(Ne,$,G){"use strict";function N(){this.listeners=[]}var I=N.prototype;I.addListener=function(C,P){this.listeners.push({event:C,callback:P})},I.removeListener=function(C,P){for(var D=this.listeners.length;D>=0;D--){var T=this.listeners[D];T.event===C&&T.callback===P&&this.listeners.splice(D,1)}},I.emit=function(C,P){for(var D=0;D<this.listeners.length;D++){var T=this.listeners[D];C===T.event&&T.callback(P)}},Ne.exports=N}])},4994:(Pe,Ne,$)=>{var G=$(4312),N=$(6421),I=$(5764),C=$(8685),P=$(6676);function D(T){var M=-1,z=null==T?0:T.length;for(this.clear();++M<z;){var B=T[M];this.set(B[0],B[1])}}D.prototype.clear=G,D.prototype.delete=N,D.prototype.get=I,D.prototype.has=C,D.prototype.set=P,Pe.exports=D},9215:(Pe,Ne,$)=>{var G=$(1840),N=$(4378),I=$(4981),C=$(7343),P=$(8895);function D(T){var M=-1,z=null==T?0:T.length;for(this.clear();++M<z;){var B=T[M];this.set(B[0],B[1])}}D.prototype.clear=G,D.prototype.delete=N,D.prototype.get=I,D.prototype.has=C,D.prototype.set=P,Pe.exports=D},1501:(Pe,Ne,$)=>{var I=$(3436)($(2119),"Map");Pe.exports=I},9850:(Pe,Ne,$)=>{var G=$(638),N=$(1184),I=$(866),C=$(3771),P=$(1772);function D(T){var M=-1,z=null==T?0:T.length;for(this.clear();++M<z;){var B=T[M];this.set(B[0],B[1])}}D.prototype.clear=G,D.prototype.delete=N,D.prototype.get=I,D.prototype.has=C,D.prototype.set=P,Pe.exports=D},443:(Pe,Ne,$)=>{var G=$(2119);Pe.exports=G.Symbol},4633:Pe=>{Pe.exports=function Ne($,G){for(var N=-1,I=null==$?0:$.length,C=Array(I);++N<I;)C[N]=G($[N],N,$);return C}},9719:(Pe,Ne,$)=>{var G=$(5683),N=$(217),C=Object.prototype.hasOwnProperty;Pe.exports=function P(D,T,M){var z=D[T];(!C.call(D,T)||!N(z,M)||void 0===M&&!(T in D))&&G(D,T,M)}},3503:(Pe,Ne,$)=>{var G=$(217);Pe.exports=function N(I,C){for(var P=I.length;P--;)if(G(I[P][0],C))return P;return-1}},5683:(Pe,Ne,$)=>{var G=$(6713);Pe.exports=function N(I,C,P){"__proto__"==C&&G?G(I,C,{configurable:!0,enumerable:!0,value:P,writable:!0}):I[C]=P}},5456:(Pe,Ne,$)=>{var G=$(6884),N=$(8533);Pe.exports=function I(C,P){for(var D=0,T=(P=G(P,C)).length;null!=C&&D<T;)C=C[N(P[D++])];return D&&D==T?C:void 0}},3337:(Pe,Ne,$)=>{var G=$(443),N=$(1318),I=$(2902),D=G?G.toStringTag:void 0;Pe.exports=function T(M){return null==M?void 0===M?"[object Undefined]":"[object Null]":D&&D in Object(M)?N(M):I(M)}},7304:(Pe,Ne,$)=>{var G=$(5946),N=$(1943),I=$(5940),C=$(2827),D=/^\[object .+?Constructor\]$/,K=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");Pe.exports=function te(j){return!(!I(j)||N(j))&&(G(j)?K:D).test(C(j))}},5963:(Pe,Ne,$)=>{var G=$(9719),N=$(6884),I=$(8442),C=$(5940),P=$(8533);Pe.exports=function D(T,M,z,B){if(!C(T))return T;for(var K=-1,te=(M=N(M,T)).length,j=te-1,q=T;null!=q&&++K<te;){var ae=P(M[K]),Q=z;if("__proto__"===ae||"constructor"===ae||"prototype"===ae)return T;if(K!=j){var ce=q[ae];void 0===(Q=B?B(ce,ae,q):void 0)&&(Q=C(ce)?ce:I(M[K+1])?[]:{})}G(q,ae,Q),q=q[ae]}return T}},3935:(Pe,Ne,$)=>{var G=$(443),N=$(4633),I=$(1503),C=$(4129),D=G?G.prototype:void 0,T=D?D.toString:void 0;Pe.exports=function M(z){if("string"==typeof z)return z;if(I(z))return N(z,M)+"";if(C(z))return T?T.call(z):"";var B=z+"";return"0"==B&&1/z==-1/0?"-0":B}},3348:(Pe,Ne,$)=>{var G=$(2760),N=/^\s+/;Pe.exports=function I(C){return C&&C.slice(0,G(C)+1).replace(N,"")}},6884:(Pe,Ne,$)=>{var G=$(1503),N=$(5352),I=$(2855),C=$(3943);Pe.exports=function P(D,T){return G(D)?D:N(D,T)?[D]:I(C(D))}},9454:Pe=>{Pe.exports=function Ne($,G){var N=-1,I=$.length;for(G||(G=Array(I));++N<I;)G[N]=$[N];return G}},4610:(Pe,Ne,$)=>{var G=$(2119);Pe.exports=G["__core-js_shared__"]},6713:(Pe,Ne,$)=>{var G=$(3436),N=function(){try{var I=G(Object,"defineProperty");return I({},"",{}),I}catch{}}();Pe.exports=N},9122:Pe=>{var Ne="object"==typeof global&&global&&global.Object===Object&&global;Pe.exports=Ne},4537:(Pe,Ne,$)=>{var G=$(3819);Pe.exports=function N(I,C){var P=I.__data__;return G(C)?P["string"==typeof C?"string":"hash"]:P.map}},3436:(Pe,Ne,$)=>{var G=$(7304),N=$(1990);Pe.exports=function I(C,P){var D=N(C,P);return G(D)?D:void 0}},1318:(Pe,Ne,$)=>{var G=$(443),N=Object.prototype,I=N.hasOwnProperty,C=N.toString,P=G?G.toStringTag:void 0;Pe.exports=function D(T){var M=I.call(T,P),z=T[P];try{T[P]=void 0;var B=!0}catch{}var K=C.call(T);return B&&(M?T[P]=z:delete T[P]),K}},1990:Pe=>{Pe.exports=function Ne($,G){return $?.[G]}},4312:(Pe,Ne,$)=>{var G=$(862);Pe.exports=function N(){this.__data__=G?G(null):{},this.size=0}},6421:Pe=>{Pe.exports=function Ne($){var G=this.has($)&&delete this.__data__[$];return this.size-=G?1:0,G}},5764:(Pe,Ne,$)=>{var G=$(862),C=Object.prototype.hasOwnProperty;Pe.exports=function P(D){var T=this.__data__;if(G){var M=T[D];return"__lodash_hash_undefined__"===M?void 0:M}return C.call(T,D)?T[D]:void 0}},8685:(Pe,Ne,$)=>{var G=$(862),I=Object.prototype.hasOwnProperty;Pe.exports=function C(P){var D=this.__data__;return G?void 0!==D[P]:I.call(D,P)}},6676:(Pe,Ne,$)=>{var G=$(862);Pe.exports=function I(C,P){var D=this.__data__;return this.size+=this.has(C)?0:1,D[C]=G&&void 0===P?"__lodash_hash_undefined__":P,this}},8442:Pe=>{var $=/^(?:0|[1-9]\d*)$/;Pe.exports=function G(N,I){var C=typeof N;return!!(I=I??9007199254740991)&&("number"==C||"symbol"!=C&&$.test(N))&&N>-1&&N%1==0&&N<I}},5352:(Pe,Ne,$)=>{var G=$(1503),N=$(4129),I=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,C=/^\w*$/;Pe.exports=function P(D,T){if(G(D))return!1;var M=typeof D;return!("number"!=M&&"symbol"!=M&&"boolean"!=M&&null!=D&&!N(D))||C.test(D)||!I.test(D)||null!=T&&D in Object(T)}},3819:Pe=>{Pe.exports=function Ne($){var G=typeof $;return"string"==G||"number"==G||"symbol"==G||"boolean"==G?"__proto__"!==$:null===$}},1943:(Pe,Ne,$)=>{var C,G=$(4610),N=(C=/[^.]+$/.exec(G&&G.keys&&G.keys.IE_PROTO||""))?"Symbol(src)_1."+C:"";Pe.exports=function I(C){return!!N&&N in C}},1840:Pe=>{Pe.exports=function Ne(){this.__data__=[],this.size=0}},4378:(Pe,Ne,$)=>{var G=$(3503),I=Array.prototype.splice;Pe.exports=function C(P){var D=this.__data__,T=G(D,P);return!(T<0||(T==D.length-1?D.pop():I.call(D,T,1),--this.size,0))}},4981:(Pe,Ne,$)=>{var G=$(3503);Pe.exports=function N(I){var C=this.__data__,P=G(C,I);return P<0?void 0:C[P][1]}},7343:(Pe,Ne,$)=>{var G=$(3503);Pe.exports=function N(I){return G(this.__data__,I)>-1}},8895:(Pe,Ne,$)=>{var G=$(3503);Pe.exports=function N(I,C){var P=this.__data__,D=G(P,I);return D<0?(++this.size,P.push([I,C])):P[D][1]=C,this}},638:(Pe,Ne,$)=>{var G=$(4994),N=$(9215),I=$(1501);Pe.exports=function C(){this.size=0,this.__data__={hash:new G,map:new(I||N),string:new G}}},1184:(Pe,Ne,$)=>{var G=$(4537);Pe.exports=function N(I){var C=G(this,I).delete(I);return this.size-=C?1:0,C}},866:(Pe,Ne,$)=>{var G=$(4537);Pe.exports=function N(I){return G(this,I).get(I)}},3771:(Pe,Ne,$)=>{var G=$(4537);Pe.exports=function N(I){return G(this,I).has(I)}},1772:(Pe,Ne,$)=>{var G=$(4537);Pe.exports=function N(I,C){var P=G(this,I),D=P.size;return P.set(I,C),this.size+=P.size==D?0:1,this}},719:(Pe,Ne,$)=>{var G=$(535);Pe.exports=function I(C){var P=G(C,function(T){return 500===D.size&&D.clear(),T}),D=P.cache;return P}},862:(Pe,Ne,$)=>{var N=$(3436)(Object,"create");Pe.exports=N},2902:Pe=>{var $=Object.prototype.toString;Pe.exports=function G(N){return $.call(N)}},2119:(Pe,Ne,$)=>{var G=$(9122),N="object"==typeof self&&self&&self.Object===Object&&self,I=G||N||Function("return this")();Pe.exports=I},2855:(Pe,Ne,$)=>{var G=$(719),N=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,I=/\\(\\)?/g,C=G(function(P){var D=[];return 46===P.charCodeAt(0)&&D.push(""),P.replace(N,function(T,M,z,B){D.push(z?B.replace(I,"$1"):M||T)}),D});Pe.exports=C},8533:(Pe,Ne,$)=>{var G=$(4129);Pe.exports=function I(C){if("string"==typeof C||G(C))return C;var P=C+"";return"0"==P&&1/C==-1/0?"-0":P}},2827:Pe=>{var $=Function.prototype.toString;Pe.exports=function G(N){if(null!=N){try{return $.call(N)}catch{}try{return N+""}catch{}}return""}},2760:Pe=>{var Ne=/\s/;Pe.exports=function $(G){for(var N=G.length;N--&&Ne.test(G.charAt(N)););return N}},406:(Pe,Ne,$)=>{var G=$(5940),N=$(1710),I=$(1467),P=Math.max,D=Math.min;Pe.exports=function T(M,z,B){var K,te,j,q,ae,Q,ce=0,ee=!1,Re=!1,de=!0;if("function"!=typeof M)throw new TypeError("Expected a function");function U(ye){var qe=K,ze=te;return K=te=void 0,ce=ye,q=M.apply(ze,qe)}function L(ye){return ce=ye,ae=setTimeout(ue,z),ee?U(ye):q}function J(ye){var qe=ye-Q;return void 0===Q||qe>=z||qe<0||Re&&ye-ce>=j}function ue(){var ye=N();if(J(ye))return ve(ye);ae=setTimeout(ue,function V(ye){var ke=z-(ye-Q);return Re?D(ke,j-(ye-ce)):ke}(ye))}function ve(ye){return ae=void 0,de&&K?U(ye):(K=te=void 0,q)}function Le(){var ye=N(),qe=J(ye);if(K=arguments,te=this,Q=ye,qe){if(void 0===ae)return L(Q);if(Re)return clearTimeout(ae),ae=setTimeout(ue,z),U(Q)}return void 0===ae&&(ae=setTimeout(ue,z)),q}return z=I(z)||0,G(B)&&(ee=!!B.leading,j=(Re="maxWait"in B)?P(I(B.maxWait)||0,z):j,de="trailing"in B?!!B.trailing:de),Le.cancel=function oe(){void 0!==ae&&clearTimeout(ae),ce=0,K=Q=te=ae=void 0},Le.flush=function xe(){return void 0===ae?q:ve(N())},Le}},217:Pe=>{Pe.exports=function Ne($,G){return $===G||$!=$&&G!=G}},8817:(Pe,Ne,$)=>{var G=$(5456);Pe.exports=function N(I,C,P){var D=null==I?void 0:G(I,C);return void 0===D?P:D}},1503:Pe=>{Pe.exports=Array.isArray},5946:(Pe,Ne,$)=>{var G=$(3337),N=$(5940);Pe.exports=function T(M){if(!N(M))return!1;var z=G(M);return"[object Function]"==z||"[object GeneratorFunction]"==z||"[object AsyncFunction]"==z||"[object Proxy]"==z}},5940:Pe=>{Pe.exports=function Ne($){var G=typeof $;return null!=$&&("object"==G||"function"==G)}},2671:Pe=>{Pe.exports=function Ne($){return null!=$&&"object"==typeof $}},4129:(Pe,Ne,$)=>{var G=$(3337),N=$(2671);Pe.exports=function C(P){return"symbol"==typeof P||N(P)&&"[object Symbol]"==G(P)}},535:(Pe,Ne,$)=>{var G=$(9850);function I(C,P){if("function"!=typeof C||null!=P&&"function"!=typeof P)throw new TypeError("Expected a function");var D=function(){var T=arguments,M=P?P.apply(this,T):T[0],z=D.cache;if(z.has(M))return z.get(M);var B=C.apply(this,T);return D.cache=z.set(M,B)||z,B};return D.cache=new(I.Cache||G),D}I.Cache=G,Pe.exports=I},1710:(Pe,Ne,$)=>{var G=$(2119);Pe.exports=function(){return G.Date.now()}},4793:(Pe,Ne,$)=>{var G=$(5963);Pe.exports=function N(I,C,P){return null==I?I:G(I,C,P)}},1467:(Pe,Ne,$)=>{var G=$(3348),N=$(5940),I=$(4129),P=/^[-+]0x[0-9a-f]+$/i,D=/^0b[01]+$/i,T=/^0o[0-7]+$/i,M=parseInt;Pe.exports=function z(B){if("number"==typeof B)return B;if(I(B))return NaN;if(N(B)){var K="function"==typeof B.valueOf?B.valueOf():B;B=N(K)?K+"":K}if("string"!=typeof B)return 0===B?B:+B;B=G(B);var te=D.test(B);return te||T.test(B)?M(B.slice(2),te?2:8):P.test(B)?NaN:+B}},4152:(Pe,Ne,$)=>{var G=$(4633),N=$(9454),I=$(1503),C=$(4129),P=$(2855),D=$(8533),T=$(3943);Pe.exports=function M(z){return I(z)?G(z,D):C(z)?[z]:N(P(T(z)))}},3943:(Pe,Ne,$)=>{var G=$(3935);Pe.exports=function N(I){return null==I?"":G(I)}},4308:(Pe,Ne,$)=>{Pe.exports=$(1358)},4512:Pe=>{"use strict";Pe.exports=class _V{constructor($,G=new Map,N=0){this.prefix=$,this._existing=G,this.counter=N}clone(){const{prefix:$,_existing:G,counter:N}=this;return new _V($,new Map(G),N)}getId($){const G=$&&this._existing.get($);if(G)return G;const N=this.prefix+this.counter;return this.counter++,$&&this._existing.set($,N),N}hasId($){return this._existing.has($)}getOldIds(){return[...this._existing.keys()]}}},7510:(Pe,Ne,$)=>{"use strict";var G=$(9344).default;$(6563);const N=self.crypto||self.msCrypto;Pe.exports=class{constructor(C){if(!N||!N.subtle)throw new Error("crypto.subtle not found.");if("sha256"===C)this.algorithm={name:"SHA-256"};else{if("sha1"!==C)throw new Error(`Unsupported algorithm "${C}".`);this.algorithm={name:"SHA-1"}}this._content=""}update(C){this._content+=C}digest(){var C=this;return G(function*(){const P=(new TextEncoder).encode(C._content),D=new Uint8Array(yield N.subtle.digest(C.algorithm,P));let T="";for(let M=0;M<D.length;++M)T+=D[M].toString(16).padStart(2,"0");return T})()}}},5090:Pe=>{"use strict";const G="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",N="http://www.w3.org/2001/XMLSchema#string",I="NamedNode",C="BlankNode",P="Literal",D="DefaultGraph",T={};function M(j,q){return j.subject.termType===q.subject.termType&&j.object.termType===q.object.termType&&j.subject.value===q.subject.value&&j.predicate.value===q.predicate.value&&j.object.value===q.object.value&&(j.object.termType!==P||j.object.datatype.termType===q.object.datatype.termType&&j.object.language===q.object.language&&j.object.datatype.value===q.object.datatype.value)}(()=>{const j="(?:<([^:]+:[^>]*)>)",ae="A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_",Q=ae+"0-9-\xb7\u0300-\u036f\u203f-\u2040",ee="(_:(?:["+ae+"0-9])(?:(?:["+Q+".])*(?:["+Q+"]))?)",V="[ \\t]+",J="[ \\t]*",ue="(?:"+j+"|"+ee+")"+V,ve=j+V,oe="(?:"+j+"|"+ee+'|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^'+j+")|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))"+J,xe="(?:\\.|(?:(?:"+j+"|"+ee+")"+J+"\\.))";T.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,T.empty=new RegExp("^"+J+"$"),T.quad=new RegExp("^"+J+ue+ve+oe+xe+J+"$")})(),Pe.exports=class h_{static parse(q){const ae=[],Q={},ce=q.split(T.eoln);let ee=0;for(const Re of ce){if(ee++,T.empty.test(Re))continue;const de=Re.match(T.quad);if(null===de)throw new Error("N-Quads parse error on line "+ee+".");const U={subject:null,predicate:null,object:null,graph:null};if(U.subject=void 0!==de[1]?{termType:I,value:de[1]}:{termType:C,value:de[2]},U.predicate={termType:I,value:de[3]},void 0!==de[4]?U.object={termType:I,value:de[4]}:void 0!==de[5]?U.object={termType:C,value:de[5]}:(U.object={termType:P,value:void 0,datatype:{termType:I}},void 0!==de[7]?U.object.datatype.value=de[7]:void 0!==de[8]?(U.object.datatype.value=G,U.object.language=de[8]):U.object.datatype.value=N,U.object.value=de[6].replace(K,function(q,ae,Q,ce){if(ae)switch(ae){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(Q)return String.fromCharCode(parseInt(Q,16));if(ce)throw new Error("Unsupported U escape")})),U.graph=void 0!==de[9]?{termType:I,value:de[9]}:void 0!==de[10]?{termType:C,value:de[10]}:{termType:D,value:""},U.graph.value in Q){let L=!0;const V=Q[U.graph.value];for(const J of V)if(M(J,U)){L=!1;break}L&&(V.push(U),ae.push(U))}else Q[U.graph.value]=[U],ae.push(U)}return ae}static serialize(q){Array.isArray(q)||(q=h_.legacyDatasetToQuads(q));const ae=[];for(const Q of q)ae.push(h_.serializeQuad(Q));return ae.sort().join("")}static serializeQuadComponents(q,ae,Q,ce){let ee="";return ee+=q.termType===I?`<${q.value}>`:`${q.value}`,ee+=` <${ae.value}> `,Q.termType===I?ee+=`<${Q.value}>`:Q.termType===C?ee+=Q.value:(ee+=`"${function B(j){return j.replace(z,function(q){switch(q){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}})}(Q.value)}"`,Q.datatype.value===G?Q.language&&(ee+=`@${Q.language}`):Q.datatype.value!==N&&(ee+=`^^<${Q.datatype.value}>`)),ce.termType===I?ee+=` <${ce.value}>`:ce.termType===C&&(ee+=` ${ce.value}`),ee+=" .\n",ee}static serializeQuad(q){return h_.serializeQuadComponents(q.subject,q.predicate,q.object,q.graph)}static legacyDatasetToQuads(q){const ae=[],Q={"blank node":C,IRI:I,literal:P};for(const ce in q)q[ce].forEach(Re=>{const de={};for(const U in Re){const L=Re[U],V={termType:Q[L.type],value:L.value};V.termType===P&&(V.datatype={termType:I},"datatype"in L&&(V.datatype.value=L.datatype),"language"in L?("datatype"in L||(V.datatype.value=G),V.language=L.language):"datatype"in L||(V.datatype.value=N)),de[U]=V}de.graph="@default"===ce?{termType:D,value:""}:{termType:ce.startsWith("_:")?C:I,value:ce},ae.push(de)});return ae}};const z=/["\\\n\r]/g,K=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g},5067:Pe=>{"use strict";Pe.exports=class{constructor($){this.current=$.sort(),this.done=!1,this.dir=new Map;for(let G=0;G<$.length;++G)this.dir.set($[G],!0)}hasNext(){return!this.done}next(){const{current:$,dir:G}=this,N=$.slice();let I=null,C=0;const P=$.length;for(let D=0;D<P;++D){const T=$[D],M=G.get(T);(null===I||T>I)&&(M&&D>0&&T>$[D-1]||!M&&D<P-1&&T>$[D+1])&&(I=T,C=D)}if(null===I)this.done=!0;else{const D=G.get(I)?C-1:C+1;$[C]=$[D],$[D]=I;for(const T of $)T>I&&G.set(T,!G.get(T))}return N}}},4103:(Pe,Ne,$)=>{"use strict";var G=$(9344).default;const N=$(4512),I=$(7510),C=$(5067),P=$(5090);function D(T,M){return T.hash<M.hash?-1:T.hash>M.hash?1:0}Pe.exports=class{constructor({createMessageDigest:M=(()=>new I("sha256")),maxDeepIterations:z=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new N("_:c14n"),this.createMessageDigest=M,this.maxDeepIterations=z,this.quads=null,this.deepIterations=null}main(M){var z=this;return G(function*(){z.deepIterations=new Map,z.quads=M;for(const Q of M)z._addBlankNodeQuadInfo({quad:Q,component:Q.subject}),z._addBlankNodeQuadInfo({quad:Q,component:Q.object}),z._addBlankNodeQuadInfo({quad:Q,component:Q.graph});const B=new Map,K=[...z.blankNodeInfo.keys()];let te=0;for(const Q of K)++te%100==0&&(yield z._yield()),yield z._hashAndTrackBlankNode({id:Q,hashToBlankNodes:B});const j=[...B.keys()].sort(),q=[];for(const Q of j){const ce=B.get(Q);ce.length>1?q.push(ce):z.canonicalIssuer.getId(ce[0])}for(const Q of q){const ce=[];for(const ee of Q){if(z.canonicalIssuer.hasId(ee))continue;const Re=new N("_:b");Re.getId(ee);const de=yield z.hashNDegreeQuads(ee,Re);ce.push(de)}ce.sort(D);for(const ee of ce){const Re=ee.issuer.getOldIds();for(const de of Re)z.canonicalIssuer.getId(de)}}const ae=[];for(const Q of z.quads){const ce=P.serializeQuadComponents(z._componentWithCanonicalId(Q.subject),Q.predicate,z._componentWithCanonicalId(Q.object),z._componentWithCanonicalId(Q.graph));ae.push(ce)}return ae.sort(),ae.join("")})()}hashFirstDegreeQuads(M){var z=this;return G(function*(){const B=[],K=z.blankNodeInfo.get(M),te=K.quads;for(const q of te){const ae={subject:null,predicate:q.predicate,object:null,graph:null};ae.subject=z.modifyFirstDegreeComponent(M,q.subject,"subject"),ae.object=z.modifyFirstDegreeComponent(M,q.object,"object"),ae.graph=z.modifyFirstDegreeComponent(M,q.graph,"graph"),B.push(P.serializeQuad(ae))}B.sort();const j=z.createMessageDigest();for(const q of B)j.update(q);return K.hash=yield j.digest(),K.hash})()}hashRelatedBlankNode(M,z,B,K){var te=this;return G(function*(){let j;j=te.canonicalIssuer.hasId(M)?te.canonicalIssuer.getId(M):B.hasId(M)?B.getId(M):te.blankNodeInfo.get(M).hash;const q=te.createMessageDigest();return q.update(K),"g"!==K&&q.update(te.getRelatedPredicate(z)),q.update(j),q.digest()})()}hashNDegreeQuads(M,z){var B=this;return G(function*(){const K=B.deepIterations.get(M)||0;if(K>B.maxDeepIterations)throw new Error(`Maximum deep iterations (${B.maxDeepIterations}) exceeded.`);B.deepIterations.set(M,K+1);const te=B.createMessageDigest(),j=yield B.createHashToRelated(M,z),q=[...j.keys()].sort();for(const ae of q){te.update(ae);let ce,Q="";const ee=new C(j.get(ae));let Re=0;for(;ee.hasNext();){const de=ee.next();++Re%3==0&&(yield B._yield());let U=z.clone(),L="";const V=[];let J=!1;for(const ue of de)if(B.canonicalIssuer.hasId(ue)?L+=B.canonicalIssuer.getId(ue):(U.hasId(ue)||V.push(ue),L+=U.getId(ue)),0!==Q.length&&L>Q){J=!0;break}if(!J){for(const ue of V){const ve=yield B.hashNDegreeQuads(ue,U);if(L+=U.getId(ue),L+=`<${ve.hash}>`,U=ve.issuer,0!==Q.length&&L>Q){J=!0;break}}J||(0===Q.length||L<Q)&&(Q=L,ce=U)}}te.update(Q),z=ce}return{hash:yield te.digest(),issuer:z}})()}modifyFirstDegreeComponent(M,z){return"BlankNode"!==z.termType?z:{termType:"BlankNode",value:z.value===M?"_:a":"_:z"}}getRelatedPredicate(M){return`<${M.predicate.value}>`}createHashToRelated(M,z){var B=this;return G(function*(){const K=new Map,te=B.blankNodeInfo.get(M).quads;let j=0;for(const q of te)++j%100==0&&(yield B._yield()),yield Promise.all([B._addRelatedBlankNodeHash({quad:q,component:q.subject,position:"s",id:M,issuer:z,hashToRelated:K}),B._addRelatedBlankNodeHash({quad:q,component:q.object,position:"o",id:M,issuer:z,hashToRelated:K}),B._addRelatedBlankNodeHash({quad:q,component:q.graph,position:"g",id:M,issuer:z,hashToRelated:K})]);return K})()}_hashAndTrackBlankNode({id:M,hashToBlankNodes:z}){var B=this;return G(function*(){const K=yield B.hashFirstDegreeQuads(M),te=z.get(K);te?te.push(M):z.set(K,[M])})()}_addBlankNodeQuadInfo({quad:M,component:z}){if("BlankNode"!==z.termType)return;const B=z.value,K=this.blankNodeInfo.get(B);K?K.quads.add(M):this.blankNodeInfo.set(B,{quads:new Set([M]),hash:null})}_addRelatedBlankNodeHash({quad:M,component:z,position:B,id:K,issuer:te,hashToRelated:j}){var q=this;return G(function*(){if("BlankNode"!==z.termType||z.value===K)return;const ae=z.value,Q=yield q.hashRelatedBlankNode(ae,M,te,B),ce=j.get(Q);ce?ce.push(ae):j.set(Q,[ae])})()}_componentWithCanonicalId(M){return"BlankNode"!==M.termType||M.value.startsWith(this.canonicalIssuer.prefix)?M:{termType:"BlankNode",value:this.canonicalIssuer.getId(M.value)}}_yield(){return G(function*(){return new Promise(M=>setImmediate(M))})()}}},526:(Pe,Ne,$)=>{"use strict";const G=$(4512),N=$(7510),I=$(5067),C=$(5090);function P(D,T){return D.hash<T.hash?-1:D.hash>T.hash?1:0}Pe.exports=class{constructor({createMessageDigest:T=(()=>new N("sha256")),maxDeepIterations:M=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new G("_:c14n"),this.createMessageDigest=T,this.maxDeepIterations=M,this.quads=null,this.deepIterations=null}main(T){this.deepIterations=new Map,this.quads=T;for(const j of T)this._addBlankNodeQuadInfo({quad:j,component:j.subject}),this._addBlankNodeQuadInfo({quad:j,component:j.object}),this._addBlankNodeQuadInfo({quad:j,component:j.graph});const M=new Map,z=[...this.blankNodeInfo.keys()];for(const j of z)this._hashAndTrackBlankNode({id:j,hashToBlankNodes:M});const B=[...M.keys()].sort(),K=[];for(const j of B){const q=M.get(j);q.length>1?K.push(q):this.canonicalIssuer.getId(q[0])}for(const j of K){const q=[];for(const ae of j){if(this.canonicalIssuer.hasId(ae))continue;const Q=new G("_:b");Q.getId(ae);const ce=this.hashNDegreeQuads(ae,Q);q.push(ce)}q.sort(P);for(const ae of q){const Q=ae.issuer.getOldIds();for(const ce of Q)this.canonicalIssuer.getId(ce)}}const te=[];for(const j of this.quads){const q=C.serializeQuadComponents(this._componentWithCanonicalId({component:j.subject}),j.predicate,this._componentWithCanonicalId({component:j.object}),this._componentWithCanonicalId({component:j.graph}));te.push(q)}return te.sort(),te.join("")}hashFirstDegreeQuads(T){const M=[],z=this.blankNodeInfo.get(T),B=z.quads;for(const te of B){const j={subject:null,predicate:te.predicate,object:null,graph:null};j.subject=this.modifyFirstDegreeComponent(T,te.subject,"subject"),j.object=this.modifyFirstDegreeComponent(T,te.object,"object"),j.graph=this.modifyFirstDegreeComponent(T,te.graph,"graph"),M.push(C.serializeQuad(j))}M.sort();const K=this.createMessageDigest();for(const te of M)K.update(te);return z.hash=K.digest(),z.hash}hashRelatedBlankNode(T,M,z,B){let K;K=this.canonicalIssuer.hasId(T)?this.canonicalIssuer.getId(T):z.hasId(T)?z.getId(T):this.blankNodeInfo.get(T).hash;const te=this.createMessageDigest();return te.update(B),"g"!==B&&te.update(this.getRelatedPredicate(M)),te.update(K),te.digest()}hashNDegreeQuads(T,M){const z=this.deepIterations.get(T)||0;if(z>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(T,z+1);const B=this.createMessageDigest(),K=this.createHashToRelated(T,M),te=[...K.keys()].sort();for(const j of te){B.update(j);let ae,q="";const Q=new I(K.get(j));for(;Q.hasNext();){const ce=Q.next();let ee=M.clone(),Re="";const de=[];let U=!1;for(const L of ce)if(this.canonicalIssuer.hasId(L)?Re+=this.canonicalIssuer.getId(L):(ee.hasId(L)||de.push(L),Re+=ee.getId(L)),0!==q.length&&Re>q){U=!0;break}if(!U){for(const L of de){const V=this.hashNDegreeQuads(L,ee);if(Re+=ee.getId(L),Re+=`<${V.hash}>`,ee=V.issuer,0!==q.length&&Re>q){U=!0;break}}U||(0===q.length||Re<q)&&(q=Re,ae=ee)}}B.update(q),M=ae}return{hash:B.digest(),issuer:M}}modifyFirstDegreeComponent(T,M){return"BlankNode"!==M.termType?M:{termType:"BlankNode",value:M.value===T?"_:a":"_:z"}}getRelatedPredicate(T){return`<${T.predicate.value}>`}createHashToRelated(T,M){const z=new Map,B=this.blankNodeInfo.get(T).quads;for(const K of B)this._addRelatedBlankNodeHash({quad:K,component:K.subject,position:"s",id:T,issuer:M,hashToRelated:z}),this._addRelatedBlankNodeHash({quad:K,component:K.object,position:"o",id:T,issuer:M,hashToRelated:z}),this._addRelatedBlankNodeHash({quad:K,component:K.graph,position:"g",id:T,issuer:M,hashToRelated:z});return z}_hashAndTrackBlankNode({id:T,hashToBlankNodes:M}){const z=this.hashFirstDegreeQuads(T),B=M.get(z);B?B.push(T):M.set(z,[T])}_addBlankNodeQuadInfo({quad:T,component:M}){if("BlankNode"!==M.termType)return;const z=M.value,B=this.blankNodeInfo.get(z);B?B.quads.add(T):this.blankNodeInfo.set(z,{quads:new Set([T]),hash:null})}_addRelatedBlankNodeHash({quad:T,component:M,position:z,id:B,issuer:K,hashToRelated:te}){if("BlankNode"!==M.termType||M.value===B)return;const j=M.value,q=this.hashRelatedBlankNode(j,T,K,z),ae=te.get(q);ae?ae.push(j):te.set(q,[j])}_componentWithCanonicalId({component:T}){return"BlankNode"!==T.termType||T.value.startsWith(this.canonicalIssuer.prefix)?T:{termType:"BlankNode",value:this.canonicalIssuer.getId(T.value)}}}},1359:(Pe,Ne,$)=>{"use strict";var G=$(9344).default;const N=$(7510),I=$(4103);Pe.exports=class extends I{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new N("sha1")}modifyFirstDegreeComponent(P,D,T){return"BlankNode"!==D.termType?D:"graph"===T?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:D.value===P?"_:a":"_:z"}}getRelatedPredicate(P){return P.predicate.value}createHashToRelated(P,D){var T=this;return G(function*(){const M=new Map,z=T.blankNodeInfo.get(P).quads;let B=0;for(const K of z){let te,j;if("BlankNode"===K.subject.termType&&K.subject.value!==P)j=K.subject.value,te="p";else{if("BlankNode"!==K.object.termType||K.object.value===P)continue;j=K.object.value,te="r"}++B%100==0&&(yield T._yield());const q=yield T.hashRelatedBlankNode(j,K,D,te),ae=M.get(q);ae?ae.push(j):M.set(q,[j])}return M})()}}},7492:(Pe,Ne,$)=>{"use strict";const G=$(7510),N=$(526);Pe.exports=class extends N{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new G("sha1")}modifyFirstDegreeComponent(C,P,D){return"BlankNode"!==P.termType?P:"graph"===D?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:P.value===C?"_:a":"_:z"}}getRelatedPredicate(C){return C.predicate.value}createHashToRelated(C,P){const D=new Map,T=this.blankNodeInfo.get(C).quads;for(const M of T){let z,B;if("BlankNode"===M.subject.termType&&M.subject.value!==C)B=M.subject.value,z="p";else{if("BlankNode"!==M.object.termType||M.object.value===C)continue;B=M.object.value,z="r"}const K=this.hashRelatedBlankNode(B,M,P,z),te=D.get(K);te?te.push(B):D.set(K,[B])}return D}}},1358:(Pe,Ne,$)=>{"use strict";var G=$(9344).default;const N=$(4103),I=$(1359),C=$(526),P=$(7492);let D;try{D=$(7670)}catch{}Ne.NQuads=$(5090),Ne.IdentifierIssuer=$(4512),Ne._rdfCanonizeNative=function(T){return T&&(D=T),D},Ne.canonize=function(){var T=G(function*(M,z){if(Array.isArray(M)||(M=Ne.NQuads.legacyDatasetToQuads(M)),z.useNative){if(!D)throw new Error("rdf-canonize-native not available");if(z.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return new Promise((B,K)=>D.canonize(M,z,(te,j)=>te?K(te):B(j)))}if("URDNA2015"===z.algorithm)return new N(z).main(M);if("URGNA2012"===z.algorithm){if(z.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new I(z).main(M)}throw"algorithm"in z?new Error("Invalid RDF Dataset Canonicalization algorithm: "+z.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")});return function(M,z){return T.apply(this,arguments)}}(),Ne._canonizeSync=function(T,M){if(Array.isArray(T)||(T=Ne.NQuads.legacyDatasetToQuads(T)),M.useNative){if(!D)throw new Error("rdf-canonize-native not available");if(M.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return D.canonizeSync(T,M)}if("URDNA2015"===M.algorithm)return new C(M).main(T);if("URGNA2012"===M.algorithm){if(M.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new P(M).main(T)}throw"algorithm"in M?new Error("Invalid RDF Dataset Canonicalization algorithm: "+M.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}},6563:function(){!function(Pe,Ne){"use strict";if(!Pe.setImmediate){var C,$=1,G={},N=!1,I=Pe.document,ae=Object.getPrototypeOf&&Object.getPrototypeOf(Pe);ae=ae&&ae.setTimeout?ae:Pe,"[object process]"==={}.toString.call(Pe.process)?function z(){C=function(Q){process.nextTick(function(){M(Q)})}}():function B(){if(Pe.postMessage&&!Pe.importScripts){var Q=!0,ce=Pe.onmessage;return Pe.onmessage=function(){Q=!1},Pe.postMessage("","*"),Pe.onmessage=ce,Q}}()?function K(){var Q="setImmediate$"+Math.random()+"$",ce=function(ee){ee.source===Pe&&"string"==typeof ee.data&&0===ee.data.indexOf(Q)&&M(+ee.data.slice(Q.length))};Pe.addEventListener?Pe.addEventListener("message",ce,!1):Pe.attachEvent("onmessage",ce),C=function(ee){Pe.postMessage(Q+ee,"*")}}():Pe.MessageChannel?function te(){var Q=new MessageChannel;Q.port1.onmessage=function(ce){M(ce.data)},C=function(ce){Q.port2.postMessage(ce)}}():I&&"onreadystatechange"in I.createElement("script")?function j(){var Q=I.documentElement;C=function(ce){var ee=I.createElement("script");ee.onreadystatechange=function(){M(ce),ee.onreadystatechange=null,Q.removeChild(ee),ee=null},Q.appendChild(ee)}}():function q(){C=function(Q){setTimeout(M,0,Q)}}(),ae.setImmediate=function P(Q){"function"!=typeof Q&&(Q=new Function(""+Q));for(var ce=new Array(arguments.length-1),ee=0;ee<ce.length;ee++)ce[ee]=arguments[ee+1];var Re={callback:Q,args:ce};return G[$]=Re,C($),$++},ae.clearImmediate=D}function D(Q){delete G[Q]}function M(Q){if(N)setTimeout(M,0,Q);else{var ce=G[Q];if(ce){N=!0;try{!function T(Q){var ce=Q.callback,ee=Q.args;switch(ee.length){case 0:ce();break;case 1:ce(ee[0]);break;case 2:ce(ee[0],ee[1]);break;case 3:ce(ee[0],ee[1],ee[2]);break;default:ce.apply(void 0,ee)}}(ce)}finally{D(Q),N=!1}}}}}(typeof self>"u"?typeof global>"u"?this:global:self)},7670:()=>{},9344:Pe=>{function Ne(G,N,I,C,P,D,T){try{var M=G[D](T),z=M.value}catch(B){return void I(B)}M.done?N(z):Promise.resolve(z).then(C,P)}Pe.exports=function $(G){return function(){var N=this,I=arguments;return new Promise(function(C,P){var D=G.apply(N,I);function T(z){Ne(D,C,P,T,M,"next",z)}function M(z){Ne(D,C,P,T,M,"throw",z)}T(void 0)})}},Pe.exports.__esModule=!0,Pe.exports.default=Pe.exports}},Pe=>{Pe(Pe.s=4856)}]);